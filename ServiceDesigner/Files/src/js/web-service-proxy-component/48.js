(self.webpackChunkapp_studio_enterprise_web_service=self.webpackChunkapp_studio_enterprise_web_service||[]).push([[48],{61748:(S,Ge,f)=>{var k={"./basketball.json":[81760,760],"./cat.json":[3254,254],"./copilot.json":[54478,478],"./raccoon.json":[5191,191]};function D(n){if(!f.o(k,n))return Promise.resolve().then(()=>{var w=new Error("Cannot find module '"+n+"'");throw w.code="MODULE_NOT_FOUND",w});var x=k[n],F=x[0];return f.e(x[1]).then(()=>f.t(F,19))}D.keys=()=>Object.keys(k),D.id=61748,S.exports=D},49735:(S,Ge,f)=>{var k={"./autonumber-icon.svg":60046,"./binary-icon.svg":48941,"./boolean-icon.svg":13742,"./color-icon.svg":67765,"./date-icon.svg":17129,"./date-time-icon.svg":46684,"./email-text-icon.svg":22023,"./float-icon.svg":53073,"./function-icon.svg":85303,"./guid-icon.svg":3465,"./image-icon.svg":99104,"./image-link-icon.svg":35647,"./integer-icon.svg":41337,"./lookup-icon.svg":250,"./phone-text-icon.svg":88517,"./rich-text-icon.svg":80705,"./string-icon.svg":84764,"./time-icon.svg":85443,"./web-text-icon.svg":4907};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=49735},87197:(S,Ge,f)=>{var k={"./default-file-icon.svg":89743,"./file-excel.svg":22249,"./file-image.svg":8379,"./file-pdf.svg":96870,"./file-powerpoint.svg":77374,"./file-word.svg":74154};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=87197},20695:(S,Ge,f)=>{var k={"./default-file-icon.svg":51868,"./file-excel.svg":79143,"./file-image.svg":68523,"./file-pdf.svg":76655,"./file-powerpoint.svg":13117,"./file-word.svg":1850,"./large/default-file-icon.svg":89743,"./large/file-excel.svg":22249,"./large/file-image.svg":8379,"./large/file-pdf.svg":96870,"./large/file-powerpoint.svg":77374,"./large/file-word.svg":74154};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=20695},20470:(S,Ge,f)=>{var k={"./flex-column-icon.svg":80805,"./flex-row-icon.svg":15335};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=20470},83028:(S,Ge,f)=>{var k={"./grid-area-1-icon.svg":85482,"./grid-column-1-icon.svg":96153,"./grid-column-2-icon.svg":38926,"./grid-column-3-icon.svg":73953,"./grid-column-4-icon.svg":39079};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=83028},38280:(S,Ge,f)=>{var k={"./datetime-picker-calendar-icon.svg":54422};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=38280},86634:(S,Ge,f)=>{var k={"./datetime-picker-toggle-date-icon.svg":21695,"./datetime-picker-toggle-time-icon.svg":89854};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=86634},71477:(S,Ge,f)=>{var k={"./error-icon.svg":58796,"./warning-icon.svg":11342};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=71477},88395:(S,Ge,f)=>{var k={"./collapse.svg":67525};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=88395},46377:(S,Ge,f)=>{var k={"./arrow-down.svg":36141,"./full-screen-close.svg":15894,"./full-screen-open.svg":30360,"./info.svg":75741,"./settings.svg":22574,"./show-more-icon.svg":80507};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=46377},43669:(S,Ge,f)=>{"use strict";f.r(Ge);var k=f(84693),D=f(37686),n=f(36599),x=f(85193),F=f(25544),w=f(56707),y=f(30660),u=f(33376),P=f(74970),h=f(27969),we=f(79676);const SM=new n.InjectionToken("CustomEventApplicationIdToken");new n.InjectionToken("CustomEventServiceToken");class Ye{constructor(e,t=null){this.document=e,this.appId=t,this.customEventName="TSCustomEventChannel",this.appId=t||Math.random().toString()}subscribe(e){return this.customEventObserver$=this.customEventObserver$||(0,u.fromEvent)(document,this.customEventName),this.customEventObserver$.pipe((0,P.h)(t=>t.detail.eventName===e&&t.detail.sender!==this.appId),(0,h.U)(t=>t.detail.payload))}createOutboundChannel(e){const t=new u.Subject;return t.asObservable().subscribe(i=>{const r=new CustomEvent(this.customEventName,{detail:{eventName:e,sender:this.appId,payload:i}});this.document.dispatchEvent(r)}),t}getDataViaEvent(e,t={}){return new u.Observable(i=>{this.subscribe(e).pipe((0,we.P)()).subscribe(r=>{i.next(r),i.complete()}),this.createOutboundChannel(e).next(t)})}getDataStreamViaEvent(e,t={}){return new u.Observable(i=>{const r=this.subscribe(e).subscribe(s=>{i.next(s)},u.noop,()=>i.complete());return this.createOutboundChannel(e).next(t),()=>{r.unsubscribe()}})}}Ye.\u0275fac=function(e){return new(e||Ye)(n.\u0275\u0275inject(y.DOCUMENT),n.\u0275\u0275inject(SM,8))},Ye.\u0275prov=n.\u0275\u0275defineInjectable({token:Ye,factory:Ye.\u0275fac,providedIn:"root"});var vM=f(23358),NS=f.n(vM);const DM=()=>new RegExp("(?=^.{1,250}$)^[\u0430-\u044f\u0410-\u042fa-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\u0430-\u044f\u0410-\u042fa-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[\u0430-\u044f\u0410-\u042fa-zA-Z0-9](?:[\u0430-\u044f\u0410-\u042fa-zA-Z0-9-]*[\u0430-\u044f\u0410-\u042fa-zA-Z0-9])?\\.)+[\u0430-\u044f\u0410-\u042fa-zA-Z0-9](?:[\u0430-\u044f\u0410-\u042fa-zA-Z0-9-]*[\u0430-\u044f\u0410-\u042fa-zA-Z0-9])?$","g");const VS_name="uponSanitizeElement",VS_func=(a,e)=>{const t=e.tagName;(function MM(a){return DM().test(a)})(t)&&a.insertAdjacentText("afterbegin",`<${t}>`)},FS=new n.InjectionToken("Represents a DOM purifier",{factory:()=>(NS().addHook(VS_name,VS_func),NS()),providedIn:"platform"});var l=f(55069);class xM{static create(e){return new e}}class Pt{constructor(){this.speechResult=new u.Subject,this.speechEnd=new u.Subject}static _getInternalApiClass(){return window.SpeechRecognition||window.webkitSpeechRecognition}static isSupported(){return void 0!==Pt._getInternalApiClass()}_subscribeEvents(){this._internalApi.addEventListener("result",this.onResult.bind(this)),this._internalApi.addEventListener("speechend",this.onSpeechEnd.bind(this))}_unsubscribeEvents(){this._internalApi.removeEventListener("result",this.onResult),this._internalApi.removeEventListener("speechend",this.onSpeechEnd)}init(e){const t=Pt._getInternalApiClass();this._internalApi=xM.create(t),this._internalApi.continuous=!0,this._internalApi.lang=e.lang||"en-US",this._subscribeEvents()}onResult(e){const{resultIndex:t,results:i}=e,r=i[t][0];if(!r)throw new Error("No results to transcript");this.speechResult.next(r.transcript)}onSpeechEnd(){this.speechEnd.next()}destroy(){this._unsubscribeEvents(),this._internalApi=null}startRecognition(){this._internalApi.start()}stopRecognition(){this._internalApi.stop()}}Pt.\u0275fac=function(e){return new(e||Pt)},Pt.\u0275prov=n.\u0275\u0275defineInjectable({token:Pt,factory:Pt.\u0275fac});var EM=f(37044);class TM{get messages$(){return this._messages$}constructor(e,t){this._ngZone=t;const i=new u.Subject;this._messages$=i.pipe(this._runInZone(this._ngZone)),this._broadcastChannel=new EM.g0(e),this._broadcastChannel.onmessage=r=>i.next(r)}_runInZone(e){return t=>new u.Observable(i=>{t.subscribe(r=>e.run(()=>i.next(r)))})}publish(e){return(0,u.from)(this._broadcastChannel.postMessage(e))}}class lo{constructor(e){this._ngZone=e}createInstance(e){return new TM(e,this._ngZone)}}lo.\u0275fac=function(e){return new(e||lo)(n.\u0275\u0275inject(n.NgZone))},lo.\u0275prov=n.\u0275\u0275defineInjectable({token:lo,factory:lo.\u0275fac,providedIn:"root"});class PM{static toColdObservable(e){return new u.Observable(t=>{e().subscribe(r=>{t.next(r),t.complete()})})}}class wa{log(e,t,...i){console.log(e,...i)}warn(e,t,...i){console.warn(e,...i)}error(e,t,...i){console.error(e,...i)}exception(e,t,...i){(console.exception||console.error)(e,...i)}}wa.\u0275fac=function(e){return new(e||wa)},wa.\u0275prov=n.\u0275\u0275defineInjectable({token:wa,factory:wa.\u0275fac});class bu{constructor(e,t,i=null){this._injector=e,this._registrationMap=t,this._defaultInstanceType=i}_getInstance(e,t){return t?"injectable"in t&&null!=t.injectable?this._injector.get(t.injectable):"useFactory"in t&&"function"==typeof t.useFactory?t.useFactory(e):"useValue"in t?t.useValue:null:null}_getDefaultInstance(e){return this._getInstance(e,this._defaultInstanceType)}_getInstanceByType(e){if(this._registrationMap.has(e)){const t=this._registrationMap.get(e);return this._getInstance(e,t)}}_getInstanceByPredicate(e){for(const[t,i]of this._registrationMap)if("function"==typeof t&&t(e))return this._getInstance(e,i)}create(e=null){return null==e?this._getDefaultInstance(e):this._getInstanceByType(e)??this._getInstanceByPredicate(e)??this._getDefaultInstance(e)}}bu.\u0275fac=function(e){n.\u0275\u0275invalidFactory()},bu.\u0275prov=n.\u0275\u0275defineInjectable({token:bu,factory:bu.\u0275fac,providedIn:"root"});var At=f(7403);class bn{static _createMappings(e){const t=new Map;return(e=e??[]).forEach(i=>{const r=i.predicate,s=(0,At.Z)(i,"predicate");t.set(r,s)}),t}static create(e){const{mappings:t,default:i,token:r}=e??{};return{provide:r,useFactory:s=>{const o=this._createMappings(t);return new bu(s,o,i)},deps:[n.Injector]}}}class zf{setNext(e){return this.nextHandler=e,e}handle(e){if(this.nextHandler)return this.nextHandler.handle(e)}}const LS=new n.InjectionToken("I18nTranslatesToken");var Hf=f(75079),L=f(13528);class xa{constructor(e,t){this._translateService=e,this._i18nTranslates=t,this._destroyed$=new u.Subject,this._init()}_init(){this._subscribe(),this._initDefaultLanguage()}_initDefaultLanguage(){const e=this._translateService.currentLang,t=this._translateService.defaultLang,i=e||t;i&&this._addTranslates(i)}_subscribe(){(0,u.merge)(this._translateService.onLangChange,this._translateService.onDefaultLangChange).pipe((0,L.R)(this._destroyed$)).subscribe(e=>this._addTranslates(e.lang))}_addTranslates(e){const t=(0,Hf.Z)(this._i18nTranslates),i=this._translateService.defaultLang;t.forEach(r=>{const s=r[e],o=r[i];this._translateService.setTranslation(e,s,!0),this._translateService.setTranslation(i,o,!0)})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}xa.\u0275fac=function(e){return new(e||xa)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(LS))},xa.\u0275prov=n.\u0275\u0275defineInjectable({token:xa,factory:xa.\u0275fac});class Rt{constructor(e){this._crtLibTranslateService=e}static forRoot(e){return{ngModule:Rt,providers:[{multi:!0,provide:LS,useValue:e.i18n},xa]}}}Rt.\u0275fac=function(e){return new(e||Rt)(n.\u0275\u0275inject(xa))},Rt.\u0275mod=n.\u0275\u0275defineNgModule({type:Rt}),Rt.\u0275inj=n.\u0275\u0275defineInjector({imports:[w.aw]});var AM=f(78910);function Zf(a){return Array.isArray(a)?a:[a]}function qf(a,e){if(!a)return"";if(!e)return a;let t=[a];return t=function kM(a,e){if(!a)return[];let t=Zf(a);if(!e)return t;const i=Zf(e),r=i.map(({replaceMacros:s})=>s);return i.forEach(({searchValue:s,replaceMacros:o})=>{if(s&&o){const c=new RegExp(`(${o})`,"g"),d=t.map(p=>r.includes(p)?p:p.split(s).join(o).split(c));t=(0,AM.Z)(d)}}),t}(t,e=Zf(e)),t=function RM(a,e){return e.forEach(({replaceMacros:t,replaceValue:i})=>{a=a.map(r=>r===t?i??"":r)}),a}(t,e),t.join("")}f(78320);function en(a){return function(e){Reflect.defineMetadata("requestType",a.requestType,e)}}var vu=f(44551),B=f(54882),M=f(61528);function OS(a){return e=>e.pipe((0,vu.b)((t,i)=>a(t,i).pipe((0,h.U)(r=>[t,r]))))}function $f(a){return e=>e.pipe((0,B.z)((t,i)=>a(t,i).pipe((0,h.U)(()=>t))))}function jS(a){return e=>e.pipe((0,M.w)((t,i)=>a(t,i).pipe((0,h.U)(r=>[t,r]))))}function Ea(a){return e=>e.pipe((0,M.w)((t,i)=>a(t,i).pipe((0,h.U)(()=>t))))}function Wf(a){return e=>new u.Observable(t=>e.subscribe({next:o=>a.run(()=>t.next(o)),error:o=>a.run(()=>t.error(o)),complete:()=>a.run(()=>t.complete())}))}var co=f(89387);class Mh{static initialize(){co.config({disableDefaultAlphabetLength:!0,disableDefaultIdLength:!0,idLength:7}),co.characters("0123456789abcdefghijklmnopqrstuvwxyz")}static generateUnique(e,t="",i="_"){const r=new RegExp(`^${t}`);return t+e.replace(r,"")+i+co.generate()}}Mh.initialize();const Yf=new n.InjectionToken("An abstraction over window.navigator object",{factory:()=>window.navigator,providedIn:"root"}),se=(new n.InjectionToken("CURRENT_TAB_ID_TOKEN"),(0,l.generateGuid)(),new n.InjectionToken("WindowToken",{providedIn:"root",factory:US}));function US(){return window}const GS={provide:se,useFactory:US};class uo{constructor(e){this._window=e,this._hasFocus=!1,this._window.addEventListener("focus",()=>{this._hasFocus=!0}),this._window.addEventListener("blur",()=>{this._hasFocus=!1})}_getIsDocumentVisible(){return"hidden"!==document.visibilityState}get hasFocus(){return this._hasFocus}get isActive(){return this._getIsDocumentVisible()}focus(){this._window.focus()}}uo.\u0275fac=function(e){return new(e||uo)(n.\u0275\u0275inject(se))},uo.\u0275prov=n.\u0275\u0275defineInjectable({token:uo,factory:uo.\u0275fac,providedIn:"root"});var zS=f(49651);class po{constructor(e){this._injector=e}defineComponent(e,t,i=null){const r=(0,zS.createCustomElement)(t,{injector:i||this._injector});customElements.get(e)||customElements.define(e,r)}}po.\u0275fac=function(e){return new(e||po)(n.\u0275\u0275inject(n.Injector))},po.\u0275prov=n.\u0275\u0275defineInjectable({token:po,factory:po.\u0275fac,providedIn:"root"});n.APP_INITIALIZER;var m=f(84911),_i=f(66466);class Qe{static create(e){const t=new Qe;return Object.assign(t,e),t}get isDebugEnabled(){return Boolean(window.Terrasoft?.isDebug)}}Qe.\u0275fac=function(e){return new(e||Qe)},Qe.\u0275prov=n.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac,providedIn:"root"});let HS=Qe.create({serviceUrl:"",clientConnectionClassName:""});let vn=class{constructor(e){this._httpClient=e,this._serviceEndpoint="ServiceModel/ApplicationInfoService.svc/"}_initApplicationInfo(){const e=this._serviceEndpoint+"GetApplicationInfo";this._applicationInfoObservable$=this._httpClient.post(e,null).pipe((0,h.U)(t=>{const i=t&&t.applicationInfo;return HS=Qe.create(i),t}),(0,_i.d)(1)),this._applicationInfoObservable$.subscribe()}loadApplicationInfo(){return this._applicationInfoObservable$||this._initApplicationInfo(),this._applicationInfoObservable$}loadSysValues(){return this.loadApplicationInfo().pipe((0,h.U)(e=>e?.applicationInfo?.sysValues))}};vn.\u0275fac=function(e){return new(e||vn)(n.\u0275\u0275inject(D.HttpClient))},vn.\u0275prov=n.\u0275\u0275defineInjectable({token:vn,factory:vn.\u0275fac,providedIn:"root"}),vn=(0,m.gn)([en({requestType:"crt.SysValuesService"}),(0,m.w6)("design:paramtypes",[D.HttpClient])],vn);class Qf{get isLookupType(){return!!this.dataValueType&&this.dataValueType===l.DataValueType.Lookup}constructor(e){e&&(this.uId=e.uId,this.name=e.name,this.caption=e.caption,this.columnCaptionPath=e.columnCaptionPath,this.dataValueType=e.dataValueType,this.usageType=e.usageType,this.referenceSchemaUId=e.referenceSchemaUId,this.referenceSchemaName=e.referenceSchemaName,this.isRequired=e.isRequired,this.isValueCloneable=e.isValueCloneable,this.isMasked=e.isMasked,this.isFormatValidated=e.isFormatValidated,this.isSensitiveData=e.isSensitiveData,this.defaultValueSchema=e.defaultValueSchema,this.lookupMode=e.lookupMode)}}class ZS{constructor(e){e&&(this.uId=e.uId,this.name=e.name,this.caption=e.caption,this.extendParent=e.extendParent,this.packageUId=e.packageUId)}}class qS extends ZS{getPrimaryColumn(){return this.columns?.find(e=>e.uId===this.primaryColumnUId)}getPrimaryDisplayColumn(){return this.columns?.find(e=>e.uId===this.primaryDisplayColumnUId)}getPrimaryColorColumn(){return this.columns?.find(e=>e.uId===this.primaryColorColumnUId)}getHierarchyColumn(){return this.hierarchyColumnUId&&this.columns?.find(e=>e.uId===this.hierarchyColumnUId)}}var wh,a;(a=wh||(wh={})).List="List",a.SelectionWindow="SelectionWindow";var I=f(98168),ee=f(26903),G=f(33568);class xh{constructor(e){Object.assign(this,e)}static getDefaultCulture(){return new xh({sysCultureId:"A5420246-0A8E-E111-84A3-00155D054C03",sysCultureName:"en-US",decimalSeparator:".",thousandSeparator:","})}}class Ta{constructor(){const e=this.constructor;if((0,n.inject)(e,n.InjectFlags.Optional|n.InjectFlags.SkipSelf))throw Error(`[${e.name}]: trying to create multiple instances,\n\t\t\tbut this service should be a singleton.`)}}class Q{constructor(){this.cultureInfo=new xh,this.defCultureInfo=new xh}}const Je="Information about the current user is not initialized yet. Use UserInfoService to load current user information.";const Ae=function LM(){return{get id(){throw new ReferenceError(Je)},get contactId(){throw new ReferenceError(Je)},get contactName(){throw new ReferenceError(Je)},get accountId(){throw new ReferenceError(Je)},get accountName(){throw new ReferenceError(Je)},get isSSP(){throw new ReferenceError(Je)},get timeZoneId(){throw new ReferenceError(Je)},get cultureInfo(){throw new ReferenceError(Je)},get defCultureInfo(){throw new ReferenceError(Je)},get timeZoneOffsetHours(){throw new ReferenceError(Je)},get photoId(){throw new ReferenceError(Je)},get accessType(){throw new ReferenceError(Je)},get firstDayOfWeek(){throw new ReferenceError(Je)},get sessionId(){throw new ReferenceError(Je)}}}(),WS={get id(){return Ae.id},get contactId(){return Ae.contactId},get contactName(){return Ae.contactName},get accountId(){return Ae.accountId},get accountName(){return Ae.accountName},get isSSP(){return Ae.isSSP},get timeZoneId(){return Ae.timeZoneId},get cultureInfo(){return Ae.cultureInfo},get defCultureInfo(){return Ae.defCultureInfo},get timeZoneOffsetHours(){return Ae.timeZoneOffsetHours},get photoId(){return Ae.photoId},get accessType(){return Ae.accessType},get firstDayOfWeek(){return Ae.firstDayOfWeek||0},get sessionId(){return Ae.sessionId}};Object.freeze(WS);const Jf={provide:Q,useFactory:()=>WS};class vt extends Ta{constructor(e){super(),this._httpClient=e,this._serviceEndpoint="ServiceModel/UserInfoService.svc"}_applyUserInfo(e){Object.keys(Ae).forEach(t=>{delete Ae[t]}),Object.assign(Ae,e)}loadCurrentUserInfo(){if(!this._userInfo$){const e=`${this._serviceEndpoint}/GetCurrentUserInfo`;this._userInfo$=this._httpClient.post(e,null).pipe((0,u.tap)(t=>{this._applyUserInfo(t?.userInfo)}),(0,u.shareReplay)({bufferSize:1,refCount:!1}))}return this._userInfo$}}vt.\u0275fac=function(e){return new(e||vt)(n.\u0275\u0275inject(D.HttpClient))},vt.\u0275prov=n.\u0275\u0275defineInjectable({token:vt,factory:vt.\u0275fac,providedIn:"root"});class yi{constructor(e,t){this._userInfo=e,this._httpClient=t}_getServiceUrlSspPart(){return this._userInfo.isSSP?"ssp/":""}_getDataServiceUrlWithSspPart(){return`DataService/${this._getServiceUrlSspPart()}`}getSchemaDesignerServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/SchemaDesignerRequest"}getRuntimeEntitySchemaServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/RuntimeEntitySchemaRequest"}getEntitySchemaServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/EntitySchemaRequest"}getRuntimeEntitySchemeServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/RuntimeEntitySchemesRequest"}getEntity(e){return(0,u.lastValueFrom)(this._httpClient.post(this.getRuntimeEntitySchemaServiceEndpoint(),{name:e}))}getEntities(e){return(0,u.lastValueFrom)(this._httpClient.post(this.getRuntimeEntitySchemeServiceEndpoint(),e))}}yi.\u0275fac=function(e){return new(e||yi)(n.\u0275\u0275inject(Q),n.\u0275\u0275inject(D.HttpClient))},yi.\u0275prov=n.\u0275\u0275defineInjectable({token:yi,factory:yi.\u0275fac,providedIn:"root"});var _=f(8239);const W="DataValueType",It={[l.DataValueType.Date]:{type:l.DataValueType.Date,id:"603d4960-a1a2-45e9-b232-206a54421b01",name:"Date",icon:"data-type-date-icon.svg",designerIcon:f(77054),translateKey:`${W}.DateCaption`},[l.DataValueType.Time]:{type:l.DataValueType.Time,id:"04cc757b-8f06-482c-8a1a-0c0e171d2410",name:"Time",icon:"data-type-time-icon.svg",designerIcon:f(99342),translateKey:`${W}.TimeCaption`},[l.DataValueType.DateTime]:{type:l.DataValueType.DateTime,id:"d21e9ef4-c064-4012-b286-fa1a8171da44",name:"DateTime",icon:"data-type-datetime-icon.svg",designerIcon:f(46283),translateKey:`${W}.DateTimeCaption`},[l.DataValueType.Text]:{type:l.DataValueType.Text,id:"8b3f29bb-ea14-4ce5-a5c5-293a929b6ba2",name:"Text",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:f(98873),designerAutonumberIcon:f(50715),translateKey:`${W}.TextCaption`},[l.DataValueType.SHORT_TEXT]:{type:l.DataValueType.SHORT_TEXT,id:"325a73b8-0f47-44a0-8412-7606f78003ac",name:"ShortText",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:f(98873),designerAutonumberIcon:f(50715),translateKey:`${W}.ShortTextCaption`},[l.DataValueType.PHONE_TEXT]:{type:l.DataValueType.PHONE_TEXT,id:"26cba63c-daf1-4f36-b2ea-73c0d675d90c",name:"PhoneText",icon:"data-type-phone-icon.svg",designerIcon:f(6182),translateKey:`${W}.PhoneTextCaption`},[l.DataValueType.WEB_TEXT]:{type:l.DataValueType.WEB_TEXT,id:"26cba64c-daf1-4f36-b2ea-73c0d695d90c",name:"WebText",icon:"data-type-text-icon.svg",designerIcon:f(97947),translateKey:`${W}.WebTextCaption`},[l.DataValueType.EMAIL_TEXT]:{type:l.DataValueType.EMAIL_TEXT,id:"66cba64c-daf1-4f36-b8ea-73c0d695d90c",name:"EmailText",icon:"data-type-text-icon.svg",designerIcon:f(75610),translateKey:`${W}.EmailTextCaption`},[l.DataValueType.MEDIUM_TEXT]:{type:l.DataValueType.MEDIUM_TEXT,id:"ddb3a1ee-07e8-4d62-b7a9-d0e618b00fbd",name:"MediumText",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:f(98873),designerAutonumberIcon:f(50715),translateKey:`${W}.MediumTextCaption`},[l.DataValueType.LONG_TEXT]:{type:l.DataValueType.LONG_TEXT,id:"5ca35f10-a101-4c67-a96a-383da6afacfc",name:"LongText",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:f(98873),designerAutonumberIcon:f(50715),translateKey:`${W}.LongTextCaption`},[l.DataValueType.MAXSIZE_TEXT]:{type:l.DataValueType.MAXSIZE_TEXT,id:"c0f04627-4620-4bc0-84e5-9419dc8516b1",name:"MaxSizeText",icon:"data-type-unlimited-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:f(98873),designerAutonumberIcon:f(50715),translateKey:`${W}.MaxSizeTextCaption`},[l.DataValueType.Integer]:{type:l.DataValueType.Integer,id:"6b6b74e2-820d-490e-a017-2b73d4ccf2b0",name:"Integer",icon:"data-type-integer-icon.svg",designerIcon:f(69194),translateKey:`${W}.IntegerCaption`},[l.DataValueType.FLOAT1]:{type:l.DataValueType.FLOAT1,id:"07ba84ce-0bf7-44b4-9f2c-7b15032eb98c",name:"Float1",icon:"data-type-float1-icon.svg",designerIcon:f(72428),translateKey:`${W}.FLOAT1Caption`},[l.DataValueType.FLOAT2]:{type:l.DataValueType.FLOAT2,id:"5cc8060d-6d10-4773-89fc-8c12d6f659a6",name:"Float2",icon:"data-type-float2-icon.svg",designerIcon:f(72428),translateKey:`${W}.FLOAT2Caption`},[l.DataValueType.FLOAT3]:{type:l.DataValueType.FLOAT3,id:"3f62414e-6c25-4182-bcef-a73c9e396f31",name:"Float3",icon:"data-type-float3-icon.svg",designerIcon:f(72428),translateKey:`${W}.FLOAT3Caption`},[l.DataValueType.FLOAT4]:{type:l.DataValueType.FLOAT4,id:"ff22e049-4d16-46ee-a529-92d8808932dc",name:"Float4",icon:"data-type-float4-icon.svg",designerIcon:f(72428),translateKey:`${W}.FLOAT4Caption`},[l.DataValueType.FLOAT8]:{type:l.DataValueType.FLOAT8,id:"a4aaf398-3531-4a0d-9d75-a587f5b5b59e",name:"Float8",icon:"data-type-float8-icon.svg",designerIcon:f(72428),translateKey:`${W}.FLOAT8Caption`},[l.DataValueType.Guid]:{type:l.DataValueType.Guid,id:"23018567-a13c-4320-8687-fd6f9e3699bd",name:"Guid",icon:"data-type-guid-icon.svg",designerIcon:f(35429),translateKey:`${W}.GuidCaption`},[l.DataValueType.Lookup]:{type:l.DataValueType.Lookup,id:"b295071f-7ea9-4e62-8d1a-919bf3732ff2",name:"Lookup",icon:"data-type-lookup-icon.svg",designerIcon:f(26634),translateKey:`${W}.LookupCaption`},[l.DataValueType.Boolean]:{type:l.DataValueType.Boolean,id:"90b65bf8-0ffc-4141-8779-2420877af907",name:"Boolean",icon:"data-type-boolean-icon.svg",designerIcon:f(23048),translateKey:`${W}.BooleanCaption`},[l.DataValueType.HASH_TEXT]:{type:l.DataValueType.HASH_TEXT,id:"ecbcce18-2a17-4ead-829a-9d02fa9578a4",name:"HashText",icon:"data-type-crs-text-icon.svg",designerIcon:f(98873),translateKey:`${W}.HashTextCaption`},[l.DataValueType.SECURE_TEXT]:{type:l.DataValueType.SECURE_TEXT,id:"3509b9dd-2c90-4540-b82e-8f6ae85d8248",name:"SecureText",icon:"data-type-encrypted-text-icon.svg",designerIcon:f(77732),translateKey:`${W}.SecureTextCaption`},[l.DataValueType.IMAGELOOKUP]:{type:l.DataValueType.IMAGELOOKUP,id:"b039feb0-ee7c-4884-8aa6-d6d45d84316f",name:"ImageLookup",icon:"data-type-image-link-icon.svg",designerIcon:f(63322),translateKey:`${W}.ImageLookupCaption`},[l.DataValueType.Money]:{type:l.DataValueType.Money,id:"969093e2-2b4e-463b-883a-3d3b8c61f0cd",name:"Money",icon:"data-type-float2-icon.svg",designerIcon:f(37786),translateKey:`${W}.MoneyCaption`},[l.DataValueType.Float]:{type:l.DataValueType.Float,id:"57ee4c31-5ec4-45fa-b95d-3a2868aa89a8",name:"Float",icon:"data-type-float1-icon.svg",designerIcon:f(72428),translateKey:`${W}.FloatCaption`},[l.DataValueType.FILE]:{type:l.DataValueType.FILE,id:"a33c9252-d401-453e-949d-169157067ed9",name:"File",icon:"data-type-file-icon.svg",designerIcon:f(88745),translateKey:`${W}.FileCaption`},[l.DataValueType.Image]:{type:l.DataValueType.Image,id:"fa6e6e49-b996-475e-a77e-73904e4c5a88",name:"Image",icon:"data-type-image-icon.svg",designerIcon:f(88745),translateKey:`${W}.ImageCaption`},[l.DataValueType.Blob]:{type:l.DataValueType.Blob,id:"b7342b7a-5dde-40de-aa7c-24d2a57b3202",name:"Blob",icon:"data-type-blob-icon.svg",designerIcon:f(88745),translateKey:`${W}.BlobCaption`},[l.DataValueType.Color]:{type:l.DataValueType.Color,id:"dafb71f9-ee9f-4e0b-a4d7-37aa15987155",name:"Color",icon:"data-type-color-icon.svg",designerIcon:f(84369),translateKey:`${W}.ColorCaption`},[l.DataValueType.RICH_TEXT]:{type:l.DataValueType.RICH_TEXT,id:"79bccffa-8c8b-4863-b376-a69d2244182b",name:"RichText",icon:"data-type-rich-text-icon.svg",designerIcon:f(53771),translateKey:`${W}.RichCaption`},[l.DataValueType.ENTITY]:{type:l.DataValueType.ENTITY,id:"ebd85d37-0abf-4bbf-bb32-97dc3dffcc8c",name:"Entity",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.Entity`},[l.DataValueType.ENTITY_COLLECTION]:{type:l.DataValueType.ENTITY_COLLECTION,id:"51fb23ba-3eb2-11e2-b7d5-b0c76188709b",name:"EntityCollection",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.EntityCollection`},[l.DataValueType.ENTITY_COLUMN_MAPPING_COLLECTION]:{type:l.DataValueType.ENTITY_COLUMN_MAPPING_COLLECTION,id:"b53eaa2a-4bb7-4a6b-9f4f-58ccab293e31",name:"EntityColumnMappingCollection",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.EntityColumnMappingCollection`},[l.DataValueType.CUSTOM_OBJECT]:{type:l.DataValueType.CUSTOM_OBJECT,id:"84ed6865-9692-4c98-aaed-4d15b96a95c2",name:"CustomObject",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.CustomObject`},[l.DataValueType.OBJECT_LIST]:{type:l.DataValueType.OBJECT_LIST,id:"4b51a8b5-1ee9-4437-9d58-f35e083cbcdf",name:"ObjectList",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.ObjectList`},[l.DataValueType.COMPOSITE_OBJECT_LIST]:{type:l.DataValueType.COMPOSITE_OBJECT_LIST,id:"651ec16f-d140-46db-b9e2-825c985a8ac2",name:"CompositeObjectList",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.CompositeObjectList`},[l.DataValueType.COLLECTION]:{type:l.DataValueType.COLLECTION,name:"Collection",icon:"data-type-other-icon.svg",designerIcon:f(98873),translateKey:`${W}.Collection`},[l.DataValueType.LOCALIZABLE_STRING]:{type:l.DataValueType.LOCALIZABLE_STRING,id:"95c6e6c4-2cc8-46be-a1cb-96f942655f86",name:"LocalizableString",icon:"data-type-text-icon.svg",designerIcon:f(98873),translateKey:`${W}.LocalizableString`},[l.DataValueType.METADATA_TEXT]:{type:l.DataValueType.METADATA_TEXT,id:"394e160f-c8e0-46fa-9c0d-75d97e9e9169",name:"MetaDataText",icon:"data-type-text-icon.svg",designerIcon:f(98873),translateKey:`${W}.MetaDataText`}},ot={DateTime:[l.DataValueType.Date,l.DataValueType.Time,l.DataValueType.DateTime],Text:[l.DataValueType.Text,l.DataValueType.SHORT_TEXT,l.DataValueType.MEDIUM_TEXT,l.DataValueType.LONG_TEXT,l.DataValueType.PHONE_TEXT,l.DataValueType.WEB_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.LOCALIZABLE_STRING,l.DataValueType.RICH_TEXT],Number:[l.DataValueType.FLOAT1,l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Integer,l.DataValueType.Money,l.DataValueType.Float],Lookup:[l.DataValueType.Lookup,l.DataValueType.IMAGELOOKUP]};class OM{static _getDefaultValue(e){if(!e)return null;if(e.source===l.DefaultValueSource.Sequence)return{valueSourceType:l.DefaultValueSource.Sequence,value:"Sequence",sequencePrefix:e.sequencePrefix,sequenceNumberOfChars:e.sequenceNumberOfChars};if(e.source===l.DefaultValueSource.Const){const i=e.value,r="string"==typeof i?i:i.value;return{valueSourceType:l.DefaultValueSource.Const,value:r,valueSource:r,sequenceNumberOfChars:0}}return e.source===l.DefaultValueSource.Settings?{valueSourceType:l.DefaultValueSource.Settings,value:e.calculatedValue,valueSource:e.value,sequenceNumberOfChars:0}:e.source===l.DefaultValueSource.SystemValue?{valueSourceType:l.DefaultValueSource.SystemValue,value:e.calculatedValue,valueSource:e.sourceValue,sequenceNumberOfChars:0}:{valueSourceType:e.source,value:null,sequenceNumberOfChars:0}}static _getPrimaryDisplayColorColumnUId(e){if(!e.primaryColorColumnName)return null;const t=Object.values(e.columns).find(i=>i.name===e.primaryColorColumnName);if(!t)throw new Error(`Primary color column set in object ${e.name} but column ${e.primaryColorColumnName} does not exist`);return t?.uId}static map(e,t){const i={};return Object.entries(e.columns).forEach(([,s])=>{const o=s,c="Binary"===o.dataValueTypeName?"Blob":o.dataValueTypeName,d=Object.entries(It).find(([,C])=>C.name===c),p=d?Number(d[0]):o.dataValueType,g=this._getDefaultValue(o.defaultValue);i[o.uId]={uId:o.uId,name:o.name,caption:{[t]:o.caption},dataValueType:p,isInherited:!!o.isInherited,isRequired:!!o.isRequired,isValueCloneable:!!o.isValueCloneable,usageType:o.usageType,referenceSchemaName:o.referenceSchemaName,isMasked:!!o.isMasked,isFormatValidated:!!o.isFormatValidated,isSimpleLookup:!!o.isSimpleLookup,isSensitiveData:!!o.isSensitiveData,defValue:g}}),{administratedByOperations:e.administratedByOperations,administratedByRecords:e.administratedByRecords,useMasterRecordRights:e.useMasterRecordRights,masterRecordSchemaName:e.masterRecordSchemaName,primaryColumnUId:e.primaryColumn?.uId,primaryDisplayColumnUId:e.primaryDisplayColumn?.uId,primaryColorColumnUId:this._getPrimaryDisplayColorColumnUId(e),hierarchyColumnUId:e.hierarchyColumnUId,uId:e.uId,name:e.name,caption:{[t]:e.caption},columns:{Items:i},isVirtual:!!e.isVirtual,isDBView:!!e.isDBView,administratedByColumns:!!e.administratedByColumns,description:{[t]:e.description},parentUId:e.parentUId,isTrackChangesInDB:!!e.isTrackChangesInDB,extendParent:!!e.extendParent}}}class Eh{static getPathItemInfo(e){const i=/\[([\w-]+):([\w-]+):?([\w-]*)]$/g.exec(e);if(i){return{isBackReference:!0,referenceSchemaName:i[1],referenceSchemaColumnName:i[2],columnName:i[3]}}return{isBackReference:!1,columnName:e}}}let Kf=class{constructor(e){this._window=e}_getItems(e,t=[]){var i=this;let r=[];const s=[...t];return new Promise(o=>{this._window.require(e,(0,_.Z)(function*(...c){r=yield Promise.all(c.map(d=>i.map(d))),o({schemes:r,notFoundSchemes:s})}),c=>{const d=c.requireModules??[];s.push(...d),0===(e=e.filter(p=>!d.includes(p))).length&&o({schemes:r,notFoundSchemes:s}),o(this._getItems(e,s))})})}map(e){return Promise.resolve(e)}get(e){var t=this;return new Promise(i=>{this._window.require([e],function(){var r=(0,_.Z)(function*(s){const o=yield t.map(s);i(o)});return function(s){return r.apply(this,arguments)}}(),()=>{i(null)})})}getItems(e){return this._getItems(e,[])}};Kf=(0,m.gn)([(0,m.fM)(0,(0,n.Inject)(se)),(0,m.w6)("design:paramtypes",[Object])],Kf);const Xf=["SysSettings"];class mo extends Kf{constructor(e,t,i){super(e),this._userInfo=t,this._entityHttpService=i}map(e){return Promise.resolve(OM.map(e,this._userInfo.cultureInfo.sysCultureName))}_getLookupEntities(e){const t=e.flatMap(r=>Object.values(r.columns.Items).filter(s=>s.dataValueType===l.DataValueType.Lookup&&s.referenceSchemaName&&!e.find(o=>o.name===s.referenceSchemaName)).map(s=>s.referenceSchemaName)),i=[...new Set(t)];return this.getItems(i)}_getReferenceEntityNameFromBackReferencePath(e){return Eh.getPathItemInfo(e).referenceSchemaName}_getReferenceSchemaName(e,t){const i=this._getReferenceEntityNameFromBackReferencePath(e);let r;if(i)r=i;else{const s=Object.entries(t.columns.Items).find(([,c])=>c.name===e);if(!s)throw new Error(`Can't find column '${e}' in EntitySchema '${t.name}'`);const[,o]=s;r=o.referenceSchemaName}return r}_loadSchemasByPath(e,t,i){var r=this;return(0,_.Z)(function*(){const s=i.find(C=>C.name===e);if(!s)return{schemas:[],notFoundSchemas:[e]};const o=[...t],c=o.shift(),d=r._getReferenceSchemaName(c,s);if(!d)return{schemas:[],notFoundSchemas:[]};let p=i.find(C=>C.name===d);if(!p)try{if(p=yield r.get(d),!p)return{schemas:[],notFoundSchemas:[d]};i.push(p)}catch{return{schemas:[],notFoundSchemas:[d]}}const g=o.length?yield r._loadSchemasByPath(p.name,o,i):{schemas:[],notFoundSchemas:[]};return{schemas:[p,...g.schemas],notFoundSchemas:g.notFoundSchemas}})()}_getForwardReferenceSchemas(e,t){var i=this;return(0,_.Z)(function*(){const r=yield Promise.all(e.filter(s=>s.forwardReferencePaths).flatMap(s=>s.forwardReferencePaths.flatMap(o=>i._loadSchemasByPath(s.name,o.split("."),t))));return{schemes:r.flatMap(s=>s.schemas),notFoundSchemes:r.flatMap(s=>s.notFoundSchemas)}})()}_getEntitiesToLoadLookups(e,t){return t.schemes.filter(i=>e.requests.find(r=>!0===r.loadLookupColumns&&r.name===i.name))}get(e){var t=()=>super.get,i=this;return(0,_.Z)(function*(){return Xf.includes(e)?(yield i._entityHttpService.getEntity(e)).schema:t().call(i,e)})()}getItems(e){var t=()=>super.getItems,i=this;return(0,_.Z)(function*(){const r=e.filter(d=>Xf.includes(d)),s=e.filter(d=>!Xf.includes(d));let o={success:!0,schemes:[],notFoundSchemes:[]};if(0!==r.length){const d={requests:r.map(p=>({name:p,loadLookupColumns:!1}))};o=yield i._entityHttpService.getEntities(d)}const c=yield t().call(i,s);return{schemes:[...c.schemes,...o.schemes],notFoundSchemes:[...c.notFoundSchemes,...o.notFoundSchemes]}})()}getEntity(e){var t=this;return(0,_.Z)(function*(){const i=yield t.get(e);return{success:!!i,schema:i}})()}getEntities(e){var t=this;return(0,_.Z)(function*(){const i=e.requests.map(d=>d.name),r=yield t.getItems(i),s=t._getEntitiesToLoadLookups(e,r),o=yield t._getLookupEntities(s),c=yield t._getForwardReferenceSchemas(e.requests,[...r.schemes,...o.schemes]);return{success:!0,schemes:[...r.schemes,...o.schemes,...c.schemes],notFoundSchemes:[...r.notFoundSchemes,...o.notFoundSchemes,...c.notFoundSchemes]}})()}}mo.\u0275fac=function(e){return new(e||mo)(n.\u0275\u0275inject(se),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(yi))},mo.\u0275prov=n.\u0275\u0275defineInjectable({token:mo,factory:mo.\u0275fac,providedIn:"root"});class re{constructor(e,t,i){this.path=e,this.value=t,this.type=i}}var YS,QS,Pa;!function(a){a.EntityDataSource="crt.EntityDataSource",a.WebServiceDataSource="crt.WebServiceDataSource",a.PageParametersDataSource="crt.PageParametersDataSource"}(YS||(YS={})),function(a){a.OnDemand="OnDemand",a.OnInit="OnInit"}(QS||(QS={})),function(a){a.string="Strings",a.image="Images"}(Pa||(Pa={}));const ho="Resources";class kt extends Array{constructor(e){super(),Object.setPrototypeOf(this,Object.create(kt.prototype)),Array.isArray(e)&&this._fillFromSource(e)}_fillFromSource(e){e.filter(t=>null!=t?.cultureName).forEach(t=>{this.setValueLocalizableString(t.cultureName,t.value)})}getValue(e){const t=this.getLocalizableString(e);return t?t.value:""}hasCultureValue(e,t=!1){const i=this.getLocalizableString(e);return t?null!=(i?.value||null):null!=i?.value}getLocalizableString(e){return this.find(t=>t.cultureName===e)||null}setValueLocalizableString(e,t){const i=this.getLocalizableString(e);return i?i.value=t:this.push({cultureName:e,value:t}),this}setValues(e,t=!1){return e.forEach(i=>{this.hasCultureValue(i.cultureName)&&t||this.setValueLocalizableString(i.cultureName,i.value)}),this}clone(){return new kt(this)}}var Aa;!function(a){a[a.EntitySchema=3]="EntitySchema",a[a.ClientUnitSchema=4]="ClientUnitSchema"}(Aa||(Aa={}));new n.InjectionToken("navigation_handler_token");class e_{wait(e){return e()}}e_.instance=new e_;var Dt=f(47766),lt=f(27986);class UM{constructor(e={preventAttributeChangeRequest:!1,preventRunBusinessRules:!1,preventStateChange:!1}){this._preventAttributeChangeRequest=!1,this._preventStateChange=!1,this._preventRunBusinessRules=!1,this._setOptions(e)}_setUsingSilent(e){this._preventStateChange=e,this._preventRunBusinessRules=e,this._preventAttributeChangeRequest=!1}_setOptions(e){this._preventAttributeChangeRequest=e?.preventAttributeChangeRequest??this._preventAttributeChangeRequest,this._preventStateChange=e?.preventStateChange??this._preventStateChange,this._preventRunBusinessRules=e?.preventRunBusinessRules??this._preventRunBusinessRules}getAsSilent(){return this._preventRunBusinessRules&&this._preventStateChange}setOptions(e){if((0,Dt.Z)(e?.silent)){const t=(0,lt.Z)(e,"preventAttributeChangeRequest","preventStateChange","preventRunBusinessRules");this._setOptions(t)}else this._setUsingSilent(e?.silent)}getOptions(){return{preventAttributeChangeRequest:this._preventAttributeChangeRequest,preventRunBusinessRules:this._preventRunBusinessRules,preventStateChange:this._preventStateChange}}reset(){this._preventAttributeChangeRequest=!1,this._preventRunBusinessRules=!1,this._preventStateChange=!1}}const te=new n.InjectionToken("FEATURE_VALUES");class go{constructor(e,t,i,r){this.httpClient=e,this._entityRequire=t,this._entityHttp=i,this._featureValues=r}_useRequire(){return this._featureValues?.UseRequireEntitySchema8x??!1}getEntity(e){var t=this;return(0,_.Z)(function*(){return t._useRequire()?t._entityRequire.getEntity(e):t._entityHttp.getEntity(e)})()}getEntities(e){var t=this;return(0,_.Z)(function*(){return t._useRequire()?t._entityRequire.getEntities(e):t._entityHttp.getEntities(e)})()}}go.\u0275fac=function(e){return new(e||go)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(mo),n.\u0275\u0275inject(yi),n.\u0275\u0275inject(te,8))},go.\u0275prov=n.\u0275\u0275defineInjectable({token:go,factory:go.\u0275fac,providedIn:"root"});class fo{}fo.\u0275fac=function(e){return new(e||fo)},fo.\u0275mod=n.\u0275\u0275defineNgModule({type:fo}),fo.\u0275inj=n.\u0275\u0275defineInjector({providers:[Jf,{provide:n.APP_INITIALIZER,useFactory:function GM(a){return()=>(0,u.lastValueFrom)(a.loadCurrentUserInfo(),{defaultValue:null})},deps:[vt],multi:!0}]});class Ke{constructor(e,t,i,r){this.httpClient=e,this._userInfo=t,this._schemaLoader=i,this._entityHttp=r,this._getEntitySchemaByNameRequests=new Map,this._getEntitySchemesRequests=new Map,this._getEntitySchemaByUIdRequests=new Map,this._destroyed$=new u.Subject}_convertToEntitySchema(e){const t=new qS;return t.uId=e.uId,t.name=e.name,t.caption=this._getCaptionElement(e),t.extendParent=e.extendParent,t.packageUId=e.packageUId,t.administratedByColumns=e.administratedByColumns,t.administratedByOperations=e.administratedByOperations,t.administratedByRecords=e.administratedByRecords,t.description=e.description,t.isDBView=e.isDBView,t.isTrackChangesInDB=e.isTrackChangesInDB,t.isVirtual=e.isVirtual,t.masterRecordSchemaName=e.masterRecordSchemaName,t.primaryColumnUId=e.primaryColumnUId,t.primaryDisplayColumnUId=e.primaryDisplayColumnUId,t.primaryColorColumnUId=e.primaryColorColumnUId,t.hierarchyColumnUId=e.hierarchyColumnUId,t.useMasterRecordRights=e.useMasterRecordRights,t.parentUId=e.parentUId,t.columns=Object.values(e.columns.Items).map(i=>{const r=new Qf;return r.uId=i.uId,r.name=i.name,r.caption=this._getCaptionElement(i),r.dataValueType=i.dataValueType,r.usageType=i.usageType,r.referenceSchemaUId=i.referenceSchemaUId,r.referenceSchemaName=i.referenceSchemaName,r.isRequired=i.isRequired,r.isValueCloneable=i.isValueCloneable,r.isMasked=i.isMasked,r.isFormatValidated=i.isFormatValidated,r.isSensitiveData=i.isSensitiveData,r.defaultValueSchema=i.defValue,r.lookupMode=i.isSimpleLookup?wh.List:wh.SelectionWindow,r}),t}_getCaptionElement(e){return e.caption[this._userInfo.cultureInfo.sysCultureName]||e.caption["en-US"]}_createEntitySchemaColumnFromInformationObject(e){const t=new Qf;return t.uId=e.columnUId,t.name=e.columnName,t.caption=e.columnCaption,t.dataValueType=e.columnDataValueType,t.usageType=e.columnUsageType,t.referenceSchemaUId=e.referenceSchemaUId,t.referenceSchemaName=e.referenceSchemaName,t.columnCaptionPath=e.columnCaptionPath,t}_getEntitySchemaFromEndpoint(e,t){return this.httpClient.post(e,t).pipe((0,B.z)(i=>i.schema?(0,u.of)({success:!0,entitySchema:this._convertToEntitySchema(i.schema)}):(0,u.throwError)({success:!1,entitySchema:null,errorInfo:i.errorInfo})))}_getEntitySchemaColumnByPath(e,t,i="."){return this.httpClient.post(this._entityHttp.getSchemaDesignerServiceEndpoint(),{getSchemaColumnInformation:{entitySchemaUId:e,schemaColumnPath:t,schemaColumnCaptionPathDelimiter:i}}).pipe((0,I.b)(({success:r})=>{if(!r)throw new Error("SchemaDesignerService request has failed")}),(0,h.U)(({getSchemaColumnInformationResponse:r})=>this._createEntitySchemaColumnFromInformationObject(r)))}_combineEntitySchemaColumnInformationRequestsWithPaths(e,t){return t.reduce((i,r)=>({...i,[r]:this._getEntitySchemaColumnByPath(e,r)}),{})}getEntitySchemaByUId(e,t){const i=`${e}_${t}`;if(this._getEntitySchemaByUIdRequests.has(i))return this._getEntitySchemaByUIdRequests.get(i);const r=t?this._entityHttp.getEntitySchemaServiceEndpoint():this._entityHttp.getRuntimeEntitySchemaServiceEndpoint(),s={uId:e};t&&(s.packageUId=t);const o=this._getEntitySchemaFromEndpoint(r,s).pipe((0,I.b)(()=>this._getEntitySchemaByUIdRequests.delete(i)),(0,ee.B)());return this._getEntitySchemaByUIdRequests.set(i,o),o}getEntitySchemaByName(e){if(this._getEntitySchemaByNameRequests.has(e))return this._getEntitySchemaByNameRequests.get(e);const t=(0,u.from)(this._schemaLoader.getEntity(e)).pipe((0,h.U)(i=>({success:i.success,entitySchema:i.schema?this._convertToEntitySchema(i.schema):null,errorInfo:i.errorInfo})),(0,I.b)(()=>this._getEntitySchemaByNameRequests.delete(e)),(0,ee.B)(),(0,G.K)(i=>(this._getEntitySchemaByNameRequests.delete(e),(0,u.throwError)(()=>i))));return this._getEntitySchemaByNameRequests.set(e,t),t}getEntitySchemes(e){const t=JSON.stringify(e);if(this._getEntitySchemesRequests.has(t))return this._getEntitySchemesRequests.get(t);const i=(0,u.from)(this._schemaLoader.getEntities(e)).pipe((0,h.U)(r=>({success:r.success,schemes:r.schemes.map(s=>this._convertToEntitySchema(s)),notFoundSchemes:r.notFoundSchemes})),(0,I.b)(()=>this._getEntitySchemesRequests.delete(t)),(0,ee.B)(),(0,G.K)(r=>(0,u.throwError)(()=>r)));return this._getEntitySchemesRequests.set(t,i),i}getEntitySchemaColumnsInformationByMetaPath(e,t){const i={getSchemaColumnsInformation:{entitySchemaUId:e,schemaColumnMetaPaths:t}};return this.httpClient.post(this._entityHttp.getSchemaDesignerServiceEndpoint(),i).pipe((0,I.b)(({success:r})=>{if(!r)throw new Error("SchemaDesignerService request is failed")}),(0,h.U)(({getSchemaColumnsInformationResponse:r})=>r.map(s=>({column:this._createEntitySchemaColumnFromInformationObject(s),columnMetaPath:s.columnMetaPath,columnPath:s.columnPath,columnCaptionPath:s.columnCaptionPath}))))}getEntitySchemaColumnsInformationByPath(e,t,i){return this._getEntitySchemaColumnByPath(e,t,i)}getEntitySchemaColumnsInformationByPathsArray(e,t){return(0,u.forkJoin)(this._combineEntitySchemaColumnInformationRequestsWithPaths(e,t))}getColumnCaptionPathByMetaPath(e){const t={getColumnCaptionPathByMetaPath:e};return this.httpClient.post(this._entityHttp.getSchemaDesignerServiceEndpoint(),t).pipe((0,I.b)(({success:i})=>{if(!i)throw new Error("SchemaDesignerService request is failed")}),(0,h.U)(({columnCaptionPath:i})=>i))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Ke.\u0275fac=function(e){return new(e||Ke)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(go),n.\u0275\u0275inject(yi))},Ke.\u0275prov=n.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac});var zM=f(27857),JS=f(23931),Z=f(11770);const HM=1048576;class Iu{constructor(e,t){this._translateService=e,this._sysSettingsService=t}_getMaxFileSizeExceededExceptionCode(){return"MaxFileSizeExceededException"}_getIsOversizedErrorExist(e){return e&&e.some(t=>t.error===this._getMaxFileSizeExceededExceptionCode())}_getOversizeErrorTipMessage(e){return this._getIsOversizedErrorExist(e)?Z.Ld.format("{0}\r\n\r\n",this._translateService.instant("InfoDialog.FileUpload.ChangeFileSizeInfoMessage")):Z.Ld.empty}_getFormattedFilesNames(e){return e.map(t=>"- "+t.file.name).join("\r\n")}_getOversizedFilesLogs(e,t){const i=Z.Ld.format(this._translateService.instant("InfoDialog.FileUpload.MaxFileSizeExceededExceptionMessage"),t);return e.map(r=>function qM(a,e,t){return{file:a,error:e,message:t}}(r,this._getMaxFileSizeExceededExceptionCode(),i))}_buildMessage(e){const t=this._translateService.instant("InfoDialog.FileUpload.InvalidExtension.Deny"),r=this._translateService.instant("InfoDialog.FileUpload.FileListHeader");let s="";for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const c=e[o];let d=(0,Z.Uw)(t+"\r\n\r\n"+r+":\r\n",o);c.forEach(p=>{d+="- "+p.name+"\r\n"}),s+=d+"\r\n"}return s}isFileExtensionDeny(e){var t=this;return(0,_.Z)(function*(){const i=e.name.split(".").pop().toLowerCase();return(yield t._sysSettingsService.getByCode("FileExtensionsDenyList"))?.value.toLowerCase().indexOf(i)>-1})()}createExtensionAttachmentsErrorMessage(e){const t=(0,zM.Z)(e,i=>i.name.split(".").pop().toLowerCase());return this._buildMessage(t)}createFileErrorMessageForLogs(e){e=e.reverse();const t="\r\n\r\n",r="{0}"+t+this._translateService.instant("InfoDialog.FileUpload.FileListHeader")+":\r\n{1}",s=JS.Z.groupBy(e,"message");let o="";for(const[c,d]of Object.entries(s)){const p=this._getFormattedFilesNames(d);o+=Z.Ld.format(r,c,p),o+=t}return o+=this._getOversizeErrorTipMessage(e),o.slice(0,o.length-t.length)}processSelectedFiles(e,t){var i=this;return(0,_.Z)(function*(){const r=[...e],o=(yield i._sysSettingsService.getByCode("MaxFileSize"))?.value||0,{allowed:c,oversized:d,maxFileSizeMB:p}=function ZM(a,e,t){const i=t?Math.min(e,t):e,r=i*HM;return{allowed:a.filter(c=>c.size<=r),oversized:a.filter(c=>c.size>r),maxFileSizeMB:i}}(r,o,t);return{files:c,errors:i._getOversizedFilesLogs(d,p)}})()}}Iu.\u0275fac=function(e){return new(e||Iu)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(l.SysSettingsService))},Iu.\u0275prov=n.\u0275\u0275defineInjectable({token:Iu,factory:Iu.\u0275fac,providedIn:"root"});var $M=f(89284),KS=f(82474);class In{constructor(e){this._document=e}_getDownloadFileUrl(e){const t=new Blob([e],{type:"octet/stream"});return window.URL.createObjectURL(t)}_getDownloadFileName(e){const t=e.headers.get("Content-Disposition");return t?t.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/)[1]:null}download(e,t){const i=this._getDownloadFileUrl(e);this.downloadFromUrl(i,t)}downloadFromResponse(e,t){t=t||this._getDownloadFileName(e),this.download(e.body,t)}downloadFromUrl(e,t){const i=this._document,r=i.createElement("a");r.href=e,r.download=t,i.body.appendChild(r),r.click(),i.body.removeChild(r)}}In.\u0275fac=function(e){return new(e||In)(n.\u0275\u0275inject(y.DOCUMENT))},In.\u0275prov=n.\u0275\u0275defineInjectable({token:In,factory:In.\u0275fac});class t_{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}class Du{constructor(e,t,i){this.http=e,this._fileDownloadService=t,this._userInfo=i,this._baseEndpoint="rest/FileApiService/",this._uploadFileMethodName="UploadFile",this._uploadAndAttachMethodName="UploadAndAttachFile",this._getFileSchemasMethodName="GetAllFileSchemas",this._chunkSize=5e5}_getEndpoint(e){return(this._userInfo.isSSP?"ssp/":"")+`${this._baseEndpoint}${e}`}_prepareError(e,t){const i={...e,file:t.file};return(0,u.throwError)(()=>i)}_sendWithChunks(e,t,i){const r=new Uint8Array(e.content),s=new Array;for(let c=0;c<r.length;c+=this._chunkSize){const d=Math.min(c+this._chunkSize,r.length),g={start:c,end:d,content:new Blob([r.subarray(c,d)])};s.push(g)}let o=0;return(0,u.from)(s).pipe((0,vu.b)(c=>(o++,e.progress=Math.floor(o/s.length*100),this.http.post(i,c.content,{headers:new D.HttpHeaders({"Content-Range":`bytes ${c.start}-${c.end-1}/${e.file.size}`,"Content-Type":e.file.type,"Content-Disposition":`attachment; filename=${encodeURIComponent(e.file.name)}`}),params:t}).pipe((0,$M.X)(2),(0,M.w)(d=>d&&d.success?(0,u.of)(d):(0,u.throwError)(()=>d.errorInfo)),(0,G.K)(d=>this._prepareError(d,e))))),(0,KS.q)())}upload(e){let t=new D.HttpParams({encoder:new t_}).set("fileId",e.id).set("totalFileLength",e.file.size).set("mimeType",e.file.type).set("fileName",e.file.name).set("columnName","Data").set("entitySchemaName",e.fileEntitySchemaName).set("parentColumnName",e.recordColumnName).set("parentColumnValue",e.recordId);const i={...e.fileGroup&&{FileGroupId:e.fileGroup},...e.tag&&{Tag:e.tag},...e.recordEntitySchemaName&&{RecordSchemaName:e.recordEntitySchemaName}};Object.keys(i).length&&(t=t.append("AdditionalParams",JSON.stringify(i)));const r=this._getEndpoint(this._uploadFileMethodName);return this._sendWithChunks(e,t,r)}uploadAsColumn(e){const t=new D.HttpParams({encoder:new t_}).set("fileId",e.id).set("totalFileLength",e.file.size).set("mimeType",e.file.type).set("columnName","Data").set("fileName",e.file.name).set("entitySchemaName",e.fileEntitySchemaName),i=this._getEndpoint(this._uploadFileMethodName);return this._sendWithChunks(e,t,i)}uploadAndAttach(e){const t=new D.HttpParams({encoder:new t_}).set("fileId",e.id).set("totalFileLength",e.file.size).set("mimeType",e.file.type).set("columnName","Data").set("fileName",e.file.name).set("parentEntitySchemaName",e.recordEntitySchemaName).set("entitySchemaName",e.fileEntitySchemaName).set("parentColumnValue",e.recordId),i=this._getEndpoint(this._uploadAndAttachMethodName);return this._sendWithChunks(e,t,i)}download(e,t){this._fileDownloadService.downloadFromUrl(e,t)}getAllFileSchemas(){const e=this._getEndpoint(this._getFileSchemasMethodName);return this.http.get(e)}}Du.\u0275fac=function(e){return new(e||Du)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(In),n.\u0275\u0275inject(Q))},Du.\u0275prov=n.\u0275\u0275defineInjectable({token:Du,factory:Du.\u0275fac});class Mu{read(e){return new u.Observable(t=>{const i=new FileReader;i.onloadend=function(){var r=(0,_.Z)(function*(s){t.next({content:s.target?.result,file:e}),t.complete()});return function(s){return r.apply(this,arguments)}}(),i.readAsArrayBuffer(e)})}}Mu.\u0275fac=function(e){return new(e||Mu)},Mu.\u0275prov=n.\u0275\u0275defineInjectable({token:Mu,factory:Mu.\u0275fac});class wu{constructor(e,t){this._httpClient=e,this._translateService=t}_generateFileDestinationUrl(e,t){return`ImageAPIService/upload?fileapi${t.lastModified}&totalFileLength=${t.size}&fileId=${e}&mimeType=${encodeURIComponent(t.type)}`}upload(e,t){const i=this._generateFileDestinationUrl(e,t);return this._httpClient.post(i,t,{headers:{"Content-Range":`bytes 0-${t.size}/${t.size}`,"Content-Type":t.type,"Content-Disposition":`attachment; filename=${encodeURIComponent(t.name)}`}}).pipe((0,G.K)(r=>(0,u.of)({error:r.error?.error||this._translateService.instant("InfoDialog.FileUpload.UnknownServerError")})))}}wu.\u0275fac=function(e){return new(e||wu)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(w.sK))},wu.\u0275prov=n.\u0275\u0275defineInjectable({token:wu,factory:wu.\u0275fac,providedIn:"root"});class xu{constructor(e,t){this._translateService=e,this._userInfo=t,this._defaultCulture="en-US"}initialize(){const e=this._userInfo?.cultureInfo?.sysCultureName??this._defaultCulture;this._translateService.setDefaultLang(this._defaultCulture),this._translateService.currentLang=e,this._translateService.getTranslation(e)}}xu.\u0275fac=function(e){return new(e||xu)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(Q))},xu.\u0275prov=n.\u0275\u0275defineInjectable({token:xu,factory:xu.\u0275fac,providedIn:"root"});var Dn=f(7206);const XS=new n.InjectionToken("Custom event name for get translations");class _o extends w.Zw{constructor(e,t,i){super(),this.customEventService=e,this._store=t,this._getTranslationsEventName=i,this._destroyed$=new u.Subject}getTranslation(e){return new u.Observable(t=>{this.customEventService.subscribe(this._getTranslationsEventName).pipe((0,L.R)(this._destroyed$),(0,I.b)(i=>{this._store.langs.forEach(r=>{const s=this._store.translations[r];this._store.translations[r]=Dn.Z(s,i)})})).subscribe(i=>{t.next(i)},u.noop,()=>{t.complete()}),this.customEventService.createOutboundChannel(this._getTranslationsEventName).next()})}ngOnDestroy(){this._destroyed$.next()}}_o.\u0275fac=function(e){return new(e||_o)(n.\u0275\u0275inject(Ye),n.\u0275\u0275inject(w.gM),n.\u0275\u0275inject(XS))},_o.\u0275prov=n.\u0275\u0275defineInjectable({token:_o,factory:_o.\u0275fac});class Eu{constructor(e){this._httpClient=e,this._serviceEndpoint="rest/MainMenuService/"}logout(){const e=this._serviceEndpoint+"Logout";return this._httpClient.post(e,{}).pipe((0,h.U)(t=>({redirectLocation:t.RedirectLocation})))}}Eu.\u0275fac=function(e){return new(e||Eu)(n.\u0275\u0275inject(D.HttpClient))},Eu.\u0275prov=n.\u0275\u0275defineInjectable({token:Eu,factory:Eu.\u0275fac,providedIn:"root"});var WM=f(10250),eb=f(32265);class yo{constructor(e){this._zone=e,this._message$=new u.Subject}init(e){return this._zone.runOutsideAngular(()=>(this._connection=(new eb.su).withUrl(e).withAutomaticReconnect().withHubProtocol(new eb.d7).build(),this._connection.on("ServerMessage",t=>this._zone.run(()=>this._message$.next(t))),(0,u.from)(this._connection.start())))}sendMessage(e){return(0,u.from)(this._connection.send("SendMessage",e))}subscribe(){return this._message$}ngOnDestroy(){this._connection.off("ServerMessage"),this._message$.complete(),this._connection.stop().then()}}yo.\u0275fac=function(e){return new(e||yo)(n.\u0275\u0275inject(n.NgZone))},yo.\u0275prov=n.\u0275\u0275defineInjectable({token:yo,factory:yo.\u0275fac,providedIn:"root"});var YM=f(98826);const n_="pong";class Co{constructor(e){this._ngZone=e}_createHeartbeatRequestMessage(){return{Id:(0,l.generateGuid)(),Header:{Sender:"ConsoleCommand",BodyTypeName:"System.String"},Body:"ping"}}_isHeartbeatResponseMessage(e){const t="CommandService"===e.Header?.Sender,i=e.Body===n_;return t&&i}_startHeartbeat(){this._stopHeartbeat(),this._ngZone.runOutsideAngular(()=>{console.log("WS-Heartbeat: connection ping scheduled for every [30] sec");const e=(0,u.timer)(1e3,3e4).pipe((0,u.tap)(()=>{this._webSocket$.next(this._createHeartbeatRequestMessage())}),(0,u.concatMap)(()=>(0,u.race)(this._webSocket$.pipe((0,u.filter)(t=>this._isHeartbeatResponseMessage(t)),(0,u.map)(t=>t.Body),(0,u.catchError)(()=>(0,u.of)("error"))),(0,u.of)("timeout").pipe((0,u.delay)(1e4)))));this._heartbeatSubscription=e.subscribe(t=>{switch(t){case n_:console.log(`WS-Heartbeat: Server responded with: ${n_}`);break;case"timeout":console.error("WS-Heartbeat: Server failed to respond in 10 seconds");break;case"error":console.error("WS-Heartbeat: Server errored out")}})})}_stopHeartbeat(){this._heartbeatSubscription&&this._heartbeatSubscription.unsubscribe()}init(e){return new u.Observable(t=>{this._webSocket$=(0,YM.j)({url:e,openObserver:{next:()=>{console.log(`Websocket channel opened for url: ${e}`),this._startHeartbeat(),t.complete()}}}),this._subscription=this._webSocket$.subscribe()})}sendMessage(e){return new u.Observable(t=>{this._webSocket$.next(e),t.next(),t.complete()})}subscribe(){const e={delay:2e3};return this._webSocket$.pipe((0,u.retry)(e),(0,u.filter)(t=>!this._isHeartbeatResponseMessage(t)))}ngOnDestroy(){this._stopHeartbeat(),this._webSocket$.complete(),this._subscription.unsubscribe()}}var i_,ye;Co.\u0275fac=function(e){return new(e||Co)(n.\u0275\u0275inject(n.NgZone))},Co.\u0275prov=n.\u0275\u0275defineInjectable({token:Co,factory:Co.\u0275fac,providedIn:"root"}),function(a){a.PTP="PTPMsg",a.BROADCAST="BroadcastMsg"}(i_||(i_={}));class ct{constructor(e,t,i){this.applicationInfo=e,this.injector=t,this.applicationInfoService=i,this._destroyed$=new u.Subject,this.init$=new u.ReplaySubject(1),this.messageEvent$=new u.Subject,e.clientConnectionClassName&&""!==e.clientConnectionClassName?this._initialize(e):this.applicationInfoService.loadApplicationInfo().subscribe(r=>{this._initialize(r.applicationInfo)})}_initialize(e){this.msgChannel=this._getChannel(e.clientConnectionClassName),this._initChannel(e.serviceUrl)}_getChannel(e){let t;switch(e){case"Terrasoft.WebSocketChannel":t=this.injector.get(Co);break;case"Terrasoft.SignalRChannel":t=this.injector.get(yo)}return t}_subscribeMsgChannel(){this.msgChannel.subscribe().pipe((0,L.R)(this._destroyed$)).subscribe({next:e=>{let t;if(e.Body&&"string"==typeof e.Body)try{t=JSON.parse(e.Body)}catch(r){return void((0,n.isDevMode)()&&console.warn(`MessageChannelService. Parse error: ${r}`))}else e.Body&&"object"==typeof e.Body&&(t=e.Body);const i={header:{sender:e?.Header?.Sender,bodyTypeName:e?.Header?.BodyTypeName},body:t,id:e.Id};this.messageEvent$.next(i)}})}_initChannel(e){this.msgChannel.init(e).subscribe({complete:()=>{this.init$.next(this.msgChannel),this._subscribeMsgChannel()}})}sendMessage(e,t){const i={Id:WM.i.create().toString(),Header:{Sender:t,BodyTypeName:"System.String"},Body:JSON.stringify(e)};return this.init$.pipe((0,M.w)(()=>this.msgChannel.sendMessage(i)))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this.init$.complete(),this.messageEvent$.complete()}}ct.\u0275fac=function(e){return new(e||ct)(n.\u0275\u0275inject(Qe),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(vn))},ct.\u0275prov=n.\u0275\u0275defineInjectable({token:ct,factory:ct.\u0275fac,providedIn:"root"}),function(a){a[a.General=0]="General",a[a.Advanced=1]="Advanced",a[a.None=2]="None"}(ye||(ye={}));ye.General,ye.General,ye.Advanced,ye.Advanced,ye.None,ye.None;var Tu,Mt,ib,Th,a_,Ph,ab,rb,Ra,Mn,r_,de,sb;!function(a){a[a.Error=1]="Error",a[a.Warning=2]="Warning",a[a.Information=4]="Information"}(Tu||(Tu={})),function(a){a.Contains="contains",a.StartsWith="starts-with",a.Equals="equals"}(Mt||(Mt={})),function(a){a[a.Asc=0]="Asc",a[a.Desc=1]="Desc"}(ib||(ib={})),function(a){a.METADATA_INIT="METADATA_INIT",a.MODEL_INIT="MODEL_INIT",a.VIEW_MODEL_INIT="VIEW_MODEL_INIT"}(Th||(Th={})),function(a){a.Blank="_blank",a.Self="_self"}(a_||(a_={})),function(a){a.BusinessRule="BusinessRule",a.RelatedPage="RelatedPage",a.TimelineEntity="TimelineEntity",a.AppearanceSettings="AppearanceSettings",a.Sidebar="Sidebar",a.UCTestAddon="UCTestAddon"}(Ph||(Ph={})),function(a){a[a.None=0]="None",a[a.Module=1]="Module",a[a.EditViewModelSchema=2]="EditViewModelSchema",a[a.ModuleViewModelSchema=3]="ModuleViewModelSchema",a[a.DetailViewModelSchema=4]="DetailViewModelSchema",a[a.GridDetailViewModelSchema=5]="GridDetailViewModelSchema",a[a.EditControlsDetailViewModelSchema=6]="EditControlsDetailViewModelSchema",a[a.UnitTestModule=7]="UnitTestModule",a[a.GridEditDetailViewModelSchema=8]="GridEditDetailViewModelSchema",a[a.AngularSchema=9]="AngularSchema"}(ab||(ab={})),function(a){a.Byte="Byte",a.Kilobyte="Kilobyte",a.Megabyte="Megabyte",a.Gigabyte="Gigabyte"}(rb||(rb={})),function(a){a.Const="Const",a.SysValue="SysValue",a.SysSetting="SysSetting",a.AttributeValue="AttributeValue",a.AttributeProperty="AttributeProperty",a.Formula="Formula"}(Ra||(Ra={})),function(a){a[a.IsNull=0]="IsNull",a[a.IsNotNull=1]="IsNotNull",a[a.Equal=2]="Equal",a[a.NotEqual=3]="NotEqual"}(Mn||(Mn={})),function(a){a[a.None=0]="None",a[a.And=1]="And",a[a.Or=2]="Or"}(r_||(r_={})),function(a){a.ChangeAttributeValue="ChangeAttributeValue",a.ChangeAttributeProperty="ChangeAttributeProperty",a.DataLoaded="DataLoaded",a.ContextReady="ContextReady"}(de||(de={})),function(a){a[a.General=0]="General",a[a.External=1]="External"}(sb||(sb={}));class Pu{constructor(e){this.window=e}navigate(e,t,i=a_.Blank){this.window.open(e,t||i)}}Pu.\u0275fac=function(e){return new(e||Pu)(n.\u0275\u0275inject(se))},Pu.\u0275prov=n.\u0275\u0275defineInjectable({token:Pu,factory:Pu.\u0275fac,providedIn:"root"});class Ah{}const s_=new n.InjectionToken("CRT_REQUIRE_JS"),ob=[l.DataValueType.DateTime,l.DataValueType.Date,l.DataValueType.Time],lb=new Map([[l.DataValueType.Integer,0],[l.DataValueType.Float,2],[l.DataValueType.Money,2],[l.DataValueType.FLOAT1,1],[l.DataValueType.FLOAT2,2],[l.DataValueType.FLOAT3,3],[l.DataValueType.FLOAT4,4],[l.DataValueType.FLOAT8,8]]),o_=[l.DataValueType.Float,l.DataValueType.FLOAT1,l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Integer,l.DataValueType.Money],XM="/img/entity/hash/SysImage/Data/";function je(){let a=location.pathname;const e=a.match(/.*?\/\d\/?/);return a=e&&1===e.length?function ew(a){return a.endsWith("/")||(a+="/"),a}(e[0]):"",function iw(...a){return a.map(e=>function tw(a){return a.replace(/(^([/\\])+)|(([/\\])+$)/,"")}(e)).join("/")}(location.origin,a)}function Au(){let e=je().replace(location.origin,"");return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e}function l_(){return je().replace(/\/0\/?$|\/+$/,"")}function rw(a){return a?Au()+XM+a:null}class ka extends Ah{constructor(e,t){super(),this._requireJs=e,this._httpClient=t,this._serviceEndpoint="ServiceModel/ClientUnitSchemaPathService.svc/",this.paths=new Map}_loadPartOfSchema(e){const t=this._serviceEndpoint+"GetPathsBySchemaName/"+e;return this._httpClient.post(t,null).pipe((0,h.U)(i=>i?.paths??[]))}register(e){return this.paths.has(e)?(0,u.of)(void 0):this._loadPartOfSchema(e).pipe((0,h.U)(t=>{const i=Object.fromEntries(t.map(r=>[r.name,y.Location.joinWithSlash(je(),r.path)]));this._requireJs.config({paths:i});for(const{name:r,path:s}of t)this.paths.set(r,s)}))}registerDescriptors(e){const t=Object.fromEntries(e.map(i=>[i.schemaName,y.Location.joinWithSlash(y.Location.joinWithSlash(je(),i.path),i.schemaName)]));this._requireJs.config({paths:t})}}ka.\u0275fac=function(e){return new(e||ka)(n.\u0275\u0275inject(s_),n.\u0275\u0275inject(D.HttpClient))},ka.\u0275prov=n.\u0275\u0275defineInjectable({token:ka,factory:ka.\u0275fac});class Na extends Ah{constructor(e,t){super(),this._requireJs=e,this._appInfo=t,this._hashParamName="hash",this._workspaceBaseUrl=je(),this._emptyResourcesModulePath="Terrasoft/configuration/resources/empty-resources.js"}_getSchemaRuntimePath(e){return y.Location.joinWithSlash(this._workspaceBaseUrl,e.staticFileContent.schemasRuntimePath)}_getResourceRuntimePath(e){return y.Location.joinWithSlash(this._workspaceBaseUrl,e.staticFileContent.resourcesRuntimePath)}_getEmptyResourcesPath(e){const t=y.Location.joinWithSlash(this._workspaceBaseUrl,e.coreModulesPath),i=new URL(y.Location.joinWithSlash(t,this._emptyResourcesModulePath));return i.searchParams.set(this._hashParamName,e.configurationContentHash),i.toString()}_getSchemaPath(e,t){const i=new URL(y.Location.joinWithSlash(this._getSchemaRuntimePath(t),`${e}.js`));return i.searchParams.set(this._hashParamName,t.configurationContentHash),i.toString()}_getResourcePath(e,t){const i=new URL(y.Location.joinWithSlash(this._getResourceRuntimePath(t),`${e}Resources.js`));return i.searchParams.set(this._hashParamName,t.configurationContentHash),i.toString()}register(e){return this._requireJs.config({paths:{[e]:this._getSchemaPath(e,this._appInfo),[`${e}Resources`]:[this._getResourcePath(e,this._appInfo),this._getEmptyResourcesPath(this._appInfo)]}}),(0,u.of)(void 0)}registerDescriptors(e,t){e.forEach(i=>{const r=i.schemaName;this._requireJs.config({paths:{[r]:this._getSchemaPath(r,t),[`${r}Resources`]:[this._getResourcePath(r,t),this._getEmptyResourcesPath(t)]}})})}}Na.\u0275fac=function(e){return new(e||Na)(n.\u0275\u0275inject(s_),n.\u0275\u0275inject(Qe))},Na.\u0275prov=n.\u0275\u0275defineInjectable({token:Na,factory:Na.\u0275fac});n.Injector;class Va extends Ah{register(){return(0,u.of)(void 0)}registerDescriptors(e){}}Va.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Va)))(t||Va)}}(),Va.\u0275prov=n.\u0275\u0275defineInjectable({token:Va,factory:Va.\u0275fac});class Ci{constructor(e){this._window=e}get(){return this._window.requirejs}}Ci.\u0275fac=function(e){return new(e||Ci)(n.\u0275\u0275inject(se))},Ci.\u0275prov=n.\u0275\u0275defineInjectable({token:Ci,factory:Ci.\u0275fac});class Nt{constructor(e){this.userInfo=e,this._resourceMacrosRegExpPattern="(?<macrosBody>#ResourceString\\((?<macrosArgs>[^)]*)\\)#)",this._viewModelAttributeRegExpPattern=`\\$${ho}.${Pa.string}.(?<macrosArgs>[\\S\\s]*)`,this._sysCultureName=this.userInfo.cultureInfo.sysCultureName,this._defCultureName=this.userInfo.defCultureInfo.sysCultureName}_getLczResource(e){const t={};return e.forEach(i=>t[i.cultureName]=i.value),t}_getResourceValueMatches(e){const t=new RegExp(this._resourceMacrosRegExpPattern,"g"),i=new RegExp(this._viewModelAttributeRegExpPattern,"g");let r=[...(e??"").matchAll(i)];return r.length||(r=[...(e??"").matchAll(t)]),r}findLocalizableValue(e){if("string"==typeof e)return e;if(!e||"object"!=typeof e)return null;let t;return t=Array.isArray(e)?e?.filter(i=>i.value).reduce((i,r)=>Object.assign(i,{[r.cultureName]:r.value}),{}):e,(t[this._sysCultureName]??t[this._defCultureName])?.toString()??null}findLocalizationFromResourceString(e,t){const i=this._getResourceValueMatches(e);let r,s=e??"";if(i.length){if([...i].forEach(o=>{const{macrosArgs:c}=o.groups;r=t.strings[c]}),r)return new kt(Object.entries(r).map(([o,c])=>({cultureName:o,value:c})));s=""}return new kt([{cultureName:this._sysCultureName||this._defCultureName,value:s}])}findValueFromResource(e,t){const i=this.findLocalizationFromResourceString(e,t),r=this._getLczResource(i);return this.findLocalizableValue(r)}findViewModelResourceValue(e,t,i){var r=this;return(0,_.Z)(function*(){const s=r._getResourceValueMatches(e);let o;if(s.length)for(const c of[...s]){const{macrosArgs:d}=c.groups;o=yield t.Strings[d]}return o||i||e})()}}Nt.\u0275fac=function(e){return new(e||Nt)(n.\u0275\u0275inject(Q))},Nt.\u0275prov=n.\u0275\u0275defineInjectable({token:Nt,factory:Nt.\u0275fac,providedIn:"root"});const c_=new n.InjectionToken("Represents a list of schema change message predicates");class tn{constructor(e,t){this._messageChannelService=e,this._predicates=t,this._destroyed$=new u.Subject,this.schemaChanged$=new u.Subject,this._subscribeMessageChannelEvent()}_getSchemaType(e){let t;switch(e){case"ClientUnitSchemaManager":t=Aa.ClientUnitSchema;break;case"EntitySchemaManager":t=Aa.EntitySchema}return t}_subscribeMessageChannelEvent(){this._messageChannelService.messageEvent$.pipe((0,P.h)(e=>this._predicates?.some(t=>t(e))),(0,L.R)(this._destroyed$)).subscribe(e=>{const t=e.body,i=this._getSchemaType(t.ManagerName);i&&this.schemaChanged$.next({name:t.Name,uId:t.UId,schemaType:i})})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this.schemaChanged$.complete()}}tn.\u0275fac=function(e){return new(e||tn)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(c_,8))},tn.\u0275prov=n.\u0275\u0275defineInjectable({token:tn,factory:tn.\u0275fac,providedIn:"root"});class So{constructor(e){this.schemaChangeListener=e,this._repository=new Map,this._uIdMap=new Map,this._destroyed$=new u.Subject,this.schemaChangeListener.schemaChanged$.pipe((0,P.h)(t=>t.schemaType===this.provider.schemaType),(0,L.R)(this._destroyed$)).subscribe(t=>this.clearSchemaCacheByUId(t.uId))}add(e){this._repository.set(e.name,e),this._uIdMap.set(e.uId,e.name)}getCachedSchema(e){return this._repository.get(e)}getIsSchemaCached(e){return this._repository.has(e)}getCachedSchemesNames(){return[...this._repository.keys()]}getSchemaByName(e){const t=this.getCachedSchema(e);return t?(0,u.of)(t):this.provider.getSchemaByName(e).pipe((0,I.b)(i=>this.add(i)))}getSchemaByUId(e){const t=this._uIdMap.get(e),i=t&&this.getCachedSchema(t);return i?(0,u.of)(i):this.provider.getSchemaByUId(e).pipe((0,I.b)(r=>this.add(r)))}clearSchemaCacheByName(e){const t=this.getCachedSchema(e);t&&this._uIdMap.delete(t.uId),this._repository.delete(e)}clearSchemaCacheByUId(e){const t=this._uIdMap.get(e);t&&this._repository.delete(t),this._uIdMap.delete(e)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}So.\u0275fac=function(e){return new(e||So)(n.\u0275\u0275inject(tn))},So.\u0275prov=n.\u0275\u0275defineInjectable({token:So,factory:So.\u0275fac});class bo{constructor(e){this._entitySchemaService=e,this.schemaType=Aa.EntitySchema}_getSchema(e){return e.pipe((0,M.w)(t=>!0===t.success?(0,u.of)(t):(0,u.throwError)(()=>new Error(t.errorInfo.message))),(0,h.U)(t=>t.entitySchema))}_getScheme(e){return e.pipe((0,M.w)(t=>!0===t.success?(0,u.of)(t):(0,u.throwError)(()=>new Error(t.errorInfo.message))),(0,h.U)(t=>t.schemes))}getSchemaByUId(e){const t=this._entitySchemaService.getEntitySchemaByUId(e);return this._getSchema(t)}getSchemaByName(e){const t=this._entitySchemaService.getEntitySchemaByName(e);return this._getSchema(t)}getSchemes(e){const t=this._entitySchemaService.getEntitySchemes(e);return this._getScheme(t)}}bo.\u0275fac=function(e){return new(e||bo)(n.\u0275\u0275inject(Ke))},bo.\u0275prov=n.\u0275\u0275defineInjectable({token:bo,factory:bo.\u0275fac,providedIn:"root"});const Si=new n.InjectionToken("DataServiceUri"),u_={provide:Si,useFactory:a=>a?.isSSP?"DataService/ssp/json/SyncReply":"DataService/json/SyncReply",deps:[[new n.Optional,Q]]};class wn extends So{constructor(e,t){super(t),this.provider=e,this.schemaChangeListener=t}_checkPath(e){if(!e||0===e.length)throw new Error("Path is null or empty")}_checkLookupColumn(e,t){if(!e.isLookupType)throw new Error(`Column '${e.name}' for schema '${t.name}' is not lookup`)}_getEntitySchemaColumn(e,t){const i=e.columns.find(r=>r.name===t);if(!i)throw new Error(`Can not find column '${t}' in schema '${e.name}'`);return i}_findEntitySchemesByPath(e,t){this._checkPath(t);const i=[...t],r=this.getCachedSchema(e);if(!r)return null;const s=i.shift(),o=Eh.getPathItemInfo(s);let c=[];if(o.isBackReference)c=this._findEntitySchemesByPath(o.referenceSchemaName,i);else{const p=this._getEntitySchemaColumn(r,o.columnName);if(0===i.length)return[r];this._checkLookupColumn(p,r),c=this._findEntitySchemesByPath(p.referenceSchemaName,i)}if(!c)return null;const d=c.filter(p=>p.name!==r.name);return[r,...d]}_getAreSchemesCached(e){for(const t of e){const i=this.getCachedSchema(t.name);if(!i)return!1;const r=i.columns.filter(o=>o.isLookupType).every(o=>this.getIsSchemaCached(o.referenceSchemaName));if(t.loadLookupColumns&&!r)return!1;const s=t.forwardReferencePaths??[];for(const o of s){const c=o.split(".");if(!this.findEntitySchemaColumnByPath(t.name,c))return!1}}return!0}_addSchemaIfNotExists(e,t){e.has(t.name)||e.set(t.name,t)}_addSchemesIfNotExists(e,t){t.forEach(i=>{this._addSchemaIfNotExists(e,i)})}_getCachedSchemes(e){const t=new Map;return e.forEach(i=>{const r=this.getCachedSchema(i.name);if(r){if(this._addSchemaIfNotExists(t,r),i.loadLookupColumns){const o=r.columns.filter(c=>c.isLookupType).map(c=>this.getCachedSchema(c.referenceSchemaName)).filter(c=>null!=c);this._addSchemesIfNotExists(t,o)}(i.forwardReferencePaths??[]).forEach(o=>{const c=o.split("."),d=this._findEntitySchemesByPath(i.name,c);d&&this._addSchemesIfNotExists(t,d)})}}),[...t.values()]}getSchemes(e){if(this._getAreSchemesCached(e))return(0,u.of)(this._getCachedSchemes(e));const t={requests:e,cachedSchemesNames:this.getCachedSchemesNames()};return this.provider.getSchemes(t).pipe((0,I.b)(i=>i.forEach(r=>this.add(r))),(0,h.U)(()=>this._getCachedSchemes(e)))}findEntitySchemaByPath(e,t){this._checkPath(t);const i=this.getCachedSchema(e);if(!i)return null;const r=[...t],s=r.shift(),o=Eh.getPathItemInfo(s);if(o.isBackReference)return this.findEntitySchemaByPath(o.referenceSchemaName,r);const c=this._getEntitySchemaColumn(i,o.columnName);return 0===r.length?i:(this._checkLookupColumn(c,i),this.findEntitySchemaByPath(c.referenceSchemaName,r))}findEntitySchemaColumnByPath(e,t){const i=this.findEntitySchemaByPath(e,t);if(!i)return null;const r=[...t].pop(),s=Eh.getPathItemInfo(r);return this._getEntitySchemaColumn(i,s.columnName)}}wn.\u0275fac=function(e){return new(e||wn)(n.\u0275\u0275inject(bo),n.\u0275\u0275inject(tn))},wn.\u0275prov=n.\u0275\u0275defineInjectable({token:wn,factory:wn.\u0275fac,providedIn:"root"});var pe=f(40271);class vo{constructor(e){this.translateService=e}_getTranslations(e){const t=this.translateService.translations[e];return t?(0,u.of)({translation:t,cultureName:e}):this.translateService.currentLoader.getTranslation(e).pipe((0,h.U)(i=>({translation:i,cultureName:e})))}getAllCultureValues(e,t){return(0,u.forkJoin)(e.map(i=>this._getTranslations(i))).pipe((0,h.U)(i=>{const r=new kt;for(const{translation:s,cultureName:o}of i){const c=(0,pe.Z)(s,t);r.setValueLocalizableString(o,c)}return r}))}isTranslateKey(e){return/^\S+\.\S+$/.test(e)}}vo.\u0275fac=function(e){return new(e||vo)(n.\u0275\u0275inject(w.sK))},vo.\u0275prov=n.\u0275\u0275defineInjectable({token:vo,factory:vo.\u0275fac});class Io{constructor(e){this._window=e}get(e){return this._window.localStorage.getItem(e)}set(e,t){this._window.localStorage.setItem(e,t)}remove(e){this._window.localStorage.removeItem(e)}}Io.\u0275fac=function(e){return new(e||Io)(n.\u0275\u0275inject(se))},Io.\u0275prov=n.\u0275\u0275defineInjectable({token:Io,factory:Io.\u0275fac});class Do{get availableColors(){return["linear-gradient(225deg, #A6DE00 0%, #98CB00 100%)","linear-gradient(227.47deg, #00C853 3.3%, #008537 93.87%)","linear-gradient(223.72deg, #22AC14 6.16%, #0B8500 97.75%)","linear-gradient(222.61deg, #FFAC07 0%, #FF7700 96.17%)","linear-gradient(223.36deg, #FF8800 0%, #FF4E00 103.03%)","linear-gradient(226.56deg, #F9307F 2.58%, #C2185B 100%)","linear-gradient(220.47deg, #FF6534 0%, #DB2D00 97.81%)","linear-gradient(223.63deg, #FF4013 0%, #D32F2F 102.51%)","linear-gradient(220.79deg, #B87CCF 2.27%, #A400AA 95.92%)","linear-gradient(143.25deg, #7848EE 1.25%, #512DA8 101.21%)","linear-gradient(224.97deg, #0091EA 5.35%, #0058EF 100%)","linear-gradient(223.46deg, #0058EF -4.85%, #0042B5 103.03%)","linear-gradient(231.24deg, #03A9F4 5.08%, #0075EA 96.3%)","linear-gradient(143.8deg, #4F43C2 6.59%, #282261 95.27%)","linear-gradient(226.04deg, #009688 3.14%, #00665C 94.22%)","linear-gradient(227.53deg, #00BFA5 3.54%, #04A58F 89.8%)"]}constructor(e){this.window=e,this.STORAGE_KEY="freedomContactColor",this._currentIndex=0,this._currentIndex=this._getIndexFromStorage()}_getIndexStorageKey(){return`${this.STORAGE_KEY}_index`}_getStorageKey(e){return`${this.STORAGE_KEY}_${e}`}_saveIndexToStorage(){this.window.localStorage.setItem(this._getIndexStorageKey(),this._currentIndex.toString())}_saveToStorage(e,t){this.window.localStorage.setItem(this._getStorageKey(e),t)}_getIndexFromStorage(){const e=this.window.localStorage?.getItem(this._getIndexStorageKey());return e?Number(e):0}_getFromStorage(e){return this.window.localStorage.getItem(this._getStorageKey(e))}getNextColor(e){let t=this._getFromStorage(e)||"";return-1===t.indexOf("#")&&(this._currentIndex>=this.availableColors.length&&(this._currentIndex=0),t=this.availableColors[this._currentIndex],this._currentIndex++,this._saveIndexToStorage(),this._saveToStorage(e,t)),t}}Do.\u0275fac=function(e){return new(e||Do)(n.\u0275\u0275inject(se))},Do.\u0275prov=n.\u0275\u0275defineInjectable({token:Do,factory:Do.\u0275fac,providedIn:"root"});class d_{}class xn extends d_{toDataSourceAttribute(e,t){const{path:i,aggregationConfig:r}=t??{};return e&&i&&r?{type:"aggregation",name:e,path:i,aggregationConfig:r}:null}toEntityDataSourceAttribute(e){const{path:t,aggregationConfig:i}=e??{};return t&&i?{type:"Aggregation",path:t,aggregationConfig:i}:null}}xn.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(xn)))(t||xn)}}(),xn.\u0275prov=n.\u0275\u0275defineInjectable({token:xn,factory:xn.\u0275fac});class bi extends d_{toDataSourceAttribute(e,t){const{path:i}=t??{};return e&&i?{type:"default",path:i,name:e}:null}toEntityDataSourceAttribute(e){const{path:t}=e??{};return t?{type:/\./.test(t)?"ForwardReference":"Own",path:t}:null}}bi.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(bi)))(t||bi)}}(),bi.\u0275prov=n.\u0275\u0275defineInjectable({token:bi,factory:bi.\u0275fac});class En extends d_{toDataSourceAttribute(e,t){const{path:i,functionConfig:r}=t??{};return e&&i&&r?{type:"function",name:e,path:i,functionConfig:r}:null}toEntityDataSourceAttribute(e){const{path:t,functionConfig:i}=e??{};return t&&i?{type:"Function",path:t,functionConfig:i}:null}}En.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(En)))(t||En)}}(),En.\u0275prov=n.\u0275\u0275defineInjectable({token:En,factory:En.\u0275fac});const lw=new n.InjectionToken("Represents a factory of entity data source attribute config converters");class Ru{}Ru.\u0275fac=function(e){return new(e||Ru)},Ru.\u0275mod=n.\u0275\u0275defineNgModule({type:Ru}),Ru.\u0275inj=n.\u0275\u0275defineInjector({providers:[xn,bi,En,function cw(){return bn.create({token:lw,mappings:[{predicate:"aggregation",injectable:xn},{predicate:"Aggregation",injectable:xn},{predicate:"function",injectable:En},{predicate:"Function",injectable:En}],default:{injectable:bi}})}()]});class ku{getInitials(e,t){if(!e||""===e)return"";const i=t||(r=>r.substr(0,1).toUpperCase());return e.trim().split(" ",2).map(i).join("")}}ku.\u0275fac=function(e){return new(e||ku)},ku.\u0275prov=n.\u0275\u0275defineInjectable({token:ku,factory:ku.\u0275fac,providedIn:"root"});class Mo{constructor(e){this._httpClient=e,this._serviceEndpoint="rest/MacrosHelperService"}static isMacros(e){return"string"==typeof e&&(e?.startsWith("#")??!1)}getTemplate(e,t){return this.getTemplateByEntity({textTemplate:e},t)}getTemplateByEntity(e,t){const i=`${this._serviceEndpoint}/GetTemplate`;return this._httpClient.post(i,{request:e}).pipe((0,h.U)(r=>{const s=r?.GetTemplateResult;return s?.success?t?s.textTemplate:s.textTemplate.replace(/\s?<.+?>(.+?)<(.+?)\/?(.+?)>/g,""):e.textTemplate}))}getMultiLanguageTemplate(e,t,i){const r=`${this._serviceEndpoint}/GetMultiLanguageTextTemplate`;return this._httpClient.post(r,{request:{entityId:e,entityName:t,templateId:i}}).pipe((0,h.U)(s=>s?.GetMultiLanguageTextTemplateResult))}}Mo.\u0275fac=function(e){return new(e||Mo)(n.\u0275\u0275inject(D.HttpClient))},Mo.\u0275prov=n.\u0275\u0275defineInjectable({token:Mo,factory:Mo.\u0275fac,providedIn:"root"});class wo{constructor(e){this._elementRef=e,this._scrollPositions=new Map,this._saveScrollPosition=t=>{const i=t.target;if(i){const r=this._findRef(i)||new WeakRef(i);this._scrollPositions.set(r,{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop})}}}get scrollPositions(){return this._scrollPositions}set scrollPositions(e){this._scrollPositions=e}_findRef(e){for(const[t]of this._scrollPositions)if(t.deref()===e)return t;return null}_onScrollEnd(){const e=this._elementRef.nativeElement;return(0,u.fromEventPattern)(t=>e.addEventListener("scroll",t,!0),t=>e.removeEventListener("scroll",t,!0)).pipe((0,u.debounceTime)(200))}startScrollTracking(){this._subscription?.unsubscribe(),this._subscription=this._onScrollEnd().subscribe(e=>this._saveScrollPosition(e))}stopScrollTracking(){this._subscription?.unsubscribe()}restoreScrollPosition(){for(const[e,t]of this._scrollPositions){const i=e.deref();i?.isConnected?i.scroll(t.scrollLeft,t.scrollTop):this._scrollPositions.delete(e)}}ngOnDestroy(){this.stopScrollTracking(),this._scrollPositions.clear()}}wo.\u0275fac=function(e){return new(e||wo)(n.\u0275\u0275inject(n.ElementRef))},wo.\u0275prov=n.\u0275\u0275defineInjectable({token:wo,factory:wo.\u0275fac});var p_,Ao,V,J=f(6388);class uw{constructor(e,t){this.id=e,this._baseHostInjector=t,this._hostModuleTypes=[],this._hostModuleRefs=[],this._lazyModulesBySource=new Map,this._hostInjector=this._baseHostInjector}_createDynamicNgModule(e){const t=(0,n.NgModule)({imports:e})(class{});return(0,n.createNgModule)(t,this._hostInjector)}inject(e){return this._hostInjector.get(e)}addLazyModule(e){const t=l.bootstrappedCrtModules.get(e);if(!t)throw new Error("Module was not bootstrapped");const{source:i}=t;this._lazyModulesBySource.has(i)||this._lazyModulesBySource.set(i,new Set),this._lazyModulesBySource.get(i).add(e)}getLazyModules(e){return[...this._lazyModulesBySource.get(e)??[]]}connectHostLazyModules(){const e=this.getLazyModules("host");if((0,J.Z)(e,this._hostModuleTypes))return;const t=this._createDynamicNgModule(e);this._hostModuleTypes=e,this._hostModuleRefs.push(t),this._hostInjector=t.injector}destroy(){for(const e of this._hostModuleRefs)e.destroy();this._hostModuleRefs=[]}}class Fa extends Ta{constructor(){super(...arguments),this._injectionContextsMap=new Map}createContext(e,t){const i=new uw(e,t);return this._injectionContextsMap.set(e,i),i}injectFromContext(e,t){return this._injectionContextsMap.get(e).inject(t)}removeContext(e){return this._injectionContextsMap.get(e)?.destroy(),this._injectionContextsMap.delete(e)}}Fa.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Fa)))(t||Fa)}}(),Fa.\u0275prov=n.\u0275\u0275defineInjectable({token:Fa,factory:Fa.\u0275fac,providedIn:"root"}),function(a){a.Insert="insert",a.Update="update",a.Delete="delete"}(p_||(p_={}));class Nu{constructor(e,t){this._messageChannelService=e,this._userInfo=t,this._subscriptions=[],this.newMessageEvent=new n.EventEmitter,this.feedPostPublishedEvent=new n.EventEmitter,this._subscribeMessageChannelEvents()}_subscribeMessageChannelEvents(){this._subscriptions.push(this._messageChannelService.messageEvent$.pipe((0,u.filter)(e=>"UpdateSocialMessage"===e.header.sender),(0,u.map)(e=>{const t=e.body;return{MessageId:e.id.toString(),AuthorId:t.sysAdminUnitId,Operation:t.operation,EntityId:t.channelId,ParentId:t.parentId,EntityName:t.entityName}})).subscribe(e=>this.newMessageEvent.emit(e)))}onFeedPostPublished(e,t){const i={MessageId:e,Operation:p_.Insert,EntityId:t};this.feedPostPublishedEvent.emit(i)}ngOnDestroy(){this._subscriptions.forEach(e=>e?.unsubscribe())}}Nu.\u0275fac=function(e){return new(e||Nu)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Q))},Nu.\u0275prov=n.\u0275\u0275defineInjectable({token:Nu,factory:Nu.\u0275fac});class xo{constructor(e){this._httpClient=e,this._workplaceServiceUrl="/rest/WorkplaceService/"}resetWorkplaceScriptCache(){const e=this._workplaceServiceUrl+"ResetScriptCache";return this._httpClient.post(e,null)}}xo.\u0275fac=function(e){return new(e||xo)(n.\u0275\u0275inject(D.HttpClient))},xo.\u0275prov=n.\u0275\u0275defineInjectable({token:xo,factory:xo.\u0275fac,providedIn:"root"});class Eo{constructor(){this._customEventService=(0,n.inject)(Ye),this._listeners=new Map,this.destroyed$=new u.Subject,this.addDefaultListeners(),this.initChannels(),this._startListening()}_startListening(){this.inboundChannel$.pipe((0,u.takeUntil)(this.destroyed$)).subscribe(e=>{if(!this._listeners.has(e.type))throw new Error(`No listener for "${e.type}" request`);const i=s=>{const o={body:s,requestId:e.id,requestType:e.type};this.outboundChannel$.next(o)},r=this._listeners.get(e.type)(e);r instanceof Promise?r.then(i):i(r)})}addDefaultListeners(){this.addListener("ping",()=>"pong")}initChannels(){this.inboundChannel$=this._customEventService.subscribe("CreatioBrowserExtensionRequest"),this.outboundChannel$=this._customEventService.createOutboundChannel("CreatioBrowserExtensionResponse")}addListener(e,t){this._listeners.set(e,t)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}Eo.\u0275fac=function(e){return new(e||Eo)},Eo.\u0275prov=n.\u0275\u0275defineInjectable({token:Eo,factory:Eo.\u0275fac,providedIn:"root"});class To extends Eo{initChannels(){this.inboundChannel$=new u.Subject,this.outboundChannel$=new u.Subject}simulateBrowserExtensionRequest(e){const t=(0,u.firstValueFrom)(this.outboundChannel$.pipe((0,u.first)(i=>i.requestId===e.id)));return this.inboundChannel$.next(e),t}}To.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(To)))(t||To)}}(),To.\u0275prov=n.\u0275\u0275defineInjectable({token:To,factory:To.\u0275fac});class Po{constructor(e){this._environment=e}getUrl(){const e=this._environment.runtimeApplicationUrl||this._environment.defaultApplicationUrl;return y.Location.joinWithSlash(this._environment.workspaceBaseUrl,e)}}Po.\u0275fac=function(e){return new(e||Po)(n.\u0275\u0275inject("environment"))},Po.\u0275prov=n.\u0275\u0275defineInjectable({token:Po,factory:Po.\u0275fac,providedIn:"root"}),function(a){a.Reload="reload",a.Merge="merge"}(Ao||(Ao={})),function(a){a.Init="init",a.Create="create",a.Update="update",a.Copy="copy",a.Delete="delete",a.Unknown="unknown"}(V||(V={}));const ub="crt.EntityDataSource",Rh="crt.PageParametersDataSource";var vi;!function(a){a[a.None=0]="None",a[a.Small=1]="Small",a[a.Medium=2]="Medium",a[a.Large=3]="Large",a[a.ExtraLarge=4]="ExtraLarge",a[a.Custom=5]="Custom"}(vi||(vi={}));const pw=new n.InjectionToken("sessionEndNotifier"),mw=new n.InjectionToken("APPEARANCE_SETTINGS_DEFAULT_LOADER"),hw=new n.InjectionToken("APPEARANCE_SETTINGS_LOADER"),db=new Map([[vi.Small,"modal-size-small"],[vi.Medium,"modal-size-medium"],[vi.Large,"modal-size-large"],[vi.ExtraLarge,"modal-size-extra-large"]]);class Vu{constructor(){this._appearanceSettingsLoader=(0,n.inject)(hw,{optional:!0}),this._appearanceSettingsDefaultLoader=(0,n.inject)(mw,{optional:!0})}_getEmptyAppearanceSettings(){const e={modalSettings:{size:vi.None}};return Promise.resolve(e)}_getAppearanceSettings(e){return this._appearanceSettingsLoader?(0,u.lastValueFrom)(this._appearanceSettingsLoader.getAppearanceSettings(e)):this._getEmptyAppearanceSettings()}_getDefaultAppearanceSettings(e){return this._appearanceSettingsDefaultLoader?(0,u.lastValueFrom)(this._appearanceSettingsDefaultLoader.getDefaultAppearanceSettings(e)):this._getEmptyAppearanceSettings()}getSchemaModalClasses(e){var t=this;return(0,_.Z)(function*(){let i;const r=yield t._getAppearanceSettings(e),s=yield t._getEmptyAppearanceSettings(),o=r?.modalSettings??s.modalSettings;if(o?.size!==vi.None)i=db.get(o.size);else{const d=(yield t._getDefaultAppearanceSettings(e)).modalSettings;i=db.get(d.size)}return[i]})()}}Vu.\u0275fac=function(e){return new(e||Vu)},Vu.\u0275prov=n.\u0275\u0275defineInjectable({token:Vu,factory:Vu.\u0275fac,providedIn:"root"});class pb{}const kh="#DATE_SEPARATOR#",mb=`--${kh}--${kh}----`,fw=`${mb} 00:00`,_w={[l.DataValueType.Date]:mb,[l.DataValueType.Time]:"00:00",[l.DataValueType.DateTime]:fw};class La extends pb{constructor(e){super(),this._dateTimeFormat=e?.cultureInfo?.dateTimeFormat}create(e){const t=_w[e];return t?qf(t,[{searchValue:kh,replaceMacros:kh,replaceValue:this._dateTimeFormat?.dateSeparator??"/"}]):""}}La.\u0275fac=function(e){return new(e||La)(n.\u0275\u0275inject(Q))},La.\u0275prov=n.\u0275\u0275defineInjectable({token:La,factory:La.\u0275fac});class Oa extends pb{constructor(e){super(),this._decimalSeparator=e?.cultureInfo?.decimalSeparator}create(e){const t=lb.get(e);return t?"0"+(this._decimalSeparator??".")+"0".repeat(t):"0"}}Oa.\u0275fac=function(e){return new(e||Oa)(n.\u0275\u0275inject(Q))},Oa.\u0275prov=n.\u0275\u0275defineInjectable({token:Oa,factory:Oa.\u0275fac});const gb=new n.InjectionToken("A factory of empty placeholder creators"),yw=bn.create({token:gb,mappings:[{predicate:a=>ob.includes(a),injectable:La},{predicate:a=>o_.includes(a),injectable:Oa}]});var Ro,m_;!function(a){a.PDS="Page PDS",a.SectionAccess="Section access",a.PageAccess="Object page settings rule"}(Ro||(Ro={}));class Fu extends Error{constructor(e,t,i){super(),this._schemaName=e,this._userName=t,this._rule=i}get message(){return this._schemaName?`${this._schemaName} is not allowed due to ACL setup for ${this._userName}. Failed rules: - ${this._rule}.`:"Page is not allowed due to ACL setup. Check application logs for more details."}}class fb{}!function(a){a[a.Error=0]="Error",a[a.Debugger=1]="Debugger",a[a.Info=2]="Info"}(m_||(m_={}));class ja{get dataServiceUri(){return this._dataServiceUri||(this._dataServiceUri=this._injector.get(Si)),this._dataServiceUri}constructor(e,t){this._httpClient=e,this._injector=t}_createClientLogMessage(e,t){return{message:e,messageType:t,loggerName:"Client"}}logError(e){const t=this._createClientLogMessage(e.message,m_.Error);return this._httpClient.post(this.dataServiceUri+"/PostClientLog",{LogItems:[t]})}}ja.\u0275fac=function(e){return new(e||ja)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(n.Injector))},ja.\u0275prov=n.\u0275\u0275defineInjectable({token:ja,factory:ja.\u0275fac,providedIn:"root"});class Ba{constructor(e){this._injector=e,this._userInfo=this._injector.get(Q),this._rightsService=this._injector.get(fb),this._featureService=this._injector.get(l.FeatureService),this._clientLogService=this._injector.get(ja)}checkAccess(e){var t=this;return(0,_.Z)(function*(){if((yield t._featureService.getFeatureState("EnablePageOpeningRestrictions"))&&!(yield(0,u.firstValueFrom)(t._rightsService.getCanExecuteOperation("CanBypassPageOpeningRestrictions")))&&!(yield t._rightsService.getAclGranted(e.name)))throw console.error((new Fu).message),t._clientLogService.logError(new Fu(e.name,t._userInfo.contactName,Ro.PDS)).subscribe(),new Fu})()}}Ba.\u0275fac=function(e){return new(e||Ba)(n.\u0275\u0275inject(n.Injector))},Ba.\u0275prov=n.\u0275\u0275defineInjectable({token:Ba,factory:Ba.\u0275fac,providedIn:"root"});class le{constructor(e){this._featureValues=e,this.rendering$=new u.BehaviorSubject(null),this._useMeasurePerformanceTools=this._featureValues?.UseMeasurePerformanceTools}measure(e,t,i){if(!this._useMeasurePerformanceTools)return t();const r=i||performance.now(),s=t();return performance.measure(e,{start:r}),s}measureCallback(e,t){var i=this;return(0,_.Z)(function*(){if(!i._useMeasurePerformanceTools)return t();const r=performance.now(),s=yield t();return performance.measure(e,{start:r}),s})()}measure$(e){if(!this._useMeasurePerformanceTools)return i=>i;let t;return i=>(0,u.of)(null).pipe((0,I.b)(()=>t=performance.now()),(0,u.switchMap)(()=>i),(0,I.b)(()=>performance.measure(e,{start:t})))}}le.\u0275fac=function(e){return new(e||le)(n.\u0275\u0275inject(te,8))},le.\u0275prov=n.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac,providedIn:"root"});class Lu{constructor(e,t,i,r){this._messageChannelService=e,this._userInfo=t,this._sessionEndNotifier=i,this._window=r,this._onSessionEnding=new u.Subject,this._subscription=new u.Subscription}get onSessionEnding$(){return this._onSessionEnding.asObservable()}_processSessionEndMessage(e){return this._sessionEndNotifier.notify(e).pipe((0,I.b)(()=>this._window.location.reload()))}_getIsMessageValid(e){return e&&"WebApp"===e.header.sender&&"SessionEnd"===e.header.bodyTypeName&&e.body.SessionId===this._userInfo.sessionId}handleSessionEnd(){this._subscription=this._messageChannelService.messageEvent$.pipe((0,P.h)(e=>this._getIsMessageValid(e)),(0,M.w)(e=>(this._onSessionEnding.next(),this._processSessionEndMessage(e.body.Message)))).subscribe()}ngOnDestroy(){this._onSessionEnding.complete(),this._subscription.unsubscribe()}}Lu.\u0275fac=function(e){return new(e||Lu)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(pw),n.\u0275\u0275inject(se))},Lu.\u0275prov=n.\u0275\u0275defineInjectable({token:Lu,factory:Lu.\u0275fac});class Ua{constructor(){this._requireJsProvider=(0,n.inject)(Ci),this._requireJs=this._requireJsProvider.get(),this._destroy$=new u.Subject,this._cachedModuleMap=new Map([])}deleteCachedModule(e){this._isAllowToCacheCalls&&this._cachedModuleMap.delete(e)}set allowToCacheCalls(e){this._isAllowToCacheCalls=e}get allowToCacheCalls(){return this._isAllowToCacheCalls}load(e,t){if(!this.allowToCacheCalls)return void this._requireJs(e,(...s)=>{t(...s)});const i=[],r=[];for(const s of e)if(this._cachedModuleMap.has(s)){const o=this._cachedModuleMap.get(s);i.push(o)}else r.push(s);i.length&&t(...i),r.length&&this._requireJs(r,(...s)=>{r.forEach((o,c)=>this._cachedModuleMap.set(o,s[c])),t(...s)})}ngOnDestroy(){this._cachedModuleMap.clear(),this._destroy$.next(),this._destroy$.complete()}}Ua.\u0275fac=function(e){return new(e||Ua)},Ua.\u0275prov=n.\u0275\u0275defineInjectable({token:Ua,factory:Ua.\u0275fac,providedIn:"root"});var O=f(33569);class ko{constructor(e){this._entitySchemaService=e}_loadPrimaryColumns(e){return this._entitySchemaService.getEntitySchemaByName(e).pipe((0,h.U)(t=>{const i=t.entitySchema.getPrimaryColumn(),r=t.entitySchema.getPrimaryDisplayColumn();if((0,O.Z)(r))throw new Error(`Entity ${e} should have primary display column`);return{primaryColumnName:i.name,primaryDisplayColumnName:r?.name}}))}getColumnLookupValues(e){if((0,O.Z)(e))return(0,u.of)(null);const t=this._loadPrimaryColumns(e),i=(0,u.from)(l.Model.create(e));return(0,u.forkJoin)([t,i]).pipe((0,M.w)(([r,s])=>(0,u.from)(s.load({attributes:[r.primaryColumnName,r.primaryDisplayColumnName]})).pipe((0,h.U)(c=>c.map(d=>({value:d[r.primaryColumnName],displayValue:d[r.primaryDisplayColumnName]}))))))}}ko.\u0275fac=function(e){return new(e||ko)(n.\u0275\u0275inject(Ke))},ko.\u0275prov=n.\u0275\u0275defineInjectable({token:ko,factory:ko.\u0275fac,providedIn:"root"});var Ga=f(57376);new n.InjectionToken("Flag indicating that allow open designer page using design button");const _b=new n.InjectionToken("ContextService"),yb=new n.InjectionToken("CrtNavigationLock"),Cb=(new n.InjectionToken("Default item property values"),new n.InjectionToken("DEVKIT_MASK_SERVICE",{providedIn:"root",factory:()=>new l.MaskService})),Tn=(new n.InjectionToken("Represents the static height for the header."),new n.InjectionToken("IS_DESIGN_TIME")),Sb=(new n.InjectionToken("Use UI optimization - simple animations, glassmorphism, etc",{providedIn:"root",factory:()=>{try{const a=new u.BehaviorSubject(void 0),e=(0,n.inject)(vt),t=(0,n.inject)(n.Injector),i=e.loadCurrentUserInfo().pipe((0,h.U)(()=>t.get(l.SysSettingsService)),(0,u.switchMap)(r=>r.getByCode("DisableAdvancedVisualEffects")),(0,h.U)(r=>Boolean(r?.value)),(0,u.take)(1));return a.pipe((0,u.switchMap)(r=>"boolean"==typeof r?(0,u.of)(r):i))}catch(a){return console.error(a),new u.BehaviorSubject(!1)}}}),new n.InjectionToken("Window payload values")),No=(new n.InjectionToken("USE_SAVE_SCROLL_POSITION_SERVICE"),new n.InjectionToken("Save entity schema message identifier for entity object designer web token"),new n.InjectionToken("Terrasoft global object",{providedIn:"root",factory:()=>(0,pe.Z)((0,n.inject)(se),["Terrasoft"])||{}})),bb=new n.InjectionToken("Flag indicating that this is an angular host",{providedIn:"root",factory:()=>(0,pe.Z)((0,n.inject)(No),["isAngularHost"])});new n.InjectionToken("Entity structure from Terrasoft.configuration",{providedIn:"root",factory:()=>{const a=(0,n.inject)(No);return new Cw((0,pe.Z)(a,["configuration","EntityStructure"]))}});class Cw{constructor(e){this.items=e}}new n.InjectionToken("Module structure from Terrasoft.configuration",{providedIn:"root",factory:()=>{const a=(0,n.inject)(No);return new Sw((0,pe.Z)(a,["configuration","ModuleStructure"]))}});class Sw{constructor(e){this.items=e}}new n.InjectionToken("Module utils from Terrasoft",{providedIn:"root",factory:()=>(0,pe.Z)((0,n.inject)(No),["ModuleUtils"])}),new n.InjectionToken("Root schema descriptors from Terrasoft.configuration",{providedIn:"root",factory:()=>{const a=(0,n.inject)(No);return new bw((0,pe.Z)(a,["configuration","RootSchemaDescriptors"]))}});class bw{constructor(e){this.items=e}}new n.InjectionToken("Structures from Terrasoft.configuration",{providedIn:"root",factory:()=>{const a=(0,n.inject)(No);return new vw((0,pe.Z)(a,["configuration","Structures"]))}});class vw{constructor(e){this.items=e}}const vb=new n.InjectionToken("AC whitelist");var nn,h_;!function(a){a.PageStartLoading="PageStartLoading",a.PageFinishLoading="PageFinishLoading"}(nn||(nn={}));class Vo extends Ta{constructor(){super(),this._ngZone=(0,n.inject)(n.NgZone),this._window=(0,n.inject)(se),this._featureValues=(0,n.inject)(te,{optional:!0}),this._isAngularHost=(0,n.inject)(bb,{optional:!0}),this._measureName="PageLoadDuration",this._debounceTime=100,this._subscriptions=new u.Subscription,this._measurements=[],this._tasks=new Set,this._loadingStarted=!1,this._loadingStartedCount=new Set,this._loadingFinishedCount=new Set,this._tasksQueueSubject=new u.Subject,this._pageLoadLifeCycleSubject=new u.Subject,this._iterationCounter=0,this.pageLoadDuration$=new u.Subject,this._enableMeasurement=!!this._isAngularHost&&!this._featureValues?.DisablePerformancePageLoadMeasurement,this._initSubscriptions(),(0,Ga.Z)(this._window,"creatio.performance.measurePerformancePageLoadService",this)}_initSubscriptions(){this._enableMeasurement&&(this._subscriptions.add(this._tasksQueueSubject.pipe((0,u.debounceTime)(this._debounceTime),(0,P.h)(e=>this._loadingStartedCount.size===this._loadingFinishedCount.size&&this._loadingStarted&&1===e.size&&e.has(nn.PageStartLoading))).subscribe({next:()=>this._pageLoadLifeCycleSubject.next(nn.PageFinishLoading)})),this._subscriptions.add(this._pageLoadLifeCycleSubject.subscribe({next:e=>{this._ngZone.runOutsideAngular(()=>{e===nn.PageStartLoading&&this._onStartPageLoadMeasure(),e===nn.PageFinishLoading&&this._onEndPageLoadMeasure()})}})))}_onStartPageLoadMeasure(){this.addTask(nn.PageStartLoading)}_getLocationInfo(){const e=this._window.location.hash,[t,i]=e.slice(1).split("/");return{moduleName:t,schemaName:i,hash:e}}_getMeasurementDetail(){const t=((0,pe.Z)(this._window,"creatio.performance")??{}).pageFocusTimeLimitExceeded;return{iteration:this._iterationCounter++,location:this._getLocationInfo(),isReuse:Boolean(this._isReuseMode),focusTimeLimitExceeded:Boolean(t)}}_onEndPageLoadMeasure(){this.removeTask(nn.PageFinishLoading),this.removeTask(nn.PageStartLoading);const e=this._window.performance.now(),t=this._startTime,i=this._getMeasurementDetail();this._measurements.push(()=>this._window.performance.measure(this._measureName,{start:t,detail:i,end:e})),this.pageLoadDuration$.next({start:t,detail:i,end:e}),this._reset()}_reset(){(0,Ga.Z)(this._window,"creatio.performance.pageFocusTimeLimitExceeded",null),this._startTime=null,this._tasks.clear(),this._loadingStarted=!1,this._loadingStartedCount.clear(),this._loadingFinishedCount.clear(),this._isReuseMode=null}setReuseMode(e){this._enableMeasurement&&null===this._isReuseMode&&(this._isReuseMode=e)}startPageLoadMeasure(e=performance.now()){this._enableMeasurement&&this._ngZone.runOutsideAngular(()=>{this._reset(),this._startTime=e,this._pageLoadLifeCycleSubject.next(nn.PageStartLoading)})}addTask(e,t={}){this._enableMeasurement&&this._ngZone.runOutsideAngular(()=>{t.targetTask&&(this._loadingStartedCount.add(e),this._loadingStarted=!0),this._tasks.add(e),this._tasksQueueSubject.next(this._tasks)})}removeTask(e,t={}){this._enableMeasurement&&this._ngZone.runOutsideAngular(()=>{t.targetTask&&this._loadingFinishedCount.add(e),this._tasks.delete(e),this._tasksQueueSubject.next(this._tasks)})}getMeasurements(){const e=this._measurements.map(t=>t());return this._measurements=[],e}printGracefully(){const e=this.getMeasurements(),t=new Map;e.forEach(i=>{const r=i.detail;t.set(`${r.iteration} ${r.location.hash}`,i)}),console.log(t)}ngOnDestroy(){this._reset(),this._subscriptions.unsubscribe(),this._tasksQueueSubject.complete(),this._pageLoadLifeCycleSubject.complete(),this.pageLoadDuration$.complete()}}Vo.\u0275fac=function(e){return new(e||Vo)},Vo.\u0275prov=n.\u0275\u0275defineInjectable({token:Vo,factory:Vo.\u0275fac,providedIn:"root"}),function(a){a.Passed="Passed",a.InvalidSecondFactor="InvalidSecondFactor",a.SecondFactorCodeRequired="SecondFactorCodeRequired"}(h_||(h_={}));class Iw{}var Ou=f(27859);class ju{constructor(e,t,i){this._dialogService=e,this._activatedRoute=t,this._translateService=i,this._activatedRoute.queryParams.subscribe(r=>{this._returnPage=r.returnPage||null})}intercept(e,t){return e.headers.has("X-Second-Factor-Resend-Request")?t.handle(e):t.handle(e).pipe((0,M.w)(i=>{if(i instanceof D.HttpResponse&&200===i.status){const s=i.headers.get("X-Second-Factor-Validation-Status");if(s&&s===h_.SecondFactorCodeRequired)return this._handleTwoFaFlow(e,this._returnPage??"NuiLogin")}return(0,u.of)(i)}))}_handleTwoFaFlow(e,t){return(0,u.from)(this._dialogService.resendRequestWithTwoFactor(e,t,!0)).pipe((0,h.U)(i=>{if(2===i.resultCode){const r={success:!1,errorInfo:{errorCode:null,message:this._translateService.instant("TwoFactor.ValidationCanceled"),stackTrace:null}};return new D.HttpResponse({body:r})}return i.response}))}}ju.\u0275fac=function(e){return new(e||ju)(n.\u0275\u0275inject(Iw),n.\u0275\u0275inject(Ou.gz),n.\u0275\u0275inject(w.sK))},ju.\u0275prov=n.\u0275\u0275defineInjectable({token:ju,factory:ju.\u0275fac});class Dw{}var Ib=f(31854),Mw=f(56473);function Db(a,e){if(a.split(".").length<2)throw new Error(`Error when register ${a}. Type property should have format "VendorPrefix.${e}"`)}function Mb(a){return(0,Ib.Z)((0,Mw.Z)(a))}class za{static get requestsRegistrationInfos(){return this._requestsRegistrationInfos}static register(e,t){const i=e.type;za._requestsMap.set(i,t),za._requestsRegistrationInfos.set(i,e)}static get(e){const t=za._requestsMap.get(e);return function xw(a,e){if(!e)throw new Error(`Error when resolve ${a}. Type was not registered.`)}(e,t),t&&new t}}za._requestsMap=new Map,za._requestsRegistrationInfos=new Map;let wb=class extends Dw{};wb=(0,m.gn)([function Ew(a){return function(e){Db(a.type,"RequestTypeName"),function ww(a){const[e,t]=a.split("."),i=Mb(t);if("crt"===e.toLowerCase()&&i!==t)throw new Error(`Error when register ${a}. Type property should have Pascal case, e.g. ${e+"."+i}. The first letter of each word in a compound word should be capitalized`)}(a.type),za.register(a,e)}}({type:"crt.CopyClipboardRequest"})],wb);var Ii=f(74929),ze=f(51927),b=f(20092),Di=f(27025),Mi=f(38954);const Tw=["input"];class ut{constructor(e,t,i){this.ngControl=e,this.autofillMonitor=t,this.focusMonitor=i,this._disabled=!1,this._placeholder="",this._required=!1,this._focused=!1,this.destroy=new u.Subject,this.autofilled=!1,this.stateChanges=new u.Subject,this.onTouched=()=>{},e&&(this.ngControl.valueAccessor=this)}set elementRef(e){e&&(this._elementRef=e)}get elementRef(){return this._elementRef}get disabled(){return this._disabled}set disabled(e){this.setDisabledState((0,Ii.Ig)(e)),this.stateChanges.next()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=(0,Ii.Ig)(e),this.stateChanges.next()}get value(){return this.innerValue}set value(e){this.writeValue(e)}get innerValue(){return this._innerValue}set innerValue(e){this.setInnerValueSilent(e),this.callChangeHandler()}get empty(){return!this.autofilled&&!this.value}get focused(){return this._focused}set focused(e){this._focused=e,this.stateChanges.next()}get shouldLabelFloat(){return this.focused||!this.empty}setInnerValueSilent(e){this._innerValue=e}callChangeHandler(){this.onChange?this.onChange(this._innerValue):this.stateChanges.next()}focusElementViaMouse(){this.focusMonitor.focusVia(this.elementRef.nativeElement,"mouse")}initMonitors(){this.focusMonitor.monitor(this.elementRef.nativeElement,!0).subscribe(e=>{this.focused=Boolean(e)}),this.autofillMonitor.monitor(this.elementRef).pipe((0,h.U)(e=>e.isAutofilled),(0,P.h)(e=>e),(0,ze.O)(!1),(0,L.R)(this.destroy)).subscribe(e=>this.autofilled=e)}onContainerClick(e){"input"!==e.target.tagName.toLowerCase()&&this.focusElementViaMouse()}setDescribedByIds(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this._innerValue=e,this.stateChanges.next()}setDisabledState(e){if(this._disabled===e)return;this._disabled=e;const t=this.ngControl?.control;t&&t.disabled!==e&&(e?t.disable():t.enable())}ngDoCheck(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())}ngAfterViewInit(){this.initMonitors()}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}}ut.\u0275fac=function(e){return new(e||ut)(n.\u0275\u0275directiveInject(b.a5),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE))},ut.\u0275dir=n.\u0275\u0275defineDirective({type:ut,viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(Tw,5,n.ElementRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.elementRef=i.first)}},hostVars:2,hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("focusout",function(){return t.onTouched()}),2&e&&n.\u0275\u0275classProp("floating",t.shouldLabelFloat)},inputs:{disabled:"disabled",placeholder:"placeholder",required:"required",value:"value"}}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Boolean),(0,m.w6)("design:paramtypes",[Boolean])],ut.prototype,"disabled",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String),(0,m.w6)("design:paramtypes",[String])],ut.prototype,"placeholder",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Boolean),(0,m.w6)("design:paramtypes",[Boolean])],ut.prototype,"required",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object),(0,m.w6)("design:paramtypes",[Object])],ut.prototype,"value",null);class Nh{}Nh.\u0275fac=function(e){return new(e||Nh)},Nh.\u0275cmp=n.\u0275\u0275defineComponent({type:Nh,selectors:[["crt-base-input-width-holder"]],inputs:{label:"label",minWidth:"minWidth"},decls:3,vars:3,consts:[[1,"crt-base-input-width-holder-label"],[1,"crt-base-input-width-holder-control"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(2,"div",1)),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.label),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("width",t.minWidth,"px"))},styles:["[_nghost-%COMP%]{display:block;height:0;overflow:hidden}.crt-base-input-width-holder-label[_ngcontent-%COMP%]{box-sizing:border-box;height:0;max-width:320px;padding-inline-end:2px;overflow:hidden}.crt-base-input-width-holder-control[_ngcontent-%COMP%]{height:0;min-width:0;max-width:320px}"],changeDetection:0});class Bu{}Bu.\u0275fac=function(e){return new(e||Bu)},Bu.\u0275mod=n.\u0275\u0275defineNgModule({type:Bu}),Bu.\u0275inj=n.\u0275\u0275defineInjector({});var Ha,N=f(95236);class Uu{}Uu.\u0275fac=function(e){return new(e||Uu)},Uu.\u0275mod=n.\u0275\u0275defineNgModule({type:Uu}),Uu.\u0275inj=n.\u0275\u0275defineInjector({imports:[N.wp]}),function(a){a[a.CHECKING=0]="CHECKING",a[a.CONNECTED=1]="CONNECTED",a[a.WARNING=2]="WARNING",a[a.DISCONNECTED=3]="DISCONNECTED"}(Ha||(Ha={}));class Vh{get statusCssClassName(){const e=this._statusMap[this.status];if(void 0===e)throw new Error("Invalid indicator status");return e}constructor(){this._statusMap={},this.status=Ha.CHECKING,this.description="",this._statusMap[Ha.CHECKING]="checking",this._statusMap[Ha.CONNECTED]="connected",this._statusMap[Ha.DISCONNECTED]="disconnected",this._statusMap[Ha.WARNING]="warning"}}Vh.\u0275fac=function(e){return new(e||Vh)},Vh.\u0275cmp=n.\u0275\u0275defineComponent({type:Vh,selectors:[["ts-connection-indicator"]],inputs:{status:"status",description:"description"},decls:4,vars:3,consts:[[1,"connection-indicator-wrap"],[1,"indicator-desc"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"div"),n.\u0275\u0275elementStart(2,"mat-label",1),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275classMap("indicator  indicator-status-"+t.statusCssClassName),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.description))},dependencies:[N.$V],styles:[".connection-indicator-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;width:-moz-fit-content;width:fit-content}.indicator-desc[_ngcontent-%COMP%]{height:1.5em;margin:.5em .25em;color:#999}.indicator[_ngcontent-%COMP%]{width:1em;height:1em;border-radius:.5em;margin:.7em .25em .5em}.indicator-status-checking[_ngcontent-%COMP%]{background-color:#afacac}.indicator-status-connected[_ngcontent-%COMP%]{background-color:#0dc700}.indicator-status-warning[_ngcontent-%COMP%]{background-color:#ff8f00}.indicator-status-disconnected[_ngcontent-%COMP%]{background-color:#ed1b34}"]});var ce=f(79510),z=f(74817);class Gu{}Gu.\u0275fac=function(e){return new(e||Gu)},Gu.\u0275mod=n.\u0275\u0275defineNgModule({type:Gu}),Gu.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,z.x4,ce.D8]});var Za=f(88659),Xe=f(95411);const Pw=["country"];function Aw(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",5)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t.name),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.name)}}class zu{constructor(e,t,i){this.ngControl=e,this.autofillMonitor=t,this.focusMonitor=i,this.countryValue=new u.BehaviorSubject(""),this.destroy=new u.Subject,this.countrySelected=new n.EventEmitter,this.stateChanges=new u.Subject,this.autofilled=!1,this.countries=[],this.countries$=new u.BehaviorSubject([]),this.onTouched=()=>{},e&&(this.ngControl.valueAccessor=this)}set countriesInfo(e){this.countriesInfoValue={...e},e&&e.countries&&this.initCountryControl()}get countriesInfo(){return this.countriesInfoValue}get disabled(){return this.disabledValue}set disabled(e){this.disabledValue=(0,Ii.Ig)(e),this.stateChanges.next()}get placeholder(){return this.placeholderValue}set placeholder(e){this.placeholderValue=this.originalPlaceholder=e,this.stateChanges.next()}get required(){return this.requiredValue}set required(e){this.requiredValue=(0,Ii.Ig)(e),this.stateChanges.next()}get value(){return this.countryActually}set value(e){switch(this.countryValue.next(e),this.stateChanges.next(),!0){case this.countries.some(t=>t.name===e):this.countryActually=e,this.onCountrySelected();break;case""===e:this.placeholderValue=this.originalPlaceholder;break;default:this.placeholderValue=""}}get empty(){return!(this.autofilled||this.value&&0!==this.value.length)}get focused(){return this.focusedValue}set focused(e){this.focusedValue=e,this.stateChanges.next()}filterCountryValues(e){e?this.countries$.next(this.countries.filter(t=>t.name.toLowerCase().startsWith(e.toLowerCase()))):this.countries$.next(this.countries.slice())}initCountryControl(){this.countriesInfoValue.countries=Object.entries(this.countriesInfoValue.countries).map(([e,t])=>({id:e,name:t})),this.prepareCountryList(this.countriesInfoValue),this.countries=this.countriesInfoValue.countries,this.countryValue.pipe((0,ze.O)("")).subscribe(e=>{this.filterCountryValues(e)})}prepareCountryList(e){if(e.countries.sort((t,i)=>t.name.localeCompare(i.name)),e.defaultCountryId){const t=e.countries.find(i=>i.id===e.defaultCountryId);e.countries.splice(e.countries.indexOf(t),1),e.countries.unshift(t)}}ngDoCheck(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())}writeValue(e){this.countryValue.next(e)}registerOnChange(e){this.countryValue.pipe((0,L.R)(this.destroy)).subscribe(t=>{e(t)})}registerOnTouched(e){this.onTouched=e}setDescribedByIds(e){}onContainerClick(e){"input"!==e.target.tagName.toLowerCase()&&this.focusMonitor.focusVia(this.countryElementRef.nativeElement,"mouse")}ngAfterViewInit(){this.focusMonitor.monitor(this.countryElementRef.nativeElement,!0).subscribe(e=>{this.focused=!!e,!this.focused&&this.countryValue.value&&this.onCountrySelected()}),this.autofillMonitor.monitor(this.countryElementRef).pipe((0,h.U)(e=>e.isAutofilled),(0,we.P)(e=>e),(0,ze.O)(!1),(0,L.R)(this.destroy)).subscribe(e=>this.autofilled=e)}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}onCountrySelected(){this.ngControl.control.markAsTouched();const e=this.countries.find(t=>t.name===this.countryValue.value);e?this.countrySelected.emit(e.id):this.countrySelected.emit("")}}zu.\u0275fac=function(e){return new(e||zu)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE))},zu.\u0275cmp=n.\u0275\u0275defineComponent({type:zu,selectors:[["ts-country-picker"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(Pw,5,n.ElementRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.countryElementRef=i.first)}},hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("focusout",function(){return t.onTouched()})},inputs:{countriesInfo:"countriesInfo",disabled:"disabled",placeholder:"placeholder",required:"required",value:"value"},outputs:{countrySelected:"countrySelected"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:zu}])],decls:6,vars:6,consts:[["matInput","","data-qa","input-country","name","new-country","id","country","autocomplete","new-country",3,"ngModel","placeholder","matAutocomplete","ngModelChange"],["country",""],["autoActiveFirstOption","",3,"closed"],["countryAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"input",0,1),n.\u0275\u0275listener("ngModelChange",function(r){return t.value=r}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"mat-autocomplete",2,3),n.\u0275\u0275listener("closed",function(){return t.onCountrySelected()}),n.\u0275\u0275template(4,Aw,3,2,"mat-option",4),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(3);n.\u0275\u0275property("ngModel",t.value)("placeholder",t.placeholder)("matAutocomplete",i),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(5,4,t.countries$))}},dependencies:[y.NgForOf,b.Fj,b.JJ,b.On,z.k0,ce.VN,ce.QJ,Xe.CK,y.AsyncPipe],styles:[".mat-option[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{font-family:Open Sans,Regular,sans-serif;font-size:13px}.component-wrap[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.component-wrap[_ngcontent-%COMP%]   .country-picker-element[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;margin-left:-115px;margin-top:-16px}"]});var Fo,U=f(15756),E=f(37697);!function(a){a[a.Primary=0]="Primary",a[a.Secondary=1]="Secondary",a[a.Cancel=2]="Cancel",a[a.Delete=3]="Delete"}(Fo||(Fo={}));const Fh={caption:"ConfirmationDialog.YES",result:Fo.Secondary},xb={caption:"ConfirmationDialog.NO",result:Fo.Primary};Fo.Cancel,Fo.Delete;function Rw(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"button",6),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("mat-dialog-close",t.secondaryButton.result),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,2,t.secondaryButton.caption)," ")}}function kw(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"button",6),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("mat-dialog-close",t.result),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,2,t.caption)," ")}}class Hu{constructor(e){this.data=e,this.buttons=[],e&&(this.primaryButton=e.primaryButton,this.secondaryButton=e.secondaryButton,this.message=e.message,this.buttons=e.buttons),this.buttons?.length||(this.primaryButton??(this.primaryButton=xb),this.secondaryButton??(this.secondaryButton=Fh))}}Hu.\u0275fac=function(e){return new(e||Hu)(n.\u0275\u0275directiveInject(E.eJ))},Hu.\u0275cmp=n.\u0275\u0275defineComponent({type:Hu,selectors:[["ts-confirmation-dialog"]],decls:9,vars:7,consts:[["mat-dialog-content",""],[1,"message"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"],["class","action-button","mat-button","",3,"mat-dialog-close",4,"ngIf"],["class","action-button","mat-button","",3,"mat-dialog-close",4,"ngFor","ngForOf"],["mat-button","",1,"action-button",3,"mat-dialog-close"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",2)(4,"button",3),n.\u0275\u0275text(5),n.\u0275\u0275pipe(6,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,Rw,3,4,"button",4),n.\u0275\u0275template(8,kw,3,4,"button",5),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==t.data?null:t.data.message),n.\u0275\u0275advance(2),n.\u0275\u0275property("mat-dialog-close",t.primaryButton.result),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(6,5,t.primaryButton.caption)," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.secondaryButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.buttons))},dependencies:[y.NgForOf,y.NgIf,U.eB,E.aO,E.Rb,E.ev,w.X$],styles:["[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]{margin:27px 0 0!important;justify-content:flex-end}"]});class Zu{constructor(e){this.data=e}}Zu.\u0275fac=function(e){return new(e||Zu)(n.\u0275\u0275directiveInject(E.eJ))},Zu.\u0275cmp=n.\u0275\u0275defineComponent({type:Zu,selectors:[["ts-info-dialog"]],decls:7,vars:4,consts:[["mat-dialog-content",""],[1,"message"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",2)(4,"button",3),n.\u0275\u0275text(5),n.\u0275\u0275pipe(6,"translate"),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==t.data?null:t.data.message),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(6,2,"InfoDialog.OK")," "))},dependencies:[U.eB,E.aO,E.Rb,E.ev,w.X$],styles:["[mat-dialog-content][_ngcontent-%COMP%]{max-height:450px;overflow-y:auto!important}[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]{margin:27px 0 0!important}"]});class Ce{constructor(e,t,i,r){this.document=e,this._ngZone=t,this._translateService=i,this.dialog=r}_stopEventPropagation(e,t){e.afterOpened().pipe((0,L.R)(t)).subscribe(i=>{const s=this.document.getElementsByClassName("cdk-overlay-container")[0];s&&s.addEventListener("click",function(o){o.stopImmediatePropagation()})})}getMessageDialogConfig(e){const t={width:"450px",panelClass:["dialog-top-border"],data:{}};if("string"==typeof e)return t.data.message=e,t;e.panelClass&&e.panelClass.length&&t.panelClass.push(...e.panelClass);const i=e;return i.primaryButton&&(t.data.primaryButton=i.primaryButton),i.secondaryButton&&(t.data.secondaryButton=i.secondaryButton),i.buttons&&(t.data.buttons=i.buttons),t.data.message=i.message,t}open(e,t){return this._ngZone.run(()=>{const i=this.dialog.open(e,t),r=i.afterClosed();return this._stopEventPropagation(i,r),r})}openInfoDialog(e){return this.open(Zu,this.getMessageDialogConfig(e))}openConfirmationDialog(e){return this.open(Hu,this.getMessageDialogConfig(e))}openOperationPermissionsErrorDialog(e){const t=Z.Ld.format(this._translateService.instant("OperationPermissionsErrorDialog.ErrorTemplate"),e);return this.openInfoDialog(t)}closeById(e){this.dialog.getDialogById(e)?.close()}closeAll(){this.dialog.closeAll()}hasOpenDialogs(){return Boolean(this.dialog.openDialogs?.length)}}Ce.\u0275fac=function(e){return new(e||Ce)(n.\u0275\u0275inject(y.DOCUMENT),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(E.on))},Ce.\u0275prov=n.\u0275\u0275defineInjectable({token:Ce,factory:Ce.\u0275fac});class Vt{}Vt.\u0275fac=function(e){return new(e||Vt)},Vt.\u0275mod=n.\u0275\u0275defineNgModule({type:Vt}),Vt.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ce],imports:[y.CommonModule,U.yu,E.yj,w.aw]});class Lh{constructor(e){this.data=e}}Lh.\u0275fac=function(e){return new(e||Lh)(n.\u0275\u0275directiveInject(E.eJ))},Lh.\u0275cmp=n.\u0275\u0275defineComponent({type:Lh,selectors:[["ts-info-with-header-dialog"]],decls:9,vars:10,consts:[[1,"header-message"],[1,"message"],[1,"action-button",3,"mat-dialog-close"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",1),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"button",2),n.\u0275\u0275text(7),n.\u0275\u0275pipe(8,"translate"),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,4,null==t.data?null:t.data.headerMessage)),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,6,null==t.data?null:t.data.message)),n.\u0275\u0275advance(2),n.\u0275\u0275property("mat-dialog-close",null==t.data||null==t.data.button?null:t.data.button.result),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(8,8,null==t.data||null==t.data.button?null:t.data.button.caption),"\n"))},dependencies:[E.aO,w.X$],styles:[".header-message[_ngcontent-%COMP%]{margin-bottom:24px}.message[_ngcontent-%COMP%]{margin-bottom:40px;white-space:pre-wrap}.action-button[_ngcontent-%COMP%]{float:right;text-transform:none;border-radius:16px;padding:0 16px}"]});class Lo{constructor(e){this.viewContainerRef=e}}Lo.\u0275fac=function(e){return new(e||Lo)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},Lo.\u0275dir=n.\u0275\u0275defineDirective({type:Lo,selectors:[["","tsViewContainerRef",""]]});class Oo{}Oo.\u0275fac=function(e){return new(e||Oo)},Oo.\u0275mod=n.\u0275\u0275defineNgModule({type:Oo}),Oo.\u0275inj=n.\u0275\u0275defineInjector({});var Pn=f(17914);class qu{}qu.\u0275fac=function(e){return new(e||qu)},qu.\u0275mod=n.\u0275\u0275defineNgModule({type:qu}),qu.\u0275inj=n.\u0275\u0275defineInjector({imports:[Pn.To]});var g_=f(25237),Nw=f(8522),Se=f(49460),jo=f(7392),Ft=f(19126),He=f(97355);class Lt{constructor(){this._selectedItems=new u.BehaviorSubject([])}get selectedItems(){return this._selectedItems.asObservable()}getSelectedItems(){return this._selectedItems.getValue()}toggleSelectedItem(e){this._selectedItems.getValue().find(i=>e.id===i.id)?this.clear():this._selectedItems.next([e])}setSelectedItem(e){this._selectedItems.next([e])}clear(){this._selectedItems.next([])}}Lt.\u0275fac=function(e){return new(e||Lt)},Lt.\u0275prov=n.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac});class $u{}$u.\u0275fac=function(e){return new(e||$u)},$u.\u0275mod=n.\u0275\u0275defineNgModule({type:$u}),$u.\u0275inj=n.\u0275\u0275defineInjector({providers:[Lt],imports:[b.u5,y.CommonModule,He.Nn,jo.gR,g_.N6,Se.Zh,Nw.IF,N.wp,z.x4,Ft.Xo]});var f_,ne=f(4742);class Vw{}!function(a){a[a.PREVIEW=0]="PREVIEW",a[a.LIST=1]="LIST"}(f_||(f_={}));class Bo{constructor(e,t){this.dataStore=e,this.cdr=t,this.itemPicked=new n.EventEmitter}isItemSelected(e){return-1!==this.dataStore.getSelectedItems().indexOf(e)}ngOnInit(){this.selectedItemsSubscription=this.dataStore.selectedItems.subscribe(e=>{this.cdr.destroyed||this.cdr.detectChanges()})}ngOnDestroy(){this.selectedItemsSubscription.unsubscribe()}onClick(e){this.dataStore.toggleSelectedItem(e)}onDblClick(e){this.dataStore.setSelectedItem(e),this.itemPicked.emit()}}Bo.\u0275fac=function(e){return new(e||Bo)(n.\u0275\u0275directiveInject(Lt),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},Bo.\u0275dir=n.\u0275\u0275defineDirective({type:Bo,inputs:{searchValue:"searchValue",items:"items",previewVisible:"previewVisible"},outputs:{itemPicked:"itemPicked"}});const Fw=["previewImageWrapper"],Lw=function(a){return{"default-image":a}};class Uo{constructor(e,t){this.dataStore=e,this.cdr=t}scrollToTop(){const e=this.previewImageWrapper?.nativeElement||null;e&&(e.scrollTop=0)}hasImage(){return null!=this.item&&null!=this.item.imgUrl&&""!==this.item.imgUrl}ngOnInit(){this.selectedItemsSubscription=this.dataStore.selectedItems.subscribe(e=>{this.scrollToTop(),this.item=e[0],this.cdr.detectChanges()})}ngOnDestroy(){this.selectedItemsSubscription.unsubscribe()}}Uo.\u0275fac=function(e){return new(e||Uo)(n.\u0275\u0275directiveInject(Lt),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},Uo.\u0275cmp=n.\u0275\u0275defineComponent({type:Uo,selectors:[["ts-preview-pane"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(Fw,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.previewImageWrapper=i.first)}},decls:8,vars:5,consts:[[1,"preview-container"],[1,"preview-image-wrapper",3,"ngClass"],["previewImageWrapper",""],[3,"src"],[1,"preview-label-wrapper"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1,2),n.\u0275\u0275element(3,"img",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",4)(5,"p"),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(7,"div"),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(3,Lw,!t.hasImage())),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("src",null==t.item?null:t.item.imgUrl,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(null==t.item?null:t.item.name))},dependencies:[y.NgClass],styles:[".preview-container[_ngcontent-%COMP%]{height:100%;width:calc(100% - 10px);margin-inline-start:10px;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;position:absolute}.preview-container[_ngcontent-%COMP%]   .default-image[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64.781' height='33.636' viewBox='0 0 64.781 33.636'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%23006ce0;%7D%3C/style%3E%3C/defs%3E%3Ccircle class='a' cx='5.606' cy='5.606' r='5.606' transform='translate(38.619)'/%3E%3Cpath class='a' d='M2579.792,595l19.932-29.9,26.161,29.9h-46.094Z' transform='translate(-2579.792 -561.367)'/%3E%3Cpath class='a' d='M2629.623,595l-7.475-11.212,7.475-3.737L2644.572,595h-14.949Z' transform='translate(-2579.792 -561.367)'/%3E%3C/svg%3E\");background-position:center;background-repeat:no-repeat}.preview-container[_ngcontent-%COMP%]   .default-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]   .preview-image-wrapper[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;align-self:stretch;height:100%;border:1px solid #e2e2e2}.preview-container[_ngcontent-%COMP%]   .preview-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;position:relative;box-shadow:none!important;margin:0;padding:0}.preview-container[_ngcontent-%COMP%]   .preview-label-wrapper[_ngcontent-%COMP%]{width:100%}.preview-container[_ngcontent-%COMP%]   .preview-label-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{align-self:stretch;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;min-height:2.8em;font-size:1.4em;line-height:1.4em;text-align:center;margin-block-start:.2em;margin-block-end:.2em;padding:2px;direction:initial}"],changeDetection:0});var Ow=f(56148);const jw={leading:!1,trailing:!0};class Go{constructor(e){this._element=e,this.tsClick=new n.EventEmitter,this.tsDblClick=new n.EventEmitter}_elementClickHandler(e){if(1===e.detail)this.tsClick.emit(e);else this.tsDblClick.emit(e)}ngAfterViewInit(){const e=(0,u.fromEvent)(this._element.nativeElement,"click").pipe((0,Ow.p)(250,u.asyncScheduler,jw));this._subscription=e.subscribe(t=>{this._elementClickHandler(t)})}ngOnDestroy(){this._subscription.unsubscribe()}}Go.\u0275fac=function(e){return new(e||Go)(n.\u0275\u0275directiveInject(n.ElementRef))},Go.\u0275dir=n.\u0275\u0275defineDirective({type:Go,selectors:[["","tsClickController",""]],outputs:{tsClick:"tsClick",tsDblClick:"tsDblClick"}});class zo{transform(e,t,i){return i?(i=i.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),(e||[]).filter(r=>t.split(",").some(s=>r.hasOwnProperty(s)&&new RegExp(i,"gi").test(r[s])))):e}}function Bw(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-list-option",5),n.\u0275\u0275listener("tsClick",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onClick(s))})("tsDblClick",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onDblClick(s))}),n.\u0275\u0275elementStart(1,"p",6),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("value",t)("selected",i.isItemSelected(t)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}function Uw(a,e){1&a&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"ts-preview-pane"),n.\u0275\u0275elementEnd())}zo.\u0275fac=function(e){return new(e||zo)},zo.\u0275pipe=n.\u0275\u0275definePipe({name:"filter",type:zo,pure:!0});class Wu extends Bo{constructor(e,t){super(e,t)}}Wu.\u0275fac=function(e){return new(e||Wu)(n.\u0275\u0275directiveInject(Lt),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},Wu.\u0275cmp=n.\u0275\u0275defineComponent({type:Wu,selectors:[["ts-table-list"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"table-list-container"],[1,"grid-column"],[3,"ngClass"],["tsClickController","",3,"value","selected","tsClick","tsDblClick",4,"ngFor","ngForOf"],["class","preview-column",4,"ngIf"],["tsClickController","",3,"value","selected","tsClick","tsDblClick"],[1,"preview-text"],[1,"preview-column"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-selection-list",2),n.\u0275\u0275template(3,Bw,3,3,"mat-list-option",3),n.\u0275\u0275pipe(4,"filter"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(5,Uw,2,0,"div",4),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass","checkbox-hidden"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(4,3,t.items,"name",t.searchValue)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.previewVisible))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,jo.kh,jo.O$,Uo,Go,zo],styles:[".mat-list-base{font-size:1.2em!important;font-family:inherit}  .mat-list-base .mat-list-option{font-size:1.2em!important;font-family:inherit}  .mat-list-base .mat-list-item{border-top:1px solid #e0e0e0}  .mat-list-base .mat-list-item:last-child{border-bottom:1px solid #e0e0e0}  .mat-list-base .mat-list-item:hover{background-color:#f6f6f6!important}  .mat-list-base .mat-list-item:focus{background-color:transparent!important}  .mat-list-base .mat-pseudo-checkbox-checked{background:#006ce0!important}.table-list-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:flex-start;align-content:stretch}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]{flex-grow:2.5;height:100%;position:relative}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;overflow:auto;padding-top:0!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .checkbox-hidden[_ngcontent-%COMP%]  .mat-list-item[aria-selected=true]{background-color:#e4ebfa!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .checkbox-hidden[_ngcontent-%COMP%]  .mat-list-item .mat-list-item-content .mat-pseudo-checkbox{display:none!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .checkbox-hidden[_ngcontent-%COMP%]  .mat-list-item .mat-list-item-content .mat-list-text{padding-inline-start:0!important}.table-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .preview-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;margin-block-start:.2em;margin-block-end:.2em;padding:2px}.table-list-container[_ngcontent-%COMP%]   .preview-column[_ngcontent-%COMP%]{flex-grow:1;height:100%;position:relative}"],changeDetection:0});var _e=f(14091);class Yu{constructor(e){this._element=e,this.elementVisible=new n.EventEmitter,this.callbackForIntersection=t=>{t.forEach(i=>{this.isIntersection(i)&&(this.elementVisible.emit(),this._intersectionObserver.unobserve(this._element.nativeElement),this._intersectionObserver.disconnect())})}}isIntersection(e){return e.isIntersecting&&e.target===this._element.nativeElement}ngAfterViewInit(){this._intersectionObserver=new IntersectionObserver(e=>{this.callbackForIntersection(e)},{}),this._intersectionObserver.observe(this._element.nativeElement)}}Yu.\u0275fac=function(e){return new(e||Yu)(n.\u0275\u0275directiveInject(n.ElementRef))},Yu.\u0275dir=n.\u0275\u0275defineDirective({type:Yu,selectors:[["","tsLazyLoad",""]],outputs:{elementVisible:"elementVisible"}});const Gw=function(a){return{"list-cell-preview-container-selected":a}},zw=function(a,e){return{"image-container-selected":a,"default-image":e}};function Hw(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.changeItemClickAnimationState())}),n.\u0275\u0275elementStart(1,"div",13),n.\u0275\u0275element(2,"img",14),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("@tsItemAppearAnimationTrigger",void 0)("ngClass",n.\u0275\u0275pureFunction1(4,Gw,i.isItemSelected(t))),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,zw,i.isItemSelected(t),null===t.imgUrl)),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("src",null==t?null:t.imgUrl,n.\u0275\u0275sanitizeUrl)}}function Zw(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0,7),n.\u0275\u0275elementStart(1,"div",8),n.\u0275\u0275listener("tsClick",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onClick(s))})("tsDblClick",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onDblClick(s))}),n.\u0275\u0275elementStart(2,"mat-grid-tile")(3,"div",9),n.\u0275\u0275listener("elementVisible",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.setItemVisible(s))}),n.\u0275\u0275template(4,Hw,3,9,"div",10),n.\u0275\u0275elementStart(5,"p",11),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementContainerEnd()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("@tsItemClickAnimationTrigger",i.itemClickAnimationState),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.isItemVisible(t)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==t?null:t.name)}}function qw(a,e){1&a&&(n.\u0275\u0275elementStart(0,"div",15),n.\u0275\u0275element(1,"ts-preview-pane"),n.\u0275\u0275elementEnd())}class Qu extends Bo{constructor(e,t){super(e,t),this.visibleItems=[],this.itemClickAnimationState="normal"}changeItemClickAnimationState(){this.itemClickAnimationState="normal"===this.itemClickAnimationState?"click":"normal"}setItemVisible(e){-1===this.visibleItems.indexOf(e)&&this.visibleItems.push(e)}isItemVisible(e){return-1!==this.visibleItems.indexOf(e)}}Qu.\u0275fac=function(e){return new(e||Qu)(n.\u0275\u0275directiveInject(Lt),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},Qu.\u0275cmp=n.\u0275\u0275defineComponent({type:Qu,selectors:[["ts-icon-list"]],inputs:{previewItemsPerRow:"previewItemsPerRow"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:7,consts:[[1,"preview-list-container"],["data-item-marker","grid-column",1,"grid-column"],[1,"mat-grid-list-container"],["rowHeight","1:1.25",3,"cols"],["templatesGridListView",""],["class","preview-cell",4,"ngFor","ngForOf"],["class","preview-column",4,"ngIf"],[1,"preview-cell"],["tsClickController","",3,"tsClick","tsDblClick"],["tsLazyLoad","",1,"list-cell",3,"elementVisible"],["class","list-cell-preview-container",3,"ngClass","click",4,"ngIf"],[1,"preview-text"],[1,"list-cell-preview-container",3,"ngClass","click"],[1,"image-container",3,"ngClass"],[1,"image",3,"src"],[1,"preview-column"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-grid-list",3,4),n.\u0275\u0275template(5,Zw,7,3,"ng-container",5),n.\u0275\u0275pipe(6,"filter"),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(7,qw,2,0,"div",6),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(3),n.\u0275\u0275propertyInterpolate("cols",t.previewItemsPerRow),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(6,3,t.items,"name",t.searchValue)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.previewVisible))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,g_.Il,g_.DX,Uo,Yu,Go,zo],styles:[".preview-list-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:flex-start;align-content:stretch}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]{flex-grow:2.5;height:100%;position:relative}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .mat-grid-list-container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;overflow:auto}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .mat-list-base[_ngcontent-%COMP%]{padding-top:0!important}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]{align-self:stretch;overflow:hidden;height:100%;border-radius:unset;background:#f6f6f6;margin:5px;border:1px solid #e2e2e2}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]:hover{border:1px solid #006ce0}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;padding:0 25px;box-shadow:none}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{max-width:100%}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container[_ngcontent-%COMP%]   .default-image[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64.781' height='33.636' viewBox='0 0 64.781 33.636'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%23006ce0;%7D%3C/style%3E%3C/defs%3E%3Ccircle class='a' cx='5.606' cy='5.606' r='5.606' transform='translate(38.619)'/%3E%3Cpath class='a' d='M2579.792,595l19.932-29.9,26.161,29.9h-46.094Z' transform='translate(-2579.792 -561.367)'/%3E%3Cpath class='a' d='M2629.623,595l-7.475-11.212,7.475-3.737L2644.572,595h-14.949Z' transform='translate(-2579.792 -561.367)'/%3E%3C/svg%3E\");background-position:center;background-repeat:no-repeat}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container-selected[_ngcontent-%COMP%]{border:2px solid #006ce0;transition-property:background;transition-duration:.25s;transition-timing-function:linear;background-color:#004cff24}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .list-cell-preview-container-selected[_ngcontent-%COMP%]:hover{border:2px solid #006ce0}.preview-list-container[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]   .list-cell[_ngcontent-%COMP%]   .preview-text[_ngcontent-%COMP%]{align-self:stretch;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;min-height:2.8em;font-size:1.4em;line-height:1.4em;text-align:center;text-overflow:ellipsis;margin-block-start:.2em;margin-block-end:.2em;padding:2px;direction:initial}.preview-list-container[_ngcontent-%COMP%]   .preview-column[_ngcontent-%COMP%]{flex-grow:1;height:100%;position:relative}"],data:{animation:[(0,_e.X$)("tsItemAppearAnimationTrigger",[(0,_e.eR)(":enter",[(0,_e.oB)({opacity:0}),(0,_e.jt)("0.3s ease-in",(0,_e.oB)({opacity:1}))])]),(0,_e.X$)("tsItemClickAnimationTrigger",[(0,_e.eR)("click => normal",[(0,_e.IO)(".list-cell-preview-container:hover",(0,_e.jt)(250,(0,_e.oB)({border:"1px solid #006ce0",transform:"scale(1.025)"})),{optional:!0})]),(0,_e.eR)("normal => click",[(0,_e.IO)(".list-cell-preview-container:hover",(0,_e.jt)(250,(0,_e.oB)({border:"2px solid #006ce0",transform:"scale(1.025)"})),{optional:!0})])])]},changeDetection:0});class Oh{constructor(e){this.dataStore=e,this.activeViewMode=f_.PREVIEW,this.previewItemsPerRow=4,this.previewVisible=!0,this.Canceled=new n.EventEmitter,this.Selected=new n.EventEmitter}_getDefaultResources(){return{localizableStrings:{Header:"\u041f\u043e\u0438\u0441\u043a: \u0428\u0430\u0431\u043b\u043e\u043d\u044b email",SearchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",CancelButtonCaption:"\u041e\u0442\u043c\u0435\u043d\u0430",SelectButtonCaption:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"},localizableImages:{}}}buildEventData(){const e=new Vw;return e.recordIds=[],(0,ne.Z)(this.dataStore.getSelectedItems(),t=>{e.recordIds.push(t.id)}),e}fireSelectEvent(){const e=this.buildEventData();this.Selected.emit(e)}mergeResources(){this.resources=(0,Dn.Z)(this._getDefaultResources(),this.resources)}ngOnInit(){this.mergeResources()}ngOnDestroy(){this.dataStore.clear()}onItemPicked(){this.fireSelectEvent()}onOkClick(){this.fireSelectEvent()}onCancelClick(){this.Canceled.emit()}onCloseClick(){this.Canceled.emit()}}Oh.\u0275fac=function(e){return new(e||Oh)(n.\u0275\u0275directiveInject(Lt))},Oh.\u0275cmp=n.\u0275\u0275defineComponent({type:Oh,selectors:[["ts-list-selection-dialog"]],inputs:{items:"items",resources:"resources",searchValue:"searchValue",activeViewMode:"activeViewMode",previewItemsPerRow:"previewItemsPerRow",previewVisible:"previewVisible"},outputs:{Canceled:"Canceled",Selected:"Selected"},decls:26,vars:17,consts:[[1,"list-selection-dialog-container"],[1,"header-container"],[1,"label-container"],[1,"close-button",3,"click"],[1,"actions-container"],[1,"search-container"],["matInput","","type","text",1,"search-field",3,"ngModel","placeholder","ngModelChange"],[1,"search-icon"],[1,"tab-actions-container"],["aria-label","",3,"ngModel","ngModelChange"],[3,"value"],[1,"preview-list","tab-radio"],[1,"table-list","tab-radio"],[1,"tab-container"],[3,"selectedIndex"],[3,"items","previewItemsPerRow","searchValue","previewVisible","itemPicked"],[3,"items","searchValue","previewVisible","itemPicked"],[1,"button-container"],["mat-button","",1,"button","cancel-button",3,"click"],["mat-button","",1,"button","submit-button",3,"disabled","click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275listener("click",function(){return t.onCloseClick()}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",4)(6,"div",5)(7,"input",6),n.\u0275\u0275listener("ngModelChange",function(r){return t.searchValue=r}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(8,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",8)(10,"mat-radio-group",9),n.\u0275\u0275listener("ngModelChange",function(r){return t.activeViewMode=r}),n.\u0275\u0275elementStart(11,"mat-radio-button",10),n.\u0275\u0275element(12,"div",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"mat-radio-button",10),n.\u0275\u0275element(14,"div",12),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(15,"div",13)(16,"mat-tab-group",14)(17,"mat-tab")(18,"ts-icon-list",15),n.\u0275\u0275listener("itemPicked",function(){return t.onItemPicked()}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(19,"mat-tab")(20,"ts-table-list",16),n.\u0275\u0275listener("itemPicked",function(){return t.onItemPicked()}),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(21,"div",17)(22,"button",18),n.\u0275\u0275listener("click",function(){return t.onCancelClick()}),n.\u0275\u0275text(23),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(24,"button",19),n.\u0275\u0275listener("click",function(){return t.onOkClick()}),n.\u0275\u0275text(25),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",t.resources.localizableStrings.Header," "),n.\u0275\u0275advance(4),n.\u0275\u0275propertyInterpolate("placeholder",t.resources.localizableStrings.SearchPlaceholder),n.\u0275\u0275property("ngModel",t.searchValue),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngModel",t.activeViewMode),n.\u0275\u0275advance(1),n.\u0275\u0275property("value",0),n.\u0275\u0275advance(2),n.\u0275\u0275property("value",1),n.\u0275\u0275advance(3),n.\u0275\u0275property("selectedIndex",t.activeViewMode),n.\u0275\u0275advance(2),n.\u0275\u0275property("items",t.items)("previewItemsPerRow",t.previewItemsPerRow)("searchValue",t.searchValue)("previewVisible",t.previewVisible),n.\u0275\u0275advance(2),n.\u0275\u0275property("items",t.items)("searchValue",t.searchValue)("previewVisible",t.previewVisible),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",t.resources.localizableStrings.CancelButtonCaption," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",0===t.dataStore.getSelectedItems().length),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.resources.localizableStrings.SelectButtonCaption," "))},dependencies:[b.Fj,b.JJ,b.On,He.SK,He.R7,z.k0,Ft.OY,Ft.vy,Wu,Qu],styles:[".mat-tab-group{width:100%;height:100%;font-family:inherit}  .mat-tab-group .mat-tab-header{border:none!important}  .mat-tab-group .mat-tab-labels{height:0px;display:none!important}  .mat-tab-group .mat-tab-labels .mat-ink-bar{display:none}  .mat-tab-group .mat-tab-body-wrapper{height:100%}  .mat-radio-container{display:none!important}.list-selection-dialog-container[_ngcontent-%COMP%]{padding-inline-start:1em;padding-inline-end:1em;display:flex;flex-direction:column;justify-content:flex-start;height:100%}.header-container[_ngcontent-%COMP%]{height:3em;margin-top:1em;display:flex;flex-direction:row;justify-content:space-between;align-content:stretch}.header-container[_ngcontent-%COMP%]   .label-container[_ngcontent-%COMP%]{color:#64b8df;font-size:2.2em}.header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{align-self:auto;background:transparent url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12.071' height='12.071' viewBox='0 0 12.071 12.071'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:none;stroke:%23c8c8c8;stroke-linecap:round;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(-742.755 -385.174)'%3E%3Cline class='a' x2='10.657' y2='10.657' transform='translate(743.462 385.881)'/%3E%3Cline class='a' x1='10.657' y2='10.657' transform='translate(743.462 385.881)'/%3E%3C/g%3E%3C/svg%3E\") 0% 0% no-repeat padding-box;width:15px;height:15px;cursor:pointer}.actions-container[_ngcontent-%COMP%]{margin-top:24px;height:30px;display:flex;flex-direction:row;justify-content:space-between;align-content:stretch}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{height:30px;position:relative;display:flex;border-bottom:1px dotted #e2e2e2;padding-block-end:5px}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{height:27px;width:427px;padding-inline-start:5px;padding-inline-end:5px;border:0;outline:0;position:relative;font-size:1.4em}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]::placeholder{opacity:100!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:-ms-input-placeholder{opacity:100!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]::-ms-input-placeholder{opacity:100!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus:-moz-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus::-moz-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]:focus:-ms-input-placeholder{opacity:0!important}.actions-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{background:transparent url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='30' height='30' viewBox='0 0 30 30'%3E%3Cdefs%3E%3Cstyle%3E.a,.d%7Bfill:none;%7D.b%7Bclip-path:url(%23a);%7D.c%7Bclip-path:url(%23b);%7D.d%7Bstroke:%238095b3;stroke-miterlimit:10;stroke-width:1.2px;%7D%3C/style%3E%3CclipPath id='a'%3E%3Crect class='a' width='30' height='30'/%3E%3C/clipPath%3E%3CclipPath id='b'%3E%3Crect class='a' width='16' height='16'/%3E%3C/clipPath%3E%3C/defs%3E%3Cg class='b'%3E%3Ccircle class='a' cx='15' cy='15' r='15'/%3E%3Cg class='c' transform='translate(7 7)'%3E%3Cg transform='translate(1 1)'%3E%3Ccircle class='d' cx='5.042' cy='5.042' r='5.042'/%3E%3Cline class='d' x2='5.042' y2='5.042' transform='translate(8.958 8.958)'/%3E%3C/g%3E%3Crect class='a' width='16' height='16'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\") 0% 0% no-repeat padding-box;height:25px;width:25px;position:relative;align-self:flex-end}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .table-list[_ngcontent-%COMP%]{background:transparent url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%238395b4;%7D.b%7Bfill:none;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(0 0)'%3E%3Cg transform='translate(391.186 -504.034)'%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 507.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 509.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 511.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 513.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-389.186 515.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 507.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 509.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 511.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 513.534)'/%3E%3Crect class='a' width='5' height='1' transform='translate(-382.186 515.534)'/%3E%3C/g%3E%3Crect class='b' width='16' height='16'/%3E%3C/g%3E%3C/svg%3E\") 0% 0% no-repeat padding-box}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .preview-list[_ngcontent-%COMP%]{background:transparent url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%238095b3;%7D.b%7Bfill:none;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(0 0)'%3E%3Cg transform='translate(2314.701 27.803)'%3E%3Cpath class='a' d='M-2308.7-24.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3Cpath class='a' d='M-2300.7-24.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3Cpath class='a' d='M-2300.7-17.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3Cpath class='a' d='M-2308.7-17.8v3h-4v-3h4m1-1h-6v5h6v-5Z'/%3E%3C/g%3E%3Crect class='b' width='16' height='16'/%3E%3C/g%3E%3C/svg%3E\") 0% 0% no-repeat padding-box}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .tab-radio[_ngcontent-%COMP%]{border-radius:3px;background-position:center;width:30px;height:30px}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]:hover   .tab-radio[_ngcontent-%COMP%]{background-color:#f2f5ff}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]:active   .tab-radio[_ngcontent-%COMP%]{background-color:#e3e9f9}.actions-container[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]   .mat-radio-checked[_ngcontent-%COMP%]   .tab-radio[_ngcontent-%COMP%]{border:1px solid #8395b4}.tab-container[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em;display:flex;flex-direction:column;justify-content:flex-start;height:100%}.button-container[_ngcontent-%COMP%]{margin-bottom:1em;display:flex;flex-direction:row;justify-content:flex-end}.button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-family:inherit;border:1px solid transparent;border-radius:2px;font-size:1.4em;text-transform:uppercase;padding-inline-end:.4em;padding-inline-start:.4em;padding-block-start:.4em;padding-block-end:.4em;margin-inline-start:5px;margin-inline-end:5px}.button-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:disabled{background:#cccccc}.button-container[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{align-self:flex-end;background:#1c9110;color:#fff}.button-container[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{align-self:flex-end;background:#fff;color:#006ce0}"]});var Ju=f(45772);class wi{}wi.\u0275fac=function(e){return new(e||wi)},wi.\u0275mod=n.\u0275\u0275defineNgModule({type:wi}),wi.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,Ju.UK,w.aw]});class dt{get maskComponent(){return this.maskComponentRef?.instance}get isVisible(){return Boolean(this.maskComponent?.isVisible)}set isVisible(e){e?(this.maskComponent||this.createMaskComponent(),this.maskComponent.isVisible=!0):this.maskComponent&&(this.maskComponent.isVisible=!1)}constructor(e,t){this.document=e,this.ngZone=t,this._defaultMaskDelayMilliseconds=300,this._defaultMinimumMaskDuration=500,this._immediateDisplayAfterHideMaxDelay=50,this._maskShouldBeShown=!1,this._maskShownTimestamp=0,this._maskHiddenTimestamp=0,this.updateMaskStateAttribute()}updateMaskStateAttribute(){const e=this.document?.body;e&&(dt._visibleMasks.size>0?"visible"!==e.getAttribute("maskstate")&&e.setAttribute("maskstate","visible"):"none"!==e.getAttribute("maskstate")&&e.setAttribute("maskstate","none"))}_internalShow(){this.isVisible||(this.isVisible=!0,dt._visibleMasks.add(this),this.updateMaskStateAttribute(),this._maskShownTimestamp=Date.now())}_internalHide(){this.isVisible&&(this.isVisible=!1,dt._visibleMasks.delete(this),this.updateMaskStateAttribute(),this._maskHiddenTimestamp=Date.now())}show(e){this._maskShouldBeShown=!0;const t=Date.now()-this._maskHiddenTimestamp;0===e?.delay||t<this._immediateDisplayAfterHideMaxDelay?this._internalShow():this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._maskShouldBeShown&&this.ngZone.run(()=>this._internalShow())},e?.delay||this._defaultMaskDelayMilliseconds)})}hide(){this._maskShouldBeShown=!1;const e=Date.now()-this._maskShownTimestamp;e>=this._defaultMinimumMaskDuration?this._internalHide():this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._maskShouldBeShown||this.ngZone.run(()=>this._internalHide())},this._defaultMinimumMaskDuration-e)})}ngOnDestroy(){this.maskComponentRef?.destroy(),this.maskComponentRef=null,dt._visibleMasks.delete(this)}}function $w(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onClick(r))}),n.\u0275\u0275element(1,"mat-spinner",2),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("opacity",t.opacity),n.\u0275\u0275classProp("containerized-mask",t.containerized)}}dt._visibleMasks=new Set,dt.\u0275fac=function(e){return new(e||dt)(n.\u0275\u0275inject(Document),n.\u0275\u0275inject(n.NgZone))},dt.\u0275prov=n.\u0275\u0275defineInjectable({token:dt,factory:dt.\u0275fac});class An{constructor(e){this._cdr=e,this._isVisible=!0,this._opacity=.6,this.containerized=!1}get isVisible(){return this._isVisible}set isVisible(e){this._isVisible!==e&&(this._isVisible=e,this._cdr.detectChanges())}set opacity(e){this._opacity=e,this._cdr.detectChanges()}get opacity(){return this._opacity}_assertIsBodyMask(){if(this.containerized)throw new Error("Is not body mask")}onClick(e){e.stopImmediatePropagation()}hideBodyMask(){this._assertIsBodyMask(),this.isVisible=!1}showBodyMask(){this._assertIsBodyMask(),this.isVisible=!0}}An.\u0275fac=function(e){return new(e||An)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},An.\u0275cmp=n.\u0275\u0275defineComponent({type:An,selectors:[["ts-mask"]],inputs:{isVisible:"isVisible",opacity:"opacity"},decls:1,vars:1,consts:[["class","mask-wrap",3,"containerized-mask","opacity","click",4,"ngIf"],[1,"mask-wrap",3,"click"],["mode","indeterminate","diameter","32",1,"mask-element"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,$w,2,4,"div",0),2&e&&n.\u0275\u0275property("ngIf",t.isVisible)},dependencies:[y.NgIf,Ju.sN],styles:[".component-mask[_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%], .component-mask   [_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%]{position:absolute}.component-mask[_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%], .component-mask   [_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%]{position:absolute}.mask-wrap[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:2011;width:100%;height:100%;background-color:#fff}.mask-wrap[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;margin-top:-16px;margin-left:-16px;z-index:999}.mask-wrap.containerized-mask[_ngcontent-%COMP%], .mask-wrap.containerized-mask[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0});const Eb=new n.InjectionToken("CRT_MASK_COMPONENT"),Ww=new n.InjectionToken("Flag indicating that mask has startup loading animation");new n.InjectionToken("Modal overlay background component ID");var __;let an=__=class extends dt{constructor(e,t,i,r,s,o,c){super(i,r),this._appRef=e,this._injector=t,this.ngZone=r,this._window=s,this.loadingAnimationVisible=o,this._maskComponentType=c,this.createMaskComponent(),this.maskComponent.isVisible=!1}static _getHtmlElement(e){const t=e;if(!t||0===t.rootNodes.length)throw new Error("Not found HTMLElement Mask");return t.rootNodes[0]}_createMaskComponentRef(){this.maskComponentRef=(0,n.createComponent)(this._maskComponentType||An,{environmentInjector:this._appRef.injector})}_appendMaskComponentToBody(){const e=this.maskComponentRef.hostView;this._appRef.attachView(e);const t=__._getHtmlElement(e);this.document.body.appendChild(t)}_hideLoadingAnimation(){this._window?.dispatchEvent(new CustomEvent("hide_loading_animation"))}createMaskComponent(){this._createMaskComponentRef(),this._appendMaskComponentToBody(),this.maskComponent.isVisible=!1}showBodyMask(e){this.loadingAnimationVisible||this.show(e)}hideBodyMask(){if(this.loadingAnimationVisible)return this.loadingAnimationVisible=!1,void this._hideLoadingAnimation();this.hide()}};an.\u0275fac=function(e){return new(e||an)(n.\u0275\u0275inject(n.ApplicationRef),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(y.DOCUMENT),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(se,8),n.\u0275\u0275inject(Ww,8),n.\u0275\u0275inject(Eb,8))},an.\u0275prov=n.\u0275\u0275defineInjectable({token:an,factory:an.\u0275fac,providedIn:"root"}),an=__=(0,m.gn)([en({requestType:"crt.MaskService"}),(0,m.w6)("design:paramtypes",[n.ApplicationRef,n.Injector,Document,n.NgZone,Window,Boolean,n.Type])],an);class jh extends dt{constructor(e,t,i,r){super(i,r),this._viewContainerRef=e,this._maskComponentType=t,this.ngZone=r,this._tasks=new Set}_setMaskStateAttribute(e){const t=this._viewContainerRef?.element.nativeElement.parentElement;t&&t.getAttribute("maskstate")!==e&&t.setAttribute("maskstate",e)}createMaskComponent(){this.maskComponentRef=this._viewContainerRef.createComponent(this._maskComponentType??An),this.maskComponentRef.instance.containerized=!0}updateMaskStateAttribute(){super.updateMaskStateAttribute();const e=this.isVisible?"visible":"none";this._setMaskStateAttribute(e)}addTask(e,t){return this._tasks.add(e),this.show(t??this.settings),e}removeTask(e){this._tasks.delete(e),0===this._tasks.size&&this.hide()}clearTasks(){this._tasks.size>0&&(this._tasks.clear(),this.hide())}ngOnChanges(e){"shouldShow"in e&&(this.shouldShow?this.show(this.settings):this.hide())}}jh.\u0275fac=function(e){return new(e||jh)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(Eb,8),n.\u0275\u0275directiveInject(y.DOCUMENT),n.\u0275\u0275directiveInject(n.NgZone))},jh.\u0275dir=n.\u0275\u0275defineDirective({type:jh,selectors:[["","crtMask",""]],inputs:{shouldShow:["crtMask","shouldShow"],settings:["crtMaskSettings","settings"]},features:[n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275NgOnChangesFeature]});var A=f(83331),Ze=f(55799),Tb=f(7666);function Yw(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onCloseClick())}),n.\u0275\u0275element(1,"mat-icon",5),n.\u0275\u0275elementEnd()}}function Qw(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",8),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.handleButton(s.handler))}),n.\u0275\u0275element(1,"mat-icon",9),n.\u0275\u0275elementStart(2,"span"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("svgIcon",t.icon),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function Jw(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275template(1,Qw,4,2,"button",7),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.customButtons)}}class Ku{constructor(e,t,i,r){this.snackBarRef=e,this.data=t,this.matIconRegistry=i,this.domSanitizer=r,this.closeOnClickOutside=!1,this.message=t.message,this.closeOnClickOutside=!!t.closeOnClickOutside,this.customButtons=t.customButtons,this.matIconRegistry?.addSvgIconLiteral("icon_close_24",this.domSanitizer?.bypassSecurityTrustHtml(f(37433)))}onClickOutside(){this.closeOnClickOutside&&this.snackBarRef.dismiss()}onCloseClick(){this.snackBarRef.dismiss()}handleButton(e){var t=this;return(0,_.Z)(function*(){yield e?.call(),t.snackBarRef.dismiss()})()}}Ku.\u0275fac=function(e){return new(e||Ku)(n.\u0275\u0275directiveInject(Tb.OX),n.\u0275\u0275directiveInject(Tb.qD),n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},Ku.\u0275cmp=n.\u0275\u0275defineComponent({type:Ku,selectors:[["ts-notify"]],hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("click",function(){return t.onClickOutside()},!1,n.\u0275\u0275resolveDocument)},decls:5,vars:3,consts:[[1,"notify-container"],["data-qa","notificationPopup",1,"notify-popup"],["mat-button","","class","close-button",3,"click",4,"ngIf"],["class","buttons-container",4,"ngIf"],["mat-button","",1,"close-button",3,"click"],["svgIcon","icon_close_24"],[1,"buttons-container"],["mat-button","",3,"click",4,"ngFor","ngForOf"],["mat-button","",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Yw,2,0,"button",2),n.\u0275\u0275template(4,Jw,2,1,"div",3),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.message," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(null!=t.customButtons&&t.customButtons.length)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==t.customButtons?null:t.customButtons.length))},dependencies:[y.NgForOf,y.NgIf,U.eB,A.Hw],styles:[".notify-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:2em}.notify-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%], .notify-container[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{padding:0;margin-inline-start:auto;min-width:initial}.notify-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:1em}"]});class Ot{constructor(e,t,i,r){this._snackBar=e,this._translateService=t,this._zone=i,this._environment=r,this._defaultDuration=this._environment?.defaultNotifyPopupDuration||5e3,this._verticalPosition="bottom"}show({message:e,translate:t=!0,duration:i,panelClass:r,interpolateParams:s,closeOnClickOutside:o,customButtons:c}){var d=this;return(0,_.Z)(function*(){return t&&(e=yield(0,u.lastValueFrom)(d._translateService.get(e,s).pipe((0,we.P)()),{defaultValue:null})),d._zone.run(()=>d._snackBar.openFromComponent(Ku,{data:{message:e,closeOnClickOutside:o,customButtons:c},duration:void 0===i?d._defaultDuration:i,verticalPosition:d._verticalPosition,panelClass:r}))})()}showPermanently({message:e,translate:t,closeOnClickOutside:i}){var r=this;return(0,_.Z)(function*(){const s=yield r.show({message:e,translate:t,duration:0,closeOnClickOutside:i}),o=new u.Subject;return o.subscribe(()=>s.dismiss()),o})()}error({message:e,translate:t,duration:i}){return this.show({message:e,translate:t,duration:i,panelClass:"notify-service-error"})}warn({message:e,translate:t,duration:i}){return this.show({message:e,translate:t,duration:i,panelClass:"notify-service-warn"})}info({message:e,translate:t,duration:i}){return this.show({message:e,translate:t,duration:i,panelClass:"notify-service-info"})}}Ot.\u0275fac=function(e){return new(e||Ot)(n.\u0275\u0275inject(x.pl),n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject("environment",8))},Ot.\u0275prov=n.\u0275\u0275defineInjectable({token:Ot,factory:Ot.\u0275fac});class qa{}qa.\u0275fac=function(e){return new(e||qa)},qa.\u0275mod=n.\u0275\u0275defineNgModule({type:qa}),qa.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ot],imports:[y.CommonModule,U.yu,N.wp,z.x4,b.u5,b.UX,A.Ps,Se.Zh,Ze.AA,x.y,b.u5,b.UX]});class Xu{show(){}showPermanently(){return new u.Subject}error(){}warn(){}info(){}}Xu.\u0275fac=function(e){return new(e||Xu)},Xu.\u0275prov=n.\u0275\u0275defineInjectable({token:Xu,factory:Xu.\u0275fac});class Bh{set observationConfig(e){this._config=e,this._startObserve()}constructor(e){this._elementRef=e,this.elementStateChange=new n.EventEmitter}_startObserve(){this._stopObserve(),this._observableElement=this._elementRef?.nativeElement,this._observableElement&&(this._observer=new IntersectionObserver(e=>this._emitElementStateChange(e),this._config),this._observer.observe(this._observableElement))}_emitElementStateChange(e){e.filter(i=>this._isObservableElement(i)).forEach(i=>{this.elementStateChange.emit({visible:i.isIntersecting})})}_isObservableElement(e){return e.target===this._observableElement}_stopObserve(){this._observer&&this._observableElement&&this._observer.unobserve(this._observableElement)}ngOnInit(){this._startObserve()}ngOnDestroy(){this._stopObserve()}}Bh.\u0275fac=function(e){return new(e||Bh)(n.\u0275\u0275directiveInject(n.ElementRef))},Bh.\u0275dir=n.\u0275\u0275defineDirective({type:Bh,selectors:[["","crtObserveElementInViewport",""]],inputs:{observationConfig:"observationConfig"},outputs:{elementStateChange:"elementStateChange"}});class ed{}ed.\u0275fac=function(e){return new(e||ed)},ed.\u0275mod=n.\u0275\u0275defineNgModule({type:ed}),ed.\u0275inj=n.\u0275\u0275defineInjector({});const Kw=function(a){return{"password-icon":!0,"opacity-icon":a}};class td extends ut{constructor(e,t,i){super(e,t,i),this.hideIcon=!0,this.iconHint="",this.icon="visibility"}}td.\u0275fac=function(e){return new(e||td)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE))},td.\u0275cmp=n.\u0275\u0275defineComponent({type:td,selectors:[["ts-password-input"]],inputs:{iconHint:"iconHint",icon:"icon"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:td}]),n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:8,consts:[["matInput","","spellcheck","false","data-qa","input-password","type","password","name","pass","id","pass",3,"ngModel","placeholder","type","ngModelChange"],["input",""],[3,"ngClass","title","click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"input",0,1),n.\u0275\u0275listener("ngModelChange",function(r){return t.innerValue=r}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"mat-icon",2),n.\u0275\u0275listener("click",function(){return t.hideIcon=!t.hideIcon}),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("ngModel",t.innerValue)("placeholder",t.placeholder)("type",t.hideIcon?"password":"text"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(6,Kw,t.hideIcon))("title",t.iconHint),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("",t.icon,"\n"))},dependencies:[z.k0,A.Hw,y.NgClass,b.Fj,b.JJ,b.On],styles:["input[_ngcontent-%COMP%]{width:calc(100% - 24px)}.password-icon[_ngcontent-%COMP%]{position:absolute;top:4px;color:#006ce0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.password-icon.opacity-icon[_ngcontent-%COMP%]{color:#757575}.password-icon[_ngcontent-%COMP%]:hover{cursor:pointer}"]});class nd{}nd.\u0275fac=function(e){return new(e||nd)},nd.\u0275mod=n.\u0275\u0275defineNgModule({type:nd}),nd.\u0275inj=n.\u0275\u0275defineInjector({imports:[N.wp,z.x4,A.Ps,y.CommonModule,b.UX,b.u5,F.PW,N.wp,z.x4,A.Ps,y.CommonModule,b.UX,b.u5,F.PW]});class id{}id.\u0275fac=function(e){return new(e||id)},id.\u0275mod=n.\u0275\u0275defineNgModule({type:id}),id.\u0275inj=n.\u0275\u0275defineInjector({imports:[Ft.Xo]});var $a=f(46438),et=f(93254);class Ho{}function Xw(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",7),2&a){const t=e.$implicit;n.\u0275\u0275property("svgIcon",t)}}function ex(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.getTriggerCaption())}}function tx(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",13),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("svgIcon",null==t.config.emptyOption?null:t.config.emptyOption.svgIconName)}}function nx(a,e){1&a&&n.\u0275\u0275element(0,"div",15)}function ix(a,e){if(1&a&&n.\u0275\u0275template(0,nx,1,0,"div",14),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.needDisplayOptionIcons())}}function ax(a,e){1&a&&n.\u0275\u0275element(0,"mat-divider")}function rx(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"mat-option",9)(2,"div",10),n.\u0275\u0275template(3,tx,1,1,"mat-icon",11),n.\u0275\u0275template(4,ix,1,1,"ng-template",null,12,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(6,"span"),n.\u0275\u0275text(7),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(8,ax,1,0,"mat-divider",5),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275reference(5),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("display",i.config.emptyOption?"":"none"),n.\u0275\u0275property("value",i.emptyValue),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",null==i.config.emptyOption?null:i.config.emptyOption.svgIconName)("ngIfElse",t),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(null==i.config.emptyOption?null:i.config.emptyOption.caption),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.config.emptyOption)}}function sx(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",13),2&a){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("svgIcon",t.svgIconName)}}function ox(a,e){1&a&&n.\u0275\u0275element(0,"div",15)}function lx(a,e){if(1&a&&n.\u0275\u0275template(0,ox,1,0,"div",14),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.needDisplayOptionIcons())}}function cx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",16)(1,"div",10),n.\u0275\u0275template(2,sx,1,1,"mat-icon",11),n.\u0275\u0275template(3,lx,1,1,"ng-template",null,17,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(5,"span"),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()()()),2&a){const t=e.$implicit,i=n.\u0275\u0275reference(4);n.\u0275\u0275property("value",t.value),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.svgIconName)("ngIfElse",i),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(t.caption)}}Ho.\u0275fac=function(e){return new(e||Ho)},Ho.\u0275mod=n.\u0275\u0275defineNgModule({type:Ho}),Ho.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,N.wp,$a.t,A.Ps,Xe.Uc,et.uw,Ze.AA]});class Uh{constructor(){this._panelClass=[],this.emptyValue={},this.innerValue=this.emptyValue,this.valueChange=new n.EventEmitter,this.disabled=!1}set config(e){this._config=e,this._validateConfig()}get config(){return this._config}set value(e){this.innerValue=e??this.emptyValue}get value(){return this.isEmptyValueSelected()?null:this.innerValue}set panelClass(e){e?.length>0&&(this._panelClass=[...e])}get panelClass(){return[...this._panelClass,"select-menu-panel"]}_validateValue(){if(this.isEmptyValueSelected()||this._getSelectedOption())return;const e=this.value,t="object"==typeof e?JSON.stringify(e):e;throw new Error(`Value "${t}" is not specified in select menu configuration.`)}_validateConfig(){if(!this.config?.options)throw new Error(`Property "config" must be specified and contain valid options. Actual config is "${JSON.stringify(this.config)}".`)}_resetToFirstOptionIfNeeded(){this.config&&this.config.options.length>0&&!this.config.placeholder&&this.isEmptyValueSelected()&&(this.value=this.config.options[0].value,setTimeout(()=>{this.emitValueChange()},0))}_getSelectedOption(){const e=this.innerValue;return this.config.options.find(t=>t.value===e)}ngDoCheck(){this._validateValue(),this._resetToFirstOptionIfNeeded()}emitValueChange(){this.valueChange.emit(this.value)}trackByValue(e,t){return t.value}getTriggerCaption(){return this.isEmptyValueSelected()?this.config.placeholder?.caption:this._getSelectedOption().caption}getTriggerSvgIconName(){const e=this.config.placeholder?.svgIconName??this.config.emptyOption?.svgIconName;return this.isEmptyValueSelected()?e:this._getSelectedOption()?.svgIconName??e}isEmptyValueSelected(){return this.innerValue===this.emptyValue}needDisplayOptionIcons(){return Boolean(this.config.emptyOption?.svgIconName)||this.config.options.some(e=>e.svgIconName)}needDisplaySelectedCaption(){return!0!==this._config.hideSelectedCaption}}Uh.\u0275fac=function(e){return new(e||Uh)},Uh.\u0275cmp=n.\u0275\u0275defineComponent({type:Uh,selectors:[["ts-select-menu"]],inputs:{config:"config",value:"value",disabled:"disabled",panelClass:"panelClass"},outputs:{valueChange:"valueChange"},decls:8,vars:9,consts:[["floatLabel","never"],["disableOptionCentering","",3,"value","disabled","matTooltip","panelClass","valueChange","selectionChange"],[1,"select-menu-trigger"],["class","select-menu-trigger-icon",3,"svgIcon",4,"ngIf"],["class","select-menu-trigger-caption",4,"ngIf"],[4,"ngIf"],["class","select-menu-option",3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"select-menu-trigger-icon",3,"svgIcon"],[1,"select-menu-trigger-caption"],[1,"select-menu-option","select-menu-empty-option",3,"value"],[1,"select-menu-option-content"],[3,"svgIcon",4,"ngIf","ngIfElse"],["emptyOptionIconPlaceholder",""],[3,"svgIcon"],["class","select-menu-option-icon-placeholder",4,"ngIf"],[1,"select-menu-option-icon-placeholder"],[1,"select-menu-option",3,"value"],["optionIconPlaceholder",""]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-select",1),n.\u0275\u0275listener("valueChange",function(r){return t.innerValue=r})("selectionChange",function(){return t.emitValueChange()}),n.\u0275\u0275elementStart(2,"mat-select-trigger")(3,"span",2),n.\u0275\u0275template(4,Xw,1,1,"mat-icon",3),n.\u0275\u0275template(5,ex,2,1,"span",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(6,rx,9,7,"ng-container",5),n.\u0275\u0275template(7,cx,7,4,"mat-option",6),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("value",t.innerValue)("disabled",t.disabled)("matTooltip",t.needDisplaySelectedCaption()?null:t.getTriggerCaption())("panelClass",t.panelClass),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.getTriggerSvgIconName()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.needDisplaySelectedCaption()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.config.placeholder),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.config.options)("ngForTrackBy",t.trackByValue))},dependencies:[y.NgForOf,y.NgIf,N.v_,$a.d,A.Hw,Xe.CK,et.x8,et.Cb,Ze.Kd],styles:["ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper{padding-bottom:0!important}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix{width:auto;padding:0!important}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select{width:auto;height:26px;display:flex;align-items:center;border-radius:2px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select:not(.mat-select-disabled):focus,ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select:not(.mat-select-disabled):hover{background-color:#f2f5ff}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger{padding:0 4px 0 8px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value{max-width:100%;width:auto;color:#444;font-size:14px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value .select-menu-trigger{display:flex;align-items:center;height:18px;line-height:18px;position:relative}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value .select-menu-trigger .select-menu-trigger-icon{height:16px;width:16px;margin:0 8px 0 0!important}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value .select-menu-trigger .select-menu-trigger-caption{position:relative;bottom:1px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-underline{display:none}.mat-select-panel.select-menu-panel{max-height:500px!important;position:absolute;top:22px;left:15px;padding:1px}.mat-select-panel.select-menu-panel mat-option.select-menu-option{padding:0 18px;height:33px!important;line-height:33px!important}.mat-select-panel.select-menu-panel mat-option.select-menu-option.select-menu-empty-option{margin-top:4px}.mat-select-panel.select-menu-panel mat-option.select-menu-option.select-menu-empty-option.select-menu-empty-option-hidden{display:none}.mat-select-panel.select-menu-panel mat-option.select-menu-option .select-menu-option-content{display:flex;align-items:center;font-size:14px;line-height:18px;padding-right:15px}.mat-select-panel.select-menu-panel mat-option.select-menu-option mat-icon,.mat-select-panel.select-menu-panel mat-option.select-menu-option .select-menu-option-icon-placeholder{height:16px;width:16px;margin:0 8px 0 0!important}.mat-select-panel.select-menu-panel mat-divider{margin:5px 12px}\n"],encapsulation:2});class rn{constructor(e,t){this._domSanitizer=e,this._matIconRegistry=t}addIcons(e){e.forEach(({name:t,icon:i})=>{const r=this._domSanitizer.bypassSecurityTrustHtml(i);this._matIconRegistry.addSvgIconLiteral(t,r)})}}rn.\u0275fac=function(e){return new(e||rn)(n.\u0275\u0275inject(k.DomSanitizer),n.\u0275\u0275inject(A.jv))},rn.\u0275prov=n.\u0275\u0275defineInjectable({token:rn,factory:rn.\u0275fac,providedIn:"root"});class sn{constructor(e){this._materialIconsRegistrator=e,this._materialIconsRegistrator.addIcons([{name:"tooltip-icon",icon:f(37648)}])}}sn.\u0275fac=function(e){return new(e||sn)(n.\u0275\u0275inject(rn))},sn.\u0275mod=n.\u0275\u0275defineNgModule({type:sn}),sn.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,A.Ps,Ze.AA,w.aw,Vt]});var xe=f(65875);const ux=["tooltipEl"],dx=function(a){return{rtl:a}};class Wa{setInnerHTML(){this.tooltipEl&&(this.tooltipEl.nativeElement.innerHTML=this._sanitizer.sanitize(n.SecurityContext.HTML,this._tooltipConfig?.value))}set tooltipConfig(e){this._tooltipConfig!==e&&(this._tooltipConfig=e)}get tooltipConfig(){return this._tooltipConfig}get cssClasses(){return this._tooltipConfig?.cssClasses||this._defaultCssClass}constructor(e,t){this._directionality=e,this._sanitizer=t,this._defaultCssClass="base-tooltip crt-base-tooltip"}isRtl(){return"rtl"===this._directionality.value}ngAfterViewInit(){this.setInnerHTML()}}Wa.\u0275fac=function(e){return new(e||Wa)(n.\u0275\u0275directiveInject(xe.Is),n.\u0275\u0275directiveInject(k.DomSanitizer))},Wa.\u0275cmp=n.\u0275\u0275defineComponent({type:Wa,selectors:[["crt-base-tooltip"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(ux,5,n.ElementRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.tooltipEl=i.first)}},inputs:{tooltipConfig:"tooltipConfig"},decls:3,vars:6,consts:[[1,"tooltip-value",3,"ngClass"],["tooltipEl",""]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"span",0,1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275classMap(t.cssClasses),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(4,dx,t.isRtl())))},dependencies:[y.NgClass],styles:[".base-tooltip[_ngcontent-%COMP%]{max-width:300px;margin:10px;padding:8px;border:1px solid #e6e6e6;opacity:1;word-wrap:break-word}.base-tooltip[_ngcontent-%COMP%]   .rtl[_ngcontent-%COMP%]{direction:rtl;text-align:right}"]});class Zo{constructor(){this.showDelay=100,this.hideDelay=100,this.infoTooltipClass="",this.tooltipPosition="above"}}function px(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate1("rule ",i.getValidationClass(t.valid),""),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}Zo.\u0275fac=function(e){return new(e||Zo)},Zo.\u0275cmp=n.\u0275\u0275defineComponent({type:Zo,selectors:[["ts-info-tooltip-icon"]],inputs:{message:"message",showDelay:"showDelay",hideDelay:"hideDelay",infoTooltipClass:"infoTooltipClass",tooltipPosition:"tooltipPosition"},decls:1,vars:5,consts:[["svgIcon","info-tooltip",3,"matTooltip","matTooltipClass","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition"]],template:function(e,t){1&e&&n.\u0275\u0275element(0,"mat-icon",0),2&e&&n.\u0275\u0275property("matTooltip",t.message)("matTooltipClass",t.infoTooltipClass)("matTooltipShowDelay",t.showDelay)("matTooltipHideDelay",t.hideDelay)("matTooltipPosition",t.tooltipPosition)},dependencies:[A.Hw,Ze.Kd],styles:["[_nghost-%COMP%]{height:22px;width:22px}mat-icon[_ngcontent-%COMP%]{color:#22ac14;width:22px;height:22px;cursor:pointer}"]});class Gh extends Wa{set tooltipConfig(e){this.validationTooltipConfig=e.value}constructor(e,t){super(e,t),this.directionality=e}getValidationClass(e){return e?"valid":"boolean"==typeof e?"invalid":"not-validated"}setInnerHTML(){}}function mx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.translate("OperationsPoint"))}}function hx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t)}}function gx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"ol"),n.\u0275\u0275template(1,hx,2,1,"li",3),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",null==t.data?null:t.data.byOperations)}}function fx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.translate("RecordsPoint"))}}function _x(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t)}}function yx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"ol"),n.\u0275\u0275template(1,_x,2,1,"li",3),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",null==t.data?null:t.data.byRecords)}}Gh.\u0275fac=function(e){return new(e||Gh)(n.\u0275\u0275directiveInject(xe.Is),n.\u0275\u0275directiveInject(k.DomSanitizer))},Gh.\u0275cmp=n.\u0275\u0275defineComponent({type:Gh,selectors:[["crt-validation-result-tooltip"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:5,consts:[[1,"header"],[1,"rules"],[3,"class",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"div",0),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",1),n.\u0275\u0275template(4,px,2,4,"div",2),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275classMapInterpolate1("component-container ",t.cssClasses,""),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1("",null==t.validationTooltipConfig?null:t.validationTooltipConfig.header,":"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",null==t.validationTooltipConfig?null:t.validationTooltipConfig.validations))},dependencies:[y.NgForOf],styles:[".component-container[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column;padding:16px;border-width:1px;border-style:solid}.component-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:left;font-weight:700;padding-bottom:6px}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule[_ngcontent-%COMP%]{width:50%;position:relative;left:24px;text-indent:-24px;padding-right:30px;box-sizing:border-box;margin-bottom:9px}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule[_ngcontent-%COMP%]:before{padding-right:8px;top:3px;position:relative}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule.valid[_ngcontent-%COMP%]:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8ZyBpZD0iR3JvdXBfMTY1OTUiIGRhdGEtbmFtZT0iR3JvdXAgMTY1OTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00ODYgLTU3MikiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV80MjUxMyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNDI1MTMiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg2IDU3MikiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSJFbGxpcHNlXzMwODciIGRhdGEtbmFtZT0iRWxsaXBzZSAzMDg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODcgNTczKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjM2M4MjIzIiBzdHJva2Utd2lkdGg9IjIiPgogICAgICA8Y2lyY2xlIGN4PSI3IiBjeT0iNyIgcj0iNyIgc3Ryb2tlPSJub25lIi8+CiAgICAgIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSI2IiBmaWxsPSJub25lIi8+CiAgICA8L2c+CiAgICA8cGF0aCBpZD0iUGF0aF8xMTg3OSIgZGF0YS1uYW1lPSJQYXRoIDExODc5IiBkPSJNMTcuMDkzLDI4LjE4bDIuNSwzLDQuNS01IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NzMuNDA3IDU1MS4zMikiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzNjODIyMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPC9nPgo8L3N2Zz4K)}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule.invalid[_ngcontent-%COMP%]:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8ZyBpZD0iR3JvdXBfMTY1OTQiIGRhdGEtbmFtZT0iR3JvdXAgMTY1OTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00ODYgLTU3MikiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV80MjUxMyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNDI1MTMiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg2IDU3MikiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSJFbGxpcHNlXzMwODciIGRhdGEtbmFtZT0iRWxsaXBzZSAzMDg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODcgNTczKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzIzZjIzIiBzdHJva2Utd2lkdGg9IjIiPgogICAgICA8Y2lyY2xlIGN4PSI3IiBjeT0iNyIgcj0iNyIgc3Ryb2tlPSJub25lIi8+CiAgICAgIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSI2IiBmaWxsPSJub25lIi8+CiAgICA8L2c+CiAgICA8cGF0aCBpZD0iUGF0aF8xMTg3NyIgZGF0YS1uYW1lPSJQYXRoIDExODc3IiBkPSJNMTQyOCw0ODF2NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3My41MDkgLTc3MS45ODgpIHJvdGF0ZSg0NSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MyM2YyMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBpZD0iUGF0aF8xMTg3OCIgZGF0YS1uYW1lPSJQYXRoIDExODc4IiBkPSJNMTQyOCw0ODF2NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg0NS45ODggLTg3LjUwOSkgcm90YXRlKDEzNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MyM2YyMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPC9nPgo8L3N2Zz4K)}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule.not-validated[_ngcontent-%COMP%]:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8ZyBpZD0iR3JvdXBfMTY1OTMiIGRhdGEtbmFtZT0iR3JvdXAgMTY1OTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00ODYgLTU3MikiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV80MjUxMyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNDI1MTMiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg2IDU3MikiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSJFbGxpcHNlXzMwODciIGRhdGEtbmFtZT0iRWxsaXBzZSAzMDg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODcgNTczKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzU3NTc1IiBzdHJva2Utd2lkdGg9IjIiPgogICAgICA8Y2lyY2xlIGN4PSI3IiBjeT0iNyIgcj0iNyIgc3Ryb2tlPSJub25lIi8+CiAgICAgIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSI2IiBmaWxsPSJub25lIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K)}"]});class zh extends Wa{set tooltipConfig(e){this.data=e.value}constructor(e,t,i,r,s){super(e,t),this.directionality=e,this._translateService=i,this._dialogService=r,this._environment=s,this._translatePrefix="ObjectPermissions."}translate(e){return this._translateService.instant(this._translatePrefix+e)}getUrl(){return this._url||(this._url=this._environment.workspaceBaseUrl+"ClientApp/#/AdministratedObjects"),this._url}updateObjectPermissions(){this._dialogService.openConfirmationDialog(this.translate("UpdateObjectPermissionsMessage")).pipe((0,u.map)(e=>{e===Fh.result&&this.data.setObjectPermissionsFn(this.data.targetId).subscribe()})).subscribe()}}zh.\u0275fac=function(e){return new(e||zh)(n.\u0275\u0275directiveInject(xe.Is),n.\u0275\u0275directiveInject(k.DomSanitizer),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject("environment"))},zh.\u0275cmp=n.\u0275\u0275defineComponent({type:zh,selectors:[["crt-object-permissions-warning"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:17,vars:14,consts:[[4,"ngIf"],["target","_blank",3,"href"],["target","_blank",1,"update-permissions-link",3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,mx,2,1,"span",0),n.\u0275\u0275template(4,gx,2,1,"ol",0),n.\u0275\u0275template(5,fx,2,1,"span",0),n.\u0275\u0275template(6,yx,2,1,"ol",0),n.\u0275\u0275elementStart(7,"span"),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"a",1),n.\u0275\u0275text(10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"span"),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"a",2),n.\u0275\u0275listener("click",function(){return t.updateObjectPermissions()}),n.\u0275\u0275text(14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"p"),n.\u0275\u0275text(16),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275classMapInterpolate1("component-container ",t.cssClasses,""),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.translate("Warning")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null==t.data||null==t.data.byOperations?null:t.data.byOperations.length)>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null==t.data||null==t.data.byOperations?null:t.data.byOperations.length)>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null==t.data||null==t.data.byRecords?null:t.data.byRecords.length)>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null==t.data||null==t.data.byRecords?null:t.data.byRecords.length)>0),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.translate("SetProperPermissionsBegin")),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("href",t.getUrl(),n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.translate("ObjectPermissions")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.translate("SetProperPermissionsEnd")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.translate("Link")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.translate("End")))},dependencies:[y.NgForOf,y.NgIf],styles:[".component-container[_ngcontent-%COMP%]{min-width:450px;max-width:450px;border-bottom:0px!important}.component-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.component-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:4px;padding-inline-start:20px}.component-container[_ngcontent-%COMP%]   a.update-permissions-link[_ngcontent-%COMP%]{display:block;line-height:40px}"]});var y_=f(18632),Pb=f(19232),ad=f(71701);class C_{constructor(e){this.showEvent="mouseenter",this.hideEvent="mouseleave",this.capture=!1,this.closeOnOutsideClick=!1,Object.assign(this,e)}}var Rn=f(19596);class Ya{constructor(e,t,i,r){this._overlay=e,this._overlayPositionBuilder=t,this._elementRef=i,this._ngZone=r,this._class="crt-tooltip-trigger",this._delayTime=500}set tooltipConfig(e){if(e&&(this._tooltipConfig=e,this._tooltipRef)){if(this._tooltipRef.instance.tooltipConfig=this._tooltipConfig.tooltipConfig,!this._tooltipRef.instance.tooltipConfig)return;this._tooltipRef.instance.tooltipConfig.cssClasses=this._tooltipConfig?.panelClass}}get tooltipConfig(){return this._tooltipConfig}set crtTooltip(e){!e||Array.isArray(e)&&0===e.length||(this.tooltipConfig=new C_({tooltipConfig:{value:Array.isArray(e)?e.join("<br>"):e},componentType:Wa}))}onClick(e){"click"===this.tooltipConfig?.showEvent&&this.show(e)}_createShowEventStream(e){return this._ngZone.runOutsideAngular(()=>(0,u.fromEvent)(this._elementRef.nativeElement,this._tooltipConfig?.showEvent,{capture:this._tooltipConfig?.capture}).pipe((0,Pb.e)(this._delayTime),(0,L.R)(e)))}_createHideEventStream(e){return this._ngZone.runOutsideAngular(()=>(0,u.fromEvent)(e,this._tooltipConfig?.hideEvent,{capture:this._tooltipConfig?.capture}))}_createEventsStream(e,t){this._subscription=t.subscribe(),this._subscription.add(e.subscribe());const i=(0,u.merge)(e,t);i.pipe((0,L.R)(t));const r=i.subscribe(s=>{if(s.type===this._tooltipConfig.showEvent&&this.show(s),s.type===this._tooltipConfig.hideEvent){let o=s.relatedTarget;this._overlayRef?.overlayElement.contains(o)||(o=this._elementRef.nativeElement,this.hide(),this._subscription.unsubscribe());const c=this._createHideEventStream(o),d=this._createShowEventStream(c);this._createEventsStream(d,c)}});this._subscription.add(r)}_createKeyboardEvent(){const e=this._ngZone.runOutsideAngular(()=>(0,u.fromEvent)(this._elementRef.nativeElement,"keydown",{capture:this._tooltipConfig?.capture}).pipe((0,P.h)(i=>i.key===ad.s.Enter||i.key===ad.s.Escape))),t=this._ngZone.runOutsideAngular(()=>(0,u.fromEvent)(this._elementRef.nativeElement,"blur",{capture:this._tooltipConfig?.capture}));this._createKeyboardEventsStream(e,t)}_createKeyboardEventsStream(e,t){this._keypressSubscription=t.subscribe();const i=(0,u.merge)(e,t);i.pipe((0,L.R)(t));const r=i.subscribe(s=>{s instanceof KeyboardEvent?this._onHandleKeyboardEvent(s):s instanceof FocusEvent&&this._onHandleFocusEvent(s)});this._keypressSubscription.add(r)}_onHandleKeyboardEvent(e){e.key===ad.s.Enter&&(e.stopPropagation(),this.show(e)),e.key===ad.s.Escape&&(e.stopPropagation(),this.hide(),this._keypressSubscription.unsubscribe(),this._createKeyboardEvent())}_onHandleFocusEvent(e){if("blur"!==e.type)return;const t=e.relatedTarget;this._overlayRef?.overlayElement.contains(t)||(this.hide(),this._keypressSubscription.unsubscribe()),this._createKeyboardEvent()}_getPreferredPositions(){return[{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:0,offsetY:0,panelClass:this._tooltipConfig?.panelClass},{originX:"end",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:0,offsetY:0,panelClass:this._tooltipConfig?.panelClass},{originX:"center",originY:"center",overlayX:"end",overlayY:"top",offsetX:0,offsetY:0,panelClass:this._tooltipConfig?.panelClass}]}_prepareTooltipConfigFromOverlayConfig(e){const t=e.tooltipConfig;return this._tooltipConfig.tooltipConfig&&e.panelClass&&(t.cssClasses=e.panelClass),t}_createOverlay(){if(!this._tooltipConfig)return;const e=this._tooltipConfig?.preferredPositions??this._getPreferredPositions(),t=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions(e),i={scrollStrategy:this._overlay.scrollStrategies.close(),positionStrategy:t};this._tooltipConfig?.width&&Object.assign(i,{width:this._tooltipConfig?.width}),this._tooltipConfig?.height&&Object.assign(i,{height:this._tooltipConfig?.height}),this._overlayRef=this._overlay.create(i),this._tooltipConfig.closeOnOutsideClick&&this._overlayRef.outsidePointerEvents().subscribe(()=>this.hide())}hide(){this._overlayRef?.hasAttached()&&(this._overlayRef.detach(),this._overlayRef.dispose(),this._overlayRef=null)}show(e){const t=e.relatedTarget;!this._tooltipConfig||t&&!document.body.contains(t)||(e?.stopPropagation(),this._overlayRef||this._createOverlay(),this._overlayRef.hasAttached()||(this._tooltipRef=this._overlayRef.attach(new y_.C5(this._tooltipConfig.componentType))),this._tooltipRef&&(this._tooltipRef.instance.tooltipConfig=this._prepareTooltipConfigFromOverlayConfig(this._tooltipConfig)))}ngAfterViewInit(){const e=this._createHideEventStream(this._elementRef.nativeElement),t=this._createShowEventStream(e);this._createEventsStream(t,e),this._createKeyboardEvent()}ngOnDestroy(){this.hide(),this._subscription?.unsubscribe(),this._keypressSubscription?.unsubscribe()}}Ya.\u0275fac=function(e){return new(e||Ya)(n.\u0275\u0275directiveInject(Rn.aV),n.\u0275\u0275directiveInject(Rn.wJ),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.NgZone))},Ya.\u0275dir=n.\u0275\u0275defineDirective({type:Ya,selectors:[["","crtTooltip",""]],hostVars:2,hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("click",function(r){return t.onClick(r)}),2&e&&n.\u0275\u0275classMap(t._class)},inputs:{tooltipConfig:"tooltipConfig",crtTooltip:"crtTooltip"},exportAs:["crtTooltip"]}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",C_),(0,m.w6)("design:paramtypes",[C_])],Ya.prototype,"tooltipConfig",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object),(0,m.w6)("design:paramtypes",[Object])],Ya.prototype,"crtTooltip",null);var Sx=f(37038),Ab=f(16991);class bx{constructor(e){this.data={nodes:new Ab.DataSet(e.nodes),edges:new Ab.DataSet(e.edges)},this.options=e.options}}const vx=["visNetworkContainer"];class Hh{constructor(){this._networkDataSubject=new u.ReplaySubject,this.nodeDoubleClick=new n.EventEmitter}set networkData(e){e&&this._networkDataSubject.next(e)}_renderVisNetwork(e){const t=this.visNetworkContainer.nativeElement;this.visNetworkInstance=new Sx.Network(t,e.data,e.options),this.visNetworkInstance.on("doubleClick",this.onNodeDoubleClick.bind(this))}onNodeDoubleClick(e){const t=this.visNetworkInstance.getNodeAt(e.pointer.DOM);t&&this.nodeDoubleClick.emit(t)}_reRenderVisNetwork(e){this.visNetworkInstance.setData(e.data),this.visNetworkInstance.setOptions(e.options),this.visNetworkInstance.redraw()}ngOnInit(){this._networkDataSubject.pipe((0,h.U)(e=>new bx(e))).subscribe(e=>{this.visNetworkInstance?this._reRenderVisNetwork(e):this._renderVisNetwork(e)})}}Hh.\u0275fac=function(e){return new(e||Hh)},Hh.\u0275cmp=n.\u0275\u0275defineComponent({type:Hh,selectors:[["ts-vis-network"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(vx,7),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.visNetworkContainer=i.first)}},inputs:{networkData:"networkData"},outputs:{nodeDoubleClick:"nodeDoubleClick"},decls:2,vars:0,consts:[[1,"vis-network-container"],["visNetworkContainer",""]],template:function(e,t){1&e&&n.\u0275\u0275element(0,"div",0,1)},styles:[".vis-network-container[_ngcontent-%COMP%]{height:100%}"]});class rd{}rd.\u0275fac=function(e){return new(e||rd)},rd.\u0275mod=n.\u0275\u0275defineNgModule({type:rd}),rd.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});class sd{}sd.\u0275fac=function(e){return new(e||sd)},sd.\u0275mod=n.\u0275\u0275defineNgModule({type:sd}),sd.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,U.yu,A.Ps]});const Ix=function(a){return{"voice-to-text-container__icon-microphone":!0,"voice-to-text-container__icon-microphone-active":a}};function Dx(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",2),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.clicked())}),n.\u0275\u0275element(1,"span",3),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("disableRipple",!0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,Ix,t.isActive))}}class Zh{get voiceToTextApi(){return this._voiceToTextApi||(this._voiceToTextApi=this._initializeVoiceToTextApi()),this._voiceToTextApi}set isActive(e){this._isActive=e,this.recognitionStateChanged.emit(e)}get isActive(){return this._isActive}constructor(e,t){this._injector=e,this._cdr=t,this._unsubscribe$=new u.Subject,this._isActive=!1,this.speechRecognitionFinished=new n.EventEmitter,this.recognitionStateChanged=new n.EventEmitter,this.language="en-US",this.isVisible=Pt.isSupported()}_initializeVoiceToTextApi(){const e=this._injector.get(Pt);return e.init({lang:this.language}),this._subscribeEvents(e),e}_subscribeEvents(e){e.speechResult.pipe((0,L.R)(this._unsubscribe$)).subscribe(t=>this.onSpeechResultHandler(t)),e.speechEnd.pipe((0,L.R)(this._unsubscribe$)).subscribe(()=>this.onSpeechEndHandler())}ngOnDestroy(){this._unsubscribe$.next(),this._unsubscribe$.complete(),this._voiceToTextApi&&(this._voiceToTextApi.destroy(),this._voiceToTextApi=null)}onSpeechResultHandler(e){this.speechRecognitionFinished.emit(e)}onSpeechEndHandler(){this.isActive=!1,this._cdr.detectChanges()}clicked(){this.isActive?this.voiceToTextApi.stopRecognition():this.voiceToTextApi.startRecognition(),this.isActive=!this.isActive,this._cdr.detectChanges()}}function Mx(a,e){1&a&&n.\u0275\u0275element(0,"mat-icon",4)}function wx(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.linkCaption)}}Zh.\u0275fac=function(e){return new(e||Zh)(n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},Zh.\u0275cmp=n.\u0275\u0275defineComponent({type:Zh,selectors:[["ts-voice-to-text-button"]],inputs:{language:"language"},outputs:{speechRecognitionFinished:"speechRecognitionFinished",recognitionStateChanged:"recognitionStateChanged"},features:[n.\u0275\u0275ProvidersFeature([Pt])],decls:2,vars:1,consts:[[1,"voice-to-text-container"],["mat-icon-button","",3,"disableRipple","click",4,"ngIf"],["mat-icon-button","",3,"disableRipple","click"],[3,"ngClass"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,Dx,2,4,"button",1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isVisible))},dependencies:[y.NgClass,y.NgIf,U.eB],styles:[".voice-to-text-container[_ngcontent-%COMP%]{display:inherit}.voice-to-text-container__icon-microphone[_ngcontent-%COMP%]{display:block;width:16px;height:16px;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gIDxnIGlkPSJpY29uX21pY3JvcGhvbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDYwLjUxMiAtMjQyLjY1OSkiPiAgICA8cGF0aCBpZD0iUGF0aF82MTI1IiBkYXRhLW5hbWU9IlBhdGggNjEyNSIgZD0iTTIwNjAuNTEyLDI0Mi42NTloMTZ2MTZoLTE2WiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI3IiBkYXRhLW5hbWU9IlBhdGggNjEyNyIgZD0iTTEuNSwwaDBBMS41LDEuNSwwLDAsMSwzLDEuNXY0QTEuNSwxLjUsMCwwLDEsMS41LDdoMEExLjUsMS41LDAsMCwxLDAsNS41di00QTEuNSwxLjUsMCwwLDEsMS41LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDY3LjAxMiAyNDQuMTU5KSIgZmlsbD0iIzgwOTViMyIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI2IiBkYXRhLW5hbWU9IlBhdGggNjEyNiIgZD0iTTIwNzIuOSwyNDkuNjlhNC4zOSw0LjM5LDAsMCwxLTguNzgsMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTEgLTAuMDMxKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODA5NWIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPiAgICA8bGluZSBpZD0iTGluZV8yMTUiIGRhdGEtbmFtZT0iTGluZSAyMTUiIHkxPSIzLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNjguNTEyIDI1My42NTkpIiBmaWxsPSJub25lIiBzdHJva2U9IiM4MDk1YjMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+ICA8L2c+PC9zdmc+)}.voice-to-text-container__icon-microphone-active[_ngcontent-%COMP%]{border-radius:16px;animation:_ngcontent-%COMP%_glow 1s infinite alternate}.voice-to-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none}.voice-to-text-container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:inherit;height:inherit}@keyframes _ngcontent-%COMP%_glow{0%{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gIDxnIGlkPSJpY29uX21pY3JvcGhvbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDYwLjUxMiAtMjQyLjY1OSkiPiAgICA8cGF0aCBpZD0iUGF0aF82MTI1IiBkYXRhLW5hbWU9IlBhdGggNjEyNSIgZD0iTTIwNjAuNTEyLDI0Mi42NTloMTZ2MTZoLTE2WiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI3IiBkYXRhLW5hbWU9IlBhdGggNjEyNyIgZD0iTTEuNSwwaDBBMS41LDEuNSwwLDAsMSwzLDEuNXY0QTEuNSwxLjUsMCwwLDEsMS41LDdoMEExLjUsMS41LDAsMCwxLDAsNS41di00QTEuNSwxLjUsMCwwLDEsMS41LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDY3LjAxMiAyNDQuMTU5KSIgZmlsbD0iIzgwOTViMyIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI2IiBkYXRhLW5hbWU9IlBhdGggNjEyNiIgZD0iTTIwNzIuOSwyNDkuNjlhNC4zOSw0LjM5LDAsMCwxLTguNzgsMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTEgLTAuMDMxKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODA5NWIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPiAgICA8bGluZSBpZD0iTGluZV8yMTUiIGRhdGEtbmFtZT0iTGluZSAyMTUiIHkxPSIzLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNjguNTEyIDI1My42NTkpIiBmaWxsPSJub25lIiBzdHJva2U9IiM4MDk1YjMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+ICA8L2c+PC9zdmc+)}to{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gIDxnIGlkPSJpY29uX21pY3JvcGhvbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDYwLjUxMiAtMjQyLjY1OSkiPiAgICA8cGF0aCBpZD0iUGF0aF82MTI1IiBkYXRhLW5hbWU9IlBhdGggNjEyNSIgZD0iTTIwNjAuNTEyLDI0Mi42NTloMTZ2MTZoLTE2WiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI3IiBkYXRhLW5hbWU9IlBhdGggNjEyNyIgZD0iTTEuNSwwaDBBMS41LDEuNSwwLDAsMSwzLDEuNXY0QTEuNSwxLjUsMCwwLDEsMS41LDdoMEExLjUsMS41LDAsMCwxLDAsNS41di00QTEuNSwxLjUsMCwwLDEsMS41LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDY3LjAxMiAyNDQuMTU5KSIgZmlsbD0iI0ZGMDAwMCIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI2IiBkYXRhLW5hbWU9IlBhdGggNjEyNiIgZD0iTTIwNzIuOSwyNDkuNjlhNC4zOSw0LjM5LDAsMCwxLTguNzgsMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTEgLTAuMDMxKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkYwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPiAgICA8bGluZSBpZD0iTGluZV8yMTUiIGRhdGEtbmFtZT0iTGluZSAyMTUiIHkxPSIzLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNjguNTEyIDI1My42NTkpIiBmaWxsPSJub25lIiBzdHJva2U9IiNGRjAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+ICA8L2c+PC9zdmc+)}}"]});class qh{constructor(e,t){this.linkCaption="",this.linkUrl="",this.showIcon=!0,t.addSvgIconLiteral("info-icon",e.bypassSecurityTrustHtml(f(17363)))}}qh.\u0275fac=function(e){return new(e||qh)(n.\u0275\u0275directiveInject(k.DomSanitizer),n.\u0275\u0275directiveInject(A.jv))},qh.\u0275cmp=n.\u0275\u0275defineComponent({type:qh,selectors:[["ts-info-link"]],inputs:{linkCaption:"linkCaption",linkUrl:"linkUrl",showIcon:"showIcon"},decls:4,vars:3,consts:[[1,"info-link-wrap"],["target","_blank","rel","noopener",1,"info-link",3,"href"],["class","info-icon","svgIcon","info-icon",4,"ngIf"],["class","link-caption",4,"ngIf"],["svgIcon","info-icon",1,"info-icon"],[1,"link-caption"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"a",1),n.\u0275\u0275template(2,Mx,1,0,"mat-icon",2),n.\u0275\u0275template(3,wx,2,1,"span",3),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("href",t.linkUrl,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showIcon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.linkCaption))},dependencies:[y.NgIf,A.Hw],styles:[".info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]{display:flex;text-decoration:none;color:#648cdd;outline:none;overflow:hidden;font-size:13px;font-family:Open Sans Light,sans-serif;align-items:center}.info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{margin:1px 8px 0}.info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]   .link-caption[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});class od{}od.\u0275fac=function(e){return new(e||od)},od.\u0275mod=n.\u0275\u0275defineNgModule({type:od}),od.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,A.Ps]});var Ee=f(65598),xx=f(41621),on=f(42147),S_=f(66219);const Tx=new n.InjectionToken("Represents the resize observer",{factory:()=>new S_.Z(a=>{window.requestAnimationFrame(()=>{a.forEach(e=>{const t={width:e.target?.clientWidth||e.contentRect.width,height:e.target?.clientHeight||e.contentRect.height};e.target.dispatchEvent(new CustomEvent("crt-resize",{detail:t}))})})}),providedIn:"root"});class $h{set crtResizableDisabled(e){this._resizeDisabled$.next(e)}get resized(){const e=this._resized.asObservable().pipe((0,P.h)(s=>this._isElementSizeValid(s))),t=new u.BehaviorSubject(null),i=t.pipe((0,M.w)(()=>e.pipe((0,Ee.q)(1)))),r=e.pipe((0,xx.D)(()=>(0,u.timer)(this.delay)),(0,I.b)(()=>t.next()));return(0,u.merge)(i,r).pipe((0,on.x)((s,o)=>this._isElementSizesEqual(s,o)))}constructor(e,t){this.elementRef=e,this._resizeObserver=t,this._resized=new n.EventEmitter,this._destroyed$=new u.Subject,this._resizeDisabled$=new u.BehaviorSubject(!1),this.delay=200}_isElementSizeValid(e){return e&&e.width>0&&e.height>0}_isElementSizesEqual(e,t){return e.width===t.width&&e.height===t.height}ngOnInit(){this._nativeElement=this.elementRef?.nativeElement,this._nativeElement&&this._resizeDisabled$.pipe((0,on.x)(),(0,L.R)(this._destroyed$)).subscribe(e=>{e?this._resizeObserver.unobserve(this._nativeElement):this._resizeObserver.observe(this._nativeElement)})}onResized(e){this._resizeDisabled$.value||this._resized.emit(e?.detail)}ngOnDestroy(){this._nativeElement&&this._resizeObserver.unobserve(this._nativeElement),this._destroyed$.next(),this._destroyed$.complete()}}$h.\u0275fac=function(e){return new(e||$h)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(Tx))},$h.\u0275dir=n.\u0275\u0275defineDirective({type:$h,selectors:[["","crtResizable",""]],hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("crt-resize",function(r){return t.onResized(r)})},inputs:{delay:"delay",crtResizableDisabled:"crtResizableDisabled"},outputs:{resized:"resized"}});class ld{}ld.\u0275fac=function(e){return new(e||ld)},ld.\u0275mod=n.\u0275\u0275defineNgModule({type:ld}),ld.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});var Rb=f(7438);class cd{constructor(){this._directionality=(0,n.inject)(xe.Is),this.loadingText="SkeletonLoader.Loading",this.documentDirection=this._directionality?.value,this.animation="progress",this.appearance="line",this.count=1,this.styles={}}set ariaLabel(e){this.loadingText=e??this.loadingText}ngOnInit(){this.documentDirection="rtl"===this._directionality?.value?"rtl":null}}cd.\u0275fac=function(e){return new(e||cd)},cd.\u0275cmp=n.\u0275\u0275defineComponent({type:cd,selectors:[["crt-skeleton-loader"]],inputs:{animation:"animation",appearance:"appearance",count:"count",styles:"styles",ariaLabel:"ariaLabel"},decls:3,vars:14,consts:[[1,"crt-skeleton-loader",3,"theme","appearance","count","ariaLabel","loadingText","animation"]],template:function(e,t){1&e&&(n.\u0275\u0275element(0,"ngx-skeleton-loader",0),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275pipe(2,"translate")),2&e&&(n.\u0275\u0275styleProp("width",null==t.styles?null:t.styles.width),n.\u0275\u0275property("theme",t.styles)("appearance",t.appearance)("count",t.count)("ariaLabel",n.\u0275\u0275pipeBind1(1,10,t.loadingText))("loadingText",n.\u0275\u0275pipeBind1(2,12,t.loadingText))("animation",t.animation),n.\u0275\u0275attribute("appearance",t.appearance)("dir",t.documentDirection))},dependencies:[Rb.xr,w.X$],styles:["[_nghost-%COMP%]{overflow:hidden;display:flex;width:100%}[_nghost-%COMP%]   .crt-skeleton-loader[_ngcontent-%COMP%]{display:block;min-width:0;flex:auto;width:200px}[_nghost-%COMP%]   .crt-skeleton-loader[appearance=circle][_ngcontent-%COMP%]{width:50px}"]});const Ax=JSON.parse('{"SkeletonLoader":{"Loading":"\u062a\u062d\u0645\u064a\u0644..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"\u062a\u062d\u0631\u064a\u0631 \u0627\u0644\u0635\u0641\u062d\u0629"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Rx=JSON.parse('{"SkeletonLoader":{"Loading":"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435..."},"CopyClipboard":{"Copied":"\u041a\u043e\u043f\u0438\u0440\u0430\u043d\u043e"},"Dialog":{"CanDiscardUnsavedData":"\u0418\u043c\u0430\u0442\u0435 \u043d\u0435\u0437\u0430\u043f\u0438\u0441\u0430\u043d\u0438 \u043f\u0440\u043e\u043c\u0435\u043d\u0438, \u043a\u043e\u0438\u0442\u043e \u0449\u0435 \u0431\u044a\u0434\u0430\u0442 \u0437\u0430\u0433\u0443\u0431\u0435\u043d\u0438. \u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u043f\u0440\u043e\u0434\u044a\u043b\u0436\u0438\u0442\u0435?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"\u041e\u0449\u0435 \u043d\u044f\u043c\u0430 \u043d\u0438\u0449\u043e \u0437\u0430 \u043f\u043e\u043a\u0430\u0437\u0432\u0430\u043d\u0435 ","Subhead":"\u041c\u043e\u043b\u044f \u043f\u044a\u0440\u0432\u043e \u0434\u0430 \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u0427\u0430\u0442\u0430 \u0435 \u0437\u0430\u043f\u043e\u0447\u043d\u0430\u0442: {0} \u043e\u0442","EndDate":"\u0427\u0430\u0442\u0430 \u0435 \u0437\u0430\u0432\u044a\u0440\u0448\u0435\u043d: {0} \u043e\u0442"}}}}'),kx=JSON.parse('{"SkeletonLoader":{"Loading":"Na\u010d\xedt\xe1n\xed..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Nx=JSON.parse('{"SkeletonLoader":{"Loading":"Ladevorgang"},"CopyClipboard":{"Copied":"Kopiert"},"Dialog":{"CanDiscardUnsavedData":"Sie haben nicht gespeicherte \xc4nderungen, die verloren gehen. Fortfahren?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Noch nichts anzuzeigen ","Subhead":"Bitte zuerst Daten hinzuf\xfcgen"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat gestartet: {0} von","EndDate":"Chat abgeschlossen {0} von"}}}}'),Vx=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"}}'),Fx=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Lx=JSON.parse('{"SkeletonLoader":{"Loading":"Cargando..."},"CopyClipboard":{"Copied":"Copiado"},"Dialog":{"CanDiscardUnsavedData":"Tienes cambios sin guardar que se perder\xe1n. \xbfContinuar?"},"Schema":{"DesignButtonHint":"Editar p\xe1gina"},"Placeholder":{"Default":{"Title":"Nada que mostrar a\xfan ","Subhead":"Por favor a\xf1ada primero datos"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat iniciado: {0} por","EndDate":"Chat completado: {0} por"}}}}'),Ox=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"\u0635\u0641\u062d\u0647 \u0648\u06cc\u0631\u0627\u06cc\u0634"}}'),jx=JSON.parse('{"SkeletonLoader":{"Loading":"En cours de chargement..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"}}'),Bx=JSON.parse('{"SkeletonLoader":{"Loading":"En cours de chargement..."},"CopyClipboard":{"Copied":"Copi\xe9"},"Dialog":{"CanDiscardUnsavedData":"Les modifications non enregistr\xe9es seront perdues. Continuer?"},"Schema":{"DesignButtonHint":"Page d\'\xe9dition"},"Placeholder":{"Default":{"Title":"Rien \xe0 afficher pour l\'instant ","Subhead":"Veuillez d\'abord ajouter des donn\xe9es"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat d\xe9marr\xe9: {0} par","EndDate":"Chat termin\xe9: {0} par"}}}}'),Ux=JSON.parse('{"SkeletonLoader":{"Loading":"\u05d8\u05d5\u05e2\u05df..."},"CopyClipboard":{"Copied":"\u05d4\u05d5\u05e2\u05ea\u05e7"},"Dialog":{"CanDiscardUnsavedData":"\u05d9\u05e9 \u05dc\u05da \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd \u05dc\u05d0 \u05e9\u05de\u05d5\u05e8\u05d9\u05dd \u05e9\u05d9\u05d0\u05d1\u05d3\u05d5. \u05d4\u05d0\u05dd \u05dc\u05d4\u05de\u05e9\u05d9\u05da?"},"Schema":{"DesignButtonHint":"\u05e2\u05e8\u05d5\u05da \u05d3\u05e3"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Gx=JSON.parse('{"SkeletonLoader":{"Loading":"U\u010ditavanje..."},"CopyClipboard":{"Copied":"Kopirano"},"Dialog":{"CanDiscardUnsavedData":"Imate nespremljene promjene koje \u0107e biti izgubljene. Nastaviti?"},"Placeholder":{"Default":{"Title":"Jo\u0161 ni\u0161ta za prikazati ","Subhead":"Molim prvo dodajte podatke"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Razgovor zapo\u010det: {0} od strane","EndDate":"Razgovor zavr\u0161en: {0} od strane"}}}}'),zx=JSON.parse('{"SkeletonLoader":{"Loading":"Bet\xf6lt\xe9s..."},"CopyClipboard":{"Copied":"M\xe1solva"},"Dialog":{"CanDiscardUnsavedData":"Vannak nem mentett m\xf3dos\xedt\xe1sai, amelyek elvesznek. Folytatni?"},"Placeholder":{"Default":{"Title":"M\xe9g nincs mit mutatni","Subhead":"K\xe9rj\xfck, el\u0151sz\xf6r adja meg az adatokat"}},"ChatSettings":{"History":{"Captions":{"StartDate":"A cseveg\xe9s kezdete: {0}","EndDate":"A cseveg\xe9s befejez\u0151d\xf6tt: {0}"}}}}'),Hx=JSON.parse('{"SkeletonLoader":{"Loading":"Memuat..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Zx=JSON.parse('{"SkeletonLoader":{"Loading":"In caricamento..."},"CopyClipboard":{"Copied":"Copiato"},"Dialog":{"CanDiscardUnsavedData":"Hai delle modifiche non salvate che andranno perse. Continuare?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Niente da mostrare ancora ","Subhead":"Si prega di aggiungere i dati prima"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat iniziata: {0} da","EndDate":"Chat completata: {0} da"}}}}'),qx=JSON.parse('{"SkeletonLoader":{"Loading":"\u8aad\u307f\u8fbc\u307f\u4e2d.."},"CopyClipboard":{"Copied":"\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f"},"Dialog":{"CanDiscardUnsavedData":"\u4fdd\u5b58\u3057\u3066\u3044\u306a\u3044\u5909\u66f4\u306f\u5931\u308f\u308c\u307e\u3059\u3002\u7d9a\u884c\u3057\u307e\u3059\u304b\uff1f"},"Schema":{"DesignButtonHint":"\u30da\u30fc\u30b8\u7de8\u96c6"},"Placeholder":{"Default":{"Title":"\u8868\u793a\u3059\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u305b\u3093 ","Subhead":"\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u30c1\u30e3\u30c3\u30c8\u958b\u59cb: {0}","EndDate":"\u30c1\u30e3\u30c3\u30c8\u5b8c\u4e86: {0}"}}}}'),$x=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"}}'),Wx=JSON.parse('{"SkeletonLoader":{"Loading":"\ub85c\ub4dc \uc911..."},"CopyClipboard":{"Copied":"\ubcf5\uc0ac\ub428"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"\uc544\uc9c1 \ubcf4\uc5ec\uc904 \uac74 \uc5c6\uc5b4\uc694 ","Subhead":"\uba3c\uc800 \ub370\uc774\ud130\ub97c \ucd94\uac00\ud558\uc2ed\uc2dc\uc624"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\ucc44\ud305 \uc2dc\uc791: {0}","EndDate":"\ucc44\ud305 \uc644\ub8cc: {0} "}}}}'),Yx=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Qx=JSON.parse('{"SkeletonLoader":{"Loading":"Laden..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),Jx=JSON.parse('{"SkeletonLoader":{"Loading":"Laster..."},"CopyClipboard":{"Copied":"Kopiert"},"Dialog":{"CanDiscardUnsavedData":"Du har ulagrede endringer som vil g\xe5 tapt. Vil du fortsette?"},"Schema":{"DesignButtonHint":"Edit page"}}'),Kx=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"}}'),Xx=JSON.parse('{"SkeletonLoader":{"Loading":"\u0141adowanie..."},"CopyClipboard":{"Copied":"Skopiowano"},"Dialog":{"CanDiscardUnsavedData":"Masz niezapisane zmiany, kt\xf3re zostan\u0105 utracone. Kontynuowa\u0107?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nie ma jeszcze nic do wy\u015bwietlenia ","Subhead":"Prosz\u0119 najpierw doda\u0107 dane"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Rozpocz\u0119to czat: {0} przez","EndDate":"Czat zako\u0144czony: {0} przez"}}}}'),eE=JSON.parse('{"SkeletonLoader":{"Loading":"Carregando..."},"CopyClipboard":{"Copied":"Copiado"},"Dialog":{"CanDiscardUnsavedData":"Suas altera\xe7\xf5es n\xe3o salvas ser\xe3o perdidas. Continuar?"},"Schema":{"DesignButtonHint":"Editar a p\xe1gina"},"Placeholder":{"Default":{"Title":"Nada a ser exibido ainda ","Subhead":"Favor, adicionar primeiro os dados"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat iniciado: {0} por","EndDate":"Chat conclu\xeddo: {0} por"}}}}'),tE=JSON.parse('{"SkeletonLoader":{"Loading":"Carregando..."},"CopyClipboard":{"Copied":"Copiado"},"Dialog":{"CanDiscardUnsavedData":"Todas as altera\xe7\xf5es n\xe3o gravadas ser\xe3o perdidas. Prosseguir?"},"Schema":{"DesignButtonHint":"Editar pagina"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),nE=JSON.parse('{"SkeletonLoader":{"Loading":"Incarcare..."},"CopyClipboard":{"Copied":"Copiat"},"Dialog":{"CanDiscardUnsavedData":"Ave\u021bi modific\u0103ri nesalvate care vor fi pierdute. Continua\u021bi?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nimic de afi\u0219at \xeenc\u0103 ","Subhead":"V\u0103 rug\u0103m s\u0103 ad\u0103uga\u021bi mai \xeent\xe2i date"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat \xeenceput: {0} de","EndDate":"Chat completat: {0} de"}}}}'),iE=JSON.parse('{"SkeletonLoader":{"Loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},"CopyClipboard":{"Copied":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"},"Dialog":{"CanDiscardUnsavedData":"\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0442\u0435\u0440\u044f\u043d\u044b. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?"},"Placeholder":{"Default":{"Title":"\u0417\u0434\u0435\u0441\u044c \u0435\u0449\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442","Subhead":"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u0439\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u0443"}},"History":{"Captions":{"StartDate":"\u0427\u0430\u0442 \u043d\u0430\u0447\u0430\u0442: {0}, ","EndDate":"\u0427\u0430\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d: {0}, "}}}'),aE=JSON.parse('{"SkeletonLoader":{"Loading":"Duke u ngarkuar..."},"CopyClipboard":{"Copied":"Kopjo"},"Dialog":{"CanDiscardUnsavedData":"Ti ke ndryshime t\xeb paruajtura q\xeb do t\xeb humbasin. Vazhdo?"},"Schema":{"DesignButtonHint":"Modifiko faqen"},"Placeholder":{"Default":{"Title":"Ende asgj\xeb p\xebr t\xeb treguar ","Subhead":"Ju lutem shtoni s\xeb pari t\xeb dh\xebnat"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),rE=JSON.parse('{"SkeletonLoader":{"Loading":"Laddar..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),sE=JSON.parse('{"SkeletonLoader":{"Loading":"\u0e01\u0e32\u0e23\u0e42\u0e2b\u0e25\u0e14..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e01\u0e49\u0e44\u0e02"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),oE=JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),lE=JSON.parse('{"SkeletonLoader":{"Loading":"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."},"CopyClipboard":{"Copied":"\u0421\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u043e"},"Dialog":{"CanDiscardUnsavedData":"\u0423 \u0432\u0430\u0441 \u0454 \u043d\u0435\u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0456 \u0437\u043c\u0456\u043d\u0438, \u044f\u043a\u0456 \u0431\u0443\u0434\u0443\u0442\u044c \u0432\u0442\u0440\u0430\u0447\u0435\u043d\u0456. \u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438?"},"Schema":{"DesignButtonHint":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443"},"Placeholder":{"Default":{"Title":"\u041d\u0435\u043c\u0430\u0454 \u0449\u043e \u043f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438 ","Subhead":"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u0434\u043e\u0434\u0430\u0439\u0442\u0435 \u0434\u0430\u043d\u0456"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u0427\u0430\u0442 \u0440\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u043e: {0} ","EndDate":"\u0427\u0430\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e: {0} "}}}}'),cE=JSON.parse('{"SkeletonLoader":{"Loading":"\u0110ang t\u1ea3i..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),mE={"hr-HR":Gx,"hu-HU":zx,"zh-CN":JSON.parse('{"SkeletonLoader":{"Loading":"\u52a0\u8f7d\u4e2d..."},"CopyClipboard":{"Copied":"\u5df2\u590d\u5236"},"Dialog":{"CanDiscardUnsavedData":"\u60a8\u6709\u672a\u4fdd\u5b58\u7684\u66f4\u6539\u5c06\u4f1a\u4e22\u5931\u3002\u662f\u5426\u7ee7\u7eed\uff1f"},"Schema":{"DesignButtonHint":"\u7f16\u8f91\u9875"},"Placeholder":{"Default":{"Title":"\u8fd8\u6ca1\u6709\u8981\u663e\u793a\u7684\u5185\u5bb9 ","Subhead":"\u8bf7\u5148\u6dfb\u52a0\u6570\u636e"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),"uk-UA":lE,"sq-AL":aE,"en-GB":Vx,"bg-BG":Rx,"zh-TW":JSON.parse('{"SkeletonLoader":{"Loading":"\u52a0\u8f7d\u4e2d..."},"CopyClipboard":{"Copied":"\u5df2\u590d\u5236"},"Dialog":{"CanDiscardUnsavedData":"\u60a8\u6709\u672a\u4fdd\u5b58\u7684\u66f4\u6539\u5c06\u4f1a\u4e22\u5931\u3002\u662f\u5426\u7ee7\u7eed\uff1f"},"Schema":{"DesignButtonHint":"Edit page"},"Placeholder":{"Default":{"Title":"\u8fd8\u6ca1\u6709\u8981\u663e\u793a\u7684\u5185\u5bb9 ","Subhead":"\u8bf7\u5148\u6dfb\u52a0\u6570\u636e"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}}}'),"no-NO":Jx,"ko-KR":Wx,"ja-JP":qx,"fr-CA":jx,zh:JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Dialog":{"CanDiscardUnsavedData":"You have unsaved changes that will be lost. Continue?"}}'),"vi-VN":cE,"tr-TR":oE,"th-TH":sE,"sv-SE":rE,"ro-RO":nE,"pt-PT":tE,"pt-BR":eE,"pl-PL":Xx,no:Kx,"nl-NL":Qx,"lv-LV":Yx,"kk-KZ":$x,"it-IT":Zx,"id-ID":Hx,"he-IL":Ux,"fr-FR":Bx,"fa-IR":Ox,"es-ES":Lx,"de-DE":Nx,"cs-CZ":kx,"ar-SA":Ax,"en-US":Fx,"ru-RU":iE};class hE{static init(e){const{injector:t,tag:i,component:r}=e;if(customElements.get(i))return;const s=(0,zS.createCustomElement)(r,{injector:t});customElements.define(i,s)}}class ud{constructor(e){this.injector=e;const t={injector:this.injector,tag:"crt-web-element-skeleton-loader",component:cd};hE.init(t)}}ud.\u0275fac=function(e){return new(e||ud)(n.\u0275\u0275inject(n.Injector))},ud.\u0275mod=n.\u0275\u0275defineNgModule({type:ud}),ud.\u0275inj=n.\u0275\u0275defineInjector({imports:[Rb.hx,Rt.forRoot({i18n:mE})]});var kb=f(25407);function gE(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"mat-icon",7),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("width",t.iconConfig.width)("height",t.iconConfig.height)("padding",t.iconConfig.padding),n.\u0275\u0275property("svgIcon",t.iconConfig.icon)}}function fE(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",8)(1,"ng-lottie",9),n.\u0275\u0275listener("animationCreated",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onAnimationCreated(r))})("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onAnimationClick())}),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("options",t.animationConfig)("width",t.animationConfig.width)("height",t.animationConfig.height)}}function _E(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",10),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,t.title))}}function yE(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,t.subhead))}}let jt=class{get animationConfig(){return this._image}get iconConfig(){return this._image}get withCustomSize(){return"icon"===this._image?.type?Boolean(this._image.height||this._image.width):"animation"===this._image?.type&&Boolean(this._image?.height||this._image?.width)}set image(e){this._imageConfigChanging$.next(),this._normalizeImage(e).pipe((0,I.b)(t=>this._image=t),(0,I.b)(()=>this._changeDetectorRef.markForCheck()),(0,u.takeUntil)((0,u.merge)(this._imageConfigChanging$,this._destroyed$))).subscribe()}get image(){return this._image}_normalizeImage(e){if(!e||(0,O.Z)(e))return(0,u.of)({});if("icon"===e.type)return(0,u.of)({...this._defaultIconConfig,...e});const i="name"in e&&!("animationData"in e);return"animation"===e?.type&&i?this._fetchAnimation(e):(0,u.of)({...this._defaultAnimationConfig,...e})}_fetchAnimation(e){return(0,u.from)(f(61748)(`./${e?.name}.json`)).pipe((0,h.U)(t=>({...this._defaultAnimationConfig,...e,animationData:t?.default})))}constructor(e){this._changeDetectorRef=e,this._destroyed$=new u.Subject,this._imageConfigChanging$=new u.Subject,this._defaultIconConfig={type:"icon",width:"100px",height:"100px",padding:"25px"},this._defaultAnimationConfig={type:"animation",width:"100px",height:"100px",name:"raccoon",autoplay:!0,loop:!1},this._image={},this.title="Placeholder.Default.Title",this.subhead="Placeholder.Default.Subhead",this.image=this._defaultAnimationConfig}onAnimationCreated(e){this._animationItem=e}onAnimationClick(){this._animationItem?.stop(),this._animationItem?.play()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}};jt.\u0275fac=function(e){return new(e||jt)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},jt.\u0275cmp=n.\u0275\u0275defineComponent({type:jt,selectors:[["crt-placeholder"]],inputs:{loading:"loading",title:"title",subhead:"subhead",image:"image"},decls:6,vars:7,consts:[[1,"crt-placeholder"],[3,"ngSwitch"],["class","crt-placeholder__icon",4,"ngSwitchCase"],["class","crt-placeholder__animation",4,"ngSwitchCase"],["class","crt-placeholder__title",4,"ngIf"],["class","crt-placeholder__subhead",4,"ngIf"],[1,"crt-placeholder__icon"],[1,"icon",3,"svgIcon"],[1,"crt-placeholder__animation"],[3,"options","width","height","animationCreated","click"],[1,"crt-placeholder__title"],[1,"crt-placeholder__subhead"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementContainerStart(1,1),n.\u0275\u0275template(2,gE,2,7,"div",2),n.\u0275\u0275template(3,fE,2,3,"div",3),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(4,_E,3,3,"div",4),n.\u0275\u0275template(5,yE,3,3,"div",5),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275classProp("crt-placeholder\u2013with-custom-size",t.withCustomSize),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",t.image.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","icon"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","animation"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.title),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.subhead))},dependencies:[y.NgIf,y.NgSwitch,y.NgSwitchCase,A.Hw,kb.e$,w.X$],styles:['@charset "UTF-8";.crt-placeholder[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;border-radius:8px;flex-direction:column;padding:0 24px;box-sizing:border-box;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.crt-placeholder[_ngcontent-%COMP%]:not(.crt-placeholder\\2013with-custom-size)   .icon[_ngcontent-%COMP%]{height:100%;max-height:50px;width:56px}.crt-placeholder__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{align-self:center;overflow:hidden;box-sizing:border-box;display:flex;align-items:center;justify-content:center}@supports (background: -webkit-named-image(i)){.crt-placeholder__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block}}.crt-placeholder__animation[_ngcontent-%COMP%] + div[_ngcontent-%COMP%], .crt-placeholder__icon[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:8px}.crt-placeholder__title[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:16px}.crt-placeholder__title[_ngcontent-%COMP%], .crt-placeholder__subhead[_ngcontent-%COMP%]{white-space:pre-wrap;text-align:center}@supports (background: -webkit-named-image(i)){.crt-placeholder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:initial;height:initial}}'],changeDetection:0}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Boolean)],jt.prototype,"loading",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],jt.prototype,"title",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],jt.prototype,"subhead",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object),(0,m.w6)("design:paramtypes",[Object])],jt.prototype,"image",null),jt=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.Placeholder",reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,m.w6)("design:paramtypes",[n.ChangeDetectorRef])],jt);var CE=f(63052),SE=f.n(CE);let Qa=class{constructor(e){this._iconRegistry=e,this._iconRegistry.addIcons([{name:"empty-search-result",icon:f(35828)}])}};Qa.\u0275fac=function(e){return new(e||Qa)(n.\u0275\u0275inject(rn))},Qa.\u0275mod=n.\u0275\u0275defineNgModule({type:Qa}),Qa.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,A.Ps,kb.CT.forRoot({player:()=>SE()}),w.aw]}),Qa=(0,m.gn)([(0,l.CrtModule)({viewElements:[jt]}),(0,m.w6)("design:paramtypes",[rn])],Qa);var dd=f(25057),bE=f(74499);class Wh extends dd.qi{constructor(){super(...arguments),this.root=this.locatorFor(".crt-placeholder"),this.title=this.locatorFor(".crt-placeholder__title"),this.subhead=this.locatorFor(".crt-placeholder__subhead"),this.animation=this.locatorFor(".crt-placeholder__animation ng-lottie > div")}static with(e){return new dd.oD(Wh,e)}isVisible(){return this.host().then(()=>!0).catch(()=>!1)}getTitle(){var e=this;return(0,_.Z)(function*(){return(yield e.title()).text()})()}getSubhead(){var e=this;return(0,_.Z)(function*(){return(yield e.subhead()).text()})()}isTitleVisible(){return this.title().then(()=>!0).catch(()=>!1)}isSubheadVisible(){return this.subhead().then(()=>!0).catch(()=>!1)}hasAnimation(){return this.animation().then(()=>!0).catch(()=>!1)}getAnimationSize(){var e=this;return(0,_.Z)(function*(){const t=yield e.animation();return{width:yield t.getCssValue("width"),height:yield t.getCssValue("height")}})()}getIconBox(){var e=this;return(0,_.Z)(function*(){const i=yield(yield e.getHarness(bE.tj)).host();return{width:yield i.getCssValue("width"),height:yield i.getCssValue("height"),padding:yield i.getCssValue("padding")}})()}}Wh.hostSelector="crt-placeholder";class Nb extends dd.qi{isVisible(){var e=this;return(0,_.Z)(function*(){return e.host().then(()=>!0).catch(()=>!1)})()}}Nb.hostSelector="crt-skeleton-loader";class vE extends dd.qi{constructor(){super(...arguments),this.inputPlaceholder=this.locatorFor("span.mat-form-field-label-wrapper label.mat-form-field-label span")}getSkeletonLoaderLocator(){return this.locatorFor(Nb)}getPlaceholderLocator(){return this.locatorFor(Wh)}focus(){var e=this;return(0,_.Z)(function*(){return(yield e.host()).focus()})()}blur(){var e=this;return(0,_.Z)(function*(){return(yield e.host()).blur()})()}click(){var e=this;return(0,_.Z)(function*(){return(yield e.host()).click()})()}doubleClick(e){var t=this;return(0,_.Z)(function*(){return(yield t.host()).dispatchEvent("dblclick",e)})()}isSkeletonLoaderVisible(){var e=this;return(0,_.Z)(function*(){try{return(yield e.getSkeletonLoaderLocator()()).isVisible()}catch{return!1}})()}isPlaceholderVisible(){var e=this;return(0,_.Z)(function*(){try{return(yield e.getPlaceholderLocator()()).isVisible()}catch{return!1}})()}getInputPlaceholder(){var e=this;return(0,_.Z)(function*(){const t=yield e.inputPlaceholder();return t?t.text():null})()}}class pd{}pd.\u0275fac=function(e){return new(e||pd)},pd.\u0275mod=n.\u0275\u0275defineNgModule({type:pd}),pd.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,z.x4,ce.D8]});const IE=["inputElement"];function DE(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"span",6),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(),o=n.\u0275\u0275reference(2);return n.\u0275\u0275resetView(s.onInputElementSelectClick(r,o))}),n.\u0275\u0275elementEnd()}}function ME(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",7)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t.name),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.name)}}class md{constructor(e,t,i){this.ngControl=e,this.autofillMonitor=t,this.focusMonitor=i,this.inputElementValue=new u.BehaviorSubject(""),this.destroy=new u.Subject,this.inputElementSelected=new n.EventEmitter,this.showDropdownArrow=!1,this.stateChanges=new u.Subject,this.inputElements=[],this.inputElements$=new u.BehaviorSubject([]),this.autofilled=!1,this.onTouched=()=>{},e&&(this.ngControl.valueAccessor=this)}set inputElementsInfo(e){this.inputElementsInfoValue={...e},e&&e.inputElements&&this.initInputElementControl()}get inputElementsInfo(){return this.inputElementsInfoValue}get disabled(){return this.disabledElementValue}set disabled(e){this.disabledElementValue=(0,Ii.Ig)(e),this.stateChanges.next()}get placeholder(){return this.elementPlaceholderValue}set placeholder(e){this.elementPlaceholderValue=this.originalPlaceholder=e,this.stateChanges.next()}get required(){return this.requiredElementValue}set required(e){this.requiredElementValue=(0,Ii.Ig)(e),this.stateChanges.next()}get value(){return this.inputElementActually}set value(e){switch(this.inputElementValue.next(e),this.stateChanges.next(),!0){case this.inputElements.some(t=>t.name===e):this.inputElementActually=e,this.onInputElementSelected();break;case""===e:this.elementPlaceholderValue=this.originalPlaceholder;break;default:this.elementPlaceholderValue=""}}get empty(){return!(this.autofilled||this.value&&0!==this.value.length)}get focused(){return this.focusedElementValue}set focused(e){this.focusedElementValue=e,this.stateChanges.next()}filterInputElementsValues(e){e?this.inputElements$.next(this.inputElements.filter(t=>t.name.toLowerCase().startsWith(e.toLowerCase()))):this.inputElements$.next(this.inputElements.slice())}initInputElementControl(){this.inputElementsInfoValue.inputElements=Object.entries(this.inputElementsInfoValue.inputElements).map(([e,t])=>({id:e,name:t})),this.prepareInputElementsList(this.inputElementsInfoValue),this.inputElements=this.inputElementsInfoValue.inputElements,this.inputElementValue.pipe((0,ze.O)("")).subscribe(e=>{this.filterInputElementsValues(e)})}prepareInputElementsList(e){if(e.inputElements.sort((t,i)=>t.name.localeCompare(i.name)),e.defaultInputElementId){const t=e.inputElements.find(i=>i.id===e.defaultInputElementId);e.inputElements.splice(e.inputElements.indexOf(t),1),e.inputElements.unshift(t)}}ngDoCheck(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())}writeValue(e){this.inputElementValue.next(e)}registerOnChange(e){this.inputElementValue.pipe((0,L.R)(this.destroy)).subscribe(t=>{e(t)})}registerOnTouched(e){this.onTouched=e}setDescribedByIds(e){}onContainerClick(e){"input"!==e.target.tagName.toLowerCase()&&this.focusMonitor.focusVia(this.inputElElementRef.nativeElement,"mouse")}ngAfterViewInit(){this.focusMonitor.monitor(this.inputElElementRef.nativeElement,!0).subscribe(e=>{this.focused=!!e,!this.focused&&this.inputElementValue.value&&this.onInputElementSelected()}),this.autofillMonitor.monitor(this.inputElElementRef).pipe((0,h.U)(e=>e.isAutofilled),(0,we.P)(e=>e),(0,ze.O)(!1),(0,L.R)(this.destroy)).subscribe(e=>this.autofilled=e)}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}onInputElementSelected(){this.ngControl.control.markAsTouched();const e=this.inputElements.find(t=>t.name===this.inputElementValue.value);e?this.inputElementSelected.emit(e.id):this.inputElementSelected.emit("")}onInputElementSelectClick(e,t){e.stopPropagation(),t.panelOpen?t.closePanel():t.openPanel()}}md.\u0275fac=function(e){return new(e||md)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE))},md.\u0275cmp=n.\u0275\u0275defineComponent({type:md,selectors:[["ts-dropdown-input-picker"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(IE,5,n.ElementRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.inputElElementRef=i.first)}},hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("focusout",function(){return t.onTouched()})},inputs:{inputElementsInfo:"inputElementsInfo",showDropdownArrow:"showDropdownArrow",disabled:"disabled",placeholder:"placeholder",required:"required",value:"value"},outputs:{inputElementSelected:"inputElementSelected"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:md}])],decls:8,vars:8,consts:[["matInput","","data-qa","input-role","name","new-role","id","role","autocomplete","new-role",3,"ngModel","placeholder","matAutocomplete","ngModelChange"],["inputElement","","trigger","matAutocompleteTrigger"],["class","arrow-country-icon",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"panelWidth","closed"],["roleAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"arrow-country-icon",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"input",0,1),n.\u0275\u0275listener("ngModelChange",function(r){return t.value=r}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,DE,1,0,"span",2),n.\u0275\u0275elementStart(4,"mat-autocomplete",3,4),n.\u0275\u0275listener("closed",function(){return t.onInputElementSelected()}),n.\u0275\u0275template(6,ME,3,2,"mat-option",5),n.\u0275\u0275pipe(7,"async"),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(5);n.\u0275\u0275property("ngModel",t.value)("placeholder",t.placeholder)("matAutocomplete",i),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.showDropdownArrow),n.\u0275\u0275advance(1),n.\u0275\u0275property("panelWidth",250),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(7,6,t.inputElements$))}},dependencies:[y.NgForOf,y.NgIf,b.Fj,b.JJ,b.On,z.k0,ce.VN,ce.QJ,Xe.CK,y.AsyncPipe],styles:[".mat-option[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{font-family:Open Sans,Regular,sans-serif;font-size:13px}.arrow-country-icon[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojMjg0NTc4O30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzgzLjc3OSA3NC40NTUpIj48cGF0aCBjbGFzcz0iYSIgZD0iTTE3ODcuNzc5LTY3LjQ1NWw0LDQsNC00WiIvPjwvZz48cmVjdCBjbGFzcz0iYiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+PC9zdmc+);width:16px;height:16px;display:inline-block;position:absolute;top:0;right:0;background-repeat:no-repeat;cursor:pointer}.component-wrap[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}"]});var Vb=f(69402);class xi{transform(e){return(0,Vb.decode)(e)}}xi.\u0275fac=function(e){return new(e||xi)},xi.\u0275pipe=n.\u0275\u0275definePipe({name:"decodeHtml",type:xi,pure:!0}),xi.\u0275prov=n.\u0275\u0275defineInjectable({token:xi,factory:xi.\u0275fac,providedIn:"root"});class Ja{transform(e){return(0,Vb.encode)(e)}}Ja.\u0275fac=function(e){return new(e||Ja)},Ja.\u0275pipe=n.\u0275\u0275definePipe({name:"encodeHtml",type:Ja,pure:!0}),Ja.\u0275prov=n.\u0275\u0275defineInjectable({token:Ja,factory:Ja.\u0275fac,providedIn:"root"});class hd{}hd.\u0275fac=function(e){return new(e||hd)},hd.\u0275mod=n.\u0275\u0275defineNgModule({type:hd}),hd.\u0275inj=n.\u0275\u0275defineInjector({});class gd{}gd.\u0275fac=function(e){return new(e||gd)},gd.\u0275mod=n.\u0275\u0275defineNgModule({type:gd}),gd.\u0275inj=n.\u0275\u0275defineInjector({});var b_=f(62549);class fd{}function wE(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.title)}}function xE(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.description)}}fd.\u0275fac=function(e){return new(e||fd)},fd.\u0275mod=n.\u0275\u0275defineNgModule({type:fd}),fd.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,b.UX,b_.Wd]});class _d extends ut{set default(e){this.value=e}get default(){return this.value}constructor(e,t,i){super(e,t,i),this.controlType="crt-slide-toggle",this.useDefaultWidth=!1,this.labelPosition="before",this.toggleChange=new n.EventEmitter}valueChanged(e){this.innerValue=e.checked,this.toggleChange.emit(e)}}_d.\u0275fac=function(e){return new(e||_d)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE))},_d.\u0275cmp=n.\u0275\u0275defineComponent({type:_d,selectors:[["crt-slide-toggle"]],inputs:{title:"title",description:"description",useDefaultWidth:"useDefaultWidth",labelPosition:"labelPosition",default:"default"},outputs:{toggleChange:"toggleChange"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:_d}]),n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:7,consts:[[1,"slide-wrapper",3,"disabled","checked","labelPosition","change"],["input",""],[1,"slide-content"],["class","slide-title",4,"ngIf"],["class","slide-description",4,"ngIf"],[1,"slide-title"],[1,"slide-description"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"mat-slide-toggle",0,1),n.\u0275\u0275listener("change",function(r){return t.valueChanged(r)}),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275template(3,wE,2,1,"div",3),n.\u0275\u0275template(4,xE,2,1,"div",4),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275classProp("slide-toggle-default-width",t.useDefaultWidth),n.\u0275\u0275property("disabled",t.disabled)("checked",t.innerValue)("labelPosition",t.labelPosition),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.title),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.description))},dependencies:[y.NgIf,b_.iZ],styles:[".slide-wrapper.slide-toggle-default-width{width:400px}.slide-wrapper.mat-slide-toggle .mat-slide-toggle-label{justify-content:space-between}.slide-wrapper.mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:red}.slide-wrapper.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#fff}.slide-wrapper.mat-slide-toggle .mat-slide-toggle-bar{height:22px;border-radius:22px}.slide-wrapper.mat-slide-toggle .mat-slide-toggle-thumb-container{margin:auto 0;top:0;bottom:0}.slide-wrapper .slide-title{white-space:break-spaces}\n"],encapsulation:2});class Ka{constructor(e){this._navigator=e}copyToBuffer(e){var t=this;return(0,_.Z)(function*(){const i=e.map(({data:r,mimeType:s})=>{const o=new Blob([r],{type:s});return new ClipboardItem({[s]:o})});yield t._navigator.clipboard.write(i)})()}}Ka.\u0275fac=function(e){return new(e||Ka)(n.\u0275\u0275inject(Yf))},Ka.\u0275prov=n.\u0275\u0275defineInjectable({token:Ka,factory:Ka.\u0275fac});class yd{}class Xa{constructor(e,t){this._copyClipboardService=e,this._notifyService=t}copyToBuffer(e){var t=this;return(0,_.Z)(function*(){yield t._copyClipboardService.copyToBuffer(e),yield t._notifyService.show({message:"CopyClipboard.Copied"})})()}}Xa.\u0275fac=function(e){return new(e||Xa)(n.\u0275\u0275inject(yd),n.\u0275\u0275inject(Ot))},Xa.\u0275prov=n.\u0275\u0275defineInjectable({token:Xa,factory:Xa.\u0275fac,providedIn:"root"});class er{constructor(e){this._document=e}copyToBuffer(e){var t=this;return(0,_.Z)(function*(){try{const i=r=>{e.forEach(s=>r.clipboardData.setData(s.mimeType,s.data)),r.preventDefault()};t._document.addEventListener("copy",i),t._document.execCommand("copy"),t._document.removeEventListener("copy",i)}catch{}})()}}er.\u0275fac=function(e){return new(e||er)(n.\u0275\u0275inject(y.DOCUMENT))},er.\u0275prov=n.\u0275\u0275defineInjectable({token:er,factory:er.\u0275fac,providedIn:"root"});const v_=new n.InjectionToken("A copy clipboard factory"),EE=bn.create({token:v_,mappings:[{predicate:a=>!a.clipboard,injectable:er}],default:{injectable:Ka}});class Cd{}Cd.\u0275fac=function(e){return new(e||Cd)},Cd.\u0275mod=n.\u0275\u0275defineNgModule({type:Cd}),Cd.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ka,er,Xa,EE],imports:[qa]});const TE={tab:"Tab",capslock:"CapsLock",shift:"Shift",meta:"Meta",alt:"Alt",ctrl:"Control",space:" ",spacebar:" ",escape:"Escape",esc:"Escape",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",copy:[{ctrlKey:!0,code:"KeyC"},{metaKey:!0,code:"KeyC"}],save:[{ctrlKey:!0,code:"KeyS"},{metaKey:!0,code:"KeyS"}],create:[{shiftKey:!0,code:"Enter"}],delete:[{shiftKey:!0,code:"Delete"}],pureEnter:[{altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1,code:"Enter"}],pureDelete:[{altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1,code:"Delete"}],character:[{key:/^.$/,altKey:!1,ctrlKey:!1,metaKey:!1}],return:"Enter",del:"Delete",command:"Meta",option:"Alt",enter:"Enter",backspace:"Backspace",ins:"Insert",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",contextmenu:"ContextMenu",numlock:"Clear"};function AE(a){return(Array.isArray(a)?a:[a]).map(t=>function RE(a){if("string"==typeof a)return a.trim().split("+");throw new Error(`Keyboard hotkeys sequence "${a}" not supporting`)}(t)).filter(t=>null!=t)}function NE(a,e){return Object.entries(e).filter(([,t])=>AE(t.sequence).some(r=>r.map(s=>function kE(a){switch(a){case"shift":return[{shiftKey:!0}];case"meta":case"command":return[{metaKey:!0}];case"alt":return[{altKey:!0}];case"ctrl":return[{ctrlKey:!0}]}const e=TE[a];let t=[{key:a}];return Array.isArray(e)&&(t=[...t,...e]),"object"==typeof e&&(t=[...t,e]),"string"==typeof e&&(t=[...t,{key:e}]),t}(s)).every(s=>function PE(a,e){return a.some(t=>Object.entries(t).every(([i,r])=>{const s=e[i];return r instanceof RegExp?r.test(s):s===r}))}(s,a)))).map(([t])=>t)}class Yh{constructor(){this.crtKeyboardHotkeyPressed=new n.EventEmitter}_onKeydown(e){NE(e,this.crtKeyboardHotkeys.keydown).forEach(i=>this.crtKeyboardHotkeyPressed.emit({action:i,event:e}))}}Yh.\u0275fac=function(e){return new(e||Yh)},Yh.\u0275dir=n.\u0275\u0275defineDirective({type:Yh,selectors:[["","crtKeyboardHotkeys",""]],hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("keydown",function(r){return t._onKeydown(r)})},inputs:{crtKeyboardHotkeys:"crtKeyboardHotkeys"},outputs:{crtKeyboardHotkeyPressed:"crtKeyboardHotkeyPressed"}});class Sd{}Sd.\u0275fac=function(e){return new(e||Sd)},Sd.\u0275mod=n.\u0275\u0275defineNgModule({type:Sd}),Sd.\u0275inj=n.\u0275\u0275defineInjector({});class bd{}bd.\u0275fac=function(e){return new(e||bd)},bd.\u0275mod=n.\u0275\u0275defineNgModule({type:bd}),bd.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});class Qh{get inLines(){return this._inLines}set inLines(e){this._inLines=e}get inUnits(){return this._inUnits}set inUnits(e){this._inUnits=e}constructor(e,t){this._elRef=e,this._translateService=t,this._fontScale=1.2,this._linesDefault=5,this._paddingTop=8,this._attributeName="oldHeight",this._wrapperClassName="read-more-wrapper",this._blockquoteSelectors=["blockquote","blockquote.gmail_quote","div#appendonsend","div#divRplyFwdMsg",'[id*="yahoo_quoted_"]','div[name="quote"]','blockquote[id*="quote_zmail"]'],this._readMoreButtonClicked$=new u.Subject,this._destroyed$=new u.Subject,this.fitToBlockquote=!1}_isNeedToShowButton(){if(this._nativeElement.querySelector(".read-more-button"))return!1;let e=0;return this.inLines&&(e=this._calculateLinesHeightInPx()),this.inUnits&&(e=parseInt(this.inUnits)||0),e>0&&this._nativeElementHeight>e}_calculateLinesHeightInPx(){let e=0;const t=window.getComputedStyle(this._nativeElement),i=t.getPropertyValue("line-height");return e="normal"===i?parseInt(t.getPropertyValue("font-size"))*this._fontScale:parseInt(i)||0,e*(this.inLines+1)+this._paddingTop}_onReadMoreClick(e){this._readMoreButtonClicked$.next(!0),this._nativeElement.classList.remove(this._wrapperClassName);const t=this._nativeElement.getAttribute(this._attributeName);t?(this._nativeElement.style.setProperty("height",t),this._nativeElement.removeAttribute(this._attributeName)):this._nativeElement.style.removeProperty("height"),this._nativeElement.removeChild(e.target.parentElement)}_createButton(){const e=document.createElement("div");e.classList.add("read-more-button-wrap");const t=document.createElement("div");return t.innerText=this._translateService.instant("ReadMoreDirective.Label"),t.classList.add("read-more-button"),t.addEventListener("click",this._onReadMoreClick.bind(this)),e.appendChild(t),e}_wrapElement(){this._nativeElement.classList.add(this._wrapperClassName);const e=this._nativeElement.style.getPropertyValue("height");e&&this._nativeElement.setAttribute(this._attributeName,e),this._nativeElement.style.setProperty("height",this._getWrapperHeight())}_getWrapperHeight(){return this.inLines?this._calculateLinesHeightInPx()+"px":this.inUnits}_findBlockquote(){let e=null;for(const t of this._blockquoteSelectors){const i=this._nativeElement.querySelector(t);i&&(null==e||e.innerHTML.length>i.innerHTML.length)&&(e=i)}return e}_blockqouteFit(){const e=this._findBlockquote();if(e){const t=window.getComputedStyle(e),i=parseInt(t.getPropertyValue("margin-top"))||0,r=parseInt(t.getPropertyValue("padding-top"))||0,s=e.offsetTop+i+r+this._paddingTop;this._nativeElement.style.setProperty("height",s+"px")}}_recalculateAfterAllImagesLoaded(){const e=[];this._nativeElement.querySelectorAll("img").forEach(t=>{e.push(new Promise(i=>{t.onload=i}))}),e.length>0&&Promise.all(e).then(this._addButton.bind(this))}_addButton(){this._nativeElementHeight=this._nativeElement.getBoundingClientRect().height,window.requestAnimationFrame(()=>{if(this._nativeElementHeight=0===this._nativeElementHeight?this._nativeElement.getBoundingClientRect().height:this._nativeElementHeight,this._isNeedToShowButton()){const e=this._createButton();this._nativeElement.appendChild(e),this._wrapElement(),this.fitToBlockquote&&this._blockqouteFit()}})}_resizeObservable(e){return new u.Observable(t=>{const i=new S_.Z(r=>{t.next(r)});return i.observe(e),()=>i.unobserve(e)})}ngAfterViewInit(){this._nativeElement=this._elRef?.nativeElement,this._nativeElement&&this._resizeObservable(this._nativeElement).pipe((0,P.h)(e=>e[0]?.contentRect.height>0),(0,L.R)((0,u.merge)(this._destroyed$,this._readMoreButtonClicked$))).subscribe(()=>{!this.inLines&&!this.inUnits&&(this.inLines=this._linesDefault),this._addButton(),this._recalculateAfterAllImagesLoaded()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Qh.\u0275fac=function(e){return new(e||Qh)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(w.sK))},Qh.\u0275dir=n.\u0275\u0275defineDirective({type:Qh,selectors:[["","crtReadMore",""]],inputs:{inLines:"inLines",inUnits:"inUnits",fitToBlockquote:"fitToBlockquote"}});class qo{constructor(e){this._windowStateService=e}_canNotify(e="when-hidden"){var t=this;return(0,_.Z)(function*(){return!(!Notification||"when-hidden"===e&&t._windowStateService.hasFocus)&&("granted"!==Notification.permission&&(yield Notification.requestPermission()),"granted"===Notification.permission)})()}notify(e){var t=this;return(0,_.Z)(function*(){if(!(yield t._canNotify(e.mode)))return;const r=new Notification(e.title);r.onclick=()=>{r.close(),t._windowStateService.focus()}})()}}qo.\u0275fac=function(e){return new(e||qo)(n.\u0275\u0275inject(uo))},qo.\u0275prov=n.\u0275\u0275defineInjectable({token:qo,factory:qo.\u0275fac});class vd{}vd.\u0275fac=function(e){return new(e||vd)},vd.\u0275mod=n.\u0275\u0275defineNgModule({type:vd}),vd.\u0275inj=n.\u0275\u0275defineInjector({providers:[qo]});class Id{}Id.\u0275fac=function(e){return new(e||Id)},Id.\u0275mod=n.\u0275\u0275defineNgModule({type:Id}),Id.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});class Jh{set toggleImageHandlers(e){this._handleAllImages(e)}constructor(e){this._elRef=e}_showFullScreenImage(e){if(0===e.button){const i=e.target,r=document.createElement("div");r.classList.add("full-image-container"),r.style.backgroundImage="url('"+i.src+"')";let s=!1;const o=.8*document.body.clientWidth,c=.8*document.body.clientHeight,d=i.width>=o||i.height>=c,p=i.naturalWidth>=o||i.naturalHeight>=c;(d||p)&&(s=!0),r.style.backgroundSize=s?"80%":"auto",r.addEventListener("click",g=>{r.remove()}),document.body.addEventListener("keydown",g=>{"Escape"===g.key&&r.remove()},{once:!0}),document.body.appendChild(r),e.preventDefault(),e.stopImmediatePropagation()}}_handleAllImages(e){this._elRef?.nativeElement.querySelectorAll("img").forEach(t=>{const i=t.parentElement.getAttribute("href")?.length>1;e?i||t.addEventListener("mousedown",this._showFullScreenImage):t.removeEventListener("mousedown",this._showFullScreenImage),t.style.cursor=e&&!i?"zoom-in":"default"})}ngAfterViewInit(){this._handleAllImages(!0)}}Jh.\u0275fac=function(e){return new(e||Jh)(n.\u0275\u0275directiveInject(n.ElementRef))},Jh.\u0275dir=n.\u0275\u0275defineDirective({type:Jh,selectors:[["","crtFullSizeImage",""]],inputs:{toggleImageHandlers:"toggleImageHandlers"}});class Dd{constructor(e){this._dialogService=e}notify(e){return this._dialogService.openInfoDialog(e)}}Dd.\u0275fac=function(e){return new(e||Dd)(n.\u0275\u0275inject(Ce))},Dd.\u0275prov=n.\u0275\u0275defineInjectable({token:Dd,factory:Dd.\u0275fac});const VE=new n.InjectionToken("Window location object");var Fb=f(14065);const FE=Fb.Z([{value:"ru",caption:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",culture:"ru-RU"},{value:"en",caption:"English",culture:"en-US"},{value:"fr",caption:"Fran\xe7ais",culture:"fr-FR"},{value:"sv",caption:"Svenska",culture:"sv-SE"},{value:"he",caption:"\u05e2\u05d1\u05e8\u05d9\u05ea",culture:"he-IL"},{value:"nl",caption:"Nederlands",culture:"nl-NL"},{value:"es",caption:"Espa\xf1ol",culture:"es-ES"},{value:"th",caption:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",culture:"th-TH"},{value:"cs",caption:"\u010ce\u0161tina",culture:"cs-CZ"},{value:"de",caption:"Deutsch",culture:"de-DE"},{value:"uk",caption:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",culture:"uk-UA"},{value:"id",caption:"Bahasa Indonesia",culture:"id-ID"}],a=>a.value);class Md{constructor(e,t){this.translate=e,this.windowLocation=t,this._supportLanguages=["en","ru","uk","fr","sv","he","nl","es","th","cs","de","id"]}_extractLanguage(){let t=new URLSearchParams(this.windowLocation.search).get("lang");return(0,O.Z)(t)&&(t=this.translate.getBrowserLang()),t}init(){let e=this._extractLanguage();this.translate.setDefaultLang("en"),-1===this._supportLanguages.indexOf(e)&&(e="en"),this.translate.use(e).subscribe({error:()=>{this.translate.use("en")}})}getCulture(){let t=new URLSearchParams(this.windowLocation.search).get("lang");(0,O.Z)(t)&&(t=this.translate.getBrowserCultureLang()),t=t.split("-")[0];const i=FE.find(r=>t===r.value);return i&&i.culture||"en-US"}}Md.\u0275fac=function(e){return new(e||Md)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(VE))},Md.\u0275prov=n.\u0275\u0275defineInjectable({token:Md,factory:Md.\u0275fac,providedIn:"root"});let I_=class extends l.BaseRequestHandler{constructor(e,t){super(),this._copyClipboardService=e,this._notifyService=t}handle(e){var t=this;return(0,_.Z)(function*(){const i=[{mimeType:"text/plain",data:e.value}];yield t._copyClipboardService.copyToBuffer(i),yield t._notifyService.show({message:"CopyClipboard.Copied"}),yield t.next?.handle(e)})()}};I_=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.CopyClipboardRequestHandler",requestType:"crt.CopyClipboardRequest"}),(0,m.w6)("design:paramtypes",[yd,Ot])],I_);var q=f(31177);function wd(a){const e=function OE(a){const e=[];return l.ViewElementRegistry.viewElements.get(a)?.contentSlots?.forEach(i=>{if("string"==typeof i)e.push(i);else{const r=i?.name;e.push(r)}}),e}(a),t=function LE(a){return l.InterfaceDesignerItemRegistry.get(a)?.collectionPropertyNames||["items"]}(a);return[...new Set([...e,...t])]}class ve{static _getViewConfigInfo(e,t,i,r,s){const o=[];if(Array.isArray(i))for(let c=0;c<i.length;c++){const d=i[c];t.includes(d[e])&&o.push({viewConfig:d,parentName:r,index:c,parentPropertyName:s}),wd(d.type)?.forEach(g=>{const C=d[g];if(C){const v=this._getViewConfigInfo(e,t,C,d.name,g);o.push(...v)}})}return o}static _getViewConfigInfoByFilter(e,t,i,r){const s=[];if(Array.isArray(t))for(let o=0;o<t.length;o++){const c=t[o];e(c)&&s.push({viewConfig:c,parentName:i,index:o,parentPropertyName:r}),wd(c.type)?.forEach(p=>{const g=c[p];if(g){const C=this._getViewConfigInfoByFilter(e,g,c.name,p);s.push(...C)}})}return s}static _isViewModelAttributeBound(e,t){if(!t)return!1;const i=e.viewConfig,r=`\\W\\$${t}\\W`;return ve._isAttributeUseInConfig(i,r)}static _isViewModelAttributeBoundInViewModel(e,t){if(!t)return!1;const i=(0,q.Z)(ve.getViewModelConfig(e));i.attributes=i.attributes||{},delete i?.attributes[t];const r=`\\W${t}\\W`;return this._isAttributeUseInConfig(i,r)}static _isAttributeUseInConfig(e,t){const i=JSON.stringify(e);return new RegExp(t).test(i)}static _findViewConfigItem(e,t,i){if(i(t))return e.push(t),!0;const r=wd(t.type);for(const s of r){const o=t[s];if(o)for(const c of o)if(this._findViewConfigItem(e,c,i))return e.push(t),!0}}static _getViewConfigArray(e){return e?Array.isArray(e)?e:[e]:[]}static getViewConfigPathByPropertyValue(e,t,i){const r=[],s=this._getViewConfigArray(i);for(const o of s)if(this._findViewConfigItem(r,o,c=>c[e]===t))break;return r}static getViewConfigInfoByPropertyForValues(e,t,i){const r=[],s=this._getViewConfigArray(i);for(let o=0;o<s.length;o++){const c=s[o];t.includes(c[e])&&r.push({viewConfig:c,index:o}),wd(c.type)?.forEach(p=>{const g=c[p];if(g){const C=ve._getViewConfigInfo(e,t,g,c.name,p);r.push(...C)}})}return r}static getViewConfigInfoByProperty(e,t,i){return ve.getViewConfigInfoByPropertyForValues(e,[t],i)}static getViewConfigInfoByFilter(e,t){const i=[],r=t??[];for(let s=0;s<r.length;s++){const o=r[s];e(o)&&i.push({viewConfig:o,index:s}),wd(o.type)?.forEach(d=>{const p=o[d];if(p){const g=ve._getViewConfigInfoByFilter(e,p,o.name,d);i.push(...g)}})}return i}static getViewModelAttribute(e,t){return ve.getViewModelConfig(e)?.attributes?.[t]}static getViewConfigInfoByName(e,t){return ve.getViewConfigInfoByProperty("name",t,e?.viewConfig)[0]||{}}static getViewModelConfig(e,t=!1){return!e.viewModelConfig&&t&&(e.viewModelConfig={}),e.viewModelConfig||{}}static isViewModelAttributeBound(e,t){return!!t&&(ve._isViewModelAttributeBound(e,t)||ve._isViewModelAttributeBoundInViewModel(e,t))}static addViewModelAttributeChangeRequest(e,t){const{attributeName:i,requests:r,options:s}=t??{};if(!i||!r?.length)return;const o=Boolean(s?.createAttributeIfEmpty),c=ve.getViewModelConfig(e,o);if(!c?.attributes&&!o)return;const d=c.attributes??(c.attributes={});if(!d[i]&&!o)return;const p=d[i]??(d[i]={});p.change??(p.change=[]),Array.isArray(p.change)||(p.change=[p.change]),p.change.push(...r)}}const Lb="BPMCSRF";class xd{constructor(e){this.tokenService=e}intercept(e,t){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||(i.startsWith("http://")||i.startsWith("https://"))&&!i.startsWith(l_().toLowerCase()))return t.handle(e);const r=this.tokenService.getToken();return null!==r&&!e.headers.has(Lb)&&(e=e.clone({headers:e.headers.set(Lb,r)})),t.handle(e)}}xd.\u0275fac=function(e){return new(e||xd)(n.\u0275\u0275inject(D.HttpXsrfTokenExtractor))},xd.\u0275prov=n.\u0275\u0275defineInjectable({token:xd,factory:xd.\u0275fac,providedIn:"root"});const D_={ShortTextCaption:50,MediumTextCaption:250,LongTextCaption:500},Kh={Integer:{max:2147483647,min:-2147483647},Float:{max:69999999999999.99,min:-69999999999999.99}};class Ob{get id(){return this._id}constructor(e,t){this._id=e,this.data=t,this.children=[],this.parent=null}}class jE{get root(){return this._root}constructor(e,t){this._root=new Ob(t,e)}_recurse(e,t){const i=t.children;for(let r=0;i&&r<i.length;r++)this._recurse(e,i[r]);e(t)}traverseDepthFirstSearch(e,t=this._root){this._recurse(e,t)}get(e,t=this._root){let i=null;return this.traverseDepthFirstSearch(s=>{s.id===e&&(i=s)},t),i}add({data:e,id:t},i){const r=new Ob(t,e);i.children.push(r),r.parent=i}remove(e,t=this.root){let i=null;if(this.traverseDepthFirstSearch(s=>{s.id===e&&(i=s)},t),i){const s=i.parent;i.children=[];const o=s.children.findIndex(c=>c===i);return s.children.splice(o,1),!0}return!1}contains(e,t=this._root){let i=null;return this.traverseDepthFirstSearch(s=>{s.id===e&&(i=s)},t),Boolean(i)}}class Ed{constructor(e,t){this.iconRegistry=e,this.domSanitizer=t,Object.keys(It).forEach(i=>{const r=It[i],s=r.name.toLowerCase();this.iconRegistry.addSvgIconLiteral(`page-designer-${s}`,this.domSanitizer.bypassSecurityTrustHtml(r.designerIcon)),r.designerAutonumberIcon&&this.iconRegistry.addSvgIconLiteral(`page-designer-${s}-autonumber`,this.domSanitizer.bypassSecurityTrustHtml(r.designerAutonumberIcon))})}getDesignerDataValueTypeIcon(e,t=!1){const i=It[e];if(!i)throw new Error(`Data value type "${e}" not exists`);const r=i.name.toLowerCase();return t?`page-designer-${r}-autonumber`:`page-designer-${r}`}}function jb(a){return Object.values(It).find(e=>e.name===a)?.type}function zE(a){return a=a||new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate())}function Bb(a){return a=a||new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999)}function Ub(a){if(!a)return null;function e(){throw new Error(`String "${a}" is not a valid serialized date.`)}"string"!=typeof a&&e();const[t,i]=a.split("T");if(i&&("Z"===i[i.length-1]||-1!==i.indexOf("+")||-1!==i.indexOf("-"))){const s=Date.parse(a);return isNaN(s)&&e(),new Date(s)}try{const[s,o,c]=t.split("-"),[d,p,g]=i.split(":"),[C,v]=g.split(".");return new Date(parseInt(s),parseInt(o)-1,parseInt(c),parseInt(d),parseInt(p),parseInt(C),parseInt(v))}catch{e()}}function Gb(a,e){null==e&&(e=0),a.setSeconds(a.getSeconds()+3600*e)}function zb(a,e,t){const i=t||{hour:"2-digit",minute:"2-digit"};return new Intl.DateTimeFormat(e.sysCultureName,i).format(a)}function M_(a){return a.replace(/\.+/g,"").replace(/\[+/g,"").replace(/\]+/g,"").replace(/:+/g,"")}Ed.\u0275fac=function(e){return new(e||Ed)(n.\u0275\u0275inject(A.jv),n.\u0275\u0275inject(k.DomSanitizer))},Ed.\u0275prov=n.\u0275\u0275defineInjectable({token:Ed,factory:Ed.\u0275fac,providedIn:"root"});f(3875);function Hb(a,e,t){return!a||!e||!t}function Zb(a,e){return`/img/entity/hash/${a}/${e}/`}function Xh(a,e="SysImage",t="Data"){if(Hb(a,e,t))return"";const i=Zb(e,t);return`${Au()}${i}${a}`}function w_(a,e){switch(l.ValidationUtilities.checkArgumentEmpty("dataValueType",e),e){case l.DataValueType.Date:case l.DataValueType.Time:case l.DataValueType.DateTime:return Ub(a);default:return a}}function $b(a,e){const t=Wb(a,e);return Object.fromEntries(Object.entries(t).map(([i,r])=>[i,r?.[e]]))}function Wb(a,e){return a&&e?Object.fromEntries(Object.entries(a).map(([t,i])=>[t,i?.[e]]).filter(([,t])=>void 0!==t).map(([t,i])=>[t,{[e]:i}])):{}}function Yb(a){if(!a)return a;const e=JSON.parse(JSON.stringify(a));return Object.fromEntries(Object.entries(e).filter(([,t])=>!(0,O.Z)(t)))}class ln{constructor(e){this.precision=2,Object.assign(this,e)}}class $E{constructor(e={}){this.decimalSeparator=e.decimalSeparator||"",this.thousandSeparator=e.thousandSeparator||""}}class kn{constructor(e){this._userInfo=e,this._digitsInRank=3}_collapseRepeatedChar(e,t){return e.replace(new RegExp(`[\\${t}]{1,}`,"g"),t)}_insertThousandSeparators(e,t){const i=e.split("");for(let r=i.length-this._digitsInRank;r>0;r-=this._digitsInRank)i.splice(r,0,t);return i.join("")}formatNumberValue(e,t=null){if(!(e=parseFloat(e&&e.toString()))||isNaN(e))return"0";let i="";e<0&&(i="-"),t=t||new ln;const r=this.getNumberFormatInfo(),{decimalSeparator:s,thousandSeparator:o}=r,c=e.toFixed(t.precision).split(".");let d=c[0].replace("-","");t.ignoreThousandSeparator||(d=this._insertThousandSeparators(d,o));const p=c.length>1?c[1].replace(/0{1,}$/,""):"";return""!==p?`${i}${d}${s}${p}`:`${i}${d}`}removeFractionalPart(e){const[i]=e.toString().split(".");return i}getNumberFormatInfo(){const e=this._userInfo.cultureInfo;return new $E({decimalSeparator:e.decimalSeparator,thousandSeparator:e.thousandSeparator})}parseStringToNumber(e,t=2){if(!e)return NaN;"string"!=typeof e&&(e=String(e));const i=this.getNumberFormatInfo().decimalSeparator;let r=this.formatStringValue(e);r=r.replace(i,".");const s=parseFloat(r);return Number(s.toFixed(t))}formatStringValue(e){"string"!=typeof e&&(e=String(e));const t=e.match(/^-/)||"",i=this.getNumberFormatInfo().decimalSeparator,r=this._collapseRepeatedChar(e,i),s=new RegExp(`[^0-9\\${i}]+`,"g");return t+r.replace(s,"")}convertNumericStringToExponentialFormat(e,t=2){if(e&&""!==e){const i=parseFloat(e);if(!isNaN(i))return i.toExponential(t)}return""}}function Jb(a,e){const t=Array.isArray(e)?e:e.split(".");let i=a;for(const r of t)if(i instanceof Map)i=i.get(r);else{if(!i||"object"!=typeof i)return;i=i[r]}return i}kn.\u0275fac=function(e){return new(e||kn)(n.\u0275\u0275inject(Q))},kn.\u0275prov=n.\u0275\u0275defineInjectable({token:kn,factory:kn.\u0275fac,providedIn:"root"});function Kb(a){return"string"==typeof a}function tr(a,e){return a.replace(/{[0-9]}/g,t=>{const i=function JE(a){const e=a.substring(1,a.length-1);return parseInt(e,10)}(t);return e[i]?e[i].toString():""})}function Xb(a,e=Mt.Contains){return l.ValidationUtilities.checkArgumentEmpty("columnSelectors",a),(t,i)=>!i||a.some(r=>{const s="string"==typeof r?t[r]:r(t);return!(!s||"string"!=typeof s)&&function eT(a,e,t){const i=a.toLowerCase();switch(t){case Mt.Contains:return i.includes(e);case Mt.StartsWith:return 0===i.indexOf(e);case Mt.Equals:return i===e}}(s,i,e)})}class $o{_buildRequestUrl(e){return this._isAbsoluteUrl(e)?e:y.Location.joinWithSlash(this.getUrl(),e)}_isAbsoluteUrl(e){return/^https?:\/\//i.test(e)}getUrl(){return Au()}intercept(e,t){return e=e.clone({url:this._buildRequestUrl(e.url)}),t.handle(e).pipe((0,G.K)(i=>(console.log(i),(0,u.throwError)(i))))}}$o.\u0275fac=function(e){return new(e||$o)},$o.\u0275prov=n.\u0275\u0275defineInjectable({token:$o,factory:$o.\u0275fac});class nr extends $o{getUrl(){return je()}}nr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(nr)))(t||nr)}}(),nr.\u0275prov=n.\u0275\u0275defineInjectable({token:nr,factory:nr.\u0275fac});let ev=class{constructor(e){this._window=e}intercept(e,t){const i={beforeRequest:function(r){},afterRequest:function(r){},onErrorRequest:function(r,s){}};return Object.assign(i,this._window.RequestLogger||{}),i.beforeRequest(e),t.handle(e).pipe((0,G.K)(r=>{throw i.onErrorRequest(e,r),r}),(0,h.U)(r=>(i.afterRequest(e),r)))}};ev=(0,m.gn)([(0,m.fM)(0,(0,n.Inject)(se)),(0,m.w6)("design:paramtypes",[Window])],ev);let Ei=class{};var Nn,Bt,Ut;Ei.\u0275fac=function(e){return new(e||Ei)},Ei.\u0275mod=n.\u0275\u0275defineNgModule({type:Ei}),Ei.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ke,In,kn,vo,Nt,{provide:s_,useFactory:a=>a.requirejs,deps:[se]},ka,Va,Na,Ci,{provide:c_,useValue:a=>"SchemaManagerItemEventNotifier"===a?.header?.sender&&"ChangedSchema"===a?.header?.bodyTypeName,multi:!0}],imports:[w.aw]}),Ei=(0,m.gn)([(0,l.CrtModule)({requestHandlers:[I_]})],Ei),function(a){a[a.Operator=0]="Operator",a[a.Operand=1]="Operand",a[a.Function=2]="Function"}(Nn||(Nn={})),function(a){a[a.Const=0]="Const",a[a.Column=1]="Column",a[a.SysSetting=2]="SysSetting",a[a.SysVariable=3]="SysVariable"}(Bt||(Bt={})),function(a){a[a.Addition=0]="Addition",a[a.Subtraction=1]="Subtraction",a[a.Multiplication=2]="Multiplication",a[a.Division=3]="Division"}(Ut||(Ut={}));var Gt,Vn;!function(a){a[a.Parentheses=0]="Parentheses",a[a.Arithmetic=1]="Arithmetic",a[a.Relation=2]="Relation",a[a.Ternary=3]="Ternary",a[a.Comma=4]="Comma",a[a.Point=5]="Point"}(Gt||(Gt={})),function(a){a[a.Equal=0]="Equal",a[a.NotEqual=1]="NotEqual",a[a.Less=2]="Less",a[a.LessOrEqual=3]="LessOrEqual",a[a.Greater=4]="Greater",a[a.GreaterOrEqual=5]="GreaterOrEqual"}(Vn||(Vn={}));var Fn;!function(a){a[a.SchemaColumn=0]="SchemaColumn",a[a.SubQuery=1]="SubQuery",a[a.Aggregation=2]="Aggregation"}(Fn||(Fn={}));class tv{static _isSupportedResultDataType(e,t){if(null==e||null==t)return!1;const i=null!=this._supportedDataTypesPriority[e],r=null!=this._supportedDataTypesPriority[t];return i&&r}static _getSupportedResultDataType(e,t){return this._supportedDataTypesPriority[e]>=this._supportedDataTypesPriority[t]?e:t}static getResultDataType(e,t){const i=e?.dataType,r=t?.dataType;return this._isSupportedResultDataType(i,r)?this._getSupportedResultDataType(i,r):null}}tv._supportedDataTypesPriority={[l.DataValueType.Integer]:0,[l.DataValueType.FLOAT1]:1,[l.DataValueType.Float]:2,[l.DataValueType.FLOAT2]:3,[l.DataValueType.Money]:4,[l.DataValueType.FLOAT3]:5,[l.DataValueType.FLOAT4]:6,[l.DataValueType.FLOAT8]:7};class x_{static _getNumericDataType(e){const t=e.indexOf(this.DECIMAL_SEPARATOR);if(-1===t)return l.DataValueType.Integer;const r=e.slice(t+1,e.length).length;return this._getNumericDataTypeByPrecision(r)}static _getNumericDataTypeByPrecision(e){return e>4?l.DataValueType.FLOAT8:4===e?l.DataValueType.FLOAT4:3===e?l.DataValueType.FLOAT3:2===e?l.DataValueType.Float:l.DataValueType.FLOAT1}static getResultDataType(e){return"boolean"==typeof e?l.DataValueType.Boolean:"number"==typeof e?this._getNumericDataType(e.toString()):"string"==typeof e?this.NUMBER_REGEX.test(e)?this._getNumericDataType(e):l.DataValueType.Text:null}}x_.NUMBER_REGEX=/^\d+\.{0,1}\d*$/,x_.DECIMAL_SEPARATOR=".";class E_{constructor(e,t){this.type=e,this.dataType=t}}class iT extends E_{constructor(e,t,i){super(Nn.Function,t),this.code=e,this.arguments=i}get definitionId(){return this.code}accept(e){return e&&e.visitFunctionExpression(this)}}class eg extends E_{constructor(e,t){super(Nn.Operand,t),this.operandType=e}}function nv(a){return a?.columnPath}class iv extends eg{constructor(e,t){super(Bt.Column,t),this.columnPath=e,this.columnOperandType=Fn.SchemaColumn}get definitionId(){return nv(this)}accept(e){return e&&e.visitColumnOperandExpression(this)}}function av(a){const e=nv(a),t=function KE(a){let e=0;if(!Kb(a)||0===a.length)return e;for(let t=0;t<a.length;t++)e=a.charCodeAt(t)+(e<<5)-e,e&=e;return e}(a?.subFilters);return`${e}_${t}`}class rv extends iv{constructor(e,t,i){super(e,t),this.subFilters=i,this.columnOperandType=Fn.SubQuery}get definitionId(){return av(this)}accept(e){return e&&e.visitSubQueryOperandExpression(this)}}class rT extends rv{constructor(e,t,i,r){super(e,t,r),this.aggregationType=i,this.columnOperandType=Fn.Aggregation}get definitionId(){return function aT(a){return`${av(a)}_${a?.aggregationType}`}(this)}accept(e){return e&&e.visitAggregationSubQueryOperandExpression(this)}}class sT extends eg{constructor(e,t){super(Bt.Const,t??x_.getResultDataType(e)),this.value=e}get definitionId(){}accept(e){return e&&e.visitConstOperandExpression(this)}}class oT extends eg{constructor(e,t){super(Bt.SysSetting,t),this.code=e}get definitionId(){return this.code}accept(e){return e&&e.visitSysSettingOperandExpression(this)}}class lT extends eg{constructor(e,t){super(Bt.SysVariable,t),this.name=e}get definitionId(){return this.name}accept(e){return e&&e.visitSysVariableOperandExpression(this)}}class T_ extends E_{constructor(e,t){super(Nn.Operator,t),this.operatorType=e}}class sv extends T_{constructor(e,t,i,r){super(e,t),this.leftExpression=i,this.rightExpression=r}}class cT extends sv{constructor(e,t,i){super(Gt.Arithmetic,tv.getResultDataType(t,i),t,i),this.arithmeticOperatorType=e}get definitionId(){return(a=>{switch(a){case Ut.Addition:return"+";case Ut.Subtraction:return"-";case Ut.Multiplication:return"*";case Ut.Division:return"/";default:throw new Error("Unsupported arithmetic operator type")}})(this.arithmeticOperatorType)}accept(e){return e&&e.visitArithmeticOperatorExpression(this)}}class uT extends T_{constructor(e,t){super(e,t?.dataType),this.expression=t}}class dT extends uT{constructor(e){super(Gt.Parentheses,e)}get definitionId(){}accept(e){return e&&e.visitParenthesesOperatorExpression(this)}}class pT extends sv{constructor(e,t,i){super(Gt.Relation,l.DataValueType.Boolean,t,i),this.relationOperatorType=e}get definitionId(){return(a=>{switch(a){case Vn.Equal:return"==";case Vn.NotEqual:return"!=";case Vn.Greater:return">";case Vn.GreaterOrEqual:return">=";case Vn.Less:return"<";case Vn.LessOrEqual:return"<=";default:throw new Error("Unsupported relation operator type")}})(this.relationOperatorType)}accept(e){return e&&e.visitRelationOperatorExpression(this)}}class mT extends T_{constructor(e,t,i){super(Gt.Ternary,t.dataType),this.condition=e,this.thenExpression=t,this.elseExpression=i}get definitionId(){return"ternary"}accept(e){return e&&e.visitTernaryOperatorExpression(this)}}class tt{constructor(e){this.expressionFactoryMediator=e}getDataType(e){return this.getObjectField(e,"dataType")}getDefinitionId(e){return this.getObjectField(e,"definitionId")}getExpression(e,t,i){const r=this.getObjectField(e,t);return this.expressionFactoryMediator.createExpression(i||"expression",r)}getObjectField(e,t){return e[t]}getEnumValue(e,t){if(null==t||""===t)return null;const i=+t;if(!isNaN(i))return i;const r=Object.entries(e).find(([s])=>s.toLocaleLowerCase()===t.toString().toLocaleLowerCase()&&Object.prototype.hasOwnProperty.call(e,s));return r?r[1]:null}getEnumValueByObject(e,t,i){const r=this.getObjectField(t,i);return this.getEnumValue(e,r)}}class hT extends tt{constructor(e){super(e)}createExpression(e){const t=this.getObjectField(e,"code"),i=this.getDataType(e),s=this.getObjectField(e,"arguments").map(o=>this.expressionFactoryMediator.createExpression("expression",o));return new iT(t,i,s)}}class gT extends tt{constructor(e){super(e)}createExpression(e){const t=this.getDataType(e),i=this.getObjectField(e,"columnPath"),r=this.getObjectField(e,"subFilters"),s=this.getEnumValueByObject(l.AggregationType,e,"aggregationType");return new rT(i,t,s,r)}}class fT extends tt{constructor(e){super(e)}createExpression(e){switch(this.getEnumValueByObject(Fn,e,"columnOperandType")){case Fn.Aggregation:return this.expressionFactoryMediator.createExpression("aggregationSubQueryOperandExpression",e);case Fn.SubQuery:return this.expressionFactoryMediator.createExpression("subQueryOperandExpression",e);case Fn.SchemaColumn:default:return this.expressionFactoryMediator.createExpression("schemaColumnOperandExpression",e)}}}class _T extends tt{constructor(e){super(e)}createExpression(e){const t=this.getObjectField(e,"value"),i=this.getDataType(e);return new sT(t,i)}}class yT extends tt{constructor(e){super(e)}createExpression(e){switch(this.getEnumValueByObject(Bt,e,"operandType")){case Bt.Column:return this.expressionFactoryMediator.createExpression("columnOperandExpression",e);case Bt.Const:return this.expressionFactoryMediator.createExpression("constantOperandExpression",e);case Bt.SysSetting:return this.expressionFactoryMediator.createExpression("sysSettingOperandExpression",e);case Bt.SysVariable:return this.expressionFactoryMediator.createExpression("sysVariableOperandExpression",e);default:{const i=this.getObjectField(e,"operandType");throw new Error(`The '${i}' operand type is not supported.`)}}}}class CT extends tt{constructor(e){super(e)}createExpression(e){const t=this.getObjectField(e,"columnPath"),i=this.getDataType(e);return new iv(t,i)}}class ST extends tt{constructor(e){super(e)}createExpression(e){const t=this.getDataType(e),i=this.getObjectField(e,"columnPath"),r=this.getObjectField(e,"subFilters");return new rv(i,t,r)}}class bT extends tt{constructor(e){super(e)}createExpression(e){const t=this.getObjectField(e,"code"),i=this.getDataType(e);return new oT(t,i)}}class vT extends tt{constructor(e){super(e)}createExpression(e){const t=this.getObjectField(e,"name"),i=this.getDataType(e);return new lT(t,i)}}class ov extends tt{constructor(e){super(e)}getLeftExpression(e){return this.getExpression(e,"leftExpression")}getRightExpression(e){return this.getExpression(e,"rightExpression")}}class IT extends ov{constructor(e){super(e)}createExpression(e){const t=this.getEnumValueByObject(Ut,e,"arithmeticOperatorType"),i=this.getLeftExpression(e),r=this.getRightExpression(e);return new cT(t,i,r)}}class DT extends tt{constructor(e){super(e)}createExpression(e){switch(this.getEnumValueByObject(Gt,e,"operatorType")){case Gt.Arithmetic:return this.expressionFactoryMediator.createExpression("arithmeticOperatorExpression",e);case Gt.Parentheses:return this.expressionFactoryMediator.createExpression("parenthesesOperatorExpression",e);case Gt.Relation:return this.expressionFactoryMediator.createExpression("relationOperatorExpression",e);case Gt.Ternary:return this.expressionFactoryMediator.createExpression("ternaryOperatorExpression",e);default:{const i=this.getObjectField(e,"operatorType");throw new Error(`The '${i}' operator type is not supported.`)}}}}class MT extends tt{constructor(e){super(e)}getInnerExpression(e){return this.getExpression(e,"expression")}}class wT extends MT{constructor(e){super(e)}createExpression(e){const t=this.getInnerExpression(e);return new dT(t)}}class xT extends ov{constructor(e){super(e)}createExpression(e){const t=this.getEnumValueByObject(Vn,e,"relationOperatorType"),i=this.getLeftExpression(e),r=this.getRightExpression(e);return new pT(t,i,r)}}class ET extends tt{constructor(e){super(e)}createExpression(e){const t=this.getExpression(e,"condition","relationOperatorExpression"),i=this.getExpression(e,"thenExpression"),r=this.getExpression(e,"elseExpression");return new mT(t,i,r)}}class TT extends tt{constructor(e){super(e)}createExpression(e){switch(this.getEnumValueByObject(Nn,e,"type")){case Nn.Function:return this.expressionFactoryMediator.createExpression("functionExpression",e);case Nn.Operand:return this.expressionFactoryMediator.createExpression("operandExpression",e);case Nn.Operator:return this.expressionFactoryMediator.createExpression("operatorExpression",e);default:{const i=this.getObjectField(e,"type");throw new Error(`The '${i}' expression type is not supported.`)}}}}class lv{}class Wo extends lv{constructor(){super(),this._factories=new Map}registerFactory(e,t){this._factories.set(e,t)}createExpression(e,t){if(this._factories.has(e))return this._factories.get(e).createExpression(t);throw new Error(`Factory for the '${e}' expression is not registered.`)}}Wo.\u0275fac=function(e){return new(e||Wo)},Wo.\u0275prov=n.\u0275\u0275defineInjectable({token:Wo,factory:Wo.\u0275fac,providedIn:"root"});class Td{}Td.\u0275fac=function(e){return new(e||Td)},Td.\u0275mod=n.\u0275\u0275defineNgModule({type:Td}),Td.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:lv,useFactory:()=>{const a=new Wo;return a.registerFactory("expression",new TT(a)),a.registerFactory("functionExpression",new hT(a)),a.registerFactory("operandExpression",new yT(a)),a.registerFactory("columnOperandExpression",new fT(a)),a.registerFactory("aggregationSubQueryOperandExpression",new gT(a)),a.registerFactory("schemaColumnOperandExpression",new CT(a)),a.registerFactory("subQueryOperandExpression",new ST(a)),a.registerFactory("constantOperandExpression",new _T(a)),a.registerFactory("sysSettingOperandExpression",new bT(a)),a.registerFactory("sysSettingOperandExpression",new vT(a)),a.registerFactory("operatorExpression",new DT(a)),a.registerFactory("arithmeticOperatorExpression",new IT(a)),a.registerFactory("parenthesesOperatorExpression",new wT(a)),a.registerFactory("relationOperatorExpression",new xT(a)),a.registerFactory("ternaryOperatorExpression",new ET(a)),a}}]});(0,l.generateGuid)();class Ln{createObserver(e,t,i){return new PT(e,t,i)}}Ln.\u0275fac=function(e){return new(e||Ln)},Ln.\u0275prov=n.\u0275\u0275defineInjectable({token:Ln,factory:Ln.\u0275fac,providedIn:"root"});class PT{constructor(e,t,i){if(this._bottomBuffer=100,this._lastScrollMaxPosition=0,this._emitter=new n.EventEmitter,l.ValidationUtilities.checkArgumentEmpty("element",e),this._element=e,this._subscribeOnScroll(),i){if(i<=0)throw new Error(`Value of 'bottomBuffer' paramter must be positive, but actual value is ${i}.`);this._bottomBuffer=i}t&&this.subscribe(t)}_isWindowObserved(e){return!(this._element instanceof HTMLElement)}_scrolledToBottom(){const e=this._element,t=this._isWindowObserved(e)?e.document.documentElement.scrollTop:e.scrollTop,i=this._isWindowObserved(e)?e.document.body.scrollHeight:e.scrollHeight,r=this._isWindowObserved(e)?e.innerHeight:e.offsetHeight;if(!i||!r)return!1;const s=i-r-this._bottomBuffer;return this._lastScrollMaxPosition=t>this._lastScrollMaxPosition?t:this._lastScrollMaxPosition,this._lastScrollMaxPosition===t&&t>=s}_processScroll(){this._scrolledToBottom()&&this._emitter.emit()}_subscribeOnScroll(){this._eventListener=this._processScroll.bind(this),this._element.addEventListener("scroll",this._eventListener)}subscribe(e){this._emitter.subscribe(e)}resetScrollMaxPosition(){this._lastScrollMaxPosition=0}destroy(){this._element.removeEventListener("scroll",this._eventListener),this._element=null,this._emitter.unsubscribe()}}const Yo="a29a3ba5-4b0d-de11-9a51-005056c00008",Pd="720b771c-e7a7-4f31-9cfb-52cd21c3739f";var qe;!function(a){a[a.Organization=0]="Organization",a[a.Division=1]="Division",a[a.Manager=2]="Manager",a[a.Team=3]="Team",a[a.User=4]="User",a[a.SelfServicePortalUser=5]="SelfServicePortalUser",a[a.FunctionalRole=6]="FunctionalRole"}(qe||(qe={}));class Ad{constructor(e,t,i,r){this._id=e,this._value=t,this._level=i&&i.level+1||Ad.rootLevel,this._parent=i,this._children=(r||new Array).map(s=>s&&new Ad(s.id,s.value,this,s.children))}get id(){return this._id}get value(){return this._value}get level(){return this._level}get parent(){return this._parent}get children(){return this._children}findChild(e){return this.children.find(t=>t.id===e)}appendChild(e){this.children.push(e&&new Ad(e.id,e.value,this,e.children))}removeChild(e){const t=this.children.findIndex(i=>i.id===e.id);this.children.splice(t,1)}toJSON(){return{id:this.id,value:this.value,level:this.level,parentId:this.parent?this.parent.id:null,children:this.children?this.children.map(e=>e.toJSON()):[]}}}Ad.rootLevel=0;const AT=new n.InjectionToken("Represents a string pattern of the translation key for validation error");class Qo{constructor(e,t){this.translateService=e,this.errorTranslationKeyPattern=t}getLocalizableErrorMessage(e){const t=Z.Ld.Format(this.errorTranslationKeyPattern,(0,Ib.Z)(e.code)),i=this.translateService.instant(t),r=e.interpolateParams||[];return Z.Ld.Format(i,...r)}translateErrorMessage(e){e.message=this.getLocalizableErrorMessage(e)}}Qo.\u0275fac=function(e){return new(e||Qo)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(AT))},Qo.\u0275prov=n.\u0275\u0275defineInjectable({token:Qo,factory:Qo.\u0275fac,providedIn:"root"});class RT{}class Rd{constructor(e=[]){this.errors=e}static createSuccess(){return new Rd}static createError(e){return new Rd(e)}static unionResults(...e){const t=e.map(i=>i?.errors||[]).reduce((i,r)=>i.concat(r),[]);return new Rd(t)}get success(){return!(this.errors&&this.errors.length>0)}}const cv=new n.InjectionToken("Represents a collection of validators");class Jo extends RT{constructor(e){super(),this._validators=e}validate(e){const i=this._validators.map(r=>r.validate(e)).map(r=>r.errors).reduce((r,s)=>r.concat(s),[]);return new Rd(i)}}Jo.\u0275fac=function(e){return new(e||Jo)(n.\u0275\u0275inject(cv))},Jo.\u0275prov=n.\u0275\u0275defineInjectable({token:Jo,factory:Jo.\u0275fac});class kd extends Jo{constructor(e,t){super(e),this._validationErrorTranslateService=t}validate(e){const t=super.validate(e);return t.errors.forEach(i=>{this._validationErrorTranslateService.translateErrorMessage(i)}),t}}kd.\u0275fac=function(e){return new(e||kd)(n.\u0275\u0275inject(cv),n.\u0275\u0275inject(Qo))},kd.\u0275prov=n.\u0275\u0275defineInjectable({token:kd,factory:kd.\u0275fac});class Ko{static schemaNameValidator(){return b.kI.pattern(/^[a-zA-Z]+[a-zA-Z0-9._]*$/)}static linkValidator(){return b.kI.pattern(/^[A-Za-z][A-Za-z\d.+-]*:\/*(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?(?:\/[\w#!:.?+=&%@\-/]*)?$/)}static debounceValidator(e){return t=>(0,u.timer)(400).pipe((0,M.w)(()=>e(t.value)))}static requiredWithPrefix(e){return t=>{const i=t.value,r=i?.startsWith(e);return e&&r?i.replace(e,"")?null:{requiredWithPrefix:{prefix:e}}:null}}static prefix(e){return t=>e&&!t.value?.startsWith(e)?{prefix:{requiredPrefix:e}}:null}static duplicate(e){return t=>{if(e){const i=e.map(s=>s.toLowerCase()),r=t.value?.toLowerCase();if(i.some(s=>r===s))return{duplicate:!0}}return null}}static duplicateAsync(e){return t=>e.pipe((0,h.U)(i=>{if(i){const r=i.map(o=>o.toLowerCase()),s=t.value?.toLowerCase();if(r.some(o=>s===o))return{duplicate:!0}}return null}))}}class On{static getDateTypeValueGroup(e){let t;switch(e){case l.DataValueType.Date:case l.DataValueType.Time:case l.DataValueType.DateTime:t=this._changeColumnDataValueTypeGroup.DateTime;break;case l.DataValueType.PHONE_TEXT:t=this._changeColumnDataValueTypeGroup.PhoneText;break;case l.DataValueType.WEB_TEXT:t=this._changeColumnDataValueTypeGroup.WebText;break;case l.DataValueType.EMAIL_TEXT:t=this._changeColumnDataValueTypeGroup.EmailText;break;case l.DataValueType.Text:case l.DataValueType.SHORT_TEXT:case l.DataValueType.MEDIUM_TEXT:case l.DataValueType.LONG_TEXT:case l.DataValueType.MAXSIZE_TEXT:t=this._changeColumnDataValueTypeGroup.Text;break;case l.DataValueType.RICH_TEXT:t=this._changeColumnDataValueTypeGroup.RichText;break;case l.DataValueType.Integer:case l.DataValueType.FLOAT1:case l.DataValueType.FLOAT2:case l.DataValueType.FLOAT3:case l.DataValueType.FLOAT4:case l.DataValueType.FLOAT8:case l.DataValueType.Money:t=this._changeColumnDataValueTypeGroup.Number;break;default:t=[]}return t.map(i=>It[i])}static _removeItems(e,t){const i=[...e];return t.forEach(r=>{const s=i.indexOf(r);s>-1&&i.splice(s,1)}),i}static getAllowedChangeTypes(e){return this.getDateTypeValueGroup(e).filter(({type:i})=>i!==e)}static isPrecisionLost(e,t){return e!==t&&!this.dataValueTypeConvertRules[e]?.canConvertTo.includes(t)}}On.dataValueTypeConvertRules={[l.DataValueType.DateTime]:{canConvertTo:[]},[l.DataValueType.Date]:{canConvertTo:[l.DataValueType.DateTime]},[l.DataValueType.Time]:{canConvertTo:[l.DataValueType.DateTime]},[l.DataValueType.SHORT_TEXT]:{canConvertTo:[l.DataValueType.PHONE_TEXT,l.DataValueType.WEB_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.MEDIUM_TEXT,l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.RICH_TEXT]},[l.DataValueType.PHONE_TEXT]:{canConvertTo:[l.DataValueType.MEDIUM_TEXT,l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.RICH_TEXT]},[l.DataValueType.WEB_TEXT]:{canConvertTo:[l.DataValueType.MEDIUM_TEXT,l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.RICH_TEXT]},[l.DataValueType.EMAIL_TEXT]:{canConvertTo:[l.DataValueType.MEDIUM_TEXT,l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.RICH_TEXT]},[l.DataValueType.MEDIUM_TEXT]:{canConvertTo:[l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.RICH_TEXT]},[l.DataValueType.LONG_TEXT]:{canConvertTo:[l.DataValueType.MAXSIZE_TEXT,l.DataValueType.RICH_TEXT]},[l.DataValueType.MAXSIZE_TEXT]:{canConvertTo:[l.DataValueType.RICH_TEXT]},[l.DataValueType.Integer]:{canConvertTo:[l.DataValueType.FLOAT1,l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Money]},[l.DataValueType.FLOAT1]:{canConvertTo:[l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Money]},[l.DataValueType.FLOAT2]:{canConvertTo:[l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Money]},[l.DataValueType.FLOAT3]:{canConvertTo:[l.DataValueType.FLOAT4,l.DataValueType.FLOAT8]},[l.DataValueType.FLOAT4]:{canConvertTo:[l.DataValueType.FLOAT8]},[l.DataValueType.FLOAT8]:{canConvertTo:[]},[l.DataValueType.Money]:{canConvertTo:[]}},On._changeColumnDataValueTypeGroup={DateTime:ot.DateTime,Text:On._removeItems(ot.Text,[l.DataValueType.Text,l.DataValueType.LOCALIZABLE_STRING]),Number:On._removeItems(ot.Number,[l.DataValueType.Float]),RichText:[l.DataValueType.RICH_TEXT],PhoneText:On._removeItems(ot.Text,[l.DataValueType.Text,l.DataValueType.SHORT_TEXT,l.DataValueType.LOCALIZABLE_STRING]),EmailText:On._removeItems(ot.Text,[l.DataValueType.Text,l.DataValueType.SHORT_TEXT,l.DataValueType.LOCALIZABLE_STRING]),WebText:On._removeItems(ot.Text,[l.DataValueType.Text,l.DataValueType.SHORT_TEXT,l.DataValueType.LOCALIZABLE_STRING])};class Nd{transform(e,t){return tr(e,t)}}Nd.\u0275fac=function(e){return new(e||Nd)},Nd.\u0275pipe=n.\u0275\u0275definePipe({name:"stringFormat",type:Nd,pure:!0});class ir{constructor(e){this._resourceFinderService=e}transform(e){return this._resourceFinderService.findLocalizableValue(e)}}ir.\u0275fac=function(e){return new(e||ir)(n.\u0275\u0275directiveInject(Nt,16))},ir.\u0275pipe=n.\u0275\u0275definePipe({name:"lczToString",type:ir,pure:!0}),ir.\u0275prov=n.\u0275\u0275defineInjectable({token:ir,factory:ir.\u0275fac,providedIn:"root"});class Vd{}Vd.\u0275fac=function(e){return new(e||Vd)},Vd.\u0275mod=n.\u0275\u0275defineNgModule({type:Vd}),Vd.\u0275inj=n.\u0275\u0275defineInjector({});class tg{constructor(e){this._sanitizer=e}transform(e,t){switch(t){case"html":default:return this._sanitizer.bypassSecurityTrustHtml(e);case"style":return this._sanitizer.bypassSecurityTrustStyle(e);case"script":return this._sanitizer.bypassSecurityTrustScript(e);case"url":return this._sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this._sanitizer.bypassSecurityTrustResourceUrl(e)}}}tg.\u0275fac=function(e){return new(e||tg)(n.\u0275\u0275directiveInject(k.DomSanitizer,16))},tg.\u0275pipe=n.\u0275\u0275definePipe({name:"bypassSecurityTrust",type:tg,pure:!0});class Fd{}Fd.\u0275fac=function(e){return new(e||Fd)},Fd.\u0275mod=n.\u0275\u0275defineNgModule({type:Fd}),Fd.\u0275inj=n.\u0275\u0275defineInjector({});const kT={macrosName:"ResourceString",macrosHandler:function(a,e){if(!a)throw new Error("Context is not defined");if(!a.Resources?.Strings)throw new Error("Context does not contain property Resources.Strings");const t=a.Resources.Strings[e[0]];return t instanceof Promise?(0,u.from)(t):(0,u.of)(t)}};function uv(a=!1){return{macrosName:"DataSourceEntityName",macrosHandler:(e,t)=>{if(!e)throw new Error("Context is not defined");let r,i=t[0];if(a)r="BaseViewModel"===e.constructor.name?e.dataSchemas?.[i]?.dataSourceConfig?.config?.entitySchemaName:e.modelConfig?.dataSources?.[i]?.config?.entitySchemaName;else{i||(i=e.modelConfig.primaryDataSourceName);const s=e.modelConfig.dataSources?.[i];if(!s)throw new Error(`DataSource '${i}' is not defined`);r=s.config.entitySchemaName}return(0,u.of)(r)}}}const Xo=new n.InjectionToken("MACROS_HANDLER");class cn{constructor(e,t){this.handlers=e,this._featureValues=t}get _includeProcessedHandlers(){return!!this._featureValues?.IncludeProcessedMacrosHandlers}_findClosingBracket(e,t){let i=t,r=1;for(;r>0&&i<e.length;){const s=e[++i];"("===s?r++:")"===s&&r--}return i}_getMacroses(e){const t=new Array;let i=e.indexOf("#");for(;i>=0;){const r=e.indexOf("(",i);if(r<0)return t;const s=this._findClosingBracket(e,r),o=e.indexOf("#",s);if(o<0)return t;t.push({macrosName:e.substring(i+1,r),macrosArgs:e.substring(r+1,s),macrosBody:e.substring(i,o+1)}),i=e.indexOf("#",o+1)}return t}_processMacroses({macroses:e,macrosNameFilter:t,context:i,options:r,value:s}){let o={...s};return(0,u.forkJoin)({...e.map(({macrosName:d,macrosArgs:p,macrosBody:g})=>{if((d=>Boolean(t&&t!==d&&-1===t.split(",").indexOf(d)))(d))return(0,u.of)(null);const C=this.getHandler(d);return C?this.internalHandle(p,i,t,r).pipe((0,M.w)(v=>{const T=C(i,`${v.value}`.split(",").map(j=>j.trim()));return(T instanceof u.Observable?T:(0,u.of)(T)).pipe((0,G.K)(j=>(console.warn(j),(0,u.of)(g))),(0,I.b)(j=>{const Y="number"==typeof j?j:j||"";o={isChanged:!0,value:o.value.replace(g,Y)}}))}),(0,G.K)(v=>(r&&r.errorHandler?r.errorHandler(v):console.warn(v),(0,u.of)(g)))):(0,u.of)(null)}),default:(0,u.of)(null)}).pipe((0,h.U)(()=>o))}_forEachStringInObject(e,t,i=[],r=[]){if(!(e instanceof Object))return;const s=c=>!i.includes(c),o=(c,d)=>{"string"==typeof c?t(r.concat(d),c):"object"==typeof c&&null!==c&&(r.push(d),this._forEachStringInObject(c,t,i,r),r.pop())};if(e instanceof Map)for(const c of Array.from(e.keys()).filter(s))o(e.get(c),c);else Object.keys(e).filter(s).forEach(c=>{o(e[c],c)})}_set(e,t,i){const r=t.slice(),s=r.pop(),o=0===r.length?e:Jb(e,r);o&&(o[s]=i)}getHandler(e){return this.handlers.filter(t=>t.macrosName===e).pop()?.macrosHandler}internalHandle(e,t,i,r){const s={value:e,isChanged:!1};return(0,u.of)(s).pipe((0,M.w)(c=>{if("string"!=typeof e)return(0,u.of)(c);const d=this._getMacroses(e);return d.length?this._processMacroses({macroses:d,macrosNameFilter:i,context:t,options:r,value:s}):(0,u.of)(c)}))}handle(e,t){const i=(0,q.Z)(e);return(0,u.forkJoin)([...(0,l.objectDeepKeys)(i).map(r=>{const s=(0,pe.Z)(i,r);return this.internalHandle(s,t).pipe((0,I.b)(({value:o})=>{(0,Ga.Z)(i,r,o)}))}),(0,u.of)(null)]).pipe((0,h.U)(()=>i))}handleMarcos(...e){return this.handleMacros.call(this,...e)}handleResourceMacros(e,t,i){return this.handleMacros("MacrosTemplateString,ResourceString",(0,q.Z)(e),t,i)}handleMacros(e,t,i,r){const s=[(0,u.of)(null)];return this._forEachStringInObject(t,(o,c)=>{const d=this._getMacroses(c);if(!d.length)return;const p=this._processMacroses({macroses:d,context:i,options:r,macrosNameFilter:e,value:{isChanged:!1,value:c}}).pipe((0,I.b)(g=>{!1!==g.isChanged&&(r?.setPropertyFn?r.setPropertyFn({source:t,keys:o,value:g.value}):this._set(t,o,g.value))}));s.push(p)},this._includeProcessedHandlers?[]:["__preprocessed"]),(0,u.forkJoin)(s).pipe((0,h.U)(()=>t))}}cn.\u0275fac=function(e){return new(e||cn)(n.\u0275\u0275inject(Xo),n.\u0275\u0275inject(te,8))},cn.\u0275prov=n.\u0275\u0275defineInjectable({token:cn,factory:cn.\u0275fac});class el{}el.\u0275fac=function(e){return new(e||el)},el.\u0275mod=n.\u0275\u0275defineNgModule({type:el}),el.\u0275inj=n.\u0275\u0275defineInjector({providers:[cn,{provide:Xo,useFactory:function NT(a){return{macrosName:"ResourceString",macrosHandler:function(e,t){if(e?.strings){for(const i of t){const r=e.strings[i];if(r)return(0,u.of)(a.findLocalizableValue(r))}throw new Error(`Localized resource string not found. ${t}`)}if(e?.Strings){for(const i of t){const r=e.Strings[i];if(r)return(0,u.from)(r)}throw new Error(`Localized string in ViewModel metadata not found. ${t}`)}return kT.macrosHandler(e,t)}}},deps:[Nt],multi:!0},{provide:Xo,useFactory:uv,deps:[[new n.Optional,Tn]],multi:!0},{provide:Xo,useFactory:function VT(a,e=!1){return{macrosName:"MacrosTemplateString",macrosHandler:(t,i)=>{const r=i.join(", "),s=/\[#([^\]]*)#\]/.test(r);return e||!s?(0,u.of)(r):a.getTemplate(r)}}},deps:[Mo,[new n.Optional,Tn]],multi:!0}],imports:[y.CommonModule]});class ar{constructor(e){this._macrosHandlerService=e}transform(e,t,i){return t?this._macrosHandlerService.handleResourceMacros(e,t).pipe((0,h.U)(r=>r[i])):null}}ar.\u0275fac=function(e){return new(e||ar)(n.\u0275\u0275directiveInject(cn,16))},ar.\u0275pipe=n.\u0275\u0275definePipe({name:"handleResourceMacros",type:ar,pure:!0}),ar.\u0275prov=n.\u0275\u0275defineInjectable({token:ar,factory:ar.\u0275fac,providedIn:"root"});class jn{constructor(e){this._emptyPlaceholderCreatorFactory=e}transform(e,t){return null==e||""===e?this._emptyPlaceholderCreatorFactory?.create(t)?.create(t)??"":e}}jn.\u0275fac=function(e){return new(e||jn)(n.\u0275\u0275directiveInject(gb,16))},jn.\u0275pipe=n.\u0275\u0275definePipe({name:"toEmptyPlaceholder",type:jn,pure:!0}),jn.\u0275prov=n.\u0275\u0275defineInjectable({token:jn,factory:jn.\u0275fac});class tl{}tl.\u0275fac=function(e){return new(e||tl)},tl.\u0275mod=n.\u0275\u0275defineNgModule({type:tl}),tl.\u0275inj=n.\u0275\u0275defineInjector({providers:[jn,Oa,La,yw]});class ng{constructor(e){this._domSanitizer=e}transform(e){return this._domSanitizer.bypassSecurityTrustResourceUrl(e)}}ng.\u0275fac=function(e){return new(e||ng)(n.\u0275\u0275directiveInject(k.DomSanitizer,16))},ng.\u0275pipe=n.\u0275\u0275definePipe({name:"safeUrl",type:ng,pure:!0});class Ld{}Ld.\u0275fac=function(e){return new(e||Ld)},Ld.\u0275mod=n.\u0275\u0275defineNgModule({type:Ld}),Ld.\u0275inj=n.\u0275\u0275defineInjector({});class rr{_getEntitySchemaColumnsDataValueTypesMap(e){return e.columns.reduce((t,i)=>(t[i.name]=i.dataValueType,t),{})}_getEntityColumnsDataValueTypesMap(e){return Object.keys(e).reduce((t,i)=>(t[i]=e[i].dataValueType,t),{})}_parseRawColumnValue(e,t){switch(t){case l.DataValueType.Date:case l.DataValueType.Time:case l.DataValueType.DateTime:return Ub(e);default:return e}}_parseRawEntityObject(e,t){const i={};return Object.keys(e).forEach(r=>{const s=e[r];i[r]=t[r]?this._parseRawColumnValue(s,t[r]):s}),i}deserializeEntity(e,t){l.ValidationUtilities.checkArgumentEmpty("columnsConfig",e),l.ValidationUtilities.checkArgumentEmpty("rawEntity",t);const i=this._getEntityColumnsDataValueTypesMap(e);return this._parseRawEntityObject(t,i)}deserializeEntities(e,t){l.ValidationUtilities.checkArgumentEmpty("columnsConfig",e),l.ValidationUtilities.checkArgumentEmpty("rawEntities",t);const i=this._getEntityColumnsDataValueTypesMap(e);return t.map(r=>this._parseRawEntityObject(r,i))}deserializeEntitySchemaRecord(e,t){l.ValidationUtilities.checkArgumentEmpty("entitySchema",e),l.ValidationUtilities.checkArgumentEmpty("rawEntities",t);const i=this._getEntitySchemaColumnsDataValueTypesMap(e);return this._parseRawEntityObject(t,i)}deserializeEntitySchemaRecords(e,t){l.ValidationUtilities.checkArgumentEmpty("entitySchema",e),l.ValidationUtilities.checkArgumentEmpty("rawEntities",t);const i=this._getEntitySchemaColumnsDataValueTypesMap(e);return t.map(r=>this._parseRawEntityObject(r,i))}}rr.\u0275fac=function(e){return new(e||rr)},rr.\u0275prov=n.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac,providedIn:"root"});class Od{constructor(e,t,i,r){this.overlay=e,this.overlayPositionBuilder=t,this.elementRef=i,this.ngZone=r,this.delayTime=500}_createIconHoveredStream(e){return this.ngZone.runOutsideAngular(()=>(0,u.fromEvent)(this.elementRef.nativeElement,"mouseenter").pipe((0,Pb.e)(this.delayTime),(0,L.R)(e)))}_createIconMouseOutStream(){return this.ngZone.runOutsideAngular(()=>(0,u.fromEvent)(this.elementRef.nativeElement,"mouseleave"))}_createEventsStream(e,t){this.subscription=t.subscribe(),this.subscription.add(e.subscribe());const i=(0,u.merge)(e,t);i.pipe((0,L.R)(t));const r=i.subscribe(s=>{if("mouseenter"===s.type&&this.show(),"mouseleave"===s.type){this.hide(),this.subscription.unsubscribe();const o=this._createIconMouseOutStream(),c=this._createIconHoveredStream(o);this._createEventsStream(c,o)}});this.subscription.add(r)}hide(){this.overlayRef.hasAttached()&&this.overlayRef.detach()}show(){this.hintConfig&&(this.overlayRef.hasAttached()||(this.tooltipRef=this.overlayRef.attach(new y_.C5(this.hintConfig.componentType))),this.tooltipRef.instance.hintConfig=this.hintConfig.hintConfig)}ngOnInit(){const e=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:this.hintConfig.positionX?this.hintConfig.positionX:0,offsetY:this.hintConfig.positionY?this.hintConfig.positionY:0}]);this.overlayRef=this.overlay.create({scrollStrategy:this.overlay.scrollStrategies.close(),positionStrategy:e})}ngAfterViewInit(){const e=this._createIconMouseOutStream(),t=this._createIconHoveredStream(e);this._createEventsStream(t,e)}ngOnDestroy(){this.hide(),this.subscription.unsubscribe()}}Od.\u0275fac=function(e){return new(e||Od)(n.\u0275\u0275directiveInject(Rn.aV),n.\u0275\u0275directiveInject(Rn.wJ),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.NgZone))},Od.\u0275dir=n.\u0275\u0275defineDirective({type:Od,selectors:[["","libHintOverlay",""]],inputs:{hintConfig:["libHintOverlay","hintConfig"]},exportAs:["libHintOverlay"]});var dv=f(27049);class ig{_setTitleAttribute(){const e="title",t=this._elementRef.nativeElement;if(t.offsetWidth<t.scrollWidth){const i=t.value;t.setAttribute(e,i)}else t.removeAttribute(e)}constructor(e){this._elementRef=e,this._debounceTime=300}onMouseEnter(){(0,dv.Z)(()=>this._setTitleAttribute(),this._debounceTime)()}}ig.\u0275fac=function(e){return new(e||ig)(n.\u0275\u0275directiveInject(n.ElementRef))},ig.\u0275dir=n.\u0275\u0275defineDirective({type:ig,selectors:[["","crtTextOverflowTitle",""]],hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("mouseenter",function(){return t.onMouseEnter()})}});class jd{}jd.\u0275fac=function(e){return new(e||jd)},jd.\u0275mod=n.\u0275\u0275defineNgModule({type:jd}),jd.\u0275inj=n.\u0275\u0275defineInjector({});class Bd{}Bd.\u0275fac=function(e){return new(e||Bd)},Bd.\u0275mod=n.\u0275\u0275defineNgModule({type:Bd}),Bd.\u0275inj=n.\u0275\u0275defineInjector({});class ag{}ag.\u0275fac=function(e){return new(e||ag)},ag.\u0275dir=n.\u0275\u0275defineDirective({type:ag,selectors:[["","crtSaveScrollPosition",""]],features:[n.\u0275\u0275ProvidersFeature([wo])]});class nl{constructor(){this.subject$=new u.Subject}emit(e){this.subject$.next(e)}on(e,t,i){return this.subject$.pipe((0,P.h)(r=>r.name===e),(0,h.U)(r=>r.value)).subscribe(r=>t.call(i,r))}}nl.\u0275fac=function(e){return new(e||nl)},nl.\u0275prov=n.\u0275\u0275defineInjectable({token:nl,factory:nl.\u0275fac});new n.InjectionToken("TRANSLATE_SERVICE_URI");class il{constructor(){this._defaultShortDatePattern="M/D/YYYY"}convert(e){if(e)return{...e,shortDatePattern:e?.shortDatePattern?.toUpperCase()??this._defaultShortDatePattern,shortTimePattern:e?.shortTimePattern?.replace("tt","A")}}}il.\u0275fac=function(e){return new(e||il)},il.\u0275prov=n.\u0275\u0275defineInjectable({token:il,factory:il.\u0275fac,providedIn:"root"});const FT=new n.InjectionToken("DateTimeFormatInfo",{providedIn:"root",factory:()=>{const a=(0,n.inject)(il),e=(0,n.inject)(Q);return a.convert(e?.cultureInfo?.dateTimeFormat)}});var Ti;!function(a){a[a.Busy=0]="Busy",a[a.Idle=1]="Idle"}(Ti||(Ti={}));var rg;f(7277);!function(a){a.ReadyStateChange="readystatechange"}(rg||(rg={}));class LT{constructor(e){this._trackedTasks=[],this._trackedEventTasks=[],this._enableDebugTracking=!1,this._disableWaits=!1,this._pendingFunctions=new Map,this.onStateChange$=new n.EventEmitter(!1),this._parentZone=Zone.current,this._rootZone=Zone.root,this._isBusy=!1,this._ignoredTaskSources=["setInterval","requestAnimationFrame"],this._eventTaskFilters=[t=>t.source.startsWith("XMLHttpRequest")&&t.source.endsWith(rg.ReadyStateChange)],this._zone=this._parentZone.fork({name:e,properties:{currentExecutionZone:this},onInvokeTask:this._onInvokeTask.bind(this),onCancelTask:this._onCancelTask.bind(this),onScheduleTask:this._onScheduleTask.bind(this),onHasTask:this._onHasTask.bind(this)})}wait(e){if(this._disableWaits)return e();this._isBusy||(this._isBusy=!0,this.onStateChange$.next(Ti.Busy));const t=(0,l.generateGuid)();return this._pendingFunctions.set(t,this._enableDebugTracking?e:null),e().finally(()=>{this._pendingFunctions.delete(t),!this._pendingFunctions.size&&this._zone.run(()=>new Promise(i=>setTimeout(i)))}).catch(i=>{throw i})}_cancelXMLHttpRequestReadyStateChangeTaskOnRequestComplete(e,t){if("eventTask"===e.type&&("running"===e.state||"scheduled"===e.state)){const i=e;i.eventName===rg.ReadyStateChange&&i.target.readyState===XMLHttpRequest.DONE&&t.cancelTask(i)}}_onInvokeTask(e,t,i,r,s,o){let c;this._unTrackTask(r);try{c=e.invokeTask(i,r,s,o),this._cancelXMLHttpRequestReadyStateChangeTaskOnRequestComplete(r,t)}catch(d){console.error(d),t.cancelTask(r)}return c}_onCancelTask(e,t,i,r){return this._unTrackTask(r),e.zone.runGuarded(()=>e.cancelTask(i,r))}_onScheduleTask(e,t,i,r){return this._getCanScheduleTask(r)?(this._trackTask(r),e.scheduleTask(i,r)):(r.cancelScheduleRequest(),this._parentZone.scheduleTask(r))}_onHasTask(e,t,i,r){e.hasTask(i,r);const s=r.eventTask||r.macroTask||r.microTask||this._pendingFunctions.size>0;this._isBusy!==s&&(this._rootZone.run(()=>this.onStateChange$.next(s?Ti.Busy:Ti.Idle)),this._isBusy=s)}_trackTask(e){this._enableDebugTracking&&("eventTask"===e.type&&this._trackedEventTasks.push(e),this._trackedTasks.push(e))}_unTrackTask(e){if(!this._enableDebugTracking)return;const t=this._trackedTasks.indexOf(e);t>-1&&this._trackedTasks.splice(t,1)}_getCanScheduleTask(e){return"eventTask"===e.type?this._eventTaskFilters.some(t=>t(e)):-1===this._ignoredTaskSources.indexOf(e.source)}run(e,t,i){return this._zone.run(e,t,i)}}class Gd{}Gd.\u0275fac=function(e){return new(e||Gd)},Gd.\u0275mod=n.\u0275\u0275defineNgModule({type:Gd}),Gd.\u0275inj=n.\u0275\u0275defineInjector({});class zd{}zd.\u0275fac=function(e){return new(e||zd)},zd.\u0275mod=n.\u0275\u0275defineNgModule({type:zd}),zd.\u0275inj=n.\u0275\u0275defineInjector({});class Hd{}Hd.\u0275fac=function(e){return new(e||Hd)},Hd.\u0275mod=n.\u0275\u0275defineNgModule({type:Hd}),Hd.\u0275inj=n.\u0275\u0275defineInjector({});class Zd{}Zd.\u0275fac=function(e){return new(e||Zd)},Zd.\u0275mod=n.\u0275\u0275defineNgModule({type:Zd}),Zd.\u0275inj=n.\u0275\u0275defineInjector({});var jT=f(16738),Bn=f.n(jT);class Pi extends zf{_castToDateTimeFormat(e){const t=e.format;if(!t)return e;const i=t.split(" ").length>=2;return{type:e.type,date:{display:!0},time:{display:i}}}_getDateTimeFormatMoment(e){let t="";const{shortDatePattern:i,shortTimePattern:r}=this._dateTimeFormat??{};if(!i&&!r)return this.defaultDateTimeFormat;const{date:s,time:o}=e??{},{display:c=!1}=s??{},{display:d=!1}=o??{};return c&&(t+=i),d&&(t+=` ${r}`),t.trim()}constructor(e){super(),this._dateTimeFormat=e,this.defaultDateTimeFormat="M/D/YYYY"}handle(e){const{dateTimeFormat:t,handledMomentFormat:i}=e,r=this._castToDateTimeFormat(t),s=this._getDateTimeFormatMoment(r);this.format=r?.date?.format;let o=this.internalHandler(i??s);if(o!==s){const c=new RegExp(`^\\${this._dateTimeFormat.dateSeparator}+`),d=new RegExp(`\\${this._dateTimeFormat.dateSeparator}+$`),p=new RegExp(`\\${this._dateTimeFormat.dateSeparator}{2,}`,"g");o=o.replace(c,"").replace(d,"").replace(p,this._dateTimeFormat.dateSeparator)}return e.handledMomentFormat=o,super.handle(e)??o}}Pi.\u0275fac=function(e){return new(e||Pi)(n.\u0275\u0275inject(FT))},Pi.\u0275prov=n.\u0275\u0275defineInjectable({token:Pi,factory:Pi.\u0275fac,providedIn:"root"});class sr extends zf{handle(e){return"hour"===e?.dateTimeFormat?.time?.format?"H":super.handle(e)}}sr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(sr)))(t||sr)}}(),sr.\u0275prov=n.\u0275\u0275defineInjectable({token:sr,factory:sr.\u0275fac,providedIn:"root"});class or extends zf{handle(e){return"week"===e.dateTimeFormat?.date?.format?"W":super.handle(e)}}or.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(or)))(t||or)}}(),or.\u0275prov=n.\u0275\u0275defineInjectable({token:or,factory:or.\u0275fac,providedIn:"root"});class lr extends Pi{internalHandler(e){return this.format&&!this.format.has("days")?e.replace(/D/g,""):e}}lr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(lr)))(t||lr)}}(),lr.\u0275prov=n.\u0275\u0275defineInjectable({token:lr,factory:lr.\u0275fac,providedIn:"root"});class cr extends Pi{internalHandler(e){return this.format&&!this.format?.has("years")?e.replace(/Y/g,""):e}}cr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(cr)))(t||cr)}}(),cr.\u0275prov=n.\u0275\u0275defineInjectable({token:cr,factory:cr.\u0275fac,providedIn:"root"});class ur extends Pi{internalHandler(e){return this.format&&!this.format?.has("months")?e.replace(/M/g,""):e}}ur.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ur)))(t||ur)}}(),ur.\u0275prov=n.\u0275\u0275defineInjectable({token:ur,factory:ur.\u0275fac,providedIn:"root"});const pv=new n.InjectionToken("Represents the moment date time format",{factory:()=>{const a=(0,n.inject)(or),e=(0,n.inject)(sr),t=(0,n.inject)(lr),i=(0,n.inject)(ur),r=(0,n.inject)(cr);return{getFormat:s=>(a.setNext(e).setNext(t).setNext(i).setNext(r),a.handle({dateTimeFormat:s}))}},providedIn:"root"});class sg{}class dr extends sg{constructor(e){super(),this._momentDateTimeFormatter=e}format(e,t){if(!e)return"";const i=new Date(e);if(isNaN(i))return"";const r=this._momentDateTimeFormatter.getFormat(t);return Bn()(i).format(r)}}dr.\u0275fac=function(e){return new(e||dr)(n.\u0275\u0275inject(pv))},dr.\u0275prov=n.\u0275\u0275defineInjectable({token:dr,factory:dr.\u0275fac,providedIn:"root"});const BT=new Map([["default",{ADD_TAGS:["#comment","signature"],FORCE_BODY:!0}],["textOnly",{ALLOWED_TAGS:["#text"],FORBID_CONTENTS:["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","title","video","xmp"]}]]);class al extends sg{constructor(e){super(),this._domPurifier=e,this._defaultFormat={type:"sanitizeHtml",mode:"default"},this._sanitizationConfigsByMode=BT}_sanitizeHtml(e,t){const i=t.mode??"default",r=this._sanitizationConfigsByMode.get(i);return this._domPurifier.sanitize(e,r).toString()}format(e,t){return e?this._sanitizeHtml(e,t??this._defaultFormat):""}}al.\u0275fac=function(e){return new(e||al)(n.\u0275\u0275inject(FS))},al.\u0275prov=n.\u0275\u0275defineInjectable({token:al,factory:al.\u0275fac,providedIn:"root"});var UT=f(91312),Un=f(19590),GT=f(95522),zT=f.n(GT);class rl{constructor(e){this._userInfo=e}_adjustDecimalPrecision(e){return null==e||(e=parseInt(`${e}`,10),isNaN(e))?null:(e=Math.min(e,20),e=Math.max(e,0))}_adjustDecimalSeparator(e){const t=this._userInfo?.cultureInfo?.decimalSeparator;return"string"==typeof t?t:e||"."}_adjustThousandSeparator(e){const t=this._userInfo?.cultureInfo?.thousandSeparator;return"string"==typeof t?t:e||""}adjust(e){const{decimalPrecision:t,decimalSeparator:i,thousandSeparator:r,thousandAbbreviation:s,trimTrailingZeros:o}=e||{};return{type:"number",decimalPrecision:this._adjustDecimalPrecision(t),decimalSeparator:this._adjustDecimalSeparator(i),trimTrailingZeros:o??!1,thousandSeparator:this._adjustThousandSeparator(r),thousandAbbreviation:{enabled:!0===s?.enabled}}}}rl.\u0275fac=function(e){return new(e||rl)(n.\u0275\u0275inject(Q,8))},rl.\u0275prov=n.\u0275\u0275defineInjectable({token:rl,factory:rl.\u0275fac,providedIn:"root"});const hv="#DECIMAL_SEPARATOR#",gv="#THOUSAND_SEPARATOR#";class pr extends sg{constructor(e){super(),this._formatAdjuster=e}_isNaN(e){const t=parseFloat(e);return isNaN(t)}_createNumeralFormat(e,t){const[r,s]=e.split("."),o=Math.abs(parseInt(r,10))>=1e3,c=Boolean(t.thousandAbbreviation?.enabled);if(o&&c)return"0,0a.[0]";const d=this._getFractionLength(s,t);return`0,0.${"0".repeat(d)}`}_getFractionLength(e,t){if(!t.trimTrailingZeros)return t.decimalPrecision??e?.length??0;const i=(0,UT.Z)(e,"0");return(0,Un.Z)(t.decimalPrecision)?i.length:Math.min(i.length,t.decimalPrecision)}_replaceSeparators(e,t){const{decimalSeparator:i,thousandSeparator:r}=t;return qf(e,[{searchValue:".",replaceMacros:hv,replaceValue:i},{searchValue:",",replaceMacros:gv,replaceValue:r}])}_undoReplaceSeparators(e,t){const{decimalSeparator:i,thousandSeparator:r}=t;return qf(e,[{searchValue:i,replaceMacros:hv,replaceValue:"."},{searchValue:r,replaceMacros:gv,replaceValue:""}])}format(e,t){if(this._isNaN(e))return"";t||(t={type:"number"});const i=this._formatAdjuster.adjust(t),r=this._createNumeralFormat(e,i),s=zT()(e).format(r);return this._isNaN(s)?"":this._replaceSeparators(s,i)}undoFormat(e,t){if(this._isNaN(e))return"";t||(t={type:"number"});const i=this._formatAdjuster.adjust(t);return this._undoReplaceSeparators(e,i)}}pr.\u0275fac=function(e){return new(e||pr)(n.\u0275\u0275inject(rl))},pr.\u0275prov=n.\u0275\u0275defineInjectable({token:pr,factory:pr.\u0275fac,providedIn:"root"});const JT={type:"string",wordSeparator:" ",wordConnector:" ",maxLinesCount:-1,maxLineLength:-1};class Gn extends sg{_fillInFormat(e){const{maxLinesCount:t,maxLineLength:i,wordSeparator:r,wordConnector:s}=JT;return{type:"string",maxLinesCount:e?.maxLinesCount??t,maxLineLength:e?.maxLineLength??i,wordSeparator:e?.wordSeparator??r,wordConnector:e?.wordConnector??s}}_splitTextToWords(e,t){return e.split(t).map(i=>i.trim()).filter(i=>""!==i)}_wrapWordsToLines(e,t){const i=[];for(;e.length>0;){const r=e.shift(),s=this._getLinesState(i,t);if(this._canAddWordIntoLine(r,s)){this._addWordToLine(r,i);continue}if(this._canAddWordIntoNextLine(r,e,s)){i.push([]),e.unshift(r);continue}const{remainderLineLength:o}=s;if(!this._canBreakWordIntoSyllables(s)){this._canTruncateWordWithEllipsis(s)?this._truncateWordWithEllipsis(r,i,o):this._addWordToLine("...",i);break}{const c=this._breakWordIntoSyllables(r,i,o);i.push([]),e.unshift(c)}}return i}_getLinesState(e,t){let{maxLinesCount:i,maxLineLength:r}=t;i<-1&&(i=-1),r<-1&&(r=-1);const s=e.length,o=s>0?e[s-1]:[],c=this._getTotalWordsLength(o);return{maxLineLength:r,maxLinesCount:i,currentLinesCount:s,remainderLineLength:-1===r?-1:r-c,remainderLinesCount:-1===i?-1:i-s}}_getTotalWordsLength(e){return e.reduce((t,i)=>t+i.length,0)}_canAddWordIntoLine(e,t){const{remainderLineLength:i}=t;return e.length<=i||-1===i}_canAddWordIntoNextLine(e,t,i){const{maxLineLength:r,remainderLineLength:s,remainderLinesCount:o}=i;if(0===o)return!1;if(-1===o)return!0;const c=e.length;if(c<4||s<2)return!0;if(c>r)return!1;return this._getTotalWordsLength(t)<=(o-1)*r}_canBreakWordIntoSyllables(e){const{remainderLinesCount:t,remainderLineLength:i}=e;return(-1===t||t>0)&&i>=2}_canTruncateWordWithEllipsis(e){return e.remainderLineLength>0}_addWordToLine(e,t){const i=t.pop()??[];i.push(e),t.push(i)}_breakWordIntoSyllables(e,t,i){const r=e.length;r-i==1&&i--;const o=e.substring(0,i),c=e.substring(i,r);return this._addWordToLine(o+"-",t),c}_truncateWordWithEllipsis(e,t,i){const r=e.substring(0,i);1===r.length?this._addWordToLine("...",t):this._addWordToLine(r+"...",t)}format(e,t){if("string"!=typeof e)return[];t=this._fillInFormat(t);const i=this._splitTextToWords(e,t.wordSeparator);return this._wrapWordsToLines(i,t).map(s=>s.join(t.wordConnector))}}Gn.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Gn)))(t||Gn)}}(),Gn.\u0275prov=n.\u0275\u0275defineInjectable({token:Gn,factory:Gn.\u0275fac,providedIn:"root"});const KT=new n.InjectionToken("Represents a datetime data formatter",{factory:()=>new dr((0,n.inject)(pv)),providedIn:"root"}),_v=new n.InjectionToken("Represents a default data formatter",{factory:()=>new Gn,providedIn:"root"}),XT=new n.InjectionToken("Represents a sanitize html formatter",{factory:()=>new al((0,n.inject)(FS)),providedIn:"root"}),e2=new n.InjectionToken("Represents a number data formatter",{factory:()=>(0,n.inject)(pr),providedIn:"root"}),yv=new n.InjectionToken("Represents a registration map of formatters",{factory:()=>new Map([["string",Gn],["number",pr],["datetime",dr]]),providedIn:"root"});class sl{constructor(e,t,i){this._injector=e,this._defaultFormatter=t,this._formattersMap=i}_getFormatterByType(e){const{type:t}=e;if(this._formattersMap.has(t)){const i=this._formattersMap.get(t);return this._injector.get(i)}}_getFormatterByPredicat(e){for(const[t,i]of this._formattersMap)if("function"==typeof t&&t(e))return this._injector.get(i)}resolveFormatter(e){return e?this._getFormatterByType(e)??this._getFormatterByPredicat(e)??this._defaultFormatter:this._defaultFormatter}}sl.\u0275fac=function(e){return new(e||sl)(n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(_v),n.\u0275\u0275inject(yv))},sl.\u0275prov=n.\u0275\u0275defineInjectable({token:sl,factory:sl.\u0275fac,providedIn:"root"});class A_{constructor(e){this._formatter=e}getValue(e){return e.toString()}getFormat(e){if(!e)return this.defaultFormat;const t=this.getFormatByDataType(e.dataType);return t?(0,Dn.Z)({},t,e):{type:this.defaultFormat?.type,...(0,At.Z)(e,"dataType")}}getFormatByDataType(e){return e&&this.formatsByDataTypeMap.get(e)}isSupportedValue(e){return"string"==typeof e}transform(e,t){if(!this.isSupportedValue(e))return"";const i=this.getValue(e),r=this.getFormat(t);return this._formatter.format(i,r)}}const t2=new Map([[l.DataValueType.Date,{type:"datetime",date:{display:!0}}],[l.DataValueType.DateTime,{type:"datetime",date:{display:!0},time:{display:!0}}],[l.DataValueType.Time,{type:"datetime",date:{display:!1},time:{display:!0}}]]);class zn extends A_{constructor(e){super(e),this.defaultFormat={type:"datetime",date:{display:!0}},this.formatsByDataTypeMap=t2}getValue(e){return"number"==typeof e&&(e=new Date(e)),e.toString()}isSupportedValue(e){return super.isSupportedValue(e)||"number"==typeof e||e instanceof Date}transform(e,t){return""===e?"":super.transform(e,t)}}zn.\u0275fac=function(e){return new(e||zn)(n.\u0275\u0275directiveInject(KT,16))},zn.\u0275pipe=n.\u0275\u0275definePipe({name:"dateTimeFormat",type:zn,pure:!0}),zn.\u0275prov=n.\u0275\u0275defineInjectable({token:zn,factory:zn.\u0275fac,providedIn:"root"});const n2=new Map(o_.map(a=>[a,i2(a)]));function i2(a){return{type:"number",decimalPrecision:lb.get(a)}}class Hn extends A_{constructor(e){super(e),this.defaultFormat={type:"number"},this.formatsByDataTypeMap=n2}isSupportedValue(e){return super.isSupportedValue(e)||"number"==typeof e}}Hn.\u0275fac=function(e){return new(e||Hn)(n.\u0275\u0275directiveInject(e2,16))},Hn.\u0275pipe=n.\u0275\u0275definePipe({name:"numberFormat",type:Hn,pure:!0}),Hn.\u0275prov=n.\u0275\u0275defineInjectable({token:Hn,factory:Hn.\u0275fac,providedIn:"root"});class mr{constructor(e){this._injector=e,this._unitNames=["Byte","Kilobyte","Megabyte","Gigabyte"],this._thresh=1024}_roundNumber(e,t=1){const i=10**t;return Math.round((e+Number.EPSILON)*i)/i}_evalLevel(e){return e<this._thresh?0:Math.floor(Math.log(e)/Math.log(this._thresh))}_getUnits(e,t){const i=t&&0===e&&[2,3,4].includes(t%10)&&![12,13,14].includes(t%100)?"s":"",r=this._unitNames[e]+i;return" "+this._injector.get(w.sK).instant("FileSizeUnit."+r)}transform(e,t){if("number"!=typeof e)return"string"==typeof e?e:"";let i=t?this._unitNames.indexOf(t):-1;if(-1===i&&(i=this._evalLevel(e)),e<=0)return 0+this._getUnits(i);const r=i>0?this._roundNumber(e/Math.pow(this._thresh,i)):e;return this._injector.get(Hn).transform(r)+this._getUnits(i,r)}}mr.\u0275fac=function(e){return new(e||mr)(n.\u0275\u0275directiveInject(n.Injector,16))},mr.\u0275pipe=n.\u0275\u0275definePipe({name:"memoryFormat",type:mr,pure:!0}),mr.\u0275prov=n.\u0275\u0275defineInjectable({token:mr,factory:mr.\u0275fac,providedIn:"root"});class Ai extends A_{constructor(e){super(e),this.defaultFormat={type:"sanitizeHtml"},this.formatsByDataTypeMap=new Map([])}isSupportedValue(e){return super.isSupportedValue(e)||"number"==typeof e||"boolean"==typeof e||"bigint"==typeof e||"symbol"==typeof e||e instanceof Date}}Ai.\u0275fac=function(e){return new(e||Ai)(n.\u0275\u0275directiveInject(XT,16))},Ai.\u0275pipe=n.\u0275\u0275definePipe({name:"sanitizeHtml",type:Ai,pure:!0}),Ai.\u0275prov=n.\u0275\u0275defineInjectable({token:Ai,factory:Ai.\u0275fac,providedIn:"root"});class Ri{constructor(e){this._injector=e}_sanitizeText(e,t){const i=this._injector.get(xi),r=this._injector.get(Ai);return e=i.transform(e),e=r.transform(e,{mode:"textOnly",dataType:t}),e=i.transform(e)}transform(e,t){const{dataType:i}=t??{};return o_.includes(i)?this._injector.get(Hn).transform(e,t):ob.includes(i)?this._injector.get(zn).transform(e,t):i===l.DataValueType.IMAGELOOKUP?"":"string"==typeof e?this._sanitizeText(e,i):e?.toString()}}Ri.\u0275fac=function(e){return new(e||Ri)(n.\u0275\u0275directiveInject(n.Injector,16))},Ri.\u0275pipe=n.\u0275\u0275definePipe({name:"valueFormat",type:Ri,pure:!0}),Ri.\u0275prov=n.\u0275\u0275defineInjectable({token:Ri,factory:Ri.\u0275fac,providedIn:"root"});class hr{constructor(e){this._injector=e,this._translationPrefix="SmartDateTimeFormat"}_getTranslationTemplate(e,t){const i=new Date;if(i.setDate(i.getDate()),i.toDateString()===e.toDateString())return t.instant(`${this._translationPrefix}.TodayAt`);const r=new Date;if(r.setDate(r.getDate()-1),r.toDateString()===e.toDateString())return t.instant(`${this._translationPrefix}.YesterdayAt`);const s=new Date;return s.setDate(s.getDate()-2),s.toDateString()===e.toDateString()?t.instant(`${this._translationPrefix}.DayBeforeYesterdayAt`):null}_canBeDate(e){return"string"==typeof e||"number"==typeof e||e instanceof Date}transform(e){if(this._canBeDate(e)){const t=new Date(e),i=this._injector.get(zn),r=this._injector.get(w.sK),s=this._getTranslationTemplate(t,r),o={dataType:l.DataValueType.Time};if(s)return Z.Ld.format(s,i.transform(t,o));{const c=r.instant(`${this._translationPrefix}.At`);return`${i.transform(t)} ${c} ${i.transform(t,o)}`}}return""}}hr.\u0275fac=function(e){return new(e||hr)(n.\u0275\u0275directiveInject(n.Injector,16))},hr.\u0275pipe=n.\u0275\u0275definePipe({name:"smartDateTimeFormat",type:hr,pure:!0}),hr.\u0275prov=n.\u0275\u0275defineInjectable({token:hr,factory:hr.\u0275fac,providedIn:"root"});class gr{constructor(e){this._translateService=e,this._minutesInHour=60,this._hoursInDay=24,this._daysInMonth=30,this._milisecondsInMinute=6e4,this._milisecondsInHour=this._milisecondsInMinute*this._minutesInHour,this._milisecondsInDay=this._milisecondsInHour*this._hoursInDay,this._milisecondsInMonth=this._milisecondsInDay*this._daysInMonth,this._translationPrefix="TimerDateTimeFormat",this._monthAbbreviation=this._translateService.instant(`${this._translationPrefix}.MonthAbbreviation`),this._daysAbbreviation=this._translateService.instant(`${this._translationPrefix}.DaysAbbreviation`),this._hoursAbbreviation=this._translateService.instant(`${this._translationPrefix}.HoursAbbreviation`),this._minutesAbbreviation=this._translateService.instant(`${this._translationPrefix}.MinutesAbbreviation`)}_getDisplayValue(e){const t=Math.floor(e/this._milisecondsInMinute),i=Math.floor(e/this._milisecondsInHour),r=Math.floor(e/this._milisecondsInDay),s=Math.floor(e/this._milisecondsInMonth),o="{0}{1} {2}{3}";if(s>0){const d=r%this._daysInMonth;return Z.Ld.format(o,s,this._monthAbbreviation,d,this._daysAbbreviation)}if(r>0){const d=i%this._hoursInDay;return Z.Ld.format(o,r,this._daysAbbreviation,d,this._hoursAbbreviation)}const c=t%this._minutesInHour;return Z.Ld.format(o,i,this._hoursAbbreviation,c,this._minutesAbbreviation)}transform(e){return e?this._getDisplayValue(e):""}}gr.\u0275fac=function(e){return new(e||gr)(n.\u0275\u0275directiveInject(w.sK,16))},gr.\u0275pipe=n.\u0275\u0275definePipe({name:"timerDateTimeFormat",type:gr,pure:!0}),gr.\u0275prov=n.\u0275\u0275defineInjectable({token:gr,factory:gr.\u0275fac,providedIn:"root"});var Cv,un,R_=f(36286);class fr{constructor(){this._maxMinutesValue=999,this._maxMinutesTemplate="...",this._maxValueForNormalization=10}_getDisplayValue(e){const t=Math.floor(e/R_.yJ);if(t>this._maxMinutesValue)return this._maxMinutesTemplate;const i=Math.floor((e-t*R_.yJ)/R_.qk),r=[""];return this._addNormalizedTemplatePart(t,r),this._addTemplatePart(r,"{0}:"),this._addNormalizedTemplatePart(i,r),this._addTemplatePart(r,"{1}"),Z.Ld.format(r.join(""),t,i)}_addTemplatePart(e,t){e.push(t)}_addNormalizedTemplatePart(e,t){e<this._maxValueForNormalization&&t.push("0")}transform(e){return e<0?"":this._getDisplayValue(e)}}fr.\u0275fac=function(e){return new(e||fr)},fr.\u0275pipe=n.\u0275\u0275definePipe({name:"stopwatchDateTimeFormat",type:fr,pure:!0}),fr.\u0275prov=n.\u0275\u0275defineInjectable({token:fr,factory:fr.\u0275fac,providedIn:"root"}),function(a){a.Date="date",a.DateTime="datetime",a.Time="time"}(Cv||(Cv={}));class _r{static _createFormattersRegistrationMap(e){const t=new Map;return(e=e??[]).forEach(({predicat:i,formatter:r})=>{t.set(i,r)}),t}static forRoot(e){const t=e?.default??Gn,i=this._createFormattersRegistrationMap(e?.customs),r=i.values();return{ngModule:_r,providers:[t,...r,sl,{provide:_v,useClass:t},{provide:yv,useValue:i}]}}}_r.\u0275fac=function(e){return new(e||_r)},_r.\u0275mod=n.\u0275\u0275defineNgModule({type:_r}),_r.\u0275inj=n.\u0275\u0275defineInjector({}),function(a){a.Auto="auto",a.Transparent="transparent",a.PrimaryContrast500="primary-contrast-500",a.Foreground500="foreground-500",a.Label500="label-500",a.BrandSecondary500="brand-secondary-500",a.Warning500="warn-500",a.Brand500="brand-500",a.NavigationPrimary500="navigation-primary-500",a.Primary500="primary-500"}(un||(un={}));un.PrimaryContrast500,un.Foreground500,un.Label500,un.BrandSecondary500,un.Warning500,un.Brand500,un.NavigationPrimary500,un.Primary500;var Sv;function s2(a){let e=!1;const t=[];return Object.keys(a).forEach(i=>{bv(i,a)&&(e=!0,t.push(i))}),{hasCycles:e,cycledModelsNames:t}}function bv(a,e,t=[]){if(!e[a])return!1;const i=Object.values(e[a]);return!!i.some(s=>t.includes(vv(s)))||(t.push(a),!i.every(s=>!bv(vv(s),e,t)))}function vv(a){return a.relationPath.split(".")[0]}!function(a){a.LightGreen="crt-color-light-green",a.Green="crt-color-green",a.DarkGreen="crt-color-dark-green",a.Orange="crt-color-orange",a.OrangeRed="crt-color-orange-red",a.Coral="crt-color-coral",a.BrightRed="crt-color-bright-red",a.Red="crt-color-red",a.Purple="crt-color-purple",a.Violet="crt-color-violet",a.CelestialBlue="crt-color-celestial-blue",a.Blue="crt-color-blue",a.LightBlue="crt-color-light-blue",a.NavyBlue="crt-color-navy-blue",a.DarkTurquoise="crt-color-dark-turquoise",a.Turquoise="crt-color-turquoise",a.LightGreenPastel="crt-color-light-green-pastel",a.GreenPastel="crt-color-green-pastel",a.DarkGreenPastel="crt-color-dark-green-pastel",a.OrangePastel="crt-color-orange-pastel",a.OrangeRedPastel="crt-color-orange-red-pastel",a.CoralPastel="crt-color-coral-pastel",a.BrightRedPastel="crt-color-bright-red-pastel",a.RedPastel="crt-color-red-pastel",a.PurplePastel="crt-color-purple-pastel",a.VioletPastel="crt-color-violet-pastel",a.CelestialBluePastel="crt-color-celestial-blue-pastel",a.BluePastel="crt-color-blue-pastel",a.LightBluePastel="crt-color-light-blue-pastel",a.NavyBluePastel="crt-color-navy-blue-pastel",a.DarkTurquoisePastel="crt-color-dark-turquoise-pastel",a.TurquoisePastel="crt-color-turquoise-pastel",a.PrimaryBlue="crt-color-primary-blue",a.PrimaryOrange="crt-color-primary-orange",a.PrimaryGreen="crt-color-primary-green",a.PrimaryNavi="crt-color-primary-navi",a.PrimaryGrey="crt-color-primary-grey",a.PrimaryBlack="crt-color-primary-black",a.PrimaryWhite="crt-color-primary-white"}(Sv||(Sv={}));class Iv{}new n.InjectionToken("Represents a current application theme.",{factory:()=>{const a=(0,n.inject)(vt),e=(0,n.inject)(n.Injector);return a.loadCurrentUserInfo().pipe((0,h.U)(()=>e.get(Iv)),(0,u.switchMap)(t=>t.getCurrentTheme()))}});const c2=new n.InjectionToken("Represents a default application theme.");const Dv=[l.DataValueType.Integer,l.DataValueType.Float,l.DataValueType.FLOAT1,l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Money];l.DataValueType.Lookup,l.DataValueType.Text,l.DataValueType.LONG_TEXT,l.DataValueType.MAXSIZE_TEXT,l.DataValueType.MEDIUM_TEXT,l.DataValueType.SHORT_TEXT,l.DataValueType.PHONE_TEXT,l.DataValueType.WEB_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.RICH_TEXT;var lg,ki;!function(a){a.Root="root",a.Angular="angular",a.ExecutionTracking="executionTracking"}(lg||(lg={})),function(a){a.Root="root",a.Angular="angular"}(ki||(ki={}));class Mv{constructor(e){this.ngZone=e}run(e,t,i){return this.ngZone.runOutsideAngular(e)}}class p2 extends Mv{constructor(e){super(e)}run(e,t,i){return this.ngZone.run(e,t,i)}}class yr{constructor(e){this._ngZone=e}createDefaultZones(){return{root:new Mv(this._ngZone),angular:new p2(this._ngZone)}}createZone(e,t){if(t===lg.ExecutionTracking)return new LT(e);throw new Error(`Zone ${e} with type ${t} is not supported`)}}yr.\u0275fac=function(e){return new(e||yr)(n.\u0275\u0275inject(n.NgZone))},yr.\u0275prov=n.\u0275\u0275defineInjectable({token:yr,factory:yr.\u0275fac,providedIn:"root"});let Zn=class{constructor(e){this._zoneProvider=e,this._zones=e.createDefaultZones()}init(e){var t=this;return(0,_.Z)(function*(){t._disableExecutionTrackingZone=yield(0,u.lastValueFrom)(e("DisableExecutionTrackingZone"))})()}runInZone(e,t,i,r){return this._disableExecutionTrackingZone&&e!==ki.Angular&&(e=ki.Root),(this._zones[e]??this._zones[ki.Root]).run(t,i,r)}register(e,t){if(this._zones[e])throw new Error(`Zone ${e} already registered`);const i=this._zoneProvider.createZone(e,t);return this._zones[e]=i,i}get(e){return this._zones[e]}runOutside(e){return this.runInZone(ki.Root,e)}};Zn.\u0275fac=function(e){return new(e||Zn)(n.\u0275\u0275inject(yr))},Zn.\u0275prov=n.\u0275\u0275defineInjectable({token:Zn,factory:Zn.\u0275fac,providedIn:"root"}),Zn=(0,m.gn)([en({requestType:"crt.ZoneService"}),(0,m.w6)("design:paramtypes",[yr])],Zn);class wv{get permissions(){return this._permissions}constructor(e){this._permissions=e}hasNotConfiguredPermissionsItems(){return this._permissions.byOperations?.length>0||this._permissions.byRecords?.length>0}}class qd{constructor(e){this._httpClient=e,this._serviceUrl="/rest/SectionService/"}getObjectsWithNotConfiguredPermissionsByEntityName(e){const t=this._serviceUrl+"GetNotAdministratedEntitiesByEntity";return this._httpClient.post(t,{entitySchemaName:e}).pipe((0,u.map)(i=>new wv(i)))}getObjectsWithNotConfiguredPermissionsByPageSchemaUId(e){const t=this._serviceUrl+"GetNotAdministratedEntitiesByPage";return this._httpClient.post(t,{pageSchemaUId:e}).pipe((0,u.map)(i=>new wv(i)))}setConnectedEntitiesAdministratedByEntity(e){const t=this._serviceUrl+"SetConnectedEntitiesAdministratedByEntity";return this._httpClient.post(t,{entitySchemaName:e})}setConnectedEntitiesRightsByPage(e){const t=this._serviceUrl+"SetConnectedEntitiesRightsByPage";return this._httpClient.post(t,{pageSchemaUId:e})}}qd.\u0275fac=function(e){return new(e||qd)(n.\u0275\u0275inject(D.HttpClient))},qd.\u0275prov=n.\u0275\u0275defineInjectable({token:qd,factory:qd.\u0275fac,providedIn:"root"});class $d{}class k_{handleRequest(e,t={}){let i=e;return i=this.processResponse(t,i),i.pipe((0,G.K)(r=>{let s;return r instanceof Error?s=r.message:("object"==typeof r.error?.errorInfo&&(s=r.error.errorInfo.message),"string"==typeof r.error&&(s=r.error)),s||(s=JSON.stringify(r.message)),this.processErrorMessage(s),(0,u.throwError)(()=>new Error(s))}))}processResponse(e,t){return e.skipUnsuccessfulResponse||(t=t.pipe((0,I.b)(i=>this.processUnsuccessfulResponse(i)))),t}processUnsuccessfulResponse(e){const{success:t,errorInfo:i}=e||{};!t&&i&&this.processErrorMessage(i.message)}}class Wd{constructor(e,t){this._window=e,this._windowPayloadValues=t,this._initializeEventType="initializeEvent",this._windowPayloadValuesEventType="windowPayloadValuesEvent"}_dispatchPayloadDataEvent(e,t){const i=new MessageEvent(this._windowPayloadValuesEventType,{data:e});t.dispatchEvent(i)}openWindowWithPayload(e,t,i){const r=this._window.open(e,i);r&&t&&r.addEventListener(this._initializeEventType,()=>this._dispatchPayloadDataEvent(t,r))}initializeWindowPayloadValues(){this._window.addEventListener(this._windowPayloadValuesEventType,e=>Object.assign(this._windowPayloadValues,e.data)),this._window.dispatchEvent(new Event(this._initializeEventType))}}Wd.\u0275fac=function(e){return new(e||Wd)(n.\u0275\u0275inject(se),n.\u0275\u0275inject(Sb))},Wd.\u0275prov=n.\u0275\u0275defineInjectable({token:Wd,factory:Wd.\u0275fac,providedIn:"root"});class ol{constructor(e){this._httpClient=e,this._serviceEndpoint="rest/ApiKeyProvider/"}getOrCreateApiKey(e,t){const i=this._serviceEndpoint+"GetOrCreateWebhookApiKey";return this._httpClient.post(i,{integrationName:e,webhookSource:t})}}ol.\u0275fac=function(e){return new(e||ol)(n.\u0275\u0275inject(D.HttpClient))},ol.\u0275prov=n.\u0275\u0275defineInjectable({token:ol,factory:ol.\u0275fac,providedIn:"root"});let De=class extends Ta{constructor(e,t){super(),this.httpClient=e,this._sysSettingsInfo=new Map,this._sysSettingsValuesCache=new Map,this._sysSettingsChanged$=new u.Subject,this.sysSettingsChanged$=this._sysSettingsChanged$.asObservable(),this._serviceGetSysSettingsEndpoint=`${t}/QuerySysSettings`,this._serviceSaveSysSettingsEndpoint=`${t}/PostSysSettingsValues`,this._servicePreloadSysSettingsEndpoint=`${t}/PreloadSysSettings`}_removeNotActualSettingsValues(e){e.forEach(([t,i])=>{this._getIsSysSettingCached(t)&&this._getCacheableSysSetting(t).dataValueType===l.DataValueType.Lookup&&this._sysSettingsValuesCache.delete(t)})}_getSysSettingsRequestAfterUpdate(e){const t=e.filter(i=>!this._sysSettingsInfo.has(i[0]));return 0===t.length?(0,u.of)(null):this.getByCodes(t.map(i=>i[0]))}_updateCache(e,t){const i=Object.entries(e??{}).filter(r=>t.saveResult[r[0]]);return i.filter(([r,s])=>this._sysSettingsInfo.has(r)).filter(([r,s])=>this._getIsSysSettingCacheable(r)).forEach(([r,s])=>{this._sysSettingsValuesCache.set(r,{value:s})}),this._getSysSettingsRequestAfterUpdate(i).pipe((0,h.U)(()=>t),(0,I.b)(()=>{this._removeNotActualSettingsValues(i)}),(0,I.b)(()=>{if(i.length>0){const r=i.map(s=>s[0]);this._sysSettingsChanged$.next(r)}}))}_getIsSysSettingCacheable(e){return this._sysSettingsInfo.get(e)?.isCacheable??!1}_getIsSysSettingCached(e){return this._getIsSysSettingCacheable(e)&&this._sysSettingsValuesCache.has(e)}_getCacheableSysSetting(e){const t=this._sysSettingsInfo.get(e);if(t&&t.isCacheable){const i=this._sysSettingsValuesCache.get(e);return{code:t.code,dataValueType:t.dataValueType,id:t.id,isCacheable:t.isCacheable,name:t.name,value:i.value,displayValue:i.displayValue}}return null}_setSysSettingInfo(e){this._sysSettingsInfo.set(e.code,{code:e.code,dataValueType:e.dataValueType,id:e.id,isCacheable:e.isCacheable,name:e.name})}_setSysSettingDetails(e){this._setSysSettingInfo(e),e?.isCacheable&&this._sysSettingsValuesCache.set(e.code,{displayValue:e.displayValue,value:e.value})}_requestSysSettings(e){return this.httpClient.post(this._serviceGetSysSettingsEndpoint,{sysSettingsNameCollection:e}).pipe((0,ee.B)(),(0,I.b)(t=>{e.forEach(i=>{const r=t.values[i];r&&this._setSysSettingDetails(r)})}))}_getResponseWithCachedSysSettings(e,t){return t.filter(r=>this._getIsSysSettingCached(r)).map(r=>this._getCacheableSysSetting(r)).forEach(r=>{e.values[r.code]=r}),e}_createEmptySysSettingDetailByCode(e){return{code:e,value:null,isCacheable:!0}}_updateNotFoundSettingDetails(e){return e.notFoundSettings?.forEach(t=>{const i=this._createEmptySysSettingDetailByCode(t);this._setSysSettingDetails(i),e.values[t]=i}),e}getByCodes(e){if(!e||0===e.length)return(0,u.of)({success:!0,values:{}});const t=e.filter(i=>!this._getIsSysSettingCached(i));return 0===t.length?(0,u.of)(this._getResponseWithCachedSysSettings({success:!0,values:{}},e)):this._requestSysSettings(t).pipe((0,h.U)(i=>this._getResponseWithCachedSysSettings(i,e)),(0,h.U)(i=>this._updateNotFoundSettingDetails(i)))}getByCode(e){return this.getByCodes([e]).pipe((0,h.U)(t=>t.values[e]))}getValueByCode(e,t){return this.getByCode(e).pipe((0,h.U)(i=>{const r=i?.value;return null!=r&&""!==r||void 0===t?r:t}),(0,u.catchError)(()=>(0,u.of)(t)))}updateMany(e,t=!1){const i={};return e.forEach(r=>i[r.code]=r.value),this.httpClient.post(this._serviceSaveSysSettingsEndpoint,{sysSettingsValues:i,isPersonal:t}).pipe((0,B.z)(r=>this._updateCache(i,r)),(0,ee.B)())}update(e,t=!1){return this.updateMany([e],t)}preload(){const e=(new D.HttpHeaders).set("Content-Type","application/json; charset=utf-8");return this.httpClient.post(this._servicePreloadSysSettingsEndpoint,{},{headers:e}).pipe((0,I.b)(t=>{Object.values(t.values).forEach(i=>{i.isCacheable=!0,this._setSysSettingDetails(i)})}),(0,h.U)(()=>!0),(0,u.catchError)(t=>(console.error(t),(0,u.of)(!1))))}};De.\u0275fac=function(e){return new(e||De)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Si))},De.\u0275prov=n.\u0275\u0275defineInjectable({token:De,factory:De.\u0275fac,providedIn:"root"}),De=(0,m.gn)([en({requestType:"crt.SysSettingsService"}),(0,m.w6)("design:paramtypes",[D.HttpClient,String])],De);let N_=class extends l.BaseRequestHandler{constructor(e,t,i,r,s){super(),this._copyClipboardService=e,this._notifyService=t,this._apiKeyService=i,this._maskService=r,this._sysSettingsService=s}_handleError(e){this._notifyService.showPermanently({message:e.Message})}_handleSuccess(e,t){e.isInternalIntegration?this._setResultValue(e,t):this._sysSettingsService.getByCode("WebhookURL").pipe((0,u.take)(1)).subscribe(i=>{const r=void 0===i?t:`${i.value}${t}`;this._setResultValue(e,r)})}_setResultValue(e,t){e.$context[e.resultShowAttributeName]=!0,e.$context[e.resultValueAttributeName]=t;const i=[{mimeType:"text/plain",data:t}];this._copyClipboardService.copyToBuffer(i).catch(()=>console.log("Copy to clipboard is not allowed"))}handle(e){var t=this;return(0,_.Z)(function*(){if(!0===t._syncObject)return void(yield t.next?.handle(e));t._syncObject=!0;const i="GET_API_KEY";t._maskService.showMask(i,e.$context);const r=yield(0,u.firstValueFrom)(t._apiKeyService.getOrCreateApiKey(e.integrationName,e.webhookSource));t._syncObject=!1,t._maskService.hideMask(i,e.$context),r.success?t._handleSuccess(e,r.apiKey):t._handleError(r.responseStatus),yield t.next?.handle(e)})()}};N_=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.GetApiKeyRequestHandler",requestType:"crt.GetApiKeyRequest"}),(0,m.fM)(3,(0,l.CrtInject)(Cb)),(0,m.w6)("design:paramtypes",[yd,Ot,ol,l.MaskService,De])],N_);const xv="FolderTreeRelatedElementConfigsNotifier";class V_{constructor(e,t,i){this.queryExecutor=e,this._translateService=t,this.entityConverter=i,this.absentDataErrorKey="BaseSection.AbsentDataErrorMessage",this.primaryColumnName="Id"}_convertToErrorInfo(e){return{errorCode:null,message:e.message,stackTrace:e.stack}}_addColumnsToEsq(e){this.entityConverter.getEntityColumns({}).forEach(i=>{e.addSchemaColumn(i.path)})}_createDeleteQuery(){return new l.DeleteQuery(this.entitySchemaName)}getBaseErrorResponse(e){return(0,u.of)({success:!1,errorInfo:this._convertToErrorInfo(e),result:null})}handleResponse(e){return e.pipe((0,h.U)(()=>({success:!0,errorInfo:null,result:[]})),(0,G.K)(t=>(0,u.of)({success:!1,errorInfo:this._convertToErrorInfo(t),result:[]})))}getItemByIdEsq(e){const t=new l.EntitySchemaQuery(this.entitySchemaName);return this._addColumnsToEsq(t),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,this.primaryColumnName,e),t}createGetAllItemsEsq(){const e=new l.EntitySchemaQuery(this.entitySchemaName);return this._addColumnsToEsq(e),e}getUpdateQuery(e){const t=new l.UpdateQuery(this.entitySchemaName);return this.entityConverter.getEntityColumns(e).forEach(r=>{this.primaryColumnName===r.path?t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,this.primaryColumnName,r.value):t.addColumn(r.path,r.value,r.type)}),t}getInsertQuery(e){const t=new l.InsertQuery(this.entitySchemaName);return this.entityConverter.getEntityColumns(e).forEach(r=>{this.primaryColumnName===r.path&&!r.value||t.addColumn(r.path,r.value,r.type)}),t}getDeleteQuery(e){return this.getDeleteQueryWithPrimaryColumnFilter(e.id)}getDeleteQueryWithPrimaryColumnFilter(e){const t=this._createDeleteQuery();return t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,this.primaryColumnName,e),t}loadAdditionalInfo(e){return(0,u.of)(e)}getItems(){const e=this.createGetAllItemsEsq();return this.queryExecutor.executeSelectQuery(e).pipe((0,B.z)(t=>this.loadAdditionalInfo(t)),(0,h.U)(t=>({success:!0,errorInfo:null,result:t.map(i=>this.entityConverter.getEntity(i))})),(0,G.K)(t=>this.getBaseErrorResponse(t)))}getItem(e){const t=this.getItemByIdEsq(e);return this.queryExecutor.executeSelectQuery(t).pipe((0,I.b)(i=>{if(!i||!i[0]){const r=this._translateService.instant(this.absentDataErrorKey);throw new Error(r)}}),(0,B.z)(i=>this.loadAdditionalInfo(i)),(0,h.U)(i=>({success:!0,errorInfo:null,result:[this.entityConverter.getEntity(i[0])]})),(0,G.K)(i=>this.getBaseErrorResponse(i)))}insertItem(e){const t=this.getInsertQuery(e),i=this.queryExecutor.executeInsertQuery(t);return this.handleResponse(i)}updateItem(e){const t=this.getUpdateQuery(e),i=this.queryExecutor.executeUpdateQuery(t);return this.handleResponse(i)}deleteItem(e){const t=this.getDeleteQuery(e),i=this.queryExecutor.executeDeleteQuery(t);return this.handleResponse(i)}deleteById(e){const t=this.getDeleteQueryWithPrimaryColumnFilter(e),i=this.queryExecutor.executeDeleteQuery(t);return this.handleResponse(i)}}var Yd,F_,L_,Ev=f(85029),Tv=f(83151);class me{}me.\u0275fac=function(e){return new(e||me)},me.\u0275prov=n.\u0275\u0275defineInjectable({token:me,factory:me.\u0275fac}),function(a){a[a.General=0]="General",a[a.Limited=1]="Limited"}(Yd||(Yd={})),function(a){a[a.Undefined=0]="Undefined",a[a.Filter=1]="Filter",a[a.FilterSummary=2]="FilterSummary"}(F_||(F_={})),function(a){a[a.Session=0]="Session",a[a.Workspace=1]="Workspace",a[a.Application=2]="Application"}(L_||(L_={}));class h2{constructor(e=L_.Session,t="",i=""){this._cacheLevel=e,this._cacheGroup=t,this._cacheItemName=i}getMetadata(){return{cacheLevel:this._cacheLevel,cacheGroup:this._cacheGroup,cacheItemName:this._cacheItemName}}}class Pv extends Error{constructor(e){super(`Query with config\n${JSON.stringify(e.getMetadata())}\nfinished with error.`)}}class cg extends Error{constructor(e){super(e?.error?.responseStatus?.Message||e?.responseStatus?.Message||e?.message),this.errorCode=e?.error?.responseStatus?.ErrorCode}}let ug=class extends me{constructor(e,t,i){super(),this._sysSettingsService=e,this._httpClient=t,this._dataServiceUri=i,this._defaultDebounceTime=200,this._debounceTimeSysSettingName="QueryExecutorDebounceTime",this._requests=new u.Subject,l.ValidationUtilities.checkArgumentEmpty("_httpClient",t),l.ValidationUtilities.checkArgumentEmpty("_dataServiceUri",i)}_executeWritableQuery(e,t){const r={...e.getMetadata(),queryKind:Yd.General};return this._httpClient.post(t,r).pipe((0,G.K)(s=>{throw new cg(s)}),(0,I.b)(s=>{if(!s||!s.success)throw new Pv(e)}))}_getQueryUri(e){if(e instanceof l.SelectLocalizationQuery)return`${this._dataServiceUri}/SelectLocalizationQuery`;if(e instanceof l.EntitySchemaQuery)return`${this._dataServiceUri}/SelectQuery`;if(e instanceof l.InsertQuery)return`${this._dataServiceUri}/InsertQuery`;if(e instanceof l.UpdateQuery)return`${this._dataServiceUri}/UpdateQuery`;if(e instanceof l.DeleteQuery)return`${this._dataServiceUri}/DeleteQuery`;throw new Error("Unsupported query type")}_getBundleSettings(){var e=this;return(0,_.Z)(function*(){return e._sysSettingsService?{executionDebounceTime:(yield e._sysSettingsService.getByCodes([e._debounceTimeSysSettingName])).values[e._debounceTimeSysSettingName]?.value||e._defaultDebounceTime}:Promise.resolve({executionDebounceTime:e._defaultDebounceTime})})()}_prepareDebouncedResponsesStream(){if(this._responses)return;let e=0;const t=(0,Ev.f)(this._requests.pipe((0,M.w)(()=>(0,u.from)(this._getBundleSettings())),(0,I.b)(i=>e=i.executionDebounceTime),(0,Tv.b)(e)));this._responses=this._requests.pipe(t,(0,P.h)(i=>!!i.length),(0,B.z)(i=>{const r=i.map(o=>o.id),s=i.map(o=>o.query);return this.executeBatchSelectQuery(s).pipe((0,h.U)(o=>r.reduce((c,d,p)=>c.set(d,o[p]),new Map)))}),(0,ee.B)())}_executeThrottled(e){this._prepareDebouncedResponsesStream();const t={id:(0,l.generateGuid)(),query:e},i=this._responses.pipe((0,P.h)(r=>r.has(t.id)),(0,h.U)(r=>r.get(t.id)),(0,Ee.q)(1));return i.subscribe(),this._requests.next(t),i}_executeImmediate(e){l.ValidationUtilities.checkArgumentEmpty("query",e);const t=this._getQueryUri(e),i=this._getQueryRequest(e);return this._httpClient.post(t,i).pipe((0,G.K)(r=>{throw new cg(r)}),(0,I.b)(r=>{if(!r?.rows)throw new Pv(e)}),(0,h.U)(r=>this._toSelectQueryResponse(r)))}_toSelectQueryResponse(e){const t=this.getRowsFromResponse(e);return t.rowsAffected=e.rowsAffected,e.errorInfo&&(t.errorInfo=e.errorInfo),t}_getQueryRequest(e){const t=e.getMetadata();return e instanceof l.EntitySchemaQuery?{...t,queryKind:Yd.General,serverESQCacheParameters:(new h2).getMetadata(),queryOptimize:!1,useMetrics:!1,querySource:F_.Undefined}:{...t,queryKind:Yd.General}}getRowsFromResponse(e){return e.rows}executeSelectQuery(e,t={throttled:!1}){return t.throttled?this._executeThrottled(e):this._executeImmediate(e)}executeInsertQuery(e){return this.execute(e)}executeUpdateQuery(e){return this.execute(e)}executeDeleteQuery(e){return this.execute(e)}execute(e){l.ValidationUtilities.checkArgumentEmpty("query",e);const t=this._getQueryUri(e);return this._executeWritableQuery(e,t)}executeBatchSelectQuery(e){if(l.ValidationUtilities.checkArgumentEmpty("queries",e),0===e.length)return(0,u.of)([]);const t=`${this._dataServiceUri}/BatchQuery`,i={items:[]};return i.items=e.map(r=>({...this._getQueryRequest(r),__type:"Terrasoft.Nui.ServiceModel.DataContract.SelectQuery"})),this._httpClient.post(t,i).pipe((0,G.K)(r=>{throw new cg(r)}),(0,I.b)(r=>{if(!r||r.hasErrors)throw new cg(r)}),(0,h.U)(r=>r.queryResults.map(s=>this._toSelectQueryResponse(s))))}};ug=(0,m.gn)([(0,m.fM)(0,(0,n.Optional)()),(0,m.fM)(2,(0,n.Inject)(Si)),(0,m.w6)("design:paramtypes",[l.SysSettingsService,D.HttpClient,String])],ug);let Ni=class extends ug{constructor(e,t,i,r){super(e,t,r),this._entityDeserializer=i}getRowsFromResponse(e){return this._entityDeserializer.deserializeEntities(e.rowConfig,e.rows)}};Ni.\u0275fac=function(e){return new(e||Ni)(n.\u0275\u0275inject(l.SysSettingsService,8),n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(rr),n.\u0275\u0275inject(Si))},Ni.\u0275prov=n.\u0275\u0275defineInjectable({token:Ni,factory:Ni.\u0275fac}),Ni=(0,m.gn)([en({requestType:"crt.DataServiceQueryExecutor"}),(0,m.w6)("design:paramtypes",[l.SysSettingsService,D.HttpClient,rr,String])],Ni);class Qd{}Qd.\u0275fac=function(e){return new(e||Qd)},Qd.\u0275mod=n.\u0275\u0275defineNgModule({type:Qd}),Qd.\u0275inj=n.\u0275\u0275defineInjector({providers:[u_,{provide:me,useClass:Ni}]});class Jd{}Jd.\u0275fac=function(e){return new(e||Jd)},Jd.\u0275mod=n.\u0275\u0275defineNgModule({type:Jd}),Jd.\u0275inj=n.\u0275\u0275defineInjector({providers:[u_,{provide:me,useFactory:(a,e,t)=>new ug(a,e,t),deps:[[new n.Optional,l.SysSettingsService],D.HttpClient,Si]}]});class ll{constructor(e,t,i,r){this._userInfo=e,this._httpClient=t,this._queryExecutor=i,this._messageChannelService=r,this._cache=[],this._messageChannelService.messageEvent$.pipe((0,P.h)(s=>s?.header?.sender===xv&&s?.body?.UserId!==this._userInfo.id),(0,I.b)(s=>{this._deleteConfigFromCache({folderId:s.body.FolderId})})).subscribe()}_createEntitySchemaQuery(e,t){const i=new l.EntitySchemaQuery("FolderRelatedElConfig");return i.addSchemaColumn("ElementName"),i.addSchemaColumn("ElementConfig"),this._addQueryFilters(i,{folderId:e,schemaName:t}),i}_createInsertQuery(e){const t=new l.InsertQuery("FolderRelatedElConfig");return this._addQueryColumns(t,e),t}_createUpdateQuery(e,t){const i=new l.UpdateQuery("FolderRelatedElConfig");return this._addQueryColumns(i,t),this._addQueryFilters(i,e),i}_createDeleteQuery(e){const t=new l.DeleteQuery("FolderRelatedElConfig");return this._addQueryFilters(t,e),t}_addQueryColumns(e,t){if("folderId"in t&&e.addColumn("FolderId",t.folderId,l.DataValueType.Guid),"schemaName"in t&&e.addColumn("ClientSchemaName",t.schemaName,l.DataValueType.Text),"elementName"in t&&e.addColumn("ElementName",t.elementName,l.DataValueType.Text),"elementConfig"in t){const i=t.elementConfig?JSON.stringify(t.elementConfig):"";e.addColumn("ElementConfig",i,l.DataValueType.Blob)}}_addQueryFilters(e,t){const{folderId:i,schemaName:r,elementName:s}=t;"folderId"in t&&e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"FolderId",i),"schemaName"in t&&e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ClientSchemaName",r),"elementName"in t&&e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ElementName",s)}_executeQueryAndSetCache(e,t,i){return this._queryExecutor.execute(e).pipe((0,u.map)(({success:r})=>({success:r})),(0,u.catchError)(()=>(0,u.of)({success:!1})),(0,I.b)(({success:r})=>{r&&this._setConfigToCache(t,i)}))}_setResponseToCache(e,t){const{folderId:i,schemaName:r,elementName:s}=e;t.length||t.push({ElementName:s,ElementConfig:null}),t.filter(Boolean).forEach(({ElementName:o,ElementConfig:c})=>{this._setConfigToCache({folderId:i,schemaName:r,elementName:o},c?JSON.parse(c):null)})}_isIncludeCacheKey(e,t){const{folderId:i,schemaName:r,elementName:s}=t;return!(i&&i!==e.folderId||r&&r!==e.schemaName||s&&s!==e.elementName)}_hasCachedConfig(e){const{folderId:t,schemaName:i}=e;return this._cache.some(({key:r})=>this._isIncludeCacheKey(r,{folderId:t,schemaName:i}))}_getCachedConfig(e){const{folderId:t,schemaName:i,elementName:r}=e,s=this._cache.find(({key:o})=>(0,J.Z)(o,{folderId:t,schemaName:i,elementName:r}));return s?.value?(0,q.Z)(s.value):null}_setConfigToCache(e,t){const{folderId:i,schemaName:r,elementName:s}=e,o=this._cache.filter(({key:c})=>this._isIncludeCacheKey(c,e));o.length?o.forEach(c=>c.value=t):i&&r&&s&&this._cache.push({key:{folderId:i,schemaName:r,elementName:s},value:t})}_deleteConfigFromCache(e){this._cache=this._cache.filter(({key:t})=>!this._isIncludeCacheKey(t,e))}get(e){const{folderId:t,schemaName:i,elementName:r}=e??{};if(!t||!i||!r)return(0,u.of)(null);if(this._hasCachedConfig(e))return(0,u.of)(this._getCachedConfig(e));const s=this._createEntitySchemaQuery(t,i);return this._queryExecutor.executeSelectQuery(s).pipe((0,I.b)(o=>this._setResponseToCache(e,o)),(0,u.map)(()=>this._getCachedConfig(e)),(0,u.catchError)(()=>(0,u.of)(null)))}create(e){const{folderId:t,schemaName:i,elementName:r}=e??{};if(!t||!i||!r)return(0,u.of)({success:!1});const s=this._createInsertQuery(e);return this._executeQueryAndSetCache(s,e,e.elementConfig)}update(e,t){const{folderId:i,schemaName:r,elementName:s}=e??{};if(!i&&!r&&!s||!t)return(0,u.of)({success:!1});const o=this._createUpdateQuery(e,t);return this._executeQueryAndSetCache(o,e,t.elementConfig)}delete(e){const{folderId:t,schemaName:i,elementName:r}=e??{};if(!t&&!i&&!r)return(0,u.of)({success:!1});const s=this._createDeleteQuery(e);return this._executeQueryAndSetCache(s,e,null)}copy(e,t){return e&&t?this._httpClient.post("rest/FolderRelatedElConfigService/Copy",{sourceFolderId:e,targetFolderId:t}).pipe((0,I.b)(()=>this._deleteConfigFromCache({folderId:t})),(0,u.map)(()=>({success:!0})),(0,u.catchError)(()=>(0,u.of)({success:!1}))):(0,u.of)({success:!1})}}ll.\u0275fac=function(e){return new(e||ll)(n.\u0275\u0275inject(Q),n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(me),n.\u0275\u0275inject(ct))},ll.\u0275prov=n.\u0275\u0275defineInjectable({token:ll,factory:ll.\u0275fac,providedIn:"root"});class Av{constructor(){this._cache=new Map}setToCache(e,t){this._cache.set(e,t)}deleteFromCache(e){this._cache.delete(e)}getFromCache(e){return this._cache.get(e)}}class O_ extends Av{constructor(){super(...arguments),this.httpClient=(0,n.inject)(D.HttpClient)}_createCacheKey(e,t={}){return`${e}!${JSON.stringify(t)}`}_cacheRequest(e,t){const i=this.getFromCache(t);if((0,Dt.Z)(i)){const r=e().pipe((0,u.shareReplay)({bufferSize:1,refCount:!1}));return this.setToCache(t,r),r}return i}executePostRequestWithCache(e,t={}){const i=`${this.serviceEndpoint}/${e}`,r=this._createCacheKey(e,t);return this._cacheRequest(()=>this.httpClient.post(i,t),r)}executeGetRequestWithCache(e){const t=`${this.serviceEndpoint}/${e}`,i=this._createCacheKey(e);return this._cacheRequest(()=>this.httpClient.get(t),i)}resetCache(e,t={}){const i=this._createCacheKey(e,t);this.deleteFromCache(i)}}class Kd extends Av{constructor(e){super(),this._folderTreeRelatedElementConfigsRepository=e}_getCachingKey(e){const{folderId:t,schemaName:i,elementName:r}=e;return`${t}_${i}_${r}`}_isValidFolderSettingsConfig(e){const{folderId:t,schemaName:i,elementName:r}=e;return!!t&&!!i&&!!r}get(e){if(!this._isValidFolderSettingsConfig(e))return(0,u.of)(null);const t=this.getUnsaved(e);return t?(0,u.of)(t):this._folderTreeRelatedElementConfigsRepository.get(e)}getUnsaved(e){if(!this._isValidFolderSettingsConfig(e))return null;const t=this._getCachingKey(e),i=this.getFromCache(t);return(0,q.Z)(i)??null}setUnsaved(e,t){if(!this._isValidFolderSettingsConfig(e))return;const i=this._getCachingKey(e);this.setToCache(i,(0,q.Z)(t))}clear(e){return this._isValidFolderSettingsConfig(e)?this._folderTreeRelatedElementConfigsRepository.get(e).pipe((0,u.switchMap)(t=>t?this._folderTreeRelatedElementConfigsRepository.delete(e):(0,u.of)({success:!0})),(0,u.tap)(()=>this.clearUnsaved(e))):(0,u.of)({success:!1})}clearUnsaved(e){if(!this._isValidFolderSettingsConfig(e))return;const t=this._getCachingKey(e);this.deleteFromCache(t)}save(e){if(!this._isValidFolderSettingsConfig(e))return(0,u.of)({success:!1});const t=this.getUnsaved(e);return t?this._folderTreeRelatedElementConfigsRepository.get(e).pipe((0,u.switchMap)(i=>i?this._folderTreeRelatedElementConfigsRepository.update(e,{elementConfig:t}):this._folderTreeRelatedElementConfigsRepository.create({...e,elementConfig:t})),(0,u.tap)(()=>this.clearUnsaved(e))):(0,u.of)({success:!1})}}Kd.\u0275fac=function(e){return new(e||Kd)(n.\u0275\u0275inject(ll))},Kd.\u0275prov=n.\u0275\u0275defineInjectable({token:Kd,factory:Kd.\u0275fac,providedIn:"root"});let mt=class extends O_{constructor(){super(...arguments),this.serviceEndpoint="rest/RightsService"}_getSchemaDeleteRights(e){return this.executePostRequestWithCache("GetSchemaDeleteRights",e).pipe((0,h.U)(t=>({result:t&&0===t.GetSchemaDeleteRightsResult?.length,message:t?.GetSchemaDeleteRightsResult})))}_getCanDeleteByRecord(e){const t=`${this.serviceEndpoint}/GetCanDelete`;return this.httpClient.post(t,e).pipe((0,h.U)(i=>({result:i&&0===i.GetCanDeleteResult?.length,message:i?.GetCanDeleteResult})))}_getCanAddData(e){const t=e.map(r=>this.getFromCache(`GetCanAdd_${r}`)).filter(r=>!!r),i=e.filter(r=>!t.find(s=>s.schemaName===r));return{cachedResult:t,requestSchemaNames:i}}getCanExecuteOperation(e){return this.getCanExecuteOperations([e]).pipe((0,B.z)(t=>(0,u.of)((t||[])[0])))}getCanExecuteOperations(e){return(0,u.combineLatest)(e.map(t=>this.executePostRequestWithCache("GetCanExecuteOperation",{operation:t}).pipe((0,h.U)(i=>i?.GetCanExecuteOperationResult))))}getCanAdd(e){const t="GetCanAdd",{cachedResult:i,requestSchemaNames:r}=this._getCanAddData(e);if(!r.length)return(0,u.of)(i);const s=`${this.serviceEndpoint}/${t}`;return this.httpClient.post(s,r).pipe((0,h.U)(o=>o.map(c=>({schemaName:c.Key,result:(0,O.Z)(c.Value),errorMessage:c.Value}))),(0,I.b)(o=>o.forEach(c=>this.setToCache(`${t}_${c.schemaName}`,c))),(0,h.U)(o=>o.concat(i)))}getCanEdit(e){const t=`${this.serviceEndpoint}/GetCanEdit`;return this.httpClient.post(t,e).pipe((0,h.U)(i=>({result:i&&0===i.GetCanEditResult?.length,message:i?.GetCanEditResult})))}getCanDelete(e){if(e.primaryColumnValue)return this._getCanDeleteByRecord(e);const t={schemaName:e.schemaName};return this._getSchemaDeleteRights(t)}copyRights(e){const t=`${this.serviceEndpoint}/CopyRights`;return this.httpClient.post(t,e)}getCanEditColumns(e){return this.executePostRequestWithCache("GetCanEditColumns",e).pipe((0,h.U)(t=>{const r={};return(t?.GetCanEditColumnsResult??[]).forEach(s=>r[s.Key]=s.Value),r}))}getCanReadColumns(e){return this.executePostRequestWithCache("GetCanReadColumns",e).pipe((0,h.U)(t=>{const r={};return(t?.GetCanReadColumnsResult??[]).forEach(s=>r[s.Key]=s.Value),r}))}getCanExecuteEntityOperation(e,t){const i=`${this.serviceEndpoint}/GetCanExecuteEntityOperation`,r={entitySchemaName:e,entityOperationCode:t};return this.httpClient.post(i,r).pipe((0,B.z)(s=>(0,u.of)(s?.GetCanExecuteEntityOperationResult)))}getAclGranted(e){return(0,u.firstValueFrom)(this.executeGetRequestWithCache("GetReadDeniedEntityList")).then(t=>!t.GetReadDeniedEntityListResult.includes(e),t=>(console.error(`Error while making request to ReadDeniedEntityList: ${t}`),!0))}};mt.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(mt)))(t||mt)}}(),mt.\u0275prov=n.\u0275\u0275defineInjectable({token:mt,factory:mt.\u0275fac,providedIn:"root"}),mt=(0,m.gn)([en({requestType:"crt.RightsService"})],mt);let Cr=class{};Cr.\u0275fac=function(e){return new(e||Cr)},Cr.\u0275mod=n.\u0275\u0275defineNgModule({type:Cr}),Cr.\u0275inj=n.\u0275\u0275defineInjector({providers:[GS,{provide:c_,useFactory:a=>e=>e?.header?.sender===xv&&e?.body?.UserId!==a?.id,deps:[Q],multi:!0},{provide:fb,useClass:mt}],imports:[y.CommonModule]}),Cr=(0,m.gn)([(0,l.CrtModule)({requestHandlers:[N_]})],Cr);let Rv=class extends l.BaseRequest{};Rv=(0,m.gn)([(0,l.CrtRequest)({type:"crt.GetApiKeyRequest"})],Rv);class Xd{}Xd.\u0275fac=function(e){return new(e||Xd)},Xd.\u0275mod=n.\u0275\u0275defineNgModule({type:Xd}),Xd.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});class ep{constructor(e){this._httpClient=e,this._serviceUrl="ServiceModel/WorkspaceExplorerService.svc/"}buildPackage(e){const t=this._serviceUrl+"BuildPackage",i=JSON.stringify({packageName:e});return this._httpClient.post(t,i,{headers:{"content-type":"application/json"}})}compile(){const e=this._serviceUrl+"Build";return this._httpClient.post(e,null)}compileAll(){const e=this._serviceUrl+"Rebuild";return this._httpClient.post(e,null)}buildConfiguration(){const e=this._serviceUrl+"BuildConfiguration";return this._httpClient.post(e,null)}runODataBuild(){const e=this._serviceUrl+"RunODataBuild";return this._httpClient.post(e,null)}}ep.\u0275fac=function(e){return new(e||ep)(n.\u0275\u0275inject(D.HttpClient))},ep.\u0275prov=n.\u0275\u0275defineInjectable({token:ep,factory:ep.\u0275fac,providedIn:"root"});class tp{constructor(e){this._httpClient=e,this._serviceUrl="ServiceModel/SchemaDataDesignerService.svc/"}getAvailableEntitySchemas(e){const t=this._serviceUrl+"GetAvailableEntitySchemas";return this._httpClient.post(t,{packageUId:e})}}tp.\u0275fac=function(e){return new(e||tp)(n.\u0275\u0275inject(D.HttpClient))},tp.\u0275prov=n.\u0275\u0275defineInjectable({token:tp,factory:tp.\u0275fac});class np{constructor(e){this._httpClient=e,this._serviceUrl="ServiceModel/WorkspaceExplorerService.svc/"}updateDBStructure(e){const t=this._serviceUrl+"UpdateDBStructure";return this._httpClient.post(t,e)}}np.\u0275fac=function(e){return new(e||np)(n.\u0275\u0275inject(D.HttpClient))},np.\u0275prov=n.\u0275\u0275defineInjectable({token:np,factory:np.\u0275fac,providedIn:"root"});class ip{constructor(e){this._httpClient=e}getAllowStandaloneAssembly(){return this._allowStandaloneAssemblyEnabled$||(this._allowStandaloneAssemblyEnabled$=this._httpClient.post("/ServiceModel/PackageService.svc/GetAllowStandaloneAssembly",null).pipe((0,_i.d)(1)),this._allowStandaloneAssemblyEnabled$.subscribe()),this._allowStandaloneAssemblyEnabled$}}ip.\u0275fac=function(e){return new(e||ip)(n.\u0275\u0275inject(D.HttpClient))},ip.\u0275prov=n.\u0275\u0275defineInjectable({token:ip,factory:ip.\u0275fac,providedIn:"root"});class ap{constructor(e){this._httpClient=e,this._appInstallerServiceUrl="ServiceModel/AppInstallerService.svc/",this._restartApplication="RestartApp"}restartApp(){const e=`${this._appInstallerServiceUrl}${this._restartApplication}`;return this._httpClient.post(e,null)}}ap.\u0275fac=function(e){return new(e||ap)(n.\u0275\u0275inject(D.HttpClient))},ap.\u0275prov=n.\u0275\u0275defineInjectable({token:ap,factory:ap.\u0275fac,providedIn:"root"});class rp{constructor(e){this._httpClient=e,this._serviceUrl="api/ConfigurationStatus/"}getConfigurationStatusReport(){const e=this._serviceUrl+"GetConfigurationStatusReport";return this._httpClient.get(e)}getLastCompilationResult(){const e=this._serviceUrl+"GetLastCompilationResult";return this._httpClient.get(e)}}rp.\u0275fac=function(e){return new(e||rp)(n.\u0275\u0275inject(D.HttpClient))},rp.\u0275prov=n.\u0275\u0275defineInjectable({token:rp,factory:rp.\u0275fac,providedIn:"root"});(0,l.generateGuid)();var kv,ie;!function(a){a[a.General=0]="General",a[a.Assembly=1]="Assembly"}(kv||(kv={})),function(a){a[a.SqlScript=0]="SqlScript",a[a.SchemaData=1]="SchemaData",a[a.Assembly=2]="Assembly",a[a.EntitySchema=3]="EntitySchema",a[a.ClientUnitSchema=4]="ClientUnitSchema",a[a.SourceCodeSchema=5]="SourceCodeSchema",a[a.ProcessSchema=6]="ProcessSchema",a[a.DcmSchema=7]="DcmSchema",a[a.ProcessUserTaskSchema=8]="ProcessUserTaskSchema",a[a.CampaignSchema=9]="CampaignSchema",a[a.ServiceSchema=10]="ServiceSchema",a[a.AddonSchema=11]="AddonSchema",a[a.CopilotIntentSchema=12]="CopilotIntentSchema"}(ie||(ie={}));const g2=new Array("constructor","ngOnDestroy");let j_=!1;const B_=new Proxy({},{get(a,e){if(j_||g2.includes(e))return a[e];throw new Error(`FEATURE_VALUES. "${String(e)}" not loaded`)}}),f2={provide:te,useFactory:()=>B_};let Me=class{constructor(e){this.httpClient=e,this._getFeatureStatesEndpoint="rest/FeatureService/GetFeatureStates",this._cachedCodes=new Map,this._destroyed$=new u.Subject}loadFeatureStates(){return this._featureStates$||(this._featureStates$=this.httpClient.post(this._getFeatureStatesEndpoint,{}).pipe((0,h.U)(e=>(e.GetFeatureStatesResult.forEach(t=>{this._cachedCodes.set(t.Key,1===t.Value)}),Object.fromEntries(this._cachedCodes.entries()))),(0,I.b)(e=>{Object.assign(B_,e),Object.freeze(B_),j_=!0}),(0,G.K)(()=>(j_=!0,(0,u.of)(null))),(0,ee.B)(),(0,L.R)(this._destroyed$))),this._featureStates$}getFeatureState(e){return e?this._cachedCodes.size>0?(0,u.of)(this._cachedCodes.get(e)||!1):this.loadFeatureStates().pipe((0,h.U)(()=>this._cachedCodes.get(e)||!1)):(0,u.of)(!1)}getFeaturesState(e){return(0,u.from)(this.getFeaturesStateAsync(e))}getFeaturesStateAsync(e){return Promise.all(e.map(t=>{const i="string"==typeof t?this.getFeatureState(t):t;return new Promise(r=>i.pipe((0,we.P)()).subscribe({next:r}))}))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}};Me.\u0275fac=function(e){return new(e||Me)(n.\u0275\u0275inject(D.HttpClient))},Me.\u0275prov=n.\u0275\u0275defineInjectable({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me=(0,m.gn)([en({requestType:"crt.FeatureService"}),(0,m.w6)("design:paramtypes",[D.HttpClient])],Me);const y2={provide:n.APP_INITIALIZER,useFactory:function _2(a){return()=>(0,u.lastValueFrom)(a.loadFeatureStates(),{defaultValue:null})},deps:[Me],multi:!0};class ae{static _getClientUnitSchemaInfo(e,t={isInterfaceDesignerFeatureOn:!1}){const i=t.isInterfaceDesignerFeatureOn?this.getInterfaceDesignerOpenTemplate():ae._clientUnitSchemaDesignerUrl+"/{0}";return{itemTypes:[ie.ClientUnitSchema],itemType:ie.ClientUnitSchema,createTemplate:t.createTemplate,createDialogComponentName:t.createDialogComponentName,openTemplate:e+i,itemTitle:t.itemTitle,name:t.name}}static _addAngularSchemaInfo(e,t){e.splice(3,0,ae._getClientUnitSchemaInfo(t,{createTemplate:t+"InterfaceDesigner?packageUId={0}&useFullHierarchy={1}",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.AngularSchema",createDialogComponentName:"page-template-lookup",isInterfaceDesignerFeatureOn:!0,name:"angular-schema"}))}static _addExtendingAngularSchemaInfo(e,t){const i={createTemplate:t+ae._clientUnitSchemaDesignerUrl+"/new?packageId={0}&packageName={1}&schemaType=9&extendParent=true",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.ExtendedAngularSchema",name:"extended-angular-schema"};e.splice(10,0,ae._getClientUnitSchemaInfo(t,i))}static _getEntitySchemaInfo(e,t){return{itemTypes:[ie.EntitySchema],itemType:ie.EntitySchema,createTemplate:e+`EntitySchemaDesigner/new?packageId={0}&packageName={1}&useFullHierarchy={2}&extendParent=${t.isExtendParent}`,openTemplate:e+this.getEntitySchemaDesignerOpenTemplate(),itemTitle:t.itemTitle,name:t.name}}constructor(e){this._features=e}static getEntitySchemaDesignerOpenTemplate(){return"EntitySchemaDesigner/{0}?packageId={1}&packageName={2}&useFullHierarchy={3}"}static getInterfaceDesignerOpenTemplate(){return"InterfaceDesigner/{0}?packageUId={1}&useFullHierarchy={2}"}static getSourceCodeDesignerOpenTemplate(){return`${this._sourceCodeSchemaDesignerCodeUrl}/{0}`}static getUserCodeDesignerOpenTemplate(){return"UserTaskSchemaDesigner/{0}"}getCurrentAppUrl(){let e=location.href;return e=e.replace(location.hash,""),y.Location.joinWithSlash(e,"#/")}getSchemaMetaDataUrl(e,t,i){return`${this.getCurrentAppUrl()}SchemaMetaDataDesigner/${e}/${t}/${i}`}getMetaItemsSourceCodeUrl(e){return`${this.getCurrentAppUrl()}${ae._sourceCodeSchemaDesignerCodeUrl}/${e}?showMetaItemSourceCode=true`}getClientUnitSchemaDesignerUrl(e){return`${this.getCurrentAppUrl()}${ae._clientUnitSchemaDesignerUrl}/${e}`}getAppsInfo(){const e=this.getCurrentAppUrl(),t=Au(),i=je();return this._features.getFeaturesState(["DisableUserTaskSchemaDesignerComponent","AllowCreateAngularSchema"]).pipe((0,h.U)(([s,o])=>{const c=[ae._getEntitySchemaInfo(e,{name:"entity-schema",isExtendParent:!1,itemTitle:"WorkspaceExplorer.Section.Items.Add.Entity"}),ae._getEntitySchemaInfo(e,{name:"replacing-entity-schema",isExtendParent:!0,itemTitle:"WorkspaceExplorer.Section.Items.Add.ReplacingEntity"}),{name:"source-code-schema-designer",itemTypes:[ie.SourceCodeSchema],itemType:ie.SourceCodeSchema,createTemplate:e+`${ae._sourceCodeSchemaDesignerCodeUrl}/new?packageId={0}&packageName={1}`,openTemplate:e+ae.getSourceCodeDesignerOpenTemplate(),itemTitle:"WorkspaceExplorer.Section.Items.Add.SourceCode"},ae._getClientUnitSchemaInfo(e,{createTemplate:e+ae._clientUnitSchemaDesignerUrl+"/new?packageId={0}&packageName={1}&schemaType=1",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.Module",name:"client-unit-schema-module"}),ae._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=2",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.EditViewModelSchema",name:"client-unit-schema-page-view-model"}),ae._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=3",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.ModuleViewModelSchema",name:"client-unit-schema-section-view-model"}),ae._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=5",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.GridDetailViewModelSchema",name:"client-unit-schema-detail-list-view-model"}),ae._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=6",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.EditControlsDetailViewModelSchema",name:"client-unit-schema-detail-fields-view-model"}),ae._getClientUnitSchemaInfo(e,{createTemplate:e+ae._clientUnitSchemaDesignerUrl+"/new?packageId={0}&packageName={1}&schemaType=0&extendParent=true",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.ExtendedClientUnitSchema",name:"client-unit-schema-replacing-view-model"}),{name:"business-process-schema-designer",itemTypes:[ie.ProcessSchema],itemType:ie.ProcessSchema,createTemplate:i+"Nui/ViewModule.aspx?vm=SchemaDesigner#process/add/{0}",openTemplate:i+"Nui/ViewModule.aspx?vm=SchemaDesigner#process/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.BusinessProcess"},{name:"rest-services",itemTypes:[ie.ServiceSchema],itemType:ie.ServiceSchema,createTemplate:i+"Nui/ViewModule.aspx?vm=WebServicesDesigner#add/Rest/packageUId/{0}",openTemplate:i+"Nui/ViewModule.aspx?vm=WebServicesDesigner#edit/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.RestService"},{name:"soap-services",itemTypes:[ie.ServiceSchema],itemType:ie.ServiceSchema,createTemplate:i+"Nui/ViewModule.aspx?vm=WebServicesDesigner#add/Soap/packageUId/{0}",openTemplate:i+"Nui/ViewModule.aspx?vm=WebServicesDesigner#edit/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.SoapService"},{name:"dcm-designer",itemTypes:[ie.DcmSchema],itemType:ie.DcmSchema,createTemplate:"",openTemplate:t+"/Nui/ViewModule.aspx?vm=DcmDesigner#case/{0}",itemTitle:"DcmDesigner"},{name:"user-task-schema-designer",itemTypes:[ie.ProcessUserTaskSchema],itemType:ie.ProcessUserTaskSchema,createTemplate:s?t+"/Designers/ProcessUserTaskSchemaDesigner.aspx?packageUId={0}&isExtendParent=false&isNewSchema=1&autoCreateDesignInstance=true":e+"UserTaskSchemaDesigner/new?packageId={0}&packageName={1}",openTemplate:s?t+"/Designers/ProcessUserTaskSchemaDesigner.aspx?id={0}&autoCreateDesignInstance=true":e+ae.getUserCodeDesignerOpenTemplate(),itemTitle:"WorkspaceExplorer.Section.Items.Add.UserTask"},{name:"campaign-designer",itemTypes:[ie.CampaignSchema],itemType:ie.CampaignSchema,createTemplate:"",openTemplate:t+"/Nui/ViewModule.aspx?vm=CampaignDesigner#campaign/{0}",itemTitle:"CampaignDesigner"},{name:"sql-script-schema-designer",itemTypes:[ie.SqlScript],itemType:ie.SqlScript,createTemplate:e+"SqlScriptSchemaDesigner/new?packageId={0}&packageName={1}",openTemplate:e+"SqlScriptSchemaDesigner/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.Sql"},{name:"data-binding",itemTypes:[ie.SchemaData],itemType:ie.SchemaData,createTemplate:e+"SchemaDataDesigner/new?packageId={0}&packageName={1}",openTemplate:e+"SchemaDataDesigner/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.DataBinding"},{name:"addon-schema",itemTypes:[ie.AddonSchema],itemType:ie.AddonSchema,createTemplate:"",openTemplate:this.getSchemaMetaDataUrl("{0}",ie.AddonSchema,"{1}"),itemTitle:""},{name:"copilot-intent-schema",itemTypes:[ie.CopilotIntentSchema],itemType:ie.CopilotIntentSchema,createTemplate:"",openTemplate:this.getSchemaMetaDataUrl("{0}",ie.CopilotIntentSchema,"{1}"),itemTitle:""}];return ae._addAngularSchemaInfo(c,e),o&&ae._addExtendingAngularSchemaInfo(c,e),{success:!0,appsInfo:c}}))}}ae._sourceCodeSchemaDesignerCodeUrl="SourceCodeSchemaDesigner",ae._clientUnitSchemaDesignerUrl="ClientUnitSchemaDesigner",ae.\u0275fac=function(e){return new(e||ae)(n.\u0275\u0275inject(Me))},ae.\u0275prov=n.\u0275\u0275defineInjectable({token:ae,factory:ae.\u0275fac,providedIn:"root"});class sp{constructor(e){this._httpClient=e,this._serviceUrl="/ServiceModel/AppearanceSettingsService.svc/"}getAppearanceSettings(e){return this._httpClient.post(this._serviceUrl+"GetAppearanceSettings",{schemaName:e}).pipe((0,h.U)(t=>t.value))}}sp.\u0275fac=function(e){return new(e||sp)(n.\u0275\u0275inject(D.HttpClient))},sp.\u0275prov=n.\u0275\u0275defineInjectable({token:sp,factory:sp.\u0275fac,providedIn:"root"});class C2{}class op{getBaseUrl(){return l_()}}op.\u0275fac=function(e){return new(e||op)},op.\u0275prov=n.\u0275\u0275defineInjectable({token:op,factory:op.\u0275fac,providedIn:"root"});let Nv=null;new n.InjectionToken("Authentication settings");class lp{constructor(e,t){this.httpClient=e,this.urlService=t;const r=`${t.getBaseUrl()}/ServiceModel/AuthService.svc`;this._serviceChangePasswordServiceEndpoint=`${r}/DoChangePasswordLogin`,this._serviceGetAuthenticationSettingsEndpoint=`${r}/GetAuthenticationSettings`,this._serviceGetAccessibleAuthFlowsEndpoint=`${r}/GetAccessibleAuthFlows`,this._serviceStartTextCodeAuthFlowEndpoint=`${r}/StartTextCodeAuthFlow`}getDoPasswordChange(e){return this.httpClient.post(this._serviceChangePasswordServiceEndpoint,e)}getAuthenticationSettings(){return this.httpClient.post(this._serviceGetAuthenticationSettingsEndpoint,"")}getAccessibleAuthFlows(e){return this.httpClient.post(this._serviceGetAccessibleAuthFlowsEndpoint,e)}initializeCachedSettings(){return this.getAuthenticationSettings().pipe((0,u.map)(e=>{Nv=e}))}startTextCodeAuthFlow(e={},t=""){const i={};return t&&(i.headers={"X-Second-Factor-Provider-Name":t}),this.httpClient.post(this._serviceStartTextCodeAuthFlowEndpoint,e,i)}}lp.\u0275fac=function(e){return new(e||lp)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(C2))},lp.\u0275prov=n.\u0275\u0275defineInjectable({token:lp,factory:lp.\u0275fac,providedIn:"root"});class Sr{constructor(e,t){this.httpClient=e,this._userInfo=t,this._serviceEndpoint=(this._userInfo.isSSP?"ssp/":"")+"rest/ConfigurationDataService/",this._cachedEntityConfigurationData=new Map,this._cachedEntityUIdsData=new Map}_getUncachedEntities(e){return e.filter(t=>!this._cachedEntityConfigurationData.has(t))}_loadEntitiesData(e){const t=this._serviceEndpoint+"GetEntityData";return this.httpClient.post(t,e)}_getEntitiesData(e,t){return this._loadEntitiesData(e).pipe((0,h.U)(i=>i.success&&(0,O.Z)(i.errorInfo)?(this._setEntitiesDataToCache(i.data),this._getEntitiesDataResponse(t)):i))}_setEntitiesDataToCache(e){const{entitiesStructure:t,modulesStructure:i}=e;this._setEntityStructureToCache(t),this._setModuleStructureToCache(i)}_setEntityStructureToCache(e){e.forEach(t=>{const i=t.entitySchemaName,r={entityStructure:t,moduleStructure:null};this._cachedEntityConfigurationData.set(i,r)})}_setModuleStructureToCache(e){e.forEach(t=>{const i=t.entitySchemaName,r=this._cachedEntityConfigurationData.get(i);r&&(r.moduleStructure=t,this._cachedEntityConfigurationData.set(i,r))})}_getEntitiesDataFromCache(e){const t={entitiesStructure:[],modulesStructure:[]};return e.forEach(i=>{const r=this._cachedEntityConfigurationData.get(i);r&&(t.entitiesStructure.push(r.entityStructure),t.modulesStructure.push(r.moduleStructure))}),t}_getEntitiesDataResponse(e){return{data:this._getEntitiesDataFromCache(e),success:!0}}getData(e=!1){if(e&&(this._cachedFullConfigurationData$=void 0),this._cachedFullConfigurationData$)return this._cachedFullConfigurationData$;const t=this._serviceEndpoint+"GetData";return this._cachedFullConfigurationData$=this.httpClient.post(t,e).pipe((0,_i.d)({refCount:!0}))}getEntityData(e,t=!1){return this.getEntitiesData([e],t).pipe((0,h.U)(i=>({data:{entityStructure:i?.data?.entitiesStructure[0],moduleStructure:i?.data?.modulesStructure[0]},success:i?.success,errorInfo:i?.errorInfo})))}getEntityUId(e){if(this._cachedEntityUIdsData.has(e))return(0,u.of)(this._cachedEntityUIdsData.get(e));const t=this._serviceEndpoint+"GetEntityUIds";return this.httpClient.post(t,[e]).pipe((0,h.U)(i=>{const r={data:{entityUIds:i?.data?.entityUIds},success:i?.success,errorInfo:i?.errorInfo};return this._cachedEntityUIdsData.set(e,r),r}))}getEntitiesData(e,t=!1){const i=(0,Hf.Z)(e);if(t)return this._getEntitiesData(i,i);const r=this._getUncachedEntities(i);return(0,O.Z)(r)?(0,u.of)(this._getEntitiesDataResponse(i)):this._getEntitiesData(r,i)}clearCachedData(){this._cachedFullConfigurationData$=void 0}}Sr.\u0275fac=function(e){return new(e||Sr)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Q))},Sr.\u0275prov=n.\u0275\u0275defineInjectable({token:Sr,factory:Sr.\u0275fac,providedIn:"root"});n.APP_INITIALIZER,n.Injector;class cp{constructor(e,t){this.sysSettingsService=e,this.queryExecutor=t}_getPrimarySysSettingValue(){return this.sysSettingsService.getByCodes(["PrimaryCurrency"]).pipe((0,h.U)(e=>e.values.PrimaryCurrency))}getCurrencyById(e){const t=new l.EntitySchemaQuery("Currency");return t.addSchemaColumn("Code"),t.addSchemaColumn("Id"),t.addSchemaColumn("Name"),t.addSchemaColumn("ShortName"),t.addSchemaColumn("Symbol"),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Id",e),this.queryExecutor.executeSelectQuery(t).pipe((0,h.U)(i=>i[0]))}getPrimaryCurrencyInfo(){return this._primaryCurrencyCache?(0,u.of)(this._primaryCurrencyCache):this._getPrimarySysSettingValue().pipe((0,M.w)(e=>this.getCurrencyById(e.value).pipe((0,h.U)(t=>(this._primaryCurrencyCache=t,t)))),(0,ee.B)())}}cp.\u0275fac=function(e){return new(e||cp)(n.\u0275\u0275inject(De),n.\u0275\u0275inject(me))},cp.\u0275prov=n.\u0275\u0275defineInjectable({token:cp,factory:cp.\u0275fac,providedIn:"root"});class up{constructor(e,t){this.httpClient=e,this._userInfo=t,this._dcmSchemasMap=new Map,this._dcmSchemaItemsMap=new Map,this.serviceEndpoint="DataService/"+(this._userInfo.isSSP?"ssp/":"")+"json/SyncReply/"}getDcmSchemaDataCollection(){if(this._dcmSchemaData)return(0,u.of)(this._dcmSchemaData);const e=this.serviceEndpoint+"DcmSchemaManagerRequest";return this.httpClient.post(e,{}).pipe((0,I.b)(t=>this._dcmSchemaData=t?.collection),(0,h.U)(t=>t?.collection))}getDcmSchemaData(e){const t=this._dcmSchemasMap.get(e);if(t)return(0,u.of)(t);const i=this.serviceEndpoint+"DcmSchemaInfoRequest";return this.httpClient.post(i,{uId:e}).pipe((0,I.b)(r=>this._dcmSchemasMap.set(e,r)),(0,h.U)(r=>r))}getDcmSchemaDataItems(e){const t=this._dcmSchemaItemsMap.get(e);if(t)return(0,u.of)(t);const i=this.serviceEndpoint+"DcmSchemaInfoItemsRequest";return this.httpClient.post(i,{entitySchemaUId:e}).pipe((0,I.b)(r=>this._dcmSchemaItemsMap.set(e,r?.collection)),(0,h.U)(r=>r?.collection))}getDcmRunningProcess(e,t){const i=this.serviceEndpoint+"DcmRunningProcessRequest";return this.httpClient.post(i,{contractName:"DcmRunningProcessRequest",entitySchemaUId:e,recordId:t}).pipe((0,h.U)(r=>({name:r?.Name,uId:r?.UId,success:r?.success})))}getAllowedStages(e){return this.httpClient.post("rest/DcmService/GetAllowedStagesForCurrentUser",{dcmSchemaUId:e}).pipe((0,h.U)(i=>i.GetAllowedStagesForCurrentUserResult))}getDcmStageColumnName(e){return this.httpClient.post("rest/DcmService/GetDcmStageColumnName",{entitySchemaId:e}).pipe((0,h.U)(i=>i.GetDcmStageColumnNameResult))}}up.\u0275fac=function(e){return new(e||up)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Q))},up.\u0275prov=n.\u0275\u0275defineInjectable({token:up,factory:up.\u0275fac,providedIn:"root"});class dp{constructor(e){this.httpClient=e,this._getDcmServiceEndpoint="rest/DcmService/GetDcmStageColumnName",this._destroyed$=new u.Subject}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}getStageColumnName(e){return this.httpClient.post(this._getDcmServiceEndpoint,{entitySchemaName:e}).pipe((0,h.U)(t=>t.GetDcmStageColumnNameResult),(0,G.K)(()=>(0,u.of)(null)),(0,L.R)(this._destroyed$))}}dp.\u0275fac=function(e){return new(e||dp)(n.\u0275\u0275inject(D.HttpClient))},dp.\u0275prov=n.\u0275\u0275defineInjectable({token:dp,factory:dp.\u0275fac});class pp{constructor(e,t,i){this._httpClient=e,this._fileDownloadService=t,this._systemSettings=i,this._serviceName="ReportService",this._exportToExcelMethodName="GetExportToExcelKey",this._downloadExcelFileMethodName="GetExportToExcelData",this._timeoutSysSettingCode="ExportToExcelTimeout",this._defaultTimeoutValue=6e5}_getDownloadExcelFileUrl(e,t){return`../rest/${this._serviceName}/${this._downloadExcelFileMethodName}/${e}/${t}`}_getReportServiceUrl(){return`rest/${this._serviceName}/${this._exportToExcelMethodName}`}_downloadExcelFile(e,t){const i=this._getDownloadExcelFileUrl(e,t),r=`${t}.xlsx`;this._fileDownloadService.downloadFromUrl(i,r)}_getTimeout(e){let t=this._defaultTimeoutValue;return e?.dataValueType===l.DataValueType.Integer&&(t=e.value),t}exportRecordsFromEsqToExcel(e,t){const i=this._getReportServiceUrl(),r=JSON.stringify(e);return this._systemSettings.getByCode(this._timeoutSysSettingCode).pipe((0,M.w)(s=>this._httpClient.post(i,{esqSerialized:r}).pipe((0,u.timeout)(this._getTimeout(s)))),(0,h.U)(s=>(s.GetExportToExcelKeyResult.success&&this._downloadExcelFile(s.GetExportToExcelKeyResult.key,t),s)))}}pp.\u0275fac=function(e){return new(e||pp)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(In),n.\u0275\u0275inject(De))},pp.\u0275prov=n.\u0275\u0275defineInjectable({token:pp,factory:pp.\u0275fac,providedIn:"root"});var Vv=f(30730);class mp{constructor(e,t,i){this._document=e,this._sysSettingsService=t,this._deviceDetectorService=i,this._useFaviconSysSettingsCode="UseFaviconFromSysSettings",this._faviconImageSysSettingsCode="FaviconImage"}_addFaviconElement(e){const t=this._document.createElement("link");t.setAttribute("rel","icon"),t.setAttribute("type","image/x-icon"),t.setAttribute("href",e),this._document.head.appendChild(t)}_getFaviconHref(e,t){if(e&&e.success){const r=e.values[this._useFaviconSysSettingsCode];if(r&&r.value){const s=Date.now().toString().slice(0,-5),o=`img/terrasoft.axd?s=nui-binary-syssetting&r=${this._faviconImageSysSettingsCode}&source_hash=${s}`;return y.Location.joinWithSlash(t,o)}}return"favicon.ico"}_innerInit(e){return this._sysSettingsService.getByCodes([this._useFaviconSysSettingsCode]).pipe((0,h.U)(t=>{const i=this._getFaviconHref(t,e);this._addFaviconElement(i)}))}init(e){return this._deviceDetectorService.browser===Vv.An.SAFARI?(0,u.of)(void 0):this._innerInit(e)}}mp.\u0275fac=function(e){return new(e||mp)(n.\u0275\u0275inject(y.DOCUMENT),n.\u0275\u0275inject(De),n.\u0275\u0275inject(Vv.x0))},mp.\u0275prov=n.\u0275\u0275defineInjectable({token:mp,factory:mp.\u0275fac});var Fv=f(14069);class br extends Ta{constructor(e,t){super(),this.sysSettingsService=e,this.userInfo=t,this._enabled=!1,this._initialized=!1}_initializeDataLayer(){const e=window;e.dataLayer&&(this._dataLayer=e.dataLayer)}_initializeScripts(e){e&&(e=e.replace(/'/g,'"'),this._appendChildScriptTag(document.head,"script",this._getHtmlTagContent("script",e)),this._appendChildScriptTag(document.body,"noscript",this._getHtmlTagContent("noscript",e)))}_getHtmlTagContent(e,t){if(!t||!e)return"";const i=new RegExp("<"+e+"[\\s\\S]*?>[\\s\\S]*?<\\/"+e+">","gi"),r=t.match(i);if(r&&1===r.length){const s=r[0],o=new RegExp("<(\\/|)"+e+"(.*?|)>","gi");return s.replace(o,"").trim()}return""}_appendChildScriptTag(e,t,i){if(!e||!t||!i)return;const r=document.createElement(t);r.appendChild(document.createTextNode(i)),e.appendChild(r)}_initializeDefaultVariables(e){const t=this.userInfo,i={productName:e.ProductName,productEdition:e.ProductEdition,primaryCulture:{displayValue:t.cultureInfo.sysCultureName,value:t.cultureInfo.sysCultureId},customerId:e.CustomerId,version:e.ConfigurationVersion,userId:t.id,userType:this._getUserType(),accessType:t.accessType};this._pushVariables(i)}_getUserType(){return this.userInfo.isSSP?"External":"Employee"}_pushVariables(e){try{this._dataLayer.push(e)}catch(t){console.log(t.message)}}_initializeGoogleTagManager(e){e.UseGoogleTagManager&&(this._initializeScripts(e.GoogleTagManagerScript),this._initializeDataLayer(),this._enabled=!!this._dataLayer,this._enabled&&this._initializeDefaultVariables(e))}_executeInitialization(){const t=this.sysSettingsService.getByCodes(["UseGoogleTagManager","GoogleTagManagerScript","ProductName","ProductEdition","ConfigurationVersion","CustomerId"]);return t.pipe((0,Ee.q)(1)).subscribe(i=>{const r=i&&i.success&&i.values&&(0,Fv.Z)(i.values||{},s=>s.value);r&&this._initializeGoogleTagManager(r),this._initialized=!0}),t.pipe((0,h.U)(()=>{}))}_resetCustomData(e){const t={};for(const i of Object.keys(e))t[i]=void 0;this._pushVariables(t)}initialize(){return this._initialized?(0,u.of)(void 0):(this._initializationObservable$||(this._initializationObservable$=this._executeInitialization()),this._initializationObservable$)}track(e){this._enabled&&(this._pushVariables(Object.assign(e,{description:JSON.stringify(e.description),event:e?.event||"bpmonlineInfo",virtualUrl:location.href})),this._resetCustomData(e))}}br.\u0275fac=function(e){return new(e||br)(n.\u0275\u0275inject(De),n.\u0275\u0275inject(Q))},br.\u0275prov=n.\u0275\u0275defineInjectable({token:br,factory:br.\u0275fac,providedIn:"root"});class cl{constructor(e){this._injector=e,this._handlerChain=l.HandlerChainService.instance,this._unsubscribesHandlers=[],this._registerHandlerChain()}_registerHandlerChain(){l.HandlerChainServicesRegistry.services.forEach((e,t)=>{(0,l.checkTypeNameFormat)(t,"HandlerChainServiceTypeName"),(0,l.checkCrtTypeNamePascalCase)(t);const i=class extends l.BaseRequestHandler{constructor(s){super(),this._innerInjector=s}handle(s){const c=this._innerInjector.get(e.typeRef)[s.method](...s.args);let d;return d=c instanceof Promise?c:c instanceof u.Observable?(0,u.lastValueFrom)(c,{defaultValue:null}):Promise.resolve(c),d}};this._unsubscribesHandlers.push(this._handlerChain.register({requestType:t,createHandler:()=>new i(this._injector),source:{type:l.HandlerSourceType.Host}}))})}ngOnDestroy(){this._unsubscribesHandlers.forEach(e=>e())}}cl.\u0275fac=function(e){return new(e||cl)(n.\u0275\u0275inject(n.Injector))},cl.\u0275prov=n.\u0275\u0275defineInjectable({token:cl,factory:cl.\u0275fac});n.APP_INITIALIZER;let vr=class{constructor(e){this._http=e}_mapToCrtHttpHeaders(e){return e.keys().reduce((t,i)=>({...t,[i]:e.get(i)}),{})}get(e,t){return this._http.get(e,{...(0,lt.Z)(t,"headers","responseType"),observe:"response"}).pipe((0,h.U)(i=>({headers:this._mapToCrtHttpHeaders(i.headers),...(0,lt.Z)(i,"body","status","statusText","url","ok")})))}post(e,t,i){return this._http.post(e,t,{...(0,lt.Z)(i,"headers","responseType"),observe:"response"}).pipe((0,h.U)(r=>({headers:this._mapToCrtHttpHeaders(r.headers),...(0,lt.Z)(r,"body","status","statusText","url","ok")})))}put(e,t,i){return this._http.put(e,t,{...(0,lt.Z)(i,"headers","responseType"),observe:"response"}).pipe((0,h.U)(r=>({headers:this._mapToCrtHttpHeaders(r.headers),...(0,lt.Z)(r,"body","status","statusText","url","ok")})))}patch(e,t,i){return this._http.patch(e,t,{...(0,lt.Z)(i,"headers","responseType"),observe:"response"}).pipe((0,h.U)(r=>({headers:this._mapToCrtHttpHeaders(r.headers),...(0,lt.Z)(r,"body","status","statusText","url","ok")})))}delete(e,t){return this._http.delete(e,{...(0,lt.Z)(t,"headers","responseType","body"),observe:"response"}).pipe((0,h.U)(i=>({headers:this._mapToCrtHttpHeaders(i.headers),...(0,lt.Z)(i,"body","status","statusText","url","ok")})))}};vr.\u0275fac=function(e){return new(e||vr)(n.\u0275\u0275inject(D.HttpClient))},vr.\u0275prov=n.\u0275\u0275defineInjectable({token:vr,factory:vr.\u0275fac,providedIn:"root"}),vr=(0,m.gn)([en({requestType:"crt.HttpClientService"}),(0,m.w6)("design:paramtypes",[D.HttpClient])],vr);let ht=class extends O_{constructor(){super(...arguments),this._destroyed$=new u.Subject,this._messageChannelService=(0,n.inject)(ct),this.serviceEndpoint="ServiceModel/LicenseService.svc"}listenUnavailableLicenseInfo(){return this._messageChannelService.messageEvent$.pipe((0,u.filter)(e=>"UnavailableLicenseEventNotifier"===e.header.sender),(0,u.map)(e=>e.body),(0,u.takeUntil)(this._destroyed$))}loadUnavailableLicenseInfo(){const e=this.serviceEndpoint+"/GetUnavailableLicOperations";return this.httpClient.post(e,null).pipe((0,u.map)(t=>t&&t.success?t.unavailableLicOperationsInfo:null),(0,G.K)(()=>(0,u.of)(null)))}loadLicenseOperationStatuses(e){return e?.length?this.executePostRequestWithCache("GetExplicitLicOperationStatuses",{licOperationCodes:e}).pipe((0,u.map)(t=>t?.GetExplicitLicOperationStatusesResult?.success?t.GetExplicitLicOperationStatusesResult.licOperationStatuses.reduce((i,r)=>(i[r.Key]=r.Value,i),{}):{})):(0,u.of)({})}ngOnDestroy(){this._destroyed$.next()}};ht.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ht)))(t||ht)}}(),ht.\u0275prov=n.\u0275\u0275defineInjectable({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht=(0,m.gn)([en({requestType:"crt.LicenseService"})],ht);new n.InjectionToken("CRT_UNAVAILABLE_LICENSE"),new n.InjectionToken("Represents a list of license restriction operation codes"),new n.InjectionToken("Represents a list of license restriction operation values");n.APP_INITIALIZER,n.APP_INITIALIZER;class hp{constructor(e,t){this.queryExecutor=e,this.configurationDataService=t}_buildUrlWithCardModule(e,t,i){return window.location.origin+window.location.pathname+`#${e}/${t}/edit/${i}`}_getPageSchemaNameForRecord(e,t){const i=e?.pages;if(!i)return(0,u.of)(null);if(1===i.length){const r=i[0];return(0,u.of)(r)}return e.typeColumnName?this._getPageSchemaNameForRecordByType(e,t):(0,u.of)(i.find(r=>r.isDefault))}_getPageSchemaNameByType(e,t){const i=e?.pages;return i?1===i.length?i[0]:this._findPageByType(e,t):null}_getPageSchemaNameForRecordByType(e,t){return new u.Observable(i=>{this._getRecordTypeValue(e,t).subscribe(r=>{const s=this._findPageByType(e,r);i.next(s),i.complete()})})}_findPageByType(e,t){const i=e.pages;t="object"==typeof t?t.value:t;let r=i.find(s=>s.typeId===t);return(!r||!t)&&(r=i[0]),r}_getRecordTypeValue(e,t){return new u.Observable(i=>{const r=e.entitySchemaName,s=e.typeColumnName,o=new l.EntitySchemaQuery(r);o.rowCount=1,o.addSchemaColumn(s),o.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Id",t),this.queryExecutor.executeSelectQuery(o).subscribe(c=>{const g=((c=c||[])[0]||{})[s].value;i.next(g),i.complete()})})}buildPageUrlByEntityName(e,t,i){const r=i.moduleStructure?.cardModule,o=this._getPageSchemaNameByType(i.entityStructure,t.typeId)?.cardSchemaName;return this._buildUrlWithCardModule(r,o,t.Id)}buildPageUrl(e,t){return new u.Observable(i=>{this.configurationDataService.getEntityData(e).subscribe(r=>{const s=r.data?.entityStructure;this._getPageSchemaNameForRecord(s,t).subscribe(o=>{const c=r.data?.moduleStructure?.cardModule,d=o?.cardSchemaName,p=this._buildUrlWithCardModule(c,d,t);i.next(p),i.complete()})})})}}function U_(a){const e={};return e.uId=a.uId,e.name=a.name,e.caption={"en-US":a.caption||a.name},e.columns={Items:{}},a.columns.map(i=>{const r=function x2(a){const e={};return e.uId=a.uId||(0,l.generateGuid)(),e.name=a.name,e.caption={"en-US":a.caption||a.name},e.usageType=a.usageType||ye.General,e.dataValueType=a.dataValueType,e.referenceSchemaUId=a.referenceSchemaUId,e.referenceSchemaName=a.referenceSchemaName,e}(i);return i.isPrimaryColumn&&(e.primaryColumnUId=r.uId),i.isPrimaryDisplayColumn&&(e.primaryDisplayColumnUId=r.uId),r}).forEach(i=>{e.columns.Items[i.uId]=i}),e}hp.\u0275fac=function(e){return new(e||hp)(n.\u0275\u0275inject(me),n.\u0275\u0275inject(Sr))},hp.\u0275prov=n.\u0275\u0275defineInjectable({token:hp,factory:hp.\u0275fac});const G_="16be3651-8fe2-4159-8dd0-a803d4683dd3",z_="Contact",Ov="25d7c1ab-1de0-4501-b402-02e0e5a72d6e",jv="Account";U_({uId:G_,name:z_,columns:[{name:"Id",uId:"ae0e45ca-c495-4fe7-a39d-3ab7278e1617",usageType:ye.Advanced,dataValueType:l.DataValueType.Guid,isPrimaryColumn:!0},{name:"Name",dataValueType:l.DataValueType.Text,uId:"a5cca792-47dd-428a-83fb-5c92bdd97ff8"},{name:"Caption",dataValueType:l.DataValueType.Text,isPrimaryDisplayColumn:!0,uId:"9e53fd7c-dde4-4502-a64c-b9e34148108c"},{name:"ProcessListeners",usageType:ye.None,dataValueType:l.DataValueType.Integer},{name:"HomePhone",dataValueType:l.DataValueType.Text},{name:"Address",dataValueType:l.DataValueType.Text,uId:"0fb61bc8-a195-4d90-aecc-18b411b51814"},{name:"DoNotUseEmail",dataValueType:l.DataValueType.Boolean},{name:"DoNotUseFax",dataValueType:l.DataValueType.Boolean},{name:"DoNotUseMail",dataValueType:l.DataValueType.Boolean},{name:"DoNotUseCall",dataValueType:l.DataValueType.Boolean},{name:"TwitterId",dataValueType:l.DataValueType.Text,usageType:ye.Advanced},{name:"GPSN",dataValueType:l.DataValueType.Text,usageType:ye.Advanced},{name:"GPSE",dataValueType:l.DataValueType.Text,usageType:ye.Advanced},{name:"BirthDate",dataValueType:l.DataValueType.Date,uId:"3f08db69-6d2f-4b1c-87a4-acddc6c3b9d6"},{name:"Account",uId:"5c6ca10e-1180-4c1e-8a50-55a72ff9bdd4",dataValueType:l.DataValueType.Lookup,referenceSchemaUId:Ov,referenceSchemaName:jv},{name:"Owner",dataValueType:l.DataValueType.Lookup,referenceSchemaUId:G_,referenceSchemaName:z_},{name:"Skype",dataValueType:l.DataValueType.Text},{name:"Email",dataValueType:l.DataValueType.Text},{name:"DoNotUseSms",dataValueType:l.DataValueType.Boolean},{name:"JobTitle",dataValueType:l.DataValueType.Text},{name:"Phone",dataValueType:l.DataValueType.Text},{name:"MobilePhone",dataValueType:l.DataValueType.Text},{name:"Zip",dataValueType:l.DataValueType.Text},{name:"Surname",dataValueType:l.DataValueType.Text},{name:"Dear",dataValueType:l.DataValueType.Text},{name:"CreatedOn",caption:"Created on",dataValueType:l.DataValueType.DateTime,usageType:ye.Advanced},{name:"ModifiedOn",caption:"Modified on",dataValueType:l.DataValueType.DateTime,usageType:ye.Advanced}]}),U_({uId:Ov,name:jv,columns:[{name:"Id",usageType:ye.Advanced,dataValueType:l.DataValueType.Guid,isPrimaryColumn:!0},{name:"Name",dataValueType:l.DataValueType.Text},{name:"Caption",dataValueType:l.DataValueType.Text,isPrimaryDisplayColumn:!0},{name:"ProcessListeners",usageType:ye.None,dataValueType:l.DataValueType.Integer},{name:"Phone",dataValueType:l.DataValueType.Text},{name:"Address",dataValueType:l.DataValueType.Text},{name:"Owner",dataValueType:l.DataValueType.Lookup,referenceSchemaUId:G_,referenceSchemaName:z_},{name:"Skype",dataValueType:l.DataValueType.Text},{name:"Email",dataValueType:l.DataValueType.Text},{name:"Fax",dataValueType:l.DataValueType.Text},{name:"Zip",dataValueType:l.DataValueType.Text},{name:"CreatedOn",caption:"Created on",dataValueType:l.DataValueType.DateTime,usageType:ye.Advanced},{name:"ModifiedOn",caption:"Modified on",dataValueType:l.DataValueType.DateTime,usageType:ye.Advanced}]}),U_({uId:"27AEADD6-D508-4572-8061-5B55B667C902",name:"SysSettings",columns:[{name:"Id",usageType:ye.Advanced,dataValueType:l.DataValueType.Guid,isPrimaryColumn:!0},{name:"Name",dataValueType:l.DataValueType.Text,isPrimaryDisplayColumn:!0},{name:"Code",dataValueType:l.DataValueType.Text}]});class gp extends Me{constructor(e,t){super(null),this._values=e,this._defaultValue=t}_getFeatureState(e){return this._values?.[e]??this._defaultValue}getFeatureState(e){return(0,u.of)(this._getFeatureState(e))}getFeaturesState(e){return(0,u.of)(e.map(t=>this._getFeatureState(t)))}}gp.\u0275fac=function(e){n.\u0275\u0275invalidFactory()},gp.\u0275prov=n.\u0275\u0275defineInjectable({token:gp,factory:gp.\u0275fac});var Bv;!function(a){a[a.Inactive=0]="Inactive",a[a.Running=1]="Running",a[a.Done=2]="Done",a[a.Error=3]="Error",a[a.Cancelled=4]="Cancelled"}(Bv||(Bv={}));class Uv{}Uv.textCodeTwoFactorAuthFlow="SMS",Uv.totpTwoFactorAuthFlow="TOTP";class fp{constructor(e){this._httpClient=e,this._url="/rest/GridUtilitiesService/DeleteRecordsAsync"}_getCommonPayloadParams(e){return{rootSchema:e.entitySchemaName,parameters:`{'operationKey':'${e.operationKey}'}`}}_deleteRecordsById(e){const t=this._getCommonPayloadParams(e);return t.primaryColumnValues=e.primaryColumnValues,this._httpClient.post(this._url,t)}_deleteRecordsByFilters(e){const t=this._getCommonPayloadParams(e);return t.filtersConfig=JSON.stringify(e.filters),this._httpClient.post(this._url,t)}deleteRecords(e){return(e.filters?this._deleteRecordsByFilters(e):this._deleteRecordsById(e)).pipe((0,h.U)(r=>{const s=JSON.parse(r.DeleteRecordsAsyncResult);return{error:s.ExceptionMessage,operationKey:s.OperationKey,success:s.Success}}),(0,G.K)(r=>(0,u.of)({error:r?.message,operationKey:e.operationKey,success:!1})))}}fp.\u0275fac=function(e){return new(e||fp)(n.\u0275\u0275inject(D.HttpClient))},fp.\u0275prov=n.\u0275\u0275defineInjectable({token:fp,factory:fp.\u0275fac,providedIn:"root"});class Ir{constructor(e,t){this._http=e,this._queryExecutor=t}_getPackageNames(){return this.getPackagesInfo().pipe((0,u.map)(e=>{const t={};return e.forEach(i=>t[i.UId]=i.Name),t}))}_getPackageTopologicalOrder(){return this._http.post("ServiceModel/ApplicationInfoService.svc/GetPackageHierarchyInfo",null).pipe((0,u.tap)(({success:t})=>{if(!t)throw new Error("GetPackageHierarchyInfo request is failed")}),(0,u.map)(t=>t.packageTopologicalOrder))}loadPackagesTopology(){return(0,u.forkJoin)([this._getPackageNames(),this._getPackageTopologicalOrder()]).pipe((0,u.map)(([e,t])=>{l.PkgTopology.items.clear(),t.reverse(),t.forEach((i,r)=>{const s=e[i];l.PkgTopology.items.set(s,r)})}))}getPackagesInfo(){if(this._packagesInfo$)return this._packagesInfo$;const e=new l.EntitySchemaQuery("SysPackage");return e.addSchemaColumn("Name"),e.addSchemaColumn("UId"),e.addSchemaColumn("Maintainer"),this._packagesInfo$=this._queryExecutor.executeSelectQuery(e).pipe((0,u.shareReplay)(1)),this._packagesInfo$}}Ir.\u0275fac=function(e){return new(e||Ir)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(me))},Ir.\u0275prov=n.\u0275\u0275defineInjectable({token:Ir,factory:Ir.\u0275fac,providedIn:"root"});n.APP_INITIALIZER,n.Injector;var H_;!function(a){a.DevExpress="DevExpress",a.Word="MS Word"}(H_||(H_={}));class _p{constructor(e,t,i){this._queryExecutor=e,this._httpClient=t,this._fileDownloaderService=i}_loadPrintables(){const e=new l.EntitySchemaQuery("SysModuleReport");return e.addSchemaColumn("Id"),e.addSchemaColumn("Caption"),e.addSchemaColumn("ConvertInPDF"),e.addSchemaColumn("ShowInCard"),e.addSchemaColumn("ShowInSection"),e.addSchemaColumn("SysEntitySchema.Name","SysEntitySchemaName"),e.addSchemaColumn("SysModule.SysModuleEntity.[SysSchema:UId:SysEntitySchemaUId].Name","SysModuleEntityName"),e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Type.Name",H_.Word),this._queryExecutor.executeSelectQuery(e).pipe((0,h.U)(t=>t.map(i=>i)))}_getPrintables(){return this._printables$||(this._printables$=this._loadPrintables()),(0,u.firstValueFrom)(this._printables$)}_filterEntityName(e,t){return e.SysEntitySchemaName===t||e.SysModuleEntityName===t}_getPrintablesList(e){var t=this;return(0,_.Z)(function*(){const i=t._httpClient.post("rest/ReportService/CreateReportsList",e);return(yield(0,u.firstValueFrom)(i)).CreateReportsListResult})()}_getPrintablesListByFilter(e){var t=this;return(0,_.Z)(function*(){const i=t._httpClient.post("rest/ReportService/CreateReportsListByFilter",e);return(yield(0,u.firstValueFrom)(i)).CreateReportsListByFilterResult})()}_downloadPrintables(e,t){e.forEach(i=>{this._fileDownloaderService.downloadFromUrl(`../rest/ReportService/GetReportFile/${i}`,t)})}getPrintablesForEntity(e){var t=this;return(0,_.Z)(function*(){return e?(yield t._getPrintables()).filter(r=>t._filterEntityName(r,e)):[]})()}generatePrintables(e,t){var i=this;return(0,_.Z)(function*(){const r=yield i._getPrintablesList(e);i._downloadPrintables(r,t)})()}generatePrintablesByFilter(e,t){var i=this;return(0,_.Z)(function*(){const r=yield i._getPrintablesListByFilter(e);i._downloadPrintables(r,t)})()}}_p.\u0275fac=function(e){return new(e||_p)(n.\u0275\u0275inject(me),n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(In))},_p.\u0275prov=n.\u0275\u0275defineInjectable({token:_p,factory:_p.\u0275fac});var T2=f(35961);class yp{constructor(e){this.httpClient=e,this.serviceEndpoint="ServiceModel/ProcessEngineService.svc/"}_executePost(e,t){const i=this.serviceEndpoint+t;return this.httpClient.post(i,e)}_getRequestSortingColumns(e){return e?Object.entries(e).map(([i,r],s)=>({path:i,direction:(0,l.toOrderDirection)(r),position:s})):[]}createProcessParameterValues(e){const t=[];return e&&Object.entries(e).forEach(([i,r])=>{let s=r;(0,T2.Z)(r)&&(s=(0,l.encodeDate)(r)),t.push({name:i,value:s})}),t}executeProcessByName(e,t,i){const r={schemaName:e,parameterValues:this.createProcessParameterValues(t),resultParameterNames:i};return this._executePost(r,"RunProcess")}executeProcessForMatchingRecords(e){const t={schemaName:e.processName,inputParameterName:e.inputParameterName,entitySchemaName:e.entitySchemaName,filterConfig:JSON.stringify(e.filterConfig),isSupportMultiplePageOpening:!1,sortingColumns:this._getRequestSortingColumns(e.sortingColumns)};return this._executePost(t,"RunProcessForMatchingRecords")}completeExecuting(e,t){const i={processElementUId:e,parameterValues:this.createProcessParameterValues(t)};return this._executePost(i,"CompleteExecuting")}changeToAppropriateDcmInstance(e,t,i){const r={currentStageId:e,entitySchemaName:t,recordId:i};return this._executePost(r,"ChangeToAppropriateDcmInstance")}}yp.\u0275fac=function(e){return new(e||yp)(n.\u0275\u0275inject(D.HttpClient))},yp.\u0275prov=n.\u0275\u0275defineInjectable({token:yp,factory:yp.\u0275fac,providedIn:"root"});class Cp{constructor(e){this.httpClient=e,this.serviceEndpoint="DataService/json/SyncReply/"}_parseProcessSchemaMetadata(e){return JSON.parse(e)}_convertStringSchemaMetadataToObject(e){const t=this._parseProcessSchemaMetadata(e.schema.metaData);return(0,Ga.Z)(e,"schema.metaData",t),e}getProcessSchemaData(e){const t=this.serviceEndpoint+"ProcessSchemaRequest";return this.httpClient.post(t,{uId:e,packageUId:null,convertLocalizableStringToParameter:!0}).pipe((0,h.U)(i=>this._convertStringSchemaMetadataToObject(i)))}}Cp.\u0275fac=function(e){return new(e||Cp)(n.\u0275\u0275inject(D.HttpClient))},Cp.\u0275prov=n.\u0275\u0275defineInjectable({token:Cp,factory:Cp.\u0275fac,providedIn:"root"});class R2{constructor(e){this._sharingContext=e,this._loadedContainers={},this._initializedRemotes={},this._initializedShareScopes={}}_lookupExposedModule(e,t){var i=this;return(0,_.Z)(function*(){return(yield i._loadedContainers[e].get(t))()})()}_initRemote(e,t,i){var r=this;return(0,_.Z)(function*(){r._initializedRemotes[t]||(r._initializedShareScopes[i]||(yield r._sharingContext.initSharing(i),r._initializedShareScopes[i]=!0),yield e.init(r._sharingContext.shareScopes[i]),r._initializedRemotes[t]=!0)})()}_loadRemoteScriptEntry(e,t,i){return new Promise((r,s)=>{if(this._loadedContainers[t])return void r();const o=document.createElement("script");o.src=e,o.onerror=s,o.onload=()=>{const c=window[t];this._initRemote(c,t,i),this._loadedContainers[t]=c,r()},document.body.appendChild(o)})}_loadRemoteModuleEntry(e,t){var i=this;return(0,_.Z)(function*(){if(i._loadedContainers[e])return Promise.resolve();yield function A2(a){return import(a)}(e).then(r=>{i._initRemote(r,e,t),i._loadedContainers[e]=r})})()}load(e){var t=this;return(0,_.Z)(function*(){let i;return e.remoteEntryType===l.RemoteEntryType.Module?(yield t._loadRemoteModuleEntry(e.remoteEntry,e.shareScope),i=e.remoteEntry):(yield t._loadRemoteScriptEntry(e.remoteEntry,e.remoteName,e.shareScope),i=e.remoteName),t._lookupExposedModule(i,e.exposedModule)})()}}class ul{get _requirejs(){return this._requireJsProvider.get()}constructor(e,t,i,r){this._requireJsProvider=e,this._window=t,this._injector=i,this._remoteEntryLoader=r,this._descriptorsKey="_FileContentDescriptors",this._requestUrl=`conf/content/${this._descriptorsKey}`,this._remoteEntryTypes=new Map([["remoteEntry.js",l.RemoteEntryType.Script],["remoteModuleEntry.js",l.RemoteEntryType.Module]]),this._bootstrappingWaitTime=1e4,this._loaded$=new u.BehaviorSubject(!1),this.loaded$=this._loaded$.asObservable()}_setupConfig(e){if(this._requirejs.specified(this._descriptorsKey))return;let t=this._requestUrl;e&&(t+=".js?hash="+e),this._requirejs.config({baseUrl:je(),paths:{[this._descriptorsKey]:t}})}_isRemoteEntry(e){return this._remoteEntryTypes.has(e)}_getRemoteEntryType(e){return this._remoteEntryTypes.get(e)}_getRemoteBuildsInfo(e){const t=(0,pe.Z)(this._window,"Terrasoft.configuration.FileContentDescriptors")??{},i=[];return Object.keys(t).forEach(r=>{const s=r.split("/"),o=s.at(-1);if(!this._isRemoteEntry(o))return;const c=s.at(0),d=s.at(-2),p=s.slice(1).join("/"),g=function(a,e,t,i){let r=je()+["Terrasoft.Configuration/Pkg",a,"Files",e].join("/");return r+="?hash="+((t[a+"/"+e]||{}).Hash||i||"empty"),r}(c,p,t,e),C=this._getRemoteEntryType(o),v=this._packagesInfo.find(j=>j.Name===c).Maintainer,T=C===l.RemoteEntryType.Script?"./RemoteEntry":"./Main";i.push({name:d,entry:g,entryType:C,mainModule:T,packageName:c,maintainer:v})}),i}_loadDescriptors(){return new u.Observable(e=>{this._requirejs([this._descriptorsKey],()=>{e.next(),e.complete()},t=>{console.warn(t),e.next(),e.complete()})})}_loadRemoteBuild(e){return(0,u.defer)(()=>this._remoteEntryLoader.load({remoteName:e.name,remoteEntry:e.entry,remoteEntryType:e.entryType,shareScope:e.maintainer,exposedModule:e.mainModule}))}_onTimeout(e,t){console.error(`${e} modules did not bootstrap in ${t/1e3} seconds. Please ensure that you called bootstrapCrtModule function inside your project.`)}_onLoadingError(e){console.error(e),console.error("Please ensure the remote module name and file content directory name are the same in the snake_case.")}_listenBootstraps(){return new u.Observable(e=>l.BootstrapNotifier.instance.subscribe(()=>e.next()))}_loadRemoteEntries(e){if(0===e.length)return(0,u.of)(null);let t=e.length;const i=this._listenBootstraps(),r=new u.Subject,s=e.map(p=>this._loadRemoteBuild(p).pipe((0,u.catchError)(g=>(this._onLoadingError(g),r.next(g),(0,u.of)(null))))),o=(0,u.forkJoin)(s).pipe((0,u.tap)(()=>r.complete()),(0,u.map)(()=>{})),c=(0,u.merge)(i,r).pipe((0,u.tap)(()=>t--),(0,u.first)(()=>0===t)),d=o.pipe((0,u.delay)(this._bootstrappingWaitTime),(0,u.tap)(()=>this._onTimeout(t,this._bootstrappingWaitTime)));return(0,u.merge)(c,d).pipe((0,u.first)())}load(e){return this._setupConfig(e),this._loadDescriptors().pipe((0,u.switchMap)(()=>this._injector.get(Ir).getPackagesInfo()),(0,u.tap)(t=>this._packagesInfo=t),(0,u.map)(()=>this._getRemoteBuildsInfo(e)),(0,u.tap)(t=>t.forEach(i=>l.RemoteEntriesRegistry.items.set(i.name,i))),(0,u.switchMap)(t=>this._loadRemoteEntries(t)),(0,u.tap)(()=>this._loaded$.next(!0)),(0,u.catchError)(t=>(console.log(t),(0,u.of)(null))))}ngOnDestroy(){this._loaded$.complete()}}ul.\u0275fac=function(e){return new(e||ul)(n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(se),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(R2))},ul.\u0275prov=n.\u0275\u0275defineInjectable({token:ul,factory:ul.\u0275fac,providedIn:"root"});n.APP_INITIALIZER;class Sp{constructor(e,t){this._httpClient=e,this._queryExecutor=t,this._serviceEndpoint="ServiceModel/SchemaInfoService.svc",this._featureValues=(0,n.inject)(te,{optional:!0})}_getCaptionResponse(e){if(this._featureValues?.UseSchemaInfoService){const i=`${this._serviceEndpoint}/GetSchemaCaption`;return(0,u.lastValueFrom)(this._httpClient.post(i,{schemaName:e}))}const t=new l.EntitySchemaQuery("SysSchema");return t.addSchemaColumn("=[VwSysSchemaExtending:BaseSchemaId:Id].[SysSchema:Id:TopExtendingSchemaId].Caption","Caption"),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Name",e),(0,u.lastValueFrom)(this._queryExecutor.executeSelectQuery(t))}getSchemaUIdByName(e){var t=this;return(0,_.Z)(function*(){if(!e)return"";const i=new l.EntitySchemaQuery("SysSchema");i.addSchemaColumn("UId"),i.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Name",e),i.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ExtendParent",!1);const r=yield(0,u.lastValueFrom)(t._queryExecutor.executeSelectQuery(i));return r.errorInfo?(console.error(r.errorInfo.message),""):r[0]?.UId})()}getSchemaCaptionByName(e){var t=this;return(0,_.Z)(function*(){if(!e)return"";const i=yield t._getCaptionResponse(e);return i.errorInfo?(console.error(i.errorInfo.message),""):i?.caption||i[0]?.Caption})()}}Sp.\u0275fac=function(e){return new(e||Sp)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(me))},Sp.\u0275prov=n.\u0275\u0275defineInjectable({token:Sp,factory:Sp.\u0275fac});class bp{constructor(e){this._messageChannelService=e}getNotifications(e,t){return this._messageChannelService.messageEvent$.pipe((0,u.filter)(i=>i.header.sender===e&&(void 0===t||i.body?.operationId===t)),(0,u.map)(i=>i.body.body))}}bp.\u0275fac=function(e){return new(e||bp)(n.\u0275\u0275inject(ct))},bp.\u0275prov=n.\u0275\u0275defineInjectable({token:bp,factory:bp.\u0275fac,providedIn:"root"});const Gv="QuerySchemaProfile";class Dr extends O_{constructor(e,t){super(),this.httpClient=e,this.serviceEndpoint=t,this._serviceSaveProfileEndpoint=`${t}/UserSchemaProfile`}getProfile(e){return this.executePostRequestWithCache(Gv,{key:e})}saveProfile(e,t,i){const{requirejs:r,require:s}=window;s?.defined("profile")&&s("profile").addKey(e),r?.undef("profile!"+e);const o={key:e,data:null===t?"":JSON.stringify(t),sysAdminUnitId:i};return this.httpClient.post(this._serviceSaveProfileEndpoint,o).pipe((0,h.U)(c=>c),(0,I.b)(()=>this.resetCache(Gv,{key:e})))}}Dr.\u0275fac=function(e){return new(e||Dr)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Si))},Dr.\u0275prov=n.\u0275\u0275defineInjectable({token:Dr,factory:Dr.\u0275fac,providedIn:"root"});class vp extends Iv{constructor(e){super(),this._injector=e,this._currentThemeProfileKey="CurrentTheme",this._userSchemaProfileService=this._injector.get(Dr),this._featureService=this._injector.get(l.FeatureService),this._defaultTheme=this._injector.get(c2)}getCurrentTheme(){return(0,u.from)(this._featureService.getFeatureState("ChangeTheme")).pipe((0,M.w)(e=>e?this._userSchemaProfileService.getProfile(this._currentThemeProfileKey):(0,u.of)([])),(0,h.U)(e=>Array.isArray(e)?e?.pop():void 0),(0,h.U)(e=>e??this._defaultTheme))}}vp.\u0275fac=function(e){return new(e||vp)(n.\u0275\u0275inject(n.Injector))},vp.\u0275prov=n.\u0275\u0275defineInjectable({token:vp,factory:vp.\u0275fac});class dl{constructor(e,t){this.httpClient=e,this._serviceGetProfileEndpoint=`${t}/QueryProfile`,this._serviceSaveProfileEndpoint=`${t}/UserProfile`}_innerSaveProfile(e,t,i){const{requirejs:r,require:s}=window;s?.defined("profile")&&s("profile").addKey(e);const o={key:e,data:JSON.stringify(t)};return i&&(o.isDef=!0),r?.undef("profile!"+e),this.httpClient.post(this._serviceSaveProfileEndpoint,o).pipe((0,h.U)(c=>c))}getProfile(e){return this.httpClient.post(this._serviceGetProfileEndpoint,{key:e})}saveProfile(e,t){return this._innerSaveProfile(e,t,!1)}saveDefaultProfile(e,t){return this._innerSaveProfile(e,t,!0)}}dl.\u0275fac=function(e){return new(e||dl)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Si))},dl.\u0275prov=n.\u0275\u0275defineInjectable({token:dl,factory:dl.\u0275fac,providedIn:"root"});class Ip{getProfile(e){const t=localStorage.getItem(e);return(0,u.of)(JSON.parse(t))}saveProfile(e,t){return localStorage.setItem(e,JSON.stringify(t)),(0,u.of)(t)}saveDefaultProfile(e,t){return localStorage.setItem(e,JSON.stringify(t)),(0,u.of)(t)}}Ip.\u0275fac=function(e){return new(e||Ip)},Ip.\u0275prov=n.\u0275\u0275defineInjectable({token:Ip,factory:Ip.\u0275fac});let zv=[];class pl{constructor(e){this.httpClient=e,this._destroyed$=new u.Subject,this._whiteListUrl="/rest/ACLService/GetWhitelist"}loadWhitelist(){return this.httpClient.get(this._whiteListUrl).pipe((0,h.U)(e=>(zv=[...e],e)),(0,G.K)(()=>(0,u.of)(null)),(0,L.R)(this._destroyed$))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}pl.\u0275fac=function(e){return new(e||pl)(n.\u0275\u0275inject(D.HttpClient))},pl.\u0275prov=n.\u0275\u0275defineInjectable({token:pl,factory:pl.\u0275fac,providedIn:"root"});n.APP_INITIALIZER,n.Injector;var Dp=f(80707),ke=f(18849),Vi=f(1379),Ne=f(83704),qn=f(53900),L2=f(2940),Z_=f(38772);var he=f(34654),gt=f(4214),Hv=f(39504),B2=f(58779);const Zv='Required parameter "{0}" not found in object',q_='Instead of the "{0}" parameter, use "{1}',qv='Item with value "{0}" of the "name" parameter already exists';function $v(a,e,t){let i=!0;return(0,ne.Z)(a,(r,s)=>{if((0,he.Z)(r)||(0,gt.Z)(r)){const o=(0,he.Z)(r)?r:[r];(0,ne.Z)(o,c=>{if(!ue.isItemConfig(o[0]))return!1;const d=!1!==$v(c,e,t),p={item:c,propertyName:s,parent:a,childIterationResult:d};return i=!1!==e.call(t,p)&&d})}return i}),i}class ue{constructor(){this.properties={alias:{name:"name"}},this.sourceObject=null,this._memoryStore=new Map,this._operationRequiredParameters={insert:[],set:["name","values"],merge:["name","values"],move:["name"],remove:["name"]},this._operationParameterName="operation",this.aliases=null,this.checkOperationNameRequiredParameters=!0}static isEmpty(e){return null==e||""===e||(0,he.Z)(e)&&0===e.length}static isItemConfig(e){return(0,gt.Z)(e)&&!ue.isEmpty(e.name)}iterateChildItems(e,t,i){return $v(e,t,i)}_isEmptyObject(e){return!e||0===Object.keys(e).length}_removeFromCache(e){this.iterateChildItems(e,function(t){const i=t.item;this._memoryStore.delete(i.name)},this),this._memoryStore.delete(e.name)}_findItemInfo(e,t){if(ue.isEmpty(e))return null;const i=this._memoryStore.get(e);if(i)return i;const r=this.aliases,s=r&&r[e],o=s&&s.name;let c=null;return this.iterateChildItems(t,function(d){const p=d.item,g=o&&p[this.properties.alias.name]===o,C=p[this.properties.alias.name]===e||g;if(!d.childIterationResult||C){const T={item:p,parentName:d.parent[this.properties.alias.name],parentPath:d.parentPath,propertyName:d.propertyName};this._memoryStore.set(p[this.properties.alias.name],T),C&&(c=T)}return!C},this),c}_findItemInfoInSourceObject(e){const t={items:this.sourceObject};return this._findItemInfo(e,t)}_checkRequiredParameters(e,t){ue.isEmpty(t)||(0,ne.Z)(t,i=>{if(!e[i]){const r=Z.Ld.format(Zv,i);throw new Error(r)}})}_getSplittedOperations(e){const t={merge:[],set:[],removeProperties:[],remove:[],move:[],insert:[]};return(0,ne.Z)(e,i=>{this._checkOperation(i);const r=i.operation;if(!this._isExcludeAliasOperation(i.name,r,i.properties))switch(r){case"merge":t.merge.push(i);break;case"set":t.set.push(i);break;case"insert":t.insert.push(i);break;case"move":t.move.push(i);break;case"remove":{const{properties:s}=i;s&&(0,he.Z)(s)?t.removeProperties.push(i):t.remove.push(i);break}}}),t}_convertMoveOperationToRemove(e){let t={};const i=e.name,r=(0,q.Z)(this._findItemInfoInSourceObject(i));return r&&(t={parentName:r.parentName||r.nameTo,parentPath:r.parentPath,propertyName:r.propertyName,index:r.propertyName,operation:"remove",name:i}),t}_convertMoveOperationToInsert(e){let t={};const i=e.name,r=(0,q.Z)(this._findItemInfoInSourceObject(i));if(r){const s={values:r.item,operation:""};delete s.values.name,Object.assign(s,e),s.operation="insert",t=s}return t}_applyOperations(e){const t=this._getSplittedOperations(e);this._applyOperationGroup(this._merge,t.merge),this._applyChangePositionOperationGroup(t.remove,t.insert,t.move),this._applyOperationGroup(this._remove,t.removeProperties),this._applyOperationGroup(this._set,t.set)}_applyChangePositionOperationGroup(e,t,i){i=this._filterMoveOperation(e,i),e=e.concat(i);let r=[];(0,ne.Z)(e,d=>{const p=this._convertMoveOperationToRemove(d);this._isEmptyObject(p)?console.log("Element "+d.name+" was not moved."):r.push(p)}),r=this._getOperationsSequenceByPath(r,!1);const s=[],o=this._getObjectNameOperationsGroup(i);(0,ne.Z)(r,d=>{const p=o[d.name];(0,he.Z)(p)&&p.forEach(g=>{const C=this._convertMoveOperationToInsert(g);this._isEmptyObject(C)?console.log("Element "+g.name+" was not moved."):s.push(C)}),this._remove(d)}),t=t.concat(s),t=this._getOperationsSequenceByPath(t,!0);const c=this._applyOperationGroup(this._insert,t);(0,he.Z)(c)&&c.length>0&&this._applyUnsuccessfulInsertOperationGroup(c)}_applyUnsuccessfulInsertOperationGroup(e){e.forEach((t,i)=>{t.operation="move",this._findItemInfoInSourceObject(t.parentName)||e.splice(i,1)}),e.length>0&&this._applyChangePositionOperationGroup([],[],e)}_applyOperationGroup(e,t){const i=[];return(0,ne.Z)(t,r=>{e.call(this,r)||i.push(r)}),i}_getObjectNameOperationsGroup(e){const t={};return e.forEach(i=>{const r=i.name;t[r]=t[r]||[],t[r].push(i)}),t}_getOperationHierarchy(e){const t={};return e.forEach(i=>{const r=i.name,s=i.parentName||"_",o=i.propertyName||"_";t[r]={parentName:s,propertyName:o}}),t}_getOperationItemPath(e,t,i=""){let r=i;if(t[e]){const s=t[e].parentName;r=s+"="+t[e].propertyName+"=="+r,r=this._getOperationItemPath(s,t,r)}return r}_addOperationItemPathInfo(e){const t=[],i=this._getOperationHierarchy(e);return e.forEach(r=>{r.__path=this._getOperationItemPath(r.name,i),t.push(r)}),t}_getOperationPathGroupsInfo(e,t){const i=t?1:-1,r={},s=[];return e.forEach(o=>{const c=o.__path;r[c]=r[c]||[],r[c].push(o),(0,Hv.Z)(s,c)||s.push(c)}),{groups:r,order:s.sort(function(o,c){let d;return d=o.length===c.length?0:o.length>c.length?i:-1*i,d})}}_getOperationsSequenceByPath(e,t){e=this._addOperationItemPathInfo(e);const i=this._getOperationPathGroupsInfo(e,t),r=i.order,s=i.groups;let o=[];return r.forEach(c=>{const d=(0,Fb.Z)(s[c],"index");t||d.reverse(),o=o.concat(d)}),o}_saveAlias(e){if(ue.isEmpty(e.alias))return;const t=(0,q.Z)(e),i=t.alias;ue.isEmpty(this.aliases)&&(this.aliases={});const r=i.name;i.name=t.name,this.aliases[r]=i}_resetAliases(){this.aliases=null}_excludeAliasProperties(e,t){let i=Object.keys(t);const r=this.aliases&&this.aliases[e],s=r&&r.excludeProperties;return s&&(i=(0,B2.Z)(i,s)),i}_isExcludeAliasOperation(e,t,i){if(i&&"remove"===t)return!1;const r=this.aliases&&this.aliases[e],s=r&&r.excludeOperations;return(0,Hv.Z)(s,t)}findInsertItemInfo(e){const t=e.parentName;return this._findItemInfoInSourceObject(t)}_insert(e){let t=e.parentName;const i=e.name;e.nameTo&&(console.error(Z.Ld.format(q_,"nameTo","parentName")),t=e.nameTo);const r=this.findInsertItemInfo(e),s=!(!r&&e.parentName),o=e.values||{};this._saveAlias(e);const c=this.findInsertItemParent(r,e);if(ue.isEmpty(i)?console.warn(Z.Ld.format('The "{0}" parameter should no longer contain "{1}"',"nameTo","parentName")):Object.assign(o,{[this.properties.alias.name]:i}),(0,he.Z)(c)){const d=ue.isEmpty(e.index)?c.length:e.index;c.splice(d,0,o)}else{if(!(0,gt.Z)(c))throw new Error(Z.Ld.format('Item "{0}" is not a container for other items',t));r.item[e.propertyName]=o}return s}findInsertItemParent(e,t){return null===e?this.sourceObject:e.item[t.propertyName]}_set(e){let t=e.parentName;e.nameTo&&(console.error(Z.Ld.format(q_,"nameTo","parentName")),t=e.nameTo);const i=this._remove(e),r=!ue.isEmpty(i);return r&&(e.index=i.index,e.nameTo=t,e.parentName=t,e.propertyName=i.propertyName),this._insert(e),r}findMergeOrRemoveItemInfo(e){return this._findItemInfoInSourceObject(e.name)}_merge(e){const t=this.findMergeOrRemoveItemInfo(e),i=!ue.isEmpty(t);if(i){(0,ne.Z)(t.item,(s,o)=>{const c=(0,he.Z)(s)?s[0]:s;if(ue.isItemConfig(c)&&e.values.hasOwnProperty(o)){const d=Z.Ld.format('Item "{0}" should not contain parameter "{1}"',e.name,o);console.warn(d),delete e.values[o]}});const r=this._excludeAliasProperties(e.name,e.values);(0,ne.Z)(r,s=>{t.item[s]=e.values[s]})}return i}findRemoveParentItemInfo(e,t){return this._findItemInfoInSourceObject(e)}_remove(e){let t={};const i=this.findMergeOrRemoveItemInfo(e);if(ue.isEmpty(i))return null;const r=e.properties;if(r&&(0,he.Z)(r)){const s=i.item;r.forEach(o=>{delete s[o]})}else{const s=i.item;let o=i.parentName;i.nameTo&&(console.error(Z.Ld.format(q_,"nameTo","parentName")),o=i.nameTo);const c=this.findRemoveParentItemInfo(o,i),d=c?c.item[i.propertyName]:this.sourceObject;let p=0;(0,he.Z)(d)?(p=d.indexOf(s),d.splice(p,1)):delete c.item[i.propertyName],this._removeFromCache(s),t={index:p,item:s,nameTo:o,parentName:o,propertyName:i.propertyName}}return t}_checkOperation(e){const t=e.name,i=e.parentName;if(!ue.isEmpty(t)&&i===t)throw new Error(Z.Ld.format('Cyclic dependency exists for object "{0}". The parentName parameter cannot be equal to name',t));if(this._checkRequiredParameters(e,[this._operationParameterName]),this.checkOperationNameRequiredParameters){const r=e[this._operationParameterName];this._checkRequiredParameters(e,this._operationRequiredParameters[r])}}_filterMoveOperation(e,t){return(0,ne.Z)(e,i=>{t=t.filter(r=>i.name!==r.name)}),t}apply(e,t){let i;this.sourceObject=(0,q.Z)(e),ue.isEmpty(e)&&this._resetAliases();try{const r=(0,q.Z)(t);this._applyOperations(r),i=this.sourceObject}finally{this.sourceObject=null,this._memoryStore.clear()}return i}applyDiff(e,t){let i=[...e];for(const r of t)i=this.apply(i,r);return i}}ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275prov=n.\u0275\u0275defineInjectable({token:ue,factory:ue.\u0275fac});var X,q2=f(44539),$_=f(67764),Mp=f(20300),dg=f(75349);!function(a){a[a.INSERT=1]="INSERT",a[a.REMOVE=2]="REMOVE",a[a.MERGE=3]="MERGE",a[a.REMOVE_PROPERTY=4]="REMOVE_PROPERTY",a[a.CHANGE_POSITION=5]="CHANGE_POSITION",a[a.MOVE=6]="MOVE"}(X||(X={}));class Fi{constructor(){this._patch=null,this.objectProperties={parent:"parentName",parentPropertyName:"propertyName",index:"index",operationalName:"__operationalName",name:"name",root:"__root",patchDiffNodeTypeSymbol:"_t",initialId:"__initialId"},this.pathDelimiter="(#@",this.moveOperationProperties=["parentName","propertyName","index","__initialId"],this.flatIndexForObjects=!0;const e=q2.create({objectHash:function(t,i){return(0,$_.Z)(t.name)?t.name:"$$index:"+i}});this._patch=e}isEmpty(e){return null==e||""===e||(0,he.Z)(e)&&0===e.length}needFlatten(e,t){let i=t||!1;return i=!this.isEmpty(e?.name),i||((0,he.Z)(e)&&e.length>0?i=!this.isEmpty(e[0].name):(0,Mp.Z)(e)&&(0,ne.Z)(e,r=>{i=this.needFlatten(r,i)})),i}_getFlattenObjectKey(e,t,i){return i&&i.identifyItemByPath?e:t}_flattenObject(e,t,i,r,s,o){let p,c=t||{},d=i||"";if(this.isEmpty(e))c=null;else if((0,he.Z)(e))for(let g=0,C=e.length;g<C;g++)p=this._getFlattenObjectKey(d,i,o),this._flattenObject(e[g],c,p,g,s,o);else{const g=(0,q.Z)(e),C=g.name,v=this.isEmpty(d)?"{1}":"{0}{1}";if(d+=Z.Ld.format(v,this.pathDelimiter,C),p=this._getFlattenObjectKey(d,C,o),this.isEmpty(p))throw new Error(Z.Ld.format(Zv,this.objectProperties.name));this.checkIfItemAlreadyExist(c,p,g),delete g.name,this.isEmpty(i)||(g.parentName=i),this.isEmpty(r)||(g.index=r),this.isEmpty(s)||(g.propertyName=s);const T=[],j=[];(0,ne.Z)(g,(oe,Xt)=>{if(oe&&this.needFlatten(oe)){T.push(oe),j.push(Xt);const Ue=g[Xt];g[Xt]=(0,he.Z)(Ue)?[]:{}}}),c[p]=g;const Y=T.length;if(Y>0)for(let oe=0;oe<Y;oe++){const Xt=(0,he.Z)(e)||this.flatIndexForObjects?oe:null;this._flattenObject(T[oe],c,p,Xt,j[oe],o)}}return c}checkIfItemAlreadyExist(e,t,i){const r=i.name;if(e[t])throw new Error(Z.Ld.format(qv,r))}_includeObjectOperations(e,t){let i=e||[];return t===X.REMOVE?i=[X.REMOVE]:this._include(i,t),i}_include(e,t){e.includes(t)||e.push(t)}_getObjectCollectionPropertyNames(e,t){const i=t||{},r=this.objectProperties,s=r.parentPropertyName,o=r.parent;return(0,ne.Z)(e,c=>{const d=c[s],p=c[o];!this.isEmpty(p)&&!this.isEmpty(d)&&(i[p]=i[p]||[],this._include(i[p],d))}),i}_getCollectionPropertyNames(){const e=this.operationalValues,t=e.flatPrimaryObject,i=e.flatModifiedObject;let r={};return r=this._getObjectCollectionPropertyNames(t,r),r=this._getObjectCollectionPropertyNames(i,r),r}getObjectOperations(e){const t=this.objectProperties,i=this.operationalValues.primaryObject,r=this.operationalValues.modifiedObject,s=this.operationalValues.flatModifiedObject,o=this.operationalValues.flatDelta,c=(0,q.Z)(r);this._addOperationalNames(c);const d=this.makeDiff(i,c);let p={};const g=this._getCollectionPropertyNames();return(0,ne.Z)(o,(C,v)=>{this.isAdded(C)?p[v]=this._includeObjectOperations(p[v],X.INSERT):this.isRemoved(C)?p[v]=this._includeObjectOperations(p[v],X.REMOVE):(0,ne.Z)(C,(T,j)=>{if([t.parent,t.parentPropertyName].includes(j))(this.isAdded(T)||this.isModified(T)||this.isRemoved(T))&&(p[v]=this._includeObjectOperations(p[v],X.MOVE));else if(j===t.index){if(this.isAdded(T)||this.isModified(T)||this.isRemoved(T)){const Y=s[v],oe=Y[t.parent]||t.root,Xt=Y[t.parentPropertyName]||t.root,Ue=g[oe]||[];this._include(Ue,Xt),g[oe]=Ue}}else this.isRemoved(T)?p[v]=this._includeObjectOperations(p[v],X.REMOVE_PROPERTY):p[v]=this._includeObjectOperations(p[v],X.MERGE)})}),p=this._getObjectChangePositionOperations(d,g,p,o,e),p}_getObjectChangePositionOperations(e,t,i,r,s){const o=i||{};let c=[];const d={};this._fillItemsOperations(e,d),(0,ne.Z)(t,(g,C)=>{let v;if(C===this.objectProperties.root)v=this._getChangePositionObjectName(e,r,C),c=(0,dg.Z)(c,v);else{const T=this._getModifiedObjectSimpleName(C),j=d[T];if(j){let Y=t[C].shift();for(;!this.isEmpty(Y);){const oe=j[Y];v=this._getChangePositionObjectName(oe,r,C,s),c=(0,dg.Z)(c,v),Y=t[C].shift()}}}});let p=c.shift();for(;!this.isEmpty(p);)o[p]=this._includeObjectOperations(o[p],X.CHANGE_POSITION),p=c.shift();return o}_getChangePositionObjectName(e,t,i,r){const s=[],o=this.objectProperties.patchDiffNodeTypeSymbol;return(0,ne.Z)(e,(c,d)=>{if(d!==o&&(0,$_.Z)(d)&&d.indexOf("_")>=0&&this.isMoved(c)){const p=c[1],g=e[p];if(g){const C=g[this.objectProperties.operationalName][0],v=this._getChangePositionObjectPath(C,t,i,r);s.push(v)}}}),s}_fillItemsOperations(e,t={}){const{operationalName:i}=this.objectProperties;Object.entries(e).forEach(([r,s])=>{if(r===i){const o=e[i][0];t[o]=e}else((0,he.Z)(s)||(0,gt.Z)(s))&&this._fillItemsOperations(s,t)})}_addOperationalNames(e){e.hasOwnProperty(this.objectProperties.name)&&(e[this.objectProperties.operationalName]=e[this.objectProperties.name]),((0,gt.Z)(e)||(0,he.Z)(e))&&(0,ne.Z)(e,t=>{t&&this._addOperationalNames(t)})}_getModifiedObjectSimpleName(e){return e.split(this.pathDelimiter).pop()}_getChangePositionObjectPath(e,t,i,r){return!0===r?.identifyItemByPath?`${i}${this.pathDelimiter}${e}`:e}getObjectResultOperations(e){const t=[];return(0,ne.Z)(e,(i,r)=>{for(let s=0,o=i.length;s<o;s++){const c=i[s],d={operation:this.getObjectModificationTypeName(c),name:this._getModifiedObjectSimpleName(r)};switch(c){case X.INSERT:Object.assign(d,this.getOperationValues(r,c)),Object.assign(d,this.getOperationMoveProperties(r)),t.push(d);break;case X.CHANGE_POSITION:case X.MOVE:Object.assign(d,this.getOperationMoveProperties(r)),t.push(d);break;case X.REMOVE_PROPERTY:Object.assign(d,this.getOperationRemovedProperties(r)),d.properties.length>0&&t.push(d);break;case X.MERGE:Object.assign(d,this.getOperationValues(r,c)),d.values&&t.push(d);break;default:t.push(d)}}}),t}getOperationMoveProperties(e){const t=this.operationalValues.flatModifiedObject[e],i={},r=this.moveOperationProperties;for(let s=0,o=r.length;s<o;s++){const c=r[s];let d=t[c];this.isEmpty(d)||("parentName"===c&&(d=this._getModifiedObjectSimpleName(d)),i[c]=d)}return i}getOperationRemovedProperties(e){const t=this.operationalValues.flatDelta,i={properties:null},r=[],s=t[e];return(0,ne.Z)(s,(o,c)=>{this.isRemoved(o)&&r.push(c)}),i.properties=r,i}getOperationValues(e,t){const i={},r={};switch(t){case X.INSERT:this._setInsertOperationValues(e,r);break;case X.MERGE:this._setMergeOperationValues(e,r)}return(0,O.Z)(r)||(i.values=r),i}_setMergeOperationValues(e,t){const i=this.operationalValues.flatDelta,r=this.operationalValues.flatModifiedObject,s=i[e];(0,ne.Z)(s,(o,c)=>{if(!this.moveOperationProperties.includes(c)&&!this.isRemoved(o)){let p;p="a"===o[this.objectProperties.patchDiffNodeTypeSymbol]||(0,gt.Z)(o)&&!(0,O.Z)(o)?r[e][c]:this.isAdded(o)?o[0]:o[1],t[c]=p}})}_setInsertOperationValues(e,t){const r=this.operationalValues.flatModifiedObject[e];return(0,ne.Z)(r,(s,o)=>{this.moveOperationProperties.includes(o)||(t[o]=(0,q.Z)(s))}),r}getObjectModificationTypeName(e){let t;switch(e){case X.INSERT:t="insert";break;case X.REMOVE:case X.REMOVE_PROPERTY:t="remove";break;case X.MOVE:case X.CHANGE_POSITION:t="move";break;case X.MERGE:t="merge"}return t}isAdded(e){return 1===e.length}isModified(e){return 2===e.length}isMoved(e){return 3===e.length&&3===e[2]}isRemoved(e){return 3===e.length&&0===e[2]}makeDiff(e,t){if(!this._patch)throw new Error("jsondiffpatch module not found");return this._patch.diff(e,t)}getFlatObject(e,t){return this._flattenObject(e,null,null,null,null,t)||{}}getJsonDiff(e,t,i){let r=[];try{const s=this.makeDiff(e,t);if(s){const o=this.getFlatObject(e,i),c=this.getFlatObject(t,i),d=this.makeDiff(o,c);this.operationalValues={primaryObject:e,modifiedObject:t,delta:s,flatPrimaryObject:o,flatModifiedObject:c,flatDelta:d};const p=this.getObjectOperations(i);r=this.getObjectResultOperations(p)}}finally{(0,ne.Z)(this.operationalValues,(s,o)=>{delete this.operationalValues[o]}),this.operationalValues={}}return r}}Fi.\u0275fac=function(e){return new(e||Fi)},Fi.\u0275prov=n.\u0275\u0275defineInjectable({token:Fi,factory:Fi.\u0275fac});var $2=f(97380);class Li extends Fi{constructor(){super(...arguments),this.flatIndexForObjects=!1,this._fallbackRules={ifEveryArrayItemHasProperty:(e,t)=>e.every(i=>i[t])}}_getModifiedObjectPath(e,t){const i=t===X.REMOVE||t===X.REMOVE_PROPERTY?this.operationalValues.flatPrimaryObject:this.operationalValues.flatModifiedObject,r=i[e],s=[];return t===X.MERGE||t===X.REMOVE_PROPERTY?this._findParentPath(i,e,null,s):this._findParentPath(i,r?.parentName??e,r.propertyName,s),s.reverse(),"__root"===s[0]&&s.shift(),s}_findParentPath(e,t,i,r){if(t){let s=e[t];if(s?.__initialId)return void r.push(s.__initialId);if(i&&(s=s[i]),s?.__initialId)return void r.push(s.__initialId);const o=t.split(this.pathDelimiter),c=o.pop();r.push(s?.name||c),this._findParentPath(e,o.join(this.pathDelimiter),s?.propertyName,r)}}_convertRemovedNestedObjectsIntoSingleOperation(e){return Object.keys(e).reverse().forEach(t=>{if(this.isRemoved(e[t])){const i=e[t][0],r=e[i.parentName];r&&(this.isRemoved(r)||this.isRemoved(r[i.propertyName])||this.isModified(r[i.propertyName]))&&delete e[t]}}),e}_applyFallbackRulesToArrayItemWithoutName(e){return Object.keys(e).reverse().forEach(t=>{if(this.isRemoved(e[t])){const i=e[t][0];"a"===e[i.parentName]?.[i.propertyName]?.[this.objectProperties.patchDiffNodeTypeSymbol]&&delete e[t]}}),e}_convertAddedNestedObjectsIntoSingleOperation(e,t){return Object.keys(e).reverse().forEach(i=>{if(this.isAdded(e[i])){const r=e[i][0];if(void 0===r.index){const s=t[r.parentName];if(s[r.propertyName]){const o=(0,$2.Z)(Object.keys(r),...Object.values(this.objectProperties)).reduce((c,d)=>(c[d]=r[d],c),{});s[r.propertyName]=o}delete t[i]}}}),t}_isFlatArrayItem(e){const t=this.operationalValues.flatModifiedObject[e];return Number.isInteger(t?.index)}needFlatten(e,t){let i=t||!1;return i=!this.isEmpty(e?.name),i||((0,he.Z)(e)&&e.length>0&&this._fallbackRules.ifEveryArrayItemHasProperty(e,"__initialId")?i=!this.isEmpty(e[0].name):(0,Mp.Z)(e)&&(0,ne.Z)(e,r=>{i=this.needFlatten(r,i)})),i}checkIfItemAlreadyExist(e,t,i){super.checkIfItemAlreadyExist(e,t,i);const r=i[this.objectProperties.initialId];if(r)for(const s in e)if(e[s][this.objectProperties.initialId]===r)throw new Error(Z.Ld.format(qv,r))}_eachObjDeep(e,t){(0,Mp.Z)(e)&&t?.call(this,e),(0,ne.Z)(e,i=>{(0,gt.Z)(i)&&this._eachObjDeep(i,t)})}getOperationValues(e,t){const i=super.getOperationValues(e,t);return this._eachObjDeep(i,r=>{r.__initialName&&(r.name=r.__initialName,delete r.__initialName)}),i}getObjectResultOperations(e){const t=[];return(0,ne.Z)(e,(i,r)=>{for(let s=0,o=i.length;s<o;s++){const c=i[s],d={operation:this.getObjectModificationTypeName(c)};switch(c){case X.INSERT:d.name=this._getModifiedObjectSimpleName(r),d.path=this._getModifiedObjectPath(r,c),Object.assign(d,this.getOperationValues(r,c)),Object.assign(d,this.getOperationMoveProperties(r)),d.path.push(d.propertyName),delete d.propertyName,delete d.parentName,delete d.__initialId,delete d.values._id,t.push(d);break;case X.CHANGE_POSITION:case X.MOVE:d.name=this._getModifiedObjectSimpleName(r),d.path=this._getModifiedObjectPath(r,c),Object.assign(d,this.getOperationMoveProperties(r)),d.path.push(d.propertyName),delete d.propertyName,delete d.parentName,delete d.__initialId,t.push(d);break;case X.REMOVE_PROPERTY:this._isFlatArrayItem(r)?d.name=this._getModifiedObjectSimpleName(r):d.path=this._getModifiedObjectPath(r,c),Object.assign(d,this.getOperationRemovedProperties(r)),d.properties.length>0&&t.push(d);break;case X.MERGE:this._isFlatArrayItem(r)?d.name=this._getModifiedObjectSimpleName(r):d.path=this._getModifiedObjectPath(r,c),Object.assign(d,this.getOperationValues(r,c)),d.values&&t.push(d);break;default:d.name=this._getModifiedObjectSimpleName(r),t.push(d)}}}),t}setNameDeepByPathIfNeeded(e,t){Object.keys(e).length?(e.name&&(e.__initialName=e.name,delete e.name),e._id&&(e.name=e._id,e.__initialId=e._id),!e.name&&t&&(e.name=t),Object.keys(e).forEach(i=>{(0,Mp.Z)(e[i])?this.setNameDeepByPathIfNeeded(e[i],i):(0,he.Z)(e[i])&&this._fallbackRules.ifEveryArrayItemHasProperty(e[i],"_id")&&this.setNameDeepByPathIfNeeded(e[i],null)})):(0,Mp.Z)(e)&&(e.name=t)}getJsonDiff(e,t,i){let r=[];try{const s=this.makeDiff(e,t);if(e=(0,q.Z)(e),t=(0,q.Z)(t),this.setNameDeepByPathIfNeeded(e,this.objectProperties.root),this.setNameDeepByPathIfNeeded(t,this.objectProperties.root),s){const o=this.getFlatObject(e,i);let c=this.getFlatObject(t,i),d=this.makeDiff(o,c);c=this._convertAddedNestedObjectsIntoSingleOperation(d,c),d=this.makeDiff(o,c),d=this._convertRemovedNestedObjectsIntoSingleOperation(d),d=this._applyFallbackRulesToArrayItemWithoutName(d),this.operationalValues={primaryObject:e,modifiedObject:t,delta:s,flatPrimaryObject:o,flatModifiedObject:c,flatDelta:d};const p=this.getObjectOperations(i);r=this.getObjectResultOperations(p)}}finally{(0,ne.Z)(this.operationalValues,(s,o)=>{delete this.operationalValues[o]}),this.operationalValues={}}return r}}Li.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Li)))(t||Li)}}(),Li.\u0275prov=n.\u0275\u0275defineInjectable({token:Li,factory:Li.\u0275fac});const Wv={viewModelConfig:{attributes:{IsChanged:{value:!1},IsChangesTrackingEnabled:{value:!1},CardState:{},HeaderCaption:{value:"#ResourceString(DefaultHeaderCaption)#"},AttachmentList:{isCollection:!0,modelConfig:{path:"AttachmentListDS",sortingConfig:{default:[{columnName:"CreatedOn",direction:"desc"}],attributeName:"AttachmentListSorting"},pagingConfig:{rowCount:30}},viewModelConfig:{attributes:{AttachmentListDS_Name:{modelConfig:{path:"AttachmentListDS.Name"},properties:{readonly:{defaultValue:!1}}},AttachmentListDS_CreatedOn:{modelConfig:{path:"AttachmentListDS.CreatedOn"}},AttachmentListDS_CreatedBy:{modelConfig:{path:"AttachmentListDS.CreatedBy"}},AttachmentListDS_Size:{modelConfig:{path:"AttachmentListDS.Size"}},AttachmentListDS_Id:{modelConfig:{path:"AttachmentListDS.Id"}}}}},Id:{modelConfig:{path:"PDS.Id"}},Type:{modelConfig:{path:"PDS.Type"},businessRulesConfig:{businessRulesFilters:["Type_List_BusinessRule_Filter"]}},Owner:{modelConfig:{path:"PDS.Owner"},businessRulesConfig:{businessRulesFilters:["Owner_List_BusinessRule_Filter"]}},Dear:{modelConfig:{path:"PDS.Dear"}},Gender:{modelConfig:{path:"PDS.Gender"},businessRulesConfig:{businessRulesFilters:["Gender_List_BusinessRule_Filter"]}},SalutationType:{modelConfig:{path:"PDS.SalutationType"},businessRulesConfig:{businessRulesFilters:["SalutationType_List_BusinessRule_Filter"]}},Language:{modelConfig:{path:"PDS.Language"},businessRulesConfig:{businessRulesFilters:["Language_List_BusinessRule_Filter"]}},AddressList:{isCollection:!0,modelConfig:{path:"AddressListDS",filterAttributes:[{name:"AddressList_PredefinedFilter",loadOnChange:!0},{name:"AddressSearchFilter_AddressList",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"AddressListSorting"}},viewModelConfig:{attributes:{AddressListDS_AddressType:{modelConfig:{path:"AddressListDS.AddressType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["AddressListDS_AddressType_List_BusinessRule_Filter"]}},AddressListDS_FullAddress:{modelConfig:{path:"AddressListDS.FullAddress"},properties:{readonly:{defaultValue:!1}}},AddressListDS_Primary:{modelConfig:{path:"AddressListDS.Primary"}},AddressListDS_Id:{modelConfig:{path:"AddressListDS.Id"}},AddressListDS_AddressType_List:{isCollection:!0,isLookup:!0},AddressListDS_AddressType_List_BusinessRule_Filter:{value:{}}}}},CareerList:{isCollection:!0,modelConfig:{path:"CareerListDS"},viewModelConfig:{attributes:{CareerListDS_Account:{modelConfig:{path:"CareerListDS.Account"}},CareerListDS_JobTitle:{modelConfig:{path:"CareerListDS.JobTitle"}},CareerListDS_Department:{modelConfig:{path:"CareerListDS.Department"}},CareerListDS_Current:{modelConfig:{path:"CareerListDS.Current"}},CareerListDS_StartDate:{modelConfig:{path:"CareerListDS.StartDate"}},CareerListDS_Id:{modelConfig:{path:"CareerListDS.Id"}}}}},Account:{modelConfig:{path:"PDS.Account"},businessRulesConfig:{businessRulesFilters:["Account_List_BusinessRule_Filter"]}},JobTitle:{modelConfig:{path:"PDS.JobTitle"}},MobilePhone:{modelConfig:{path:"PDS.MobilePhone"}},Email:{modelConfig:{path:"PDS.Email"}},AccountIndustry:{modelConfig:{path:"PDS.AccountIndustry"},businessRulesConfig:{businessRulesFilters:["AccountIndustry_List_BusinessRule_Filter"]}},AccountAccountCategory:{modelConfig:{path:"PDS.AccountAccountCategory"},businessRulesConfig:{businessRulesFilters:["AccountAccountCategory_List_BusinessRule_Filter"]}},AccountWeb:{modelConfig:{path:"PDS.AccountWeb"}},EventList:{isCollection:!0,modelConfig:{path:"EventListDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"EventListSorting"},filterAttributes:[{name:"EventSearchFilter_EventList",loadOnChange:!0}]},viewModelConfig:{attributes:{EventListDS_Event:{modelConfig:{path:"EventListDS.Event"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["EventListDS_Event_List_BusinessRule_Filter"]}},EventListDS_EventType:{modelConfig:{path:"EventListDS.EventType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["EventListDS_EventType_List_BusinessRule_Filter"]}},EventListDS_EventResponse:{modelConfig:{path:"EventListDS.EventResponse"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["EventListDS_EventResponse_List_BusinessRule_Filter"]}},EventListDS_EventEndDate:{modelConfig:{path:"EventListDS.EventEndDate"},properties:{readonly:{defaultValue:!1}}},EventListDS_EventStartDate:{modelConfig:{path:"EventListDS.EventStartDate"},properties:{readonly:{defaultValue:!1}}},EventListDS_Id:{modelConfig:{path:"EventListDS.Id"}},EventListDS_Event_List:{isCollection:!0,isLookup:!0},EventListDS_Event_List_BusinessRule_Filter:{value:{}},EventListDS_EventType_List:{isCollection:!0,isLookup:!0},EventListDS_EventType_List_BusinessRule_Filter:{value:{}},EventListDS_EventResponse_List:{isCollection:!0,isLookup:!0},EventListDS_EventResponse_List_BusinessRule_Filter:{value:{}}}}},MrktLeadList:{isCollection:!0,modelConfig:{path:"MrktLeadListDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"MrktLeadListSorting"},filterAttributes:[{name:"MrktLeadSearchFilter_MrktLeadList",loadOnChange:!0}]},viewModelConfig:{attributes:{MrktLeadListDS_LeadName:{modelConfig:{path:"MrktLeadListDS.LeadName"},properties:{readonly:{defaultValue:!1}}},MrktLeadListDS_LeadType:{modelConfig:{path:"MrktLeadListDS.LeadType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["MrktLeadListDS_LeadType_List_BusinessRule_Filter"]}},MrktLeadListDS_QualifyStatus:{modelConfig:{path:"MrktLeadListDS.QualifyStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["MrktLeadListDS_QualifyStatus_List_BusinessRule_Filter"]}},MrktLeadListDS_Owner:{modelConfig:{path:"MrktLeadListDS.Owner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["MrktLeadListDS_Owner_List_BusinessRule_Filter"]}},MrktLeadListDS_CreatedOn:{modelConfig:{path:"MrktLeadListDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},MrktLeadListDS_Id:{modelConfig:{path:"MrktLeadListDS.Id"}},MrktLeadListDS_LeadType_List:{isCollection:!0,isLookup:!0},MrktLeadListDS_LeadType_List_BusinessRule_Filter:{value:{}},MrktLeadListDS_QualifyStatus_List:{isCollection:!0,isLookup:!0},MrktLeadListDS_QualifyStatus_List_BusinessRule_Filter:{value:{}},MrktLeadListDS_Owner_List:{isCollection:!0,isLookup:!0},MrktLeadListDS_Owner_List_BusinessRule_Filter:{value:{}}}}},SubmittedFormList:{isCollection:!0,modelConfig:{path:"SubmittedFormListDS"},viewModelConfig:{attributes:{SubmittedFormListDS_CreatedOn:{modelConfig:{path:"SubmittedFormListDS.CreatedOn"}},SubmittedFormListDS_WebForm:{modelConfig:{path:"SubmittedFormListDS.WebForm"}},SubmittedFormListDS_WebFormExternalURL:{modelConfig:{path:"SubmittedFormListDS.WebFormExternalURL"}},SubmittedFormListDS_FullName:{modelConfig:{path:"SubmittedFormListDS.FullName"}},SubmittedFormListDS_Email:{modelConfig:{path:"SubmittedFormListDS.Email"}},SubmittedFormListDS_PhoneNumber:{modelConfig:{path:"SubmittedFormListDS.PhoneNumber"}},SubmittedFormListDS_Account:{modelConfig:{path:"SubmittedFormListDS.Account"}},SubmittedFormListDS_Country:{modelConfig:{path:"SubmittedFormListDS.Country"}},SubmittedFormListDS_Id:{modelConfig:{path:"SubmittedFormListDS.Id"}}}}},WebSessionList:{isCollection:!0,modelConfig:{path:"WebSessionListDS",filterAttributes:[{loadOnChange:!0,name:"WebSessionList_PredefinedFilter"}],sortingConfig:{default:[{direction:"asc",columnName:"StartDate"}]}},viewModelConfig:{attributes:{WebSessionListDS_StartDate:{modelConfig:{path:"WebSessionListDS.StartDate"}},WebSessionListDS_CountryStr:{modelConfig:{path:"WebSessionListDS.CountryStr"}},WebSessionListDS_CityStr:{modelConfig:{path:"WebSessionListDS.CityStr"}},WebSessionListDS_Source:{modelConfig:{path:"WebSessionListDS.Source"}},WebSessionListDS_Channel:{modelConfig:{path:"WebSessionListDS.Channel"}},WebSessionListDS_PageReferrer:{modelConfig:{path:"WebSessionListDS.PageReferrer"}},WebSessionListDS_Duration:{modelConfig:{path:"WebSessionListDS.Duration"}},WebSessionListDS_TouchActionTouchIdCountd3601bf8:{modelConfig:{path:"WebSessionListDS.TouchActionTouchIdCountd3601bf8"}},WebSessionListDS_Id:{modelConfig:{path:"WebSessionListDS.Id"}}}}},WebSessionList_PredefinedFilter:{value:null},WebActionList:{isCollection:!0,modelConfig:{path:"WebActionListDS",filterAttributes:[{name:"WebActionList_PredefinedFilter",loadOnChange:!0}],sortingConfig:{default:[{direction:"asc",columnName:"ActionDate"}]}},viewModelConfig:{attributes:{WebActionListDS_ActionDate:{modelConfig:{path:"WebActionListDS.ActionDate"}},WebActionListDS_Type:{modelConfig:{path:"WebActionListDS.Type"}},WebActionListDS_WebPage:{modelConfig:{path:"WebActionListDS.WebPage"}},WebActionListDS_WebPageUrl:{modelConfig:{path:"WebActionListDS.WebPageUrl"}},WebActionListDS_Id:{modelConfig:{path:"WebActionListDS.Id"}}}}},WebActionList_PredefinedFilter:{value:null},CasesList:{isCollection:!0,modelConfig:{path:"CasesListDS",sortingConfig:{default:[{direction:"desc",columnName:"RegisteredOn"}],attributeName:"CasesListSorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"CasesSearchFilter_CasesList",loadOnChange:!0}]},viewModelConfig:{attributes:{CasesListDS_Number:{modelConfig:{path:"CasesListDS.Number"},properties:{readonly:{defaultValue:!1}}},CasesListDS_Subject:{modelConfig:{path:"CasesListDS.Subject"},properties:{readonly:{defaultValue:!1}}},CasesListDS_RegisteredOn:{modelConfig:{path:"CasesListDS.RegisteredOn"},properties:{readonly:{defaultValue:!1}}},CasesListDS_Status:{modelConfig:{path:"CasesListDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CasesListDS_Status_List_BusinessRule_Filter"]}},CasesListDS_SolutionDate:{modelConfig:{path:"CasesListDS.SolutionDate"},properties:{readonly:{defaultValue:!1}}},CasesListDS_Id:{modelConfig:{path:"CasesListDS.Id"}},CasesListDS_Status_List:{isCollection:!0,isLookup:!0},CasesListDS_Status_List_BusinessRule_Filter:{value:{}}}}},ServiceAgreementsList:{isCollection:!0,modelConfig:{path:"ServiceAgreementsListDS",sortingConfig:{default:[{direction:"desc",columnName:"ServicePactNumber"}]}},viewModelConfig:{attributes:{ServiceAgreementsListDS_ServicePactNumber:{modelConfig:{path:"ServiceAgreementsListDS.ServicePactNumber"}},ServiceAgreementsListDS_ServicePact:{modelConfig:{path:"ServiceAgreementsListDS.ServicePact"}},ServiceAgreementsListDS_ServicePactStatus:{modelConfig:{path:"ServiceAgreementsListDS.ServicePactStatus"}},ServiceAgreementsListDS_ServicePactOwner:{modelConfig:{path:"ServiceAgreementsListDS.ServicePactOwner"}},ServiceAgreementsListDS_Id:{modelConfig:{path:"ServiceAgreementsListDS.Id"}}}}},CampaignList:{isCollection:!0,modelConfig:{path:"CampaignListDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"CampaignListSorting"},filterAttributes:[{name:"CampaignSearchFilter_CampaignList",loadOnChange:!0}]},viewModelConfig:{attributes:{CampaignListDS_Campaign:{modelConfig:{path:"CampaignListDS.Campaign"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_Campaign_List_BusinessRule_Filter"]}},CampaignListDS_CampaignCampaignStatus:{modelConfig:{path:"CampaignListDS.CampaignCampaignStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_CampaignCampaignStatus_List_BusinessRule_Filter"]}},CampaignListDS_CampaignStartDate:{modelConfig:{path:"CampaignListDS.CampaignStartDate"},properties:{readonly:{defaultValue:!1}}},CampaignListDS_CampaignEndDate:{modelConfig:{path:"CampaignListDS.CampaignEndDate"},properties:{readonly:{defaultValue:!1}}},CampaignListDS_Status:{modelConfig:{path:"CampaignListDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_Status_List_BusinessRule_Filter"]}},CampaignListDS_CampaignItem:{modelConfig:{path:"CampaignListDS.CampaignItem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_CampaignItem_List_BusinessRule_Filter"]}},CampaignListDS_Id:{modelConfig:{path:"CampaignListDS.Id"}},CampaignListDS_Campaign_List:{isCollection:!0,isLookup:!0},CampaignListDS_Campaign_List_BusinessRule_Filter:{value:{}},CampaignListDS_CampaignCampaignStatus_List:{isCollection:!0,isLookup:!0},CampaignListDS_CampaignCampaignStatus_List_BusinessRule_Filter:{value:{}},CampaignListDS_Status_List:{isCollection:!0,isLookup:!0},CampaignListDS_Status_List_BusinessRule_Filter:{value:{}},CampaignListDS_CampaignItem_List:{isCollection:!0,isLookup:!0},CampaignListDS_CampaignItem_List_BusinessRule_Filter:{value:{}}}}},BulkEmailList:{isCollection:!0,modelConfig:{path:"BulkEmailListDS",sortingConfig:{default:[{direction:"asc",columnName:"BulkEmail"}],attributeName:"BulkEmailListSorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"BulkEmailSearchFilter_BulkEmailList",loadOnChange:!0}]},viewModelConfig:{attributes:{BulkEmailListDS_BulkEmail:{modelConfig:{path:"BulkEmailListDS.BulkEmail"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_BulkEmail_List_BusinessRule_Filter"]}},BulkEmailListDS_BulkEmailType:{modelConfig:{path:"BulkEmailListDS.BulkEmailType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_BulkEmailType_List_BusinessRule_Filter"]}},BulkEmailListDS_BulkEmailResponse:{modelConfig:{path:"BulkEmailListDS.BulkEmailResponse"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_BulkEmailResponse_List_BusinessRule_Filter"]}},BulkEmailListDS_ResponseReason:{modelConfig:{path:"BulkEmailListDS.ResponseReason"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_ResponseReason_List_BusinessRule_Filter"]}},BulkEmailListDS_BulkEmailStartDate:{modelConfig:{path:"BulkEmailListDS.BulkEmailStartDate"},properties:{readonly:{defaultValue:!1}}},BulkEmailListDS_Id:{modelConfig:{path:"BulkEmailListDS.Id"}},BulkEmailListDS_BulkEmail_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_BulkEmail_List_BusinessRule_Filter:{value:{}},BulkEmailListDS_BulkEmailType_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_BulkEmailType_List_BusinessRule_Filter:{value:{}},BulkEmailListDS_BulkEmailResponse_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_BulkEmailResponse_List_BusinessRule_Filter:{value:{}},BulkEmailListDS_ResponseReason_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_ResponseReason_List_BusinessRule_Filter:{value:{}}}}},LeadList:{isCollection:!0,modelConfig:{path:"LeadListDS",filterAttributes:[{name:"LeadList_PredefinedFilter",loadOnChange:!0},{name:"LeadSearchFilter_LeadList",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"LeadListSorting"}},viewModelConfig:{attributes:{LeadListDS_LeadName:{modelConfig:{path:"LeadListDS.LeadName"},properties:{readonly:{defaultValue:!1}}},LeadListDS_LeadType:{modelConfig:{path:"LeadListDS.LeadType"}},LeadListDS_QualifyStatus:{modelConfig:{path:"LeadListDS.QualifyStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["LeadListDS_QualifyStatus_List_BusinessRule_Filter"]}},LeadListDS_Owner:{modelConfig:{path:"LeadListDS.Owner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["LeadListDS_Owner_List_BusinessRule_Filter"]}},LeadListDS_CreatedOn:{modelConfig:{path:"LeadListDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},LeadListDS_Id:{modelConfig:{path:"LeadListDS.Id"}},LeadListDS_labLeadProduct:{modelConfig:{path:"LeadListDS.labLeadProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["LeadListDS_labLeadProduct_List_BusinessRule_Filter"]}},LeadListDS_labLeadProduct_List:{isCollection:!0,isLookup:!0},LeadListDS_labLeadProduct_List_BusinessRule_Filter:{value:{}},LeadListDS_QualifyStatus_List:{isCollection:!0,isLookup:!0},LeadListDS_QualifyStatus_List_BusinessRule_Filter:{value:{}},LeadListDS_Owner_List:{isCollection:!0,isLookup:!0},LeadListDS_Owner_List_BusinessRule_Filter:{value:{}}}}},RecommendedProductList:{isCollection:!0,modelConfig:{path:"RecommendedProductListDS",filterAttributes:[{name:"RecommendedProductList_PredefinedFilter",loadOnChange:!0}]},viewModelConfig:{attributes:{RecommendedProductListDS_Product:{modelConfig:{path:"RecommendedProductListDS.Product"}},RecommendedProductListDS_ProductPrice:{modelConfig:{path:"RecommendedProductListDS.ProductPrice"}},RecommendedProductListDS_Score:{modelConfig:{path:"RecommendedProductListDS.Score"}},RecommendedProductListDS_Status:{modelConfig:{path:"RecommendedProductListDS.Status"}},RecommendedProductListDS_CreatedOn:{modelConfig:{path:"RecommendedProductListDS.CreatedOn"}},RecommendedProductListDS_Id:{modelConfig:{path:"RecommendedProductListDS.Id"}}}}},OpportunityList:{isCollection:!0,modelConfig:{path:"OpportunityListDS",filterAttributes:[{name:"OpportunityList_PredefinedFilter",loadOnChange:!0},{name:"OpportunitySearchFilter_OpportunityList",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"OpportunityListSorting"}},viewModelConfig:{attributes:{OpportunityListDS_Title:{modelConfig:{path:"OpportunityListDS.Title"},properties:{readonly:{defaultValue:!1}}},OpportunityListDS_Stage:{modelConfig:{path:"OpportunityListDS.Stage"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["OpportunityListDS_Stage_List_BusinessRule_Filter"]}},OpportunityListDS_Probability:{modelConfig:{path:"OpportunityListDS.Probability"}},OpportunityListDS_Amount:{modelConfig:{path:"OpportunityListDS.Amount"}},OpportunityListDS_Owner:{modelConfig:{path:"OpportunityListDS.Owner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["OpportunityListDS_Owner_List_BusinessRule_Filter"]}},OpportunityListDS_DueDate:{modelConfig:{path:"OpportunityListDS.DueDate"}},OpportunityListDS_Id:{modelConfig:{path:"OpportunityListDS.Id"}},OpportunityListDS_labProduct:{modelConfig:{path:"OpportunityListDS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["OpportunityListDS_labProduct_List_BusinessRule_Filter"]}},OpportunityListDS_Stage_List:{isCollection:!0,isLookup:!0},OpportunityListDS_Stage_List_BusinessRule_Filter:{value:{}},OpportunityListDS_labProduct_List:{isCollection:!0,isLookup:!0},OpportunityListDS_labProduct_List_BusinessRule_Filter:{value:{}},OpportunityListDS_Owner_List:{isCollection:!0,isLookup:!0},OpportunityListDS_Owner_List_BusinessRule_Filter:{value:{}}}}},BooleanAttribute_x93xacm:{modelConfig:{path:"PDS.labChecking"}},BooleanAttribute_zxwe0de:{modelConfig:{path:"PDS.labDigWallet"}},BooleanAttribute_gw4coby:{modelConfig:{path:"PDS.labLoans"}},BooleanAttribute_su3f9mb:{modelConfig:{path:"PDS.labSavings"}},BooleanAttribute_m9dea0s:{modelConfig:{path:"PDS.labExpPay"}},BooleanAttribute_ocq7m2i:{modelConfig:{path:"PDS.labOnBanking"}},LookupAttribute_zk0ksk2:{modelConfig:{path:"PDS.labEntryProd"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_zk0ksk2_List_BusinessRule_Filter"]}},GridDetail_tvn7nvn:{isCollection:!0,modelConfig:{path:"GridDetail_tvn7nvnDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_tvn7nvnSorting"},filterAttributes:[{name:"GridDetailSearchFilter_0wrikix_GridDetail_tvn7nvn",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_tvn7nvnDS_labName:{modelConfig:{path:"GridDetail_tvn7nvnDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_tvn7nvnDS_labRefStat:{modelConfig:{path:"GridDetail_tvn7nvnDS.labRefStat"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_tvn7nvnDS_labRefStat_List_BusinessRule_Filter"]}},GridDetail_tvn7nvnDS_labDepartment:{modelConfig:{path:"GridDetail_tvn7nvnDS.labDepartment"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_tvn7nvnDS_labDepartment_List_BusinessRule_Filter"]}},GridDetail_tvn7nvnDS_CreatedOn:{modelConfig:{path:"GridDetail_tvn7nvnDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_tvn7nvnDS_Id:{modelConfig:{path:"GridDetail_tvn7nvnDS.Id"}},GridDetail_tvn7nvnDS_labRefStat_List:{isCollection:!0,isLookup:!0},GridDetail_tvn7nvnDS_labRefStat_List_BusinessRule_Filter:{value:{}},GridDetail_tvn7nvnDS_labDepartment_List:{isCollection:!0,isLookup:!0},GridDetail_tvn7nvnDS_labDepartment_List_BusinessRule_Filter:{value:{}}}}},GridDetail_qv2w59y:{isCollection:!0,modelConfig:{path:"GridDetail_qv2w59yDS",filterAttributes:[{loadOnChange:!0,name:"GridDetail_qv2w59y_PredefinedFilter"},{name:"GridDetailSearchFilter_3wx4p17_GridDetail_qv2w59y",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_qv2w59ySorting"}},viewModelConfig:{attributes:{GridDetail_qv2w59yDS_LeadName:{modelConfig:{path:"GridDetail_qv2w59yDS.LeadName"},properties:{readonly:{defaultValue:!1}}},GridDetail_qv2w59yDS_labLeadBranch:{modelConfig:{path:"GridDetail_qv2w59yDS.labLeadBranch"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_qv2w59yDS_labLeadBranch_List_BusinessRule_Filter"]}},GridDetail_qv2w59yDS_labLeadProduct:{modelConfig:{path:"GridDetail_qv2w59yDS.labLeadProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_qv2w59yDS_labLeadProduct_List_BusinessRule_Filter"]}},GridDetail_qv2w59yDS_CreatedOn:{modelConfig:{path:"GridDetail_qv2w59yDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_qv2w59yDS_Id:{modelConfig:{path:"GridDetail_qv2w59yDS.Id"}},GridDetail_qv2w59yDS_labLeadBranch_List:{isCollection:!0,isLookup:!0},GridDetail_qv2w59yDS_labLeadBranch_List_BusinessRule_Filter:{value:{}},GridDetail_qv2w59yDS_labLeadProduct_List:{isCollection:!0,isLookup:!0},GridDetail_qv2w59yDS_labLeadProduct_List_BusinessRule_Filter:{value:{}}}}},GridDetail_qv2w59y_PredefinedFilter:{value:{items:{"960dff15-5cbd-4511-960f-28c93439df8c":{filterType:4,comparisonType:3,isEnabled:!0,trimDateTimeParameterToDate:!1,leftExpression:{expressionType:0,columnPath:"labLeadType"},isAggregative:!1,dataValueType:10,referenceSchemaName:"labLeadTypeLook",rightExpressions:[{expressionType:2,parameter:{dataValueType:10,value:{Name:"External referral",Id:"37f86a9d-47a3-4eff-99df-c6a7bfa36658",value:"37f86a9d-47a3-4eff-99df-c6a7bfa36658",displayValue:"External referral"}}}]}},logicalOperation:0,isEnabled:!0,filterType:6,rootSchemaName:"Lead"}},NumberAttribute_ujgyeek:{modelConfig:{path:"PDS.labRefCredits"}},StringAttribute_fugi19c:{modelConfig:{path:"PDS.labPromoCode"}},StringAttribute_yzjdef4:{modelConfig:{path:"PDS.INN"}},LookupAttribute_rnw265x:{modelConfig:{path:"PDS.ServiceLevel"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_rnw265x_List_BusinessRule_Filter"]}},LookupAttribute_4kzy4zc:{modelConfig:{path:"PDS.Branch"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_4kzy4zc_List_BusinessRule_Filter"]}},LookupAttribute_fad548g:{modelConfig:{path:"PDS.labHousehold"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_fad548g_List_BusinessRule_Filter"]}},AccountType:{modelConfig:{path:"PDS.AccountType"},businessRulesConfig:{businessRulesFilters:["AccountType_List_BusinessRule_Filter"]}},AccountOwner:{modelConfig:{path:"PDS.AccountOwner"},businessRulesConfig:{businessRulesFilters:["AccountOwner_List_BusinessRule_Filter"]}},AccountPhone:{modelConfig:{path:"PDS.AccountPhone"}},DateTimeAttribute_3pyk1xn:{modelConfig:{path:"PDS.BirthDate"}},BooleanAttribute_cdtjpyl:{modelConfig:{path:"PDS.labPrequalified"}},StringAttribute_ipy5rkv:{modelConfig:{path:"PDS.PlaceOfBirth"}},LookupAttribute_3ge1lq2:{modelConfig:{path:"PDS.Citizenship"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_3ge1lq2_List_BusinessRule_Filter"]}},NumberAttribute_j3teeye:{modelConfig:{path:"PDS.Age"}},LookupAttribute_zf5zinh:{modelConfig:{path:"PDS.labContTerr"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_zf5zinh_List_BusinessRule_Filter"]}},GridDetail_7ryb0yc:{isCollection:!0,modelConfig:{path:"GridDetail_7ryb0ycDS"},viewModelConfig:{attributes:{GridDetail_7ryb0ycDS_CommunicationType:{modelConfig:{path:"GridDetail_7ryb0ycDS.CommunicationType"}},GridDetail_7ryb0ycDS_Number:{modelConfig:{path:"GridDetail_7ryb0ycDS.Number"}},GridDetail_7ryb0ycDS_Id:{modelConfig:{path:"GridDetail_7ryb0ycDS.Id"}}}}},GridDetail_rpob5tn:{isCollection:!0,modelConfig:{path:"GridDetail_rpob5tnDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_rpob5tnSorting"},filterAttributes:[{name:"GridDetailSearchFilter_e9rhpo0_GridDetail_rpob5tn",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_rpob5tnDS_AnniversaryType:{modelConfig:{path:"GridDetail_rpob5tnDS.AnniversaryType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_rpob5tnDS_AnniversaryType_List_BusinessRule_Filter"]}},GridDetail_rpob5tnDS_Date:{modelConfig:{path:"GridDetail_rpob5tnDS.Date"},properties:{readonly:{defaultValue:!1}}},GridDetail_rpob5tnDS_Id:{modelConfig:{path:"GridDetail_rpob5tnDS.Id"}},GridDetail_rpob5tnDS_AnniversaryType_List:{isCollection:!0,isLookup:!0},GridDetail_rpob5tnDS_AnniversaryType_List_BusinessRule_Filter:{value:{}}}}},GridDetail_aev82uj:{isCollection:!0,modelConfig:{path:"GridDetail_aev82ujDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_aev82ujSorting"},filterAttributes:[{name:"GridDetailSearchFilter_hari1b2_GridDetail_aev82uj",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_aev82ujDS_labContact:{modelConfig:{path:"GridDetail_aev82ujDS.labContact"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aev82ujDS_labContact_List_BusinessRule_Filter"]}},GridDetail_aev82ujDS_labMLModel:{modelConfig:{path:"GridDetail_aev82ujDS.labMLModel"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aev82ujDS_labMLModel_List_BusinessRule_Filter"]}},GridDetail_aev82ujDS_labStatus:{modelConfig:{path:"GridDetail_aev82ujDS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aev82ujDS_labStatus_List_BusinessRule_Filter"]}},GridDetail_aev82ujDS_labPredScore:{modelConfig:{path:"GridDetail_aev82ujDS.labPredScore"},properties:{readonly:{defaultValue:!1}}},GridDetail_aev82ujDS_Id:{modelConfig:{path:"GridDetail_aev82ujDS.Id"}},GridDetail_aev82ujDS_labContact_List:{isCollection:!0,isLookup:!0},GridDetail_aev82ujDS_labContact_List_BusinessRule_Filter:{value:{}},GridDetail_aev82ujDS_labMLModel_List:{isCollection:!0,isLookup:!0},GridDetail_aev82ujDS_labMLModel_List_BusinessRule_Filter:{value:{}},GridDetail_aev82ujDS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_aev82ujDS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_kzffd99:{isCollection:!0,modelConfig:{path:"GridDetail_kzffd99DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_kzffd99Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_b3g2c6j_GridDetail_kzffd99",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_kzffd99DS_labHousehold:{modelConfig:{path:"GridDetail_kzffd99DS.labHousehold"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labHousehold_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labContact:{modelConfig:{path:"GridDetail_kzffd99DS.labContact"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labContact_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labPrdType:{modelConfig:{path:"GridDetail_kzffd99DS.labPrdType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labPrdType_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labProduct:{modelConfig:{path:"GridDetail_kzffd99DS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labProduct_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labRelationship:{modelConfig:{path:"GridDetail_kzffd99DS.labRelationship"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labRelationship_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labProdCategory:{modelConfig:{path:"GridDetail_kzffd99DS.labProdCategory"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labProdCategory_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_Id:{modelConfig:{path:"GridDetail_kzffd99DS.Id"}},GridDetail_kzffd99DS_labHousehold_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labHousehold_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labContact_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labContact_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labPrdType_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labPrdType_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labProduct_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labProduct_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labRelationship_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labRelationship_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labProdCategory_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labProdCategory_List_BusinessRule_Filter:{value:{}}}}},GridDetail_rz37ruw:{isCollection:!0,modelConfig:{path:"GridDetail_rz37ruwDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_rz37ruwSorting"},filterAttributes:[{name:"GridDetailSearchFilter_8ru8fou_GridDetail_rz37ruw",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_rz37ruwDS_labLookup1:{modelConfig:{path:"GridDetail_rz37ruwDS.labLookup1"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_rz37ruwDS_labLookup1_List_BusinessRule_Filter"]}},GridDetail_rz37ruwDS_labLookup2:{modelConfig:{path:"GridDetail_rz37ruwDS.labLookup2"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_rz37ruwDS_labLookup2_List_BusinessRule_Filter"]}},GridDetail_rz37ruwDS_Id:{modelConfig:{path:"GridDetail_rz37ruwDS.Id"}},GridDetail_rz37ruwDS_labLookup1_List:{isCollection:!0,isLookup:!0},GridDetail_rz37ruwDS_labLookup1_List_BusinessRule_Filter:{value:{}},GridDetail_rz37ruwDS_labLookup2_List:{isCollection:!0,isLookup:!0},GridDetail_rz37ruwDS_labLookup2_List_BusinessRule_Filter:{value:{}}}}},GridDetail_2gberl0:{isCollection:!0,modelConfig:{path:"GridDetail_2gberl0DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_2gberl0Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_zgf8jwn_GridDetail_2gberl0",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_2gberl0DS_BulkEmailType:{modelConfig:{path:"GridDetail_2gberl0DS.BulkEmailType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_2gberl0DS_BulkEmailType_List_BusinessRule_Filter"]}},GridDetail_2gberl0DS_BulkEmailSubsStatus:{modelConfig:{path:"GridDetail_2gberl0DS.BulkEmailSubsStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_2gberl0DS_BulkEmailSubsStatus_List_BusinessRule_Filter"]}},GridDetail_2gberl0DS_Id:{modelConfig:{path:"GridDetail_2gberl0DS.Id"}},GridDetail_2gberl0DS_BulkEmailType_List:{isCollection:!0,isLookup:!0},GridDetail_2gberl0DS_BulkEmailType_List_BusinessRule_Filter:{value:{}},GridDetail_2gberl0DS_BulkEmailSubsStatus_List:{isCollection:!0,isLookup:!0},GridDetail_2gberl0DS_BulkEmailSubsStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_i8kds4l:{isCollection:!0,modelConfig:{path:"GridDetail_i8kds4lDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_i8kds4lSorting"},filterAttributes:[{name:"GridDetailSearchFilter_lxhotbi_GridDetail_i8kds4l",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_i8kds4lDS_Product:{modelConfig:{path:"GridDetail_i8kds4lDS.Product"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i8kds4lDS_Product_List_BusinessRule_Filter"]}},GridDetail_i8kds4lDS_MLModel:{modelConfig:{path:"GridDetail_i8kds4lDS.MLModel"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i8kds4lDS_MLModel_List_BusinessRule_Filter"]}},GridDetail_i8kds4lDS_Status:{modelConfig:{path:"GridDetail_i8kds4lDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i8kds4lDS_Status_List_BusinessRule_Filter"]}},GridDetail_i8kds4lDS_PredictionDate:{modelConfig:{path:"GridDetail_i8kds4lDS.PredictionDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_i8kds4lDS_Score:{modelConfig:{path:"GridDetail_i8kds4lDS.Score"},properties:{readonly:{defaultValue:!1}}},GridDetail_i8kds4lDS_Id:{modelConfig:{path:"GridDetail_i8kds4lDS.Id"}},GridDetail_i8kds4lDS_Product_List:{isCollection:!0,isLookup:!0},GridDetail_i8kds4lDS_Product_List_BusinessRule_Filter:{value:{}},GridDetail_i8kds4lDS_MLModel_List:{isCollection:!0,isLookup:!0},GridDetail_i8kds4lDS_MLModel_List_BusinessRule_Filter:{value:{}},GridDetail_i8kds4lDS_Status_List:{isCollection:!0,isLookup:!0},GridDetail_i8kds4lDS_Status_List_BusinessRule_Filter:{value:{}}}}},GridDetail_j2e59o5:{isCollection:!0,modelConfig:{path:"GridDetail_j2e59o5DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_j2e59o5Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_9o47mn5_GridDetail_j2e59o5",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_j2e59o5DS_Number:{modelConfig:{path:"GridDetail_j2e59o5DS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_j2e59o5DS_CreatedOn:{modelConfig:{path:"GridDetail_j2e59o5DS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_j2e59o5DS_Status:{modelConfig:{path:"GridDetail_j2e59o5DS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_j2e59o5DS_Status_List_BusinessRule_Filter"]}},GridDetail_j2e59o5DS_Product:{modelConfig:{path:"GridDetail_j2e59o5DS.Product"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_j2e59o5DS_Product_List_BusinessRule_Filter"]}},GridDetail_j2e59o5DS_Id:{modelConfig:{path:"GridDetail_j2e59o5DS.Id"}},GridDetail_j2e59o5DS_Status_List:{isCollection:!0,isLookup:!0},GridDetail_j2e59o5DS_Status_List_BusinessRule_Filter:{value:{}},GridDetail_j2e59o5DS_Product_List:{isCollection:!0,isLookup:!0},GridDetail_j2e59o5DS_Product_List_BusinessRule_Filter:{value:{}}}}},GridDetail_li979xs:{isCollection:!0,modelConfig:{path:"GridDetail_li979xsDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_li979xsSorting"},filterAttributes:[{name:"GridDetailSearchFilter_p6ida3m_GridDetail_li979xs",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_li979xsDS_labName:{modelConfig:{path:"GridDetail_li979xsDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_li979xsDS_labLoanApp:{modelConfig:{path:"GridDetail_li979xsDS.labLoanApp"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labLoanApp_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_labv:{modelConfig:{path:"GridDetail_li979xsDS.labv"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labv_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_labLoanAm:{modelConfig:{path:"GridDetail_li979xsDS.labLoanAm"},properties:{readonly:{defaultValue:!1}}},GridDetail_li979xsDS_labCurrency:{modelConfig:{path:"GridDetail_li979xsDS.labCurrency"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labCurrency_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_labLoanStatus:{modelConfig:{path:"GridDetail_li979xsDS.labLoanStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labLoanStatus_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_Id:{modelConfig:{path:"GridDetail_li979xsDS.Id"}},GridDetail_li979xsDS_labLoanApp_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labLoanApp_List_BusinessRule_Filter:{value:{}},GridDetail_li979xsDS_labv_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labv_List_BusinessRule_Filter:{value:{}},GridDetail_li979xsDS_labCurrency_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labCurrency_List_BusinessRule_Filter:{value:{}},GridDetail_li979xsDS_labLoanStatus_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labLoanStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_8heyk4j:{isCollection:!0,modelConfig:{path:"GridDetail_8heyk4jDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_8heyk4jSorting"},filterAttributes:[{name:"GridDetailSearchFilter_cincz9x_GridDetail_8heyk4j",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_8heyk4jDS_BankAccountNumber:{modelConfig:{path:"GridDetail_8heyk4jDS.BankAccountNumber"},properties:{readonly:{defaultValue:!1}}},GridDetail_8heyk4jDS_Product:{modelConfig:{path:"GridDetail_8heyk4jDS.Product"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_8heyk4jDS_Product_List_BusinessRule_Filter"]}},GridDetail_8heyk4jDS_Type:{modelConfig:{path:"GridDetail_8heyk4jDS.Type"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_8heyk4jDS_Type_List_BusinessRule_Filter"]}},GridDetail_8heyk4jDS_Status:{modelConfig:{path:"GridDetail_8heyk4jDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_8heyk4jDS_Status_List_BusinessRule_Filter"]}},GridDetail_8heyk4jDS_Id:{modelConfig:{path:"GridDetail_8heyk4jDS.Id"}},GridDetail_8heyk4jDS_Product_List:{isCollection:!0,isLookup:!0},GridDetail_8heyk4jDS_Product_List_BusinessRule_Filter:{value:{}},GridDetail_8heyk4jDS_Type_List:{isCollection:!0,isLookup:!0},GridDetail_8heyk4jDS_Type_List_BusinessRule_Filter:{value:{}},GridDetail_8heyk4jDS_Status_List:{isCollection:!0,isLookup:!0},GridDetail_8heyk4jDS_Status_List_BusinessRule_Filter:{value:{}}}}},GridDetail_i4bd2vv:{isCollection:!0,modelConfig:{path:"GridDetail_i4bd2vvDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_i4bd2vvSorting"},filterAttributes:[{name:"GridDetailSearchFilter_9nnxpsx_GridDetail_i4bd2vv",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_i4bd2vvDS_labName:{modelConfig:{path:"GridDetail_i4bd2vvDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_i4bd2vvDS_labProduct:{modelConfig:{path:"GridDetail_i4bd2vvDS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i4bd2vvDS_labProduct_List_BusinessRule_Filter"]}},GridDetail_i4bd2vvDS_labStatus:{modelConfig:{path:"GridDetail_i4bd2vvDS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i4bd2vvDS_labStatus_List_BusinessRule_Filter"]}},GridDetail_i4bd2vvDS_labAmount:{modelConfig:{path:"GridDetail_i4bd2vvDS.labAmount"},properties:{readonly:{defaultValue:!1}}},GridDetail_i4bd2vvDS_labDepBal:{modelConfig:{path:"GridDetail_i4bd2vvDS.labDepBal"},properties:{readonly:{defaultValue:!1}}},GridDetail_i4bd2vvDS_Id:{modelConfig:{path:"GridDetail_i4bd2vvDS.Id"}},GridDetail_i4bd2vvDS_labProduct_List:{isCollection:!0,isLookup:!0},GridDetail_i4bd2vvDS_labProduct_List_BusinessRule_Filter:{value:{}},GridDetail_i4bd2vvDS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_i4bd2vvDS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_6k3851i:{isCollection:!0,modelConfig:{path:"GridDetail_6k3851iDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_6k3851iSorting"},filterAttributes:[{name:"GridDetailSearchFilter_rl732ka_GridDetail_6k3851i",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_6k3851iDS_Number:{modelConfig:{path:"GridDetail_6k3851iDS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_6k3851iDS_BankCardType:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardType_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_BankCardPaymentSystem:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardPaymentSystem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardPaymentSystem_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_BankCardCategory:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardCategory"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardCategory_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_IsPrimary:{modelConfig:{path:"GridDetail_6k3851iDS.IsPrimary"}},GridDetail_6k3851iDS_BankCardStatus:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardStatus_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_Id:{modelConfig:{path:"GridDetail_6k3851iDS.Id"}},GridDetail_6k3851iDS_BankCardType_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardType_List_BusinessRule_Filter:{value:{}},GridDetail_6k3851iDS_BankCardPaymentSystem_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardPaymentSystem_List_BusinessRule_Filter:{value:{}},GridDetail_6k3851iDS_BankCardCategory_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardCategory_List_BusinessRule_Filter:{value:{}},GridDetail_6k3851iDS_BankCardStatus_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_6jeoi45:{isCollection:!0,modelConfig:{path:"GridDetail_6jeoi45DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_6jeoi45Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_1jcvfml_GridDetail_6jeoi45",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_6jeoi45DS_labFinAccount:{modelConfig:{path:"GridDetail_6jeoi45DS.labFinAccount"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labFinAccount_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_labActionItem:{modelConfig:{path:"GridDetail_6jeoi45DS.labActionItem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labActionItem_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_labOwner:{modelConfig:{path:"GridDetail_6jeoi45DS.labOwner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labOwner_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_labDueDate:{modelConfig:{path:"GridDetail_6jeoi45DS.labDueDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_6jeoi45DS_labStatus:{modelConfig:{path:"GridDetail_6jeoi45DS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labStatus_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_Id:{modelConfig:{path:"GridDetail_6jeoi45DS.Id"}},GridDetail_6jeoi45DS_labFinAccount_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labFinAccount_List_BusinessRule_Filter:{value:{}},GridDetail_6jeoi45DS_labActionItem_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labActionItem_List_BusinessRule_Filter:{value:{}},GridDetail_6jeoi45DS_labOwner_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labOwner_List_BusinessRule_Filter:{value:{}},GridDetail_6jeoi45DS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_xmrieqn:{isCollection:!0,modelConfig:{path:"GridDetail_xmrieqnDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_xmrieqnSorting"},filterAttributes:[{name:"GridDetailSearchFilter_m68l3fm_GridDetail_xmrieqn",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_xmrieqnDS_labActionItem:{modelConfig:{path:"GridDetail_xmrieqnDS.labActionItem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labActionItem_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_labDueDate:{modelConfig:{path:"GridDetail_xmrieqnDS.labDueDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_xmrieqnDS_labOwner:{modelConfig:{path:"GridDetail_xmrieqnDS.labOwner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labOwner_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_labDepartment:{modelConfig:{path:"GridDetail_xmrieqnDS.labDepartment"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labDepartment_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_labStatus:{modelConfig:{path:"GridDetail_xmrieqnDS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labStatus_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_Id:{modelConfig:{path:"GridDetail_xmrieqnDS.Id"}},GridDetail_xmrieqnDS_labActionItem_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labActionItem_List_BusinessRule_Filter:{value:{}},GridDetail_xmrieqnDS_labOwner_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labOwner_List_BusinessRule_Filter:{value:{}},GridDetail_xmrieqnDS_labDepartment_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labDepartment_List_BusinessRule_Filter:{value:{}},GridDetail_xmrieqnDS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_oul85iz:{isCollection:!0,modelConfig:{path:"GridDetail_oul85izDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_oul85izSorting"},filterAttributes:[{name:"GridDetailSearchFilter_dz2oayf_GridDetail_oul85iz",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_oul85izDS_labName:{modelConfig:{path:"GridDetail_oul85izDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_oul85izDS_labMaintType:{modelConfig:{path:"GridDetail_oul85izDS.labMaintType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_oul85izDS_labMaintType_List_BusinessRule_Filter"]}},GridDetail_oul85izDS_labMaintStatus:{modelConfig:{path:"GridDetail_oul85izDS.labMaintStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_oul85izDS_labMaintStatus_List_BusinessRule_Filter"]}},GridDetail_oul85izDS_CreatedBy:{modelConfig:{path:"GridDetail_oul85izDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_oul85izDS_CreatedBy_List_BusinessRule_Filter"]}},GridDetail_oul85izDS_CreatedOn:{modelConfig:{path:"GridDetail_oul85izDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_oul85izDS_Id:{modelConfig:{path:"GridDetail_oul85izDS.Id"}},GridDetail_oul85izDS_labMaintType_List:{isCollection:!0,isLookup:!0},GridDetail_oul85izDS_labMaintType_List_BusinessRule_Filter:{value:{}},GridDetail_oul85izDS_labMaintStatus_List:{isCollection:!0,isLookup:!0},GridDetail_oul85izDS_labMaintStatus_List_BusinessRule_Filter:{value:{}},GridDetail_oul85izDS_CreatedBy_List:{isCollection:!0,isLookup:!0},GridDetail_oul85izDS_CreatedBy_List_BusinessRule_Filter:{value:{}}}}},GridDetail_a4twh16:{isCollection:!0,modelConfig:{path:"GridDetail_a4twh16DS"},viewModelConfig:{attributes:{GridDetail_a4twh16DS_labName:{modelConfig:{path:"GridDetail_a4twh16DS.labName"}},GridDetail_a4twh16DS_Id:{modelConfig:{path:"GridDetail_a4twh16DS.Id"}}}}},DataGrid_h0jo4x2:{isCollection:!0,modelConfig:{path:"DataGrid_h0jo4x2DS",sortingConfig:{default:[{direction:"asc",columnName:"labPrequalDate"}],attributeName:"DataGrid_h0jo4x2Sorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"GridDetailSearchFilter_cbw5cs0_DataGrid_h0jo4x2",loadOnChange:!0}]},viewModelConfig:{attributes:{DataGrid_h0jo4x2DS_labProduct:{modelConfig:{path:"DataGrid_h0jo4x2DS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_h0jo4x2DS_labProduct_List_BusinessRule_Filter"]}},DataGrid_h0jo4x2DS_labStatus:{modelConfig:{path:"DataGrid_h0jo4x2DS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_h0jo4x2DS_labStatus_List_BusinessRule_Filter"]}},DataGrid_h0jo4x2DS_labPrequalDate:{modelConfig:{path:"DataGrid_h0jo4x2DS.labPrequalDate"},properties:{readonly:{defaultValue:!1}}},DataGrid_h0jo4x2DS_labPrequalScore:{modelConfig:{path:"DataGrid_h0jo4x2DS.labPrequalScore"},properties:{readonly:{defaultValue:!1}}},DataGrid_h0jo4x2DS_Id:{modelConfig:{path:"DataGrid_h0jo4x2DS.Id"}},DataGrid_h0jo4x2DS_labProduct_List:{isCollection:!0,isLookup:!0},DataGrid_h0jo4x2DS_labProduct_List_BusinessRule_Filter:{value:{}},DataGrid_h0jo4x2DS_labStatus_List:{isCollection:!0,isLookup:!0},DataGrid_h0jo4x2DS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_8fxxb7y:{isCollection:!0,modelConfig:{path:"GridDetail_8fxxb7yDS",filterAttributes:[{loadOnChange:!0,name:"GridDetail_8fxxb7y_PredefinedFilter"}]},viewModelConfig:{attributes:{GridDetail_8fxxb7yDS_Title:{modelConfig:{path:"GridDetail_8fxxb7yDS.Title"}},GridDetail_8fxxb7yDS_Id:{modelConfig:{path:"GridDetail_8fxxb7yDS.Id"}}}}},GridDetail_8fxxb7y_PredefinedFilter:{value:{items:{"dd33d3ed-bb83-4b83-9d8e-7f1654abeedc":{filterType:4,comparisonType:3,isEnabled:!0,trimDateTimeParameterToDate:!1,leftExpression:{expressionType:0,columnPath:"Type"},isAggregative:!1,dataValueType:10,referenceSchemaName:"ActivityType",rightExpressions:[{expressionType:2,parameter:{dataValueType:10,value:{Name:"Task",Id:"fbe0acdc-cfc0-df11-b00f-001d60e938c6",value:"fbe0acdc-cfc0-df11-b00f-001d60e938c6",displayValue:"Task"}}}]}},logicalOperation:0,isEnabled:!0,filterType:6,rootSchemaName:"Activity"}},DataGrid_5ytpfit:{isCollection:!0,modelConfig:{path:"DataGrid_5ytpfitDS"},viewModelConfig:{attributes:{DataGrid_5ytpfitDS_Title:{modelConfig:{path:"DataGrid_5ytpfitDS.Title"}},DataGrid_5ytpfitDS_Id:{modelConfig:{path:"DataGrid_5ytpfitDS.Id"}}}}},DataGrid_jzw7u0a:{isCollection:!0,modelConfig:{path:"DataGrid_jzw7u0aDS",sortingConfig:{default:[{direction:"asc",columnName:"Title"}],attributeName:"DataGrid_jzw7u0aSorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"GridDetailSearchFilter_amixsoz_DataGrid_jzw7u0a",loadOnChange:!0},{name:"SearchFilter_rxl83ud_DataGrid_jzw7u0a",loadOnChange:!0}]},viewModelConfig:{attributes:{DataGrid_jzw7u0aDS_Title:{modelConfig:{path:"DataGrid_jzw7u0aDS.Title"},properties:{readonly:{defaultValue:!1}}},DataGrid_jzw7u0aDS_StartDate:{modelConfig:{path:"DataGrid_jzw7u0aDS.StartDate"},properties:{readonly:{defaultValue:!1}}},DataGrid_jzw7u0aDS_Status:{modelConfig:{path:"DataGrid_jzw7u0aDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_jzw7u0aDS_Status_List_BusinessRule_Filter"]}},DataGrid_jzw7u0aDS_Id:{modelConfig:{path:"DataGrid_jzw7u0aDS.Id"}},DataGrid_jzw7u0aDS_Status_List:{isCollection:!0,isLookup:!0},DataGrid_jzw7u0aDS_Status_List_BusinessRule_Filter:{value:{}}}}},DataGrid_ecoig1g:{isCollection:!0,modelConfig:{path:"DataGrid_ecoig1gDS",filterAttributes:[{loadOnChange:!0,name:"DataGrid_ecoig1g_PredefinedFilter"}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"DataGrid_ecoig1gSorting"}},viewModelConfig:{attributes:{DataGrid_ecoig1gDS_Title:{modelConfig:{path:"DataGrid_ecoig1gDS.Title"},properties:{readonly:{defaultValue:!1}}},DataGrid_ecoig1gDS_CreatedBy:{modelConfig:{path:"DataGrid_ecoig1gDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_ecoig1gDS_CreatedBy_List_BusinessRule_Filter"]}},DataGrid_ecoig1gDS_CreatedOn:{modelConfig:{path:"DataGrid_ecoig1gDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},DataGrid_ecoig1gDS_Id:{modelConfig:{path:"DataGrid_ecoig1gDS.Id"}},DataGrid_ecoig1gDS_CreatedBy_List:{isCollection:!0,isLookup:!0},DataGrid_ecoig1gDS_CreatedBy_List_BusinessRule_Filter:{value:{}}}}},DataGrid_ecoig1g_PredefinedFilter:{value:{items:{"e4f9f008-bf68-4506-9761-f1f11109c661":{filterType:4,comparisonType:3,isEnabled:!0,trimDateTimeParameterToDate:!1,leftExpression:{expressionType:0,columnPath:"Type"},isAggregative:!1,dataValueType:10,referenceSchemaName:"ActivityType",rightExpressions:[{expressionType:2,parameter:{dataValueType:10,value:{Name:"Email",Id:"e2831dec-cfc0-df11-b00f-001d60e938c6",value:"e2831dec-cfc0-df11-b00f-001d60e938c6",displayValue:"Email"}}}]}},logicalOperation:0,isEnabled:!0,filterType:6,rootSchemaName:"Activity"}},GridDetail_x25mmsp:{isCollection:!0,modelConfig:{path:"GridDetail_x25mmspDS"},viewModelConfig:{attributes:{GridDetail_x25mmspDS_Caption:{modelConfig:{path:"GridDetail_x25mmspDS.Caption"}},GridDetail_x25mmspDS_Id:{modelConfig:{path:"GridDetail_x25mmspDS.Id"}}}}},DataGrid_y7eukvv:{isCollection:!0,modelConfig:{path:"DataGrid_y7eukvvDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"DataGrid_y7eukvvSorting"},filterAttributes:[{name:"GridDetailSearchFilter_lcebbc3_DataGrid_y7eukvv",loadOnChange:!0}]},viewModelConfig:{attributes:{DataGrid_y7eukvvDS_CreatedBy:{modelConfig:{path:"DataGrid_y7eukvvDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_y7eukvvDS_CreatedBy_List_BusinessRule_Filter"]}},DataGrid_y7eukvvDS_CreatedOn:{modelConfig:{path:"DataGrid_y7eukvvDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_Direction:{modelConfig:{path:"DataGrid_y7eukvvDS.Direction"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_y7eukvvDS_Direction_List_BusinessRule_Filter"]}},DataGrid_y7eukvvDS_CallerId:{modelConfig:{path:"DataGrid_y7eukvvDS.CallerId"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_CalledId:{modelConfig:{path:"DataGrid_y7eukvvDS.CalledId"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_Duration:{modelConfig:{path:"DataGrid_y7eukvvDS.Duration"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_Id:{modelConfig:{path:"DataGrid_y7eukvvDS.Id"}},DataGrid_y7eukvvDS_CreatedBy_List:{isCollection:!0,isLookup:!0},DataGrid_y7eukvvDS_CreatedBy_List_BusinessRule_Filter:{value:{}},DataGrid_y7eukvvDS_Direction_List:{isCollection:!0,isLookup:!0},DataGrid_y7eukvvDS_Direction_List_BusinessRule_Filter:{value:{}}}}},GridDetail_d5y3by3:{isCollection:!0,modelConfig:{path:"GridDetail_d5y3by3DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_d5y3by3Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_76kzn3h_GridDetail_d5y3by3",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_d5y3by3DS_Name:{modelConfig:{path:"GridDetail_d5y3by3DS.Name"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_Operator:{modelConfig:{path:"GridDetail_d5y3by3DS.Operator"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_d5y3by3DS_Operator_List_BusinessRule_Filter"]}},GridDetail_d5y3by3DS_Channel:{modelConfig:{path:"GridDetail_d5y3by3DS.Channel"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_d5y3by3DS_Channel_List_BusinessRule_Filter"]}},GridDetail_d5y3by3DS_Category:{modelConfig:{path:"GridDetail_d5y3by3DS.Category"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_d5y3by3DS_Category_List_BusinessRule_Filter"]}},GridDetail_d5y3by3DS_ChatDuration:{modelConfig:{path:"GridDetail_d5y3by3DS.ChatDuration"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_LastMessage:{modelConfig:{path:"GridDetail_d5y3by3DS.LastMessage"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_CreatedOn:{modelConfig:{path:"GridDetail_d5y3by3DS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_Id:{modelConfig:{path:"GridDetail_d5y3by3DS.Id"}},GridDetail_d5y3by3DS_Operator_List:{isCollection:!0,isLookup:!0},GridDetail_d5y3by3DS_Operator_List_BusinessRule_Filter:{value:{}},GridDetail_d5y3by3DS_Channel_List:{isCollection:!0,isLookup:!0},GridDetail_d5y3by3DS_Channel_List_BusinessRule_Filter:{value:{}},GridDetail_d5y3by3DS_Category_List:{isCollection:!0,isLookup:!0},GridDetail_d5y3by3DS_Category_List_BusinessRule_Filter:{value:{}}}}},GridDetail_x3cav3u:{isCollection:!0,modelConfig:{path:"GridDetail_x3cav3uDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_x3cav3uSorting"},filterAttributes:[{name:"GridDetailSearchFilter_ayoctrj_GridDetail_x3cav3u",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_x3cav3uDS_LeadName:{modelConfig:{path:"GridDetail_x3cav3uDS.LeadName"},properties:{readonly:{defaultValue:!1}}},GridDetail_x3cav3uDS_labLeadProduct:{modelConfig:{path:"GridDetail_x3cav3uDS.labLeadProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_x3cav3uDS_labLeadProduct_List_BusinessRule_Filter"]}},GridDetail_x3cav3uDS_CreatedOn:{modelConfig:{path:"GridDetail_x3cav3uDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_x3cav3uDS_QualifyStatus:{modelConfig:{path:"GridDetail_x3cav3uDS.QualifyStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_x3cav3uDS_QualifyStatus_List_BusinessRule_Filter"]}},GridDetail_x3cav3uDS_CreatedBy:{modelConfig:{path:"GridDetail_x3cav3uDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_x3cav3uDS_CreatedBy_List_BusinessRule_Filter"]}},GridDetail_x3cav3uDS_Id:{modelConfig:{path:"GridDetail_x3cav3uDS.Id"}},GridDetail_x3cav3uDS_labLeadProduct_List:{isCollection:!0,isLookup:!0},GridDetail_x3cav3uDS_labLeadProduct_List_BusinessRule_Filter:{value:{}},GridDetail_x3cav3uDS_QualifyStatus_List:{isCollection:!0,isLookup:!0},GridDetail_x3cav3uDS_QualifyStatus_List_BusinessRule_Filter:{value:{}},GridDetail_x3cav3uDS_CreatedBy_List:{isCollection:!0,isLookup:!0},GridDetail_x3cav3uDS_CreatedBy_List_BusinessRule_Filter:{value:{}}}}},GridDetail_v0nminl:{isCollection:!0,modelConfig:{path:"GridDetail_v0nminlDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_v0nminlSorting"},filterAttributes:[{name:"GridDetailSearchFilter_2khf7nj_GridDetail_v0nminl",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_v0nminlDS_Title:{modelConfig:{path:"GridDetail_v0nminlDS.Title"},properties:{readonly:{defaultValue:!1}}},GridDetail_v0nminlDS_Stage:{modelConfig:{path:"GridDetail_v0nminlDS.Stage"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_v0nminlDS_Stage_List_BusinessRule_Filter"]}},GridDetail_v0nminlDS_labProduct:{modelConfig:{path:"GridDetail_v0nminlDS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_v0nminlDS_labProduct_List_BusinessRule_Filter"]}},GridDetail_v0nminlDS_CreatedOn:{modelConfig:{path:"GridDetail_v0nminlDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_v0nminlDS_Id:{modelConfig:{path:"GridDetail_v0nminlDS.Id"}},GridDetail_v0nminlDS_Stage_List:{isCollection:!0,isLookup:!0},GridDetail_v0nminlDS_Stage_List_BusinessRule_Filter:{value:{}},GridDetail_v0nminlDS_labProduct_List:{isCollection:!0,isLookup:!0},GridDetail_v0nminlDS_labProduct_List_BusinessRule_Filter:{value:{}}}}},GridDetail_3gt81gc:{isCollection:!0,modelConfig:{path:"GridDetail_3gt81gcDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_3gt81gcSorting"},filterAttributes:[{name:"GridDetailSearchFilter_xo35c4j_GridDetail_3gt81gc",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_3gt81gcDS_Number:{modelConfig:{path:"GridDetail_3gt81gcDS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_3gt81gcDS_Type:{modelConfig:{path:"GridDetail_3gt81gcDS.Type"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_3gt81gcDS_Type_List_BusinessRule_Filter"]}},GridDetail_3gt81gcDS_StartDate:{modelConfig:{path:"GridDetail_3gt81gcDS.StartDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_3gt81gcDS_State:{modelConfig:{path:"GridDetail_3gt81gcDS.State"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_3gt81gcDS_State_List_BusinessRule_Filter"]}},GridDetail_3gt81gcDS_Id:{modelConfig:{path:"GridDetail_3gt81gcDS.Id"}},GridDetail_3gt81gcDS_Type_List:{isCollection:!0,isLookup:!0},GridDetail_3gt81gcDS_Type_List_BusinessRule_Filter:{value:{}},GridDetail_3gt81gcDS_State_List:{isCollection:!0,isLookup:!0},GridDetail_3gt81gcDS_State_List_BusinessRule_Filter:{value:{}}}}},GridDetail_e9f5esh:{isCollection:!0,modelConfig:{path:"GridDetail_e9f5eshDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_e9f5eshSorting"},filterAttributes:[{name:"GridDetailSearchFilter_uicubtb_GridDetail_e9f5esh",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_e9f5eshDS_Number:{modelConfig:{path:"GridDetail_e9f5eshDS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_e9f5eshDS_Type:{modelConfig:{path:"GridDetail_e9f5eshDS.Type"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_e9f5eshDS_Type_List_BusinessRule_Filter"]}},GridDetail_e9f5eshDS_Date:{modelConfig:{path:"GridDetail_e9f5eshDS.Date"},properties:{readonly:{defaultValue:!1}}},GridDetail_e9f5eshDS_State:{modelConfig:{path:"GridDetail_e9f5eshDS.State"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_e9f5eshDS_State_List_BusinessRule_Filter"]}},GridDetail_e9f5eshDS_Id:{modelConfig:{path:"GridDetail_e9f5eshDS.Id"}},GridDetail_e9f5eshDS_Type_List:{isCollection:!0,isLookup:!0},GridDetail_e9f5eshDS_Type_List_BusinessRule_Filter:{value:{}},GridDetail_e9f5eshDS_State_List:{isCollection:!0,isLookup:!0},GridDetail_e9f5eshDS_State_List_BusinessRule_Filter:{value:{}}}}},GridDetail_w2xsm9v:{isCollection:!0,modelConfig:{path:"GridDetail_w2xsm9vDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_w2xsm9vSorting"},filterAttributes:[{name:"GridDetailSearchFilter_tkug8ym_GridDetail_w2xsm9v",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_w2xsm9vDS_labName:{modelConfig:{path:"GridDetail_w2xsm9vDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_w2xsm9vDS_labIncType:{modelConfig:{path:"GridDetail_w2xsm9vDS.labIncType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_labIncType_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_labIncStatus:{modelConfig:{path:"GridDetail_w2xsm9vDS.labIncStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_labIncStatus_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_CreatedBy:{modelConfig:{path:"GridDetail_w2xsm9vDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_CreatedBy_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_labIncLegEnt:{modelConfig:{path:"GridDetail_w2xsm9vDS.labIncLegEnt"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_labIncLegEnt_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_Id:{modelConfig:{path:"GridDetail_w2xsm9vDS.Id"}},GridDetail_w2xsm9vDS_labIncType_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_labIncType_List_BusinessRule_Filter:{value:{}},GridDetail_w2xsm9vDS_labIncStatus_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_labIncStatus_List_BusinessRule_Filter:{value:{}},GridDetail_w2xsm9vDS_CreatedBy_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_CreatedBy_List_BusinessRule_Filter:{value:{}},GridDetail_w2xsm9vDS_labIncLegEnt_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_labIncLegEnt_List_BusinessRule_Filter:{value:{}}}}},BooleanAttribute_8rteevs:{modelConfig:{path:"PDS.labIsNonGrata"}},BooleanAttribute_5akkqz8:{modelConfig:{path:"PDS.IsInBlackList"}},DateTimeAttribute_u8w7tmn:{modelConfig:{path:"PDS.labDateUpdate"}},DateTimeAttribute_2pg9927:{modelConfig:{path:"PDS.BlackListDate"}},StringAttribute_qprk1mr:{modelConfig:{path:"PDS.BlackListReason"}},LookupAttribute_ygg2rcf:{modelConfig:{path:"PDS.labFATCA"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_ygg2rcf_List_BusinessRule_Filter"]}},StringAttribute_vljwl9a:{modelConfig:{path:"PDS.labFATCATIN"}},GridDetail_aea60u7:{isCollection:!0,modelConfig:{path:"GridDetail_aea60u7DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_aea60u7Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_teu5g4k_GridDetail_aea60u7",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_aea60u7DS_IsPrimary:{modelConfig:{path:"GridDetail_aea60u7DS.IsPrimary"}},GridDetail_aea60u7DS_RegDocumentType:{modelConfig:{path:"GridDetail_aea60u7DS.RegDocumentType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aea60u7DS_RegDocumentType_List_BusinessRule_Filter"]}},GridDetail_aea60u7DS_Series:{modelConfig:{path:"GridDetail_aea60u7DS.Series"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_Number:{modelConfig:{path:"GridDetail_aea60u7DS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_IssueDate:{modelConfig:{path:"GridDetail_aea60u7DS.IssueDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_ValidUntil:{modelConfig:{path:"GridDetail_aea60u7DS.ValidUntil"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_Id:{modelConfig:{path:"GridDetail_aea60u7DS.Id"}},GridDetail_aea60u7DS_RegDocumentType_List:{isCollection:!0,isLookup:!0},GridDetail_aea60u7DS_RegDocumentType_List_BusinessRule_Filter:{value:{}}}}},GridDetail_mgt5acd:{isCollection:!0,modelConfig:{path:"GridDetail_mgt5acdDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_mgt5acdSorting"},filterAttributes:[{name:"GridDetailSearchFilter_mi9f80u_GridDetail_mgt5acd",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_mgt5acdDS_labActive:{modelConfig:{path:"GridDetail_mgt5acdDS.labActive"}},GridDetail_mgt5acdDS_labValidated:{modelConfig:{path:"GridDetail_mgt5acdDS.labValidated"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_mgt5acdDS_labValidated_List_BusinessRule_Filter"]}},GridDetail_mgt5acdDS_labResult:{modelConfig:{path:"GridDetail_mgt5acdDS.labResult"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_mgt5acdDS_labResult_List_BusinessRule_Filter"]}},GridDetail_mgt5acdDS_CreatedOn:{modelConfig:{path:"GridDetail_mgt5acdDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_mgt5acdDS_Id:{modelConfig:{path:"GridDetail_mgt5acdDS.Id"}},GridDetail_mgt5acdDS_labValidated_List:{isCollection:!0,isLookup:!0},GridDetail_mgt5acdDS_labValidated_List_BusinessRule_Filter:{value:{}},GridDetail_mgt5acdDS_labResult_List:{isCollection:!0,isLookup:!0},GridDetail_mgt5acdDS_labResult_List_BusinessRule_Filter:{value:{}}}}},GridDetail_s74w3ph:{isCollection:!0,modelConfig:{path:"GridDetail_s74w3phDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_s74w3phSorting"},filterAttributes:[{name:"GridDetailSearchFilter_tapmy1u_GridDetail_s74w3ph",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_s74w3phDS_labActive:{modelConfig:{path:"GridDetail_s74w3phDS.labActive"}},GridDetail_s74w3phDS_labHQCountry:{modelConfig:{path:"GridDetail_s74w3phDS.labHQCountry"}},GridDetail_s74w3phDS_labResCountry:{modelConfig:{path:"GridDetail_s74w3phDS.labResCountry"}},GridDetail_s74w3phDS_CreatedOn:{modelConfig:{path:"GridDetail_s74w3phDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_s74w3phDS_Id:{modelConfig:{path:"GridDetail_s74w3phDS.Id"}}}}},SliderAttribute_lvul654:{modelConfig:{path:"PDS.labEngScore"}},StringAttribute_7wiyh13:{modelConfig:{path:"PDS.Phone"}},StringAttribute_un28j6b:{modelConfig:{path:"PDS.LinkedIn"}},GridDetail_uw745zj:{isCollection:!0,modelConfig:{path:"GridDetail_uw745zjDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_uw745zjSorting"},filterAttributes:[{name:"GridDetailSearchFilter_lgzyj6t_GridDetail_uw745zj",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_uw745zjDS_labSurvey:{modelConfig:{path:"GridDetail_uw745zjDS.labSurvey"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_uw745zjDS_labSurvey_List_BusinessRule_Filter"]}},GridDetail_uw745zjDS_CreatedOn:{modelConfig:{path:"GridDetail_uw745zjDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_uw745zjDS_labSurveyRespStatus:{modelConfig:{path:"GridDetail_uw745zjDS.labSurveyRespStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_uw745zjDS_labSurveyRespStatus_List_BusinessRule_Filter"]}},GridDetail_uw745zjDS_Id:{modelConfig:{path:"GridDetail_uw745zjDS.Id"}},GridDetail_uw745zjDS_labSurvey_List:{isCollection:!0,isLookup:!0},GridDetail_uw745zjDS_labSurvey_List_BusinessRule_Filter:{value:{}},GridDetail_uw745zjDS_labSurveyRespStatus_List:{isCollection:!0,isLookup:!0},GridDetail_uw745zjDS_labSurveyRespStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_7c5ohiu:{isCollection:!0,modelConfig:{path:"GridDetail_7c5ohiuDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_7c5ohiuSorting"},filterAttributes:[{name:"GridDetailSearchFilter_842fhbw_GridDetail_7c5ohiu",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_7c5ohiuDS_SmrBulkSms:{modelConfig:{path:"GridDetail_7c5ohiuDS.SmrBulkSms"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_7c5ohiuDS_SmrBulkSms_List_BusinessRule_Filter"]}},GridDetail_7c5ohiuDS_CreatedOn:{modelConfig:{path:"GridDetail_7c5ohiuDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_7c5ohiuDS_Id:{modelConfig:{path:"GridDetail_7c5ohiuDS.Id"}},GridDetail_7c5ohiuDS_SmrBulkSms_List:{isCollection:!0,isLookup:!0},GridDetail_7c5ohiuDS_SmrBulkSms_List_BusinessRule_Filter:{value:{}}}}},GridDetail_rz37ruw_EditingCells:{value:null},GridDetail_2gberl0_EditingCells:{value:null},GridDetail_rpob5tn_EditingCells:{value:null},GridDetail_kzffd99_EditingCells:{value:null},GridDetail_aev82uj_EditingCells:{value:null},GridDetail_tvn7nvn_EditingCells:{value:null},GridDetail_qv2w59y_EditingCells:{value:null},GridDetail_i8kds4l_EditingCells:{value:null},GridDetail_j2e59o5_EditingCells:{value:null},GridDetail_li979xs_EditingCells:{value:null},GridDetail_8heyk4j_EditingCells:{value:null},GridDetail_i4bd2vv_EditingCells:{value:null},GridDetail_6k3851i_EditingCells:{value:null},GridDetail_6jeoi45_EditingCells:{value:null},GridDetail_xmrieqn_EditingCells:{value:null},GridDetail_oul85iz_EditingCells:{value:null},CasesList_EditingCells:{value:null},DataGrid_h0jo4x2_EditingCells:{value:null},DataGrid_jzw7u0a_EditingCells:{value:null},DataGrid_ecoig1g_EditingCells:{value:null},DataGrid_y7eukvv_EditingCells:{value:null},GridDetail_d5y3by3_EditingCells:{value:null},GridDetail_x3cav3u_EditingCells:{value:null},GridDetail_v0nminl_EditingCells:{value:null},GridDetail_3gt81gc_EditingCells:{value:null},GridDetail_e9f5esh_EditingCells:{value:null},GridDetail_uw745zj_EditingCells:{value:null},GridDetail_7c5ohiu_EditingCells:{value:null},GridDetail_w2xsm9v_EditingCells:{value:null},GridDetail_aea60u7_EditingCells:{value:null},GridDetail_mgt5acd_EditingCells:{value:null},GridDetail_s74w3ph_EditingCells:{value:null},AttachmentList_EditingCells:{value:null},GridDetail_rz37ruwSelectionState:{},GridDetail_2gberl0SelectionState:{},GridDetail_rpob5tnSelectionState:{},GridDetail_kzffd99SelectionState:{},GridDetail_aev82ujSelectionState:{},AddressListSelectionState:{},GridDetail_tvn7nvnSelectionState:{},GridDetail_qv2w59ySelectionState:{},GridDetail_i8kds4lSelectionState:{},GridDetail_j2e59o5SelectionState:{},GridDetail_li979xsSelectionState:{},GridDetail_8heyk4jSelectionState:{},GridDetail_i4bd2vvSelectionState:{},GridDetail_6k3851iSelectionState:{},GridDetail_6jeoi45SelectionState:{},GridDetail_xmrieqnSelectionState:{},GridDetail_oul85izSelectionState:{},CasesListSelectionState:{},LeadListSelectionState:{},OpportunityListSelectionState:{},DataGrid_h0jo4x2SelectionState:{},DataGrid_jzw7u0aSelectionState:{},DataGrid_ecoig1gSelectionState:{},DataGrid_y7eukvvSelectionState:{},GridDetail_d5y3by3SelectionState:{},GridDetail_x3cav3uSelectionState:{},GridDetail_v0nminlSelectionState:{},GridDetail_3gt81gcSelectionState:{},GridDetail_e9f5eshSelectionState:{},MrktLeadListSelectionState:{},GridDetail_uw745zjSelectionState:{},BulkEmailListSelectionState:{},EventListSelectionState:{},GridDetail_7c5ohiuSelectionState:{},CampaignListSelectionState:{},GridDetail_w2xsm9vSelectionState:{},GridDetail_aea60u7SelectionState:{},GridDetail_mgt5acdSelectionState:{},GridDetail_s74w3phSelectionState:{},AttachmentListSelectionState:{},GridDetail_rz37ruwSorting:{},GridDetail_2gberl0Sorting:{},GridDetail_rpob5tnSorting:{},GridDetail_kzffd99Sorting:{},GridDetail_aev82ujSorting:{},AddressListSorting:{},GridDetail_tvn7nvnSorting:{},GridDetail_qv2w59ySorting:{},GridDetail_i8kds4lSorting:{},GridDetail_j2e59o5Sorting:{},GridDetail_li979xsSorting:{},GridDetail_8heyk4jSorting:{},GridDetail_i4bd2vvSorting:{},GridDetail_6k3851iSorting:{},GridDetail_6jeoi45Sorting:{},GridDetail_xmrieqnSorting:{},GridDetail_oul85izSorting:{},CasesListSorting:{},LeadListSorting:{},OpportunityListSorting:{},DataGrid_h0jo4x2Sorting:{},DataGrid_jzw7u0aSorting:{},DataGrid_ecoig1gSorting:{},DataGrid_y7eukvvSorting:{},GridDetail_d5y3by3Sorting:{},GridDetail_x3cav3uSorting:{},GridDetail_v0nminlSorting:{},GridDetail_3gt81gcSorting:{},GridDetail_e9f5eshSorting:{},MrktLeadListSorting:{},GridDetail_uw745zjSorting:{},BulkEmailListSorting:{},EventListSorting:{},GridDetail_7c5ohiuSorting:{},CampaignListSorting:{},GridDetail_w2xsm9vSorting:{},GridDetail_aea60u7Sorting:{},GridDetail_mgt5acdSorting:{},GridDetail_s74w3phSorting:{},AttachmentListSorting:{},Account_List:{isCollection:!0,isLookup:!0},Account_List_BusinessRule_Filter:{value:{}},Type_List:{isCollection:!0,isLookup:!0},Type_List_BusinessRule_Filter:{value:{}},LookupAttribute_rnw265x_List:{isCollection:!0,isLookup:!0},LookupAttribute_rnw265x_List_BusinessRule_Filter:{value:{}},LookupAttribute_4kzy4zc_List:{isCollection:!0,isLookup:!0},LookupAttribute_4kzy4zc_List_BusinessRule_Filter:{value:{}},Owner_List:{isCollection:!0,isLookup:!0},Owner_List_BusinessRule_Filter:{value:{}},LookupAttribute_fad548g_List:{isCollection:!0,isLookup:!0},LookupAttribute_fad548g_List_BusinessRule_Filter:{value:{}},AccountType_List:{isCollection:!0,isLookup:!0},AccountType_List_BusinessRule_Filter:{value:{}},AccountOwner_List:{isCollection:!0,isLookup:!0},AccountOwner_List_BusinessRule_Filter:{value:{}},AccountAccountCategory_List:{isCollection:!0,isLookup:!0},AccountAccountCategory_List_BusinessRule_Filter:{value:{}},AccountIndustry_List:{isCollection:!0,isLookup:!0},AccountIndustry_List_BusinessRule_Filter:{value:{}},LookupAttribute_zk0ksk2_List:{isCollection:!0,isLookup:!0},LookupAttribute_zk0ksk2_List_BusinessRule_Filter:{value:{}},SalutationType_List:{isCollection:!0,isLookup:!0},SalutationType_List_BusinessRule_Filter:{value:{}},Language_List:{isCollection:!0,isLookup:!0},Language_List_BusinessRule_Filter:{value:{}},Gender_List:{isCollection:!0,isLookup:!0},Gender_List_BusinessRule_Filter:{value:{}},LookupAttribute_3ge1lq2_List:{isCollection:!0,isLookup:!0},LookupAttribute_3ge1lq2_List_BusinessRule_Filter:{value:{}},LookupAttribute_zf5zinh_List:{isCollection:!0,isLookup:!0},LookupAttribute_zf5zinh_List_BusinessRule_Filter:{value:{}},LookupAttribute_ygg2rcf_List:{isCollection:!0,isLookup:!0},LookupAttribute_ygg2rcf_List_BusinessRule_Filter:{value:{}},GridDetailSearchFilter_8ru8fouSearchValue:{value:""},GridDetailSearchFilter_8ru8fouSearchFilteredColumn:{value:""},GridDetailSearchFilter_8ru8fou_GridDetail_rz37ruw:{value:{}},GridDetailSearchFilter_zgf8jwnSearchValue:{value:""},GridDetailSearchFilter_zgf8jwnSearchFilteredColumn:{value:""},GridDetailSearchFilter_zgf8jwn_GridDetail_2gberl0:{value:{}},GridDetailSearchFilter_e9rhpo0SearchValue:{value:""},GridDetailSearchFilter_e9rhpo0SearchFilteredColumn:{value:""},GridDetailSearchFilter_e9rhpo0_GridDetail_rpob5tn:{value:{}},GridDetailSearchFilter_b3g2c6jSearchValue:{value:""},GridDetailSearchFilter_b3g2c6jSearchFilteredColumn:{value:""},GridDetailSearchFilter_b3g2c6j_GridDetail_kzffd99:{value:{}},GridDetailSearchFilter_hari1b2SearchValue:{value:""},GridDetailSearchFilter_hari1b2SearchFilteredColumn:{value:""},GridDetailSearchFilter_hari1b2_GridDetail_aev82uj:{value:{}},AddressSearchFilterSearchValue:{value:""},AddressSearchFilterSearchFilteredColumn:{value:""},AddressSearchFilter_AddressList:{value:{}},GridDetailSearchFilter_0wrikixSearchValue:{value:""},GridDetailSearchFilter_0wrikixSearchFilteredColumn:{value:""},GridDetailSearchFilter_0wrikix_GridDetail_tvn7nvn:{value:{}},GridDetailSearchFilter_3wx4p17SearchValue:{value:""},GridDetailSearchFilter_3wx4p17SearchFilteredColumn:{value:""},GridDetailSearchFilter_3wx4p17_GridDetail_qv2w59y:{value:{}},GridDetailSearchFilter_lxhotbiSearchValue:{value:""},GridDetailSearchFilter_lxhotbiSearchFilteredColumn:{value:""},GridDetailSearchFilter_lxhotbi_GridDetail_i8kds4l:{value:{}},GridDetailSearchFilter_9o47mn5SearchValue:{value:""},GridDetailSearchFilter_9o47mn5SearchFilteredColumn:{value:""},GridDetailSearchFilter_9o47mn5_GridDetail_j2e59o5:{value:{}},GridDetailSearchFilter_p6ida3mSearchValue:{value:""},GridDetailSearchFilter_p6ida3mSearchFilteredColumn:{value:""},GridDetailSearchFilter_p6ida3m_GridDetail_li979xs:{value:{}},GridDetailSearchFilter_cincz9xSearchValue:{value:""},GridDetailSearchFilter_cincz9xSearchFilteredColumn:{value:""},GridDetailSearchFilter_cincz9x_GridDetail_8heyk4j:{value:{}},GridDetailSearchFilter_rl732kaSearchValue:{value:""},GridDetailSearchFilter_rl732kaSearchFilteredColumn:{value:""},GridDetailSearchFilter_rl732ka_GridDetail_6k3851i:{value:{}},GridDetailSearchFilter_9nnxpsxSearchValue:{value:""},GridDetailSearchFilter_9nnxpsxSearchFilteredColumn:{value:""},GridDetailSearchFilter_9nnxpsx_GridDetail_i4bd2vv:{value:{}},GridDetailSearchFilter_1jcvfmlSearchValue:{value:""},GridDetailSearchFilter_1jcvfmlSearchFilteredColumn:{value:""},GridDetailSearchFilter_1jcvfml_GridDetail_6jeoi45:{value:{}},GridDetailSearchFilter_m68l3fmSearchValue:{value:""},GridDetailSearchFilter_m68l3fmSearchFilteredColumn:{value:""},GridDetailSearchFilter_m68l3fm_GridDetail_xmrieqn:{value:{}},GridDetailSearchFilter_dz2oayfSearchValue:{value:""},GridDetailSearchFilter_dz2oayfSearchFilteredColumn:{value:""},GridDetailSearchFilter_dz2oayf_GridDetail_oul85iz:{value:{}},CasesSearchFilterSearchValue:{value:""},CasesSearchFilterSearchFilteredColumn:{value:""},CasesSearchFilter_CasesList:{value:{}},LeadSearchFilterSearchValue:{value:""},LeadSearchFilterSearchFilteredColumn:{value:""},LeadSearchFilter_LeadList:{value:{}},OpportunitySearchFilterSearchValue:{value:""},OpportunitySearchFilterSearchFilteredColumn:{value:""},OpportunitySearchFilter_OpportunityList:{value:{}},GridDetailSearchFilter_cbw5cs0SearchValue:{value:""},GridDetailSearchFilter_cbw5cs0SearchFilteredColumn:{value:""},GridDetailSearchFilter_cbw5cs0_DataGrid_h0jo4x2:{value:{}},GridDetailSearchFilter_amixsozSearchValue:{value:""},GridDetailSearchFilter_amixsozSearchFilteredColumn:{value:""},GridDetailSearchFilter_amixsoz_DataGrid_jzw7u0a:{value:{}},SearchFilter_rxl83udSearchValue:{value:""},SearchFilter_rxl83udSearchFilteredColumn:{value:""},SearchFilter_rxl83ud_DataGrid_jzw7u0a:{value:{}},GridDetailSearchFilter_lcebbc3SearchValue:{value:""},GridDetailSearchFilter_lcebbc3SearchFilteredColumn:{value:""},GridDetailSearchFilter_lcebbc3_DataGrid_y7eukvv:{value:{}},GridDetailSearchFilter_76kzn3hSearchValue:{value:""},GridDetailSearchFilter_76kzn3hSearchFilteredColumn:{value:""},GridDetailSearchFilter_76kzn3h_GridDetail_d5y3by3:{value:{}},GridDetailSearchFilter_ayoctrjSearchValue:{value:""},GridDetailSearchFilter_ayoctrjSearchFilteredColumn:{value:""},GridDetailSearchFilter_ayoctrj_GridDetail_x3cav3u:{value:{}},GridDetailSearchFilter_uicubtbSearchValue:{value:""},GridDetailSearchFilter_uicubtbSearchFilteredColumn:{value:""},GridDetailSearchFilter_uicubtb_GridDetail_e9f5esh:{value:{}},GridDetailSearchFilter_xo35c4jSearchValue:{value:""},GridDetailSearchFilter_xo35c4jSearchFilteredColumn:{value:""},GridDetailSearchFilter_xo35c4j_GridDetail_3gt81gc:{value:{}},GridDetailSearchFilter_2khf7njSearchValue:{value:""},GridDetailSearchFilter_2khf7njSearchFilteredColumn:{value:""},GridDetailSearchFilter_2khf7nj_GridDetail_v0nminl:{value:{}},MrktLeadSearchFilterSearchValue:{value:""},MrktLeadSearchFilterSearchFilteredColumn:{value:""},MrktLeadSearchFilter_MrktLeadList:{value:{}},GridDetailSearchFilter_lgzyj6tSearchValue:{value:""},GridDetailSearchFilter_lgzyj6tSearchFilteredColumn:{value:""},GridDetailSearchFilter_lgzyj6t_GridDetail_uw745zj:{value:{}},BulkEmailSearchFilterSearchValue:{value:""},BulkEmailSearchFilterSearchFilteredColumn:{value:""},BulkEmailSearchFilter_BulkEmailList:{value:{}},EventSearchFilterSearchValue:{value:""},EventSearchFilterSearchFilteredColumn:{value:""},EventSearchFilter_EventList:{value:{}},GridDetailSearchFilter_842fhbwSearchValue:{value:""},GridDetailSearchFilter_842fhbwSearchFilteredColumn:{value:""},GridDetailSearchFilter_842fhbw_GridDetail_7c5ohiu:{value:{}},CampaignSearchFilterSearchValue:{value:""},CampaignSearchFilterSearchFilteredColumn:{value:""},CampaignSearchFilter_CampaignList:{value:{}},GridDetailSearchFilter_tkug8ymSearchValue:{value:""},GridDetailSearchFilter_tkug8ymSearchFilteredColumn:{value:""},GridDetailSearchFilter_tkug8ym_GridDetail_w2xsm9v:{value:{}},GridDetailSearchFilter_teu5g4kSearchValue:{value:""},GridDetailSearchFilter_teu5g4kSearchFilteredColumn:{value:""},GridDetailSearchFilter_teu5g4k_GridDetail_aea60u7:{value:{}},GridDetailSearchFilter_mi9f80uSearchValue:{value:""},GridDetailSearchFilter_mi9f80uSearchFilteredColumn:{value:""},GridDetailSearchFilter_mi9f80u_GridDetail_mgt5acd:{value:{}},GridDetailSearchFilter_tapmy1uSearchValue:{value:""},GridDetailSearchFilter_tapmy1uSearchFilteredColumn:{value:""},GridDetailSearchFilter_tapmy1u_GridDetail_s74w3ph:{value:{}}}}};Wv.viewModelConfig,Wv.viewModelConfig;var wp=f(89225),W_=f.n(wp);class dn extends ue{constructor(){super(...arguments),this.properties={alias:{name:"_id"}},this.checkOperationNameRequiredParameters=!1}_findItemInfoInSourceObject(e){return this._findItemInfo(e,this.sourceObject)}findInsertItemParent(e,t){return null===e?this.sourceObject:e.item}findInsertItemInfo(e){const t=e.parentName;let i=this._findItemInfoInSourceObject(t);if(i?.item&&e.path)i={item:(0,pe.Z)(i.item,e.path)};else if(e.path){const r=[...e.path];if(i={item:(0,pe.Z)(this.sourceObject,r)},!i.item){const s=r.shift();i=this._findItemInfoInSourceObject(s),i?.item&&r.length&&(i={item:(0,pe.Z)(i.item,r)})}}return i}findMergeOrRemoveItemInfo(e){let t=this._findItemInfoInSourceObject(e.name);if(!t?.item){const i=[...e.path];if(t={item:(0,pe.Z)(this.sourceObject,i,i.length?void 0:this.sourceObject)},!t.item){const r=i.shift();t=this._findItemInfoInSourceObject(r),t?.item&&i.length&&(t={item:(0,pe.Z)(t.item,i)})}}return t}findRemoveParentItemInfo(e,t){let i=this._findItemInfoInSourceObject(e);if(!i){const r=[...t.parentPath];r.pop(),r.pop(),i={item:(0,pe.Z)(this.sourceObject,r)}}return i}_merge(e){const t=this.findMergeOrRemoveItemInfo(e),i=!dn.isEmpty(t);if(i){const s=this._excludeAliasProperties(e.name,e.values).reduce((d,p)=>(d[p]=e.values[p],d),{}),o={arrayMerge:(d,p)=>p},c=wp.all([t.item,s],o);Object.keys(c).forEach(d=>{t.item[d]=c[d]})}return i}iterateChildItems(e,t,i,r=[]){let s=!0;return(0,ne.Z)(e,(o,c)=>{if((0,he.Z)(o)||(0,gt.Z)(o)){const d=(0,he.Z)(o),p=d?o:[o];r.push(c),(0,ne.Z)(p,(g,C)=>{d&&r.push(C);const v=!1!==this.iterateChildItems(g,t,i,[...r]),T={item:g,propertyName:c,childIterationResult:v,parentPath:[...r],parent:e};return s=!1!==t.call(i,T)&&v,d&&s&&r.pop(),s}),s&&r.pop()}return s}),s}}dn.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(dn)))(t||dn)}}(),dn.\u0275prov=n.\u0275\u0275defineInjectable({token:dn,factory:dn.\u0275fac});const Y_=a=>null!=a&&"object"==typeof a,Q_=a=>Y_(a)&&(a=>0===Object.keys(a).length)(a),J_=a=>a instanceof Date;class Mr{deepObjectDiff(e,t){if(e===t)return{};if(Array.isArray(t))return JSON.stringify(e)===JSON.stringify(t)?{}:t;if(!Y_(e)||!Y_(t))return t;if(J_(e)||J_(t))return e?.valueOf()===t?.valueOf()?{}:t;const i=Object.fromEntries(Object.entries(t).filter(([,r])=>void 0===r));return Object.keys(t).reduce((r,s)=>{if(!((a,...e)=>Object.prototype.hasOwnProperty.call(a,...e))(e,s))return r[s]=t[s],r;const o=e[s],c=t[s],d=this.deepObjectDiff(o,c);return Q_(d)&&!J_(d)&&(Q_(o)||!Q_(c))||(r[s]=d),r},i)}}Mr.\u0275fac=function(e){return new(e||Mr)},Mr.\u0275prov=n.\u0275\u0275defineInjectable({token:Mr,factory:Mr.\u0275fac,providedIn:"root"});var Q2=f(57791);class ml{constructor(){this._requireJsService=(0,n.inject)(Ua),this._destroy$=new u.Subject}_replaceDeprecatedSchemaProperties(e){return"diff"in e?{...(0,At.Z)(e,"diff"),viewConfigDiff:e.diff}:e}loadAmdSchemaList(e,t=!1){return new u.Observable(i=>{const r=[];this._requireJsService.allowToCacheCalls=t,this._requireJsService.load([e],s=>{s||(console.error(`${e} is undefined. Make sure that you defined ${e} AMD module in ${e} file. Empty schema will be used instead.`),s={});const o=this._replaceDeprecatedSchemaProperties(s);this._requireJsService.load([`${e}Structure`,`${e}Resources`],(c,d)=>{r.push({name:e,schema:o,structure:c,resources:d}),c?.parentSchemaName?this.loadAmdSchemaList(c.parentSchemaName,t).pipe((0,u.takeUntil)(this._destroy$)).subscribe(p=>{r.push(p),i.next((0,Q2.Z)(r)),i.complete()}):(i.next(r),i.complete())})})})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}ml.\u0275fac=function(e){return new(e||ml)},ml.\u0275prov=n.\u0275\u0275defineInjectable({token:ml,factory:ml.\u0275fac,providedIn:"root"});class J2 extends jE{getByName(e,t=this.root){let i=null;return this.traverseDepthFirstSearch(s=>{s.data.schemaName===e&&(i=s)},t),i}removeByName(e,t=this.root){let i=null;if(this.traverseDepthFirstSearch(s=>{s.data.schemaName===e&&(i=s)},t),i){const s=i.parent;i.children=[];const o=s.children.findIndex(c=>c===i);return s.children.splice(o,1),!0}return!1}containsByName(e,t=this.root){let i=null;return this.traverseDepthFirstSearch(s=>{s.data.schemaName===e&&(i=s)},t),Boolean(i)}}class K_{static bulkAdd(e,t){const i=t;for(const r of e)if(!i.containsByName(r.schemaName)){const s=i.get(r.parentSchemaUId);i.add({data:r,id:r.schemaUId},s)}return i}static initTree(e){return new J2(e,e.schemaUId)}}class hl{constructor(){this._trees=[]}_filterExtendingSchemas(e){const t=[];for(let i=0;i<e.length;i++)if(e.find(r=>r.parentSchemaName===e[i].schemaName&&r.extendParent)){const r=e[i];do{i++}while(e.find(s=>s.parentSchemaName===e[i].schemaName&&s.extendParent));t.push({...e[i],parentSchemaName:r.parentSchemaName,parentSchemaUId:r.parentSchemaUId,schemaUId:r.schemaUId})}else t.push(e[i]);return t}add(...e){const t=this._filterExtendingSchemas([...e].map(s=>s.structure)),i=t.shift();let r=this._trees.find(s=>s.root.id===i.schemaUId);r?K_.bulkAdd(t,r):(r=K_.initTree(i),K_.bulkAdd(t,r),this._trees.push(r))}setCacheSnapshot(e){const{schemaName:t,hook:i,snapshot:r}=e;let s=0;for(;s<this._trees.length;){const o=this._trees[s].getByName(t);if(o)return void(o.data={...o.data,snapshots:{...o.data.snapshots,[i]:r}});s++}}setDataSchemaDepsToCache(e,t){let i=0;for(;i<this._trees.length;){const r=this._trees[i].getByName(e);if(r)return void(r.data={...r.data,dataSchemaDeps:t});i++}}isCached(e){return this._trees.some(t=>t.containsByName(e))}getSchemaSnapshots(e){let t=0;for(;t<this._trees.length;){const i=this._trees[t].getByName(e);if(i)return i.data.snapshots;t++}return null}invalidateClientUnitSchema(e){let t=0;for(;t<this._trees.length;){if(this._trees[t].root.data.schemaName===e)return void this._trees.splice(t,1);if(this._trees[t].removeByName(e))return;t++}}invalidateByDataSchemaName(e){let t=0;const i=r=>{Boolean(r.data?.dataSchemaDeps)&&r.data?.dataSchemaDeps.includes(e)&&(r.data.snapshots={[Th.METADATA_INIT]:r.data.snapshots[Th.METADATA_INIT]})};for(;t<this._trees.length;)this._trees[t].traverseDepthFirstSearch(i),t++}}hl.\u0275fac=function(e){return new(e||hl)},hl.\u0275prov=n.\u0275\u0275defineInjectable({token:hl,factory:hl.\u0275fac,providedIn:"platform"});class wr{constructor(){this._requireJsService=(0,n.inject)(Ua),this._schemaChangeListenerService=(0,n.inject)(tn),this._destroy$=new u.Subject}init(){this._schemaChangeListenerService.schemaChanged$.pipe((0,P.h)(()=>this._requireJsService.allowToCacheCalls)).pipe((0,u.takeUntil)(this._destroy$)).subscribe(({name:e})=>{[e,`${e}Structure`,`${e}Resources`].forEach(t=>this._requireJsService.deleteCachedModule(t))})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}wr.\u0275fac=function(e){return new(e||wr)},wr.\u0275prov=n.\u0275\u0275defineInjectable({token:wr,factory:wr.\u0275fac,providedIn:"root"});class pg{}var X_=f(88960);const K2=[{schema:{viewModelConfig:{viewModelName:"Profile View model"}}}],X2=[{schema:{viewModelConfig:{viewModelName:"AMD View model"}}}];class gl extends pg{load(e){return(0,u.of)(X2).pipe((0,X_.g)(150))}}gl.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(gl)))(t||gl)}}(),gl.\u0275prov=n.\u0275\u0275defineInjectable({token:gl,factory:gl.\u0275fac});class Oi extends pg{constructor(e,t,i,r){super(),this.zone=e,this._schemaCacheService=t,this._featureService=i,this._measurePerformanceService=r,this._schemaCacheInvalidatorService=(0,n.inject)(wr),this._amdSchemaLoaderHelperService=(0,n.inject)(ml),window.Terrasoft||(window.Terrasoft={configuration:{Structures:{}},SchemaType:{}},window.define("terrasoft",[],()=>window.Terrasoft)),this._schemaCacheInvalidatorService.init()}_loadAmdSchemaParts(e){return this._featureService.getFeatureState("AllowCachingRequireJS").pipe((0,M.w)(t=>this._amdSchemaLoaderHelperService.loadAmdSchemaList(e,t).pipe(this._measurePerformanceService.measure$(`AMDSchemaLoader.loadAmdSchemaList.${e}`))))}load(e){return this.zone.runOutsideAngular(()=>(0,u.forkJoin)([this._loadAmdSchemaParts(e),this._featureService.getFeatureState("DisableRuntimeSchemaCaching")]).pipe((0,u.tap)(([t,i])=>{if(!i){const s=[...(0,q.Z)(t)].reverse();this._schemaCacheService.add(...s)}}),(0,M.w)(([t])=>new u.Observable(i=>this.zone.run(()=>{i.next(t),i.complete()})))))}}Oi.\u0275fac=function(e){return new(e||Oi)(n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(hl),n.\u0275\u0275inject(Me),n.\u0275\u0275inject(le))},Oi.\u0275prov=n.\u0275\u0275defineInjectable({token:Oi,factory:Oi.\u0275fac});var eP=f(49510);class xp{}class fl extends xp{constructor(e){super(),this._userSchemaProfileService=e,this._baseKey="Schema__"}getProfileKey(e){return this._baseKey+e}get(e){const t=this.getProfileKey(e);return this._userSchemaProfileService.getProfile(t).pipe((0,h.U)(i=>(0,O.Z)(i)?[]:i))}set(e,t){const i=this.getProfileKey(e);let r={name:t.name,schema:t.schema,localizableImages:t.localizableImages??{},localizableStrings:t.localizableStrings??{}};return r=this._schemaIsEmpty(r)?null:r,this._userSchemaProfileService.saveProfile(i,r,t.name).pipe((0,h.U)(()=>t))}_schemaIsEmpty(e){const t=(0,O.Z)(e.localizableStrings)&&(0,O.Z)(e.localizableImages),i=Object.entries(e.schema).every(([,r])=>(0,O.Z)(r));return t&&i}}fl.\u0275fac=function(e){return new(e||fl)(n.\u0275\u0275inject(Dr))},fl.\u0275prov=n.\u0275\u0275defineInjectable({token:fl,factory:fl.\u0275fac});class xr extends pg{constructor(e,t,i){super(),this._profileSchemaProvider=e,this._userInfo=t,this._measurePerformanceService=i}_getResourcesByCurrentCulture(e){const t=this._userInfo.cultureInfo.sysCultureName,i=Object.keys(e??{}).map(r=>{const s=e[r]??{};return[r,s[t]||Object.values(s).shift()]}).filter(([,r])=>void 0!==r);return Object.fromEntries(i)}load(e){return this._profileSchemaProvider.get(e).pipe(this._measurePerformanceService.measure$(`ProfileSchemaLoader.load.${e}`),(0,h.U)(t=>(0,O.Z)(t)?[]:(0,eP.Z)(t,"name").map(i=>({...i,name:i.name??"",structure:{},resources:{localizableImages:this._getResourcesByCurrentCulture(i.localizableImages),localizableStrings:this._getResourcesByCurrentCulture(i.localizableStrings)}}))))}}xr.\u0275fac=function(e){return new(e||xr)(n.\u0275\u0275inject(xp),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(le))},xr.\u0275prov=n.\u0275\u0275defineInjectable({token:xr,factory:xr.\u0275fac});class _l extends pg{load(e){return(0,u.of)(K2)}}_l.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(_l)))(t||_l)}}(),_l.\u0275prov=n.\u0275\u0275defineInjectable({token:_l,factory:_l.\u0275fac});const tP={name:"",schema:{viewConfigDiff:[],viewModelConfig:{},viewModelConfigDiff:[],modelConfig:{}},structure:{},resources:{localizableImages:{},localizableStrings:{}}};class ji{constructor(){this.deepMergeOptions={arrayMerge:this.overwriteArrayMerge},this.jsonPathApplierService=(0,n.inject)(dn)}overwriteArrayMerge(e,t,i){return t}getViewModelConfig(e){return e.reduce((t,i)=>i.viewModelConfigDiff?.length?this.jsonPathApplierService.apply(t,i.viewModelConfigDiff)||{}:(0,wp.all)([t,i.viewModelConfig||{}],{...this.deepMergeOptions})||{},{})}getModelConfig(e){return e.reduce((t,i)=>i.modelConfigDiff?.length?this.jsonPathApplierService.apply(t,i.modelConfigDiff)||{}:(0,wp.all)([t,i.modelConfig||{}],{...this.deepMergeOptions})||{},{})}getEmptySchemaPart(){return{...tP,schema:{viewConfigDiff:[],viewModelConfig:{},viewModelConfigDiff:[],modelConfig:{dataSources:{PageParameters:{type:Rh,config:{}}}}}}}}ji.\u0275fac=function(e){return new(e||ji)},ji.\u0275dir=n.\u0275\u0275defineDirective({type:ji});const nP={tag:"test",viewModelConfig:{attributes:{FirstName:{},Account:{viewModelName:"account"},LastName:{}}},viewConfig:[{name:"Main",type:"crt.FlexContainer",classes:["container"],items:[{name:"ChangeLanguage",type:"crt.Button",caption:"$Resources.Strings.ChangeLanguage",clicked:"$onChangeLanguage"},{id:"Button1",name:"Button",type:"crt.Button",caption:"$FirstName",clicked:"$buttonClick"},{id:"Button2",name:"Button2",type:"crt.Button",caption:"$FirstName"},{name:"Input",type:"crt.DeprecatedInput",caption:"$Resources.Strings.FirstName",value:"$FirstName",enterKeyDown:"$enterKeyDown"},{name:"ViewModelConfigJSONInput",type:"crt.DeprecatedInput",value:"$FirstName"},{name:"resourcesJSONInput",type:"crt.DeprecatedInput",value:"$Account.Name"},{name:"Input4",type:"crt.DeprecatedInput",value:"This is const value"},{name:"Button3",type:"crt.Button",caption:"$Account.Name"},{name:"Button5",type:"crt.Button",caption:"$Account.Employee.Name"},{name:"List2",type:"crt.ComponentList",models:"$Account.Ships",itemViewConfig:{name:"Label",type:"crt.Label",label:"$Account.Ships.Id"}},{name:"List2",type:"crt.ComponentList",models:"$Account.Ships",itemViewConfig:{name:"Input",type:"crt.DeprecatedInput",value:"$Account.Ships.Id"}},{name:"List2",type:"crt.ComponentList",models:"$Account.Ships",itemViewConfig:{type:"crt.FlexContainer",name:"container",items:[{name:"Label",type:"crt.Label",label:"$Resources.Strings.ModelName"},{name:"Label",type:"crt.Label",label:"$Account.Ships.Id"},{name:"Input",type:"crt.DeprecatedInput",value:"$Account.Ships.Id"}]}}]}],resources:{strings:{ChangeLanguage:{"ru-Ru":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u044f\u0437\u044b\u043a","en-US":"Change language"},FirstName:{"ru-Ru":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","en-US":"Name"},ModelName:{"ru-Ru":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438:","en-US":"Model name:"}}},modelConfig:{dataSources:{}},handlers:[{request:"crt.HandleViewModelInitRequest",handler:a=>new Promise(e=>{a.$context.LastName="Mask",e(5)}),source:{schemaName:"Test",packageName:"Custom"}}],converters:{"crt.Test":a=>"[converted] "+a},validators:{"crt.ShouldEqual":{type:"crt.ShouldEqual",validator:a=>e=>e.value===a.value?null:{ShouldEqual:{message:"ShouldEqual Error"}},params:[{name:"value"}],async:!1}},styles:["test css"]};class yl extends ji{build(e){return(0,u.of)(nP)}}yl.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(yl)))(t||yl)}}(),yl.\u0275prov=n.\u0275\u0275defineInjectable({token:yl,factory:yl.\u0275fac});class $n extends ji{constructor(e,t,i){super(),this.jsonApplierService=e,this.userInfo=t,this._featureService=i,this._canUseClientUnitSchemaRequestHandlers=new u.ReplaySubject(1),this._canUseClientUnitSchemaConverters=new u.ReplaySubject(1),this._canUseClientUnitSchemaValidators=new u.ReplaySubject(1),(0,u.lastValueFrom)(this._featureService.getFeaturesState(["DisableClientUnitSchemaRequestHandlers","DisableClientUnitSchemaConverters","DisableClientUnitSchemaValidators"]),{defaultValue:null}).then(([r,s,o])=>{this._canUseClientUnitSchemaRequestHandlers.next(!r),this._canUseClientUnitSchemaConverters.next(!s),this._canUseClientUnitSchemaValidators.next(!o)})}_mergeResources(e){const t={strings:{}},i=this.userInfo.cultureInfo.sysCultureName;for(const{localizableStrings:r}of e)Object.entries(r).forEach(([s,o])=>{t.strings[s]=t.strings[s]||{},t.strings[s][i]=o});return(0,u.of)(t)}_getParameterResources(e){let t={};for(const{parametersLocalizableStrings:i}of e)i&&(t=Object.assign(t,i));return t}_mergeParameters(e,t){let i={};for(const r of e)i={...i,...r};return Object.keys(i).forEach(r=>{i[r].caption=t[r]}),(0,u.of)(i)}_getHandlers(e){return this._canUseClientUnitSchemaRequestHandlers.pipe((0,we.P)(),(0,h.U)(t=>t?e.flatMap(i=>i.schema.handlers?.map(r=>({...r,source:{schemaName:i.name,packageName:i.structure.packageName}}))).filter(Boolean):[]))}_getConverters(e){return this._canUseClientUnitSchemaConverters.pipe((0,we.P)(),(0,h.U)(t=>t?e.reduce((i,r)=>({...i,...r.schema.converters||{}}),{}):{}))}_getValidators(e){return this._canUseClientUnitSchemaValidators.pipe((0,we.P)(),(0,h.U)(t=>t?e.reduce((i,r)=>{if(r.schema?.validators){const s=Object.entries(r.schema?.validators).map(([o,c])=>({[o]:{...c,type:o}})).reduce((o,c)=>({...o,...c}),{});return{...i,...s}}return{...i}},{}):{}))}_getStructureValue(e,t){let i="";return e.forEach(r=>{const s=t(r?.structure);s&&(i=s)}),i}getSchemaNames(e){return this._getStructureValue(e,t=>t.schemaName)}build(e){const t=[this.getEmptySchemaPart(),...e],i=this._getHandlers(t),r=this._getConverters(t),s=this._mergeResources(t.map(j=>j.resources)),o=this._getParameterResources(t.map(j=>j.resources)),c=this._mergeParameters(t.map(j=>j.structure?.parameters),o),d=this._getValidators(t),p=t.map(j=>j.name),g=this.getSchemaNames(t),C=t.map(j=>j.schema),v=this.getViewModelConfig(C),T=this.getModelConfig(C);return(0,u.forkJoin)([i,r,s,c,d]).pipe((0,h.U)(([j,Y,oe,Xt,Ue])=>({viewConfig:this.jsonApplierService.applyDiff([],t.map(kS=>kS.schema.viewConfigDiff||[])),viewModelConfig:v,modelConfig:T,styles:(0,wp.all)(t.map(kS=>kS.schema.styles||[])),handlers:j,converters:Y,resources:oe,validators:Ue,parameters:Xt,tag:p.join("."),name:g})))}}$n.\u0275fac=function(e){return new(e||$n)(n.\u0275\u0275inject(ue),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(Me))},$n.\u0275prov=n.\u0275\u0275defineInjectable({token:$n,factory:$n.\u0275fac});class Er extends $n{constructor(e,t,i,r){super(e,t,i),this._schemaChangeListenerService=r,this._bundles=new Map,this._destroyed$=new u.Subject,this._schemaChangeListenerService.schemaChanged$.pipe((0,L.R)(this._destroyed$)).subscribe(s=>{s.schemaType===Aa.ClientUnitSchema&&Array.from(this._bundles.entries()).filter(([,{schemaName:o}])=>s.name===o).forEach(([o])=>this._bundles.delete(o))})}build(e,t){const i=this.getSchemaNames(e),r=t?.tryGetFromCache??!0,s=e.map(p=>p.name).join("."),o=r&&this._bundles.has(s);let c=null,d=!1;if(o&&(c=this._bundles.get(s),d=e.length===c.parts.length&&(0,J.Z)(e,c.parts)),o&&d){const p=c.bundle;return(0,u.of)(p)}return super.build(e).pipe((0,I.b)(g=>{this._bundles.set(s,{bundle:g,schemaName:i,parts:e})}))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Er.\u0275fac=function(e){return new(e||Er)(n.\u0275\u0275inject(ue),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(Me),n.\u0275\u0275inject(tn))},Er.\u0275prov=n.\u0275\u0275defineInjectable({token:Er,factory:Er.\u0275fac});class Tr{constructor(e,t,i){this._jsonDifferService=e,this._jsonObjectDifferService=t,this._jsonPathDifferService=i,this._featureValues=(0,n.inject)(te)}_getJsonPathDiff(e,t){return this._jsonPathDifferService.getJsonDiff(e,t,{identifyItemByPath:!0})}getDiff(e,t){const i=e??{viewConfig:{},viewModelConfig:{},modelConfig:{},localizableStrings:{},localizableImages:{}},r=t??{viewConfig:{},viewModelConfig:{},modelConfig:{},localizableStrings:{},localizableImages:{}},o={schema:{viewConfigDiff:this._jsonDifferService.getJsonDiff(i.viewConfig,r.viewConfig,{identifyItemByPath:!0})}};this._setModelConfigDiff(o,i,r),this._setViewModelConfigDiff(o,i,r);const c=this._jsonObjectDifferService.deepObjectDiff(i.localizableStrings,r.localizableStrings);(0,O.Z)(c)||(o.localizableStrings=c);const d=this._jsonObjectDifferService.deepObjectDiff(i.localizableImages,r.localizableImages);return(0,O.Z)(d)||(o.localizableImages=d),o}_setViewModelConfigDiff(e,t,i){this._featureValues?.EnableViewModelConfigDiff?e.schema.viewModelConfigDiff=this._getJsonPathDiff(t.viewModelConfig,i.viewModelConfig):e.schema.viewModelConfig=this._jsonObjectDifferService.deepObjectDiff(t.viewModelConfig,i.viewModelConfig)}_setModelConfigDiff(e,t,i){this._featureValues?.EnableModelConfigDiff?e.schema.modelConfigDiff=this._getJsonPathDiff(t.modelConfig,i.modelConfig):e.schema.modelConfig=this._jsonObjectDifferService.deepObjectDiff(t.modelConfig,i.modelConfig)}}Tr.\u0275fac=function(e){return new(e||Tr)(n.\u0275\u0275inject(Fi),n.\u0275\u0275inject(Mr),n.\u0275\u0275inject(Li))},Tr.\u0275prov=n.\u0275\u0275defineInjectable({token:Tr,factory:Tr.\u0275fac});class Bi{resolveModelConfig(e){return null}}Bi.\u0275fac=function(e){return new(e||Bi)},Bi.\u0275prov=n.\u0275\u0275defineInjectable({token:Bi,factory:Bi.\u0275fac,providedIn:"root"});class Cl{constructor(){this.account={attributes:{Name:{},Ships:{isCollection:!0,viewModelConfig:"ship"},Employee:{viewModelConfig:"employee"}}},this.ship={attributes:{Id:{}}},this.employee={attributes:{Name:{},Age:{}}}}resolveModelConfig(e){return(0,u.of)(this[e]).pipe((0,X_.g)(50))}}var Yv,nt,Qv,Jv,ey,Wn,Kv,Ie;Cl.\u0275fac=function(e){return new(e||Cl)},Cl.\u0275prov=n.\u0275\u0275defineInjectable({token:Cl,factory:Cl.\u0275fac,providedIn:"root"}),function(a){a[a.None=0]="None",a[a.Count=1]="Count",a[a.Sum=2]="Sum",a[a.Avg=3]="Avg",a[a.Min=4]="Min",a[a.Max=5]="Max",a[a.TopOne=6]="TopOne"}(Yv||(Yv={})),function(a){a.Create="create",a.Update="update",a.Delete="delete"}(nt||(nt={})),function(a){a.Begin="begin",a.End="end"}(Qv||(Qv={})),function(a){a.AllSections="BaseGridSectionTemplate",a.AllCards="BasePageTemplate",a.AllMiniCards="BaseMiniPageTemplate",a.AllLookupSelectionWindows="BaseLookupPageTemplate"}(Jv||(Jv={})),function(a){a.Paused="Paused",a.Active="Active"}(ey||(ey={})),function(a){a.DebouncingBusinessRules="DebouncingBusinessRules",a.RunningBusinessRules="RunningBusinessRules",a.ProcessingAttributeChangeRequest="ProcessingAttributeChangeRequest",a.AttributeLoading="AttributeLoading"}(Wn||(Wn={})),function(a){a.ForTheSelectedPage="ForTheSelectedPage",a.RegardlessOfThePage="RegardlessOfThePage",a.ForTheSelectedRecords="ForTheSelectedRecords"}(Kv||(Kv={})),function(a){a.ChangeAttributeValue="change-attribute-value",a.ModelDataLoaded="model-data-loaded-event",a.BeforeModelLoad="before-model-load",a.LoadDefaultValues="load-default-values",a.StartLoadModelAttributes="start-load-model-attributes",a.FinishLoadModelAttributes="finish-load-model-attributes",a.ViewEvent="view-event"}(Ie||(Ie={}));class Ui extends l.BaseRequest{}let Xv=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleAfterModelDeleteRequest"}};Xv=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleAfterModelDeleteRequest"})],Xv);let e0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleAfterModelInsertRequest"}};e0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleAfterModelInsertRequest"})],e0);let t0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleAfterModelLoadRequest"}};t0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleAfterModelLoadRequest"})],t0);let n0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleAfterModelUpdateRequest"}};n0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleAfterModelUpdateRequest"})],n0);let i0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleBeforeModelDeleteRequest"}};i0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleBeforeModelDeleteRequest"})],i0);let a0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleBeforeModelInsertRequest"}};a0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleBeforeModelInsertRequest"})],a0);let r0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleBeforeModelLoadRequest"}};r0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleBeforeModelLoadRequest"})],r0);let s0=class extends Ui{constructor(){super(...arguments),this.type="crt.HandleBeforeModelUpdateRequest"}};s0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleBeforeModelUpdateRequest"})],s0);let o0=class extends l.BaseRequest{};o0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.AddCommunicationOptionsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.Add\u0421ommunicationOptionsRequest",propertiesPanelComponentTypeName:"crt.AddCommunicationOptionsRequestPropertiesPanel",position:740})],o0);class l0 extends l.BaseRequest{}let c0=class extends l0{};c0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.AddTagsInRecordRequest"})],c0);class u0 extends l.BaseRequest{}class d0 extends u0{}let p0=class extends d0{};p0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.AddTagsInRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.AddTagsInRecordsRequest",propertiesPanelComponentTypeName:"crt.AddTagsInRecordsRequestPropertiesPanel",position:703,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],p0);class m0 extends u0{}let h0=class extends m0{};h0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.AddRecordsInStaticFoldersRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.AddRecordsInStaticFoldersRequest",propertiesPanelComponentTypeName:"crt.AddRecordsInStaticFoldersRequestPropertiesPanel",position:706,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],h0);class g0 extends l.BaseRequest{}let f0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelCollectionPrimaryDataChangesRequest"}};f0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CancelCollectionPrimaryDataChangesRequest"})],f0);let _0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelPrimaryDataChangesRequest"}};_0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CancelPrimaryDataChangesRequest"})],_0);let y0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelRecordChangesRequest"}};y0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CancelRecordChangesRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CancelRecordChangesRequest",position:500})],y0);let C0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelRecordsChangesRequest"}};C0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CancelRecordsChangesRequest"})],C0);let S0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.ClosePageRequest"}};S0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ClosePageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ClosePageRequest",position:600})],S0);let b0=class extends l.BaseRequest{};b0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ContinueInOtherPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ContinueInOtherPageRequest",position:1e3})],b0);let v0=class extends l.BaseRequest{};v0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CreateRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CreateRecordRequest",propertiesPanelComponentTypeName:"crt.CreateRecordRequestPropertiesPanel",position:200})],v0);let I0=class extends l.BaseRequest{};I0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteClientUnitSchemaRequest"})],I0);let ty=class extends l.BaseRequest{};ty=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteRecordRequest"})],ty);let D0=class extends ty{};D0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteOldTagRecordRequest"})],D0);let M0=class extends l.BaseRequest{};M0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.DeleteRecordsRequest",propertiesPanelComponentTypeName:"crt.DeleteRecordsRequestPropertiesPanel",position:701,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],M0);let w0=class extends l0{};w0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteTagInRecordRequest"})],w0);let x0=class extends l.BaseRequest{};x0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DetailChangedRequest"})],x0);let E0=class extends l.BaseRequest{};E0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.EmailLinkClickRequest"})],E0);let T0=class extends l.BaseRequest{};T0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ExportChartDataGridToExcelRequest"})],T0);let P0=class extends l.BaseRequest{};P0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ExportDataGridToExcelRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ExportDataGridToExcelRequest",propertiesPanelComponentTypeName:"crt.ExportDataGridToExcelRequestPropertiesPanel",position:800,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],P0);class Gi extends l.BaseRequest{}class A0 extends Gi{}let ny=class extends A0{};ny=(0,m.gn)([(0,l.CrtRequest)({type:"crt.AddFolderDataRequest"})],ny);let R0=class extends A0{};R0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CopyFolderDataRequest"})],R0);let k0=class extends Gi{};k0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteFolderDataRequest"})],k0);let N0=class extends Gi{};N0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.FolderTreeActiveFolderChangedRequest"})],N0);let V0=class extends Gi{};V0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.FolderTreeVisibleRequest"})],V0);let F0=class extends Gi{};F0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.FolderTreeRenameRequest"})],F0);let L0=class extends Gi{};L0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ToggleFolderFavoriteRequest"})],L0);let O0=class extends Gi{};O0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.FolderTreeUpdateFiltersRequest"})],O0);let j0=class extends Gi{};j0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.FolderTreeExpandedItemsRequest"})],j0);let B0=class extends ny{};B0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ConvertToStaticFolderRequest"})],B0);let U0=class extends l.BaseRequest{constructor(e,t){super(),this.event=e,this.$context=t,this.type="crt.HandleKeyboardHotkeysRequest"}};U0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleKeyboardHotkeysRequest"}),(0,m.w6)("design:paramtypes",[KeyboardEvent,Object])],U0);let G0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleModelEventRequest"}};G0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleModelEventRequest"})],G0);let iy=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelDestroyRequest"}};iy=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleViewModelDestroyRequest"})],iy);let ay=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelInitRequest"}};ay=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleViewModelInitRequest"})],ay);let ry=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelPauseRequest"}};ry=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleViewModelPauseRequest"})],ry);let sy=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelResumeRequest"}};sy=(0,m.gn)([(0,l.CrtRequest)({type:"crt.HandleViewModelResumeRequest"})],sy);let z0=class extends l.BaseRequest{};z0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ImportDataRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ImportDataRequest",propertiesPanelComponentTypeName:"crt.ImportDataRequestPropertiesPanel",position:750})],z0);let H0=class extends l.DataRequest{};H0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.LoadDataRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.LoadDataRequest",propertiesPanelComponentTypeName:"crt.LoadDataRequestPropertiesPanel",position:500})],H0);let Z0=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.NotificationRequest",this.translate=!1}};Z0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.NotificationRequest"})],Z0);let q0=class extends l.BaseRequest{};q0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.OpenDuplicatesPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenDuplicatesPageRequest",propertiesPanelComponentTypeName:"crt.OpenDuplicatesPageRequestPropertiesPanel",position:360})],q0);let $0=class extends l.BaseRequest{};$0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.OpenOldTagMiniPageRequest"})],$0);let W0=class extends l.BaseRequest{};W0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.OpenPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenPageRequest",propertiesPanelComponentTypeName:"crt.OpenPageRequestPropertiesPanel",position:350})],W0);let Y0=class extends l.BaseRequest{};Y0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.OpenPositionedPageRequest"})],Y0);let Q0=class extends l.BaseRequest{};Q0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.PhoneLinkClickRequest"})],Q0);let J0=class extends l.BaseRequest{};J0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.QuickFilterRequest"})],J0);let K0=class extends d0{};K0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.RemoveTagsInRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RemoveTagsInRecordsRequest",propertiesPanelComponentTypeName:"crt.RemoveTagsInRecordsRequestPropertiesPanel",position:704,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],K0);let X0=class extends m0{};X0=(0,m.gn)([(0,l.CrtRequest)({type:"crt.RemoveRecordsInStaticFoldersRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RemoveRecordsInStaticFoldersRequest",propertiesPanelComponentTypeName:"crt.RemoveRecordsInStaticFoldersRequestPropertiesPanel",position:705,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],X0);let e1=class extends l.BaseRequest{};e1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.RunBusinessProcessRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RunBusinessProcessRequest",propertiesPanelComponentTypeName:"crt.RunBusinessProcessRequestPropertiesPanel",position:700,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],e1);let t1=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.SaveCollectionPrimaryDataRequest"}};t1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SaveCollectionPrimaryDataRequest"})],t1);let n1=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.SavePrimaryDataRequest"}};n1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SavePrimaryDataRequest"})],n1);let i1=class extends l.BaseRequest{};i1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SaveRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SaveRecordRequest",position:400})],i1);let a1=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.SaveRecordsRequest"}};a1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SaveRecordsRequest"})],a1);let r1=class extends g0{};r1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SearchFilterColumnsGroupsRequest"})],r1);let s1=class extends g0{};s1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SearchFilterRequest"})],s1);let o1=class extends l.BaseRequest{constructor(){super(...arguments),this.multiple=!0,this.displayErrors=!1}};o1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SelectFileRequest"})],o1);let l1=class extends l.BaseRequest{};l1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SelectLookupPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SelectLookupPageRequest",propertiesPanelComponentTypeName:"crt.SelectLookupPageRequestPropertiesPanel",scopes:["BaseLookupPageTemplate"],position:2e3})],l1);let c1=class extends l.BaseRequest{};c1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SetRecordRightsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SetRecordRightsRequest",propertiesPanelComponentTypeName:"crt.SetRecordRightsRequestPropertiesPanel",position:800})],c1);let u1=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.SetTopRecordRequest"}};u1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SetTopRecordRequest"})],u1);let d1=class extends l.BaseRequest{};d1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ShowRelationshipsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ShowRelationshipsRequest",propertiesPanelComponentTypeName:"crt.ShowRelationshipsRequestPropertiesPanel",position:900})],d1);let p1=class extends l.BaseRequest{};p1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.UpdateRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.UpdateRecordRequest",propertiesPanelComponentTypeName:"crt.UpdateRecordRequestPropertiesPanel",position:300})],p1);let m1=class extends l.BaseRequest{};m1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.UploadFileRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.UploadFileRequest",propertiesPanelComponentTypeName:"crt.UploadFileRequestPropertiesPanel",position:702})],m1);let h1=class extends l.BaseRequest{constructor(){super(...arguments),this.awaitResponse=!1}};h1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.UploadImageRequest"})],h1);let g1=class extends l.BaseRequest{};g1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.PrintablesRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.PrintablesRequest",propertiesPanelComponentTypeName:"crt.PrintablesRequestPropertiesPanel",position:3e3,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],g1);let f1=class extends l.BaseRequest{};var _1;f1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.MoveSelectedItemsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.MoveSelectedItemsRequest",propertiesPanelComponentTypeName:"crt.MoveSelectedItemsRequestPropertiesPanel",position:1e3,compatibleAPIs:{[l.PlatformAPIs.Selection]:!0}})],f1),function(a){a.Root="root",a.Item="item",a.Const="const"}(_1||(_1={}));class y1{}class Pr extends y1{_getAttributeChanges(e,t){const i=t.events$.pipe((0,P.h)(r=>r.type===Ie.ChangeAttributeValue),(0,P.h)(r=>r.payload.attributeName===e),(0,M.w)(()=>t[e]));return e in t?(0,u.merge)((0,u.from)(t[e]),i):i}getChanges(e,t,i){const r=e.map(s=>new u.Observable(o=>this._getAttributeChanges(s,i).subscribe(o)));return(0,u.combineLatest)(r)}}Pr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Pr)))(t||Pr)}}(),Pr.\u0275prov=n.\u0275\u0275defineInjectable({token:Pr,factory:Pr.\u0275fac,providedIn:"root"});const C1=new n.InjectionToken("Represents a factory of calculated attribute source changes providers");class Sl{}Sl.\u0275fac=function(e){return new(e||Sl)},Sl.\u0275prov=n.\u0275\u0275defineInjectable({token:Sl,factory:Sl.\u0275fac});const oy=new n.InjectionToken("A factory of expression interpreter");class bl extends y1{constructor(e){super(),this._expressionInterpreterFactory=e,this._converterExpressionInterpreter=this._expressionInterpreterFactory?.create("converter")}_observeRequest(e,t){const i=new u.ReplaySubject(1),r=l.HandlerChainService.instance.subscribe(s=>{s.type===e&&i.next(s)},t);return t._subscriptions.add(r),i}_accumulateRequests(e,t,i){const r=new u.BehaviorSubject([]),s=this._accumulateRequestsCombinations(e,r,t,i).subscribe();return new u.Observable(o=>(r.complete(),s.unsubscribe(),this._findAcceptableRequestsCombination(r.value,t,i).pipe((0,M.w)(c=>c?(0,u.merge)((0,u.of)(c),e):e)).subscribe(o)))}_accumulateRequestsCombinations(e,t,i,r){return e.pipe((0,h.U)(s=>[s,...t.value]),(0,M.w)(s=>s.length<100?(0,u.of)(s):this._findAcceptableRequestsCombination(s,i,r).pipe((0,h.U)(o=>o?[o]:[]))),(0,I.b)(s=>t.next(s)),(0,h.U)(()=>{}))}_findAcceptableRequestsCombination(e,t,i){return e.length?(0,u.from)(e).pipe(OS(r=>this._evaluateFilterConverterExpression(r,t,i)),(0,we.P)(([,r])=>!!r,[null]),(0,h.U)(([r])=>r)):(0,u.of)(null)}_evaluateFilterConverterExpression(e,t,i){const{from:r,filter:s}=t,o={viewModel$:(0,u.of)(i),parent:null};return this._converterExpressionInterpreter.evaluate(s,o).pipe((0,M.w)(c=>{const d=c(Array.isArray(r)?e:e[0]);return d instanceof Promise?d:Promise.resolve(d)}))}getChanges(e,t,i){const r=e.map(c=>this._observeRequest(c,i)),s=(0,u.combineLatest)(r);return t.filter&&this._converterExpressionInterpreter?this._accumulateRequests(s,t,i):s}}bl.\u0275fac=function(e){return new(e||bl)(n.\u0275\u0275inject(oy,8))},bl.\u0275prov=n.\u0275\u0275defineInjectable({token:bl,factory:bl.\u0275fac,providedIn:"root"});const aP=bn.create({token:C1,mappings:[{predicate:a=>a.every(e=>l.RequestRegistryService.requestsRegistrationInfos.has(e)),injectable:bl}],default:{injectable:Pr}});function oP(a){const e=function rP(a){let e=[];return"string"==typeof a&&(e=[a]),Array.isArray(a)&&(e=a),e.map(t=>"string"==typeof t&&t?.trim()).filter(Boolean)}(a.from);return 0===e.length?(console.error(`The format of the 'from' property of calculated attribute is not supported: ${JSON.stringify(a)}.`),null):function sP(a){const e=a.map(r=>l.RequestRegistryService.requestsRegistrationInfos.has(r)),t=e.includes(!0),i=e.includes(!1);return t&&i}(e)?(console.error(`Simultaneous specification of attributes and request in the "from" property of calculated attribute is not supported: ${JSON.stringify(a)}.`),null):e}const lP=a=>!0,cP=a=>a;class Ar{constructor(e,t,i){this._expressionInterpreterFactory=e,this._attributeSourcesChangesProviderFactory=t,this._measurePerformanceService=i,this._converterExpressionInterpreter=this._expressionInterpreterFactory?.create("converter")}_getConverterFn(e,t,i){if(!e||!this._converterExpressionInterpreter)return(0,u.of)(i);const r={viewModel$:(0,u.of)(t),parent:null};return this._converterExpressionInterpreter.evaluate(e,r)}_evaluateConverterExpression(e){const{args:t,expression:i,context:r,defaultEvaluationFn:s}=e;return this._getConverterFn(i,r,s).pipe((0,u.switchMap)(o=>{const c=o(t);return c instanceof Promise?c:Promise.resolve(c)}))}_createCalculateAttributeValueFn(e){const{viewModel:t,attribute:i,attributeConfig:r,generateOptions:s}=e,{from:o,filter:c,converter:d}=r,p=Array.isArray(o);return g=>g.pipe((0,h.U)(C=>p?C:C.shift()),OS(C=>this._evaluateConverterExpression({args:C,expression:c,context:t,defaultEvaluationFn:lP})),(0,P.h)(([,C])=>Boolean(C)),(0,vu.b)(([C])=>this._evaluateConverterExpression({args:C,expression:d,context:t,defaultEvaluationFn:cP})),(0,h.U)(C=>{const v=t.attributes[i];return[(0,q.Z)(C),(0,q.Z)(v)]}),(0,P.h)(([C,v])=>!(0,J.Z)(C,v)),(0,I.b)(([C,v])=>{t.attributes[i]=C,s?.onChangeAttributeValue(i,C,v)}),(0,h.U)(([C])=>C))}_createGetAttributeValueFn(e){const{viewModel:t,attributeName:i,attributeConfig:r,attributeSources:s,calculateAttributeFn:o}=e;let c;const d=this._attributeSourcesChangesProviderFactory.create(s).getChanges(s,r,t);return()=>{const p=i in t.attributes;return c?p?(0,u.of)(t.attributes[i]):c:(c=o(d).pipe((0,_i.d)({bufferSize:1,refCount:!0})),t._subscriptions.add(c.subscribe()),c)}}_defineCalculatedAttribute(e,t,i){Object.defineProperty(i,e,{get:()=>(0,u.firstValueFrom)(t(),{defaultValue:null}),configurable:!0})}defineAttribute(e){this._measurePerformanceService.measure(`CalculatedAttributeCreator.defineAttribute.${e.attribute}`,()=>{const{viewModel:t,attribute:i,attributeConfig:r}=e,s=oP(r);if(null===s)return;const o=this._createCalculateAttributeValueFn(e),c=this._createGetAttributeValueFn({attributeName:i,attributeConfig:r,attributeSources:s,calculateAttributeFn:o,viewModel:t});this._defineCalculatedAttribute(i,c,t)})}}function S1(a){Object.values(a.controls||{}).forEach(e=>{e instanceof b.cw||e instanceof b.Oe?S1(e):e.updateValueAndValidity({onlySelf:!0})})}function ly(a){a?.markAsPristine(),a?.markAsUntouched(),a?.updateValueAndValidity()}function b1(a){return a.statusChanges.pipe((0,ze.O)(a.status),(0,we.P)(()=>"pending"!==a.status.toLowerCase()),(0,h.U)(()=>{}))}function Ep(a,e){return cy.apply(this,arguments)}function cy(){return cy=(0,_.Z)(function*(a,e){const t="string"==typeof e?e.split("."):e;let i=t.shift(),r=a;for(;i;){if(!(i in r))return;r=yield r[i],i=t.shift()}return r}),cy.apply(this,arguments)}Ar.\u0275fac=function(e){return new(e||Ar)(n.\u0275\u0275inject(oy,8),n.\u0275\u0275inject(C1),n.\u0275\u0275inject(le))},Ar.\u0275prov=n.\u0275\u0275defineInjectable({token:Ar,factory:Ar.\u0275fac,providedIn:"root"});function mg(a){for(;a?.parent;)a=a.parent;return a}function v1(a){return a.getDataSource()?.scope===l.DataSourceScope.Page}class Tp{static _getDataSourceColumns(e){const t={};let i=!1;for(const[r,s]of Object.entries(e.dataSourceConfig.config.attributes)){const o=s.path;t[M_(r)]=o,"Id"===o&&(i=!0)}return!i&&!1!==e.includePrimaryAttributes&&(t.Id="Id"),t}static _createAttributesConfigMap(e,t,i,r,s){const o={},c=this.getAttributeDataSourceOldName(e,r);for(const[d]of Object.entries(t)){const p=s.config?.useOriginalAttributesName?`${d}`:`${c}_${d}`,g=s.config.attributes[d],C={path:`${i}.${d}`,type:g?.type,functionConfig:g?.functionConfig,aggregationConfig:g?.aggregationConfig};o[p]={modelConfig:C}}return o}static _createAttributePagingConfig(e){return e.pagingConfig||{rowCount:30}}static _createAttributeSortingConfig(e){return e.sortingConfig||{attributeName:e.attributeName+"Sorting"}}static _createAttributeFiltersConfig(e){return e.filtersConfig?.map(t=>{const i={...t};return delete i.value,i})||[]}static _getDataSourceNameForDynamicModel(e,t){return e.getBoundDataSourceNameByAttributePath(t)||this._getAttributeDataSourceDefaultName(t)}static _getDynamicDataSourceNamePrefix(){return"DYN_"}static _isDynamicDataSourceName(e){return e.startsWith(this._getDynamicDataSourceNamePrefix())}static _getAttributeDataSourceDefaultName(e){return`${e}DS`}static _getLoadData(e,t,i,r){let s;return this._dataCache.has(e)?s=this._dataCache.get(e):(s=t.load(i,[]).pipe((0,ee.B)(),(0,I.b)(()=>this._dataCache.delete(e))),this._dataCache.set(e,s)),(0,u.lastValueFrom)(s.pipe((0,u.map)(()=>r())),{defaultValue:null})}static createAttributeConfig(e,t,i){const r=i.attributeName,s=i.dataSourceConfig,o=this._getDataSourceColumns(i),c=this._createAttributesConfigMap(e,o,t,r,s);return{isCollection:!0,modelConfig:{path:t,pagingConfig:this._createAttributePagingConfig(i),sortingConfig:this._createAttributeSortingConfig(i),filterAttributes:this._createAttributeFiltersConfig(i)},viewModelConfig:{attributes:c}}}static getAttributeDataSourceOldName(e,t){let i=this._getDataSourceNameForDynamicModel(e,t);return(!i||this._isDynamicDataSourceName(i))&&(i=this._getAttributeDataSourceDefaultName(t)),i}static createDynamicDataSourceNameFromAttributeName(e,t){const i=this._getDynamicDataSourceNamePrefix(),r=this._getDataSourceNameForDynamicModel(e,t);return this._isDynamicDataSourceName(r)?r:`${i}${r}`}static defineAsyncAttribute(e,t,i,r,s){const o=i.modelConfig?.path?.split(".")[0],c=e._modelsMap.get(o),d="isLookup"in i&&i.isLookup,p="isCollection"in i&&i.isCollection;Object.defineProperty(e,t,{get:()=>c&&p&&!d&&!c?.isLoaded?this._getLoadData(c,e,o,r):Promise.resolve(r()),set:s,configurable:!0})}}Tp._dataCache=new WeakMap;class zt{static _trimValueIfNeeded(e,t){return t?.trimValue&&!zt.isEmptyInputValue(e)&&Kb(e)?e.trim():e}static isEmptyInputValue(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}static hasValidLength(e){return null!=e&&"number"==typeof e.length}static getControlValueAndTrimIfNeeded(e,t){return zt._trimValueIfNeeded(e.value,t)}}class Ve{static _setImageLookupTypeUrl(e,t){const i=e[t],r=i?.value;r&&(i.url=Xh(r))}static _setBlobTypeUrl(e,t,i){const r=t[i];if(r){const s=t.Id;t[i]={value:r,url:Xh(s,e,i)}}}static _addImageUrl(e,t,i){t.forEach(r=>{switch(r.dataValueType){case l.DataValueType.IMAGELOOKUP:this._setImageLookupTypeUrl(i,r.name);break;case l.DataValueType.Image:this._setBlobTypeUrl(e,i,r.name)}})}static serializeRecordPrimaryAttributesValues(e){return e.map(t=>`${t.name}:${t.value}`).join(";")}static getModelPrimaryAttributeValues(e,t){const i=e.getPrimaryAttributesNames();return t.map(r=>i.map(s=>({name:s,value:r[s]})))}static getOwnColumnsValues(e,t){const i=t??{};if(e.attributes){const r=e.attributes.filter(s=>s.attributeType===l.DataSchemaAttributeType.OwnAttribute).map(s=>s.name).filter(s=>!(0,Dt.Z)(i[s])).map(s=>[s,i[s]]);return Object.fromEntries(r)}return i}static getPrimaryAttributeValuesFromParameters(e,t){const i=t.filter(r=>r.type===l.ModelParameterType.PrimaryColumnValue);return i.length?i.map(r=>({[e.primaryAttributeName]:r.value})):[]}static getPrimaryAttributeValuesFromData(e,t){const i=e.getPrimaryAttributesNames();return i.length?i.filter(r=>t[r]).map(r=>({[r]:t[r]})):[]}static getPrimaryAttributeValues(e,t,i){const r=this.getPrimaryAttributeValuesFromData(e,t);return r.length?r:this.getPrimaryAttributeValuesFromParameters(e,i)}static getDataSourceLoadOptions(e){const t={loadType:e?.loadType||l.DataSourceLoadType.Load};return e?.pagingConfig&&(t.pagingConfig=e.pagingConfig),e?.sortingConfig&&(t.sortingConfig=e.sortingConfig),t}static getImageAttributes(e,t){const i=[];return(t||[]).forEach(r=>{const s=e.findAttributeByName(r);s?.isImage&&i.push(s)}),i}static processImageData(e,t,i){const r=Ve.getImageAttributes(e,i);return r.length>0&&t.forEach(s=>this._addImageUrl(e.name,r,s)),t}static removeNotRequestedData(e,t){return Object.keys(t).forEach(i=>{e.includes(i)||delete t[i]}),t}static getLoadRequestSignature(e,t,i,r){return JSON.stringify(e)+JSON.stringify(t)+JSON.stringify(i)+JSON.stringify(r)}}function vl(a){const e=a;return!!e&&(Boolean(e?.modelConfig)||Boolean(e?.embeddedModel)||Boolean(e?.value))}function I1(a){return!!a&&Boolean(a.from)}class Rr{constructor(e,t){this.ngZone=e,this.measurePerformanceService=t}innerDefineAttribute(e,t){this.measurePerformanceService.measure(`DefaultAttributeCreator.defineAttribute.${e.attribute}`,()=>{const i=e.viewModel,r=i.attributes,s=e.attribute,o=e.attributeConfig,c=e.control;Tp.defineAsyncAttribute(i,s,o,()=>c.value,g=>{r[s]=g,this.ngZone.run(()=>{c.setValue(g),t?.call(this,g)})})})}defineAttribute(e){this.innerDefineAttribute(e)}}Rr.\u0275fac=function(e){return new(e||Rr)(n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(le))},Rr.\u0275prov=n.\u0275\u0275defineInjectable({token:Rr,factory:Rr.\u0275fac,providedIn:"root"});class Il extends Rr{constructor(e,t){super(e,t)}defineAttribute(e){this.innerDefineAttribute(e,t=>{e?.viewModel?.setAttributePropertyValue(e?.attribute,"displayColor",t?.primaryColorValue)})}}Il.\u0275fac=function(e){return new(e||Il)(n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(le))},Il.\u0275prov=n.\u0275\u0275defineInjectable({token:Il,factory:Il.\u0275fac,providedIn:"root"});class zi{transform(e){return function(t){const{instance:i,params:r}=e,s={value:t.value};return i.validate(s,r)}}}zi.\u0275fac=function(e){return new(e||zi)},zi.\u0275prov=n.\u0275\u0275defineInjectable({token:zi,factory:zi.\u0275fac,providedIn:"root"});class D1{}class kr extends D1{processRequest(e,t){return(0,_.Z)(function*(){const{model:i,payload:r}=t??{},s={...e,model:i&&l.Model[l._from](i),payload:r};return yield l.HandlerChainService.instance.process(s)})()}onBeforeLoad(e){return this.processRequest({type:"crt.HandleBeforeModelLoadRequest",previousPayload:e?.previousPayload},e)}onAfterLoad(e){var t=this;return(0,_.Z)(function*(){yield t.processRequest({type:"crt.HandleAfterModelLoadRequest",previousPayload:e?.previousPayload},e)})()}onBeforeInsert(e){return this.processRequest({type:"crt.HandleBeforeModelInsertRequest"},e)}onAfterInsert(e){var t=this;return(0,_.Z)(function*(){yield t.processRequest({type:"crt.HandleAfterModelInsertRequest"},e)})()}onBeforeUpdate(e){return this.processRequest({type:"crt.HandleBeforeModelUpdateRequest"},e)}onAfterUpdate(e){var t=this;return(0,_.Z)(function*(){yield t.processRequest({type:"crt.HandleAfterModelUpdateRequest"},e)})()}onBeforeDelete(e){return this.processRequest({type:"crt.HandleBeforeModelDeleteRequest"},e)}onAfterDelete(e){var t=this;return(0,_.Z)(function*(){yield t.processRequest({type:"crt.HandleAfterModelDeleteRequest"},e)})()}}kr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(kr)))(t||kr)}}(),kr.\u0275prov=n.\u0275\u0275defineInjectable({token:kr,factory:kr.\u0275fac,providedIn:"root"});class Dl extends kr{processRequest(e,t){return super.processRequest({...e,$context:this._context?.deref()},t)}setContext(e){this._context=new WeakRef(e)}}Dl.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Dl)))(t||Dl)}}(),Dl.\u0275prov=n.\u0275\u0275defineInjectable({token:Dl,factory:Dl.\u0275fac});class hg{constructor(e){this.injector=e}}class Hi extends hg{constructor(e){super(e)}getValidator(e,t){const i=l.ValidatorRegistry.items.get(e);if(!i)throw new Error(`Validator '${e}' was not registered`);if(i.lazy&&!i.instantiate)throw new Error(`Lazy module with ${e} validator is not loaded`);return i.instantiate(t?.injectionContext)}}Hi.\u0275fac=function(e){return new(e||Hi)(n.\u0275\u0275inject(n.Injector))},Hi.\u0275prov=n.\u0275\u0275defineInjectable({token:Hi,factory:Hi.\u0275fac});class Ml{constructor(e){this.injector=e,this._schemaValidators=new Map}register(e,t){if((0,l.checkTypeNameFormat)(e.type,"ValidatorTypeName"),(0,l.checkCrtTypeNamePascalCase)(e.type),this._schemaValidators.has(e.type))throw new Error(`Error when register ${e.type} type. Element with this type has already exist`);this._schemaValidators.set(e.type,{instanceType:t,instanceConfig:e})}clearSchemaValidators(){this._schemaValidators.clear()}has(e){return this._schemaValidators.has(e)}get(e,t){const r=this._schemaValidators.get(e)?.instanceType;if(!r)throw new Error(`Validator '${e}' was not registered`);return new r(this.injector)}}Ml.\u0275fac=function(e){return new(e||Ml)(n.\u0275\u0275inject(n.Injector))},Ml.\u0275prov=n.\u0275\u0275defineInjectable({token:Ml,factory:Ml.\u0275fac});class Pp extends Hi{constructor(e,t){super(t),this._schemaValidatorRegistry=e}getValidator(e,t){return this._schemaValidatorRegistry.has(e)?this._schemaValidatorRegistry.get(e,t?.validationParameters):super.getValidator(e,t)}}Pp.\u0275fac=function(e){return new(e||Pp)(n.\u0275\u0275inject(Ml),n.\u0275\u0275inject(n.Injector))},Pp.\u0275prov=n.\u0275\u0275defineInjectable({token:Pp,factory:Pp.\u0275fac});let wt=class extends l.BaseValidator{constructor(e){super(),this.injector=e}defaultValidationError(e){const t=this.injector?.get(w.sK),i=e??{},r=t?.instant(this.i18nMessageKey,i);return{message:e?.message||r||""}}};wt=(0,m.gn)([(0,l.CrtValidator)(),(0,m.w6)("design:paramtypes",[n.Injector])],wt);class mP extends wt{constructor(){super(...arguments),this.async=!1}validate(e){return null}}class Ap extends Hi{constructor(e){super(e)}getValidator(e,t){try{return super.getValidator(e,t)}catch{return new mP(this.injector)}}}Ap.\u0275fac=function(e){return new(e||Ap)(n.\u0275\u0275inject(n.Injector))},Ap.\u0275prov=n.\u0275\u0275defineInjectable({token:Ap,factory:Ap.\u0275fac});const hP=f(96656);class wl{sort(e,t){const i=[];let r=[];Object.entries(e||{}).forEach(([o,c])=>{if(I1(c)){let d=c.from;d=Array.isArray(d)?d:[d];const p=d.map(g=>[o,g]);r=r.concat(p)}else i.push(o)});const s=hP(r).reverse();return[...i,...s].filter(Boolean).filter((o,c,d)=>d.indexOf(o)===c).map(o=>[o,s.includes(o)?e[o]??t[o]:e[o]])}}wl.\u0275fac=function(e){return new(e||wl)},wl.\u0275prov=n.\u0275\u0275defineInjectable({token:wl,factory:wl.\u0275fac,providedIn:"root"});class Zi{constructor(e){this.injector=e,this.initDependencies()}initDependencies(){this.repository=this.injector.get(Bi),this.ngZone=this.injector.get(n.NgZone)}}Zi.\u0275fac=function(e){return new(e||Zi)(n.\u0275\u0275inject(n.Injector))},Zi.\u0275prov=n.\u0275\u0275defineInjectable({token:Zi,factory:Zi.\u0275fac});class Nr{constructor(e){this._translateService=e}_getAttributesCaptions(e,t){const i=t.map(r=>{const s=e._attributeConfigs[r];return s&&s.caption?Promise.resolve(s.caption):e[ho][Pa.string][r].then(o=>o||r)});return Promise.all(i)}_getFirstValidationError(e){const t=Object.entries(e??{});if(0===t.length)return null;const i=t[0][1];return Object.entries(i)[0]}getValidationErrorMessage(e,t){var i=this;return(0,_.Z)(function*(){const r=i._getFirstValidationError(t);if(!r)return"";const s=r[0],o=r[1].message,d=Object.entries(t).filter(([C,v])=>Object.keys(v).includes(s)).map(([C,v])=>C),p=(yield i._getAttributesCaptions(e,d)).map(C=>`"${C}"`),g=1===d.length?i._translateService.instant("BaseViewModel.ValidationErrorMessageSingleErrorField"):i._translateService.instant("BaseViewModel.ValidationErrorMessageSeveralErrorFields");return Z.Ld.format(g,p.join(", "),o)})()}}Nr.\u0275fac=function(e){return new(e||Nr)(n.\u0275\u0275inject(w.sK))},Nr.\u0275prov=n.\u0275\u0275defineInjectable({token:Nr,factory:Nr.\u0275fac});class xl{constructor(e){this._injector=e,this._subscription=new u.Subscription,this._handlerRegisterMap=new Map;for(const[,t]of l.InternalRequestHandlerRegistry.requestHandlersMap)this._registerHandler(t);this._subscription.add(l.InternalRequestHandlerRegistry.onAddRequestHandler((t,i)=>{this._registerHandler(i)})),this._subscription.add(l.InternalRequestHandlerRegistry.onRemoveRequestHandler((t,i)=>{this._removeHandler(i)}))}_registerHandler(e){const{type:t,scopes:i,requestType:r,createHandler:s,lazy:o,lazyModuleRef:c,source:d}=e.instanceConfig;this._handlerRegisterMap.has(t)?l.HandlerChainService.instance.update({type:t,createHandler:s}):this._handlerRegisterMap.set(t,l.HandlerChainService.instance.register({type:t,requestType:r,scopes:[...i??[]],source:d,createHandler:s,lazy:o,lazyModuleRef:c}))}_removeHandler(e){const{type:t}=e.instanceConfig;this._handlerRegisterMap.get(t)()}ngOnDestroy(){this._subscription.unsubscribe(),this._handlerRegisterMap.forEach(e=>{e()})}}xl.\u0275fac=function(e){return new(e||xl)(n.\u0275\u0275inject(n.Injector))},xl.\u0275prov=n.\u0275\u0275defineInjectable({token:xl,factory:xl.\u0275fac,providedIn:"root"});n.APP_INITIALIZER;class M1{constructor(e,t,i=!1){this.name=e,this._value=t,this._locked=i,this._isValueInitialized=!1,this._pendingValue=void 0,this._onChanged=new n.EventEmitter,this._hasInitialValue=!1,null!=t&&(this._isValueInitialized=!0,this._hasInitialValue=!0,this._initialValue=t)}get onChanged(){return this._onChanged}get value(){return this.getValue()}set value(e){this.setValue(e)}get initialValue(){return this._initialValue}set initialValue(e){this.setInitialValue(e)}get hasInitialValue(){return this._hasInitialValue}get isLocked(){return this._locked}emitValueChanged(e){this.onChanged.emit(e)}areValuesEqual(e,t){return(0,J.Z)(e,t)}getValue(){return this._value}setValue(e,t=!1){if(this._locked||(this._isValueInitialized=!0,this._pendingValue=e,this.areValuesEqual(this._value,e)))return;const i=(0,q.Z)(this._value);this._value=(0,q.Z)(e),!t&&this.emitValueChanged({name:this.name,value:e,oldValue:i})}resetValue(){this.hasInitialValue&&this.setValue(this.initialValue)}setInitialValue(e){this._hasInitialValue=!0,this._initialValue=e,this._isValueInitialized||this.setValue(e,!0)}setPending(e){const t=typeof this._pendingValue>"u"?this.value:this._pendingValue;this.value=e,this._pendingValue=t}resetPending(){this.value=this._pendingValue,this._pendingValue=void 0}}class uy extends M1{constructor(e,t,i,r,s=!1){super(e,t,s),this._validatorTypeResolver=i,this._injectionContext=r,this._onValidatorChanged=new n.EventEmitter}get onValidatorChanged(){return this._onValidatorChanged}_createValidatorInfo(){return{name:this.validatorTypeName,instance:this._validatorTypeResolver.getValidator(this.validatorTypeName,{injectionContext:this._injectionContext}),disabled:!0}}emitValueChanged(e){super.emitValueChanged(e),this.hasValidator&&this.updateValidator(e)&&this._onValidatorChanged.emit()}get hasValidator(){return!1}updateValidator(e){return!1}setValidatorInfo(e,t=!1){this.validatorInfo=e}initializeValidator(e,t=!1){if(!this.hasValidator||null==this._validatorTypeResolver)return[...e];let i=e.find(s=>s.name===this.validatorTypeName),r=!1;return null==i&&(i=this._createValidatorInfo(),r=!0),this.setValidatorInfo(i,t),r?[...e,i]:[...e]}}class dy{static _get(e){if(!e)return uy;if(this._properties.has(e))return this._properties.get(e);throw new Error(`CrtControlProperty with type ${e} doesn't registered`)}static register(e,t){this._properties.set(e,t)}static create(e){return new(this._get(e.typeName))(e.name,e.value,e.validatorTypeResolver,e.injectionContext,!0===e.locked)}}dy._properties=new Map;let w1=class extends uy{constructor(){super(...arguments),this.validatorTypeName="crt.Required"}get hasValidator(){return!0}updateValidator(e){return this.validatorInfo&&(this.validatorInfo.disabled=!e.value),!0}setValidatorInfo(e,t=!1){super.setValidatorInfo(e,t),this.initialValue=!e.disabled,this.setValue(!e.disabled,t)}};w1=(0,m.gn)([function gP(a){return function(e){(0,l.checkTypeNameFormat)(a.name,"PropertyName"),dy.register(a.name,e)}}({name:"crt.Required"})],w1);class fP{}const x1="DataValueType";class Rp extends M1{get propertiesConfig(){return[{name:"visible",defaultValue:!0},{name:"displayColor"},{name:"required",typeName:"crt.Required",defaultValue:!1}]}get formControl(){return this._formControl||(this._formControl=new b.NI(this.value),this._subscribeOnFormControl(this._formControl)),this._formControl}set formControl(e){this._formControl=e,this._subscribeOnFormControl(this._formControl)}get properties(){return this._properties}get onPropertyChanged(){return this._onPropertyChanged}get visible(){return this.getPropertyByName("visible").getValue()}set visible(e){this.getPropertyByName("visible").value=e}get required(){return this.getPropertyByName("required").getValue()}set required(e){this.getPropertyByName("required").value=e}get displayColor(){return this.getPropertyByName("displayColor").getValue()}set displayColor(e){this.getPropertyByName("displayColor").value=e}get isDirty(){return this.formControl.dirty}constructor(e=null,t=null,i=!1,r="",s=[],o,c,d,p){super(r,e),this.validationState=t,this.disabled=i,this._subscription=new u.Subscription,this._onPropertyChanged=new n.EventEmitter,this._crtControlStateAdapter=o,this._validatorTypeResolver=c,this._injectionContext=p,this._initProperties(s),this._subscribeOnPropertiesEvents(),this._initializeValidators(d??[],!0)}static create(e){return new Rp(e.value,null,!1,e.name,e.propertiesConfig??[],e.crtControlStateAdapter,e.validatorTypeResolver,e.validatorInfo,e.injectionContext)}_subscribeOnFormControl(e){this._formControlSubscription?.unsubscribe(),this._formControlSubscription=e.valueChanges.pipe((0,ze.O)(e.value),(0,on.x)((t,i)=>this.areValuesEqual(t,i))).subscribe(t=>{this.setValue(t)})}_initProperties(e){const t=[...this.propertiesConfig,...e];this._properties=new Map,t.forEach(i=>{const r=dy.create({typeName:i.typeName,name:i.name,value:i.defaultValue,locked:!0===i.locked,validatorTypeResolver:this._validatorTypeResolver,injectionContext:this._injectionContext});this._properties.set(i.name,r)})}_subscribeOnPropertyEvents(e){this._subscription.add(e.onChanged.subscribe(({name:t,value:i,oldValue:r})=>{this.onPropertyChanged.emit({name:t,value:i,oldValue:r})})),this._subscription.add(e.onValidatorChanged.subscribe(()=>{this._refreshValidators()}))}_subscribeOnPropertiesEvents(){this.properties.forEach(e=>{this._subscribeOnPropertyEvents(e)})}_initializeValidators(e,t=!1){this._validatorInfo=e,this._properties.forEach(i=>{this._validatorInfo=i.initializeValidator(this._validatorInfo,t)}),this._refreshValidators()}_getEnabledValidatorFns(e=!1){return this._validatorInfo.filter(t=>!t.disabled&&t.instance.isAsync===e).map(t=>this._crtControlStateAdapter.transform(t))??[]}_refreshValidators(){const e=this._getEnabledValidatorFns();this.formControl.setValidators(e);const t=this._getEnabledValidatorFns(!0);this.formControl.setAsyncValidators(t),this.formControl.updateValueAndValidity()}_updateValidator(e,t=!1){const i=this._validatorInfo.find(r=>r.name===e);if(!i)throw new Error(`Validator ${e} does not exist on ${this.name} attribute.`);i.disabled!==t&&(i.disabled=t,this._refreshValidators())}_getIsNeedMarkControlAsDirty(e){const t=this.formControl,i=this.getPropertyValue(x1);let r=!t.dirty;return r&&function GE(a){return a===l.DataValueType.Lookup||a===l.DataValueType.Guid}(i)&&(r=!(0,J.Z)(e?.value,t.value?.value)),r}emitValueChanged(e){const t=this.formControl;if(!this.areValuesEqual(e.value,t.value)){const i=this._getIsNeedMarkControlAsDirty(e.value);i&&t.markAsDirty(),t.setValue(e.value),i&&t.updateValueAndValidity()}super.emitValueChanged(e)}findPropertyByName(e){return this.properties.has(e)?this.properties.get(e):null}enableValidator(e){this._updateValidator(e,!1)}disableValidator(e){this._updateValidator(e,!0)}change(e){this.setValue(e)}getPropertyByName(e,t=!1){let i=this.findPropertyByName(e);return!i&&t&&(i=new uy(e,null,this._validatorTypeResolver,this._injectionContext),this._properties.set(e,i),this._subscribeOnPropertyEvents(i)),i}hasPropertyValue(e){return!!this.getPropertyByName(e)}getPropertyValue(e){const t=this.getPropertyByName(e);return t?t.getValue():null}setPropertyValue(e,t,i=!1){this.getPropertyByName(e,!0).setValue(t,i)}setPropertyInitialValue(e,t){this.getPropertyByName(e,!0).setInitialValue(t)}getPropertyInitialValue(e){return this.getPropertyByName(e)?.initialValue}getValue(){return this._formControl?this._formControl.value:super.getValue()}destroy(){this._formControlSubscription?.unsubscribe(),this._subscription.unsubscribe()}getInvariabilityPropertyName(){const e=this.getPropertyValue(l.ViewElementProperty.Readonly),t=this.getPropertyValue(l.ViewElementProperty.Disabled);return e??t}toggle(e){const t=this.getInvariabilityPropertyName(),i=this.getPropertyByName(t);i&&(e?i.resetPending():i.setPending(!0))}}class Yn{get attributesMap(){return this._attributesMap}get mappedViewModelAttributes(){return this._mappedViewModelAttributes}get isCollection(){return this._isCollection}get collectionViewModelAttributeName(){return this._collectionViewModelAttributeName}constructor(e){this._attributesMap=new Map,this._mappedViewModelAttributes=new Set,this.attributes=[],this.includePrimaryAttributes=!0,this.name=e}static _getDataSourceInfo(e,t){if(!e.has(t)){const i=new Yn(t);return e.set(t,i),i}return e.get(t)}static _extractViewModelAttributeMapInfo(e){const t=e.split(".");return{dataSourceName:t.shift(),dataSourceAttributePath:t.join(".")}}static _getByDefaultAttribute(e,t,i,r=""){const s=t.modelConfig;if(!s||!s.path)return;const o=this._extractViewModelAttributeMapInfo(s.path);if(!o.dataSourceAttributePath)return void this._getByViewModelCollectionAttribute(e,t,i);if(r&&r!==o.dataSourceName)throw new Error(`Attribute '${e}' mapped on a few DataSources`);const c=this._getDataSourceInfo(i,o.dataSourceName),d=s.aggregationConfig?.aggregationFunction?M_(o.dataSourceAttributePath):o.dataSourceAttributePath;c.attributes.push({path:d,type:s.type,functionConfig:s.functionConfig,aggregationConfig:s.aggregationConfig}),c._mappedViewModelAttributes.add(e),c._attributesMap.set(e,o.dataSourceAttributePath)}static _getByInlineViewModelAttribute(e,t,i,r=""){const s=t.viewModelConfig||{};Object.entries(s.attributes||{}).forEach(([o,c])=>{const d=`${e}.${o}`;this._processViewModelAttribute(d,c,i,r)})}static _getByViewModelCollectionAttribute(e,t,i){const r=t.modelConfig;if(!r||!r.path)return;const o=this._extractViewModelAttributeMapInfo(r.path).dataSourceName,c=this._getDataSourceInfo(i,o);c._isCollection=!0,c._collectionViewModelAttributeName=e,c._pagingConfig=r.pagingConfig,c._sortingConfig=r.sortingConfig,c._filteringConfig=r.filterAttributes,c.includePrimaryAttributes=void 0===r.includePrimaryAttributes||r.includePrimaryAttributes;const d=t?.viewModelConfig;Object.entries(d?.attributes||{}).forEach(([p,g])=>{this._processViewModelAttribute(`${e}.${p}`,g,i,o)})}static _processViewModelAttribute(e,t,i,r=""){"viewModelConfig"in t||"viewModelName"in t?t.isCollection?this._getByViewModelCollectionAttribute(e,t,i):this._getByInlineViewModelAttribute(e,t,i,r):"from"in t||this._getByDefaultAttribute(e,t,i,r)}static getFromViewModelConfig(e,t=[]){const i=new Map;return Object.entries(e?.attributes||{}).forEach(([r,s])=>{this._processViewModelAttribute(r,s,i)}),t.filter(r=>!i.has(r.name)).forEach(({name:r})=>{const s=new Yn(r);i.set(r,s)}),i}static getLookupListDataSourceInfo(e,t){const i=new Yn("");return i._isCollection=!0,i._collectionViewModelAttributeName=e,Object.entries(t).forEach(([r,s])=>{i.attributes.push({path:s}),i._mappedViewModelAttributes.add(r),i._attributesMap.set(r,s)}),i}_getRowModelDto(e){const t=e.length>0?e[0]:{},i={};return Object.entries(t).forEach(([r,s])=>{this.getMappedAttributeNames(r).forEach(c=>{const d=c.split(".");this.isCollection&&d.length>1&&d.shift(),(0,Ga.Z)(i,d.join("."),s)})}),i}_getCollectionModelDto(e){return{[this._collectionViewModelAttributeName]:e.map(r=>this._getRowModelDto([r]))}}getMappedAttributes(){return Array.from(this._mappedViewModelAttributes.values())}getMappedAttributeNames(e){return Array.from(this._attributesMap.entries()).filter(([,t])=>t===e).map(([t])=>t)}getDataSourceAttributePath(e){return this._attributesMap.has(e)?this._attributesMap.get(e):""}getIsMapOnCollection(e){return this._isCollection&&this._collectionViewModelAttributeName===e}getPagingConfig(){return this._pagingConfig}getSortingConfig(){return this._sortingConfig}getFilteringConfig(){return this._filteringConfig||[]}getModelDto(e){return this._isCollection?this._getCollectionModelDto(e):this._getRowModelDto(e)}addNewAttribute(e,t,i){const r=new Map;r.set(this.name,this),Yn._getByDefaultAttribute(e,t,r,i)}getIsDataSourceAttributePathExists(e){return void 0!==this.attributes.find(t=>t.path===e)}}let gg=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.Required.Message",this.async=!1}validateLczValue(e){return!!e&&!!e.find(t=>t.value&&t.value.trim())}validate(e,t){const i=e.value;return("string"==typeof i?e&&e.value?.trim():this.validateLczValue(i))?null:{required:this.defaultValidationError(t)}}};gg=(0,m.gn)([(0,l.CrtValidator)({type:"crt.EmptyOrWhiteSpace"})],gg);let E1=class extends gg{constructor(e,t){super(e),this.injector=e,this._userInfo=t}validateLczValue(e){return!!e&&!!e.find(t=>t.cultureName===this._userInfo.cultureInfo.sysCultureName&&t.value&&t.value.trim())}};E1=(0,m.gn)([(0,l.CrtValidator)({type:"crt.EmptyOrWhiteLczSpace"}),(0,m.w6)("design:paramtypes",[n.Injector,Q])],E1);let py=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.Max.Message",this.async=!1}validate(e,t){const r=b.kI.max(t.max)(e);return r?{max:this.defaultValidationError({...t,...r.max})}:null}};py=(0,m.gn)([(0,l.CrtValidator)({type:"crt.Max"})],py);let my=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.MaxLength.Message",this.async=!1}_maxLengthValidator(e,t){return zt.hasValidLength(e)&&e.length>t.maxLength?{maxlength:this.defaultValidationError({...t,requiredLength:t.maxLength,actualLength:e.length})}:null}validate(e,t){const i=zt.getControlValueAndTrimIfNeeded(e,t);return this._maxLengthValidator(i,t)}};my=(0,m.gn)([(0,l.CrtValidator)({type:"crt.MaxLength"})],my);let hy=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.Min.Message",this.async=!1}validate(e,t){const r=b.kI.min(t.min)(e);return r?{min:this.defaultValidationError({...t,...r.min})}:null}};hy=(0,m.gn)([(0,l.CrtValidator)({type:"crt.Min"})],hy);let gy=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.MinLength.Message",this.async=!1}_minLengthValidator(e,t){return zt.isEmptyInputValue(e)||!zt.hasValidLength(e)?null:e.length<t.minLength?{minlength:this.defaultValidationError({...t,requiredLength:t.minLength,actualLength:e.length})}:null}validate(e,t){const i=zt.getControlValueAndTrimIfNeeded(e,t);return this._minLengthValidator(i,t)}};gy=(0,m.gn)([(0,l.CrtValidator)({type:"crt.MinLength"})],gy);let fg=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.RegExp.Message",this.async=!1}validate(e,t){const i=t.regex.test(e.value);return this.i18nMessageKey=t.message||this.i18nMessageKey,i?null:{[t.errorCode]:this.defaultValidationError({...t})}}};fg=(0,m.gn)([(0,l.CrtValidator)({type:"crt.RegExp"})],fg);let fy=class extends wt{constructor(){super(...arguments),this.i18nMessageKey="Validators.Required.Message",this.async=!1}_requiredValidator(e,t){return zt.isEmptyInputValue(e)?{required:this.defaultValidationError(t)}:null}validate(e,t){const i=zt.getControlValueAndTrimIfNeeded(e,t);return this._requiredValidator(i,t)}};var T1;fy=(0,m.gn)([(0,l.CrtValidator)({type:"crt.Required"})],fy),function(a){a.Attachments="efbf3a0d-d780-465a-8e4b-8c0765197cfb"}(T1||(T1={}));let _y=class extends wt{constructor(e){super(e),this.injector=e,this._messageKey="Validators.SchemaNamePrefix.",this.async=!0,this._sysSettingsService=e.get(l.SysSettingsService)}_getSchemaNamePrefix(){var e=this;return(0,_.Z)(function*(){return(yield e._sysSettingsService.getByCode("SchemaNamePrefix")).value})()}validate(e,t){var i=this;return(0,_.Z)(function*(){if((0,gt.Z)(e.value))return null;const r=zt.getControlValueAndTrimIfNeeded(e,{trimValue:!0}),s=yield i._getSchemaNamePrefix();if(s){const o=!r?.startsWith(s);if(o||r===s)return i.i18nMessageKey=o?i._messageKey+"NoSchemaNamePrefixMessage":i._messageKey+"OnlySchemaNamePrefixMessage",{namePrefixError:i.defaultValidationError({...t,schemaNamePrefix:s})}}return null})()}};_y=(0,m.gn)([(0,l.CrtValidator)({type:"crt.SchemaNamePrefix"}),(0,m.w6)("design:paramtypes",[n.Injector])],_y);let yy=class extends fg{constructor(){super(...arguments),this._params={regex:/^[a-zA-Z]+[a-zA-Z0-9-_]*$/,errorCode:"allowedSymbolsErrorCode"},this.i18nMessageKey="Validators.SchemaNameAllowedSymbols.Message",this.async=!1}validate(e){return super.validate(e,this._params)}};yy=(0,m.gn)([(0,l.CrtValidator)({type:"crt.SchemaNameAllowedSymbols"})],yy);class Vr{constructor(e){if(null!=e){this.name=e.name,this.type=e.type,e.caption&&(this.caption="string"==typeof e.caption?e.caption:{...e.caption}),this.primaryAttributeName=e.primaryAttributeName,this.primaryDisplayAttributeName=e.primaryDisplayAttributeName,this.primaryColorAttributeName=e.primaryColorAttributeName,this.hierarchyAttributeName=e.hierarchyAttributeName,e.dataSourceConfig&&(this.dataSourceConfig={...e.dataSourceConfig,config:{...e.dataSourceConfig.config}});const t=e.attributes??[];this.attributes=t.map(i=>i.clone())}else this.attributes=[]}findAttributeByName(e){return this.attributes.find(t=>t.name===e)??null}getPrimaryAttributesNames(){return[this.primaryAttributeName]}getPrimaryLoadAttributes(){const e=[];return this.primaryAttributeName&&e.push(this.primaryAttributeName),this.primaryDisplayAttributeName&&e.push(this.primaryDisplayAttributeName),e}clone(){return new Vr(this)}}class El{get isDate(){return this.dataValueType===l.DataValueType.Date||this.dataValueType===l.DataValueType.DateTime||this.dataValueType===l.DataValueType.Time}get isImage(){return this.dataValueType===l.DataValueType.IMAGELOOKUP||this.dataValueType===l.DataValueType.Image}get isSystem(){return this.usageType===l.DataSchemaAttributeUsageType.None||this.usageType===l.DataSchemaAttributeUsageType.Advanced}get isAggregate(){return this.attributeType===l.DataSchemaAttributeType.AggregationAttribute||this.attributeType===l.DataSchemaAttributeType.FunctionAttribute&&"aggregation"===this.functionConfig?.type}constructor(e){if(null!=e){this.name=e.name,this.caption=e.caption,this.path=e.path,this.dataValueType=e.dataValueType,e.validators&&(this.validators={...e.validators||{}});const t=e.defaultValue;t&&(t instanceof u.Observable?this.defaultValue=t.pipe((0,h.U)(i=>this._getConvertDefaultValue(i))):this.defaultValue=(0,u.of)(this._getConvertDefaultValue(t))),this.defaultValueSchema=e.defaultValueSchema,this.isValueCloneable=e.isValueCloneable,this.attributeType=e.attributeType,this.referenceSchemaName=e.referenceSchemaName,this.functionConfig=e.functionConfig,this.aggregationConfig=e.aggregationConfig,this.isMasked=e.isMasked,this.isFormatValidated=e.isFormatValidated,this.isSensitiveData=e.isSensitiveData,this.usageType=e.usageType,this.isRequired=e.isRequired,this.lookupMode=e.lookupMode}}_getConvertDefaultValue(e){if(this.isDate){if(e instanceof Date){const t=new Date;return t.setTime(e.getTime()),t}return e}return"object"==typeof e?{...e}:e}clone(){return new El(this)}addDefaultValidators(){const e=this.validators??{};this.isRequired&&(e["crt.Required"]={type:"crt.Required"}),!this.validators&&Object.keys(e).length>0&&(this.validators=e)}}class P1 extends Error{get isCritical(){return!0}constructor(e,t){super(t),this.dataSource=e}}class Cy extends P1{constructor(e,t){super(e,t)}}class yP extends P1{get isCritical(){return!1}constructor(e,t){super(e,t)}}class Sy{constructor(e,t){this.dataSourceName=e,this.injector=t,this._errors=[]}get scope(){return this._scope}get hasErrors(){return 0!==this._errors.length}get hasCriticalErrors(){return this._errors.some(e=>e.isCritical)}get affectedAttributes(){return[]}getLastError(){return this.hasErrors?this._errors[this._errors.length-1]:null}get isAggregate(){return!1}getEmptySchema(){return new Vr}init(e,t){return this.initialConfig=e,this._scope=t,(0,u.of)(this)}load(e,t,i){return this.innerLoad(e,t,i)}save(e,t){return this.innerSave(e,t)}insert(e){return this.innerInsert(e)}delete(e){return this.innerDelete(e)}getSchema(){return this.dataSchema?(0,u.of)(this.dataSchema):this.innerGetSchema().pipe((0,I.b)(e=>{this.dataSchema=e}))}getLookupDataSchema(e){return this.innerGetLookupDataSchema(e)}getDefaultValues(){return this.innerGetDefaultValues()}canEdit(e){return this.innerCanEdit(e)}canDelete(e){return this.innerCanDelete(e)}canCreate(e){return this.innerCanCreate(e)}}const CP=new n.InjectionToken("COPILOT_INTENT_REPOSITORY_TOKEN");class Tl{constructor(){this._defaultNewActionCode="Action",this._sysSettingsService=(0,n.inject)(l.SysSettingsService)}_checkCodeIsUnique(e,t){return!e?.includes(t)}generate(e=null){return(0,u.from)(this._sysSettingsService.getByCode("SchemaNamePrefix")).pipe((0,u.map)(t=>t.value),(0,u.repeat)(),(0,u.map)(t=>Mh.generateUnique(this._defaultNewActionCode,t)),(0,u.filter)(t=>this._checkCodeIsUnique(e,t)),(0,u.take)(1))}}Tl.\u0275fac=function(e){return new(e||Tl)},Tl.\u0275prov=n.\u0275\u0275defineInjectable({token:Tl,factory:Tl.\u0275fac});class Fr{constructor(){this._repository=(0,n.inject)(CP),this._actionCodeGenerator=(0,n.inject)(Tl)}_loadIntentUIdByActionUId(e){return(0,u.from)(l.Model.create("CopilotAction")).pipe((0,u.switchMap)(t=>t.load({attributes:["Intent"],parameters:[{type:l.ModelParameterType.Filter,value:new l.CompareFilter(l.ComparisonType.Equal,new l.ColumnExpression({columnPath:"Id"}),new l.ParameterExpression({value:e}))}]})),(0,u.map)(t=>{const i=t[0]||{};return(0,O.Z)(i)?null:i.Intent?.value}))}_applyActionToIntent(e,t){const r=(e.Actions||[]).findIndex(o=>o.Id===t.Id);if(-1===r)return!1;const s=e.Actions[r];return e.Actions.splice(r,1,{...s,...t}),!0}getIntent(e){return this._repository.get(e)}createIntent(e){return this._repository.create(e.UId).pipe((0,u.map)(t=>(t.UId=e.UId,t.Title=e.Title,t.Code=e.Code,t.Status=e.Status,t.Description=e.Description,t.Prompt=e.Prompt,t)),(0,u.switchMap)(t=>this._repository.update(t)))}updateIntent(e){return this._repository.get(e.UId).pipe((0,u.map)(t=>({...t,...e})),(0,u.switchMap)(t=>this._repository.update(t)))}createAction(e){return this._repository.get(e.Intent).pipe((0,u.map)(t=>(t.Actions.push(e),t)),(0,u.switchMap)(t=>this._repository.update(t)))}getActionByUId(e){return this._loadIntentUIdByActionUId(e).pipe((0,u.switchMap)(t=>t?this._repository.get(t).pipe((0,u.map)(i=>i.Actions.filter(r=>r.Id===e)),(0,u.map)(i=>i[0])):(0,u.of)({})))}getIntentByActionUId(e){return this.getActionByUId(e).pipe((0,u.switchMap)(t=>t?.Intent?this.getIntent(t.Intent):(0,u.of)({})))}updateAction(e){return this._loadIntentUIdByActionUId(e.Id).pipe((0,u.switchMap)(t=>this._repository.get(t).pipe((0,u.switchMap)(i=>this._applyActionToIntent(i,e)?this._repository.update(i):(0,u.of)({})))))}generateActionCode(e=null){return this._actionCodeGenerator.generate(e)}}Fr.\u0275fac=function(e){return new(e||Fr)},Fr.\u0275prov=n.\u0275\u0275defineInjectable({token:Fr,factory:Fr.\u0275fac});const SP=JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),bP=JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u0421\u0445\u0435\u043c\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430, \u043e\u0434\u043d\u0430\u043a\u043e \u043e\u0448\u0438\u0431\u043a\u0438 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u0435\u043f\u044f\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0435\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0443."}}'),IP={"en-US":SP,"uk-UA":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u0421\u0445\u0435\u043c\u0443 \u043f\u0440\u043e\u0446\u0435\u0441\u0443 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e, \u0430\u043b\u0435 \u043f\u043e\u043c\u0438\u043b\u043a\u0438 \u0432\u0430\u043b\u0456\u0434\u0430\u0446\u0456\u0457 \u043f\u0435\u0440\u0435\u0448\u043a\u043e\u0434\u0436\u0430\u044e\u0442\u044c \u0439\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0443."}}'),"ru-RU":bP};class kp{}kp.\u0275fac=function(e){return new(e||kp)},kp.\u0275mod=n.\u0275\u0275defineNgModule({type:kp}),kp.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,Rt.forRoot({i18n:IP})]});class _g{addColumnCaption(e,t){const{name:i,caption:r}=t;if(!r)return;const s=e.findColumn(i);s&&s.withCaption(r)}addColumn(e,t){!e||!t||(this.addColumnInternal(e,t),this.addColumnCaption(e,t))}}class Lr extends _g{addColumnInternal(e,t){const{name:i,path:r,aggregationConfig:s}=t;e.addAggregationSubQueryColumn(r,(0,l.toAggregationType)(s?.aggregationFunction),s,i)}}Lr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Lr)))(t||Lr)}}(),Lr.\u0275prov=n.\u0275\u0275defineInjectable({token:Lr,factory:Lr.\u0275fac,providedIn:"root"});class Or extends _g{addColumnInternal(e,t){e.addSchemaColumn(t.path,t.name)}}Or.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Or)))(t||Or)}}(),Or.\u0275prov=n.\u0275\u0275defineInjectable({token:Or,factory:Or.\u0275fac,providedIn:"root"});class jr extends _g{addColumnInternal(e,t){const{name:i,path:r}=t||{},s=t?.functionConfig;e.addAggregationFunctionColumn(r,(0,l.toAggregationType)(s?.aggregation),i,(0,l.toAggregationEvalType)(s?.aggregationEval))}}jr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(jr)))(t||jr)}}(),jr.\u0275prov=n.\u0275\u0275defineInjectable({token:jr,factory:jr.\u0275fac,providedIn:"root"});class Br extends _g{addColumnInternal(e,t){const{name:i,path:r}=t||{},s=t?.functionConfig;e.addDatePartFunctionColumn(r,(0,l.toDatePartType)(s?.datePart),i)}}Br.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Br)))(t||Br)}}(),Br.\u0275prov=n.\u0275\u0275defineInjectable({token:Br,factory:Br.\u0275fac,providedIn:"root"});class A1{constructor(e=null){this._dataSchema=null==e?new Vr:e.clone()}_createDataSchemaAttributeByConfig(e){const t=new El;return t.name=e.name,t.caption=e.caption,t.path=e.path,t.dataValueType=e.dataValueType,t.validators={...e.validators||{}},t.defaultValue=(0,u.of)("object"==typeof e.defaultValue?{...e.defaultValue}:e.defaultValue),t.defaultValueSchema=e.defaultValueSchema,t.isValueCloneable=e.isValueCloneable,t.attributeType=e.attributeType,t.referenceSchemaName=e.referenceSchemaName,t.functionConfig=e.functionConfig,t.aggregationConfig=e.aggregationConfig,t.usageType=e.usageType,t.isMasked=e.isMasked,t.isFormatValidated=e.isFormatValidated,t.isSensitiveData=e.isSensitiveData,t.isRequired=e.isRequired,t.lookupMode=e.lookupMode,t}setEntitySchemaColumnValidators(e,t){return e.isRequired&&this.setAttributeRequiredValidator(t),this.setAttributeTextDataValueTypeValidator(t,e.dataValueType).setAttributeNumberDataValueTypeValidator(t,e.dataValueType).setAttributePhoneDataValueTypeValidator(t,e)}setAttributeValidator(e,t,i){const r=this._dataSchema.attributes.find(o=>o.name===e),s=r.validators||{};return s[t]=i,r.validators=s,this}setAttributeRequiredValidator(e){return this.setAttributeValidator(e,"crt.Required",{type:"crt.Required"})}setAttributeMaxLengthValidator(e,t){return this.setAttributeValidator(e,"crt.MaxLength",{type:"crt.MaxLength",params:{maxLength:t}})}setAttributeTextDataValueTypeValidator(e,t){const i=function BE(a){let e;switch(a){case l.DataValueType.SHORT_TEXT:e=D_.ShortTextCaption;break;case l.DataValueType.PHONE_TEXT:case l.DataValueType.MEDIUM_TEXT:e=D_.MediumTextCaption;break;case l.DataValueType.LONG_TEXT:case l.DataValueType.EMAIL_TEXT:e=D_.LongTextCaption;break;default:return}return{maxLength:e}}(t);return i?this.setAttributeMaxLengthValidator(e,i.maxLength):this}setAttributeMinValueValidator(e,t){return this.setAttributeValidator(e,"crt.Min",{type:"crt.Min",params:{min:t}})}setAttributeMaxValueValidator(e,t){return this.setAttributeValidator(e,"crt.Max",{type:"crt.Max",params:{max:t}})}setAttributeMinMaxValidator(e,t,i){return this.setAttributeMinValueValidator(e,t).setAttributeMaxValueValidator(e,i)}setAttributeNumberDataValueTypeValidator(e,t){const i=function UE(a){return[l.DataValueType.Float,l.DataValueType.FLOAT1,l.DataValueType.FLOAT2,l.DataValueType.FLOAT3,l.DataValueType.FLOAT4,l.DataValueType.FLOAT8,l.DataValueType.Money].includes(a)?{minValue:Kh.Float.min,maxValue:Kh.Float.max}:a===l.DataValueType.Integer?{minValue:Kh.Integer.min,maxValue:Kh.Integer.max}:void 0}(t);return i&&this.setAttributeMinMaxValidator(e,i.minValue,i.maxValue),this}setAttributePhoneDataValueTypeValidator(e,t){return[l.DataValueType.PHONE_TEXT].includes(t.dataValueType)&&t.isMasked&&this.setAttributeRegExpValidator(e,{regex:/^((?!_).)*$/,errorCode:"phoneMaskValidator"}),this}setAttributeRegExpValidator(e,t){return this.setAttributeValidator(e,"crt.RegExp",{type:"crt.RegExp",params:t})}setAttributesDefaultValue(e){return this._dataSchema.attributes.forEach(t=>{t.defaultValue=e.pipe((0,h.U)(i=>i[t.name]))}),this}addAttribute(e,t){const{name:i,caption:r,dataValueType:s,isValueCloneable:o,referenceSchemaName:c,isMasked:d,isFormatValidated:p,usageType:g,isRequired:C}=e,v=new El;return v.name=t.attributeName||i,v.path=t.attributePath||i,v.caption=r,v.dataValueType=s,v.isValueCloneable=!!o,v.attributeType=t.attributeType||l.DataSchemaAttributeType.OwnAttribute,v.referenceSchemaName=c,v.validators={},v.isMasked=d,v.isFormatValidated=p,v.usageType=g,v.isRequired=C,v.defaultValueSchema=e.defaultValueSchema,v.lookupMode=e.lookupMode,this._dataSchema.attributes.push(v),t.attributeType===l.DataSchemaAttributeType.OwnAttribute&&this.setEntitySchemaColumnValidators(e,v.name),t.attributeType===l.DataSchemaAttributeType.AggregationAttribute&&(v.aggregationConfig=t.aggregationConfig),t.attributeType===l.DataSchemaAttributeType.FunctionAttribute&&(v.functionConfig=t.functionConfig),this}addOwnAttribute(e){return this.addAttribute(e,{attributeType:l.DataSchemaAttributeType.OwnAttribute})}setEntitySchema(e){return this._dataSchema.dataSourceConfig={type:"crt.EntityDataSource",config:{entitySchemaName:e.name}},this._dataSchema.name=e.name,this._dataSchema.type=l.DataSchemaType.Entity,this._dataSchema.primaryAttributeName=e.getPrimaryColumn()?.name,this._dataSchema.primaryDisplayAttributeName=e.getPrimaryDisplayColumn()?.name,this._dataSchema.primaryColorAttributeName=e.getPrimaryColorColumn()?.name,this._dataSchema.hierarchyAttributeName=e.getHierarchyColumn()?.name,this._dataSchema.caption=e.caption,this._dataSchema.attributes=[],e.columns.forEach(t=>{this.addOwnAttribute(t)}),this}setDataSchemaConfig(e){this._dataSchema.name=e.name,this._dataSchema.type=e.type,this._dataSchema.caption="string"==typeof e.caption?e.caption:{...e.caption},this._dataSchema.primaryAttributeName=e.primaryAttributeName,this._dataSchema.primaryDisplayAttributeName=e.primaryDisplayAttributeName,this._dataSchema.dataSourceConfig={...e.dataSourceConfig,config:{...e.dataSourceConfig?.config}};const t=e.attributes||[];return this._dataSchema.attributes=t.map(i=>this._createDataSchemaAttributeByConfig(i)),this}build(){return this._dataSchema.clone()}}var by;!function(a){a[a.None=0]="None",a[a.Self=1]="Self",a[a.ExplicitEntry=2]="ExplicitEntry",a[a.Delegated=4]="Delegated",a[a.FuncRoleFromOrgRole=8]="FuncRoleFromOrgRole",a[a.UpHierarchy=16]="UpHierarchy",a[a.AsManager=32]="AsManager",a[a.All=63]="All"}(by||(by={}));var vy=f(40824);class DP extends Cy{get entitySchemaName(){return this._entitySchemaName}constructor(e,t){super(e,`Entity schema with name '${t}' not found.`),this._entitySchemaName=t}}class MP extends Cy{constructor(e){super(e,`Entity schema name for data source ${e.dataSourceName} is not provided`)}}class wP{constructor(e){this._dataSchemaRepository=e}_getDataSchema(e){var t=this;return(0,_.Z)(function*(){const i=yield(0,u.firstValueFrom)(t._dataSchemaRepository.get(e));if(!i)throw new Error(`Can not find DataSchema with name '${e}'`);return i})()}_getDataSchemaAttribute(e,t){var i=this;return(0,_.Z)(function*(){const r=e instanceof Vr?e:yield i._getDataSchema(e),s=r.findAttributeByName(t);if(!s)throw new Error(`Can not find column '${t}' in Schema '${r.name}'`);return s})()}_getDataSchemaPrimaryAttribute(e){var t=this;return(0,_.Z)(function*(){const i=yield t._getDataSchema(e);return t._getDataSchemaAttribute(i,i.primaryAttributeName)})()}_createRelationPathItemFromForwardPathItem(e,t){var i=this;return(0,_.Z)(function*(){const r=yield i._getDataSchemaAttribute(e,t);let s=null,o=null;const c=r.dataValueType===l.DataValueType.Lookup;return c&&(s=r.referenceSchemaName,o=(yield i._getDataSchema(s)).primaryAttributeName),{isJoin:c,referenceSchemaName:s,referenceAttributeName:o,ownSchemaAttributeName:t,ownSchemaName:e}})()}_createRelationPathItemFromJoinPathItem(e,t,i,r){var s=this;return(0,_.Z)(function*(){const o=i?yield s._getDataSchemaAttribute(t,i):yield s._getDataSchemaPrimaryAttribute(t);return{isJoin:!0,referenceSchemaName:t,referenceAttributeName:o.name,ownSchemaAttributeName:r,ownSchemaName:e}})()}_createRelationPathItem(e,t){const r=/(?<joinType>.*)\[(?<refSchema>.*?):(?<ownColumn>.*?)(?::(?<refColumn>.*))?]/.exec(t);if(r){const s=r.groups;return this._createRelationPathItemFromJoinPathItem(e,s.refSchema,s.refColumn,s.ownColumn)}return this._createRelationPathItemFromForwardPathItem(e,t)}_getReverseRelationPath(e){const t=[...e],i=[];let r;for(;null!=(r=t.pop());)i.push({isJoin:!0,ownSchemaName:r.referenceSchemaName,ownSchemaAttributeName:r.referenceAttributeName,referenceSchemaName:r.ownSchemaName,referenceAttributeName:r.ownSchemaAttributeName});return i}_buildRelationPath(e,t){var i=this;return(0,_.Z)(function*(){const r=t.split("."),s=[];let o=e;for(const c of r){const d=yield i._createRelationPathItem(o,c);o=d.referenceSchemaName,s.push(d)}return s})()}_getRelationPathToSourceSchema(e,t){const i=[...e],r=i.pop(),s=t.split("."),o={isJoin:!0,ownSchemaName:r.isJoin?r.referenceSchemaName:r.ownSchemaName,ownSchemaAttributeName:r.isJoin?r.referenceAttributeName:r.ownSchemaAttributeName,referenceSchemaName:null,referenceAttributeName:s.pop()};return[...i,...r.isJoin?[r]:[],o]}_buildRelationDataFromPath(e){return e.map(t=>({attributeName:t.ownSchemaAttributeName,referenceAttributeName:t.referenceAttributeName,referenceSchemaName:t.referenceSchemaName}))}_getDataSourceParameterRelationData(e){var t=this;return(0,_.Z)(function*(){const i=yield t._buildRelationPath(e.dataSchemaName,e.relationPath),r=t._getRelationPathToSourceSchema(i,e.attributePath),s=t._getReverseRelationPath(r);return t._buildRelationDataFromPath(s)})()}_convertEntityDataSourceParameter(e){var t=this;return(0,_.Z)(function*(){if(!e.relationsConfigs||0===e.relationsConfigs.length)return e;const i=[];for(const r of e.relationsConfigs){const s=yield t._getDataSourceParameterRelationData(r);i.push({...r,relationData:s})}return{...e,relationsConfigs:i}})()}convert(e,t=!1){return 0===e.length?Promise.resolve([]):t?Promise.resolve(e):Promise.all(e.map(i=>this._convertEntityDataSourceParameter(i)))}}class xP{_getExpressionColumnPath(e,t){const r=e.relationData.map(p=>Z.Ld.format("[{referenceSchemaName}:{referenceAttributeName}:{attributeName}]",p)).join("."),s=e.attributePath.split("."),o=s.length>1?"{ownColumnPath}.{relationString}.{columnPath}":"{relationString}.{columnPath}";s.pop();const d={ownColumnPath:s.join("."),relationString:r,columnPath:t};return Z.Ld.format(o,d)}_updateFilterLeftExpression(e,t){switch(e.expressionType){case l.ExpressionType.SchemaColumn:case l.ExpressionType.SubQuery:e.columnPath=this._getExpressionColumnPath(t,e.columnPath);break;case l.ExpressionType.Function:e.functionType!==l.FunctionType.Macros&&this._updateFilterLeftExpression(e.functionArgument,t)}}_updateRelatedFilterGroup(e,t){e instanceof l.FilterGroup?this._updateRelatedFilterGroupInstance(e,t):this._updateRelatedFilterGroupObject(e,t)}_updateRelatedFilterGroupObject(e,t){Object.values(e.items).forEach(i=>{this._updateRelatedFilter(i,t)})}_updateRelatedFilterGroupInstance(e,t){e.filters.forEach(i=>this._updateRelatedFilter(i,t))}_updateRelatedFilter(e,t){if(e.filterType!==l.FilterType.FilterGroup){const i=e.leftExpression;i&&this._updateFilterLeftExpression(i,t)}else this._updateRelatedFilterGroup(e,t)}convertToRelatedFilter(e,t=[]){if(!e)return e;let i;if(e instanceof l.BaseFilter)i=e.clone();else{const r=JSON.stringify(e);i=JSON.parse(r)}return[...t].reverse().forEach(r=>{r.relationData&&0!==r.relationData.length&&this._updateRelatedFilter(i,r)}),i}}class Qn{constructor(e,t){this._entitySchemaRepository=e,this._broadcastChannelFactory=t,this._dataSchemas=new Map,this._subscribeOnChangesInDesigner()}_subscribeOnChangesInDesigner(){this._broadcastChannelFactory.createInstance("invalidate-data-schema-cache").messages$.subscribe(({schemaName:e})=>{this._removeCachedSchema(e)})}_createEntityDataSchema(e){const t=new A1;return t.setEntitySchema(e),(0,u.of)(t.build())}_getEntityDataSchema(e){return this._entitySchemaRepository.getSchemaByName(e).pipe((0,M.w)(t=>this._createEntityDataSchema(t)))}_removeCachedSchema(e){this._dataSchemas.has(e)&&(this._dataSchemas.delete(e),this._entitySchemaRepository.clearSchemaCacheByName(e))}get(e){return this._dataSchemas.has(e)?(0,u.of)(this._dataSchemas.get(e)):this._getEntityDataSchema(e).pipe((0,I.b)(t=>this._dataSchemas.set(e,t)))}getByEntitySchema(e){const t=e.name;return this._dataSchemas.has(t)?(0,u.of)(this._dataSchemas.get(t)):this._createEntityDataSchema(e).pipe((0,I.b)(i=>this._dataSchemas.set(t,i)))}}Qn.\u0275fac=function(e){return new(e||Qn)(n.\u0275\u0275inject(wn),n.\u0275\u0275inject(lo))},Qn.\u0275prov=n.\u0275\u0275defineInjectable({token:Qn,factory:Qn.\u0275fac,providedIn:"platform"});class Ur{_createPrimaryColumnValueFilter(e,t){const s=(t.relationsConfigs||[])[0]?.dataSchemaName??e;return this._dataSchemaRepository.get(s).pipe((0,u.map)(o=>{const c=new l.ColumnExpression({columnPath:o.primaryAttributeName}),d=new l.ParameterExpression({value:t.value});return new l.CompareFilter(l.ComparisonType.Equal,c,d)}))}_createColumnValueFilter(e){const t=e.value.attributePath,i=e.value.attributeValue,r=new l.ColumnExpression({columnPath:t}),s=new l.ParameterExpression({value:i}),o=new l.CompareFilter(l.ComparisonType.Equal,r,s);return(0,u.of)(o)}_createPrimaryDisplayValueFilter(e,t){const s=(t.relationsConfigs||[])[0]?.dataSchemaName??e;return this._dataSchemaRepository.get(s).pipe((0,u.map)(o=>{const c=new l.ColumnExpression({columnPath:o.primaryDisplayAttributeName}),d=new l.ParameterExpression({value:t.value});return new l.CompareFilter(t.comparisonType,c,d)}))}_createCustomFilter(e){let t={};return e.value&&(t="string"==typeof e.value?JSON.parse(e.value):e.value),(0,u.of)(t)}_createEmptyParameterFiler(e){const t=e.relationsConfigs||[];if(0===t.length)return(0,u.of)({});const i=t[0];return this._dataSchemaRepository.get(i.dataSchemaName).pipe((0,u.map)(r=>r.primaryAttributeName),(0,u.map)(r=>{const s=new l.ColumnExpression({columnPath:r});return new l.ExistsFilter(s,null)}))}_createEsqFilter(e,t){switch(t.type){case l.ModelParameterType.PrimaryColumnValue:return this._createPrimaryColumnValueFilter(e,t);case l.ModelParameterType.ColumnValue:return this._createColumnValueFilter(t);case l.ModelParameterType.PrimaryDisplayValueFilter:return this._createPrimaryDisplayValueFilter(e,t);case l.ModelParameterType.Filter:return this._createCustomFilter(t);case l.ModelParameterType.Empty:return this._createEmptyParameterFiler(t)}}constructor(e){this._dataSchemaRepository=e}applyParameters(e,t){if(0===e.length)return(0,u.of)(t);const i=e.map(r=>this._createEsqFilter(t.rootSchemaName,r).pipe((0,u.map)(s=>(new xP).convertToRelatedFilter(s,r.relationsConfigs))));return(0,u.forkJoin)(i).pipe((0,u.tap)(r=>{r.forEach(s=>{(0,O.Z)(s)||t.filters.add(s)})}),(0,u.map)(()=>t))}convertToEntityDataSourceParameters(e,t=!1){const i=new wP(this._dataSchemaRepository);return(0,u.from)(i.convert(e,t))}}Ur.\u0275fac=function(e){return new(e||Ur)(n.\u0275\u0275inject(Qn))},Ur.\u0275prov=n.\u0275\u0275defineInjectable({token:Ur,factory:Ur.\u0275fac,providedIn:"root"});const R1=new n.InjectionToken("A factory of data schema to data source attribute converter"),k1=new n.InjectionToken("A factory of entity schema column appender");class Gr{constructor(e,t,i){this.entitySchemaQueryUtils=e,this._entitySchemaColumnAppenderFactory=t,this._dataSchemaToDataSourceAttributeConverter=i}_addPagingToEsq(e,t){t&&(e.rowsOffset=t.rowsOffset,e.rowCount=t.rowCount)}_addSortingToEsq(e,t){t&&t.columns.forEach((i,r)=>{const s=e.findColumn(i.columnName),o=function r2(a){switch(a){case"asc":return l.OrderDirection.Asc;case"desc":return l.OrderDirection.Desc;default:return l.OrderDirection.None}}(i.direction);s?s.withOrdering(o,r):e.addSchemaColumn(i.columnName).withOrdering(o,r)})}_addColumnToEsq(e,t){t.filter(Boolean).forEach(i=>{this._entitySchemaColumnAppenderFactory.create(i).addColumn(e,i)})}_prepareAttributePairsForLoad(e,t){return t.map(i=>{if("string"==typeof i){const r=i,s=e.attributes.find(o=>o.name===r);return s?this._dataSchemaToDataSourceAttributeConverter.create(s.attributeType).convert(s):{name:r,path:r}}return i})}build(e,t,i,r){if(i.some(s=>s.type===l.ModelParameterType.Never))throw new Error('Failed to build entity schema query: parameters contains "Never" model parameter.');return(0,u.forkJoin)([this.entitySchemaQueryUtils.convertToEntityDataSourceParameters(i),(0,u.of)(this._prepareAttributePairsForLoad(e,t))]).pipe((0,u.map)(([s,o])=>({esq:new l.EntitySchemaQuery(e.name),esqParameters:s,dataSourceAttributes:o})),(0,u.tap)(({esq:s,dataSourceAttributes:o})=>this._addColumnToEsq(s,o)),(0,u.tap)(({esq:s})=>this._addSortingToEsq(s,r?.sortingConfig)),(0,u.tap)(({esq:s})=>this._addPagingToEsq(s,r?.pagingConfig)),(0,u.switchMap)(({esq:s,esqParameters:o})=>this.entitySchemaQueryUtils.applyParameters(o,s)))}}Gr.\u0275fac=function(e){return new(e||Gr)(n.\u0275\u0275inject(Ur),n.\u0275\u0275inject(k1),n.\u0275\u0275inject(R1))},Gr.\u0275prov=n.\u0275\u0275defineInjectable({token:Gr,factory:Gr.\u0275fac,providedIn:"root"});const Iy=a=>{switch(a){case l.DataValueType.Guid:return l.DataValueType.Guid;case l.DataValueType.Text:case l.DataValueType.SHORT_TEXT:case l.DataValueType.PHONE_TEXT:case l.DataValueType.WEB_TEXT:case l.DataValueType.EMAIL_TEXT:case l.DataValueType.MEDIUM_TEXT:case l.DataValueType.MAXSIZE_TEXT:case l.DataValueType.LONG_TEXT:case l.DataValueType.HASH_TEXT:case l.DataValueType.SECURE_TEXT:case l.DataValueType.RICH_TEXT:return l.DataValueType.Text;case l.DataValueType.Integer:case l.DataValueType.Enum:return l.DataValueType.Integer;case l.DataValueType.Float:case l.DataValueType.FLOAT1:case l.DataValueType.FLOAT2:case l.DataValueType.FLOAT3:case l.DataValueType.FLOAT4:case l.DataValueType.FLOAT8:case l.DataValueType.Money:return l.DataValueType.Float;case l.DataValueType.DateTime:case l.DataValueType.Date:case l.DataValueType.Time:return l.DataValueType.DateTime;case l.DataValueType.Lookup:case l.DataValueType.IMAGELOOKUP:return l.DataValueType.Lookup;case l.DataValueType.Boolean:return l.DataValueType.Boolean;case l.DataValueType.Blob:return l.DataValueType.Blob;case l.DataValueType.Image:return l.DataValueType.Image;case l.DataValueType.Color:return l.DataValueType.Color;default:throw new Error(`Type ${a} not implemented`)}};class Dy extends Sy{constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this._affectedAttributes=[],this._errorReferenceAttributes=[],this.type=ub,this._featureValues=t.get(te),this._queryExecutor=t.get(me),this._entitySchemaService=t.get(Ke),this._httpClient=this.injector.get(D.HttpClient),this._rightsService=this.injector.get(mt),this.dataSchemaRepository=this.injector.get(Qn),this._entitySchemaRepository=this.injector.get(wn),this._entitySchemaQueryBuilder=this.injector.get(Gr),this._entitySchemaQueryUtils=this.injector.get(Ur),this._window=this.injector.get(se),this._measurePerformanceService=this.injector.get(le);const i=this.injector.get(Q);this._entityDefaultValuesUrl=i.isSSP?"/ssp/rest/EntitySchemaService/GetEntityDefaultValues":"/rest/EntitySchemaService/GetEntityDefaultValues"}_buildSelectEsq(e,t,i){return this.getSchema().pipe((0,M.w)(r=>this._entitySchemaQueryBuilder.build(r,e,t,i)),(0,h.U)(r=>(!0!==this._featureValues["DataSource-DisableRecordDeactivation"]&&(r.useRecordDeactivation=this.initialConfig.useRecordDeactivation),r.adminUnitRoleSources=this._getEsqAdminUnitRoleSources(),r)))}_getEsqAdminUnitRoleSources(){let e;const t=this.initialConfig.adminUnitRoleSources;return(0,vy.Z)(t)?t:((0,he.Z)(t)&&t.forEach(i=>{const r=by[i];(0,vy.Z)(r)&&(e|=r)}),e)}_normalizeValue(e,t){switch(t){case l.DataValueType.Lookup:return e||null;case l.DataValueType.Date:case l.DataValueType.Time:case l.DataValueType.DateTime:return e instanceof Date?(0,l.encodeDate)(e):"string"==typeof e&&Date.parse(e)>0?`"${e}"`:e;default:return e}}_buildUpdateEsq(e,t){return this._entitySchemaQueryUtils.convertToEntityDataSourceParameters(e,!0).pipe((0,h.U)(i=>({updateQuery:new l.UpdateQuery(this._entitySchemaName),esqParameters:i})),(0,I.b)(({updateQuery:i})=>{i.isForceUpdate=!!this.initialConfig.isForceUpdate,Object.keys(t).forEach(r=>{const s=this._findEntitySchemaColumn(r);if(!s)throw new Error(`Column ${r} not found`);const o=t[r];this._isEntityColumnValue(o)&&i.addColumn(s.name,this._normalizeValue(o,s.dataValueType),Iy(s.dataValueType))})}),(0,M.w)(({updateQuery:i,esqParameters:r})=>this._entitySchemaQueryUtils.applyParameters(r,i)),(0,G.K)(i=>(0,u.throwError)(()=>i)))}_buildInsertEsq(e){const t=new l.InsertQuery(this._entitySchemaName);return Object.keys(e).forEach(i=>{const r=this._findEntitySchemaColumn(i);if(!r)throw new Error(`Column ${i} not found`);const s=e[i];this._isEntityColumnValue(s)&&t.addColumn(r.name,this._normalizeValue(s,r.dataValueType),Iy(r.dataValueType))}),t}_buildDeleteEsq(e){return this._entitySchemaQueryUtils.convertToEntityDataSourceParameters(e,!0).pipe((0,M.w)(t=>{const i=new l.DeleteQuery(this._entitySchemaName);return this._entitySchemaQueryUtils.applyParameters(t,i)}))}_checkOwnAttributes(e){return this.getSchema().pipe((0,M.w)(t=>{const i=t.attributes.filter(r=>r.attributeType!==l.DataSchemaAttributeType.OwnAttribute).filter(r=>!(0,Dt.Z)(e[r.name]));return 0!==i.length?(0,u.throwError)(()=>new Error(`Not valid attributes for this data source: ${i.map(r=>r.name).join(",")}`)):(0,u.of)(null)}))}_findEntitySchemaColumn(e){return this._entitySchema.columns.find(t=>t.name===e)}_isEntityColumnValue(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"bigint"==typeof e||e instanceof Date||"object"==typeof(i=e)&&(null===i||"value"in i&&"displayValue"in i);var i}_parseDefaultValues(e,t){const i=new Map(e.attributes.map(r=>[r.name,r.dataValueType]));return t.reduce((r,s)=>{const{defaultValue:o,name:c}=s;if((0,Un.Z)(o.value))return r;if(o.displayValue)return{...r,[c]:o};const d=w_(o.value,i.get(c));return{...r,[c]:d}},{})}_getDefaultValues(e){const t=`${this._entityDefaultValuesUrl}?entityName=${e}`;return this._httpClient.get(t).pipe((0,G.K)(i=>this._catchErrorResponse(i)),(0,h.U)(i=>i.GetEntityDefaultValuesResult),(0,B.z)(i=>this.getSchema().pipe((0,I.b)(r=>{let s=this._window.defaultValueStorage;const o=i?.find(c=>c.name===r.primaryAttributeName)?.defaultValue?.value;if(s=s||{},o){s[`${e}_${o}`]=i,this._window.defaultValueStorage=s}}),(0,h.U)(r=>this._parseDefaultValues(r,i)))))}_catchErrorResponse(e){return console.log(e),(0,u.of)({GetEntityDefaultValuesResult:[]})}_requestEntitySchemaColumnsInfo(e){const t=e.map(i=>i.attributePath);return this._entitySchemaService.getEntitySchemaColumnsInformationByPathsArray(this._entitySchema.uId,t).pipe((0,h.U)(i=>e.map(r=>({column:i[r.attributePath],config:r}))))}_getEntitySchemaForwardReferenceColumnsInfo(e){const t={name:this._entitySchemaName,loadLookupColumns:!1,forwardReferencePaths:e.map(i=>i.attributePath)};return this._entitySchemaRepository.getSchemes([t]).pipe((0,h.U)(()=>e.map(i=>{const r=i.attributePath.split("."),s=this._entitySchemaRepository.findEntitySchemaColumnByPath(this._entitySchemaName,r);return{column:new Qf(s),config:i}})))}_createReferenceAttributes(e,t){return 0===t.length?(0,u.of)(e):(0,u.of)(this._featureValues["DataSource-DontUseOneRequestForEntitySchemes"]).pipe((0,M.w)(i=>i?this._requestEntitySchemaColumnsInfo(t):this._getEntitySchemaForwardReferenceColumnsInfo(t))).pipe((0,I.b)(i=>{i.forEach(({column:r,config:s})=>{s.attributeType===l.DataSchemaAttributeType.AggregationAttribute&&s.aggregationConfig?.aggregationFunction===l.AggregationFunction.Count&&(r.dataValueType=l.DataValueType.Integer),e.addAttribute(r,s)})}),(0,h.U)(()=>e))}_createAttributesFromInitialConfig(e,t={}){const i=[];return Object.entries(t).forEach(([r,s])=>{const o=s;o.type===l.DataSchemaAttributeType.ForwardReferenceAttribute&&i.push({attributeName:r,attributeType:l.DataSchemaAttributeType.ForwardReferenceAttribute,attributePath:o.path}),o.type===l.DataSchemaAttributeType.AggregationAttribute&&i.push({attributeName:r,attributeType:l.DataSchemaAttributeType.AggregationAttribute,attributePath:o.path,aggregationConfig:o.aggregationConfig}),o.type===l.DataSchemaAttributeType.FunctionAttribute&&i.push({attributeName:r,attributeType:l.DataSchemaAttributeType.FunctionAttribute,attributePath:o.path,functionConfig:o.functionConfig})}),this._createReferenceAttributes(e,i).pipe((0,G.K)(r=>{const s=r.message&&r.toString(),o=new yP(this,s);return this._errors.push(o),i.forEach(c=>{this._errorReferenceAttributes.push(c)}),(0,u.of)(e)}))}_shouldSkipLoad(e){return e.some(t=>t.type===l.ModelParameterType.Never)}_setValidValuesForLookupAttributes(e,t){return Object.keys(t).forEach(i=>{const r=e.attributes.find(s=>s.name===i);r&&(r.dataValueType===l.DataValueType.Lookup||r.dataValueType===l.DataValueType.IMAGELOOKUP)&&""===t[i]&&(t[i]=null)}),t}_throwErrorResponse(e){const t="string"==typeof e?e:e?.message;return(0,u.throwError)(()=>({success:!1,rowsAffected:0,errorInfo:t}))}_mapOperationResult(e){return{success:1===e.rowsAffected,rowsAffected:e.rowsAffected}}get affectedAttributes(){return[...this._affectedAttributes]}get isAggregate(){return!!this.dataSchema&&this.dataSchema.attributes.some(t=>t.isAggregate)}_getIsAffectedAttributeStored(e){return this._affectedAttributes.some(t=>t.path===e.path&&t.schemaName===e.schemaName)}_collectUsedAttributes(e){let t=e._getUsedColumns();t=t.filter(i=>!this._getIsAffectedAttributeStored(i)),this._affectedAttributes.push(...t)}_findErrorReferenceAttribute(e){const t="string"==typeof e?e:e.name;return this._errorReferenceAttributes.find(i=>i.attributeName===t)}innerLoad(e,t,i){if(this.hasErrors){if(this.hasCriticalErrors)return(0,u.throwError)(()=>this.getLastError());if(0!==e.length&&e.every(s=>null!=this._findErrorReferenceAttribute(s)))return(0,u.throwError)(()=>this.getLastError())}return this._shouldSkipLoad(t)?(0,u.of)([]):this._buildSelectEsq(e,t,i||{}).pipe((0,I.b)(r=>this._collectUsedAttributes(r)),(0,M.w)(r=>this._queryExecutor.executeSelectQuery(r,{throttled:i?.throttled}).pipe(this._measurePerformanceService.measure$(`EntityDataSource.load.executeSelectQuery.${this.dataSourceName}`))),(0,h.U)(r=>r),(0,B.z)(r=>this.getSchema().pipe((0,h.U)(s=>(s.attributes&&r.forEach(o=>{this._setValidValuesForLookupAttributes(s,o)}),r)))))}innerSave(e,t){return this.hasCriticalErrors?(0,u.throwError)(()=>this.getLastError()):this._checkOwnAttributes(t).pipe((0,M.w)(()=>this._buildUpdateEsq(e,t)),(0,M.w)(i=>this._queryExecutor.executeUpdateQuery(i)),(0,h.U)(i=>this._mapOperationResult(i)),(0,G.K)(i=>this._throwErrorResponse(i)))}innerInsert(e){return this.hasCriticalErrors?(0,u.throwError)(()=>this.getLastError()):this._checkOwnAttributes(e).pipe((0,h.U)(()=>this._buildInsertEsq(e)),(0,M.w)(t=>(0,u.forkJoin)({response:this._queryExecutor.executeInsertQuery(t),dataSchema:this.getSchema()})),(0,h.U)(({response:t,dataSchema:i})=>({...this._mapOperationResult(t),primaryAttributes:[{[i.primaryAttributeName]:t.id}]})),(0,G.K)(t=>this._throwErrorResponse(t)))}innerDelete(e){return this.hasCriticalErrors?(0,u.throwError)(()=>this.getLastError()):this._buildDeleteEsq(e).pipe((0,M.w)(t=>this._queryExecutor.executeDeleteQuery(t)),(0,h.U)(t=>this._mapOperationResult(t)),(0,G.K)(t=>this._throwErrorResponse(t)))}innerGetSchema(){return this.hasCriticalErrors?(0,u.throwError)(()=>this.getLastError()):this.dataSchemaRepository.get(this._entitySchemaName).pipe((0,h.U)(e=>new A1(e)),(0,M.w)(e=>this._createAttributesFromInitialConfig(e,this.initialConfig.attributes)),(0,I.b)(e=>{const t=this._getDefaultValues(this._entitySchemaName).pipe((0,_i.d)({bufferSize:1,refCount:!0}));e.setAttributesDefaultValue(t)}),(0,h.U)(e=>e.build()))}innerGetLookupDataSchema(e){if(this.hasCriticalErrors)return(0,u.throwError)(()=>this.getLastError());const i=e.split(".")[0],r=this._findEntitySchemaColumn(i);return r?r.dataValueType!==l.DataValueType.Lookup?(0,u.throwError)(()=>new Error(`DataValueType for column '${i}' isn't lookup`)):r.referenceSchemaName?this.dataSchemaRepository.get(r.referenceSchemaName):(0,u.throwError)(()=>new Error(`referenceSchemaName for column '${i}' is absent`)):(0,u.throwError)(()=>new Error(`Can't find column with name '${i}'`))}innerGetDefaultValues(){return this.hasCriticalErrors?(0,u.throwError)(()=>this.getLastError()):this._getDefaultValues(this._entitySchemaName)}innerCanDelete(e){return this.hasCriticalErrors?(0,u.of)({result:!1}):this._rightsService.getCanDelete({schemaName:this.initialConfig.entitySchemaName,primaryColumnValue:e.primaryColumnValue})}innerCanCreate(e){if(this.hasCriticalErrors)return(0,u.of)({result:!1});const t={isNew:!0,schemaName:this.initialConfig.entitySchemaName};return this._rightsService.getCanEdit(t)}innerCanEdit(e){if(this.hasCriticalErrors)return(0,u.of)({result:!1});const t={primaryColumnValue:e.primaryColumnValue,isNew:!1,schemaName:this.initialConfig.entitySchemaName};return this._rightsService.getCanEdit(t)}getEmptySchema(){return this._entitySchemaName?new Vr({name:this._entitySchemaName}):super.getEmptySchema()}init(e,t){return super.init(e,t).pipe((0,B.z)(i=>{if(!this.initialConfig.entitySchemaName){const r=new MP(this);return this._errors.push(r),(0,u.throwError)(()=>r)}return(0,u.of)(i)}),(0,I.b)(()=>this._entitySchemaName=this.initialConfig.entitySchemaName),(0,B.z)(i=>this._entitySchemaRepository.getSchemaByName(this.initialConfig.entitySchemaName).pipe((0,I.b)(r=>this._entitySchema=r),(0,G.K)(()=>{this._entitySchema=new qS,this._entitySchema.name=this._entitySchemaName,this._entitySchema.columns=[];const r=new DP(this,this._entitySchemaName);return this._errors.push(r),(0,u.throwError)(()=>r)}),(0,h.U)(()=>i))))}}class TP extends Dy{constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this.type="crt.CopilotActionDataSource",this._intentManager=this.injector.get(Fr)}_getActionUId(e){return e.filter(i=>i.type===l.ModelParameterType.PrimaryColumnValue)[0]?.value}innerDelete(e){return(0,u.of)(void 0)}innerInsert(e){const t=e;return(0,u.forkJoin)([this._intentManager.createAction(t),this.getSchema()]).pipe((0,u.map)(([i,r])=>({success:i.success,rowsAffected:1,errorInfo:i.errorInfo?.message,primaryAttributes:[{[r.primaryAttributeName]:t.Id}]})))}innerLoad(e,t,i){const r=this._getActionUId(t);return r?this._intentManager.getActionByUId(r).pipe((0,u.map)(s=>[s])):(0,u.of)([])}innerSave(e,t){const i=this._getActionUId(e),r=t;return r.Id=i,this._intentManager.updateAction(r).pipe((0,u.map)(s=>({success:s.success,rowsAffected:1,errorInfo:s.errorInfo?.message})))}}class My{convert(e){const{name:t,path:i,caption:r,dataValueType:s}=e||{};return{name:t,path:i||t,caption:r,dataValueType:s}}}class zr extends My{convert(e){const{aggregationConfig:t}=e||{};return{...super.convert(e),type:"aggregation",aggregationConfig:{filter:t?.filter,aggregationFunction:t?.aggregationFunction,sortByColumn:t?.sortByColumn,sortByDirection:t?.sortByDirection}}}}zr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(zr)))(t||zr)}}(),zr.\u0275prov=n.\u0275\u0275defineInjectable({token:zr,factory:zr.\u0275fac,providedIn:"root"});class Hr extends My{convert(e){return{...super.convert(e),type:"default"}}}Hr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Hr)))(t||Hr)}}(),Hr.\u0275prov=n.\u0275\u0275defineInjectable({token:Hr,factory:Hr.\u0275fac,providedIn:"root"});class Zr extends My{convert(e){const{functionConfig:t}=e||{};return{...super.convert(e),type:"function",functionConfig:t}}}Zr.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Zr)))(t||Zr)}}(),Zr.\u0275prov=n.\u0275\u0275defineInjectable({token:Zr,factory:Zr.\u0275fac,providedIn:"root"});const N1="PrimaryValue",V1="DisplayValue";class Pl{constructor(e){this._queryExecutor=e}_getInFilter(e){const t=new l.MacrosFunctionExpression({macrosType:l.QueryMacrosType.PrimaryColumn});return new l.InFilter(l.ComparisonType.Equal,t,e.map(i=>new l.ParameterExpression({value:i})))}_getEsq(e,t){const i=new l.EntitySchemaQuery(e);i.addMacrosFunctionColumn(l.QueryMacrosType.PrimaryColumn,N1),i.addMacrosFunctionColumn(l.QueryMacrosType.PrimaryDisplayColumn,V1);const r=this._getInFilter(t);return i.filters.add(r),i}_getSchemaLookupData(e,t){const i={};for(let r=0;r<t.length;r++){const s=t[r],[o,c]=e[r];i[o]={};for(const d of c){const p=s.find(g=>g[N1]===d);i[o][d]=p?p[V1]:null}}return i}load(e){const t=Object.entries(e),i=t.map(([r,s])=>this._getEsq(r,s));return this._queryExecutor.executeBatchSelectQuery(i).pipe((0,h.U)(r=>this._getSchemaLookupData(t,r)))}}Pl.\u0275fac=function(e){return new(e||Pl)(n.\u0275\u0275inject(me))},Pl.\u0275prov=n.\u0275\u0275defineInjectable({token:Pl,factory:Pl.\u0275fac,providedIn:"root"});class Al{constructor(e){this._intentStatusReferenceName="CopilotIntentStatus",this._intentStatuses=new Map([["InDevelopment","4670b068-ad03-4364-9350-6cc61efd1b7f"],["Active","1d73b111-07a9-49e2-aa15-c9415cce7470"],["Deactivated","2c547e71-7a05-42e1-8b65-2bf63f200156"]]),this._columnLookupValuesService=e.get(ko)}convertToDataSourceModel(e){return this._columnLookupValuesService.getColumnLookupValues(this._intentStatusReferenceName).pipe((0,u.map)(t=>{const i=this._intentStatuses.get(e.Status),r=t.find(s=>s.value===i);return{Id:e.UId,Code:e.Code,Description:e.Description,Prompt:e.Prompt,Name:e.Title,Status:r}}))}convertToModel(e){const t={};return Object.entries(e).forEach(([i,r])=>{"Name"===i&&(i="Title"),"Id"===i&&(i="UId"),"Status"===i&&(r=[...this._intentStatuses].filter(([,s])=>s===e.Status.value).map(([s])=>s).shift()),t[i]=r}),t}}Al.\u0275fac=function(e){return new(e||Al)(n.\u0275\u0275inject(n.Injector))},Al.\u0275prov=n.\u0275\u0275defineInjectable({token:Al,factory:Al.\u0275fac,providedIn:"root"});class PP extends Dy{constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this.type="crt.CopilotIntentDataSource",this._intentManager=this.injector.get(Fr),this._copilotIntentDataSourceModelConvertor=this.injector.get(Al)}innerGetDefaultValues(){return this._copilotIntentDataSourceModelConvertor.convertToDataSourceModel({UId:(0,l.generateGuid)(),Status:"InDevelopment"})}innerInsert(e){const t=this._copilotIntentDataSourceModelConvertor.convertToModel({...e});return(0,u.forkJoin)([this._intentManager.createIntent(t),this.getSchema()]).pipe((0,u.map)(([i,r])=>({success:i.success,rowsAffected:1,errorInfo:i.errorInfo?.message,primaryAttributes:[{[r.primaryAttributeName]:i.schemaUid}]})))}innerLoad(e,t,i){const r=t.filter(s=>s.type===l.ModelParameterType.PrimaryColumnValue);if(r.length)return this._intentManager.getIntent(r[0].value).pipe((0,M.w)(s=>this._copilotIntentDataSourceModelConvertor.convertToDataSourceModel(s).pipe((0,u.map)(o=>[o]))))}innerSave(e,t){const r=e.filter(o=>o.type===l.ModelParameterType.PrimaryColumnValue)[0].value,s=this._copilotIntentDataSourceModelConvertor.convertToModel({...t});return s.UId=r,this._intentManager.updateIntent(s).pipe((0,u.map)(o=>({success:o.success,rowsAffected:1,errorInfo:o.errorInfo?.message})))}}const wy=window;class Rl{constructor(){this._event$=new u.Subject}static get instance(){return wy.__modelEventNotificationService||(wy.__modelEventNotificationService=new Rl),wy.__modelEventNotificationService}get event$(){return this._event$.asObservable()}notify(e){this._event$.next(e)}}class kl{constructor(){this.changedValues$=new u.Subject,this._valuesStore={}}setValues(e){if(e){const t={};Object.entries(e).forEach(([i,r])=>{const s=this._valuesStore[i]!==r;this._valuesStore[i]=(0,q.Z)(r),s&&(t[i]=this._valuesStore[i])}),(0,O.Z)(t)||this.changedValues$.next(t)}}get values(){return this._valuesStore}}kl.\u0275fac=function(e){return new(e||kl)},kl.\u0275prov=n.\u0275\u0275defineInjectable({token:kl,factory:kl.\u0275fac});class AP extends Sy{constructor(e,t){super(e,t),this.dataSourceName=e,this._injector=t,this.type=Rh,this._schemaParametersStore=this._injector.get(kl),this._lookupDataLoadService=this._injector.get(Pl),this._featureValues=this._injector.get(te),this._featureValues.DisableCommunicationBetweenSchemas||this._subscribeParametersChanged()}_subscribeParametersChanged(){this._schemaParametersStore.changedValues$.subscribe(e=>{Rl.instance.notify({modelId:(0,l.generateGuid)(),dataSchemaName:this.dataSchema.name,type:nt.Update,payload:{primaryAttributesValues:null,changedAttributes:Object.keys(e)}})})}_getCanSuccessfullyExecuteOperationResult(){return(0,u.of)({result:!0})}_fillLookupValues(e,t,i){Object.entries(i).forEach(([r,s])=>{(t[r]||[]).forEach(c=>{e[c]={value:r,displayValue:s}})})}_fillSchemaParameterValueNameMap(e,t,i,r){const s=r;let o=e[t];o||(o={},e[t]=o);let c=o[s];c||(c=[],o[s]=c),c.push(i)}_fillSchemaNamePrimaryValuesMap(e,t,i){const r=i;let s=e[t];s||(s=[],e[t]=s),s.push(r)}_isLookupValue(e){return Boolean(e?.value)}_shouldFillSchemaLookupValueMaps(e,t){return e&&t&&t.referenceSchemaName&&!this._isLookupValue(e)}_load(e,t){const i={},r=this._schemaParametersStore.values,s=t.attributes,o={},c={};for(const p of e){const g=r[p],C=s.find(v=>v.name===p);this._shouldFillSchemaLookupValueMaps(g,C)?(this._fillSchemaNamePrimaryValuesMap(c,C.referenceSchemaName,g),this._fillSchemaParameterValueNameMap(o,C.referenceSchemaName,p,g)):i[p]=g??null}return 0===Object.keys(c).length?(0,u.of)([i]):this._lookupDataLoadService.load(c).pipe((0,u.map)(p=>{for(const[g,C]of Object.entries(p)){const v=o[g];this._fillLookupValues(i,v,C)}return[i]}))}_getValuesForStore(e){const t={};return Object.entries(e).forEach(([i,r])=>{const s=this.initialConfig.parameters[i];s&&(jb(s.dataValueTypeName)===l.DataValueType.Lookup?t[i]=r?.value:t[i]=r)}),t}innerLoad(e,t,i){return this.getSchema().pipe((0,u.switchMap)(r=>this._load(e,r)))}innerSave(e,t){const i=this._getValuesForStore(t);return this._schemaParametersStore.setValues(i),(0,u.of)({success:!0,rowsAffected:1})}innerInsert(e){const t=this._getValuesForStore(e);return this._schemaParametersStore.setValues(t),(0,u.of)({success:!0,rowsAffected:1,primaryAttributes:[]})}innerDelete(e){return(0,u.of)({success:!0,rowsAffected:1})}innerGetSchema(){const e=[],t=this.initialConfig.parameters;return t&&Object.entries(t).forEach(([i,r])=>{const s=new El({name:i,caption:r.caption,dataValueType:jb(r.dataValueTypeName),attributeType:l.DataSchemaAttributeType.OwnAttribute,path:i,isRequired:Boolean(r.isRequired),referenceSchemaName:r.referenceSchemaName,isMasked:!1,isFormatValidated:!0});s.addDefaultValidators(),e.push(s)}),(0,u.of)(new Vr({name:this.initialConfig.schemaName,type:l.DataSchemaType.ClientUnit,attributes:e}))}innerGetLookupDataSchema(e){return(0,u.of)(null)}innerGetDefaultValues(){return(0,u.of)({})}innerCanEdit(e){return this._getCanSuccessfullyExecuteOperationResult()}innerCanDelete(e){return this._getCanSuccessfullyExecuteOperationResult()}innerCanCreate(e){return this._getCanSuccessfullyExecuteOperationResult()}}class RP extends Sy{constructor(){super(...arguments),this.type="crt.WebServiceDataSource"}innerLoad(e,t,i){throw new Error("Method not implemented.")}innerSave(e,t){throw new Error("Method not implemented.")}innerInsert(e){throw new Error("Method not implemented.")}innerDelete(e){throw new Error("Method not implemented.")}innerGetSchema(){throw new Error("Method not implemented.")}innerGetLookupDataSchema(e){throw new Error("Method not implemented.")}innerGetDefaultValues(){throw new Error("Method not implemented.")}innerCanDelete(e){throw new Error("Method not implemented.")}innerCanEdit(e){throw new Error("Method not implemented.")}innerCanCreate(e){throw new Error("Method not implemented.")}}class qr{resolve(e){let t=null;switch(e){case ub:t=Dy;break;case Rh:t=AP;break;case"crt.WebServiceDataSource":t=RP;break;case"crt.CopilotIntentDataSource":t=PP;break;case"crt.CopilotActionDataSource":t=TP}return(0,u.of)(t)}}qr.\u0275fac=function(e){return new(e||qr)},qr.\u0275prov=n.\u0275\u0275defineInjectable({token:qr,factory:qr.\u0275fac});class pn{constructor(e,t){this.injector=e,this.resolver=t}create(e,t,i){const{type:r,scope:s,config:o}=t;return this.resolver.resolve(r).pipe((0,M.w)(d=>d?new d(e,i||this.injector).init(o,s):(0,u.throwError)(()=>new Error(`Data source type '${r}' not supported.`))),(0,G.K)(d=>d instanceof Cy?(0,u.of)(d.dataSource):(0,u.throwError)(()=>d)))}}pn.\u0275fac=function(e){return new(e||pn)(n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(qr))},pn.\u0275prov=n.\u0275\u0275defineInjectable({token:pn,factory:pn.\u0275fac});var xy=f(42921);const kP=bn.create({token:R1,mappings:[{predicate:l.DataSchemaAttributeType.AggregationAttribute,injectable:zr},{predicate:l.DataSchemaAttributeType.FunctionAttribute,injectable:Zr}],default:{injectable:Hr}}),NP=bn.create({token:k1,mappings:[{predicate:a=>"aggregation"===a.type,injectable:Lr},{predicate:a=>"function"===a.type&&"aggregation"===a.functionConfig?.type,injectable:jr},{predicate:a=>"function"===a.type&&"datePart"===a.functionConfig?.type,injectable:Br}],default:{injectable:Or}}),VP={[V.Init]:[V.Create,V.Copy,V.Update,V.Delete],[V.Copy]:[V.Delete,V.Update],[V.Create]:[V.Copy,V.Delete,V.Update],[V.Delete]:[V.Copy,V.Create,V.Update,V.Init],[V.Update]:[V.Delete],[V.Unknown]:[]};function Ey(a){const e={success:!1,rowsAffected:0,errorInfo:""};return"string"==typeof a?Object.assign(e,{errorInfo:a}):a instanceof Error?Object.assign(e,{errorInfo:a.message}):Object.assign(e,"object"==typeof a?a:{errorInfo:a})}class Np{get _children(){return this._children$.value}static get instance(){return this._instance||(this._instance=new Np(null,null)),this._instance}static create(e){return(0,u.from)(this.instance._create({type:"crt.EntityDataSource",config:{entitySchemaName:e}},""))}get name(){return this.dataSource?this.dataSource.dataSourceName:""}get mode(){return this._isCollectionModel?V.Unknown:this._mode}get _modeChanges$(){return this._modeChanges.asObservable()}set _isCollection(e){this._isCollectionModel=e,this._isCollectionModel&&(this._mode=V.Unknown)}get isLoaded(){return this._isLoaded}get event$(){return Rl.instance.event$.pipe((0,P.h)(()=>this._isInitialized),(0,P.h)(()=>!this._isCollectionItemModel),(0,P.h)(({dataSchemaName:e})=>e===this._dataSchemaName),(0,I.b)(({type:e,modelId:t,payload:i})=>this._updateLoadedData(e,t,i)),(0,P.h)(({modelId:e})=>e!==this._id&&!this._isChild(e)),(0,h.U)(e=>({event:e,ownPrimaryAttributesValues:e.payload?.primaryAttributesValues?.filter(t=>{const i=Ve.serializeRecordPrimaryAttributesValues(t);return this._loadedData.has(i)})})),(0,P.h)(({event:e,ownPrimaryAttributesValues:t})=>e.type!==nt.Update&&e.type!==nt.Delete||(!t||0!==t.length)),(0,h.U)(({event:e,ownPrimaryAttributesValues:t})=>({event:e,primaryAttributesValues:e.type===nt.Create?e.payload.primaryAttributesValues:t})),(0,h.U)(({event:e,primaryAttributesValues:t})=>({modelId:e.modelId,dataSchemaName:e.dataSchemaName,type:e.type,payload:{...e.payload,primaryAttributesValues:t}})),(0,L.R)(this._destroyed$))}get dataSchemaName(){return this._dataSchemaName}get allowSync(){return!this._disableSync}get disableSync(){return this._disableSync}set disableSync(e){this._disableSync=e}get isLoading(){return this._isLoading}get hasErrors(){return!this.dataSource||this.dataSource.hasErrors}get hasCriticalErrors(){return!this.dataSource||this.dataSource.hasCriticalErrors}get affectedAttributes(){return this.dataSource?this.dataSource.affectedAttributes:[]}get isAggregate(){return!!this.dataSource&&this.dataSource.isAggregate}get isCollectionItemModel(){return this._isCollectionItemModel}get isInitialized(){return this._isInitialized}constructor(e,t){this._injector=e,this.dataSource=t,this._lookupDataSourceName="lookupDataSource",this._id=(0,l.generateGuid)(),this._modeChanges=new u.Subject,this._destroyed$=new u.Subject,this._children$=new u.BehaviorSubject([]),this._childrenDirty$=new u.BehaviorSubject(!1),this._childrenModes$=new u.BehaviorSubject([]),this._isCollectionModel=!1,this._isCollectionItemModel=!1,this._mode=V.Init,this._isInitialized=!1,this._isLoaded=!1,this._dirtyAttributes=new Set,this._newLoadingRequestArrived=new u.Subject,this._attributesMap=[],this._selfDirty$=new u.BehaviorSubject(!1),this._isLoading=!1,this._destroyed=!1,this._dirty$=(0,u.combineLatest)([this._selfDirty$,this._childrenDirty$,this._childrenModes$]).pipe((0,h.U)(([i,r,s])=>i||r||s.includes(V.Copy)||s.includes(V.Create)),(0,on.x)()),this._loadedData=new Set,this._injector&&(this._dataSourceFactory=this._injector.get(pn),this._lifecycleHookNotificationService=this._injector.get(D1,null,{optional:!0}),this._measurePerformanceService=this._injector.get(le,null,{optional:!0}))}_isChild(e){return this._children.some(t=>t?._id===e)}_subscribeChildrenModeChanges(){this._children$.pipe((0,h.U)(e=>e.map(t=>(0,u.merge)((0,u.of)(t.mode),t._modeChanges$))),(0,M.w)(e=>e?.length?(0,u.combineLatest)(e):(0,u.of)([])),(0,I.b)(e=>this._childrenModes$.next(e)),(0,L.R)(this._destroyed$)).subscribe()}_subscribeChildrenDirtyChanges(){this._children$.pipe((0,h.U)(e=>e.map(t=>t._dirty$)),(0,M.w)(e=>e?.length?(0,u.combineLatest)(e):(0,u.of)([])),(0,h.U)(e=>e.some(t=>t)),(0,I.b)(e=>this._childrenDirty$.next(e)),(0,L.R)(this._destroyed$)).subscribe()}_updateLoadedData(e,t,i){this._isCollectionModel&&e===nt.Create&&this._isChild(t)&&i.primaryAttributesValues.forEach(r=>{const s=Ve.serializeRecordPrimaryAttributesValues(r);this._loadedData.add(s)})}_setMode(e){if(this._mode===e)return;if(!VP[this._mode]?.includes(e))throw Error(`Unable to mark model with '${this._mode}' mode for '${e}'.`);const i=this._mode;this._mode=e,e===V.Delete&&this._selfDirty$.next(i!==V.Create)}_markForNotCollection(e){this._isCollectionModel||this.markFor(e)}_registerPrimaryAttributeValues(e){e.forEach(t=>{this._loadedData.add(Ve.serializeRecordPrimaryAttributesValues(t))})}_getDependentAttributesNames(e){return this._attributesMap.filter(t=>e.includes(t.name)).filter(t=>0!==t.dependentAttributes.length).map(t=>t.dependentAttributes).flat()}_getDefaultLoadAttributes(){return this.getSchema().pipe((0,h.U)(e=>e.getPrimaryLoadAttributes()))}_checkAttributesInDataSchema(e){return this.getSchema().pipe((0,I.b)(t=>{const i=e.filter(r=>null==t.findAttributeByName(r));if(i.length>0)throw new Error(`data has unknown attributes names: ${i.join(", ")}`)}))}_createDataSource(e,t,i=null){const r=i??t.dataSourceConfig;return this._dataSourceFactory.create(e,r)}_notifyEventByParameters(e,t){return this.getSchema().pipe((0,h.U)(i=>Ve.getPrimaryAttributeValuesFromParameters(i,e)),(0,B.z)(i=>this._notifyDataChange(i,t)))}_notifyDataChange(e,t){return this.getSchema().pipe((0,h.U)(i=>Ve.getModelPrimaryAttributeValues(i,e)),(0,I.b)(i=>{Rl.instance.notify({modelId:this._id,dataSchemaName:this._dataSchemaName,type:t,payload:{primaryAttributesValues:i}})}),(0,h.U)(()=>null))}_mapSaveResult(e,t,i){return this.getSchema().pipe((0,h.U)(r=>({result:e,actionType:nt.Update,data:Ve.getPrimaryAttributeValues(r,t,i)})))}_mapInsertResult(e){return{data:e.primaryAttributes??[],result:e,actionType:nt.Create}}_getLoadAttributes(e){if(e&&0!==e.length){let t=null;if(e.every(r=>(0,$_.Z)(r)))return t=this._getDependentAttributesNames(e),(0,u.of)([...e,...t]);{const r=e.map(s=>s.name);return t=this._getDependentAttributesNames(r),this.getSchema().pipe((0,h.U)(s=>(t=t.map(o=>s.findAttributeByName(o)).map(o=>({name:o.name,path:o.path,caption:o.caption,dataValueType:o.dataValueType,aggregationConfig:o.aggregationConfig})),[...e,...t])))}}return this._getDefaultLoadAttributes()}_getChangedAttributesValues(e){return this._persistedState?Object.entries({...this._persistedState,...e}).filter(([t])=>this._dirtyAttributes.has(t)).reduce((t,[i,r])=>Object.assign(t,{[i]:r}),{}):e}_load(e,t,i,r=V.Update){const s={attributes:e,parameters:t,options:i,mode:r},o=(0,q.Z)(this._lastRequestPayload),c=(0,J.Z)((0,At.Z)(s,"options.loadType"),(0,At.Z)(o,"options.loadType"));return this._loadingRequest&&c||(this._lastRequestPayload&&!c&&(this._newLoadingRequestArrived.next(null),this._newLoadingRequestArrived=new u.Subject),this._lastRequestPayload=s,this._loadingRequest=this._getLoadAttributes(e).pipe(Ea(()=>this._onBeforeLoad(s,o)),(0,M.w)(d=>this.dataSource.load(d,t,i)),(0,L.R)(this._newLoadingRequestArrived),(0,I.b)(()=>this._markForNotCollection(r)),function NM(a){return e=>e.pipe((0,B.z)((t,i)=>a(t,i).pipe((0,h.U)(r=>[t,r]))))}(()=>this.getSchema()),(0,I.b)(([d,p])=>{this._registerPrimaryAttributeValues(Ve.getModelPrimaryAttributeValues(p,d))}),(0,I.b)(()=>this._persistedState={}),(0,h.U)(([d,p])=>Ve.processImageData(p,d,e)),(0,I.b)(()=>this._isLoaded=!0),Ea(()=>this._onAfterLoad(s,o)),(0,G.K)(d=>(this._isLoaded=!1,(0,u.throwError)(()=>d))),(0,I.b)(()=>{this._markAsPristine(),this._loadingRequest=null}),(0,ee.B)())),this._loadingRequest}_updateAttributesDependencies(){this._attributesMap.forEach(t=>t.dependentAttributes=[]),this._attributesMap.filter(t=>t.attributeType!==l.DataSchemaAttributeType.OwnAttribute).forEach(t=>{const i=t.path.split(".");if(1===i.length)return;const r=i.shift();this._attributesMap.find(o=>o.path===r)?.dependentAttributes.push(t.name)})}_buildAttributesMap(e){const t=e.attributes??[];this._attributesMap=t.map(i=>({name:i.name,path:i.path,attributeType:i.attributeType,dependentAttributes:[],isSchemaAttribute:!0})),this._updateAttributesDependencies()}_loadDependentDataForCreate(e){return this.getSchema().pipe((0,h.U)(t=>t.attributes.filter(i=>i.dataValueType===l.DataValueType.Lookup).filter(i=>i.name in e).map(i=>i.name)),(0,M.w)(t=>{if(0===t.length)return(0,u.of)([]);const i=t.map(r=>this.reloadDependentData(r,e[r]));return(0,u.forkJoin)(i)}),(0,h.U)(t=>{let i={};return t.forEach(r=>{i={...i,...r[0]||{}}}),{...i,...e}}))}_getDependentAttributesInfo(e){return this.getSchema().pipe((0,h.U)(t=>e.map(i=>{const r=t.findAttributeByName(i),s=r?.path??i,o=r?.name??i,c=r?.aggregationConfig??null,d=r?.dataValueType??null,p=r?.attributeType??null,g=s.split(".");g.shift();const C=1===g.length?g[0]:o;let v;return v=p===l.DataSchemaAttributeType.AggregationAttribute?l.DataSchemaAttributeType.AggregationAttribute:1===g.length?l.DataSchemaAttributeType.OwnAttribute:l.DataSchemaAttributeType.ForwardReferenceAttribute,{alias:C,attributeName:o,config:{path:g.join("."),aggregationConfig:c,dataValueType:d,type:v},type:v}})))}_markAsPristine(){this._selfDirty$.next(!1)}_onBeforeLoad(e,t){return this._lifecycleHookNotificationService?.onBeforeLoad?(0,u.from)(this._lifecycleHookNotificationService.onBeforeLoad({model:this,payload:{attributes:e?.attributes,options:e?.options,parameters:e?.parameters},previousPayload:{attributes:t?.attributes,options:t?.options,parameters:t?.parameters}})).pipe((0,h.U)(i=>{if(!1===i)throw Error('Loading is disallowed by a "OnBeforeLoad" model lifecycle event')})):(0,u.of)(void 0)}_onAfterLoad(e,t){return this._lifecycleHookNotificationService?.onAfterLoad?(0,u.from)(this._lifecycleHookNotificationService.onAfterLoad({model:this,payload:{attributes:e?.attributes,options:e?.options,parameters:e?.parameters},previousPayload:{attributes:t?.attributes,options:t?.options,parameters:t?.parameters}})):(0,u.of)(void 0)}_onBeforeInsert(e){return this._lifecycleHookNotificationService?.onBeforeInsert?this.getSchema().pipe((0,h.U)(t=>Ve.getModelPrimaryAttributeValues(t,[e])),(0,h.U)(t=>t.pop()),(0,M.w)(t=>this._lifecycleHookNotificationService.onBeforeInsert({model:this,payload:{data:e,primaryAttributesValues:t}})),(0,h.U)(t=>{if(!1===t)throw Error('Inserting is disallowed by a "OnBeforeInsert" model lifecycle event')})):(0,u.of)(void 0)}_innerInsert(e){return this.dataSource.insert(e).pipe((0,h.U)(t=>this._mapInsertResult(t)),(0,I.b)(()=>this._persistedState={}),(0,I.b)(()=>this._markAsPristine()),(0,I.b)(()=>this._markForNotCollection(V.Update)),$f(({data:t,actionType:i})=>this._notifyDataChange(t,i)),(0,h.U)(({result:t})=>t))}_onAfterInsert(e){return this._lifecycleHookNotificationService?.onAfterInsert?(0,u.from)(this._lifecycleHookNotificationService.onAfterInsert({model:this,payload:{data:e}})):(0,u.of)(void 0)}_onBeforeUpdate(e,t){return this._lifecycleHookNotificationService?.onBeforeUpdate?(0,u.from)(this._lifecycleHookNotificationService.onBeforeUpdate({model:this,payload:{data:e,parameters:t}})).pipe((0,h.U)(i=>{if(!1===i)throw Error('Updating is disallowed by a "OnBeforeUpdate" model lifecycle event')})):(0,u.of)(void 0)}_innerUpdate(e,t){return this.dataSource.save(t,e).pipe((0,B.z)(i=>this._mapSaveResult(i,e,t)),$f(()=>this._notifyEventByParameters(t,nt.Update)),(0,h.U)(({result:i})=>i),(0,I.b)(()=>this.setLoadedState()))}_onAfterUpdate(e,t){return this._lifecycleHookNotificationService?.onAfterUpdate?(0,u.from)(this._lifecycleHookNotificationService.onAfterUpdate({model:this,payload:{data:e,parameters:t}})):(0,u.of)(void 0)}_onBeforeDelete(e){return this._lifecycleHookNotificationService?.onBeforeDelete?(0,u.from)(this._lifecycleHookNotificationService.onBeforeDelete({model:this,payload:{parameters:e}})).pipe((0,h.U)(t=>{if(!1===t)throw Error('Deleting is disallowed by a "OnBeforeDelete" model lifecycle event')})):(0,u.of)(void 0)}_innerDelete(e){return this.dataSource.delete(e).pipe((0,I.b)(()=>this._markAsPristine()),(0,I.b)(()=>this._markForNotCollection(V.Init)),$f(()=>this._notifyEventByParameters(e,nt.Delete)))}_onAfterDelete(e){return this._lifecycleHookNotificationService?.onAfterDelete?(0,u.from)(this._lifecycleHookNotificationService.onAfterDelete({model:this,payload:{parameters:e}})):(0,u.of)(void 0)}init(){return this.getSchema().pipe((0,I.b)(e=>this._dataSchemaName=e.name),(0,I.b)(e=>this._buildAttributesMap(e)),(0,h.U)(()=>this),(0,I.b)(()=>this._isInitialized=!this.hasCriticalErrors),(0,I.b)(()=>{this._subscribeChildrenModeChanges(),this._subscribeChildrenDirtyChanges()}),(0,Ee.q)(1))}getSchema(){if(!this.dataSource)return(0,u.of)(null);if(this.hasCriticalErrors)return(0,u.of)(this.dataSource.getEmptySchema());const e=this.dataSource.getSchema();return this._measurePerformanceService?e.pipe(this._measurePerformanceService.measure$(`model.getSchema.${this.name}`)):e}getDataSource(){return this.dataSource}load(e){if(this._destroyed)return(0,u.of)([]);this._isLoading=!0;const t=e?.attributes,i=e?.parameters||[],r=Ve.getDataSourceLoadOptions(e?.options);return this._load(t,i,r).pipe((0,I.b)(()=>this._isLoading=!1),(0,G.K)(s=>(this._isLoading=!1,(0,u.throwError)(()=>s))))}updateDependentAttributes(e){this._attributesMap=this._attributesMap.filter(r=>r.isSchemaAttribute);const t=this._attributesMap.map(r=>r.name),i=e.filter(r=>!t.includes(r.path)).map(r=>({name:r.path,path:r.path,attributeType:r.type??l.DataSchemaAttributeType.ForwardReferenceAttribute,dependentAttributes:[],isSchemaAttribute:!1}));this._attributesMap.push(...i),this._updateAttributesDependencies()}canReloadDependentData(e){return 0!==this._getDependentAttributesNames([e]).length}getDependentAttributesNames(e){return this._getDependentAttributesNames([e])}reloadDependentData(e,t){const i=this._getDependentAttributesNames([e]);if(0===i.length)return(0,u.of)([]);if(null==t)return(0,u.of)([Object.fromEntries(i.map(o=>[o,null]))]);const r=[{type:l.ModelParameterType.PrimaryColumnValue,value:t}],s=new Map;return(0,u.forkJoin)([this._getDependentAttributesInfo(i),this.dataSource.getLookupDataSchema(e)]).pipe((0,M.w)(([o,c])=>{const d=o.filter(g=>g.type!==l.DataSchemaAttributeType.OwnAttribute).map(g=>[g.alias,g.config]),p={type:c.dataSourceConfig.type,config:{...c.dataSourceConfig.config,attributes:Object.fromEntries(d)}};return o.forEach(g=>{s.set(g.alias,g.attributeName)}),this._createDataSource(`${this.name}_reloadData`,c,p)}),(0,M.w)(o=>o.load([...s.keys()],r,{throttled:!0})),(0,h.U)(o=>o.map(c=>{const d={};return s.forEach((p,g)=>{d[p]=c[g]}),d})))}create(e={}){return this._isLoading=!0,this.getSchema().pipe((0,h.U)(t=>Ve.getOwnColumnsValues(t,e)),(0,M.w)(t=>(0,u.forkJoin)([(0,u.of)(t),this.dataSource.getDefaultValues()])),(0,I.b)(()=>this._markForNotCollection(V.Create)),(0,h.U)(([t,i])=>(this._persistedState={...i,...t},this._persistedState)),(0,M.w)(t=>this._loadDependentDataForCreate(t)),(0,I.b)(()=>this._isLoading=!1))}copy(e,t={}){return this._isLoading=!0,this.getSchema().pipe((0,h.U)(i=>({schema:i,attributes:i.attributes.filter(r=>r.attributeType===l.DataSchemaAttributeType.OwnAttribute&&r.isValueCloneable).map(r=>r.name),parameters:"string"==typeof e?[{type:l.ModelParameterType.PrimaryColumnValue,value:e}]:i.getPrimaryAttributesNames().filter(r=>e[r]).map(r=>({type:l.ModelParameterType.PrimaryColumnValue,value:{[r]:e[r]}}))})),(0,B.z)(({schema:i,attributes:r,parameters:s})=>this._load(r,s,{},V.Copy).pipe((0,I.b)(()=>{this._isLoaded=!1}),(0,I.b)(o=>{if(o.length>1)throw new Error("More than one record loaded for copy");if(0===o.length)throw new Error("No records loaded for copy")}),(0,h.U)(o=>Ve.removeNotRequestedData(r,{...o[0]})),(0,h.U)(o=>{i.getPrimaryAttributesNames().forEach(d=>delete o[d]);const c=Ve.getOwnColumnsValues(i,t);return{...o,...c}}),(0,M.w)(o=>this.dataSource.getDefaultValues().pipe((0,h.U)(c=>({...c,...o})))),(0,I.b)(o=>{this._persistedState={...o}}),(0,M.w)(o=>this._loadDependentDataForCreate(o)),(0,I.b)(()=>{this._isLoaded=!0,this._isLoading=!1}),(0,G.K)(o=>(this._isLoading=!1,this._markForNotCollection(V.Update),(0,u.throwError)(()=>new Error(o)))))))}insert(e){return this.getSchema().pipe((0,h.U)(i=>({dataSchema:i,data:{...this._persistedState??{},...e}})),(0,h.U)(({data:i,dataSchema:r})=>Ve.getOwnColumnsValues(r,i))).pipe(Ea(i=>this._onBeforeInsert(i)),jS(i=>this._innerInsert(i)),Ea(([i])=>this._onAfterInsert(i)),(0,h.U)(([,i])=>i),(0,G.K)(i=>(0,u.of)(Ey(i))))}update(e,t){return this.getSchema().pipe((0,h.U)(r=>Ve.getOwnColumnsValues(r,e)),(0,h.U)(r=>this._getChangedAttributesValues(r))).pipe(Ea(r=>this._onBeforeUpdate(r,t)),jS(r=>this._innerUpdate(r,t)),Ea(([r])=>this._onAfterUpdate(r,t)),(0,h.U)(([,r])=>r),(0,G.K)(r=>(0,u.of)(Ey(r))))}insertOrUpdate(e,t){return this._mode===V.Update?this.update(e,t):this.insert(e)}delete(e){return this._onBeforeDelete(e).pipe((0,M.w)(()=>this._innerDelete(e)),Ea(()=>this._onAfterDelete(e)),(0,G.K)(t=>(0,u.of)(Ey(t))))}setValue(e){const t=Object.keys(e);return this._checkAttributesInDataSchema(t).pipe((0,I.b)(()=>{t.length>0&&(this._dirtyAttributes=new Set([...this._dirtyAttributes,...t]),this._persistedState={...this._persistedState??{},...e})}),(0,h.U)(()=>null))}_getPersistedState(){return{...this._persistedState??{}}}markFor(e){this.mode!==e&&(this._setMode(e),this._modeChanges.next(e))}loadLookupList(e,t,i={}){if(!this.dataSource)throw Error("DataSource is null");return this.dataSource.getLookupDataSchema(e).pipe((0,M.w)(r=>{const s=r.getPrimaryLoadAttributes();return this._createDataSource(this._lookupDataSourceName,r).pipe((0,M.w)(o=>o.load(s,t,i)),(0,h.U)(o=>({primaryAttributeName:r.primaryAttributeName,primaryDisplayAttributeName:r.primaryDisplayAttributeName,data:o})))}))}canDelete(e){return(0,u.lastValueFrom)(this.dataSource.canDelete(e),{defaultValue:null})}canSave(e){switch(this._mode){case V.Init:return Promise.resolve({result:!1});case V.Create:case V.Copy:return(0,u.lastValueFrom)(this.dataSource.canCreate(e),{defaultValue:null});case V.Update:return(0,u.lastValueFrom)(this.dataSource.canEdit(e),{defaultValue:null});case V.Delete:return this.canDelete(e);default:throw Error(`Unable to verify the possibility of operation executing: the '${this._mode}' is not supported.`)}}attributeChanged(e,t){t||this._selfDirty$.next(!0),this._dirtyAttributes.add(e)}setLoadedState(){this._dirtyAttributes=new Set,this._markAsPristine()}createCollectionItemModel(e){const t=new Np(this._injector,this.dataSource);return t._isCollectionItemModel=!0,t._isLoaded=!0,t._isInitialized=!0,t._persistedState={},t._dataSchemaName=this._dataSchemaName,t._attributesMap=this._attributesMap,null!=e&&(t._setMode(e),t._selfDirty$.next(!1)),this._children.push(t),t}childrenChange(){this._children$.next(this._children)}removeChild(e){const t=e?._id,i=this._children.findIndex(r=>r?._id===t);-1!==i&&this._children.splice(i,1)}_getAsyncResult(e){return(0,u.firstValueFrom)(e)}getLastError(){return this.dataSource?this.dataSource.getLastError():new Error("DataSource is null")}destroy(){this._isInitialized=!1,this._destroyed$.next(),this._destroyed$.complete(),this._selfDirty$.complete(),this._children$.complete(),this._childrenDirty$.complete(),this._childrenModes$.complete(),this._destroyed=!0}}(0,m.gn)([(0,l.ImplementUsingHandlerChain)({requestType:"crt.ModelGenerator",methodName:"generateOne"}),(0,m.w6)("design:type",Function)],Np.prototype,"_create",void 0);let Ht=class{constructor(e,t,i,r){this.dataSourceFactory=e,this.entitySchemaRepository=t,this._featureValues=i,this._injector=r}_createModel(e=null,t=!1,i){const r=new Np(i||this._injector,e);return r.disableSync=t,r.init()}_validateModelConfig(e){if(e.primaryDataSourceName&&!e.dataSources[e.primaryDataSourceName])throw new Error(`Data source "${e.primaryDataSourceName}" cannot be primary data source. Data source "${e.primaryDataSourceName}" not found in model config.`);if(e.primaryDataSourceName&&e.dataSources[e.primaryDataSourceName]?.scope===l.DataSourceScope.ViewElement)throw new Error(`Data source "${e.primaryDataSourceName}" with scope "viewElement" cannot be primary. Only data sources with scope "page" can be primary`)}_getEntitySchemesRequest(e){return e.map(([,t])=>t).filter(t=>"crt.EntityDataSource"===t.type).map(t=>t.config).filter(t=>Boolean(t.entitySchemaName)).map(t=>{let i=[];return t.attributes&&(i=Object.entries(t.attributes).filter(([,r])=>r.type===l.DataSchemaAttributeType.ForwardReferenceAttribute).map(([,r])=>r.path)),{name:t.entitySchemaName,loadLookupColumns:!0,forwardReferencePaths:i}})}_generateFromConfig(e,t){let i,r;const s=t?.get(le,null,{optional:!0});return s?(i=Object.entries(e?.dataSources||{}).filter(([o,c])=>!!c.type||(console.warn(`Data source ${o} without type not supported.`),!1)),0===i.length?(0,u.of)([]):(this._validateModelConfig(e),r=i.map(([o,c])=>this.generateOne(c,o,t)),this.preInitializeDataSources(i).pipe(s.measure$("modelGenerator.generateFromConfig"),(0,u.switchMap)(()=>(0,u.forkJoin)(r))))):(i=Object.entries(e?.dataSources||{}).filter(([o,c])=>!!c.type||(console.warn(`Data source ${o} without type not supported.`),!1)),0===i.length?(0,u.of)([]):(this._validateModelConfig(e),r=i.map(([o,c])=>this.generateOne(c,o,t)),this.preInitializeDataSources(i).pipe((0,u.switchMap)(()=>(0,u.forkJoin)(r)))))}preInitializeDataSources(e){if(this._featureValues["DataSource-DontUseOneRequestForEntitySchemes"])return(0,u.of)(null);const t=this._getEntitySchemesRequest(e);return this.entitySchemaRepository.getSchemes(t).pipe((0,G.K)(i=>(0,u.of)([])),(0,h.U)(i=>null))}generate(e,t){return this._generateFromConfig(e,t)}generateOne(e,t,i){const r=i?.get(le,null,{optional:!0});return r?this.dataSourceFactory.create(t,e,i).pipe(r.measure$(`modelGenerator.generateOne.${t}`),(0,B.z)(s=>this._createModel(s,e.disableSync,i))):this.dataSourceFactory.create(t,e,i).pipe((0,B.z)(s=>this._createModel(s,e.disableSync,i)))}};Ht.\u0275fac=function(e){return new(e||Ht)(n.\u0275\u0275inject(pn),n.\u0275\u0275inject(wn),n.\u0275\u0275inject(te),n.\u0275\u0275inject(n.Injector))},Ht.\u0275prov=n.\u0275\u0275defineInjectable({token:Ht,factory:Ht.\u0275fac}),Ht=(0,m.gn)([en({requestType:"crt.ModelGenerator"}),(0,m.w6)("design:paramtypes",[pn,wn,class BM{},n.Injector])],Ht);class Vp{constructor(e,t){this._modelGenerator=e,this._measurePerformanceService=t}_getSchemaDiff(e,t){return{changedAttributesDiff:(0,xy.Z)(e?.viewModelConfig??{},t?.viewModelConfig??{}),changedModelDiff:(0,xy.Z)(e?.modelConfig??{},t?.modelConfig??{}),changedResourcesDiff:(0,xy.Z)(e?.resources??{},t?.resources??{})}}diff(e,t,i){return this._measurePerformanceService.measure("ViewModelDiffPatch.diff",()=>{const{changedAttributesDiff:r,changedModelDiff:s,changedResourcesDiff:o}=this._getSchemaDiff(e,t);if((0,O.Z)(r)&&(0,O.Z)(s))return(0,u.of)({actualViewModelConfig:t?.viewModelConfig,resources:o});r.attributes=r.attributes||{},s.dataSources=s.dataSources||{};let c=Object.keys(r.attributes);const d=Object.keys(s.dataSources),p=Object.keys(t.viewModelConfig?.attributes??{}).filter(C=>{const v=t.viewModelConfig.attributes[C]??{};if(vl(v))return d.includes(v.modelConfig?.path)||c.includes(v.modelConfig?.sortingConfig?.attributeName)});c=(0,Hf.Z)([...c,...p]);const g=c.map(C=>{const v=t.viewModelConfig.attributes[C]??{};if(vl(v))return v?.modelConfig?.path?.split(".")[0]}).filter(Boolean);return this._modelGenerator.generate(t.modelConfig,i).pipe(this._measurePerformanceService.measure$("ViewModelDiffPatch.diff.modelGenerate"),(0,h.U)(C=>({actualViewModelConfig:t?.viewModelConfig,attributes:{changed:c},resources:o,models:{changed:C.filter(v=>g.includes(v.name))}})))})}}Vp.\u0275fac=function(e){return new(e||Vp)(n.\u0275\u0275inject(Ht),n.\u0275\u0275inject(le))},Vp.\u0275prov=n.\u0275\u0275defineInjectable({token:Vp,factory:Vp.\u0275fac});class Nl{constructor(e){this._messageChannelService=e,this._subscribeEntityChanged()}get liveEditingEvent$(){return this._messageChannelService.messageEvent$.pipe((0,P.h)(e=>"LiveEditingNotifier"===e.header.sender),(0,h.U)(e=>{const t=e.body;return{entitySchemaName:t.EntitySchemaName,columnNames:t.ColumnNames,primaryColumnValue:t.PrimaryColumnValue,eventType:this._getLiveEditingEventType(t.EventType),primaryColumnName:t.PrimaryColumnName,connectedLiveSchemaColumns:t.ConnectedLiveSchemaColumns}}))}_subscribeEntityChanged(){this.liveEditingEvent$.subscribe(e=>{this._notifyModel(e)})}_notifyModel(e){Rl.instance.notify({modelId:(0,l.generateGuid)(),dataSchemaName:e.entitySchemaName,type:e.eventType,payload:{primaryAttributesValues:[[{name:e.primaryColumnName,value:e.primaryColumnValue}]],changedAttributes:e.columnNames}})}_getLiveEditingEventType(e){switch(e){case 0:return nt.Create;case 1:return nt.Update;case 2:return nt.Delete}}}Nl.\u0275fac=function(e){return new(e||Nl)(n.\u0275\u0275inject(ct))},Nl.\u0275prov=n.\u0275\u0275defineInjectable({token:Nl,factory:Nl.\u0275fac,providedIn:"root"});n.APP_INITIALIZER;class $r{}$r.\u0275fac=function(e){return new(e||$r)},$r.\u0275mod=n.\u0275\u0275defineNgModule({type:$r}),$r.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});class Ty{constructor(e){this.uId=e?.uId??(0,l.generateGuid)(),this.name=e?.name??this.getDefaultName()}getDefaultName(){return this._defaultName}fromMetadata(e){const t=e??{};this.uId=t.uId??(0,l.generateGuid)(),this.name=t.name??this.getDefaultName()}toMetadata(){return{typeName:this._typeName,uId:this.uId,name:this.name}}}class Py extends Ty{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Parameters.ExpressionSchemaParameter"}get _defaultName(){return"Parameter"}constructor(e){super(e),this.dataValueType=e?.dataValueType??l.DataValueType.Text}fromMetadata(e){const t=e??{};super.fromMetadata(t),this.dataValueType=l.DataValueType[t.dataValueType??"Text"]}clone(){return new Py(this)}toMetadata(){if(null==this.dataValueType)throw new Error("Data value type not specified");return{...super.toMetadata(),dataValueType:l.DataValueType[this.dataValueType]}}}class LP{static create(e){if("Terrasoft.Core.ExpressionEngine.Schema.Parameters.ExpressionSchemaParameter"===e)return new Py;throw new Error(`ExpressionSchemaParameter with type '${e}' not found`)}static createFromMetadata(e){const t=e.typeName,i=this.create(t);return i.fromMetadata(e),i}}class Vl extends Ty{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariableConfig"}get _defaultName(){return"VariableConfig"}constructor(e){super(e),this.value=e?.value??""}fromMetadata(e){const t=e??{};super.fromMetadata(t),this.value=t.value??""}clone(){return new Vl(this)}toMetadata(){return{...super.toMetadata(),value:this.value}}}var F1,yg,Cg,Sg,bg,L1;!function(a){a.Column="Column",a.AggregationColumn="AggregationColumn"}(F1||(F1={})),function(a){a.Constant="Constant",a.Parameter="Parameter",a.SysSetting="SysSetting",a.SysValue="SysValue"}(yg||(yg={})),function(a){a.PowerFx="PowerFx"}(Cg||(Cg={})),function(a){a.SysSetting="SysSetting",a.SysValue="SysValue",a.Parameter="Parameter",a.Record="Record",a.Collection="Collection",a.EsqAggregation="EsqAggregation"}(Sg||(Sg={})),function(a){a.Entity="Entity",a.Custom="Custom"}(bg||(bg={})),function(a){a.None="None",a.Count="Count",a.Sum="Sum",a.Avg="Avg",a.Min="Min",a.Max="Max",a.TopOne="TopOne"}(L1||(L1={}));class vg{constructor(e){this.type=e?.type??yg.Constant,this.value=e?.value??""}fromMetadata(e){const t=e??{};this.type=t.type??yg.Constant,this.value=t.value??""}clone(){return new vg(this)}toMetadata(){if(!this.type)throw new Error("Type not specified");return{type:this.type,value:this.value}}}class Ay extends Vl{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaRecordVariableConfig"}get _defaultName(){return"VariableConfig"}constructor(e){super(e),this.recordType=e?.recordType??bg.Entity,this.primaryValue=e?.primaryValue.clone()??new vg,this.fieldValues=e?.fieldValues,this.columns=e?.columns??[]}fromMetadata(e){const t=e??{};super.fromMetadata(t),this.columns=t.columns??[],this.recordType=t.recordType??bg.Entity;const i=new vg;t.primaryValue&&i.fromMetadata(t.primaryValue),this.primaryValue=i,this.fieldValues=t.fieldValues}clone(){return new Ay(this)}toMetadata(){if(!this.recordType)throw new Error("Record type not specified");return{...super.toMetadata(),recordType:this.recordType,primaryValue:this.primaryValue.toMetadata(),fieldValues:this.fieldValues,columns:this.columns}}}class OP{static create(e){switch(e){case"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariableConfig":return new Vl;case"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaRecordVariableConfig":return new Ay;default:throw new Error(`ExpressionSchemaVariableConfig with type '${e}' not found`)}}static createFromMetadata(e){const t=e.typeName,i=this.create(t);return i.fromMetadata(e),i}}class Ry extends Ty{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariable"}get _defaultName(){return"Variable"}constructor(e){super(e),this.dataValueType=e?.dataValueType??l.DataValueType.Text,this.variableType=e?.variableType??Sg.Parameter,this.config=e?.config.clone()??new Vl}fromMetadata(e){const t=e??{};super.fromMetadata(t),this.dataValueType=l.DataValueType[t.dataValueType??"Text"],this.variableType=t.variableType??Sg.Parameter,this.config=null==t.config?new Vl:OP.createFromMetadata(t.config)}clone(){return new Ry(this)}toMetadata(){if(null==this.dataValueType)throw new Error("Data value type not specified");if(!this.variableType)throw new Error("Variable type not specified");return{...super.toMetadata(),dataValueType:l.DataValueType[this.dataValueType],variableType:this.variableType,config:this.config.toMetadata()}}}class jP{static create(e){if("Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariable"===e)return new Ry;throw new Error(`ExpressionSchemaVariable with type '${e}' not found`)}static createFromMetadata(e){const t=e.typeName,i=this.create(t);return i.fromMetadata(e),i}}class Fl{constructor(e){this.uId=e?.uId??(0,l.generateGuid)(),this.engineType=e?.engineType??Cg.PowerFx,this.expression=e?.expression??"",this.resultDataValueType=e?.resultDataValueType??l.DataValueType.Text,this.expressionVariables=(e?.expressionVariables??[]).map(t=>t.clone()),this.parameters=(e?.parameters??[]).map(t=>t.clone())}static fromMetadata(e){const t=new Fl;return t.fromMetadata(e),t}fromMetadata(e){const t=e??{};this.uId=t.uId??(0,l.generateGuid)(),this.engineType=t.engineType??Cg.PowerFx,this.expression=t.expression??"",this.resultDataValueType=l.DataValueType[t.resultDataValueType??"Text"],this.expressionVariables=(t.expressionVariables??[]).map(i=>jP.createFromMetadata(i)),this.parameters=(t.parameters??[]).map(i=>LP.createFromMetadata(i))}clone(){return new Fl(this)}toMetadata(){const e=this.expressionVariables.map(i=>i.toMetadata()),t=this.parameters.map(i=>i.toMetadata());return{uId:this.uId,name:this.name,engineType:this.engineType,expression:this.expression,resultDataValueType:l.DataValueType[this.resultDataValueType],expressionVariables:e,parameters:t}}}let ky=class{convert(e,t){const i={type:"crt.ExecuteExpressionRequest",$context:t,metadata:e};return l.HandlerChainService.instance.process(i).then(r=>r?.result).catch(r=>(console.warn(r),null))}};ky=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ExecuteExpression"})],ky);let Ny=class{convert(e,t){const i={type:"crt.ExecuteExpressionRequest",$context:t,metadata:e};return l.HandlerChainService.instance.process(i).then(r=>r).catch(r=>({success:!1,result:null,errorInfo:r}))}};Ny=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToExpressionResult"})],Ny);class Wr{_getDataValueTypeName(e){switch(e){case l.DataValueType.FLOAT1:return"Float1";case l.DataValueType.FLOAT2:return"Float2";case l.DataValueType.FLOAT3:return"Float3";case l.DataValueType.FLOAT4:return"Float4";case l.DataValueType.FLOAT8:return"Float8";case l.DataValueType.CUSTOM_OBJECT:return"Object";case l.DataValueType.COMPOSITE_OBJECT_LIST:return"CompositeObjectList";default:return l.DataValueType[e]}}_getRequestParameterValueDto(e){const t=e.value;if(Array.isArray(t)){const i=t[0];return Array.isArray(i)?t.map(r=>r.map(s=>({...s,value:this._encodeValue(s.value,s.dataValueType),dataValueType:this._getDataValueTypeName(s.dataValueType)}))):t.map(r=>({...r,value:this._encodeValue(r.value,r.dataValueType),dataValueType:this._getDataValueTypeName(r.dataValueType)}))}return this._encodeValue(t,e.dataValueType)}_encodeValue(e,t){return[l.DataValueType.Date,l.DataValueType.Time,l.DataValueType.DateTime].includes(t)?(0,l.toLocalISOString)(e):e}decodeValue(e,t){return[l.DataValueType.Date,l.DataValueType.Time,l.DataValueType.DateTime].includes(t)?new Date(e):e}getExecutionMetadata(e){const t=e.parameters.map(r=>({...r,dataValueType:this._getDataValueTypeName(r.dataValueType),value:this._getRequestParameterValueDto(r)})),i=e.expressionVariables.map(r=>({...r,dataValueType:this._getDataValueTypeName(r.dataValueType)}));return JSON.stringify({...e,parameters:t,expressionVariables:i,resultDataValueType:this._getDataValueTypeName(e.resultDataValueType)})}}Wr.\u0275fac=function(e){return new(e||Wr)},Wr.\u0275prov=n.\u0275\u0275defineInjectable({token:Wr,factory:Wr.\u0275fac,providedIn:"root"});class qi{constructor(e,t,i,r){this._httpClient=e,this._featureService=t,this._sysSettingsService=i,this._expressionMetadataAdapter=r,this._expressionEngineEndpoint="ServiceModel/ExpressionService.svc/Execute",this._expressionsEngineEndpoint="ServiceModel/ExpressionService.svc/ExecuteMany",this._defaultDebounceTime=200,this._defaultBundleCount=20,this._debounceTimeSysSettingName="ExpressionEngineDebounceTime",this._bundleCountSysSettingName="ExpressionEngineBundleCount",this._requests=new u.Subject}_executeImmediate(e){const t={metadata:e};return(0,u.lastValueFrom)(this._httpClient.post(this._expressionEngineEndpoint,t,{headers:new D.HttpHeaders({"Content-Type":"application/json"})}))}_getBundleSettings(){var e=this;return(0,_.Z)(function*(){const t=yield e._sysSettingsService.getByCodes([e._debounceTimeSysSettingName,e._bundleCountSysSettingName]);return{executionDebounceTime:t.values[e._debounceTimeSysSettingName]?.value||e._defaultDebounceTime,bundleCount:t.values[e._bundleCountSysSettingName]?.value||e._defaultBundleCount}})()}_prepareDebouncedResponsesStream(){var e=this;return(0,_.Z)(function*(){const{executionDebounceTime:t,bundleCount:i}=yield e._getBundleSettings();if(e._responses)return;const r=new u.BehaviorSubject(0),s=(0,u.merge)(r.pipe((0,u.filter)(o=>o>=i)),e._requests.pipe((0,u.tap)(()=>{r.next(r.value+1)}),(0,u.debounceTime)(t)));e._responses=e._requests.pipe((0,u.buffer)(s),(0,u.filter)(o=>!!o.length),(0,u.mergeMap)(o=>(r.next(0),e._httpClient.post(e._expressionsEngineEndpoint,o,{headers:new D.HttpHeaders({"Content-Type":"application/json"})}))),(0,u.share)())})()}_executeThrottled(e){var t=this;return(0,_.Z)(function*(){yield t._prepareDebouncedResponsesStream();const i=(0,l.generateGuid)(),r=(0,u.firstValueFrom)(t._responses.pipe((0,u.filter)(s=>s.some(o=>o.executionId===i)),(0,u.map)(s=>s.find(o=>o.executionId===i).result)));return t._requests.next({executionId:i,metadata:e}),r})()}safeExecute(e,t={immediate:!1}){var i=this;return(0,_.Z)(function*(){try{return yield i.execute(e,t)}catch(r){return{success:!1,errorInfo:r,result:null}}})()}execute(e,t={immediate:!1}){var i=this;return(0,_.Z)(function*(){let r;const s=i._expressionMetadataAdapter.getExecutionMetadata(e),o=yield i._featureService.getFeatureState("ExpressionEngineDisableBundling");if(r=t.immediate||o?yield i._executeImmediate(s):yield i._executeThrottled(s),!r.success){const c=r.errorInfo;return Promise.reject(`${c.message}`)}return{...r,result:i._expressionMetadataAdapter.decodeValue(r.result,e.resultDataValueType)}})()}}qi.\u0275fac=function(e){return new(e||qi)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(l.FeatureService),n.\u0275\u0275inject(l.SysSettingsService),n.\u0275\u0275inject(Wr))},qi.\u0275prov=n.\u0275\u0275defineInjectable({token:qi,factory:qi.\u0275fac,providedIn:"root"});let O1=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.ExecuteExpressionRequest"}};O1=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ExecuteExpressionRequest"})],O1);let Vy=class extends l.BaseRequestHandler{constructor(e){super(),this._engine=e}handle(e){return this._engine.execute(e.metadata)}};Vy=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.ExecuteExpressionHandler",requestType:"crt.ExecuteExpressionRequest"}),(0,m.w6)("design:paramtypes",[qi])],Vy);let Jn=class{};Jn.\u0275fac=function(e){return new(e||Jn)},Jn.\u0275mod=n.\u0275\u0275defineNgModule({type:Jn}),Jn.\u0275inj=n.\u0275\u0275defineInjector({providers:[qi,Wr],imports:[y.CommonModule,$r,$r]}),Jn=(0,m.gn)([(0,l.CrtModule)({converters:[ky,Ny],requestHandlers:[Vy]})],Jn);class xt{constructor(e){this._injector=e}static register(e,t){xt._actionAppliers.set(e,t)}get(e){const t=xt._actionAppliers.get(e.typeName);if(!t)throw new Error(`Business rule applier for change type ${e.typeName} not found.`);return new t(e,this._injector)}}function Ll(a){return function(e){(0,l.checkTypeNameFormat)(a.type,"BusinessRulesActionApplierTypeName"),(0,l.checkCrtTypeNamePascalCase)(a.type),xt.register(a.type,e)}}var Kn,$i;xt._actionAppliers=new Map,xt.\u0275fac=function(e){return new(e||xt)(n.\u0275\u0275inject(n.Injector))},xt.\u0275prov=n.\u0275\u0275defineInjectable({token:xt,factory:xt.\u0275fac}),function(a){a.Model="Model",a.ViewModel="ViewModel"}(Kn||(Kn={})),function(a){a.Unknown="Unknown",a.Init="Init",a.Create="Create",a.Copy="Copy",a.Update="Update"}($i||($i={}));class Ig{constructor(e,t){this.action=e,this.injector=t}_logError(e){return console.error("Error when applying business rule",this.action),console.error(e),(0,u.of)(null)}apply(e,t){let i;try{i=this.innerApply(e,t)}catch(r){return this._logError(r)}return i.pipe((0,u.catchError)(r=>this._logError(r)))}}class j1{static _getPrimaryDisplayAttributeName(e){return(0,_.Z)(function*(){return(yield e.getSchema()).primaryDisplayAttributeName})()}static getLookupValue(e,t){var i=this;return(0,_.Z)(function*(){const r=yield l.Model.create(e),s=yield r.getSchema(),o=[s.primaryAttributeName,s.primaryDisplayAttributeName];s.primaryColorAttributeName&&o.push(s.primaryColorAttributeName);const c=yield r.load({parameters:[{type:l.ModelParameterType.PrimaryColumnValue,value:t}],attributes:o});if(!c||0===c.length)throw new Error(`Can't find value for '${t}'`);if(c.length>1)throw new Error(`Load more than 1 data row for '${t}'`);const d=c[0],p=yield i._getPrimaryDisplayAttributeName(r),g={value:t,displayValue:d[p]};return s.primaryColorAttributeName&&(g.primaryColorValue=d[s.primaryColorAttributeName]),g})()}}let B1=class extends Ig{_getValue(e){const t=e.value,i=t.value;if(null==i)return(0,u.of)(i);const r=t.dataValueTypeName,o=Object.values(It).find(d=>d.name===r)?.type??l.DataValueType.Text,c=w_(i,o);return o===l.DataValueType.Lookup?(0,u.from)(j1.getLookupValue(t.referenceSchemaName,t.value)):(0,u.of)(c)}_setValue(e,t,i){const r=this.action.path,s=e.getViewModelAttributePath(t,r);if(s){if("string"==typeof i&&i.includes("PowerFx")){const o=JSON.parse(i);o.parameters.forEach(d=>{const p=e.getViewModelAttributePath(t,d.value);d.value=e.attributes[p]});const c=this.injector.get(qi);return(0,u.from)(c.execute(o)).pipe((0,u.mergeMap)(d=>e.setValue({[s]:d?.result})))}return e.setValue({[s]:i})}return e.setModelValues(t,{[r]:i})}innerApply(e,t){const i=this.action,r=i.value;return!0===i.skip?(0,u.of)(null):this._getValue(i).pipe((0,u.switchMap)(s=>{if(t.type===Kn.Model)return this._setValue(e,t.id,s);if(r.scope)return this._setValue(e,r.scope,s);const o=e.getAttributeNameByViewItemName(i.path);return o?e.setValue({[o]:s}):e.setValue({[i.path]:s})}))}};B1=(0,m.gn)([Ll({type:"crt.SetValue"})],B1);class Fy extends Ig{_getAttributeNames(e,t,i){if(t.type===Kn.Model)return e.getViewModelAttributePaths(t.id,i);let r=e.getAttributeNameByViewItemName(i);return r||(r=(a=>a.replace(/\./g,"")+"_PropertiesBindingAttribute")(i)),[r]}setAttributePropertyValue(e,t,i){e.setAttributePropertyValue(t,this.propertyName,i)}resetAttributePropertyValue(e,t){e.resetAttributePropertyValue(t,this.propertyName)}innerApply(e,t){const i=this.action.path;if(!i)return(0,u.of)(!0);const s=i.split(":")[0],o=this._getAttributeNames(e,t,s);return o&&o.forEach(c=>{this.action.resetToDefault?this.resetAttributePropertyValue(e,c):this.setAttributePropertyValue(e,c,this.action.value)}),(0,u.of)(!0)}}function U1(a,e){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,_.Z)(function*(a,e){let t=yield a[e];return t instanceof l.FilterGroup||(t=new l.FilterGroup,a[e]=t),t}),Ly.apply(this,arguments)}function BP(a,e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,_.Z)(function*(a,e,t){return(yield U1(a,e)).filters.get(t)||new l.FilterGroup(l.LogicalOperatorType.And)}),Oy.apply(this,arguments)}function UP(a,e,t,i){return jy.apply(this,arguments)}function jy(){return jy=(0,_.Z)(function*(a,e,t,i){const r=yield U1(a,e);r.add(i,t),a[e]=r}),jy.apply(this,arguments)}function By(a,e,t,i,r,s){return Uy.apply(this,arguments)}function Uy(){return Uy=(0,_.Z)(function*(a,e,t,i,r,s){const o=function GP(a,e,t){return a.getViewModelAttributePaths(e,t).map(s=>function o2(a){return`${a}_List`}(s)).map(s=>function l2(a){return`${a}_BusinessRule_Filter`}(s))}(a,e,t);for(const c of o){const d=yield BP(a,c,r);d.add(i,s),yield UP(a,c,r,d)}}),Uy.apply(this,arguments)}let G1=class extends Ig{_createLookupFilterGroup(e,t){const i=new l.FilterGroup(l.LogicalOperatorType.And),r=new l.CompareFilter(l.ComparisonType.Equal,new l.ColumnExpression({columnPath:e}),new l.ParameterExpression({value:t}));return i.add(r,"lookupFilter"),i}_setFilterForScope(e,t){const i=this.action,r=i.path;if(i.value){const{leftExpression:s,rightExpression:o}=i.value;return By(e,t,r,this._createLookupFilterGroup(s,o.value),i.businessRuleUId,i.actionUId)}return By(e,t,r,new l.FilterGroup,i.businessRuleUId,i.actionUId)}innerApply(e,t){const i=this._setFilterForScope(e,t.id);return(0,u.from)(i)}};G1=(0,m.gn)([Ll({type:"crt.FilterLookup"})],G1);let z1=class extends Ig{_getFilter(e){if(e){const t=e.value,i=JSON.parse(t);return l.FilterParser.fromJson(i)}return new l.FilterGroup}innerApply(e,t){const i=this.action,r=this._getFilter(i.value),s=By(e,t.id,i.path,r,i.businessRuleUId,i.actionUId);return(0,u.from)(s)}};z1=(0,m.gn)([Ll({type:"crt.SetFilter"})],z1);let H1=class extends Fy{constructor(){super(...arguments),this.propertyName="visible"}};H1=(0,m.gn)([Ll({type:"crt.SetVisibilityPropertyActionApplier"})],H1);let Z1=class extends Fy{constructor(){super(...arguments),this.propertyName="readonly"}_getPropertyName(e,t){return e.getInvariabilityPropertyName(t)??this.propertyName}setAttributePropertyValue(e,t,i){const r=this._getPropertyName(e,t);e.setAttributePropertyValue(t,r,i)}resetAttributePropertyValue(e,t){const i=this._getPropertyName(e,t);e.resetAttributePropertyValue(t,i)}};Z1=(0,m.gn)([Ll({type:"crt.SetReadonlyPropertyActionApplier"})],Z1);let q1=class extends Fy{constructor(){super(...arguments),this.propertyName="required"}};q1=(0,m.gn)([Ll({type:"crt.SetRequiredPropertyActionApplier"})],q1);class Fp{constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.Conditions.BaseBusinessRuleDesignCondition",this.uId=e?e?.uId:(0,l.generateGuid)()}toMetadata(){return{typeName:this.typeName,uId:this.uId}}copy(){return new Fp({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return Boolean(this.uId)}onDataSourceAttributeNameChanged(e,t,i){}getWarningMessages(){return[]}}class Dg extends Fp{}class $1{constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleAction",this.enabled=!0,this.uId=e?.uId||(0,l.generateGuid)(),e&&(this.enabled=e.enabled)}toMetadata(){return{typeName:this.typeName,uId:this.uId,enabled:this.enabled}}getTypeName(){return this.typeName}getApplicability(){return[]}isValid(){return!0}onDataSourceAttributeNameChanged(e,t,i){}getAffectedItems(){return[]}getRequiredItems(){return[]}}class Et{get dataValueTypeName(){return this._dataValueTypeName}set dataValueTypeName(e){this._dataValueTypeName=e}get isLookup(){return this.dataValueTypeName===It[l.DataValueType.Lookup].name}get referenceSchemaName(){return this._referenceSchemaName}set referenceSchemaName(e){this._referenceSchemaName!==e&&(this._referenceSchemaName=e)}constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleExpression",this._dataValueTypeName="",this._referenceSchemaName="",this.type=Ra.Const,this.uId=e?.uId||(0,l.generateGuid)(),e&&(this._dataValueTypeName=e.dataValueTypeName??"",this.type=e.type||this.type,this._referenceSchemaName=e.referenceSchemaName??"")}toMetadata(){return{typeName:this.typeName,uId:this.uId,type:this.type,dataValueTypeName:this.dataValueTypeName,referenceSchemaName:this.referenceSchemaName}}copy(){return new Et({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return Boolean(this.uId)}onDataSourceAttributeNameChanged(e,t,i){}getAffectedItem(){return null}clear(){throw new Error("Not implemented")}}class Yr{static register(e,t){this._expressionsTypes.set(e,t)}static _getExpressionType(e){return this._expressionsTypes.get(e)??null}get(e){if(!e)return new Et;const t=Yr._getExpressionType(e.typeName);return t?new t(e):new Et(e)}}function Xn(a){return function(e){Yr.register(a.typeName,e)}}var Gy;Yr._expressionsTypes=new Map;let Lp=Gy=class extends Et{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleAttributeExpression",this.path="",this.scopeId="",e&&(this.path=e.path,this.scopeId="null"===e.scopeId?"":e.scopeId)}toMetadata(){return{...super.toMetadata(),path:this.path,scopeId:this.scopeId}}copy(){return new Gy({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.path)}onDataSourceAttributeNameChanged(e,t,i){this.scopeId===e&&this.path===t&&(this.path=i)}getAffectedItem(){return{name:this.path}}};Lp=Gy=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleAttributeExpression"}),(0,m.w6)("design:paramtypes",[Object])],Lp);class ei extends $1{constructor(e){super(e),this._expressionFactory=new Yr,this.typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleAction",this.executorName="",e&&(this.executorName=e.executorName,this.expression=new Lp(e.expression),e.value&&(this.value=this._expressionFactory.get(e.value)))}getExpressionAffectedItems(){const e=this.expression?.getAffectedItem()??null;return e?[e]:[]}toMetadata(){return{...super.toMetadata(),executorName:this.executorName,expression:this.expression?.toMetadata(),value:this.value?.toMetadata()}}clone(){return new ei(this.toMetadata())}copy(){const e=new ei({...this.toMetadata(),uId:(0,l.generateGuid)()});return e.expression=this.expression?.copy(),e.value=this.value?.copy(),e}getApplicability(){if(!this.expression?.path)return[];const t=this.expression.path.split(".").shift();return t?[{path:t}]:[]}isValid(){return super.isValid()&&Boolean(this.expression?.isValid())&&Boolean(this.value?.isValid())}getAffectedItems(){const e=this.getExpressionAffectedItems();return[...super.getAffectedItems(),...e]}}class zP extends $1{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetProperty"}}class Ol extends zP{constructor(e){super(e),this.items=[],e&&(Array.isArray(e.items)?this.items=e.items:this.items=e.items?.length>0?e.items.split(","):[])}_getAffectedItems(){return(this.items??[]).map(t=>({name:t}))}toMetadata(){return{...super.toMetadata(),items:this.items?.length>0?this.items.join(","):""}}getApplicability(){return this.isValid()?this.items.map(e=>({path:e})):[]}isValid(){return super.isValid()&&this.items?.length>0}getAffectedItems(){return[...super.getAffectedItems(),...this._getAffectedItems()]}}class Mg extends Ol{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionEditableElement"}clone(){return new Mg(this.toMetadata())}copy(){return new Mg({...this.toMetadata(),uId:(0,l.generateGuid)()})}}var zy;let wg=zy=class extends Et{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterLookupExpression",this.path="",this.filterExpression="",e&&(this.path=e.path,this.filterExpression="null"===e.filterExpression?"":e.filterExpression)}toMetadata(){return{...super.toMetadata(),path:this.path,filterExpression:this.filterExpression}}copy(){return new zy({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.path)&&Boolean(this.filterExpression)}getAffectedItem(){return{name:this.path}}};wg=zy=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterLookupExpression"}),(0,m.w6)("design:paramtypes",[Object])],wg);class xg extends ei{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionFilterLookup",this.clearValue=!1,this.populateValue=!1,e?(this.clearValue=e.clearValue??!1,this.populateValue=e.populateValue??!1):(this.clearValue=!0,this.populateValue=!0),this._processMetadata(e)}_isOldMetadataFormat(e){const t=!!e.expression?.path&&"null"!==e.expression.path,i=e.value,r=!!i?.value&&"null"!==i.value;return t&&r}_convertOldMetadata(e){const t={...e},i=e.expression?.path||"",s=e.value?.value,o={path:s,filterExpression:""},c={path:i,filterExpression:""};if(s.includes(".")){const[d,...p]=s.split(".");o.path=d,o.filterExpression=p.join(".")}return{...t,leftExpression:o,rightExpression:c}}_processMetadata(e){e&&(this._isOldMetadataFormat(e)&&(e=this._convertOldMetadata(e)),delete this.expression,delete this.value,this.leftExpression=new wg(e?.leftExpression),this.rightExpression=new wg(e?.rightExpression))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),clearValue:this.clearValue,populateValue:this.populateValue}}clone(){return new xg({...this.toMetadata()})}copy(){return new xg({...super.copy().toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),clearValue:this.clearValue,populateValue:this.populateValue})}getApplicability(){return this.leftExpression?.path?[{path:this.leftExpression.path}]:[]}isValid(){return Boolean(this.leftExpression?.isValid())&&Boolean(this.rightExpression?.path)}getAffectedItems(){const e=this.leftExpression?.getAffectedItem()??null,t=[...super.getAffectedItems()];return e&&t.push(e),t}getRequiredItems(){return[this.rightExpression?.getAffectedItem()].filter(e=>e)}}class Eg extends Ol{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionHideElement"}clone(){return new Eg(this.toMetadata())}copy(){return new Eg({...this.toMetadata(),uId:(0,l.generateGuid)()})}}const W1="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionOptionalElement";class Tg extends Ol{constructor(){super(...arguments),this.typeName=W1}clone(){return new Tg(this.toMetadata())}copy(){return new Tg({...this.toMetadata(),uId:(0,l.generateGuid)()})}}class Pg extends Ol{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionReadonlyElement"}clone(){return new Pg(this.toMetadata())}copy(){return new Pg({...this.toMetadata(),uId:(0,l.generateGuid)()})}}const Y1="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionRequiredElement";class Ag extends Ol{constructor(){super(...arguments),this.typeName=Y1}clone(){return new Ag(this.toMetadata())}copy(){return new Ag({...this.toMetadata(),uId:(0,l.generateGuid)()})}}var Hy;let Op=Hy=class extends Et{get value(){return this._value}set value(e){this._value!==e&&(this._displayValueInitialized=!1,this._value=e)}get referenceSchemaName(){return super.referenceSchemaName}set referenceSchemaName(e){this.referenceSchemaName!==e&&(super.referenceSchemaName=e,this._displayValueInitialized=!1)}get displayValue(){return this.isLookup&&this.referenceSchemaName?this._displayValueInitialized?this._displayValue:null:(this._displayValue=this.value,this._displayValueInitialized=!0,this._displayValue)}set displayValue(e){this._displayValue=e??"",this._displayValueInitialized=null!=e}get dataValueTypeName(){return super.dataValueTypeName}set dataValueTypeName(e){this.dataValueTypeName!==e&&(super.dataValueTypeName=e,this._displayValueInitialized=!1)}constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleValueExpression",this._value="",this._displayValue="",this._displayValueInitialized=!1,e&&(this._value=e.value)}initDisplayValue(){var e=this;return(0,_.Z)(function*(){if(e._displayValueInitialized)return Promise.resolve(e._displayValue);if(e.isLookup&&e.referenceSchemaName&&e._value){const t=yield j1.getLookupValue(e.referenceSchemaName,e._value);e._displayValue=t.displayValue}else e._displayValue=e.value;return e._displayValueInitialized=!0,Promise.resolve(e._displayValue)})()}toMetadata(){return{...super.toMetadata(),value:this.value}}copy(){return new Hy({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return!!super.isValid()&&(this.isLookup?(0,l.isGuid)(this.value):null!=this.value&&""!==this.value)}clear(){this._value="",this._displayValue="",this._displayValueInitialized=!1}};Op=Hy=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleValueExpression"}),(0,m.w6)("design:paramtypes",[Object])],Op);class Rg extends ei{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetFilter",e&&(this.value=new Op(e.value))}clone(){return new Rg(this.toMetadata())}copy(){return new Rg(super.copy().toMetadata())}getApplicability(){return this.expression?.path?[{path:this.expression.path}]:[]}}class kg extends ei{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValue"}clone(){return new kg(this.toMetadata())}copy(){return new kg(super.copy().toMetadata())}}var Zy;!function(a){a.DataSource="DataSource",a.Page="Page"}(Zy||(Zy={}));class Ng extends ei{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSetValueItem",this.scope=e?.scopeId??"","null"===this.scope&&(this.scope="")}clone(){return new Ng(this.toMetadata())}copy(){return new Ng({...super.copy().toMetadata(),scopeId:this.scope})}toMetadata(){return{...super.toMetadata(),scopeId:this.scope}}getApplicability(){if(!this.expression?.path)return[];const t=this.expression.path.split(".").shift();if(!t)return[];const i={path:t};return""!==this.scope&&(i.applicability=Zy.DataSource,i.scope=this.scope),[i]}}class Vg extends ei{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValues",this.items=[],e&&(this.items=e.items?.map(t=>new Ng(t)))}getExpressionAffectedItems(){return[]}clone(){return new Vg(this.toMetadata())}copy(){return new Vg({...super.copy().toMetadata(),items:this.items.map(e=>e.toMetadata())})}toMetadata(){const e={...super.toMetadata(),items:this.items?.length>0?this.items.map(t=>t.toMetadata()):[]};return this.items?.length>0&&(delete e.expression,delete e.value),e}getApplicability(){return this.items?.length?this.items.flatMap(e=>e.getApplicability()):[]}isValid(){return this.items?.length>0&&this.items.every(e=>e.isValid())}getAffectedItems(){const t=(this.items??[]).map(i=>i.getAffectedItems()).flat();return[...super.getAffectedItems(),...t]}getRequiredItems(){return this.getAffectedItems()}}class Fg extends Ol{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionShowElement"}clone(){return new Fg(this.toMetadata())}copy(){return new Fg({...this.toMetadata(),uId:(0,l.generateGuid)()})}}class Wi{get(e){return"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionShowElement"===e.typeName?new Fg(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionHideElement"===e.typeName?new Eg(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionReadonlyElement"===e.typeName?new Pg(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionEditableElement"===e.typeName?new Mg(e):e.typeName===W1?new Tg(e):e.typeName===Y1?new Ag(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionFilterLookup"===e.typeName?new xg(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetFilter"===e.typeName?new Rg(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValue"===e.typeName?new kg(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValues"===e.typeName?new Vg(e):new ei(e)}}Wi.\u0275fac=function(e){return new(e||Wi)},Wi.\u0275prov=n.\u0275\u0275defineInjectable({token:Wi,factory:Wi.\u0275fac,providedIn:"root"});const Lg="Terrasoft.Core.BusinessRules.Models.Conditions.BusinessRuleGroupCondition";class Og extends Fp{constructor(e){super(e),this._businessRuleDesignExpressionFactory=new Yr,this.typeName="Terrasoft.Core.BusinessRules.Models.Conditions.BusinessRuleCondition",this.comparisonType=Mn.IsNull,e&&(e.leftExpression&&(this.leftExpression=this._businessRuleDesignExpressionFactory.get(e.leftExpression)),e.rightExpression&&(this.rightExpression=this._businessRuleDesignExpressionFactory.get(e.rightExpression)),null!=e.comparisonType&&(this.comparisonType=e.comparisonType))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),comparisonType:this.comparisonType}}copy(){const e=new Og({...this.toMetadata(),uId:(0,l.generateGuid)()});return e.leftExpression=this.leftExpression?.copy(),e.rightExpression=this.rightExpression?.copy(),e}isValid(){if(!super.isValid()||null==this.comparisonType)return!1;const e=Boolean(this.leftExpression?.isValid());switch(this.comparisonType){case Mn.IsNull:case Mn.IsNotNull:return e;case Mn.Equal:case Mn.NotEqual:return e&&Boolean(this.rightExpression?.isValid());default:return!0}}onDataSourceAttributeNameChanged(e,t,i){this.leftExpression.onDataSourceAttributeNameChanged(e,t,i),this.rightExpression?.onDataSourceAttributeNameChanged(e,t,i)}_getAttributeExpressionWarningMessage(e){if(!e.dataValueTypeName)return null;const t=Object.values(It).find(i=>i.name===e.dataValueTypeName)?.type;return t===l.DataValueType.MAXSIZE_TEXT?{message:"BusinessRules.Errors.MaxSizeInConditionLimitedWarningMessage",type:"warn"}:t===l.DataValueType.RICH_TEXT||t===l.DataValueType.Image?{message:"BusinessRules.Errors.NotSupportedInConditionTypesWarningMessage",type:"error"}:null}getWarningMessages(){const e=[];if(this.comparisonType===Mn.Equal||this.comparisonType===Mn.NotEqual){if(this.leftExpression instanceof Lp){const t=this._getAttributeExpressionWarningMessage(this.leftExpression);t&&e.push(t)}if(this.rightExpression instanceof Lp){const t=this._getAttributeExpressionWarningMessage(this.rightExpression);t&&e.push(t)}}return e}}class jg extends Fp{constructor(e){super(e),this.typeName=Lg,this.logicalOperation=r_.And,this.conditions=[],e&&(this.logicalOperation=e.logicalOperation,this.conditions=e.conditions?.map(t=>t.typeName===Lg?new jg(t):new Og(t))??[])}_copyConditions(){return this.conditions.map(e=>e.copy())}toMetadata(){return{...super.toMetadata(),logicalOperation:this.logicalOperation,conditions:this.conditions.map(e=>e.toMetadata())}}copy(){const e=new jg({...this.toMetadata(),uId:(0,l.generateGuid)()});return e.conditions=this._copyConditions(),e}isValid(){return!(!super.isValid()||!this.conditions)&&(0===this.conditions.length||this.conditions.every(t=>t.isValid()))}onDataSourceAttributeNameChanged(e,t,i){this.conditions.forEach(r=>r.onDataSourceAttributeNameChanged(e,t,i))}getWarningMessages(){return this.conditions.map(e=>e.getWarningMessages()).flat()}}class qP{get(e){return e.typeName===Lg?new jg(e):new Og(e)}}class Bg{get actions(){return Object.freeze(this._actions)}constructor(e){this._businessRuleDesignActionFactory=new Wi,this._businessRuleDesignConditionFactory=new qP,this._typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleCase",this._actions=[],this.uId=e?.uId||(0,l.generateGuid)(),this.condition=e?.condition?this._businessRuleDesignConditionFactory.get(e.condition):new Dg,e?.actions?.forEach(t=>{this._actions.push(this._businessRuleDesignActionFactory.get(t))})}_getActionIndex(e){return this.actions.findIndex(t=>t.uId===e.uId)}_actionsUpdateMetadata(e){const t=[];e.actions.forEach(r=>{t.push(r.uId);const s=this._businessRuleDesignActionFactory.get(r);-1!==this._getActionIndex(s)?this.updateAction(s):this.addAction(s)}),this.actions.filter(r=>!t.includes(r.uId)).forEach(r=>this.deleteAction(r))}_getActionsMetadata(){return this.actions.map(e=>e.toMetadata())}_getConditionMetadata(){const e=this.condition;return!e||e instanceof Dg?null:e.toMetadata()}_copyActions(){return this.actions.map(e=>e.copy())}_setActions(e){this._actions=[...e]}_copyCondition(){const e=this.condition;return!e||e instanceof Dg?new Dg:e.copy()}toMetadata(){const e=this._getConditionMetadata(),t=this._getActionsMetadata();return{typeName:this._typeName,uId:this.uId,condition:e,actions:t}}updateFromMetadata(e){e.condition&&this.updateCondition(this._businessRuleDesignConditionFactory.get(e.condition)),this._actionsUpdateMetadata(e)}addAction(e){-1===this._getActionIndex(e)?this._actions=[...this._actions,e.clone()]:console.warn(`Action ${e.uId} already exists`)}updateAction(e){const t=this._getActionIndex(e);-1!==t?(this._actions=[...this._actions],this._actions.splice(t,1,e.clone())):console.warn(`Action ${e.uId} not found`)}deleteAction(e){const t=this._getActionIndex(e);t<0||(this._actions=[...this._actions],this._actions.splice(t,1))}updateCondition(e){this.condition=e}copy(){const e=new Bg({...this.toMetadata(),uId:(0,l.generateGuid)()});return e._setActions(this._copyActions()),e.condition=this._copyCondition(),e}onDataSourceAttributeNameChanged(e,t,i){this.condition.onDataSourceAttributeNameChanged(e,t,i),this._actions.forEach(r=>r.onDataSourceAttributeNameChanged(e,t,i))}}class Ug{constructor(e){this._typeName="Terrasoft.Core.BusinessRules.Models.Trigger",this.name="",this.type=de.ChangeAttributeValue,this.scopeId="",this.uId=e?.uId||(0,l.generateGuid)(),e&&(this.name=e.name,this.type=Object.values(de)[e.type||0],this.scopeId=e.scopeId)}toMetadata(){const e=function $P(a,e){return Object.values(a).indexOf(e)}(de,this.type);return{typeName:this._typeName,uId:this.uId,name:this.name,type:e,scopeId:this.scopeId}}copy(){return new Ug({...this.toMetadata(),uId:(0,l.generateGuid)()})}}class Gg{get hasWarnings(){return this.getWarningMessages().length>0}constructor(e,t,i,r,s){this.caption=t,this.schemaName=i,this.schemaCaption=r,this.applicabilityType=s,this._typeName="Terrasoft.Core.BusinessRules.BusinessRule",this.name="",this.enabled=!0,this.triggers=[],this.cases=[],this.needToSave=!1,this.parentUId="",this.parentActionUId="",this.uId=e.uId,this.updateFromMetadata(e)}_updateCase(e){const t=this.cases.find(i=>i.uId===e.uId);t?t.updateFromMetadata(e):this.addCase(new Bg(e))}_casesUpdateMetadata(e){const t=[];e.cases?.forEach(i=>{t.push(i.uId),this._updateCase(i)}),this.cases=this.cases.filter(i=>t.includes(i.uId))}_copyCases(){return this.cases?.map(e=>e.copy())}_copyTriggers(){return this.triggers?.map(e=>e.copy())}_isValidCaption(){return this.caption.some(e=>e.value)}addTrigger(e,t,i=""){const r=Object.values(de).indexOf(t),s=new Ug({name:e,type:r,scopeId:i});return this.triggers.push(s),s.uId}addCase(e){this.cases.push(e)}getFirstCase(){let e=this.cases[0];return e||(e=new Bg,this.addCase(e),this.getFirstCase())}updateFromMetadata(e){this.parentUId=e.parentUId??"",this.parentActionUId=e.parentActionUId??"",this.name=e.name,this.enabled=e.enabled,this._casesUpdateMetadata(e),this.triggers=e.triggers?.map(t=>new Ug(t))??[]}toMetadata(){const e={typeName:this._typeName,uId:this.uId,cases:this.cases.map(t=>t.toMetadata()),triggers:this.triggers.map(t=>t.toMetadata()),name:this.name,enabled:this.enabled};return this.parentUId&&(e.parentUId=this.parentUId),this.parentActionUId&&(e.parentActionUId=this.parentActionUId),e}clone(){const e=new Gg(this.toMetadata(),this.caption.clone(),this.schemaName,this.schemaCaption,this.applicabilityType);return e.needToSave=this.needToSave,e}copy(){const e=this.name,t=this.caption.clone();t.forEach(r=>{r.value&&(r.value=`Copy ${r.value}`)});const i=new Gg({...this.toMetadata(),uId:(0,l.generateGuid)()},t,this.schemaName,this.schemaCaption,this.applicabilityType);return i.name=`${e} (copy)`,i.cases=this._copyCases(),i.triggers=this._copyTriggers(),i}isValid(){if(!this._isValidCaption())return!1;const t=this.getFirstCase(),i=t?.condition,r=t?.actions;return i?.isValid()&&r?.length>0&&r.every(s=>s.isValid())}showInvalid(){return!!this.needToSave&&!this.isValid()}onDataSourceAttributeNameChanged(e,t,i){this.cases.forEach(r=>r.onDataSourceAttributeNameChanged(e,t,i))}getWarningMessages(){const e=[],i=this.getFirstCase()?.condition;return i&&e.push(...i.getWarningMessages()),e}}var qy;let Q1=qy=class extends Et{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysSettingExpression",this.sysSettingName="",e&&(this.sysSettingName=e.sysSettingName)}toMetadata(){return{...super.toMetadata(),sysSettingName:this.sysSettingName}}copy(){return new qy({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.sysSettingName)}};var $y;Q1=qy=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysSettingExpression"}),(0,m.w6)("design:paramtypes",[Object])],Q1);let J1=$y=class extends Et{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysValueExpression",this.sysValueName="",e&&(this.sysValueName=e.sysValueName)}toMetadata(){return{...super.toMetadata(),sysValueName:this.sysValueName}}copy(){return new $y({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return super.isValid()&&Boolean(this.sysValueName)}};var Wy;J1=$y=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysValueExpression"}),(0,m.w6)("design:paramtypes",[Object])],J1);let K1=Wy=class extends Et{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterValueExpression",this.leftExpression="",e&&(this.leftExpression=e.leftExpression,this.rightExpression=new Op(e.rightExpression))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression,rightExpression:this.rightExpression?.toMetadata()}}copy(){const e=new Wy({...this.toMetadata(),uId:(0,l.generateGuid)()});return e.rightExpression=this.rightExpression.copy(),e}isValid(){return super.isValid()&&Boolean(this.leftExpression)&&Boolean(this.rightExpression)&&this.rightExpression.isValid()}getAffectedItem(){return{name:this.leftExpression}}};K1=Wy=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterValueExpression"}),(0,m.w6)("design:paramtypes",[Object])],K1);let X1=class extends Op{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleEmptyValueExpression"}isValid(){return!0}};X1=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleEmptyValueExpression"})],X1);class Yy{get parameterName(){return this._parameterName}set parameterName(e){this._parameterName=e}get expression(){return this._expression}set expression(e){this._expression=e}constructor(e){this._expressionFactory=new Yr,this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.ParameterMapping",this._parameterName="",this._expression=null,this.uId=e?.uId||(0,l.generateGuid)(),this._parameterName=e?.parameterName??"",this._expression=this._expressionFactory.get(e?.expression)}toMetadata(){return{typeName:this.typeName,uId:this.uId,expression:this._expression.toMetadata(),parameterName:this._parameterName}}copy(){return new Yy({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return""!==this.parameterName&&this.expression.isValid()}}var Qy;let eI=Qy=class extends Et{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFormulaExpression",this.parameterMappings=[],this.type=Ra.Formula,this.expressionSchema=new Fl;const t=e?.parameterMappings??[];this.parameterMappings=t.map(i=>new Yy(i)),this.expressionSchema=Fl.fromMetadata(e?.expressionSchema)}toMetadata(){return{...super.toMetadata(),parameterMappings:this.parameterMappings.map(e=>e.toMetadata()),expressionSchema:this.expressionSchema.toMetadata()}}copy(){return new Qy({...this.toMetadata(),uId:(0,l.generateGuid)()})}isValid(){return super.isValid()}clear(){this.expressionSchema=new Fl,this.parameterMappings=[]}};eI=Qy=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFormulaExpression"}),(0,m.w6)("design:paramtypes",[Object])],eI);let tI=class extends Et{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleContextExpression"}};function nI(a){return a&&"path"in a?a.path:""}function iI(a){if(aI(a))return function WP(a){const e=[];return a.conditions&&a.conditions.forEach(t=>{const i=iI(t);e.push(...i)}),e}(a);const e=a;return[nI(e.leftExpression),nI(e.rightExpression)].filter(t=>t)}function aI(a){return a.typeName===Lg}function rI(a){return a.map(e=>iI(e)).flat().filter(e=>null!=e)}function sI(a){return a.map(e=>function JP(a){return a.cases&&0!==a.cases.length?a.cases.map(e=>e.condition).filter(e=>null!=e):[]}(e)).flat()}tI=(0,m.gn)([Xn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleContextExpression"})],tI);const KP=[Ra.Const,Ra.SysValue,Ra.SysSetting],XP=new Set(KP);function oI(a){return!a||!!a.type&&XP.has(a.type)}function lI(a){if(!a)return!1;if(aI(a))return function e3(a){return!!a.conditions&&a.conditions.every(e=>lI(e))}(a);const e=a;return(!(0,Un.Z)(e.leftExpression)||!(0,Un.Z)(e.rightExpression))&&(oI(e.leftExpression)&&oI(e.rightExpression))}function cI(a){return a.some(e=>e.type===de.ContextReady)}class Qr{_canExecuteByConditionsAttributePaths(e,t){const i=e.filter(s=>s.type!==de.DataLoaded).map(s=>s.name);if(!i||0===i.length)return!1;const r=new Set(rI(t));return i.some(s=>r.has(s))}canExecute(e,t){if(!t||0===t.length)return!1;const i=sI(t),r=function t3(a,e){return!!cI(a)&&e.some(t=>lI(t))}(e.triggers,i),s=function n3(a,e){return!!cI(a)&&e.some(t=>t.cases?.some(i=>!i.condition))}(e.triggers,t);return!(!r&&!s)||this._canExecuteByConditionsAttributePaths(e.triggers,i)}}Qr.\u0275fac=function(e){return new(e||Qr)},Qr.\u0275prov=n.\u0275\u0275defineInjectable({token:Qr,factory:Qr.\u0275fac});class Yi{constructor(e){this._httpClient=e,this._businessRulesScopes=new Map,this._cachedLoadScopesRequests=new Map,this.serviceEndpoint="/ServiceModel/BusinessRulesManagerService.svc/",this.getBusinessRulesConfigMethodName="GetBusinessRules"}_getCachedBusinessRulesScopes(e){const t=[];return e.forEach(i=>{this._businessRulesScopes.has(i.scopeName)&&t.push({rules:this._businessRulesScopes.get(i.scopeName),scopeName:i.scopeName})}),t}_mapResponseToBusinessRules(e){return e?.businessRules&&0!==e.businessRules.length?e.businessRules.map(t=>{const i=JSON.parse(t.businessRulesConfig);return{scopeName:t.schemaName,rules:i}}):[]}_getContextsScopeNames(e){return e.map(t=>t.scopeName)}_getContextsScopeNamesRequestKey(e){return this._getContextsScopeNames(e).join("_")}_getCachedLoadScopesRequest(e){const t=this._getContextsScopeNames(e),i=[...this._cachedLoadScopesRequests.keys()].find(r=>t.every(s=>r.includes(s)));return this._cachedLoadScopesRequests.get(i)}_getNotLoadedBusinessRulesScopes(e){if(0===e.length)return(0,u.of)([]);const t=this._getContextsScopeNames(e),i=this._getCachedLoadScopesRequest(e);if(i)return i.request$.pipe((0,u.map)(c=>c.filter(d=>t.includes(d.scopeName))));const r=`${this.serviceEndpoint}${this.getBusinessRulesConfigMethodName}`,s={scopes:e.map(c=>({name:c.scopeName,type:c.scopeType,modelType:c.modelType}))},o=this._httpClient.post(r,s).pipe((0,u.map)(c=>this._mapResponseToBusinessRules(c)),(0,u.tap)(c=>{c.forEach(d=>{this._businessRulesScopes.has(d.scopeName)||this._businessRulesScopes.set(d.scopeName,d.rules)})}),(0,u.tap)(()=>{const c=this._getContextsScopeNamesRequestKey(e);this._cachedLoadScopesRequests.delete(c)}),(0,u.share)());return this._cachedLoadScopesRequests.set(this._getContextsScopeNamesRequestKey(e),{request$:o,scopeNames:t}),o}getBusinessRulesByContexts(e){const t=this._getCachedBusinessRulesScopes(e),i=e.filter(s=>!this._businessRulesScopes.has(s.scopeName));return this._getNotLoadedBusinessRulesScopes(i).pipe((0,u.map)(s=>[...t,...s]))}}Yi.\u0275fac=function(e){return new(e||Yi)(n.\u0275\u0275inject(D.HttpClient))},Yi.\u0275prov=n.\u0275\u0275defineInjectable({token:Yi,factory:Yi.\u0275fac});const uI=new Map([[0,de.ChangeAttributeValue],[1,de.ChangeAttributeProperty],[2,de.DataLoaded]]);function Jy(a){return uI.has(a)?uI.get(a):de.DataLoaded}class jl{constructor(e,t){this._businessRulesManager=e,this._businessRuleDesignActionFactory=t,this._scopeAttributes=[]}_filterTriggers(e,t){const i=t.filter(o=>o.scopeName===e.parentScopeId),s=t.find(o=>o.scopeName===e.scopeName).rules.map(o=>o.triggers).flat();return e.triggers.filter(o=>{if(o.type===de.ContextReady||o.type===de.DataLoaded)return!0;const c=s.some(g=>g&&g.name===o.name&&Jy(g.type)===o.type),p=i.flatMap(g=>g.rules.flatMap(C=>C.triggers)).some(g=>g.name===o.name&&Jy(g.type)===o.type);return c||p})}_filterAttributes(e){const t=this._scopeAttributes.find(s=>s.scopeName===e.scopeName).attributes,i=this._scopeAttributes.filter(s=>s.scopeName!==e.scopeName).flatMap(s=>[...s.attributes]);return e.attributes.filter(s=>t.includes(s.attributeName)||i.includes(s.attributeName)||s.isSignificant)}_cacheUsedAttributes(e){e.forEach(t=>{if(!this._scopeAttributes.find(i=>i.scopeName===t.scopeName)){const r=rI(sI(t.rules)),s=function QP(a,e){return a.flatMap(t=>t.cases.flatMap(i=>function YP(a,e){return a.flatMap(t=>e.get(t).getRequiredItems()).map(t=>t.name)}(i.actions,e)))}(t.rules,this._businessRuleDesignActionFactory);this._scopeAttributes.push({scopeName:t.scopeName,attributes:[...r,...s]})}})}filter(e){return this._businessRulesManager.getBusinessRulesByContexts(e).pipe((0,u.tap)(t=>this._cacheUsedAttributes(t)),(0,u.map)(t=>e.map(i=>({...i,attributes:this._filterAttributes(i),triggers:this._filterTriggers(i,t)}))))}}jl.\u0275fac=function(e){return new(e||jl)(n.\u0275\u0275inject(Yi),n.\u0275\u0275inject(Wi))},jl.\u0275prov=n.\u0275\u0275defineInjectable({token:jl,factory:jl.\u0275fac,providedIn:"root"});class Jr{canExecute(e,t,i){const r=i.map(s=>s.triggers).flat();return 0!==r.length&&r.some(s=>{const o=Jy(s.type);if(o===de.DataLoaded&&e.scopeType===Kn.Model)return e.triggers.some(d=>d.type===de.DataLoaded);if(!s.scopeId)return e.triggers.some(d=>d.name===s.name&&d.type===o);const c=t.find(d=>d.scopeId===s.scopeId);return null!=c&&c.triggers.some(d=>d.name===s.name&&d.type===o)})}}Jr.\u0275fac=function(e){return new(e||Jr)},Jr.\u0275prov=n.\u0275\u0275defineInjectable({token:Jr,factory:Jr.\u0275fac});class Kr{constructor(e,t,i,r,s,o,c){this._businessRulesManager=e,this._businessRulesTriggerExecutor=t,this._businessRulesConditionExecutor=i,this._httpClient=r,this._messageChannelService=s,this._featureService=o,this._contextFilter=c,this._businessRulesResponseEventName="BusinessRuleExecutionResponse",this._serviceUrl="ServiceModel/BusinessRulesEngineService.svc/Execute",this._businessRulesRequestEventName="BusinessRuleExecutionRequest",this._businessRuleDesignActionFactory=new Wi}_featureStates(){return(0,u.from)(this._featureService.getFeaturesState(["BRules-UseHttpChannel","BRules-DisableContextOptimization"])).pipe((0,h.U)(([e,t])=>({useHttpChannel:e,disableContextOptimization:t})))}_sendWebSocketMessage(e){const t=(0,l.generateGuid)();return e.businessRulesSessionId=t,new u.Observable(i=>{const r=this._messageChannelService.messageEvent$.pipe((0,h.U)(s=>s.body),(0,P.h)(s=>null!=s),(0,P.h)(s=>s.eventName===this._businessRulesResponseEventName),(0,P.h)(s=>s.businessRulesSessionId===t),(0,h.U)(s=>s.payload)).subscribe({next:s=>{r.unsubscribe(),s.success?i.next(s.businessRulesResponse):(console.error("An error occurred during business rules execution. "+s.errorInfo.errorCode+": "+s.errorInfo.message),i.next([])),i.complete()},error:s=>{r.unsubscribe(),console.error("An error occurred during business rules execution. "+s.errorCode+": "+s.message),i.next([]),i.complete()},complete:()=>{r.unsubscribe(),i.error("WebSocket channel closed")}});this._messageChannelService.sendMessage(e,i_.PTP).pipe((0,u.take)(1)).subscribe()})}_createWebSocketRequest(e){return{eventName:this._businessRulesRequestEventName,contexts:e}}_executeUsingWebSocket(e){const t=this._createWebSocketRequest(e);return this._sendWebSocketMessage(t)}_logErrorMessageAndReturnDefBusinessRuleResponse(e){return console.error("An error occurred during business rules execution. "+e.errorCode+": "+e.message),(0,u.of)([])}_executeUsingHttp(e){return this._httpClient.post(this._serviceUrl,{contexts:e},{headers:new D.HttpHeaders({"Content-Type":"application/json"})}).pipe((0,B.z)(t=>t.success?(0,u.of)(t.businessRulesResponse):this._logErrorMessageAndReturnDefBusinessRuleResponse(t.errorInfo)),(0,G.K)(t=>this._logErrorMessageAndReturnDefBusinessRuleResponse(t)))}_canExecuteBusinessRulesByContexts(e){return this._businessRulesManager.getBusinessRulesByContexts(e).pipe((0,h.U)(t=>{const i=t.filter(r=>r.rules&&r.rules.length>0);return 0!==i.length&&i.some(r=>{const s=e.find(p=>p.scopeName===r.scopeName),o=e.filter(p=>p.parentScopeId===s.scopeId),c=this._businessRulesTriggerExecutor.canExecute(s,o,r.rules),d=this._businessRulesConditionExecutor.canExecute(s,r.rules);return c||d})}))}_getContextsWithScope(e){return e.filter(t=>t.scopeName&&t.scopeId)}_getBusinessRuleActions(e){return e.cases.map(t=>t.actions).flat().filter(t=>t.enabled).map(t=>this._businessRuleDesignActionFactory.get(t))}_getBusinessRuleAffectedAttributes(e){return this._getBusinessRuleActions(e).map(i=>i.getAffectedItems()).flat()}_getAffectedAttributes(e){let t=e.rules.filter(i=>i.enabled).map(i=>this._getBusinessRuleAffectedAttributes(i)).flat();return t=this._getUniqueAffectedAttributes(t),t.forEach(i=>{i.scopeName=e.scopeName}),t}_getUniqueAffectedAttributes(e){const t=e.map(r=>[r.name,r]);return[...new Map(t).values()]}_execute(e){return this._featureStates().pipe((0,M.w)(({useHttpChannel:t,disableContextOptimization:i})=>(0,u.forkJoin)({useHttpChannel:(0,u.of)(t),useContext:i?(0,u.of)(e):this._contextFilter.filter(e)})),(0,M.w)(({useHttpChannel:t,useContext:i})=>t?this._executeUsingHttp(i):this._executeUsingWebSocket(i)))}execute(e){const t=this._getContextsWithScope(e);return 0===t.length?(0,u.of)([]):this._canExecuteBusinessRulesByContexts(e).pipe((0,M.w)(i=>i?this._execute(t):(0,u.of)([])))}getAffectedAttributes(e){var t=this;return(0,_.Z)(function*(){if(0===e.length)return[];const i=e.filter(o=>null!=o.scopeName),s=(yield(0,u.firstValueFrom)(t._businessRulesManager.getBusinessRulesByContexts(i))).filter(o=>o.rules&&o.rules.length>0);return 0===s.length?[]:s.map(o=>t._getAffectedAttributes(o)).flat()})()}}Kr.\u0275fac=function(e){return new(e||Kr)(n.\u0275\u0275inject(Yi),n.\u0275\u0275inject(Jr),n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(l.FeatureService),n.\u0275\u0275inject(jl))},Kr.\u0275prov=n.\u0275\u0275defineInjectable({token:Kr,factory:Kr.\u0275fac});class Xr{constructor(e){this._actionApplierFactory=e}applyRules(e,t){if(t&&t.length>0){const i=t.map(r=>{const s={id:r.scopeId,name:r.scopeName,type:r.scopeType,triggers:r.triggers};if(0===r.actions.length)return(0,u.of)(null);const o=r.actions.map(c=>this._actionApplierFactory.get(c).apply(e,s));return(0,u.forkJoin)(o)});return(0,u.forkJoin)(i)}return(0,u.of)(null)}}Xr.\u0275fac=function(e){return new(e||Xr)(n.\u0275\u0275inject(xt))},Xr.\u0275prov=n.\u0275\u0275defineInjectable({token:Xr,factory:Xr.\u0275fac});class jp{constructor(e){this._storageService=e,this._isBusinessRulesPropertiesPanelExpandedKey="isBusinessRulesPropertiesPanelExpanded",this._isBusinessRulePropertiesPanelExpanded=!0;const t=this._storageService.get(this._isBusinessRulesPropertiesPanelExpandedKey);this._isBusinessRulePropertiesPanelExpanded="true"===t,this.businessRulesPropertiesPanelExpandedChanged$=new u.BehaviorSubject(this._isBusinessRulePropertiesPanelExpanded)}changeBusinessRulePropertiesPanelExpandedState(e){void 0===e&&(e=!this._isBusinessRulePropertiesPanelExpanded),this._isBusinessRulePropertiesPanelExpanded=e,this._storageService.set(this._isBusinessRulesPropertiesPanelExpandedKey,`${e}`),this.businessRulesPropertiesPanelExpandedChanged$.next(e)}}jp.\u0275fac=function(e){return new(e||jp)(n.\u0275\u0275inject(Io))},jp.\u0275prov=n.\u0275\u0275defineInjectable({token:jp,factory:jp.\u0275fac});class Bl{}Bl.\u0275fac=function(e){return new(e||Bl)},Bl.\u0275mod=n.\u0275\u0275defineNgModule({type:Bl}),Bl.\u0275inj=n.\u0275\u0275defineInjector({providers:[Kr,Yi,Xr,xt,Jr,Qr]});var o3=f(97319),l3=f(99450),Bp=f(5490),Xy=f(22686);const Up=Symbol("InternalViewModelInjector"),zg="HasUnsavedData",Gp="IsChanged",eC="PrimaryModelMode",tC="BusinessRulesActivated",Hg="State",Zg=new n.InjectionToken("SCOPE_NAME"),dI=new n.InjectionToken("VIEW_EVENT_ZONE_NAME"),c3=new n.InjectionToken("INJECTION_CONTEXT");class it extends Array{constructor(...e){return super(),this._itemsChanged=new u.Subject,this._itemAttributeChanged=new u.Subject,this._destroyed$=new u.Subject,this._changed=new u.Subject,this._trackChanges=!0,this._createdItems=[],this._deletedItems=[],this._isDestroyed=!1,"number"==typeof e[0]?new Array(e[0]):([this._viewModelGenerator,this._viewModelConfig={},this._model,this._host,this._hostAttributeName]=e,this._measurePerformanceService=this._host?.[Up]?.get(le,null,{optional:!0}),this._featureValues=this._host?.[Up]?.get(te,{},{optional:!0})??{},Object.setPrototypeOf(this,Object.create(it.prototype)),this._subscribeItemsModelModesChanges(),this._subscribeItemsAttributesChanges(),new Proxy(this,{set:(t,i,r,s)=>{const o=t[i];return t[i]=r,this._trackChanges&&("length"===i&&r!==o?this._onItemsChanged():isNaN(parseInt(i))||this._onItemsChanged()),!0}}))}get changed(){return this._changed.asObservable().pipe((0,L.R)(this._destroyed$))}get itemAttributeChanged(){return this._itemAttributeChanged.asObservable().pipe((0,L.R)(this._destroyed$))}get isChanged(){return this.getChangedItems().length>0}get formApiModel(){return this._formApiModel||this._updateFormApiModelValues({emitEvent:!1}),this._formApiModel}_isItemPrimaryAttributeEqual(e,t){return(0,_.Z)(function*(){if(!e)return!1;const i=yield e[e.primaryAttributeName];return t.includes(i)})()}_insertItem(e,t){"number"!=typeof t&&(t=this.length),t=Math.max(t,0),t=Math.min(t,this.length),this.splice(t,0,e)}_generateItem(e){const t=()=>{const i=this._model?.createCollectionItemModel(V.Create),r=this._host?.[Up],s=this._viewModelGenerator.generate({viewModelConfig:this._viewModelConfig,modelConfig:i?{primaryDataSourceName:i.name}:void 0,models:i?[i]:void 0,parentViewModel:this._host,businessRulesActive:e.businessRulesActive??!1},r?n.Injector.create({providers:[{provide:Zg,useValue:null}],parent:r}):null).pipe((0,I.b)(o=>{i?.name&&(o.dataSchemas[i.name]=this._host.dataSchemas[i.name])}),(0,M.w)(o=>i?.name?o.create(i.name,e.initialModelValues).pipe((0,h.U)(()=>o)):(0,u.of)(o)),(0,I.b)(o=>{Object.entries(e.initialAttributeValues??{}).forEach(([c,d])=>o[c]=d),o._markAsPristine(e.initialAttributeValues??{}),this._model?.childrenChange()}));return(0,u.lastValueFrom)(s)};return this._measurePerformanceService?this._measurePerformanceService.measureCallback("ViewModelCollection.generateItem",()=>t()):t()}_mergeItems(e,t){const i=()=>{const r=(e[0]||t[0])?.primaryAttributeName;for(const s of t){const o=e.findIndex(c=>{const d=c.attributes?.[r],p=s.attributes?.[r];return d&&d===p});-1===o?e.push(s):e.splice(o,1,s)}return e};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.mergeItems",()=>i()):i()}_triggerChangesAfter(e){this._trackChanges=!1;const t=e.call(this);return this._trackChanges=!0,this._isDestroyed||this._onItemsChanged(),t}_onItemsChanged(){const e=this.map(t=>({item:t,itemModelMode:t?.getPrimaryModelMode?.()}));this._updateCollectionState(e,!0)}_subscribeItemsModelModesChanges(){this._itemsChanged.pipe((0,M.w)(()=>this._getItemsModelModesChanges()),(0,I.b)(e=>this._updateCollectionState([e],!1)),(0,L.R)(this._destroyed$)).subscribe()}_subscribeItemsAttributesChanges(){this._itemsChanged.pipe((0,M.w)(()=>this._getItemsAttributesChanges()),(0,P.h)(e=>!e.payload.silent),(0,I.b)(()=>this._itemAttributeChanged.next()),(0,L.R)(this._destroyed$)).subscribe()}_getItemsAttributesChanges(){const e=this.map(t=>t?.events$?.pipe((0,P.h)(i=>i.type===Ie.ChangeAttributeValue))).filter(Boolean);return e.length?(0,u.merge)(...e):u.EMPTY}_getItemsModelModesChanges(){const e=[...this,...this._deletedItems].map(t=>t?._getPrimaryModelModeChanges?.()?.pipe((0,h.U)(i=>({item:t,itemModelMode:i})))).filter(Boolean);return e.length?(0,u.merge)(...e):u.EMPTY}_updateCollectionState(e,t){this._trackChanges=!1;const i=e.map(r=>this._onItemModelModeChanged(r)).some(r=>Boolean(r));this._trackChanges=!0,(t||i)&&(this._updateFormApiModelValues(),this._updateFormApiModelPristineState(),this._changed.next(),this._itemsChanged.next())}_onItemModelModeChanged(e){const{item:t,itemModelMode:i}=e;if(!t||null==i)return!1;switch(i){case V.Create:return this._onCreateItem(t);case V.Update:return this._onUpdateItem(t);case V.Delete:return this._onDeleteItem(t);default:return!1}}_onCreateItem(e){const t=this._deletedItems.indexOf(e);return-1!==t?(this._deletedItems.splice(t,1),!0):(-1===this._createdItems.indexOf(e)&&this._createdItems.push(e),!1)}_onUpdateItem(e){const t=this._createdItems.indexOf(e);if(-1!==t)return this._createdItems.splice(t,1),!1;const i=this._deletedItems.indexOf(e);if(-1!==i){const r=this._deletedItems.splice(i,1);super.push(...r)}return!0}_onDeleteItem(e){const t=this._createdItems.indexOf(e),i=this._deletedItems.indexOf(e);return-1!==t?this._createdItems.splice(t,1):-1===i&&this._deletedItems.push(e),super.splice(this.indexOf(e),1),!0}_updateFormApiModelValues(e){if(this._featureValues.DisableBaseViewModelCollectionOptimization)return this._formApiModel??(this._formApiModel=new b.Oe([])),this._formApiModel.clear({emitEvent:!1}),this.filter(i=>i?.formApiModel).forEach(i=>{this._formApiModel.push(i.formApiModel,{emitEvent:!1})}),void(!1!==e?.emitEvent&&this._formApiModel.updateValueAndValidity());if(this._formApiModel&&this._formApiModel.length)this._formApiModel.clear({emitEvent:!1}),this.filter(i=>i?.formApiModel).forEach(i=>{this._formApiModel.push(i.formApiModel,{emitEvent:!1})}),!1!==e?.emitEvent&&this._formApiModel.updateValueAndValidity();else{const i=new b.Oe(this.filter(r=>r?.formApiModel)?.map(r=>r.formApiModel));this._formApiModel||(this._formApiModel=i),this._formApiModel.length||this._host?.formApiModel?.setControl(this._hostAttributeName,i)}}_updateFormApiModelPristineState(){const e=this.formApiModel.pristine,t=this.some(i=>i?.formApiModel?.dirty);t&&e?this.formApiModel.markAsDirty():!t&&!e&&this.formApiModel.markAsPristine()}_reload(e){const t=()=>{for(const s of[...this._deletedItems,...this])this.removeChildModel(s,{triggerNotification:!1});this._model?.childrenChange();const i=[],r=s=>i.push(s.destroy());return this._createdItems.forEach(r),this._createdItems.splice(0,this._createdItems.length),this._deletedItems.forEach(r),this._deletedItems.splice(0,this._deletedItems.length),this.forEach(r),this.splice(0,this.length,...e),(0,u.forkJoin)(i).pipe((0,Xy.d)(void 0),(0,h.U)(()=>{}))};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.reload",()=>t()):t()}removeChildModel(e,t){const i=t?.triggerNotification??!0,r=this._model?.name,s=e.getModelByName(r);this._model?.removeChild(s),i&&this._model?.childrenChange()}copyWithin(e,t,i){return this._triggerChangesAfter(()=>super.copyWithin(e,t,i))}fill(e,t,i){return this._triggerChangesAfter(()=>super.fill(e,t,i))}push(...e){return this._triggerChangesAfter(()=>super.push(...e))}reverse(){return this._triggerChangesAfter(()=>super.reverse())}shift(){return this._triggerChangesAfter(()=>super.shift())}sort(e){return this._triggerChangesAfter(()=>super.sort(e))}splice(e,t,...i){return this._triggerChangesAfter(()=>super.splice(e,t,...i))}unshift(...e){return this._triggerChangesAfter(()=>super.unshift(...e))}getChangedItems(){const e=[...this._deletedItems];return this.filter(i=>{if(i.attributes.IsChanged)return!0;const r=i.getPrimaryModelMode();return r&&r!==V.Update}).concat(e)}createItem(e){var t=this;return(0,_.Z)(function*(){const i=function(){var r=(0,_.Z)(function*(){const s=yield t._generateItem(e||{});return t._insertItem(s,e?.index),s});return function(){return r.apply(this,arguments)}}();return t._measurePerformanceService?t._measurePerformanceService.measureCallback("ViewModelCollection.createItem",()=>i()):i()})()}getPrimaryAttributeValues(){return Promise.all(this.map(e=>e?.[e?.primaryAttributeName]))}findByPrimaryAttribute(e){var t=this;return(0,_.Z)(function*(){for(const i of t)if(yield t._isItemPrimaryAttributeEqual(i,[e]))return i})()}filterByPrimaryAttributes(e){var t=this;return(0,_.Z)(function*(){const i=[];for(const r of t)(yield t._isItemPrimaryAttributeEqual(r,e))&&i.push(r);return i})()}merge(e){const t=()=>{this._triggerChangesAfter(()=>{const i=this._mergeItems([...this],e);super.splice(0,this.length,...i),this._createdItems.splice(0,this._createdItems.length),e instanceof it&&this._mergeItems(this._deletedItems,e._deletedItems)})};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.merge",()=>t()):t()}reload(e){return(0,u.lastValueFrom)(this._reload(e))}remove(e){const[t,i]="number"==typeof e?[e,this[e]]:[this.indexOf(e),e];if(t>=0&&t<this.length)return this.splice(t,1),(0,u.lastValueFrom)(i.destroy())}clear(){return this.reload([])}moveTo(e,t){if(t>=this.length)throw new l.ArgumentOutOfRangeException("Target index cannot be greater than collection length");const i=this.indexOf(e);i===t||t<0||this._triggerChangesAfter(()=>{super.splice(t,0,super.splice(i,1)[0])})}destroy(){this._isDestroyed=!0,this._host=null;const e=this._reload([]);return this._formApiModel.clear({emitEvent:!1}),this._itemAttributeChanged.complete(),this._itemsChanged.complete(),this._destroyed$.next(),this._destroyed$.complete(),(0,u.lastValueFrom)(e)}}const pI="calculated",mI=new n.InjectionToken("View model attribute creator factory");class Ul{constructor(e,t,i,r,s,o,c){this._crtControlStateAdapter=e,this._validatorTypeResolver=t,this._viewModelGenerator=i,this._attributeCreator=r,this._viewModelRepository=s,this._attributesTopologicalSorting=o,this._injector=c,this._featureValues=this._injector.get(te,null,{optional:!0}),this._measurePerformanceService=this._injector.get(le)}_generateAttributes(e,t,i){const r=this._attributesTopologicalSorting.sort(t,e._attributeConfigs);return Promise.all(r.map(([s,o])=>e._systemAttributes.includes(s)?(console.warn(`Overriding of system attributes is denied. Attribute name:"${s}"`),Promise.resolve()):(i.disableDefaultConfig||(o??(o={})),e._attributeConfigs[s]=o,o?"viewModelConfig"in o||"viewModelName"in o?o.isCollection?this._generateNestedModelCollectionAttribute(e,s,o,i):this._generateNestedModelAttribute(e,s,o,i):I1(o)?this._generateCalculatedAttribute(e,s,o,i):this._generateModelAttribute(e,s,o,i):this._removeViewModelAttribute(e,s))))}_generateNestedModelCollectionAttribute(e,t,i,r){var s=this;return this._measurePerformanceService.measureCallback(`BaseViewModelAttributeGenerator.nestedCollectionAttribute.${t}`,(0,_.Z)(function*(){const o=e.getBoundDataSourceNameByAttributePath(t),c=e.getModelByName(o),d="viewModelConfig"in i?i.viewModelConfig:yield(0,u.lastValueFrom)(s._viewModelRepository.resolveModelConfig(i.viewModelName)),p=new it(s._viewModelGenerator,d,c,e,t);s._registerOrSetFormControl(e.formApiModel,t,p.formApiModel);const g=e.attributes[t];e.attributes[t]=p,s._defineNestedModelAttribute(e,t,i,r),s._subscribeOnCollectionChanged(e,t,p,r),void 0!==g&&r.onChangeAttributeValue(t,p,g)}))}_defineNestedModelAttribute(e,t,i,r){Tp.defineAsyncAttribute(e,t,i,()=>e.attributes[t],c=>{const d=e.attributes[t];e.attributes[t]=c,d instanceof it&&c instanceof it&&this._subscribeOnCollectionChanged(e,t,c,r),r.onChangeAttributeValue(t,c,d)})}_generateNestedModelAttribute(e,t,i,r){var s=this;return this._measurePerformanceService.measureCallback(`BaseViewModelAttributeGenerator.nestedModelAttribute.${t}`,(0,_.Z)(function*(){const o="viewModelConfig"in i?i.viewModelConfig:i.viewModelName,c=e?.[Up];return(0,u.lastValueFrom)(s._viewModelGenerator.generate({viewModelConfig:o,parentViewModel:e},c?n.Injector.create({providers:[{provide:Zg,useValue:null}],parent:c}):null).pipe((0,u.map)(d=>{s._registerOrSetFormControl(e.formApiModel,t,d.formApiModel);const p=e.attributes[t];e.attributes[t]=d,s._defineNestedModelAttribute(e,t,i,r),void 0!==p&&r.onChangeAttributeValue(t,d,p)})))}))}_subscribeOnCollectionChanged(e,t,i,r){if(e._collectionSubscription.has(t)){const o=e._collectionSubscription.get(t);o.unsubscribe(),e._subscriptions.remove(o)}const s=new u.Subscription;s.add(i.changed.subscribe(()=>{r.onChangeAttributeValue(t,i,null)})),s.add(i.itemAttributeChanged.subscribe(()=>{r.onChangeAttributeValue(t,i,null)})),e._collectionSubscription.set(t,s),e._subscriptions.add(s)}_generateCalculatedAttribute(e,t,i,r){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.generateCalculatedAttribute.${t}`,()=>{this._attributeCreator.create(pI)?.defineAttribute({viewModel:e,attribute:t,attributeConfig:i,generateOptions:r})})}_addDataValueTypePropertyConfig(e,t){t.dataValueTypeName&&e.push({name:x1,defaultValue:l.DataValueType[t.dataValueTypeName]})}_disableSystemAttributes(e,t,i){if(!0!==this._featureValues?.DisableBlockingSystemColumns&&e.getBoundDataSchemaAttributeByAttributePath(t)?.isSystem){let s=i.find(o=>"readonly"===o.name);s||(s={name:"readonly"},i.push(s)),s.locked=!0,s.defaultValue=!0}}_getCrtControlPropertiesConfig(e,t,i){const r=Object.entries(i.properties??[]).map(([s,o])=>({name:s,defaultValue:o.defaultValue,locked:!0===o.locked}));return this._addDataValueTypePropertyConfig(r,i),this._disableSystemAttributes(e,t,r),r}_generateModelAttribute(e,t,i,r){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.generateModelAttribute.${t}`,()=>{const s=e.attributes[t],o=i?.value,c=this._getCrtControlPropertiesConfig(e,t,i),d=Rp.create({name:t,value:o,crtControlStateAdapter:this._crtControlStateAdapter,validatorTypeResolver:this._validatorTypeResolver,validatorInfo:e._validators[t],propertiesConfig:c,injectionContext:e._injectionContext??mg(e)?._injectionContext});e._subscriptions.add(d.onChanged.subscribe(C=>{e.attributes[t]=C.value,r.onChangeAttributeValue(C.name,C.value,C.oldValue)})),e._subscriptions.add(d.onPropertyChanged.subscribe(({name:C,value:v,oldValue:T})=>{r.onChangeAttributeValue(`${t}:${C}`,v,T)})),e._crtControls.set(t,d),this._registerOrSetFormControl(e.formApiModel,t,d.formControl),e.attributes[t]=o??null;const p=e._getDataSourceAttributeDataValueType(t);this._attributeCreator.create(p).defineAttribute({viewModel:e,attribute:t,attributeConfig:i,control:d}),void 0!==s&&r.onChangeAttributeValue(t,o,s)})}_registerOrSetFormControl(e,t,i){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.registerOrSetFormControl.${t}`,()=>{this._featureValues?.DisableAttributeOnlyRegisteringControl||e.contains(t)?e.setControl(t,i):e.registerControl(t,i)})}_removeViewModelAttribute(e,t){return delete e._attributeConfigs[t],delete e.attributes[t],delete e[t],Promise.resolve()}generate(e,t,i){var r=this;return this._measurePerformanceService.measureCallback("BaseViewModelAttributeGenerator.generateAttributes",(0,_.Z)(function*(){yield r._generateAttributes(e,t,i),!r._featureValues?.DisableAttributeOnlyRegisteringControl&&e.formApiModel.updateValueAndValidity()}))}}Ul.\u0275fac=function(e){return new(e||Ul)(n.\u0275\u0275inject(zi),n.\u0275\u0275inject(hg),n.\u0275\u0275inject(Zi),n.\u0275\u0275inject(mI),n.\u0275\u0275inject(Bi),n.\u0275\u0275inject(wl),n.\u0275\u0275inject(n.Injector))},Ul.\u0275prov=n.\u0275\u0275defineInjectable({token:Ul,factory:Ul.\u0275fac,providedIn:"root"});class Gl{_defineResourceAttribute(e,t,i,r,s){return new u.Observable(o=>{const c=e._getDataSourceAttributeCaption(r,s);if(this._defineResourceProperty(t,i,c),r.includes(".")){const d=r.split(".")[1];this._defineResourceProperty(t,d,c)}o.next(),o.complete()})}_defineResourceProperty(e,t,i){e[t]||Object.defineProperty(e,t,{get:()=>Promise.resolve(i??""),configurable:!0})}_getResourceNameByPath(e){const t=e.split(".");return t.length>1?t.join("_"):e}generate(e,t){return Object.entries(t||{}).map(([i,r])=>{const s=e[ho][Pa.string],o=this._getResourceNameByPath(i);return this._defineResourceAttribute(e,s,o,i,r)})}}Gl.\u0275fac=function(e){return new(e||Gl)},Gl.\u0275prov=n.\u0275\u0275defineInjectable({token:Gl,factory:Gl.\u0275fac,providedIn:"root"});var hI=f(18364);class zl{constructor(e,t,i){this._sysSettingsService=e,this._dataSchemaRepository=t,this._featureValues=i,this._searchComparisonTypeSysSettingCode="StringColumnSearchComparisonType"}_getParameterValue(e,t,i){if("string"==typeof t){if(t.startsWith("@requestPayload")){const r=t.replace("@requestPayload.","");return(0,pe.Z)(i,r)}if(t.startsWith("$"))return e.attributes[t.substring(1)];if(e.attributes[t])return e.attributes[t]}return t}_applyFilterMacros(e,t){let i=null;switch(typeof t){case"object":i=JSON.stringify((0,hI.ZE)(t));break;case"string":i=t;break;default:return t}let s=!1;return[...i.matchAll(/##ViewModelMacro\.\$([^#]+)##/g)].forEach(o=>{const c=o[1],d=(0,pe.Z)(e.attributes,c);let p=d?.toString();"object"==typeof d&&(s=!0,p=JSON.stringify(d)),i=i.replace(o[0],p)}),"object"==typeof t||s?JSON.parse(i):i}_getSysSettingsValue(e){return this._sysSettingsService.getByCodes(e).pipe((0,h.U)(t=>t.values),(0,h.U)(t=>{const i={};return e.forEach(r=>{const s=t[r];s&&(i[r]=s.value)}),i}))}_createPrimaryDisplayColumnValueFilter(e){const t=this._searchComparisonTypeSysSettingCode;return(0,u.lastValueFrom)(this._getSysSettingsValue([t]).pipe((0,h.U)(i=>1===i[t]?l.ComparisonType.Contain:l.ComparisonType.Start_with),(0,h.U)(i=>({type:l.ModelParameterType.PrimaryDisplayValueFilter,value:e,comparisonType:i}))))}_createColumnValueFilter(e,t,i){const r=t;return Promise.resolve({type:l.ModelParameterType.ColumnValue,value:{attributePath:r.attributePath,attributeValue:this._getParameterValue(e,r.attributeValue,i)}})}_getDataSourceFilteringParameters(e,t){const r=e._dataSourcesInfos.get(t).getFilteringConfig();return e._checkFilteringAttributes(t,r),0===r.length?Promise.resolve([]):Promise.all(r.map(s=>e[s.name])).then(s=>s.map(o=>({type:l.ModelParameterType.Filter,value:o})))}_getPrimaryAttributeName(e,t){var i=this;return(0,_.Z)(function*(){if(!t)return null;let r=Object.values(e.dataSchemas).find(s=>s.name===t);return r||(r=yield(0,u.lastValueFrom)(i._dataSchemaRepository.get(t))),r?.primaryAttributeName})()}_getParameterRelationsConfigs(e){return e.relationsConfigs||[]}_createRelationParameter(e,t){const i={...e},r=this._getParameterRelationsConfigs(i);return i.relationsConfigs=[{dataSchemaName:t.dataSchemaName,attributePath:t.attributePath,relationPath:t.relationPath},...r],i}_validateAllowedRelations(e,t,i){const s=i?.relationPath?.split(".")?.shift(),o=e.dataSchemas[t],c=o?.findAttributeByName(s);if(o&&c&&o.primaryAttributeName!==s&&c.dataValueType!==l.DataValueType.Lookup&&!this._featureValues.DataSourceAllowRelationsByNonLookupColumn){const d="Filtration of data sources by page data is currently supported by lookup and primaryAttribute fields only",p=new Error(`${d}, please see the console for more details`);throw p.stack=`${d} , data source name: ${t}, relation config: ${JSON.stringify(i)}`,p}}_createRelationParameterWithAttributeValue(e,t,i,r){var s=this;return(0,_.Z)(function*(){const o={...i},c=s._getParameterRelationsConfigs(o),d=e.dataSchemas[t],p=r.relationPath.split("."),g=p.shift(),C=d.findAttributeByName(g);if(d.primaryAttributeName!==g&&C.dataValueType!==l.DataValueType.Lookup&&s._featureValues.DataSourceAllowRelationsByNonLookupColumn)return o.type=l.ModelParameterType.ColumnValue,o.value={attributePath:r.attributePath,attributeValue:r.value},o.relationsConfigs=c,o;const v={dataSchemaName:r.dataSchemaName,attributePath:r.attributePath,relationPath:r.relationPath};o.value=r.value,o.type=l.ModelParameterType.PrimaryColumnValue,d.primaryAttributeName!==g&&(v.dataSchemaName=C.referenceSchemaName);const T=d.type!==l.DataSchemaType.Entity?v.dataSchemaName:r.dataSchemaName;return v.relationPath=0===p.length?yield s._getPrimaryAttributeName(e,T):p.join("."),o.relationsConfigs=[v,...c],o})()}_convertToRelationParameters(e,t,i,r){var s=this;return(0,_.Z)(function*(){const o=[];s._validateAllowedRelations(e,t,r);for(const c of i){const d=r.useAttributeValue?yield s._createRelationParameterWithAttributeValue(e,t,c,r):s._createRelationParameter(c,r);o.push(d)}return o})()}_getRelationParameters(e,t){const i=e._modelDependencies[t]||[];if(0===i.length)return Promise.resolve([]);const r=i.map(s=>{const o=s.relationPath.split("."),c=o.shift(),d=e.dataSchemas[c],p={dataSchemaName:d.name,attributePath:s.attributePath,relationPath:o.join(".")},g=o.shift(),v=e._dataSourcesInfos.get(c).getMappedAttributeNames(g)?.[0]??null,T=e.getModelMode(c),j=e.getIsDirty(v)||T===V.Create||T===V.Copy||d.type!==l.DataSchemaType.Entity;if(v&&j){p.useAttributeValue=!0;const Y=e.attributes[v];p.value=Y?.value?Y.value:Y}return{relatedModelName:c,relationConfig:p}}).map(({relatedModelName:s,relationConfig:o})=>this._getModelLoadParameters(e,s,null,null,!0,!1).then(c=>this._convertToRelationParameters(e,s,c,o)));return Promise.all(r).then(s=>s.flat())}_getPagingConfigRowCount(e,t){return"string"==typeof t?(0,Un.Z)(e.attributes[t])?0:e.attributes[t]:t}_getPagingConfigRowsOffset(e,t,i,r){const s=e._dataSourcesInfos.get(r).collectionViewModelAttributeName,o=e.attributes[s]?.length??0;if("number"==typeof t)throw new Error("Rows offset parameter cannot be set to number");return t||i!==l.DataSourceLoadType.LoadNext?t||i!==l.DataSourceLoadType.Reload?(e.attributes[t]=(0,Un.Z)(e.attributes[t])?0:e.attributes[t],i===l.DataSourceLoadType.Reload?e.attributes[t]:e.attributes[t]+o):0:o}_getModelPagingConfig(e,t,i,r){return t?Promise.resolve({rowCount:this._getPagingConfigRowCount(e,t.rowCount),rowsOffset:this._getPagingConfigRowsOffset(e,t.rowsOffset,i,r)}):Promise.resolve(null)}_getModelSortingConfig(e,t){const i=t?.attributeName;return i&&e.attributes[i]?Promise.all(e.attributes[i].map(function(){var r=(0,_.Z)(function*(s){return{columnName:yield s.columnName,direction:yield s.direction}});return function(s){return r.apply(this,arguments)}}())).then(r=>({columns:r})):Promise.resolve(null)}_updateLastEventLoadParameters(e,t,i,r){i&&0!==i.length?e._lastEventLoadParameters.set(t,i):!0!==r&&e._lastEventLoadParameters.set(t,[{type:l.ModelParameterType.Empty,value:""}])}_getModelLoadParameters(e,t,i,r,s,o){const c=this.getModelParameters(e,i,r).then(d=>(!0!==o&&this._updateLastEventLoadParameters(e,t,d,s),!0!==s?d:e._lastEventLoadParameters.get(t)||[{type:l.ModelParameterType.Never,value:""}]));return Promise.all([c,this._getDataSourceFilteringParameters(e,t),this._getRelationParameters(e,t)]).then(([d,p,g])=>[...d,...p,...g])}getModelParameters(e,t,i){if(i?.parameters&&(t=[...t,...i.parameters]),!t||0===t.length)return Promise.resolve([]);const r=t.map(s=>{switch(s.type){case l.ModelParameterType.PrimaryColumnValue:return Promise.resolve({type:s.type,value:this._getParameterValue(e,s.value,i)});case l.ModelParameterType.Filter:return Promise.resolve({type:s.type,value:this._applyFilterMacros(e,s.value)});case l.ModelParameterType.PrimaryDisplayValueFilter:return this._createPrimaryDisplayColumnValueFilter(this._getParameterValue(e,s.value,i));case l.ModelParameterType.ColumnValue:return this._createColumnValueFilter(e,s.value,i)}});return Promise.all(r)}getModelLoadParameters(e,t,i,r=l.DataSourceLoadType.Load,s,o,c){const d=t.name,p=r===l.DataSourceLoadType.Load?null:t.getPagingConfig(),g=t.getSortingConfig();return Promise.all([this._getModelLoadParameters(e,d,i,s,o,c),this._getModelPagingConfig(e,p,r,d),this._getModelSortingConfig(e,g)])}}zl.\u0275fac=function(e){return new(e||zl)(n.\u0275\u0275inject(De),n.\u0275\u0275inject(Qn),n.\u0275\u0275inject(te))},zl.\u0275prov=n.\u0275\u0275defineInjectable({token:zl,factory:zl.\u0275fac,providedIn:"root"});class ti{get _isChanged(){return console.warn("Warning: The `_isChanged` property of the view-model is deprecated. It will be removed in future versions. Use `IsChanged` or `HasUnsavedData` attribute instead."),Object.keys(this._attributeConfigs).filter(e=>!(0,O.Z)(this._attributeConfigs[e].modelConfig)).some(e=>this.formApiModel.controls[e]?.dirty)}get _scopes(){return[...this._eventScopes??[]]}get _injectionContext(){return this._context}get[Up](){return this.injector}get primaryAttributeName(){if(!this._primaryModelName)return this._defaultPrimaryAttributeName in this._attributeConfigs?this._defaultPrimaryAttributeName:null;const t=this.dataSchemas[this._primaryModelName].primaryAttributeName,i=this._dataSourcesInfos.get(this._primaryModelName);return this._getMappedAttributeName(i,t)}get PrimaryModelMode(){return this.getPrimaryModelMode()}get State(){return mg(this).attributes[Hg]}constructor(e,t,i,r,s,o,c,d){this.viewModelGenerator=e,this.injector=t,this.viewModelConfig=i,this.resources=r,this._eventScopes=o,this._modelsInitConfig=c,this._defaultPrimaryAttributeName="Id",this._systemAttributes=[],this._businessRulesActive=!0,this._dropdownPageSizeSettingsCode="DropdownPageSize",this._dataSourcesInfos=new Map,this._attributesToDataSourceNameMap=new Map,this._dropdownPageSize=null,this._replayEvents$=new u.ReplaySubject,this._loadedDataSources=new Set,this._conflictedModels=[],this.__destroyed=!1,this._disableViewModelWaitingForAsyncTasks=!1,this._disableViewModelLoadUnblockingThread=!1,this._blockFieldsAffectedByBusinessRules=!1,this._viewModelAttributeChangeEventOptions=new UM({preventAttributeChangeRequest:!1,preventStateChange:!0,preventRunBusinessRules:!0}),this._asyncTasksExecutingSubject=new u.BehaviorSubject(new Set),this._modelsRequestedToLoad=new Set,this._attributesAffectedByBusinessRules=[],this._businessRulesAreActivated=!1,this._modelLoaded$=new u.Subject,this._attributeConfigs={},this._eventsSubject$=new u.Subject,this._collectionSubscription=new Map,this._crtControls=new Map,this._subscriptions=new u.Subscription,this._businessRulesActivated$=new u.BehaviorSubject(!1),this.attributes={},this.dataSchemas={},this.events$=(0,u.merge)(this._eventsSubject$,this._replayEvents$),this.getAttributeViewModelConfig=p=>this._attributeConfigs[p]?.viewModelConfig?.attributes,this.initDependencies(),this.handlerChain=l.HandlerChainService.instance,this.formApiModel=s||this.formBuilder.group({}),this.parent=d,this._viewModelDataDelayerService&&!this.parent&&this._viewModelDataDelayerService.setViewModel(this)}get _destroyed(){return this.__destroyed}get IsChanged(){return Promise.resolve(this.attributes[Gp])}set IsChanged(e){}get HasUnsavedData(){return Promise.resolve(this.attributes[zg])}set HasUnsavedData(e){}get BusinessRulesActivated(){return Promise.resolve(this._businessRulesAreActivated)}set BusinessRulesActivated(e){}_executeWithOptions(e,t){let i;try{return i=this._viewModelAttributeChangeEventOptions.getOptions(),this._viewModelAttributeChangeEventOptions.setOptions(t),e()}finally{this._viewModelAttributeChangeEventOptions.setOptions(i)}}_setSystemAttributeValue(e,t){const i=this.attributes[e];this.attributes[e]=t,this._executeWithOptions(()=>{this._fireChangeAttributeEvent({type:Ie.ChangeAttributeValue,payload:{attributeName:e,oldValue:i,value:t}})},{preventStateChange:!0,preventRunBusinessRules:!0})}_fireChangeAttributeEvent(e){var t;(t=e.payload).silent??(t.silent=this._viewModelAttributeChangeEventOptions.getAsSilent()),Object.assign(e.payload,this._viewModelAttributeChangeEventOptions.getOptions()),this._eventsSubject$.next(e)}_getViewModelValidators(e){const t=this.viewModelConfig.attributes[e]??{};return("validators"in t&&t.validators)??{}}_initDataSourceValidators(){return this._measurePerformanceService?.measure(`ViewModel.initDataSourceValidators.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>(this._validators={},this._dataSourcesInfos.forEach(e=>{e.attributesMap.forEach((t,i)=>{const r=this.viewModelConfig.attributes[i]??{};if("modelConfig"in r&&r.modelConfig?.ignoreValidators)return;this._validators[i]=this._validators[i]||[];const s=this._getDataSourceAttributeSchema(e,t);if(s?.validators)for(const[o,c]of Object.entries(s.validators))if(c?.type){const d=this._injectionContext??mg(this)?._injectionContext,p=this.validatorTypeResolver.getValidator(c.type,{validationParameters:c?.params,injectionContext:d}),g=this._getViewModelValidators(i),C=Object.values(g).find(v=>v.type===c.type);this._validators[i].push({name:o,instance:p,disabled:Boolean(C?.disabled),params:c?.params})}})}),(0,u.of)(null)))}_initSchemaValidators(e){this._measurePerformanceService.measure(`ViewModel.initSchemaValidators.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>{Object.entries(e||{}).forEach(([t])=>{const i=this._getViewModelValidators(t);this._validators[t]=this._validators[t]||[];for(const[r,s]of Object.entries(i))if(s?.type){const o=this._injectionContext??mg(this)?._injectionContext,c=this.validatorTypeResolver.getValidator(s.type,{validationParameters:s.params,injectionContext:o});this._validators[t].push({name:r,instance:c,disabled:s.disabled,params:s?.params})}})})}_waitAsyncValidation(){return(0,u.from)(this.waitAsyncTasksFinish()).pipe((0,M.w)(()=>this.formApiModel.statusChanges.pipe((0,ze.O)(this.formApiModel.status),(0,P.h)(e=>"pending"!==e.toLowerCase()),(0,we.P)(),(0,h.U)(()=>null))))}_getDataSourceAttributeCaption(e,t){let i=this.resourceFinderService.findLocalizableValue(t);const r=this._getDataSourceInfoByViewModelAttributePath(e);if(null==i&&r){const s=r.getDataSourceAttributePath(e),o=s?this._getDataSourceAttributeSchema(r,s):"";i=o?o.caption:this._translateService.instant("BaseViewModel.DataSourceAttributeRemoved")}return i}_getResourcesStrings(){const e=this.resources?.strings??{};return{...e,...this._getResourceStringsByAttributes(e)}}_generateResourceAttribute(){this[ho]={},this[ho][Pa.string]={};const e=this._getResourcesStrings();return this._attributeResourceGenerator.generate(this,e)}_getBoundAttributeNames(){const e=new Set;return this._dataSourcesInfos.forEach(t=>{for(const i of t.mappedViewModelAttributes)e.add(i)}),Array.from(e.values())}_getDataSourceInfoByViewModelAttributePath(e){const t=this.getBoundDataSourceNameByAttributePath(e);return this._dataSourcesInfos.has(t)?this._dataSourcesInfos.get(t):null}_getResourceStringsByAttributes(e){const t=Object.keys(e);return this._getBoundAttributeNames().filter(r=>!t.includes(r)).reduce((r,s)=>(r[s]={},r),{})}_getDataSourceAttributeSchema(e,t){return this.dataSchemas[e.name]?.attributes?.find(i=>i.name===t)}_generatePrimaryAttributes(){return this._measurePerformanceService.measure(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>{const e=Array.from(this._dataSourcesInfos.values()).map(t=>{const i=t.name,r=this.dataSchemas[i],o=(t.includePrimaryAttributes?[r?.primaryAttributeName,r?.primaryDisplayAttributeName]:[]).filter(c=>c&&!t.getIsDataSourceAttributePathExists(c)).map(c=>{const d=(0,l.generateGuid)(),p=`${i}_${c}_${d}`,g=r.findAttributeByName(c),C={modelConfig:{path:`${i}.${c}`},dataValueTypeName:l.DataValueType[g.dataValueType]};return this._attributeConfigs[p]=C,t.addNewAttribute(p,C),this._attributeGenerate({[p]:C})});return 0===o.length?(0,u.of)(null):(0,u.forkJoin)(o)});return 0===e.length?(0,u.of)(null):(0,u.forkJoin)(e).pipe(this._measurePerformanceService.measure$(`ViewModel.generatePrimaryAttributes.forkJoin.${this._injectionContext?.id}.parent.${!!this.parent}`))})}_getDataSourceDto(e){const t={},i=this._dataSourcesInfos.get(e);return i.attributesMap.forEach((r,s)=>{if(!i.getIsMapOnCollection(s)){const o=this.attributes[s],c=this._getDataSourceAttributeSchema(i,r);o||c?.dataValueType!==l.DataValueType.Lookup?t[r]=o:t[r]=null}}),(0,u.of)(t)}_checkFilteringAttributes(e,t){if(t.some(r=>(0,Un.Z)(r.name)))throw new Error(`Filtering attributes for ${e} are not valid!`)}_attributeGenerate(e,t){return this._attributeGenerator.generate(this,e,{...t,onChangeAttributeValue:(i,r,s)=>{this._fireChangeAttributeEvent({type:Ie.ChangeAttributeValue,payload:{attributeName:i,value:r,oldValue:s,silent:this._viewModelAttributeChangeEventOptions.getAsSilent()}})}})}_getDataSourceNamesAffectedByFilteringAttribute(e){return[...this._dataSourcesInfos.entries()].filter(([,t])=>t.isCollection).filter(([t])=>{const i=this.getModelByName(t);return i?.isLoaded||i?.isLoading}).filter(([t,i])=>{const r=i.getFilteringConfig(),s=r.some(o=>o?.name===e&&o?.loadOnChange);return s&&this._checkFilteringAttributes(t,r),s}).map(([t])=>t)}_createRequestsForReloadingDataSources(e){return e.map(t=>({type:"crt.LoadDataRequest",$context:this,dataSourceName:t,config:{loadType:l.DataSourceLoadType.Reload}}))}_dispatchStartLoadModelAttributes(e){const t=`${Wn.AttributeLoading}_${this._context?.id}_${Object.keys(e)}`;this._measurePerformancePageLoadService?.addTask(t,{targetTask:!0}),this._replayEvents$.next({type:Ie.StartLoadModelAttributes,payload:e})}_dispatchFinishLoadModelAttributes(e){const t=`${Wn.AttributeLoading}_${this._context?.id}_${Object.keys(e)}`;this._measurePerformancePageLoadService?.removeTask(t,{targetTask:!0}),this._replayEvents$.next({type:Ie.FinishLoadModelAttributes,payload:e})}_processEmptyLoadDataForCollection(e,t){var i=this;return(0,_.Z)(function*(){if(!e.isCollection||!e.collectionViewModelAttributeName)return;const r=t.find(d=>d.type===l.ModelParameterType.PrimaryColumnValue);if(!r)return;const s=r.value?.value,o=i.attributes[e.collectionViewModelAttributeName];if(!s||!o)return;const c=yield o.findByPrimaryAttribute(s);c&&o.remove(c)})()}_loadDynamicModel(e){const t=e.attributeName,i=e.dataSourceConfig,r=e.dataSourceName||Tp.createDynamicDataSourceNameFromAttributeName(this,t),s=Tp.createAttributeConfig(this,r,e),o=this._createAndSetDataSourceInfo(r,t,s);return this._defineOrUpdateAttribute(t,s),this._setupSortingAttribute(e.sortingConfig),this._setupFiltersAttributes(e.filtersConfig),this._modelGenerator.generateOne(i,r).pipe((0,I.b)(c=>this._markModelAsCollection(c,o)),(0,I.b)(c=>this._addModelToModelMap(c,r)),(0,I.b)(c=>this._addModelDependencies(c,e.dependencies)),(0,M.w)(c=>(0,u.forkJoin)([(0,u.of)(c),this._addDataSchemaToDataSchemas(c)])),(0,M.w)(([c])=>(0,u.forkJoin)([(0,u.of)(c),(0,u.of)(this._replaceAttributesToDataSourceNameMap(o))])),(0,M.w)(([c])=>(0,u.forkJoin)([(0,u.of)(c),this._reGenerateResourcesAttributes()])),(0,M.w)(([c])=>this._loadModelData({model:c,dataSourceInfo:o,parametersConfig:[],loadType:l.DataSourceLoadType.Reload,useLastLoadParameters:e.useLastLoadParameters}).pipe(this._measurePerformanceService.measure$(`ViewModel.loadDynamicModel.${this._injectionContext?.id}.parent.${!!this.parent}.datasourceName.${e.dataSourceName}`))))}_defineOrUpdateAttribute(e,t){this.attributes[e]?this._attributeConfigs[e]=t:this._attributeGenerate({[e]:t})}_createAndSetDataSourceInfo(e,t,i){const s=Yn.getFromViewModelConfig({attributes:{[t]:i}}).get(e);return this._dataSourcesInfos.set(e,s),s}_setupSortingAttribute(e){if(!e?.default)return;const t=e.attributeName;this.attributes[t]=e.default}_setupFiltersAttributes(e){e?.forEach(t=>{if(!t.value)return;const i=t.name,r=t.value;this[i]=r.value||r})}_addModelToModelMap(e,t){this._modelsMap.set(t,e)}_addModelDependencies(e,t){this._modelDependencies[e.name]=t||[]}_addDataSchemaToDataSchemas(e){return e.getSchema().pipe((0,I.b)(t=>this.dataSchemas[e.name]=t))}_reGenerateResourcesAttributes(){return(0,u.forkJoin)([...this._generateResourceAttribute(),(0,u.of)(null)])}_replaceAttributesToDataSourceNameMap(e){const t=this._getDataSourceAttributesMap(e),i=[...Array.from(this._attributesToDataSourceNameMap.entries()),...t];this._initializeAttributesToDataSourceNameMap(i)}_getMappedAttributeName(e,t){if(!e)return"";const i=e.getMappedAttributeNames(t);return i&&0!==i.length?i[0]:""}_getMappedAttributeNames(e,t){return e?e.getMappedAttributeNames(t):[]}_getModelAttributesToLoad(e,t){const i=this._dataSourcesInfos.get(e.name);if(t?.attributes){const r=t.attributes.filter(s=>{const o=this._getMappedAttributeName(i,s);return!this.getIsDirty(o)});return this._getModelDependentAttributes(e,r)}return i.attributes.map(r=>r.path)}_loadStaticModel(e,t,i,r,s,o){const c=this.getModelByName(e),d=this._dataSourcesInfos.get(c.name);return this._loadModelData({model:c,dataSourceInfo:d,parametersConfig:t,loadType:i,payload:r,useLastLoadParameters:s,doNotUpdateLastLoadParameters:o})}_waitDataDelay(e){return this._viewModelDataDelayerService?.shouldBeDelayed()?(0,u.of)(e).pipe((0,l3.j)(()=>this._viewModelDataDelayerService.loadTrigger$)):(0,u.of)(e)}_updateTrackedAttributes(e){const t=this._modelDependencies[e.name];if(!t||!e.isAggregate)return;const i=/^.{0,2}\[\w+:\w+(:\w+)?]/;t.forEach(r=>{const s=r.relationPath.split(".")[0],o=this.getModelByName(s),c=e.affectedAttributes.filter(p=>p.schemaName===o.dataSchemaName).map(p=>p.path.split(".")[0]).filter(p=>!i.test(p)),d=new Set([...r.trackByAttributes??[],...c]);r.trackByAttributes=[...d.values()]})}_getDependOnModelsNames(e){const t=this._modelDependencies[e];if(!t)return[];const i=t.map(r=>r.relationPath.split(".")[0]);return[...new Set(i)]}_waitForModelLoad(e){var t=this;return(0,_.Z)(function*(){const i=t.getModelByName(e);!i||i?.isLoaded||i.mode===V.Create||i.mode===V.Copy||(yield(0,u.firstValueFrom)(t._modelLoaded$.pipe((0,P.h)(r=>r===e),(0,Ee.q)(1))))})()}_waitForModelsLoad(e){var t=this;return(0,_.Z)(function*(){if(0===e.length||t._isDesignTime)return;const i=e.map(r=>t._waitForModelLoad(r));yield Promise.all(i)})()}_getAffectedAttributes(e,t,i){const s=this.dataSchemas[e].primaryAttributeName,o=[...t];return s&&!t.includes(s)&&i?.length>0&&i?.[0][s]&&o.push(s),o}_getModelLoadParameters(e,t,i,r,s,o){return this._modelParametersBuilder.getModelLoadParameters(this,e,t,i,r,s,o).catch(c=>(console.error(c),this._notifyService.error({message:c.message,translate:!1}),[[{type:l.ModelParameterType.Never}],{},{}]))}_loadModelData({model:e,dataSourceInfo:t,parametersConfig:i,loadType:r,payload:s,useLastLoadParameters:o,doNotUpdateLastLoadParameters:c}){const d=e.name;this._modelsRequestedToLoad.add(d);const p=this._getModelAttributesToLoad(e,s),g=s?.attributes;if(g&&0===p.length)return(0,u.of)([]);if(this._conflictedModels.includes(d))return(0,u.of)([]);const C=this._getDataSourceMappingAttributes(t,p),v=this._getLoadTypeForDataSource(t,r);if(v===l.DataSourceLoadType.LoadNext&&this._loadedDataSources.has(d))return(0,u.of)([]);this._dispatchStartLoadModelAttributes(C);const T=!this._isSyncForModelAllowed(e)||null===g||e.mode===V.Init,j=this._getDependOnModelsNames(d);return this._checkAndLoadUnloadedDependOnModels(j),(0,u.from)(this._waitForModelsLoad(j)).pipe((0,M.w)(Y=>this._getModelLoadParameters(t,i,v,s,o,c)),(0,B.z)(Y=>this._waitDataDelay(Y)),(0,M.w)(([Y,oe,Xt])=>e.load({attributes:p,parameters:Y,options:{loadType:r,pagingConfig:oe,sortingConfig:Xt}}).pipe(this._measurePerformanceService.measure$(`ViewModel.loadStaticModel.model.load.${this._injectionContext?.id}.parent.${!!this.parent}.modelName.${d}`),(0,G.K)(Ue=>this._handleLoadErrorResponse(Ue,[])),(0,I.b)(()=>this._updateTrackedAttributes(e)),(0,I.b)(Ue=>{Ue.length<oe?.rowCount?this._loadedDataSources.add(d):this._loadedDataSources.delete(d)}),(0,I.b)(Ue=>{0===Ue.length&&this._dispatchFinishLoadModelAttributes(C)}),(0,B.z)(Ue=>0===Ue.length?(0,u.from)(this._processEmptyLoadDataForCollection(t,Y)).pipe((0,h.U)(()=>Ue)):(0,u.of)(Ue)))),(0,h.U)(Y=>({data:Y,viewModelAttributes:t.getModelDto(Y)})),(0,M.w)(({data:Y,viewModelAttributes:oe})=>this.setValue(oe,{collectionLoadType:v===l.DataSourceLoadType.Reload?Ao.Reload:Ao.Merge,silent:!0}).pipe((0,I.b)(()=>this._markAsPristine(oe)),(0,h.U)(()=>Y))),(0,I.b)(()=>this._modelLoaded$.next(d)),(0,M.w)(Y=>this._runBusinessRulesForModel(e,Y)),(0,I.b)(Y=>{if(T)return;const oe=this._getAffectedAttributes(d,p,Y);this._reloadDependentModels(e,oe)}),(0,I.b)(()=>{e.setLoadedState(),this._dispatchFinishLoadModelAttributes(C)}))}_checkAndLoadUnloadedDependOnModels(e){const t=e.filter(i=>{const r=!this._modelsRequestedToLoad.has(i),s=!v1(this.getModelByName(i));return r&&s});this._requestReloadModels(t)}_createChangeAttributeTriggers(e){return e.map(t=>({type:de.ChangeAttributeValue,name:t,scopeId:""}))}_runBusinessRulesForModel(e,t,i=!1,r=[]){const s=this._dataSourcesInfos.get(e.name);if(s.isCollection||!this._businessRulesProcessingEnabled||!this._businessRulesActive)return(0,u.of)(t);const o=t[0]??{},c=i?[...s.mappedViewModelAttributes]:Object.keys(o).flatMap(g=>this._getMappedAttributeNames(s,g)).filter(g=>null!=g),d=this._createChangeAttributeTriggers(c),p={type:de.DataLoaded,name:e.name,scopeId:""};return(0,u.forkJoin)([this._getModelBusinessRuleContext(s.name,[p,...r]),(0,u.of)(this._getViewModelBusinessRuleContext([...d,...r,p]))]).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRulesForModel.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,M.w)(g=>this._runBusinessRulesForContexts(g)),(0,h.U)(()=>t))}_runInitialBusinessRules(){if(!this._businessRulesProcessingEnabled||!this._businessRulesActive)return(0,u.of)(null);const e={type:de.ContextReady,name:null,scopeId:""};return this._prepareBusinessRulesContexts([e]).pipe(this._measurePerformanceService.measure$(`ViewModel.runInitialBusinessRules.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,B.z)(t=>0===t.length?(0,u.of)(null):this._runBusinessRulesForContexts(t)))}_createViewModelAttributesValues(e,t){const i=Object.entries(this.dataSchemas),[,r]=i.find(([o])=>o===e),s={};for(const o of r.attributes){const c=t[o.name],d=this.getViewModelAttributePath(e,o.name);d&&(s[d]=c??null)}return s}_createModelData(e,t){const i=this._dataSourcesInfos.get(e),r=this._getDataSourceMappingAttributes(i);this._dispatchStartLoadModelAttributes(r);const s=this.getModelByName(e),o=s.disableSync,c=this._getModelAttributesToLoad(s,null);return s.disableSync=!0,s.create(t).pipe((0,M.w)(d=>{const p=this._createViewModelAttributesValues(e,d);return this.setValue(p).pipe((0,I.b)(()=>this._forEachControl(p,g=>{g.markAsPristine(),g.markAsUntouched()})))}),(0,I.b)(()=>{s.disableSync=o,this._modelLoaded$.next(e)}),(0,M.w)(()=>this._runBusinessRulesForModel(s,[],!0)),(0,I.b)(()=>{this._isSyncForModelAllowed(s)&&this._reloadDependentModels(s,c)}),(0,I.b)(()=>{this._dispatchFinishLoadModelAttributes(r),s.setLoadedState()}),(0,h.U)(()=>null))}_copyModelData(e,t,i){const r=this._dataSourcesInfos.get(e),s=this._getDataSourceMappingAttributes(r);this._dispatchStartLoadModelAttributes(s);const c=this.getModelByName(e),d=this._getModelAttributesToLoad(c,null),p=c.disableSync;return c.disableSync=!0,c.copy(t,i).pipe((0,G.K)(g=>this._handleLoadErrorResponse(g,{})),(0,h.U)(g=>({data:[g],viewModelAttributes:r.getModelDto([g])})),(0,M.w)(({data:g,viewModelAttributes:C})=>this.setValue(C).pipe((0,I.b)(()=>this._markAsPristine(C)),(0,h.U)(()=>g))),(0,I.b)(()=>{c.disableSync=p,this._modelLoaded$.next(e)}),(0,M.w)(g=>this._runBusinessRulesForModel(c,g,!0)),(0,I.b)(()=>{this._isSyncForModelAllowed(c)&&this._reloadDependentModels(c,d)}),(0,I.b)(()=>{this._dispatchFinishLoadModelAttributes(s),c.setLoadedState()}),(0,B.z)(()=>(0,u.of)(undefined)))}_getDataSourceMappingAttributes(e,t=null){const i=t??e.attributes.map(s=>s.path),r=Object.fromEntries(i.map(s=>[this._getMappedAttributeName(e,s),!0]));return e.collectionViewModelAttributeName&&(r[e.collectionViewModelAttributeName]=!0),r}_handleLoadErrorResponse(e,t){return console.error(e),this._notifyService.error({message:e.message,translate:!1}),(0,u.of)(t)}_canExecuteBusinessRulesByModelAttributeValue(e,t,i){return!t||!e||this._isModelAttributeValueValid(e,t,i)}_canExecuteBusinessRulesByViewModelAttributeValue(e,t){const i=this._getDataSourceInfoByViewModelAttributePath(e);if(i){const r=i.getDataSourceAttributePath(e);return this._canExecuteBusinessRulesByModelAttributeValue(i,r,t)}return!0}_getContextAttributeValue(e){return e?.displayValue?e.value:e instanceof Date?(0,l.toLocalISOString)(e):e}_getNormalizedContextAttributeValue(e,t,i){return!0!==i&&t?[l.DataValueType.RICH_TEXT,l.DataValueType.Image].includes(l.DataValueType[t])?null:l.DataValueType[t]===l.DataValueType.MAXSIZE_TEXT&&e?e.slice(0,500):e:e}_getHasValueContextAttributeValue(e,t){return!!(t&&l.DataValueType[t]===l.DataValueType.Boolean||null!=e&&""!==e)}_getViewModelAttributeInfos(e,t,i){return Object.keys(t).filter(r=>!(t[r]instanceof it)).map(r=>{if(t[r]instanceof ti)return this._getViewModelAttributeInfos(e?`${e}.${r}`:r,t[r]?.attributes??{},i);const s=this._attributeConfigs[r]?.dataValueTypeName,o=this._getContextAttributeValue(t[r]),c=this._getNormalizedContextAttributeValue(o,s,i);return{name:e?`${e}.${r}`:r,value:c??null,displayValue:t[r]?.displayValue,dataValueTypeName:s,hasValue:this._getHasValueContextAttributeValue(o,s)}}).flat()}_runBusinessRulesForContexts(e){const t=`${Wn.RunningBusinessRules}-${(0,l.generateGuid)()}`;return this._onAsyncTaskStarted(t),(0,u.of)(e).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRules.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,h.U)(i=>i&&i.length>0?i.filter(r=>!(0,Un.Z)(r)).filter(r=>r.triggers&&r.triggers.length>0):[]),(0,B.z)(i=>{if(0===i.length)return(0,u.of)(null);const r=i.map(s=>({scopeName:s.scopeName,scopeId:s.scopeId,scopeType:s.scopeType,triggers:s.triggers}));return this._toggleControlsAffectedByBusinessRules(!1,r),this._businessRulesEngine.execute(i).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRules.execute.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,I.b)(s=>{s.forEach(o=>{const c=r.find(d=>d.scopeId===o.scopeId&&d.scopeName===o.scopeName&&d.scopeType===o.scopeType);o.triggers=c?.triggers??[]})}),(0,M.w)(s=>s?this._businessRulesApplier.applyRules(this,s):(0,u.of)(null)),(0,I.b)(()=>{this._toggleControlsAffectedByBusinessRules(!0,r)}))}),(0,I.b)(()=>this._onAsyncTaskFinished(t)))}_createViewModelContext(e,t){return{scopeType:Kn.ViewModel,scopeName:this._scopeName,scopeId:this._scopeName,scopeState:$i.Unknown,parentScopeId:null,attributes:t,triggers:e}}_getViewModelBusinessRuleContext(e){const t=this._featureValues["BRules-EnableCompareLargeAttributeValues"],i=this._getViewModelAttributeInfos(null,this.attributes,t);return this._createViewModelContext(e,[...i].map(r=>({attributeName:r.name,value:r.value,displayValue:r.displayValue,dataValueTypeName:r.dataValueTypeName,hasValue:r.hasValue})))}_prepareModelBusinessRuleTrigger(e,t){return t.map(i=>{if(i.type===de.DataLoaded||i.type===de.ContextReady)return i;const r=this._getDataSourceInfoByViewModelAttributePath(i.name);return r&&r.name===e?{type:de.ChangeAttributeValue,name:r.getDataSourceAttributePath(i.name),scopeId:""}:null}).filter(i=>null!=i)}_getModelContextScopeStateType(e){switch(e.mode){case V.Init:return $i.Init;case V.Create:return $i.Create;case V.Copy:return $i.Copy;case V.Update:return $i.Update;default:return $i.Unknown}}_getModelBusinessRuleContext(e,t){const i=this._dataSourcesInfos.get(e),r=this._modelsMap.get(e),s=this.dataSchemas[e],o=this._prepareModelBusinessRuleTrigger(e,t),c=this._getModelContextScopeStateType(r);return this._getDataSourceDto(e).pipe((0,h.U)(d=>({...r._getPersistedState(),...d})),(0,h.U)(d=>({enableCompareLargeAttributeValues:this._featureValues["BRules-EnableCompareLargeAttributeValues"],modelDto:d})),(0,h.U)(({enableCompareLargeAttributeValues:d,modelDto:p})=>Object.entries(p).map(([g,C])=>{let v;const T=this._getMappedAttributeName(i,g);if(T)v=this._attributeConfigs[T]?.dataValueTypeName;else{const oe=s.findAttributeByName(g);v=l.DataValueType[oe.dataValueType]}const j=this._getContextAttributeValue(C);return{attributeName:g,value:this._getNormalizedContextAttributeValue(j,v,d),displayValue:C?.displayValue,dataValueTypeName:v,hasValue:this._getHasValueContextAttributeValue(j,v),isSignificant:g===s.primaryAttributeName}})),(0,h.U)(d=>({scopeType:Kn.Model,scopeName:r.dataSchemaName,scopeId:e,scopeState:c,parentScopeId:this._scopeName,attributes:d,triggers:o,modelType:r.getDataSource()?.type})))}_prepareDataSourceNamesForBusinessRules(){return 0===this._modelsMap.size?[]:[...this._modelsMap.values()].filter(e=>!this._dataSourcesInfos.get(e.name).isCollection).map(e=>e.name)}_getModelsBusinessRuleContexts(e){return this._prepareDataSourceNamesForBusinessRules().map(i=>i?this._getModelBusinessRuleContext(i,e):(0,u.of)(null))}_prepareBusinessRulesContexts(e){const t=this._getModelsBusinessRuleContexts(e);if(!this._scopeName)return 0===t.length?(0,u.of)([]):(0,u.forkJoin)([...t]);const r=[(0,u.of)(this._getViewModelBusinessRuleContext(e)),...t];return 0===r.length?(0,u.of)([]):(0,u.forkJoin)(r)}_isAttributeChange(e){return!e.attributeName?.includes(":")}_businessRulesSubscribeOnChangeAttributes(){if(!this._businessRulesProcessingEnabled)return;const e=this.events$.pipe((0,P.h)(i=>i.type===Ie.ChangeAttributeValue),(0,P.h)(i=>this._isAttributeChange(i.payload)),(0,P.h)(i=>!i.payload.silent),(0,P.h)(i=>!i.payload?.preventRunBusinessRules),(0,P.h)(i=>{const r=i.payload;return this._canExecuteBusinessRulesByViewModelAttributeValue(r.attributeName,r.value)}),(0,P.h)(()=>this._businessRulesActive),(0,h.U)(i=>i.payload.attributeName)),t=e.pipe((0,I.b)(()=>this._onAsyncTaskStarted(Wn.DebouncingBusinessRules)),(0,Ev.f)(e.pipe((0,Tv.b)(500))),(0,h.U)(i=>Array.from(new Set(i))),(0,h.U)(i=>this._createChangeAttributeTriggers(i)),(0,B.z)(i=>this._prepareBusinessRulesContexts(i)),(0,I.b)(()=>this._onAsyncTaskFinished(Wn.DebouncingBusinessRules)),(0,P.h)(i=>i.length>0),(0,B.z)(i=>this._runBusinessRulesForContexts(i)));this._subscriptions.add(t.subscribe())}_subscribeOnChangeAttributes(){const e=this.events$.pipe((0,P.h)(t=>t.type===Ie.ChangeAttributeValue),(0,I.b)(t=>{const i=t,r=i.payload.attributeName,s=this.getBoundDataSourceName(r),o=this.getModelByName(s),d=this._dataSourcesInfos.get(s)?.attributesMap.get(r);d&&o?.attributeChanged(d,i.payload?.preventStateChange??i.payload?.silent)}));this._subscriptions.add(e.subscribe())}_getHasRelation(e,t,i){return 0!==e.map(s=>{const o=s.relationPath.split("."),c=s.trackByAttributes??[],d=o.shift(),p=o.shift();return c.push(p),{rootModelName:d,trackedAttributes:c}}).filter(({rootModelName:s})=>s===t).filter(({trackedAttributes:s})=>!!this._dataSourcesInfos.get(t).isCollection||i.some(o=>s.includes(o))).length}_getDependentModelsNames(e,t=[]){return e?Object.entries(this._modelDependencies).filter(([i])=>i!==e).filter(([,i])=>this._getHasRelation(i,e,t)).map(([i])=>i).map(i=>[i,...this._getDependentModelsNames(i)]).flat():[]}_getIsModelDataChanged(e){if(!this.getModelByName(e)?.isLoaded)return!1;const i=this._dataSourcesInfos.get(e);if(i.isCollection){const s=i.collectionViewModelAttributeName,o=this.attributes[s];return!!o&&o.isChanged}return i.getMappedAttributes().some(s=>this.getIsDirty(s))}_requestReloadModels(e){this._createRequestsForReloadingDataSources(e).forEach(i=>{this._ngZone.runOutsideAngular(()=>this.processRequest(i))})}_isModelAttributeValueValid(e,t,i){return!(this._getDataSourceAttributeSchema(e,t)?.dataValueType===l.DataValueType.Lookup&&null!=i&&!i.value)}_canReloadModelDependentData(e,t){return!!e.canReloadDependentData(t)||!this._conflictedModels.includes(e.name)&&this._getDependentModelsNames(e.name,[t]).length>0}_getModelDependentAttributes(e,t){return[...t,...t.map(i=>e.getDependentAttributesNames(i)).flat()]}_getChangedModelsNames(e){return e.filter(t=>this._getIsModelDataChanged(t))}_showChangedModelsDataConflictNotification(){this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.NotificationRequest",$context:this,message:"BaseViewModel.RefreshModelDataConflict",translate:!0}))}_isSyncForModelAllowed(e){return e.allowSync}_subscribeOnReloadDataEvents(){const e=this.events$.pipe((0,P.h)(()=>this._modelSynchronizationEnabled),(0,P.h)(t=>t.type===Ie.ChangeAttributeValue),(0,P.h)(t=>!0!==t.payload.silent),(0,h.U)(t=>({modelName:this.getBoundDataSourceNameByAttributePath(t.payload.attributeName),attributeName:t.payload.attributeName,attributeValue:t.payload.value})),(0,P.h)(({modelName:t})=>null!=t),(0,h.U)(({modelName:t,attributeName:i,attributeValue:r})=>{const s=this._dataSourcesInfos.get(t),o=s?.attributesMap.get(i);return{model:this.getModelByName(t),dataSourceInfo:s,modelAttribute:o,attributeValue:r}})).pipe((0,P.h)(({model:t})=>null!=t),(0,P.h)(({dataSourceInfo:t})=>!t.isCollection),(0,P.h)(({model:t})=>this._isSyncForModelAllowed(t)),(0,P.h)(({dataSourceInfo:t,modelAttribute:i,attributeValue:r})=>this._isModelAttributeValueValid(t,i,r)),(0,P.h)(({model:t,modelAttribute:i})=>this._canReloadModelDependentData(t,i))).pipe((0,I.b)(({model:t,dataSourceInfo:i,modelAttribute:r,attributeValue:s})=>{const o=this._getModelDependentAttributes(t,[r]),c=Object.fromEntries(o.map(d=>[this._getMappedAttributeName(i,d),!0]));this._dispatchStartLoadModelAttributes(c),t.reloadDependentData(r,s).pipe((0,M.w)(d=>{if(0===d.length)return(0,u.of)(d);const p=i.getModelDto(d);return this.setValue(p,{silent:!0}).pipe((0,M.w)(()=>this._runBusinessRulesForModel(t,d)))}),(0,I.b)(()=>this._reloadDependentModels(t,[r])),(0,I.b)(()=>this._dispatchFinishLoadModelAttributes(c))).subscribe()}));this._subscriptions.add(e.subscribe())}_subscribeOnChangeRequests(){const e=this.events$.pipe((0,P.h)(t=>t.type===Ie.ChangeAttributeValue),(0,B.z)(t=>{const i=t.payload.attributeName,r=this._attributeConfigs[i];return Array.isArray(r?.change)?r.change:[r?.change]}),(0,P.h)(t=>null!=t),(0,h.U)(t=>({type:t.request,$context:this,scopes:this._scopeName?[this._scopeName]:[],...t.params})),(0,I.b)(t=>this._ngZone.runOutsideAngular(()=>this.handlerChain.process(t))));this._subscriptions.add(e.subscribe())}_subscribeOnFilteringEvents(){const e=this.events$.pipe((0,P.h)(t=>t.type===Ie.ChangeAttributeValue),(0,h.U)(t=>{const i=t.payload.attributeName;return this._getDataSourceNamesAffectedByFilteringAttribute(i)}),(0,h.U)(t=>this._createRequestsForReloadingDataSources(t)),(0,I.b)(t=>{t.forEach(i=>{this._ngZone.runOutsideAngular(()=>this.processRequest(i))})}));this._subscriptions.add(e.subscribe())}_saveModel(e,t,i){const r="MODEL_SAVING";return this.maskService.showMask(r,this),Object.keys(this.formApiModel.controls).forEach(s=>this.formApiModel.controls[s].updateValueAndValidity()),this._saveModelAndGetDataSourceSaveResult(e,t).pipe((0,Bp.x)(()=>this.maskService.hideMask(r,this)),(0,G.K)(s=>{const o="string"==typeof s?s:s?.message||s?.errorInfo;return!0===i?.silent?(0,u.of)({success:!1,rowsAffected:0,errorInfo:o}):(0,u.throwError)(()=>new Error(o))}))}_saveModelAndGetDataSourceSaveResult(e,t){return(0,u.from)(this.isValid(e)).pipe((0,M.w)(i=>{if(!i){const r=this.injector.get(w.sK);return(0,u.of)({success:!1,rowsAffected:0,errorInfo:r.instant("HomePage.DialogMessages.RequiredFieldsAreNotFilled")})}return(0,u.forkJoin)({parameters:this._modelParametersBuilder.getModelParameters(this,t),dto:this._getDataSourceDto(e)}).pipe((0,B.z)(({parameters:r,dto:s})=>this.getModelByName(e).insertOrUpdate(s,r)))}))}_deleteModel(e,t,i){return(0,u.from)(this._modelParametersBuilder.getModelParameters(this,t,i?.payload)).pipe((0,B.z)(r=>this.getModelByName(e).delete(r)))}_initSubscriptions(){return this._measurePerformanceService.measure(`ViewModel.initSubscriptions.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>(this._subscribeOnFilteringEvents(),this._subscribeModelsEvents(),this._subscribeOnChangeAttributes(),this._subscribeOnChangeRequests(),this._subscribeOnReloadDataEvents(),this._businessRulesSubscribeOnChangeAttributes(),(0,u.of)(null)))}_getDataSchemas(){if(this.models&&0!==this.models.length){const e=this.models.map(t=>t.getSchema().pipe((0,h.U)(i=>[t.name,i])));return(0,u.combineLatest)(e).pipe((0,Ee.q)(1),(0,h.U)(t=>Object.fromEntries(t)))}return(0,u.of)({})}_setAttributesDefaultValues(e){var t=this;return(0,u.from)((0,_.Z)(function*(){let i=Object.entries(t.dataSchemas);e&&(i=i.filter(([r])=>r===e));for(const[r,s]of i){const o={};for(const c of s.attributes){const d=yield(0,u.lastValueFrom)(c.defaultValue,{defaultValue:null});if(!(0,Un.Z)(d)){const p=t.getViewModelAttributePath(r,c.name);p&&(o[p]=d)}}t.setValue(o).subscribe()}})())}_generateDataSourcesInfo(){return this._dataSourcesInfos=Yn.getFromViewModelConfig(this.viewModelConfig,this.models),(0,u.of)(this._dataSourcesInfos)}_generateAttributesToDataSourceNameMap(e){const t=Array.from(e.values()).map(i=>this._getDataSourceAttributesMap(i)).flat();return this._initializeAttributesToDataSourceNameMap(t),(0,u.of)(this._attributesToDataSourceNameMap)}_initializeAttributesToDataSourceNameMap(e){this._attributesToDataSourceNameMap=new Map(e)}_getDataSourceAttributesMap(e){const i=e.getMappedAttributes().map(r=>[r,e.name]);return e.isCollection&&i.push([e.collectionViewModelAttributeName,e.name]),i}_getSysSettingsValue(e){return this.sysSettingsService.getByCodes(e).pipe((0,h.U)(t=>t.values),(0,h.U)(t=>{const i={};return e.forEach(r=>{const s=t[r];s&&(i[r]=s.value)}),i}))}_checkDataSourceName(e){if(!e)throw new Error("Data source name is not provided")}_getDataSourceLoadType(e){return e?e||l.DataSourceLoadType.Reload:null}_getLoadTypeForDataSource(e,t){if(t===l.DataSourceLoadType.Load)return t;const i=e.getPagingConfig();return!t&&i?l.DataSourceLoadType.LoadNext:t}_loadDefaultSorting(e){this._measurePerformanceService.measure(`ViewModel.mergeCollectionModels.${this._injectionContext?.id}.parent.${!!this.parent}.dsNames.${e?.toString()}`,()=>{Array.from(this._dataSourcesInfos.entries()).filter(([t])=>!e?.length||e.includes(t)).map(([,t])=>t.getSortingConfig()).filter(t=>Boolean(t?.default)).map(t=>({[t.attributeName]:t.default})).forEach(t=>this.setValue(t,{silent:!0}).subscribe(()=>{this._markAsPristine(t)}))})}_getDropdownPageSize(){return(0,O.Z)(this._dropdownPageSize)?this._getSysSettingsValue([this._dropdownPageSizeSettingsCode]).pipe((0,B.z)(e=>(this._dropdownPageSize={pagingConfig:{rowCount:e[this._dropdownPageSizeSettingsCode],rowsOffset:0}},(0,u.of)(this._dropdownPageSize)))):(0,u.of)(this._dropdownPageSize)}_mergeCollectionModels(e,t){this._measurePerformanceService.measure(`ViewModel.mergeCollectionModels.${this._injectionContext?.id}.parent.${!!this.parent}.collection.${e}`,()=>{const i=this.attributes[e];this._featureValues.DisableBaseViewModelCollectionOptimization||i.length?i.merge(t):i.push(...t)})}_getEmbeddedModels(){const e=Object.entries(this.viewModelConfig?.attributes??{}).filter(([,r])=>r&&"embeddedModel"in r&&r.embeddedModel).map(([r,s])=>({attributeName:r,embeddedModel:s.embeddedModel}));if(0===e.length)return(0,u.of)([]);const t={},i=[];if(e.forEach(({attributeName:r,embeddedModel:{name:s,config:o}})=>{s?t[s]&&i.push(`Duplicated embedded model : ${s}.`):i.push(`Embedded model name is not provided for ${r}.`),t[s]=o}),i.length>0)throw new Error(i.join(" "));return this._modelGenerator.generate({dataSources:t},this.injector)}_concatModelsWithEmbedded(e=null){return this._getEmbeddedModels().pipe((0,h.U)(t=>{const i=[...e??[],...t??[]],r=i.map(s=>s.name).filter((s,o,c)=>c.indexOf(s)!==o);if(r.length>0)throw new Error(`Duplicated model names found : ${r.join(",")}.`);return i}))}_setModelsProperties(e){this.models=e;const t=this.models.map(i=>[i.name,i]);this._modelsMap=new Map(t)}_subscribeModelsEvents(){this.models.forEach(e=>this._subscribeModelEvents(e))}_subscribeModelEvents(e){this._subscriptions.add(e.event$.pipe((0,B.z)(t=>this._waitDataDelay(t)),(0,B.z)(t=>this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.HandleModelEventRequest",$context:this,scopes:this._eventScopes,modelName:e.name,modelEvent:t})),1)).subscribe())}initDependencies(){this.formBuilder=this.injector.get(b.qu),this.resourceFinderService=this.injector.get(Nt),this.validatorTypeResolver=this.injector.get(hg),this.maskService=this.injector.get(Cb),this.sysSettingsService=this.injector.get(De),this.crtControlStateAdapter=this.injector.get(zi),this._businessRulesEngine=this.injector.get(Kr),this._businessRulesApplier=this.injector.get(Xr),this._featureValues=this.injector.get(te),this._modelGenerator=this.injector.get(Ht),this._ngZone=this.injector.get(n.NgZone),this._translateService=this.injector.get(w.sK),this._scopeName=this.injector.get(Zg,null),this._attributeGenerator=this.injector.get(Ul),this._attributeResourceGenerator=this.injector.get(Gl),this._crtZoneService=this.injector.get(Zn),this._viewEventZoneName=this.injector.get(dI,ki.Root),this._modelParametersBuilder=this.injector.get(zl),this._context=this.injector.get(c3,null),this._crtInjectionContextService=this.injector.get(Fa),this._notifyService=this.injector.get(Ot,null),this._viewModelDataDelayerService=this.injector.get(fP,null),this._isDesignTime=this.injector.get(Tn,null),this._measurePerformanceService=this.injector.get(le,null),this._measurePerformancePageLoadService=this.injector.get(Vo)}processRequest(e){return this.handlerChain.process(e)}_replaceModel(e){this._modelsMap.set(e.name,e),this._subscribeModelEvents(e);const t=this.models.findIndex(({name:i})=>i===e.name);-1!==t&&this.models.splice(t,1,e).forEach(i=>i.destroy())}_replaceDataSourceInfo(e,t){!e||!t||(this._loadedDataSources.has(e)&&this._loadedDataSources.delete(e),this._dataSourcesInfos.set(e,t),this._replaceAttributesToDataSourceNameMap(t))}_updateModels(e){e.forEach((t,i)=>{const r=this.getModelByName(i);r&&(this._markModelAsCollection(r,t),this._updateModelDependentAttributes(r,t))})}_markModelAsCollection(e,t){t.isCollection&&(e._isCollection=!0)}_updateModelDependentAttributes(e,t){const i=t.attributes.map(r=>({path:r.path,type:r.type}));e.updateDependentAttributes(i)}_initIsChangedAttribute(){this._systemAttributes.push(Gp),this.attributes[Gp]=!1;const e=(0,u.combineLatest)(this.models.map(t=>t._dirty$)).pipe((0,h.U)(t=>t.some(i=>i)),(0,P.h)(()=>!this._viewModelAttributeChangeEventOptions.getOptions().preventStateChange),(0,on.x)()).subscribe(t=>{this._setSystemAttributeValue(Gp,t)});this._subscriptions.add(e)}_initHasUnsavedDataAttribute(){this._systemAttributes.push(zg),this.attributes[zg]=!1;const e=this.events$.pipe((0,P.h)(o=>o?.type===Ie.ChangeAttributeValue&&o.payload?.attributeName===Gp),(0,h.U)(o=>o.payload.value)),t=(0,u.merge)(this.IsChanged,e),i=this.models.map(o=>o._modeChanges$.pipe((0,ze.O)(o.mode))),r=(0,u.combineLatest)(i).pipe((0,h.U)(o=>o.some(c=>c===V.Create||c===V.Copy))),s=(0,u.combineLatest)([t,r]).pipe((0,h.U)(([o,c])=>Boolean(o||c)),(0,on.x)()).subscribe(o=>{this._setSystemAttributeValue(zg,o)});this._subscriptions.add(s)}_initPrimaryModelModeAttribute(){const e=this._getPrimaryModelModeChanges();if(!e)return;this._systemAttributes.push(eC),this.attributes[eC]=this.getPrimaryModelMode();const t=e.pipe((0,ze.O)(this.getPrimaryModelMode())).subscribe(i=>this._setSystemAttributeValue(eC,i));this._subscriptions.add(t)}_initStateAttribute(){this._systemAttributes.push(Hg),this.attributes[Hg]=ey.Active}_initBusinessRulesActivatedAttribute(){if(this._systemAttributes.push(tC),this.attributes[tC]=this._businessRulesAreActivated,this._businessRulesAreActivated)return;const e=this._businessRulesActivated$.pipe((0,P.h)(t=>!0===t)).subscribe(t=>{this._setSystemAttributeValue(tC,t)});this._subscriptions.add(e)}_initSystemAttributes(){var e=this;return(0,_.Z)(function*(){yield e._measurePerformanceService.measureCallback(`ViewModel.initSystemAttributes.${e._injectionContext?.id}.parent.${!!e.parent}`,(0,_.Z)(function*(){e._initIsChangedAttribute(),e._initPrimaryModelModeAttribute(),e._initHasUnsavedDataAttribute(),e._featureValues.DisableDelayingModelEvents||e._initStateAttribute(),e._initBusinessRulesActivatedAttribute()}))})()}_handleCircularDependencies(){const e=s2(this._modelDependencies);if(e.hasCycles){const t=this._translateService.instant("BaseViewModel.WarningModelsWithCircularDependencies");this._notifyService.show({message:t,duration:1e4}),console.warn(t,e.cycledModelsNames)}this._conflictedModels=e?.cycledModelsNames}_forEachControl(e,t){Object.keys(e).forEach(r=>{if(this.attributes[r]instanceof it){const s=this.attributes[r],o=e[r];s.forEach(c=>{const d=c.primaryAttributeName,p=c.attributes[d],g=o.find(C=>C[d]===p);g?c._forEachControl(g,t):c._crtControls.forEach(C=>{t(C.formControl)})})}else if(this.attributes[r]instanceof ti)this.attributes[r]._forEachControl(e[r],t);else{const s=this.getControl(r);t(s.formControl)}})}_getModelsErrors(e){return(e??[]).filter(t=>!t.isCollectionItemModel&&t.hasErrors).map(t=>t.getLastError())}_notifyAboutModelsErrors(e){const t=this._getModelsErrors(e);if(t.length>0){const i=t.map(r=>r.message).join(" ");this._notifyService.error({message:i,translate:!1})}}_initFeaturesStates(){this._disableViewModelWaitingForAsyncTasks=this._featureValues.DisableViewModelWaitingForAsyncTasks,this._disableViewModelLoadUnblockingThread=this._featureValues.DisableViewModelLoadUnblockingThread,this._blockFieldsAffectedByBusinessRules=this._featureValues.BlockFieldsWhileRunBusinessRules,this._modelSynchronizationEnabled=!this._featureValues.ModelSynchronizationDisabled}_handleAsyncTasksCycle(e){let t=null;const r=Array.from(e).filter(s=>s.startsWith(Wn.ProcessingAttributeChangeRequest));if(e.size&&r.length)return r.length&&(t=setTimeout(()=>{console.warn("[ViewModel]: Clearing executing tasks by exceeded timeout",r),r.forEach(s=>e.delete(s)),this._asyncTasksExecutingSubject.next(e)},100)),t}_getAffectedViewModelAttributes(e,t){return this.models.filter(r=>r.dataSchemaName===e).map(r=>r.name).flatMap(r=>this.getViewModelAttributePaths(r,t))}_toggleControlsAffectedByBusinessRules(e,t){this._blockFieldsAffectedByBusinessRules&&this._attributesAffectedByBusinessRules?.filter(r=>function s3(a,e,t){if(e.scopeName===a){if(function a3(a,e){return!!e?.find(i=>!i.scopeId&&i.triggers.find(r=>r.name===a.name))}(e,t))return!1}else if(function r3(a,e){return!!e?.find(i=>i.scopeName===a.scopeName&&i.triggers?.find(r=>r.name===a.name))}(e,t))return!1;return!0}(this._scopeName,r,t))?.forEach(r=>{r.scopeName===this._scopeName?this.getControl(r.name).toggle(e):this._getAffectedViewModelAttributes(r.scopeName,r.name).forEach(o=>{this.getControl(o).toggle(e)})})}_initAttributesAffectedByBusinessRules(){var e=this;return(0,_.Z)(function*(){const i=e._prepareDataSourceNamesForBusinessRules().filter(s=>!!s).map(s=>e._modelsMap.get(s)).map(s=>({scopeId:s.name,scopeName:s.dataSchemaName,scopeType:Kn.Model,modelType:s.getDataSource()?.type})),r={scopeName:e._scopeName,scopeType:Kn.ViewModel,scopeId:e._scopeName};e._attributesAffectedByBusinessRules=yield e._businessRulesEngine.getAffectedAttributes([r,...i])})()}_initBusinessRules(){var e=this;return(0,_.Z)(function*(){return e._measurePerformanceService.measureCallback(`ViewModel.initBusinessRules.${e._injectionContext?.id}.parent.${!!e.parent}`,(0,_.Z)(function*(){e._businessRulesProcessingEnabled=!e._featureValues.BusinessRulesProcessingDisabled,yield e._initAttributesAffectedByBusinessRules(),e._businessRulesAreActivated=e._businessRulesProcessingEnabled&&!1!==e._businessRulesActive,e._businessRulesActivated$.next(e._businessRulesAreActivated)}))})()}_attributeGenerate$(e,t){return(0,u.of)(this._featureValues.UseDesignerHotSwapViewModel).pipe((0,M.w)(i=>i&&this._isDesignTime?this._initDataSourceValidators().pipe((0,I.b)(()=>{this._initSchemaValidators(e)}),(0,M.w)(()=>this._attributeGenerate(e,t))):this._attributeGenerate(e,t)))}_validateByDataSourceName(e){var t=this;return(0,_.Z)(function*(){const i={},r=t._getBoundDataSourceAttributeControls(e);return yield Promise.all(Object.entries(r).map(([s,o])=>(o.markAsTouched(),o.updateValueAndValidity(),(0,u.lastValueFrom)(b1(o).pipe((0,I.b)(()=>{o.errors&&(i[s]=o.errors)})))))),i})()}_validateAll(){var e=this;return(0,_.Z)(function*(){const t={};return e.formApiModel.markAllAsTouched(),e.formApiModel.updateValueAndValidity(),S1(e.formApiModel),yield(0,u.lastValueFrom)(b1(e.formApiModel).pipe((0,I.b)(()=>{Object.entries(e.formApiModel.controls).forEach(([r,s])=>{s.errors&&(t[r]=s.errors)})}))),t})()}runInitFlow(e=null){return this._concatModelsWithEmbedded(e).pipe(this._measurePerformanceService.measure$(`ViewModel.runInitFlow.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,I.b)(t=>this._notifyAboutModelsErrors(t)),(0,I.b)(t=>this._setModelsProperties(t)),(0,I.b)(()=>this._initFeaturesStates()),(0,B.z)(()=>this._generateDataSourcesInfo()),(0,I.b)(t=>this._updateModels(t)),(0,B.z)(t=>this._generateAttributesToDataSourceNameMap(t)),(0,B.z)(t=>this._getDataSchemas()),(0,I.b)(t=>this.dataSchemas=t),(0,B.z)(()=>this._initDataSourceValidators()),(0,M.w)(()=>this._initBusinessRules()),(0,I.b)(()=>{this._initSchemaValidators(this.viewModelConfig.attributes)}),(0,B.z)(()=>(0,u.forkJoin)([...this._generateResourceAttribute(),this._initSystemAttributes(),this._attributeGenerate(this.viewModelConfig.attributes),(0,u.of)(this),this._initSubscriptions()])),(0,B.z)(()=>this._generatePrimaryAttributes()),(0,I.b)(()=>this._loadDefaultSorting()),(0,B.z)(()=>this._runInitialBusinessRules()),(0,I.b)(()=>this._viewModelAttributeChangeEventOptions.reset())).pipe((0,M.w)(()=>(0,u.of)(this)))}get modelInitConfigs(){return this._modelsInitConfig}init(e,t){return this._primaryModelName=t?.primaryModelName,this._modelDependencies=t?.modelDependencies||{},this._modelsLoadingConfig=t?.modelsLoadingConfig||{},this._lastEventLoadParameters=new Map,t?.businessRulesActive||this.deactivateBusinessRules(),this._modelDependencies&&this._handleCircularDependencies(),this._ngZone.runOutsideAngular(()=>this.runInitFlow(e))}setValue(e,t){const i=[],r=[];for(const s of Object.keys(this._attributeConfigs))"viewModelConfig"in this._attributeConfigs[s]||"viewModelName"in this._attributeConfigs[s]?r.push(s):i.push(s);return this._executeWithOptions(()=>{this._measurePerformanceService.measure(`ViewModel.setValue.updateViewModelModelAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.data.${Object.keys(e).toString()}`,()=>{for(const s in e)i.includes(s)&&(this[s]=e[s])})},t),(0,u.forkJoin)([...r.filter(s=>e&&e[s]).map(s=>{if(this.attributes[s]instanceof ti)return this.attributes[s].setValue(e[s],{silent:t?.silent,preventAttributeChangeRequest:t?.preventAttributeChangeRequest,preventStateChange:t?.preventStateChange,preventRunBusinessRules:t?.preventRunBusinessRules});{const o=this._attributeConfigs[s].viewModelConfig||this._attributeConfigs[s].viewModelName,c=!this._featureValues.DisableDataGridEditingMode,d=(e[s]||[]).map(p=>{const g=this.getBoundDataSourceName(s),v=this._getDataSourceInfoByViewModelAttributePath(s)?.isCollection&&this.getModelByName(g)?.createCollectionItemModel(V.Update);return this.viewModelGenerator.generate({viewModelConfig:o,modelConfig:c&&v?{primaryDataSourceName:v.name}:void 0,models:c&&v?[v]:void 0,parentViewModel:this,businessRulesActive:!1},n.Injector.create({providers:[{provide:Zg,useValue:null}],parent:this.injector})).pipe(this._measurePerformanceService.measure$(`ViewModel.setValue.generateViewModel.${this._injectionContext?.id}.parent.${!!this.parent}.modelName.${v?.name}`),(0,I.b)(T=>{g&&(T.dataSchemas[g]=this.dataSchemas[g])}),(0,I.b)(T=>{T.deactivateBusinessRules()}),(0,M.w)(T=>T.setValue(p,{silent:t?.silent,preventAttributeChangeRequest:t?.preventAttributeChangeRequest,preventStateChange:t?.preventStateChange,preventRunBusinessRules:t?.preventRunBusinessRules}).pipe((0,I.b)(()=>v&&v.setLoadedState()),(0,h.U)(()=>T))))});return!d.length&&t?.collectionLoadType===Ao.Reload&&this.attributes[s].clear(),0===d.length?(0,u.of)(null):(0,u.forkJoin)([...d]).pipe((0,I.b)(p=>{const g=this.getBoundDataSourceName(s);this.getModelByName(g)?.childrenChange(),this._executeWithOptions(()=>{t?.collectionLoadType!==Ao.Reload&&t?.collectionLoadType?this.getBoundDataSchema(s)?this._mergeCollectionModels(s,p):this.attributes[s].push(...p):this.attributes[s].reload(p)},t)}))}}),(0,u.of)(this)])}deactivateBusinessRules(){this._businessRulesActive=!1}activateBusinessRules(){const e=this._businessRulesActive;if(this._businessRulesActive=!0,e)return(0,u.of)(null);const t=[...this._modelsMap.values()].filter(i=>i.isLoaded);if(t.length>0){const i={type:de.ContextReady,name:null,scopeId:""};return(0,u.forkJoin)(t.map(r=>this._runBusinessRulesForModel(r,[],!0,[i]))).pipe((0,I.b)(()=>this._businessRulesAreActivated=this._businessRulesProcessingEnabled),(0,I.b)(()=>this._businessRulesActivated$.next(this._businessRulesAreActivated)))}}_getIsAffectedByBusinessRules(e){if(!this._businessRulesProcessingEnabled)return Promise.resolve(!1);const t=e.name,i=this._attributesAffectedByBusinessRules;if(0===i.length||!t)return Promise.resolve(!1);const r=i.some(d=>d.name===t),s=this.getBoundDataSchemaByAttributePath(t),o=this.getBoundDataSchemaAttributeByAttributePath(t);if(!o)return Promise.resolve(r);const c=i.filter(d=>d.scopeName===s.name).some(d=>d.name===o.name);return Promise.resolve(c||r)}executeRequest(e){return e.scopes=e.scopes||this._eventScopes,this._crtZoneService.runInZone(this._viewEventZoneName,()=>this.processRequest(e))}getAttributeControl(e){let t=this.formApiModel;Ep(this,e).then(o3.Z);for(const i of e.split("."))t=t.get(i);return t??new b.NI}loadLookupList(e,t=[],i){const r=e.control,s=e.items,o=this._getDataSourceInfoByViewModelAttributePath(s);if(o){const c=this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.LoadDataRequest",$context:this,dataSourceName:o.name,parameters:t,config:{payload:i}}));Promise.resolve(c)}else{const c=this._getDataSourceInfoByViewModelAttributePath(r);if(c){const d=c.getDataSourceAttributePath(r);(0,u.forkJoin)([this._getDropdownPageSize(),this._modelParametersBuilder.getModelParameters(this,t,i)]).pipe((0,B.z)(([p,g])=>this.getModelByName(c.name).loadLookupList(d,g,p)),(0,h.U)(p=>Yn.getLookupListDataSourceInfo(s,{value:p.primaryAttributeName,displayValue:p.primaryDisplayAttributeName}).getModelDto(p.data)),(0,B.z)(p=>this.setValue(p,{silent:!0}))).subscribe()}}}load(...e){const t=this._disableViewModelLoadUnblockingThread?(0,u.of)(null):(0,u.timer)(0,u.asyncScheduler);if("string"==typeof e[0]){const r=e[0],s=e[1],o=e[2];this._checkDataSourceName(r);const c=this._getDataSourceLoadType(o?.loadType);return t.pipe((0,M.w)(()=>this._loadStaticModel(r,s,c,o?.payload,o?.useLastLoadParameters,o?.doNotUpdateLastLoadParameters).pipe(this._measurePerformanceService.measure$(`ViewModel.loadStaticModel.${this._injectionContext?.id}.parent.${!!this.parent}.datasourceName.${r}`))))}const i=e[0];return t.pipe((0,M.w)(()=>this._loadDynamicModel(i).pipe(this._measurePerformanceService.measure$(`ViewModel.loadDynamicModel.${this._injectionContext?.id}.parent.${!!this.parent}.model.${i.dataSourceName}`))))}setSorting(e,t){const r=this._dataSourcesInfos.get(e).getSortingConfig(),s=r&&r.attributeName;return s&&(this[s]=t),(0,u.of)(null)}create(e,t){return this._checkDataSourceName(e),this._createModelData(e,t)}copy(e,t,i){return this._checkDataSourceName(e),this._copyModelData(e,t,i)}loadDefaultValues(e){return this._setAttributesDefaultValues(e)}save(e,t,i){return(0,u.from)(this.waitAsyncTasksFinish()).pipe((0,M.w)(()=>(this._checkDataSourceName(e),this.getModelMode(e)===V.Delete?this.delete(e,t,i):this._saveModel(e,t,i))))}delete(e,t,i){return this._checkDataSourceName(e),this._deleteModel(e,t,i)}resume(){return(0,u.of)(void 0)}pause(){return(0,u.of)(void 0)}destroy(){this._subscriptions.unsubscribe(),Array.from(this._collectionSubscription.values()).forEach(t=>t.unsubscribe()),this._collectionSubscription.clear(),this._crtControls.forEach(t=>{t.destroy()}),this.models?.forEach(t=>t.destroy()),this._crtControls.clear(),this._eventsSubject$.complete(),this._replayEvents$.complete(),this._modelLoaded$.complete();const e=[];for(const t of Object.values(this.attributes))t instanceof ti&&e.push(t.destroy()),t instanceof it&&e.push((0,u.from)(t.destroy()));return(0,u.forkJoin)(e).pipe((0,Xy.d)(void 0),(0,h.U)(()=>{}),(0,Bp.x)(()=>{this.parent||(this._crtInjectionContextService.removeContext(this._injectionContext?.id),(0,l.callOnContextDestroyHooks)(this._injectionContext),this._context=null,this._viewModelDataDelayerService?.destroy(),this._viewModelDataDelayerService=null),this._asyncTasksExecutingSubject.complete(),this._dataSourcesInfos.clear(),this.__destroyed=!0}))}getBoundDataSourceName(e){if(this._attributesToDataSourceNameMap.has(e))return this._attributesToDataSourceNameMap.get(e);const t=Array.from(this._attributesToDataSourceNameMap.keys()).find(i=>i.includes(".")&&i.split(".")[1]===e);return this._attributesToDataSourceNameMap.has(t)?this._attributesToDataSourceNameMap.get(t):null}_getBoundDataSourceAttributeControls(e){return Object.fromEntries(Array.from(this._attributesToDataSourceNameMap.entries()).filter(([t,i])=>i===e).map(([t])=>[t,this.getAttributeControl(t)]))}getBoundDataSourceAttributeControls(e){return Object.values(this._getBoundDataSourceAttributeControls(e))}getBoundDataSourceNameByAttributePath(e){return this._attributesToDataSourceNameMap.has(e)?this._attributesToDataSourceNameMap.get(e):null}getBoundDataSchema(e){return this.dataSchemas[this.getBoundDataSourceName(e)]}getBoundDataSchemaByAttributePath(e){return this.dataSchemas[this.getBoundDataSourceNameByAttributePath(e)]??null}getBoundDataSchemaAttributeByAttributePath(e){const t=this.getBoundDataSourceNameByAttributePath(e),i=this.getBoundDataSchemaByAttributePath(e);if(!t||!i)return null;const s=this._getDataSourceInfoByViewModelAttributePath(e).getDataSourceAttributePath(e);return i.findAttributeByName(s)}getPrimaryModelName(){return Promise.resolve(this._primaryModelName)}getPrimaryDataSchema(){return this.getPrimaryModelName().then(e=>this.dataSchemas[e])}isValid(e){const t=this._waitAsyncValidation().pipe((0,h.U)(()=>e?this.getBoundDataSourceAttributeControls(e).every(i=>!i.invalid):this.formApiModel.valid));return(0,u.lastValueFrom)(t)}validate(e){return this._ngZone.run(()=>e?this._validateByDataSourceName(e):this._validateAll())}getViewModelAttributePath(e,t){const i=this._dataSourcesInfos.get(e);return this._getMappedAttributeName(i,t)}getViewModelAttributePaths(e,t){return this._dataSourcesInfos.get(e)?.getMappedAttributeNames(t)}getCollectionViewModelAttributePath(e){return this._dataSourcesInfos.get(e)?.collectionViewModelAttributeName}canDelete(e,t){var i=this;return(0,_.Z)(function*(){return i.getModelByName(e).canDelete(t)})()}canSave(e,t){var i=this;return(0,_.Z)(function*(){return i.getModelByName(e).canSave(t)})()}enableAttributeValidator(e,t){this.getControl(e).enableValidator(t)}disableAttributeValidator(e,t){this.getControl(e).disableValidator(t)}_hotSwap(e){return this._measurePerformanceService.measure(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.hotSwap`,()=>{const t=e?.attributes?.changed||[],i=(0,O.Z)(e.resources?.strings);if((0,O.Z)(t)&&i)return(0,u.of)(!1);if(!i){const C={...this.resources?.strings,...e.resources.strings};this.resources={strings:JSON.parse(JSON.stringify(C))}}this.viewModelConfig=e.actualViewModelConfig;const r=Yn.getFromViewModelConfig(this.viewModelConfig),s=Object.fromEntries(t.map(C=>[C,this.viewModelConfig.attributes[C]])),o=e?.models?.changed??[],c=o.map(C=>C.name),d=this.models.filter(C=>C.isLoaded||C.isLoading).filter(C=>c.includes(C.name)).map(C=>C.name),p=o.map(C=>{const v=r.get(C.name);return this._replaceModel(C),this._replaceDataSourceInfo(C.name,v),this._addDataSchemaToDataSchemas(C)}),g=this._attributeGenerate$(s,{disableDefaultConfig:!0});return(0,u.forkJoin)([...p,g]).pipe(this._measurePerformanceService.measure$(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.hotSwap.forkJoin`),(0,M.w)(()=>this._reGenerateResourcesAttributes()),(0,I.b)(()=>this._loadDefaultSorting(c)),(0,I.b)(()=>this._requestReloadModels(d)),(0,h.U)(()=>!0))})}_setAttributeValue(e,t,i){this._executeWithOptions(()=>this[e]=t,i)}set(e,t,i){return this._setAttributeValue(e,t,i),Promise.resolve()}_markAsPristine(e){this._forEachControl(e,t=>t.markAsPristine())}getAttributeNameByViewItemName(e){return Object.keys(this._attributeConfigs).find(t=>this._attributeConfigs[t].viewItemName===e)}getControl(e){return this._crtControls.has(e)?this._crtControls.get(e):Rp.create({name:e,value:null,propertiesConfig:[]})}getAttributePropertyValue(...e){let t,i;if(2===e.length)t=e[0],i=e[1];else{if(1!==e.length)throw new Error("ArgumentException");{const s=e[0].split(":");t=s[0],i=s[1]}}return this.getControl(t).getPropertyValue(i)}setAttributePropertyValue(...e){let t,i,r;if(3===e.length)t=e[0],i=e[1],r=e[2];else{if(2!==e.length)throw new Error("ArgumentException");{const o=e[0].split(":");t=o[0],i=o[1],r=e[1]}}return this.getControl(t).setPropertyValue(i,r)}resetAttributePropertyValue(...e){let t,i;if(1===e.length)[t,i]=e[0].split(":");else{if(2!==e.length)throw new Error("ArgumentException");t=e[0],i=e[1]}this.getControl(t).getPropertyByName(i)?.resetValue()}getInvariabilityPropertyName(e){return this.getControl(e).getInvariabilityPropertyName()}setModelValues(e,t){return this.getModelByName(e).setValue(t)}_getBoundAttributesNames(e){const t=this.getBoundDataSourceNameByAttributePath(e);if(!t)return null;const i=this._dataSourcesInfos.get(t),r=i.attributesMap.get(e);return Array.from(i.attributesMap.entries()).filter(([s,o])=>o===r&&s!==e).map(([s])=>s)}_getAttributeDataValueTypeName(e){return this._attributeConfigs[e].dataValueTypeName}getDataSourceLoadParameters(e){var t=this;return(0,_.Z)(function*(){const i=t._dataSourcesInfos.get(e);return i?t._modelParametersBuilder.getModelLoadParameters(t,i,[]).then(([r,s,o])=>({parameters:r,options:{pagingConfig:s,sortingConfig:o}})):null})()}isDataSourceForCollection(e){const t=this._dataSourcesInfos.get(e);return Boolean(t?.isCollection)}_getDataSourceAttributeDataValueType(e){const t=this._getDataSourceInfoByViewModelAttributePath(e);let i=null;if(t){const r=t.getDataSourceAttributePath(e);r&&(i=this._getDataSourceAttributeSchema(t,r)?.dataValueType)}return i}_getModelNamesByLoadType(e){return Object.entries(this._modelsLoadingConfig).filter(([t,i])=>i.type===e).map(([t,i])=>t)}_reloadDependentModels(e,t=[]){const i=this._getDependentModelsNames(e.name,t);if(0!==this._getChangedModelsNames(i).length)return void this._showChangedModelsDataConflictNotification();const s=i.filter(o=>this._modelsRequestedToLoad.has(o));this._requestReloadModels(s)}getIsDirty(e){return this.getControl(e).isDirty}getModelByName(e){return this._modelsMap.get(e)}getModelMode(e){return this.getModelByName(e)?.mode}getPrimaryModelMode(){return this.getModelMode(this._primaryModelName)}_getModelModeChanges(e){return this.getModelByName(e)?._modeChanges$}_getPrimaryModelModeChanges(){return this._getModelModeChanges(this._primaryModelName)}markModelFor(e,t){this.getModelByName(e)?.markFor(t)}markPrimaryModelFor(e){this.markModelFor(this._primaryModelName,e)}_setStateAttribute(e){this._setSystemAttributeValue(Hg,e)}_onAsyncTaskStarted(e){if(this._disableViewModelWaitingForAsyncTasks)return;const t=this._asyncTasksExecutingSubject.value;t.add(e),this._asyncTasksExecutingSubject.next(t)}_onAsyncTaskFinished(e){if(this._disableViewModelWaitingForAsyncTasks)return;const t=this._asyncTasksExecutingSubject.value;t.delete(e),this._asyncTasksExecutingSubject.next(t)}waitAsyncTasksFinish(){let e;return(0,u.firstValueFrom)(this._asyncTasksExecutingSubject.pipe((0,I.b)(t=>{clearTimeout(e),e=this._handleAsyncTasksCycle(t)}),(0,P.h)(t=>0===t.size),(0,Ee.q)(1),(0,h.U)(()=>{})))}}class Qi{constructor(){this.viewModelConstructor=ti}static useClass(e){return new class extends Qi{constructor(){super(...arguments),this.viewModelConstructor=e}}}create(e,t,i,r,s,o,c,d){return new this.viewModelConstructor(e,t,i,r,s,o,c,d)}}Qi.\u0275fac=function(e){return new(e||Qi)},Qi.\u0275prov=n.\u0275\u0275defineInjectable({token:Qi,factory:Qi.\u0275fac,providedIn:"root"});class es extends Zi{constructor(){super(...arguments),this._lifecycleHooksRequests={init:ay,resume:sy,pause:ry,destroy:iy},this.handlerChain=l.HandlerChainService.instance}_processRequest(e,t,i){return this.ngZone.runOutsideAngular(()=>this.sendRequest({...e,scopes:i,$context:t}))}_processViewModelAttributeChanges(e,t){e.events$.pipe((0,P.h)(i=>i.type===Ie.ChangeAttributeValue&&!i.payload?.preventAttributeChangeRequest)).subscribe({next:i=>{const r=`${Wn.ProcessingAttributeChangeRequest}-${(0,l.generateGuid)()}`;e._onAsyncTaskStarted(r),this._processRequest(new l.HandleViewModelAttributeChangeRequest(i.payload),e,t).then(()=>e._onAsyncTaskFinished(r))}})}initDependencies(){super.initDependencies(),this.viewModelFactory=this.injector.get(Qi)}generateLifecycleHooks(e,t){Object.entries(this._lifecycleHooksRequests).forEach(([i,r])=>{e[i]=new Proxy(e[i],{apply:(s,o,c)=>{const d=s.apply(o,c);if(!(d instanceof u.Observable))throw new Error(`Method ${i} should return Observable`);return d.pipe((0,M.w)(p=>(0,u.from)(this._processRequest(new r,e,t.scopes)).pipe((0,u.map)(()=>p))))}})})}_generateFromConfig(e,t){const i=t||this.injector,{viewModelConfig:r,modelConfig:s,resources:o,models:c,scopes:d,modelInitConfigs:p,modelConfig:{primaryDataSourceName:g}={},parentViewModel:C,businessRulesActive:v}=e,T=this.viewModelFactory.create(this,i,this._trimEmptyAttributes(r),o,null,d,p,C);return this.generateLifecycleHooks(T,e),this._processViewModelAttributeChanges(T,d),T.init(c,{modelDependencies:s?.dependencies,primaryModelName:g,modelsLoadingConfig:s?.loadingConfig,businessRulesActive:v})}_trimEmptyAttributes(e){const t=e?.attributes??{};return Object.keys(t).forEach(i=>{t[i]||delete t[i]}),{...e,attributes:t}}_generateFromString(e,t){return this.repository.resolveModelConfig(e.viewModelConfig).pipe((0,M.w)(i=>this._generateFromConfig({...e,viewModelConfig:i},t)))}sendRequest(e){return this.handlerChain.process(e)}generate(e,t){const i=t?.get(le);return"string"==typeof e.viewModelConfig?i?this._generateFromString(e,t).pipe(i.measure$("viewModelGenerator.generateFromString")):this._generateFromString(e,t):i?this._generateFromConfig(e,t).pipe(i.measure$("viewModelGenerator.generateFromConfig")):this._generateFromConfig(e,t)}}es.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(es)))(t||es)}}(),es.\u0275prov=n.\u0275\u0275defineInjectable({token:es,factory:es.\u0275fac,providedIn:"root"});let nC=class extends l.BaseRequestHandler{constructor(e){super(),this._ngZone=e}_validateRequest(e){const{$context:t,collectionAttributeName:i}=e;if(!t)throw new Error('The "$context" request property is not specified.');if(!i)throw new Error('The "collectionAttributeName" request property is not specified.');const r=t._attributeConfigs[i];if(!("viewModelConfig"in r)&&!("viewModelName"in r)||!r.isCollection)throw new Error(`There is no view model collection for the specified "${i}" attribute.`)}_canCancelPrimaryDataChanges(e,t){var i=this;return(0,_.Z)(function*(){if(!t)return!0;const r=yield i._getPrimaryAttributeValue(e);return t.includes(r)})()}_getPrimaryAttributeValue(e){return(0,_.Z)(function*(){const t=yield e.getPrimaryModelName(),i=yield e.getPrimaryDataSchema(),r=e.getViewModelAttributePath(t,i.primaryAttributeName);return e[r]})()}_resetFormApiModel(e){this._ngZone.run((0,_.Z)(function*(){const t=yield e.getPrimaryModelName();e.getBoundDataSourceAttributeControls(t)?.forEach(r=>{ly(r)})}))}_cancelPrimaryDataChanges(e){var t=this;return(0,_.Z)(function*(){try{const i={type:"crt.CancelPrimaryDataChangesRequest",$context:e};return yield t.handlerChain.process(i)}catch(i){return[{success:!1,errorInfo:i?.message}]}})()}handle(e){var t=this;return(0,_.Z)(function*(){t._validateRequest(e);const{$context:i,collectionAttributeName:r,primaryAttributeValues:s}=e??{},o=yield i.attributes[r],c=o.getChangedItems(),d=[];for(const g of c)(yield t._canCancelPrimaryDataChanges(g,s))&&d.push(t._cancelPrimaryDataChanges(g));for(const g of o)c.includes(g)||t._resetFormApiModel(g);return(yield Promise.all(d)).flat()})()}};nC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.CancelCollectionPrimaryDataHandler",requestType:"crt.CancelCollectionPrimaryDataChangesRequest"}),(0,m.w6)("design:paramtypes",[n.NgZone])],nC);let iC=class extends l.BaseRequestHandler{_validateRequest(e){const{$context:t}=e;if(!t)throw new Error('The "$context" request property is not specified.')}_cancelCurrentDataChanges(e){var t=this;return(0,_.Z)(function*(){const i=e.getPrimaryModelMode();if(i===V.Create){const r=yield e.getPrimaryModelName();return e.getModelByName(r).getDataSource().scope===l.DataSourceScope.ViewElement&&e.markPrimaryModelFor(V.Delete),Promise.resolve({success:!0})}return i===V.Delete&&e.markPrimaryModelFor(V.Update),(yield e.IsChanged)?t._reloadCurrentDataChanges(e):Promise.resolve({success:!0})})()}_reloadCurrentDataChanges(e){var t=this;return(0,_.Z)(function*(){try{return yield t._loadPrimaryData(e),yield t._onSuccessCancelPrimaryData(e),{success:!0}}catch(i){const r=i?.message;return t._onFailCancelPrimaryData(e,r),{success:!1,errorInfo:r}}})()}_loadPrimaryData(e){var t=this;return(0,_.Z)(function*(){const i=yield e.getPrimaryModelName(),r=yield e.getPrimaryDataSchema(),s=e.getViewModelAttributePath(i,r.primaryAttributeName);yield t.handlerChain.process({type:"crt.LoadDataRequest",$context:e,dataSourceName:i,parameters:[{type:l.ModelParameterType.PrimaryColumnValue,value:s}]})})()}_onFailCancelPrimaryData(e,t){e.formApiModel.setErrors({cancel:{message:t}})}_onSuccessCancelPrimaryData(e){return(0,_.Z)(function*(){const t=yield e.getPrimaryModelName();e.getBoundDataSourceAttributeControls(t)?.forEach(r=>{ly(r)})})()}_cancelNestedDataChanges(e){var t=this;return(0,_.Z)(function*(){const i=[],r=Object.entries(e._attributeConfigs);for(const[o,c]of r)if("viewModelConfig"in c||"viewModelName"in c)if(c.isCollection)i.push(t._cancelPrimaryDataSafely(()=>t._cancelCollectionPrimaryDataChanges(e,o)));else{const d=yield e[o];i.push(t._cancelPrimaryDataSafely(()=>t._cancelPrimaryDataChanges(d)))}return(yield Promise.all(i)).flat()})()}_cancelPrimaryDataChanges(e){var t=this;return(0,_.Z)(function*(){const i={type:"crt.CancelPrimaryDataChangesRequest",$context:e};return yield t.handlerChain.process(i)})()}_cancelCollectionPrimaryDataChanges(e,t){var i=this;return(0,_.Z)(function*(){const r={type:"crt.CancelCollectionPrimaryDataChangesRequest",$context:e,collectionAttributeName:t};return yield i.handlerChain.process(r)})()}_cancelPrimaryDataSafely(e){return e().catch(t=>[{success:!1,errorInfo:t?.message}])}handle(e){var t=this;return(0,_.Z)(function*(){t._validateRequest(e);const i=e.$context,r=yield t._cancelNestedDataChanges(i);return[yield t._cancelCurrentDataChanges(i),...r]})()}};iC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.CancelPrimaryDataChangesHandler",requestType:"crt.CancelPrimaryDataChangesRequest"})],iC);let gI=class extends l.BaseRequest{constructor(){super(...arguments),this.type="crt.ChangeViewModelAttributeValueRequest"}};gI=(0,m.gn)([(0,l.CrtRequest)({type:"crt.ChangeViewModelAttributeValueRequest"})],gI);let aC=class extends l.BaseRequestHandler{handle(e){return(0,_.Z)(function*(){const{$context:t,attributeName:i,attributeValue:r}=e||{};if(!t||!i)return;const s=t;return yield(0,u.lastValueFrom)(s.setValue({[i]:r}),{defaultValue:null}),r})()}};aC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.ChangeViewModelAttributeValueHandler",requestType:"crt.ChangeViewModelAttributeValueRequest"})],aC);let rC=class extends l.BaseRequestHandler{_validateRequest(e){const{$context:t,collectionAttributeName:i}=e;if(!t)throw new Error('The "$context" request property is not specified.');if(!i)throw new Error('The "collectionAttributeName" request property is not specified.');const r=t._attributeConfigs[i];if(!("viewModelConfig"in r)&&!("viewModelName"in r)||!r.isCollection)throw new Error(`There is no view model collection for the specified "${i}" attribute.`)}_canSavePrimaryData(e,t){var i=this;return(0,_.Z)(function*(){if(!t)return!0;const r=yield i._getPrimaryAttributeValue(e);return t.includes(r)})()}_getPrimaryAttributeValue(e){return(0,_.Z)(function*(){const t=yield e.getPrimaryModelName(),i=yield e.getPrimaryDataSchema(),r=e.getViewModelAttributePath(t,i.primaryAttributeName);return e[r]})()}_savePrimaryData(e){var t=this;return(0,_.Z)(function*(){try{const i={type:"crt.SavePrimaryDataRequest",$context:e};return yield t.handlerChain.process(i)}catch(i){return[{success:!1,rowsAffected:0,errorInfo:i?.message}]}})()}handle(e){var t=this;return(0,_.Z)(function*(){t._validateRequest(e);const{$context:i,collectionAttributeName:r,primaryAttributeValues:s}=e??{},c=i.attributes[r].getChangedItems(),d=[];for(const p of c)(yield t._canSavePrimaryData(p,s))&&d.push(yield t._savePrimaryData(p));return d.flat()})()}};rC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.SaveCollectionPrimaryDataHandler",requestType:"crt.SaveCollectionPrimaryDataRequest"})],rC);let sC=class extends l.BaseRequestHandler{constructor(e){super(),this._baseViewModelProcessValidationResultService=e}_validateRequest(e){const{$context:t}=e;if(!t)throw new Error('The "$context" request property is not specified.')}_saveModel(e,t){var i=this;return(0,_.Z)(function*(){const r=e.dataSchemas[t],s=e.getViewModelAttributePath(t,r.primaryAttributeName);try{const o=yield i._canSaveData(e,t,s);if(!o.result)return i._createFailedSaveResult(o.message);const c=yield i._saveData(e,t,s);return c.success&&i._onSuccessSaveRootData(e,t,c),c}catch(o){const c=o?.message;return i._createFailedSaveResult(c)}})()}_validateRootModel(e,t){var i=this;return(0,_.Z)(function*(){if(!(yield e.isValid(t))){const s=yield e.validate(t),o=yield i._baseViewModelProcessValidationResultService.getValidationErrorMessage(e,s);return i._createFailedSaveResult(o)}return null})()}_getModels(e){return(0,_.Z)(function*(){const t=yield e.getPrimaryModelName();let i=function pP(a){const e=[];return a?._modelsMap.forEach((t,i)=>{v1(t)&&e.push(i)}),e}(e);return i=i.filter(r=>e.getModelMode(r)!==V.Init),t&&!i.includes(t)&&i.unshift(t),i})()}_saveRootData(e){var t=this;return(0,_.Z)(function*(){const i=[],r=yield t._getModels(e);for(const o of r){let c=yield t._validateRootModel(e,o);c||(c=yield t._saveModel(e,o)),i.push(c)}const s=i.filter(o=>!o.success).map(o=>o.errorInfo);return s.length&&t._onFailSaveRootData(e,s.join(", ")),i})()}_canSaveData(e,t,i){return(0,_.Z)(function*(){const s={primaryColumnValue:yield e[i]};return e.canSave(t,s)})()}_saveData(e,t,i){var r=this;return(0,_.Z)(function*(){const s={type:"crt.SaveDataRequest",$context:e,parameters:[{type:l.ModelParameterType.PrimaryColumnValue,value:i}],dataSourceName:t};return yield r.handlerChain.process(s)})()}_onFailSaveRootData(e,t){e.formApiModel.setErrors({save:{message:t}})}_updateAttributesOnSaveResult(e,t,i){if(i?.primaryAttributes?.length)for(const r of i.primaryAttributes)for(const[s,o]of Object.entries(r)){const c=e.getViewModelAttributePath(t,s);e[c]=o}}_onSuccessSaveRootData(e,t,i){this._updateAttributesOnSaveResult(e,t,i),e.getBoundDataSourceAttributeControls(t)?.forEach(s=>{ly(s)})}_saveNestedData(e,t){var i=this;return(0,_.Z)(function*(){const r=[],s=Object.entries(e._attributeConfigs);for(const[c,d]of s)if("viewModelConfig"in d||"viewModelName"in d)if(d.isCollection)r.push(i._saveDataSafely(()=>i._saveInnerViewModelCollection(e,c,t)));else{const p=yield e[c];r.push(i._saveDataSafely(()=>i._saveInnerViewModel(p)))}return(yield Promise.all(r)).flat()})()}_saveInnerViewModel(e){var t=this;return(0,_.Z)(function*(){const i={type:"crt.SavePrimaryDataRequest",$context:e};return yield t.handlerChain.process(i)})()}_saveInnerViewModelCollection(e,t,i){var r=this;return(0,_.Z)(function*(){const s={type:"crt.SaveCollectionPrimaryDataRequest",$context:e,collectionAttributeName:t,scopes:i};return yield r.handlerChain.process(s)})()}_saveDataSafely(e){return e().catch(t=>[this._createFailedSaveResult(t?.message)])}_createFailedSaveResult(e){return{success:!1,rowsAffected:0,errorInfo:e}}handle(e){var t=this;return(0,_.Z)(function*(){t._validateRequest(e);const i=e.$context;return[...yield t._saveRootData(i),...yield t._saveNestedData(i,e.scopes)]})()}};sC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.SavePrimaryDataHandler",requestType:"crt.SavePrimaryDataRequest"}),(0,m.w6)("design:paramtypes",[Nr])],sC);let fI=class extends l.BaseRequest{};fI=(0,m.gn)([(0,l.CrtRequest)({type:"crt.LoadLookupListRequest"})],fI);let oC=class extends l.BaseRequestHandler{handle(e){const t={control:e.valueAttributeName,items:e.itemsAttributeName},i=e.filterValue??null,r=[{type:l.ModelParameterType.PrimaryDisplayValueFilter,value:"@requestPayload.lookupFilterValue"},...e.parameters||[]],s={...e.payload,lookupFilterValue:i};return e.$context.loadLookupList(t,r,s),Promise.resolve()}};oC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.LoadLookupListHandler",requestType:"crt.LoadLookupListRequest"})],oC);let lC=class extends l.BaseRequestHandler{_isDynamicDS(e){const t=e.config||{};return!(!t.dataSourceConfig||!t.attributeName)}_loadDynamicDS(e){const t=e.$context,i=e.config;return(0,u.lastValueFrom)(t.load(i),{defaultValue:null})}_load(e){if(!e.dataSourceName)return;const t=e.$context;let i=e.parameters;i=this._addPrimaryDisplayValueFilterIfNeed(e,i);const r=e.config;return(0,u.lastValueFrom)(t.load(e.dataSourceName,i,r),{defaultValue:null})}_addPrimaryDisplayValueFilterIfNeed(e,t){return e.primaryDisplayFilterValue?(t=t||[],[...t,{type:l.ModelParameterType.PrimaryDisplayValueFilter,value:e.primaryDisplayFilterValue}]):t}handle(e){if(!e.$context)throw new Error("Property '$context' should be specified");return this._isDynamicDS(e)?this._loadDynamicDS(e):this._load(e)}};lC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.LoadDataSourceHandler",requestType:"crt.LoadDataRequest"})],lC);let _I=class extends l.DataRequest{};_I=(0,m.gn)([(0,l.CrtRequest)({type:"crt.LoadDefaultValuesRequest"})],_I);let cC=class extends l.BaseRequestHandler{handle(e){const t=e.$context;return(0,u.lastValueFrom)(t.loadDefaultValues(e.dataSourceName),{defaultValue:null})}};cC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.LoadDefaultValuesHandler",requestType:"crt.LoadDefaultValuesRequest"})],cC);let yI=class extends l.DataRequest{};yI=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SaveDataRequest"})],yI);let uC=class extends l.BaseRequestHandler{handle(e){const t=e.$context,{dataSourceName:i,options:r,parameters:s}=e,o=t.save(i,s,r);return(0,u.lastValueFrom)(o,{defaultValue:null})}};uC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.SaveDataHandler",requestType:"crt.SaveDataRequest"})],uC);let CI=class extends l.DataRequest{};CI=(0,m.gn)([(0,l.CrtRequest)({type:"crt.DeleteDataRequest"})],CI);let dC=class extends l.BaseRequestHandler{handle(e){const t=e.$context;return(0,u.lastValueFrom)(t.delete(e.dataSourceName,e.parameters,e.config),{defaultValue:null})}};dC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.DeleteDataHandler",requestType:"crt.DeleteDataRequest"})],dC);let SI=class extends l.DataRequest{};SI=(0,m.gn)([(0,l.CrtRequest)({type:"crt.CopyDataRequest"})],SI);let pC=class extends l.BaseRequestHandler{handle(e){const t=e.$context,{dataSourceName:i,recordId:r,copiedValues:s}=e;return(0,u.lastValueFrom)(t.copy(i,r,s),{defaultValue:null})}};pC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.CopyDataHandler",requestType:"crt.CopyDataRequest"})],pC);let bI=class extends l.DataRequest{};bI=(0,m.gn)([(0,l.CrtRequest)({type:"crt.SortDataRequest"})],bI);let mC=class extends l.BaseRequestHandler{handle(e){const t=e.$context;return(0,u.lastValueFrom)(t.setSorting(e.dataSourceName,e.config),{defaultValue:null})}};mC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.SortDataHandler",requestType:"crt.SortDataRequest"})],mC);let vI=class extends l.BaseRequestHandler{handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context,r=i._injectionContext;i._injectionContext?.id&&t.handlerChain.clearContextedHandlersCache(r.id),yield t.next?.handle(e)})()}};vI=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.HandleViewModelDestroyRequest",type:"crt.ClearContextedHandlersCacheHandler"})],vI);let II=class extends l.DataRequest{};II=(0,m.gn)([(0,l.CrtRequest)({type:"crt.GetDataSourceLoadFiltersRequest"})],II);let hC=class extends l.BaseRequestHandler{constructor(e){super(),this._entitySchemaQueryBuilder=e}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context;if(!i)throw new Error("Property '$context' should be specified");const r=e.dataSourceName;if(!r)throw new Error("Property 'dataSourceName' should be specified");const s=i.dataSchemas[r];if(!s)throw new Error(`Schema for data source with name ${r} not found`);const o=yield i.getDataSourceLoadParameters(r);return o.parameters.some(c=>c.type===l.ModelParameterType.Never)?null:(0,u.lastValueFrom)(t._entitySchemaQueryBuilder.build(s,[],o.parameters).pipe((0,u.map)(c=>c.getMetadata().filters)))})()}};hC=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.GetDataSourceLoadFiltersHandler",requestType:"crt.GetDataSourceLoadFiltersRequest"}),(0,m.w6)("design:paramtypes",[Gr])],hC);class ts{selectData(){return null}}ts.\u0275fac=function(e){return new(e||ts)},ts.\u0275prov=n.\u0275\u0275defineInjectable({token:ts,factory:ts.\u0275fac,providedIn:"root"});class ns extends ts{constructor(){super(...arguments),this._elon={FirstName:"Elon",Account:{Name:"SpaceX",Ships:[{Id:"Falcon 9"},{Id:"Falcon Heavy"}],Employee:{Name:"Mask",Age:49}},Employees:["Elon"]}}selectData(){return(0,u.of)(this._elon).pipe((0,X_.g)(50))}}ns.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ns)))(t||ns)}}(),ns.\u0275prov=n.\u0275\u0275defineInjectable({token:ns,factory:ns.\u0275fac,providedIn:"root"});const d3=bn.create({token:mI,mappings:[{predicate:l.DataValueType.Lookup,injectable:Il},{predicate:pI,injectable:Ar}],default:{injectable:Rr}}),p3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Molimo odaberite vrijednost iz popisa","SelectionWindowMessage":"Molimo odaberite vrijednost iz popisa ili pretra\u017eite koriste\u0107i prozor za pretra\u017eivanje"},"Required":{"Message":"Unesite vrijednost"},"MaxLength":{"Message":"Prema\u0161ena maksimalna duljina teksta ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimalna duljina teksta nije dosegnuta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Neispravan format datuma i vremena"},"DatePickerSyntax":{"Message":"Neispravan format datuma"},"TimePickerSyntax":{"Message":"Neispravan format vremena"},"RegExp":{"Message":"Neispravan format vrijednosti"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Stupac uklonjen","ValidationErrorMessageSingleErrorField":"Polje: {0}. Gre\u0161ka: {1}","ValidationErrorMessageSeveralErrorFields":"Polja: {0}. Gre\u0161ka: {1}","RefreshModelDataConflict":"Creatio ima nove podatke za trenutnu stranicu. Kako biste ih vidjeli, spremite ili poni\u0161tite svoje promjene i osvje\u017eite stranicu.","WarningModelsWithCircularDependencies":"Neki modeli imaju cikli\u010dke ovisnosti i nisu u\u010ditani"}}'),m3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"K\xe9rj\xfck, v\xe1lassza ki az \xe9rt\xe9ket a list\xe1b\xf3l","SelectionWindowMessage":"K\xe9rj\xfck, v\xe1lasszon \xe9rt\xe9ket a list\xe1b\xf3l, vagy keressen a keres\u0151ablak seg\xedts\xe9g\xe9vel"},"Required":{"Message":"Adj meg egy \xe9rt\xe9ket"},"MaxLength":{"Message":"A maxim\xe1lis sz\xf6veghossz t\xfall\xe9pve ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Nem \xe9rte el a minim\xe1lis sz\xf6veghosszt ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\xc9rv\xe9nytelen d\xe1tum- \xe9s id\u0151form\xe1tum"},"DatePickerSyntax":{"Message":"\xc9rv\xe9nytelen d\xe1tumform\xe1tum"},"TimePickerSyntax":{"Message":"\xc9rv\xe9nytelen id\u0151form\xe1tum"},"RegExp":{"Message":"\xc9rv\xe9nytelen \xe9rt\xe9kform\xe1tum"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Oszlop elt\xe1vol\xedtva","ValidationErrorMessageSingleErrorField":"Mez\u0151: {0}. Hiba: {1}","ValidationErrorMessageSeveralErrorFields":"Mez\u0151k: {0}. Hiba: {1}","RefreshModelDataConflict":"A Creatio \xfaj adatokkal rendelkezik az aktu\xe1lis oldalhoz. A megtekint\xe9s\xe9hez mentse vagy vonja vissza a m\xf3dos\xedt\xe1sokat, \xe9s friss\xedtse az oldalt.","WarningModelsWithCircularDependencies":"Egyes modellek k\xf6rk\xf6r\xf6s f\xfcgg\u0151s\xe9ggel rendelkeznek, \xe9s nincsenek bet\xf6ltve"}}'),h3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u8bf7\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u503c","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u8f93\u5165\u503c"},"MaxLength":{"Message":"\u8d85\u8fc7\u6587\u672c\u957f\u5ea6\u9650\u5236({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u672a\u8fbe\u6587\u672c\u6700\u5c0f\u9650\u5236({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"DatePickerSyntax":{"Message":"\u65e5\u671f\u683c\u5f0f\u65e0\u6548"},"TimePickerSyntax":{"Message":"\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u5df2\u79fb\u9664","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio \u5f53\u524d\u9875\u9762\u6570\u636e\u5df2\u66f4\u6539\u3002\u8bf7\u4fdd\u5b58\u6216\u53d6\u6d88\u540e\uff0c\u518d\u5237\u65b0\u672c\u9875\u9762\u4ee5\u67e5\u770b","WarningModelsWithCircularDependencies":"\u6709\u4e9b\u6a21\u578b\u6709\u5faa\u73af\u4f9d\u8d56\u5173\u7cfb\u5e76\u4e14\u6ca1\u6709\u88ab\u52a0\u8f7d"}}'),g3=JSON.parse('{"BaseViewModel":{"RefreshModelDataConflict":"Creatio \u043c\u0430\u0454 \u043d\u043e\u0432\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0457 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438. \u0429\u043e\u0431 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u043d\u0443\u0442\u0438 \u0457\u0457, \u0437\u0431\u0435\u0440\u0435\u0436\u0456\u0442\u044c \u0430\u0431\u043e \u0441\u043a\u0430\u0441\u0443\u0439\u0442\u0435 \u0432\u0430\u0448\u0456 \u0437\u043c\u0456\u043d\u0438 \u0456 \u043e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443.","WarningModelsWithCircularDependencies":"\u0414\u0435\u044f\u043a\u0456 \u043c\u043e\u0434\u0435\u043b\u0456 \u043c\u0430\u044e\u0442\u044c \u0446\u0438\u043a\u043b\u0456\u0447\u043d\u0456 \u0437\u0430\u043b\u0435\u0436\u043d\u043e\u0441\u0442\u0456 \u0456 \u043d\u0435 \u0431\u0443\u043b\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456","DataSourceAttributeRemoved":"\u041a\u043e\u043b\u043e\u043d\u043a\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e","ValidationErrorMessageSingleErrorField":"\u041f\u043e\u043b\u0435: {0}. \u041f\u043e\u043c\u0438\u043b\u043a\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041f\u043e\u043b\u044f: {0}. \u041f\u043e\u043c\u0438\u043b\u043a\u0430: {1}"},"Validators":{"Autocomplete":{"Message":"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437\u0456 \u0441\u043f\u0438\u0441\u043a\u0443","SelectionWindowMessage":"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437\u0456 \u0441\u043f\u0438\u0441\u043a\u0443 \u0430\u0431\u043e \u0441\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435\u0441\u044f \u043f\u043e\u0448\u0443\u043a\u043e\u043c \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0432\u0456\u043a\u043d\u0430 \u0434\u043e\u0432\u0456\u0434\u043d\u0438\u043a\u0430"},"Required":{"Message":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"MaxLength":{"Message":"\u041f\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0443 \u0434\u043e\u0432\u0436\u0438\u043d\u0443 \u0442\u0435\u043a\u0441\u0442\u0443 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041d\u0435 \u0434\u043e\u0441\u044f\u0433\u043d\u0443\u0442\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0457 \u0434\u043e\u0432\u0436\u0438\u043d\u0438 \u0442\u0435\u043a\u0441\u0442\u0443 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u0438 \u0456 \u0447\u0430\u0441\u0443"},"DatePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u0438"},"TimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0447\u0430\u0441\u0443"},"RegExp":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"}}}'),f3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"T\xeb lutem p\xebrzgjidh vler\xebn nga lista","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Vendos vler\xebn"},"MaxLength":{"Message":"\xcbsht\xeb tejkaluar gjat\xebsia maksimale e tekstit ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Gjat\xebsia minimale e tekstit nuk \xebsht\xeb arritur ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format i pavlefsh\xebm i dat\xebs dhe or\xebs"},"DatePickerSyntax":{"Message":"Format i pavlefsh\xebm i dat\xebs"},"TimePickerSyntax":{"Message":"Format i pavlefsh\xebm i or\xebs"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonat u hoq\xebn","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio ka t\xeb dh\xebna t\xeb reja p\xebr faqen aktuale. P\xebr t\xeb pare, ruajtur apo anuluar ndryshimet e tua dhe p\xebr t\xeb rifreskuar faqen.","WarningModelsWithCircularDependencies":"Disa modele kan\xeb var\xebsi ciklike dhe nuk jan\xeb ngarkuar"}}'),_3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),y3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u041c\u043e\u043b\u044f, \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430","SelectionWindowMessage":"\u041c\u043e\u043b\u044f, \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430 \u0438\u043b\u0438 \u043f\u043e\u0442\u044a\u0440\u0441\u0435\u0442\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u0442\u0430 \u043d\u0430 \u043f\u0440\u043e\u0437\u043e\u0440\u0435\u0446\u0430 \u0437\u0430 \u0441\u043f\u0440\u0430\u0432\u043a\u0430"},"Required":{"Message":"\u0412\u044a\u0432\u0435\u0434\u0438 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442"},"MaxLength":{"Message":"\u041f\u0440\u0435\u0432\u0438\u0448\u0435\u043d\u0430 \u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u043d\u0430\u0442\u0430 \u0434\u044a\u043b\u0436\u0438\u043d\u0430 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u043d\u0430\u0442\u0430 \u0434\u044a\u043b\u0436\u0438\u043d\u0430 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u043d\u0435 \u0435 \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0430\u0442\u0430 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u0430 \u0434\u0430\u0442\u0430 \u0438 \u0447\u0430\u0441"},"DatePickerSyntax":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0434\u0430\u0442\u0430\u0442\u0430"},"TimePickerSyntax":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0447\u0430\u0441\u0430"},"RegExp":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442\u0442\u0430"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u041a\u043e\u043b\u043e\u043d\u0430\u0442\u0430 \u0435 \u043f\u0440\u0435\u043c\u0430\u0445\u043d\u0430\u0442\u0430","ValidationErrorMessageSingleErrorField":"\u041f\u043e\u043b\u0435: {0}. \u0413\u0440\u0435\u0448\u043a\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041f\u043e\u043b\u0435\u0442\u0430: {0}. \u0413\u0440\u0435\u0448\u043a\u0430: {1}","RefreshModelDataConflict":"Creatio \u0438\u043c\u0430 \u043d\u043e\u0432\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0442\u0435\u043a\u0443\u0449\u0430\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430. \u0417\u0430 \u0434\u0430 \u0433\u043e \u0432\u0438\u0434\u0438\u0442\u0435, \u0437\u0430\u043f\u0430\u0437\u0435\u0442\u0435 \u0438\u043b\u0438 \u043e\u0442\u043c\u0435\u043d\u0435\u0442\u0435 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0438 \u0438 \u043e\u043f\u0440\u0435\u0441\u043d\u0435\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0442\u0430.","WarningModelsWithCircularDependencies":"\u041d\u044f\u043a\u043e\u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u043c\u0430\u0442 \u043a\u0440\u044a\u0433\u043e\u0432\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0438 \u043d\u0435 \u0441\u0430 \u0437\u0430\u0440\u0435\u0434\u0435\u043d\u0438"}}'),C3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u0627\u062f\u062e\u0644 \u0642\u064a\u0645\u0629"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),S3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vyberte pros\xedm hodnotu ze seznamu","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Zadejte hodnotu"},"MaxLength":{"Message":"Byla p\u0159ekro\u010dena maxim\xe1ln\xed d\xe9lka textu ({{Aktu\xe1ln\xedD\xe9lka}}/{{Maxim\xe1ln\xedD\xe9lka}})"},"MinLength":{"Message":"Nebyla dosa\u017eena minim\xe1ln\xed d\xe9lka textu ({{Aktu\xe1ln\xedD\xe9lka}}/{{Minim\xe1ln\xedD\xe9lka}})"},"DatetimePickerSyntax":{"Message":"Neplatn\xfd form\xe1t data a \u010dasu"},"DatePickerSyntax":{"Message":"Neplatn\xfd form\xe1t data"},"TimePickerSyntax":{"Message":"Neplatn\xfd form\xe1t \u010dasu"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),b3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Bitte w\xe4hlen Sie einen Wert aus der Liste","SelectionWindowMessage":"Bitte w\xe4hlen Sie den Wert aus der Liste oder suchen Sie im Suchfenster"},"Required":{"Message":"Wert eingeben"},"MaxLength":{"Message":"Maximale Textl\xe4nge \xfcberschritten ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimale Textl\xe4nge nicht erreicht ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Ung\xfcltiges Datums- und Zeitformat"},"DatePickerSyntax":{"Message":"Ung\xfcltiges Datumsformat"},"TimePickerSyntax":{"Message":"Ung\xfcltiges Zeitformat"},"RegExp":{"Message":"Ung\xfcltiges Wertformat"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Spalte entfernt","ValidationErrorMessageSingleErrorField":"Felder: {0}. Fehler: {1}","ValidationErrorMessageSeveralErrorFields":"Felder: {0}. Fehler: {1}","RefreshModelDataConflict":"Creatio hat neue Daten f\xfcr die aktuelle Seite. Um sie anzuzeigen, speichern oder l\xf6schen Sie Ihre \xc4nderungen und aktualisieren Sie die Seite.","WarningModelsWithCircularDependencies":"Einige Modelle haben zirkul\xe4re Abh\xe4ngigkeiten und wurden nicht geladen"}}'),v3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),I3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Seleccione un valor de la lista","SelectionWindowMessage":"Por favor, seleccione el valor de la lista o busque usando la ventana de b\xfasqueda"},"Required":{"Message":"Ingrese valor"},"MaxLength":{"Message":"Se super\xf3 la longitud m\xe1xima del texto ({{actualLength}} / {{maxLength}})"},"MinLength":{"Message":"No se alcanz\xf3 la longitud m\xednima del texto ({{actualLength}} / {{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato de fecha y hora inv\xe1lido"},"DatePickerSyntax":{"Message":"Formato de fecha inv\xe1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xe1lido"},"RegExp":{"Message":"Formato de valor inv\xe1lido"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Columna eliminada","ValidationErrorMessageSingleErrorField":"Campo: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Campos: {0}. Error: {1}","RefreshModelDataConflict":"Creatio tiene nuevos datos para la p\xe1gina actual. Para verlo, guarde o cancele los cambios y actualice la p\xe1gina.","WarningModelsWithCircularDependencies":"Algunos modelos tienen dependencias circulares y no han sido cargados"}}'),D3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"\u06cc\u06a9 \u0645\u0642\u062f\u0627\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),M3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Merci de s\xe9lectionner la valeur dans la liste"},"Required":{"Message":"Saisir une valeur"},"MaxLength":{"Message":"Longueur maximale du texte d\xe9pass\xe9e ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Longueur de texte minimale non atteinte ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format de date et d\'heure non valide"},"DatePickerSyntax":{"Message":"Format de date invalide"},"TimePickerSyntax":{"Message":"Format d\'heure non valide"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),w3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Merci de s\xe9lectionner la valeur dans la liste","SelectionWindowMessage":"Merci de s\xe9lectionner une valeur dans la liste ou rechercher \xe0 l\'aide de la fen\xeatre de recherche"},"Required":{"Message":"Saisir une valeur"},"MaxLength":{"Message":"Longueur maximale du texte d\xe9pass\xe9e ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Longueur de texte minimale non atteinte ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format de date et d\'heure non valide"},"DatePickerSyntax":{"Message":"Format de date invalide"},"TimePickerSyntax":{"Message":"Format d\'heure non valide"},"RegExp":{"Message":"Format de valeur invalide"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Colonne supprim\xe9e","ValidationErrorMessageSingleErrorField":"Champ: {0}. Erreur: {1}","ValidationErrorMessageSeveralErrorFields":"Champs : {0}. Erreur: {1}","RefreshModelDataConflict":"Creatio a de nouvelles donn\xe9es pour la page en cours. Pour les visualiser, enregistrez ou annulez vos modifications et actualisez la page.","WarningModelsWithCircularDependencies":"Certains mod\xe8les disposent de d\xe9pendances circulaires et n\'ont pas \xe9t\xe9 charg\xe9s"}}'),x3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u05d0\u05e0\u05d0 \u05d1\u05d7\u05e8 \u05e2\u05e8\u05da \u05de\u05d4\u05e8\u05e9\u05d9\u05de\u05d4","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u05d4\u05d6\u05df \u05e2\u05e8\u05da"},"MaxLength":{"Message":"\u05d7\u05e8\u05d9\u05d2\u05d4 \u05de\u05d0\u05d5\u05e8\u05da \u05d4\u05d8\u05e7\u05e1\u05d8 \u05d4\u05de\u05e8\u05d1\u05d9 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u05dc\u05d0 \u05d4\u05d5\u05e9\u05d2 \u05d0\u05d5\u05e8\u05da \u05d4\u05d8\u05e7\u05e1\u05d8 \u05d4\u05de\u05d9\u05e0\u05d9\u05de\u05dc\u05d9 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u05e4\u05d5\u05e8\u05de\u05d8 \u05ea\u05d0\u05e8\u05d9\u05da \u05d5\u05e9\u05e2\u05d4 \u05dc\u05d0 \u05d7\u05d5\u05e7\u05d9"},"DatePickerSyntax":{"Message":"\u05e4\u05d5\u05e8\u05de\u05d8 \u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d0 \u05e0\u05db\u05d5\u05df"},"TimePickerSyntax":{"Message":"\u05e4\u05d5\u05e8\u05de\u05d8 \u05d6\u05de\u05df \u05dc\u05d0 \u05d7\u05d5\u05e7\u05d9"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u05d4\u05e2\u05de\u05d5\u05d3\u05d4 \u05d4\u05d5\u05e1\u05e8\u05d4","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),E3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Masukkan nilai"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),T3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Seleziona il valore dalla lista","SelectionWindowMessage":"Seleziona il valore dalla lista o cercalo usando la finestra di lookup"},"Required":{"Message":"Inserisci un valore"},"MaxLength":{"Message":"Lunghezza massima del testo superata ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Lunghezza minima del testo non raggiunta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato data e ora non valido"},"DatePickerSyntax":{"Message":"Formato data non valido"},"TimePickerSyntax":{"Message":"Formato orario non valido"},"RegExp":{"Message":"Formato valore non valido"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Colonna rimossa","ValidationErrorMessageSingleErrorField":"Campo: {0}. Errore: {1}","ValidationErrorMessageSeveralErrorFields":"Campi: {0}. Errore: {1}","RefreshModelDataConflict":"Creatio ha nuovi dati per la pagina corrente. Per visualizzarli, salva o annulla le modifiche e aggiorna la pagina.","WarningModelsWithCircularDependencies":"Alcuni modelli hanno dipendenze circolari e non sono stati caricati"}}'),P3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u30ea\u30b9\u30c8\u304b\u3089\u9805\u76ee\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044","SelectionWindowMessage":"\u30ea\u30b9\u30c8\u304b\u3089\u5024\u3092\u9078\u629e\u3059\u308b\u304b\u3001\u691c\u7d22\u7a93\u3088\u308a\u691c\u7d22\u3057\u3066\u304f\u3060\u3055\u3044"},"Required":{"Message":"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},"MaxLength":{"Message":"\u6700\u5927\u6587\u5b57\u6570\u3092\u8d85\u3048\u307e\u3057\u305f ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u6700\u5c0f\u6587\u5b57\u6570\u306b\u9054\u3057\u3066\u3044\u307e\u305b\u3093 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65e5\u4ed8\u3068\u6642\u523b\u306e\u5f62\u5f0f\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093"},"DatePickerSyntax":{"Message":"\u7121\u52b9\u306a\u65e5\u4ed8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8"},"TimePickerSyntax":{"Message":"\u7121\u52b9\u306a\u6642\u9593\u5f62\u5f0f\u3067\u3059"},"RegExp":{"Message":"\u5024\u306e\u5f62\u5f0f\u304c\u7121\u52b9\u3067\u3059"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f","ValidationErrorMessageSingleErrorField":"\u30d5\u30a3\u30fc\u30eb\u30c9: {0}. \u30a8\u30e9\u30fc: {1}","ValidationErrorMessageSeveralErrorFields":"\u30d5\u30a3\u30fc\u30eb\u30c9: {0}. \u30a8\u30e9\u30fc: {1}","RefreshModelDataConflict":"Creatio\u306b\u306f\u73fe\u5728\u306e\u30da\u30fc\u30b8\u306b\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u3059\u3002 \u5909\u66f4\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u3001\u4fdd\u5b58\u307e\u305f\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u3066\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002","WarningModelsWithCircularDependencies":"\u4e00\u90e8\u306e\u30e2\u30c7\u30eb\u306b\u306f\u5faa\u74b0\u4f9d\u5b58\u95a2\u4fc2\u304c\u3042\u308a\u3001\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u305b\u3093"}}'),A3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),R3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"\ubaa9\ub85d\uc5d0\uc11c \uac12\uc744 \uc120\ud0dd\ud558\uc2ed\uc2dc\uc624.","SelectionWindowMessage":"\ubaa9\ub85d\uc5d0\uc11c \uac12\uc744 \uc120\ud0dd\ud558\uac70\ub098 \uc870\ud68c \ucc3d\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac80\uc0c9\ud558\uc2ed\uc2dc\uc624"},"Required":{"Message":"\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4"},"MaxLength":{"Message":"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774 \ucd08\uacfc({actualLength}/{maxLength})"},"MinLength":{"Message":"\ucd5c\uc18c \ud14d\uc2a4\ud2b8 \uae38\uc774({{actualLength}/{{minLength}})\uc5d0 \ub3c4\ub2ec\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."},"DatetimePickerSyntax":{"Message":"\uc798\ubabb\ub41c \ub0a0\uc9dc \ubc0f \uc2dc\uac04 \ud615\uc2dd"},"DatePickerSyntax":{"Message":"\uc798\ubabb\ub41c \ub0a0\uc9dc \ud615\uc2dd"},"TimePickerSyntax":{"Message":"\uc798\ubabb\ub41c \uc2dc\uac04 \ud615\uc2dd"},"RegExp":{"Message":"\uc798\ubabb\ub41c \uac12 \ud615\uc2dd"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\uc5f4 \uc81c\uac70","ValidationErrorMessageSingleErrorField":"\ud544\ub4dc: {0}. \uc624\ub958: {1}","ValidationErrorMessageSeveralErrorFields":"\ud544\ub4dc: {0}. \uc624\ub958: {1}","RefreshModelDataConflict":"Creatio\uc5d0\ub294 \ud604\uc7ac \ud398\uc774\uc9c0\uc5d0 \ub300\ud55c \uc0c8 \ub370\uc774\ud130\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \ub370\uc774\ud130\ub97c \ubcf4\ub824\uba74 \ubcc0\uacbd \uc0ac\ud56d\uc744 \uc800\uc7a5\ud558\uac70\ub098 \ucde8\uc18c\ud558\uace0 \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c \uace0\uce69\ub2c8\ub2e4.","WarningModelsWithCircularDependencies":"\uc77c\ubd80 \ubaa8\ub378\uc5d0 \uc6d0\ud615 \uc885\uc18d\uc131\uc774 \uc788\uc5b4 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"}}'),k3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),N3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Selecteer een waarde uit de lijst","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Voer een waarde in"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),V3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vennligst velg verdi fra listen"},"Required":{"Message":"Angi en verdi"},"MaxLength":{"Message":"Maksimal tekstlengde er overskredet ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minste tekstlengde ikke n\xe5dd ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Ugyldig dato og klokkeslett format"},"DatePickerSyntax":{"Message":"Ugyldig datoformat"},"TimePickerSyntax":{"Message":"Ugyldig tidsformat"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonne fjernet","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),F3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),L3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Wpisz warto\u015b\u0107"},"MaxLength":{"Message":"Przekroczono maksymaln\u0105 d\u0142ugo\u015b\u0107 tekstu ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimalna d\u0142ugo\u015b\u0107 tekstu nie zosta\u0142a osi\u0105gni\u0119ta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),O3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Favor, selecionar um valor da lista","SelectionWindowMessage":"Selecionar o valor na lista ou pesquisar utilizando a janela de pesquisas"},"Required":{"Message":"Inserir um valor"},"MaxLength":{"Message":"Comprimento m\xe1ximo de texto excedido ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Comprimento m\xednimo do texto n\xe3o atingido ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato de data e hora inv\xe1lido"},"DatePickerSyntax":{"Message":"Formato de data inv\xe1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xe1lido"},"RegExp":{"Message":"Formato de valor inv\xe1lido"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coluna removida","ValidationErrorMessageSingleErrorField":"Campo: {0}. Erro: {1}","ValidationErrorMessageSeveralErrorFields":"Campos: {0}. Erro: {1}","RefreshModelDataConflict":"Creatio tem novos dados para a p\xe1gina atual. Para visualiz\xe1-los, salvar ou cancelar as suas altera\xe7\xf5es e atualizar a p\xe1gina.","WarningModelsWithCircularDependencies":"Alguns modelos t\xeam depend\xeancias circulares e n\xe3o foram carregadas"}}'),j3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Selecione um valor da lista","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Insira um valor"},"MaxLength":{"Message":"Limite m\xe1ximo de texto excedido ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Limite m\xednimo de texto n\xe3o alcan\xe7ado ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formado de data e hora inv\xe1lido"},"DatePickerSyntax":{"Message":"Formato de data inv\xe1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xe1lido"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coluna removida","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),B3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"V\u0103 rug\u0103m s\u0103 selecta\u021bi valoarea din list\u0103","SelectionWindowMessage":"V\u0103 rug\u0103m s\u0103 selecta\u0163i valoarea din list\u0103 sau s\u0103 c\u0103uta\u0163i folosind fereastra lookup-ului"},"Required":{"Message":"Introdu o valoare"},"MaxLength":{"Message":"Lungimea maxim\u0103 a textului a fost dep\u0103\u0219it\u0103 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Lungimea minim\u0103 a textului nu a fost atins\u0103 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format dat\u0103 \u0219i or\u0103 invalid"},"DatePickerSyntax":{"Message":"Format dat\u0103 invalid"},"TimePickerSyntax":{"Message":"Format orar invalid"},"RegExp":{"Message":"Format valoare invalid"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coloan\u0103 eliminat\u0103","ValidationErrorMessageSingleErrorField":"C\xe2mp: {0}. Eroare: {1}","ValidationErrorMessageSeveralErrorFields":"C\xe2mpuri: {0}. Eroare: {1}","RefreshModelDataConflict":"Creatio are date noi pentru pagina curent\u0103. Pentru a o vizualiza, salva\u021bi sau anula\u021bi modific\u0103rile \u0219i re\xeemprosp\u0103ta\u021bi pagina.","WarningModelsWithCircularDependencies":"Unele modele au dependen\u021be circulare \u0219i nu au fost \xeenc\u0103rcate"}}'),U3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430","SelectionWindowMessage":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0438\u043b\u0438 \u043e\u043a\u043d\u0430 \u0432\u044b\u0431\u043e\u0440\u0430"},"Required":{"Message":"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"},"MaxLength":{"Message":"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0430 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041d\u0435 \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u0430 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b \u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"},"DatePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b"},"TimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"},"RegExp":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041a\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u0435\u0449\u0435 \u043e\u0434\u0438\u043d \u0441\u0438\u043c\u0432\u043e\u043b."},"SchemaNameAllowedSymbols":{"Message":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 a-z, A-Z, 0-9, \u043d\u0438\u0436\u043d\u0435\u0435 \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u0442\u0438\u0440\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u043c\u0438."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u041a\u043e\u043b\u043e\u043d\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430","ValidationErrorMessageSingleErrorField":"\u041f\u043e\u043b\u0435: {0}. \u041e\u0448\u0438\u0431\u043a\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041f\u043e\u043b\u044f: {0}. \u041e\u0448\u0438\u0431\u043a\u0430: {1}","RefreshModelDataConflict":"\u0412 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0435\u0441\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0427\u0442\u043e\u0431\u044b \u0438\u0445 \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c. \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0438\u043b\u0438 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u0435 \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.","WarningModelsWithCircularDependencies":"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u043c\u0435\u044e\u0442 \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0438 \u043d\u0435 \u0431\u044b\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b"}}'),G3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"V\xe4nligen v\xe4lj v\xe4rde ur listan","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Ange ett v\xe4rde"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),z3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u0e1b\u0e49\u0e2d\u0e19\u0e04\u0e48\u0e32"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),H3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"De\u011fer girin"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),Z3=JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vui l\xf2ng ch\u1ecdn gi\xe1 tr\u1ecb t\u1eeb danh s\xe1ch","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Nh\u1eadp m\u1ed9t gi\xe1 tr\u1ecb"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded"}}'),W3={"hr-HR":p3,"hu-HU":m3,"zh-CN":h3,"uk-UA":g3,"sq-AL":f3,"en-GB":_3,"bg-BG":y3,"zh-TW":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u8bf7\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u503c","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u8f93\u5165\u503c"},"MaxLength":{"Message":"\u8d85\u8fc7\u6587\u672c\u957f\u5ea6\u9650\u5236({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u672a\u8fbe\u6587\u672c\u6700\u5c0f\u9650\u5236({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"DatePickerSyntax":{"Message":"\u65e5\u671f\u683c\u5f0f\u65e0\u6548"},"TimePickerSyntax":{"Message":"\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"RegExp":{"Message":"Invalid value format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u5df2\u79fb\u9664","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio \u5f53\u524d\u9875\u9762\u6570\u636e\u5df2\u66f4\u6539\u3002\u8bf7\u4fdd\u5b58\u6216\u53d6\u6d88\u540e\uff0c\u518d\u5237\u65b0\u672c\u9875\u9762\u4ee5\u67e5\u770b","WarningModelsWithCircularDependencies":"\u6709\u4e9b\u6a21\u578b\u6709\u5faa\u73af\u4f9d\u8d56\u5173\u7cfb\u5e76\u4e14\u6ca1\u6709\u88ab\u52a0\u8f7d"}}'),"no-NO":V3,"ko-KR":R3,"ja-JP":P3,"fr-CA":M3,zh:JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),"vi-VN":Z3,"tr-TR":H3,"th-TH":z3,"sv-SE":G3,"ro-RO":B3,"pt-PT":j3,"pt-BR":O3,"pl-PL":L3,no:F3,"nl-NL":N3,"lv-LV":k3,"kk-KZ":A3,"it-IT":T3,"id-ID":E3,"he-IL":x3,"fr-FR":w3,"fa-IR":D3,"es-ES":I3,"de-DE":b3,"cs-CZ":S3,"ar-SA":C3,"en-US":v3,"ru-RU":U3};let is=class{};is.\u0275fac=function(e){return new(e||is)},is.\u0275mod=n.\u0275\u0275defineNgModule({type:is}),is.\u0275inj=n.\u0275\u0275defineInjector({providers:[pn,qr,Ht,zi,l.FeatureService,{provide:Zi,useClass:es},{provide:Bi,useClass:Cl},{provide:ts,useClass:ns},Jf,Qn,Nt,class _P{create(e){const{validator:t,...i}=e,r=i.params.map(({name:s})=>s);return class extends wt{constructor(s){super(s),this.async=i.async}_getMessageFromParams(s){return{[i.type]:{message:s.message}}}_setParamsProxy(s){return new Proxy(s,{get(o,c){if(r.includes(c))return o[c];throw new Error(`Property ${c} is not defined in validator params config`)}})}_toPromise(s){let o;return o=s instanceof Promise?s:s instanceof u.Observable?(0,u.lastValueFrom)(s,{defaultValue:null}):Promise.resolve(s),o}validate(s,o){let c=o;o&&(c=this._setParamsProxy(o));const p=t(c)(s,c);return this.isAsync?this._toPromise(p).then(g=>g&&c?.message?this._getMessageFromParams(c):g):c?.message&&p?this._getMessageFromParams(c):p}}}},Ar,aP,{provide:hg,useClass:Hi},{provide:dI,useValue:ki.Root},{provide:yb,useValue:e_.instance},d3,Nr,kP,NP],imports:[y.CommonModule,b.UX,Rt.forRoot({i18n:W3}),Bl,Jn]}),is=(0,m.gn)([(0,l.CrtModule)({includes:[Jn],requestHandlers:[nC,iC,oC,lC,cC,uC,rC,sC,dC,pC,mC,hC],validators:[gg,py,my,hy,gy,fg,fy,_y,yy]})],is);class J3{constructor(e,t){this._injector=e,this._preprocessors=t,this._featureValues=this._injector.get(te),this._measurePerformanceService=this._injector.get(le)}onMetaDataInit(e){var t=this;return(0,_.Z)(function*(){return t._measurePerformanceService.measureCallback(`MetadataPreprocessorsRunner.OnMetadataInit.${e?.name}`,(0,_.Z)(function*(){let i=t._featureValues?.DisableCloneDeepMetaData?e:(0,q.Z)(e);for(const r of t._preprocessors)"crtOnMetaDataInit"in r&&(i=yield r.crtOnMetaDataInit(i));return i}))})()}onModelInit(e,t){var i=this;return(0,_.Z)(function*(){return i._measurePerformanceService.measureCallback(`MetadataPreprocessorsRunner.onModelInit.${e?.name}`,(0,_.Z)(function*(){for(const r of i._preprocessors)"crtOnModelInit"in r&&(e=yield r.crtOnModelInit(e,t));return e}))})()}onViewModelInit(e,t,i){var r=this;return(0,_.Z)(function*(){return r._measurePerformanceService.measureCallback(`MetadataPreprocessorsRunner.onViewModelInit.${e?.name}`,(0,_.Z)(function*(){for(const s of r._preprocessors)"crtOnViewModelInit"in s&&(e=yield s.crtOnViewModelInit(e,t,i));return e}))})()}getIsPreventCaching(){var e=this;return(0,_.Z)(function*(){for(const t of e._preprocessors)if("crtGetIsPreventCaching"in t&&(yield t.crtGetIsPreventCaching()))return Promise.resolve(!0);return Promise.resolve(!1)})()}}class zp{constructor(e){this._injector=e}createRunner(e){return new J3(this._injector,e)}}zp.\u0275fac=function(e){return new(e||zp)(n.\u0275\u0275inject(n.Injector))},zp.\u0275prov=n.\u0275\u0275defineInjectable({token:zp,factory:zp.\u0275fac,providedIn:"root"});const as="__preprocessed";class Hp{addProperty(e,t,i){this._setMutation(e,t,{operationType:"added"}),e[t]=i}updateProperty({source:e,keys:t,value:i}){if(t.includes(as))return;const r=t.pop(),s=0===t.length?e:Jb(e,t);s&&(this._setMutation(s,r,{operationType:"modified",input:s[r],output:i}),s[r]=i)}removeProperty(e,t){this._setMutation(e,t,{operationType:"deleted",input:e[t]}),delete e[t]}_forEachWithMutationsInObject(e,t){e&&e[as]&&t(e);for(const i in e){const r=e[i];"object"==typeof r&&this._forEachWithMutationsInObject(r,t)}}revert(e){const t=e;return this._forEachWithMutationsInObject(t,i=>{this._revertMutations(i)}),e}_setMutation(e,t,i){e[as]||(e[as]={}),e[as][t]=i}_revertMutations(e){const t=e[as]??{};Object.entries(t).forEach(([i,r])=>{const s=r.operationType;switch(r.operationType){case"added":delete e[i];break;case"modified":(0,J.Z)(e[i],r.output)&&(e[i]=r.input);break;case"deleted":e[i]=r.input;break;default:throw new Error(`mutation with type: ${s} not supported`)}}),delete e[as]}}Hp.\u0275fac=function(e){return new(e||Hp)},Hp.\u0275prov=n.\u0275\u0275defineInjectable({token:Hp,factory:Hp.\u0275fac,providedIn:"root"});const DI=new n.InjectionToken("CRT_METADATA_PREPROCESSOR"),K3=(new n.InjectionToken("CRT_METADATA_NAVIGATION_PREPROCESSOR"),new n.InjectionToken("CRT_METADATA_POSTPROCESSOR"));class Zp{constructor(e){this._postprocessors=e??[]}onMetaDataChanged(e){var t=this;return(0,_.Z)(function*(){let i=(0,q.Z)(e);for(const r of t._postprocessors)"crtOnMetaDataChanged"in r&&(i=yield r.crtOnMetaDataChanged(i));return i})()}}Zp.\u0275fac=function(e){return new(e||Zp)(n.\u0275\u0275inject(K3,8))},Zp.\u0275prov=n.\u0275\u0275defineInjectable({token:Zp,factory:Zp.\u0275fac,providedIn:"root"});var qp,fC,MI,Fe,X3=f(47089),eA=f(2299);!function(a){a[a.Merge=0]="Merge",a[a.Override=1]="Override"}(qp||(qp={})),function(a){a[a.Insert=0]="Insert",a[a.Remove=1]="Remove",a[a.Update=2]="Update",a[a.Move=3]="Move",a[a.MoveToIndex=4]="MoveToIndex",a[a.MoveToContainer=5]="MoveToContainer",a[a.CreateDataSource=6]="CreateDataSource",a[a.Rename=7]="Rename",a[a.ParameterChanged=8]="ParameterChanged",a[a.AttributeChanged=9]="AttributeChanged"}(fC||(fC={})),function(a){a.OnlyText="only-text",a.LeftIcon="left-icon",a.RightIcon="right-icon",a.OnlyIcon="only-icon"}(MI||(MI={})),function(a){a.None="none",a.Default="default",a.ExtraSmall="extra-small",a.Small="small",a.Medium="medium",a.Large="large",a.ExtraLarge="extra-large"}(Fe||(Fe={}));const tA=Object.values(Fe);function qg(a){return Boolean(a)&&"string"==typeof a&&tA.includes(a.toLowerCase())}class _C{}class rs extends _C{create(e){const{path:t,entitySchemaName:i,aggregationConfig:r}=e||{};return{type:"Aggregation",path:t,entitySchemaName:i,aggregationConfig:{filter:r?.filter,aggregationFunction:r?.aggregationFunction,sortByColumn:r?.sortByColumn,sortByDirection:r?.sortByDirection}}}}rs.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(rs)))(t||rs)}}(),rs.\u0275prov=n.\u0275\u0275defineInjectable({token:rs,factory:rs.\u0275fac,providedIn:"any"});class ss extends _C{create(e){const{type:t,path:i}=e||{};return{type:/\./.test(i)?l.DataSchemaAttributeType.ForwardReferenceAttribute:t,path:i}}}ss.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ss)))(t||ss)}}(),ss.\u0275prov=n.\u0275\u0275defineInjectable({token:ss,factory:ss.\u0275fac,providedIn:"any"});class os extends _C{create(e){const{path:t,functionConfig:i}=e||{};return{type:"Function",path:t,functionConfig:i}}}os.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(os)))(t||os)}}(),os.\u0275prov=n.\u0275\u0275defineInjectable({token:os,factory:os.\u0275fac,providedIn:"any"});const wI=new n.InjectionToken("A factory of entity data source attribute config creator"),xI=bn.create({token:wI,mappings:[{predicate:a=>a.type===l.DataSchemaAttributeType.AggregationAttribute,injectable:rs},{predicate:a=>a.type===l.DataSchemaAttributeType.FunctionAttribute,injectable:os}],default:{injectable:ss}}),EI=new n.InjectionToken("data source config applier"),TI=new n.InjectionToken("data source instance config");function PI(a){if(!a.modelConfig)return null;if(a.modelConfig.primaryDataSourceName)return a.modelConfig.primaryDataSourceName;if(!a.modelConfig.dataSources)return null;const e=Object.entries(a.modelConfig.dataSources).find(([,t])=>!t?.hiddenInPageDesigner&&t?.scope!==l.DataSourceScope.ViewElement&&t.type!==Rh);return e?e[0]:null}function $e(a){return"string"==typeof a&&a.startsWith("$")&&a.length>1}function ls(a){return $e(a)&&/^\$(\w+\.)*\w+$/.test(a)}function yC(a){return"string"==typeof a&&a.startsWith(`$${ho}.${Pa.string}.`)}function AI(a){return/^\$(?<AttributeName>.+):(?<PropertyName>.+?)(?=(?==(?<defValue>.*))|(?=$))/.test(a)}function CC(a){return"string"==typeof a&&/@event\b/.test(a)}function RI(a){return Boolean(a.match(/^'.*'$/))}function kI(a){return!isNaN(Number(a))&&!isNaN(parseFloat(a))}function NI(a){return"true"===a||"false"===a}function VI(a){const e={expression:a},t=a.split("|").map(i=>i.trim());if($e(a)){const i=t.shift();e.binding=i,yC(i)&&(e.resourcePath=i.substring(1)),AI(i)&&(e.attributeProperty=i.substring(1)),ls(i)&&(e.attributePath=i.substring(1))}else{if(!CC(a))return e.value=a,e;{const i=t.shift();e.event=i.substring(7)}}return e.converters=t.map(i=>{const[r,...s]=i.split(":").map(o=>o.trim());return{type:r,parameters:s.map(o=>VI(o))}}),e}class rA{constructor(e){this.injector=e}}class Hl{constructor(e,t,i){this._config=e,this._configApplyFn=t,this._entityDataSourceAttributeConfigCreatorFactory=i}_createAttributeName(e){return M_(e)}_createAttribute(e){return this._entityDataSourceAttributeConfigCreatorFactory.create(e).create(e)}_getAttributes(){return this._config.attributes||{}}_getAttributeByPath(e){return Object.values(this._getAttributes()).find(t=>t.path===e)}_getAttribute(e){const t=e.name;if(t)return this._getAttributes()[t];const i=e.path;return i?this._getAttributeByPath(i):void 0}_setAttributes(e){this._config.attributes=e}setAttributes(e){const t=e.reduce((i,r)=>{const s=this._createAttributeName(r.name);let o;return r.type===l.DataSchemaAttributeType.AggregationAttribute?(o=this._getAttribute({name:s})||this._createAttribute(r),o.aggregationConfig=r.aggregationConfig,o.entitySchemaName=r.entitySchemaName):o=this._getAttribute({name:s})||this._getAttribute({path:r.path})||this._createAttribute(r),i[s]=o,i},{});return this._setAttributes(t),this}getAttributeNames(){return Object.keys(this._getAttributes())}apply(){this._configApplyFn(this._config)}}Hl.\u0275fac=function(e){return new(e||Hl)(n.\u0275\u0275inject(TI),n.\u0275\u0275inject(EI),n.\u0275\u0275inject(wI))},Hl.\u0275prov=n.\u0275\u0275defineInjectable({token:Hl,factory:Hl.\u0275fac,providedIn:"any"});class mn{constructor(e){this.injector=e,this._entityDataSourceConfigServices=new Map,this._primaryDataSourceNameMacros="#PrimaryDataSourceName()#",this.schemaChanged$=new u.Subject,this.schemaLoaded$=new u.ReplaySubject(null)}get schema(){return this.injector.get(te).EnableSchemaDeepCloning?(0,q.Z)(this._schema):this._schema}get schemaName(){return this._schema.name}get resources(){return this._schema.resources}_isViewConfigInfoBindedByPropertyValues(e,t){const i=Object.values(e);for(const r of i)if(t.some(s=>$e(s)?Boolean(r?.toString()?.startsWith(s)):r===s))return!0;return!1}_getDataSourceAttributePath(e,t){return`${e}.${t}`}_getViewModelAttributeConfig(e,t,i=!1){const r={};return!e[t]&&i&&(e[t]=r),e[t]||r}_getModelConfig(e,t=!1){const i={};return!e.modelConfig&&t&&(e.modelConfig=i),e.modelConfig||i}_getCollectionItemViewModelConfig(e,t=!1){const i={attributes:{}};return!e.viewModelConfig&&t&&(e.viewModelConfig=i),e.viewModelConfig||i}_getDataSourcesConfig(){return this._schema?.modelConfig?.dataSources}_initModelConfig(){this._schema?.modelConfig||(this._schema.modelConfig={dataSources:{}}),this._schema.modelConfig.dataSources||(this._schema.modelConfig.dataSources={})}_setModelConfigPath(e,t,i){this._getModelConfig(e,!0).path=this._getDataSourceAttributePath(t,i)}_onDataSourceInstanceConfigChange(e){const t=this._schema.modelConfig.dataSources[e];if(t&&"crt.EntityDataSource"===t.type){const i=t.config||{},r=o=>this.bindDataSource(e,o),s=n.Injector.create({providers:[{provide:TI,useValue:i},{provide:EI,useValue:r},xI],parent:this.injector});this._entityDataSourceConfigServices.set(e,s.get(Hl))}}_initializeSchemaDataSourceInstanceServices(){const e=this._schema.modelConfig?.dataSources;if((0,Ii.Ig)(e))for(const t of Object.keys(e))this._onDataSourceInstanceConfigChange(t)}_removeDataSourceDependencies(e,t){void 0!==t?.dependencies?.[e]&&delete t.dependencies[e]}_removeDependedRelationConfigs(e,t){!e||!t||Object.keys(t).forEach(i=>{t[i]=t[i].filter(r=>!this._isRelatedOnDataSource(e,r))})}_isRelatedOnDataSource(e,t){return(t.relationPath.split(".").shift()??"")===e}_setPrimaryDataSourceIfNotSet(e){this._schema.modelConfig.primaryDataSourceName||this.setPrimaryDataSource(e)}getViewModelAttributesConfig(e=!1){const t=this.getViewModelConfig(e);return!t.attributes&&e&&(t.attributes={}),t.attributes||{}}updateModelConfig(e){e&&(this._schema.modelConfig={...e},this._entityDataSourceConfigServices.clear(),this._initializeSchemaDataSourceInstanceServices())}updateSchemaViewModelConfig(e){e&&(this._schema.viewModelConfig={...e})}getViewModelConfig(e=!1){return ve.getViewModelConfig(this._schema,e)}getModelConfig(e=!1){return!this._schema.modelConfig&&e&&(this._schema.modelConfig={}),this._schema.modelConfig||{}}init(e){this._schema=e;const t=this.getPrimaryDataSourceName();t&&this._setPrimaryDataSourceIfNotSet(t),this._initializeSchemaDataSourceInstanceServices(),this.schemaLoaded$.next(e)}setModelDependencies(e){this._initModelConfig(),this._schema.modelConfig.dependencies=Object.fromEntries(Object.entries(e??{}).filter(([,t])=>t?.filter(Boolean).length>0)),(0,O.Z)(this._schema.modelConfig.dependencies)&&delete this._schema.modelConfig.dependencies}upsertModelDependencies(e){const t={...this.getModelDependencies(),...e};this.setModelDependencies(t)}getModelDependencies(){return this._initModelConfig(),this._schema.modelConfig.dependencies||{}}setModelDependency(e,t){const i=this.getModelDependencies();i[e]=t,this.setModelDependencies(i)}getDependentModelsNames(e,t){const i=this.getModelDependencies();return Object.entries(i).filter(([,r])=>{let s=e;return t&&(s=`${e}.${t}`),r.some(o=>o.relationPath.startsWith(s))}).map(([r])=>r)}setPrimaryDataSource(e){const t=this._schema.modelConfig.dataSources[e].scope;if(t===l.DataSourceScope.ViewElement)throw new Error(`Data source ${e} with scope ${t} cannot be set primary. Only page scope data sources could be primary.`);this._schema.modelConfig.primaryDataSourceName=e}createDataSource(e,t){if(this._initModelConfig(),this._schema.modelConfig.dataSources[e])throw new Error(`Data source '${e}' already exists`);this._schema.modelConfig.dataSources[e]=t,t.scope===l.DataSourceScope.Page&&this._setPrimaryDataSourceIfNotSet(e),t.hiddenInPageDesigner||this.schemaChanged$.next({schema:this._schema,changes:{viewConfig:this._schema.viewConfig,operation:fC.CreateDataSource}}),this._onDataSourceInstanceConfigChange(e)}getPrimaryDataSourceName(){return PI(this._schema)}getIsPrimaryDataSourceAttributePath(e){const t=this.getPrimaryDataSourceName();return e.split(".")[0]===t}toPrimaryDataSourceMacrosAttributePath(e){const t=e.split(".");return t.length>1&&t.shift(),[this._primaryDataSourceNameMacros,...t].join(".")}isViewModelAttributeExists(e){return null!=this.getViewModelAttributesConfig()[e]}getViewConfigInfoByName(e){return ve.getViewConfigInfoByName(this._schema,e)}getViewConfigInfoByFilter(e){return ve.getViewConfigInfoByFilter(e,this._schema?.viewConfig)}getViewConfigsByViewModelAttribute(e){return this.getViewConfigInfoByProperty("control","$"+e)}getViewConfigInfoByProperty(e,t){return ve.getViewConfigInfoByProperty(e,t,this._schema?.viewConfig)}getViewConfigPathByPropertyValue(e,t){return ve.getViewConfigPathByPropertyValue(e,t,this._schema?.viewConfig)}getViewConfigInfoByPropertyValues(e){const t=Object.entries(this.getViewModelAttributesConfig()),i=e.map(r=>$e(r)?t.filter(([o,c])=>c?.from?.includes(r.slice(1))).map(([o])=>`$${o}`).concat([r]):r).flat();return ve.getViewConfigInfoByFilter(r=>this._isViewConfigInfoBindedByPropertyValues(r,i),this._schema?.viewConfig)}setViewModelAttribute(e,t){this.getViewModelAttributesConfig(!0)[e]=t}updateViewModelAttribute(e,t){if(!this.isViewModelAttributeExists(e))throw new Error(`ViewModel does not contain attribute with name '${e}'`);const i=this.getViewModelAttributesConfig(),r=(0,q.Z)(i[e]);i[e]=(0,X3.Z)(r,t,(s,o)=>(0,eA.kJ)(o)?o:void 0)}generateUniqueAttributeNameByType(e){return Mh.generateUnique(e)}getMappedDataSourceAttributePath(e){const t=this.getViewModelAttributesConfig(!0),i=this._getViewModelAttributeConfig(t,e);return this._getModelConfig(i,!0).path}getBoundValueAttribute(e){const t=this.getViewConfigInfoByName(e);if(!t||!t.viewConfig)throw new Error(`ViewItem with name '${e}' not found in schema`);const i=l.ViewElementRegistry.getFormControlRelatesAttribute(t.viewConfig.type),r=t.viewConfig[i];return r?.startsWith("$")?r.slice(1):null}getDataSourceConfigAttributePath(e,t){const i=this.getDataSourceConfigByName(e);return i?.attributes?i.attributes[t]?.path:null}removeDataSourceAttributePath(e){const t=this.getViewModelAttributesConfig(!0),i=this._getViewModelAttributeConfig(t,e);vl(i)&&i.modelConfig&&delete i.modelConfig}removeViewModelAttribute(e){if(this.injector.get(te).EnableSchemaServiceRemoveViewModelAttribute){delete this.getViewModelAttributesConfig(!0)[e]}}removeUnboundDataSource(e){if(!e||this.isDataSourceBound(e))return;const t=this.getModelConfig();void 0!==t?.dataSources?.[e]&&delete t.dataSources[e],this._removeDependedRelationConfigs(e,t?.dependencies),this._removeDataSourceDependencies(e,t)}removeDependedRelationConfigs(e){const t=this.getModelConfig();this._removeDependedRelationConfigs(e,t.dependencies)}removeDataSourceDependencies(e){const t=this.getModelConfig();this._removeDataSourceDependencies(e,t)}removeFilterBindings(e){const t=this.getViewModelAttributesConfig(!0);Object.values(t).forEach(i=>{let r=[];vl(i)&&(r=i.modelConfig?.filterAttributes),r?.length&&(i.modelConfig.filterAttributes=r.filter(s=>s.name!==e))})}createViewModelAttribute(e,t){if(this.isViewModelAttributeExists(e))throw new Error(`ViewModel already contain attribute with name '${e}'`);this.getViewModelAttributesConfig(!0)[e]=t}createDefaultAttribute(e){this.createViewModelAttribute(e,{})}findAttributeByDataSourceAttributePath(e){const t=this.findAllAttributesByDataSourceAttributePath(e);return t&&t.length>0?t[0]:null}findAllAttributesByDataSourceAttributePath(e){const t=this.getViewModelAttributesConfig(!0),i=Object.keys(t).filter(s=>{const o=t[s]??{};return vl(o)&&o.modelConfig?.path===e});if(i.length>0)return i;const r=e.split(".");if(r.length>2){const s=r[0],c=this.getDataSourceConfigByName(s)?.attributes;if(c){const d=r.slice(1).join("."),p=Object.keys(c).find(g=>c[g].path===d);if(p)return this.findAllAttributesByDataSourceAttributePath(`${s}.${p}`)}}return[]}getOrAddViewModelAttribute(e,t=""){const i=`${t=t||this.getPrimaryDataSourceName()}.${e}`;let r=this.findAttributeByDataSourceAttributePath(i);return r||(r=this.generateUniqueAttributeNameByType(e),this.createViewModelAttribute(r,{modelConfig:{path:i}})),r}createAndBindViewModelAttribute(e,t,i){this.bindViewModelAttribute(e,t,i,!0)}bindViewModelAttribute(e,t,i,r){if(!this.isViewModelAttributeExists(e)&&!r)throw new Error(`ViewModel has no attribute with name '${e}'`);const s=this.getViewModelAttributesConfig(!0),o=this._getViewModelAttributeConfig(s,e,r);this._getModelConfig(o,!0).path=this._getDataSourceAttributePath(t,i),this.setViewModelAttribute(e,o)}bindViewModelAttributeCollection(e,t,i,r="",s=qp.Merge){if(!this.isViewModelAttributeExists(e))throw new Error(`ViewModel has no attribute with name '${e}'`);const o=this.getViewModelAttributesConfig(!0),c=this._getViewModelAttributeConfig(o,e);this._getModelConfig(c,!0).path=t;const p=this._getCollectionItemViewModelConfig(c,!0);s===qp.Merge?i.forEach(g=>{const C=this._getViewModelAttributeConfig(p.attributes,`${r}${g}`,!0);this._setModelConfigPath(C,t,g)}):s===qp.Override&&(p.attributes=i.reduce((g,C)=>{const v=this._getViewModelAttributeConfig(p.attributes,`${r}${C}`,!0);return this._setModelConfigPath(v,t,C),g[`${r}${C}`]=v,g},{}))}isDataSourceExists(e){const t=this._getDataSourcesConfig();return t&&null!=t[e]}getDataSourceConfigByName(e){const t=this._getDataSourcesConfig();return t?t[e]?.config:null}bindDataSource(e,t){let i=this._getDataSourcesConfig();i||(this._initModelConfig(),i=this._getDataSourcesConfig()),this.isDataSourceExists(e)&&(i[e].config=t),this._onDataSourceInstanceConfigChange(e)}getDataSources(){const e=this._getDataSourcesConfig(),t=[];return e&&Object.keys(e).forEach(i=>{t.push(e[i])}),t}removeDataSourcesFilterAttributeBinding(e){const t=this.getViewModelAttributesConfig(!0);Object.values(t).forEach(i=>{let r=[];vl(i)&&(r=i.modelConfig?.filterAttributes),r?.length&&(i.modelConfig.filterAttributes=r.filter(s=>s.name!==e))})}getEntityDataSourceConfigService(e){return this._entityDataSourceConfigServices.get(e)}getViewModelAttribute(e){return ve.getViewModelAttribute(this._schema,e)}removeUnboundViewModelAttribute(e){!1===this.isViewModelAttributeBound(e)&&this.removeViewModelAttribute(e)}isViewModelAttributeBound(e){return ve.isViewModelAttributeBound(this._schema,e)}isDataSourceBound(e){const t=this.getViewModelAttributesConfig();return Object.values(t).some(i=>i?.modelConfig?.path?.split(".")?.shift()===e)}findBoundDataSources(e,t){const i={};for(const[r,s]of Object.entries(e)){const o=$e(s)&&VI(s).attributePath;if(!o)continue;const c=this.getViewModelAttribute(o),d=c?.modelConfig?.path;!d||t?.collectionsOnly&&!c?.isCollection||(i[r]=d)}return i}ngOnDestroy(){this.schemaChanged$.complete(),this.schemaLoaded$.complete()}}mn.\u0275fac=function(e){return new(e||mn)(n.\u0275\u0275inject(n.Injector))},mn.\u0275prov=n.\u0275\u0275defineInjectable({token:mn,factory:mn.\u0275fac,providedIn:"platform"});var BI=f(64600),lA=f(26252);class UI{}class cA{}class Zl extends UI{constructor(e){super(),this._clientParentSchemaService=e,this._requireJs=window.requirejs}_getParentSchemaFromService(e){return this._clientParentSchemaService.getParentSchemasLocalizableStrings(e)}_getParentSchemasLocalizableResources(e){const t=[];return this._getParentSchemaFromService(e).pipe((0,u.map)(i=>{i.values?.map(r=>{const s={};r.lczList?.map(o=>{const c={};o.values?.map(d=>{c[d.cultureName]=d.value}),s[o.name]=c}),t.push([r?.schemaName,{localizableImages:{},localizableStrings:s}])})}),(0,u.mergeMap)(()=>(0,u.of)(t)))}loadResources(e){return new u.Observable(t=>this._requireJs([e],()=>{this._requireJs([`${e}Structure`],i=>{t.next(i.schemaUId),t.complete()})})).pipe((0,u.mergeMap)(t=>this._getParentSchemasLocalizableResources(t)),(0,u.map)(t=>t.reverse()))}}Zl.\u0275fac=function(e){return new(e||Zl)(n.\u0275\u0275inject(cA))},Zl.\u0275prov=n.\u0275\u0275defineInjectable({token:Zl,factory:Zl.\u0275fac,providedIn:"root"});class ql extends UI{constructor(e,t){super(),this._profileSchemaProvider=e,this._userInfo=t}_getSchemaPartKeys(){return this._userInfo.isSSP?[Yo,Pd,""]:[Yo,""]}_appendValuesForCurrentCulture(e){const t=this._userInfo.cultureInfo.sysCultureName;return Object.keys(e).forEach(i=>{const r=e[i]??{};r[t]??(r[t]=Object.values(r).shift())}),e}_createTranslationPartByKey(e,t){const i=e.find(r=>r.name?.toUpperCase()===t.toUpperCase());return[t.toUpperCase(),{localizableImages:this._appendValuesForCurrentCulture(i?.localizableImages??{}),localizableStrings:this._appendValuesForCurrentCulture(i?.localizableStrings??{})}]}loadResources(e){const t=this._getSchemaPartKeys();return this._profileSchemaProvider.get(e).pipe((0,h.U)(i=>t.map(r=>this._createTranslationPartByKey(i,r))))}}ql.\u0275fac=function(e){return new(e||ql)(n.\u0275\u0275inject(xp),n.\u0275\u0275inject(Q))},ql.\u0275prov=n.\u0275\u0275defineInjectable({token:ql,factory:ql.\u0275fac,providedIn:"root"});class $l{get resourcesDiff(){return(0,q.Z)(this._resourcesDiff)}get resources(){return(0,q.Z)(this._resources)}constructor(e){this._amdSchemaLocalizationService=e.get(Zl),this._profileSchemaLocalizationService=e.get(ql),this._jsonObjectDifferService=e.get(Mr)}init(e){return this._schemaName=e.schemaName,this._partName=e.partName,this._resources$=(0,u.forkJoin)([this._amdSchemaLocalizationService.loadResources(this._schemaName),this._profileSchemaLocalizationService.loadResources(this._schemaName)]).pipe((0,h.U)(t=>t.flat()),(0,h.U)(t=>{const i=t.findIndex(([r])=>r===this._partName);return-1===i?t:t.slice(0,i+1)}),(0,M.w)(t=>(0,u.from)(t)),(0,h.U)(([,t])=>t),(0,lA.u)((t,i)=>(0,Dn.Z)(t,i),{}),(0,I.b)(t=>this._resources=t),(0,ee.B)()),Promise.resolve(void 0)}loadResources(){return(0,u.lastValueFrom)(this._resources$)}upsertResources(e){var t=this;return(0,_.Z)(function*(){t._resources||(yield t.loadResources()),t._resourcesDiff=t._jsonObjectDifferService.deepObjectDiff(t._resources,e),t._resources=W_()(t._resources,e)})()}}$l.\u0275fac=function(e){return new(e||$l)(n.\u0275\u0275inject(n.Injector))},$l.\u0275prov=n.\u0275\u0275defineInjectable({token:$l,factory:$l.\u0275fac});const GI=()=>{const a=(0,n.inject)(n.Injector);return()=>new $l(a)},zI=new n.InjectionToken("Factory of SchemaLocalizationService",{providedIn:"root",factory:GI}),uA=new n.InjectionToken("Factory of SchemaService",{providedIn:"root",factory:()=>{const a=(0,n.inject)(n.Injector);return()=>new mn(a)}}),HI={name:"",schema:{viewConfigDiff:[],viewModelConfig:{},viewModelConfigDiff:[],modelConfig:{}},structure:{},resources:{localizableImages:{},localizableStrings:{}}};class Wl{get _cultureName(){return this._userInfo.cultureInfo.sysCultureName}constructor(e,t,i,r,s,o,c,d){this._amdSchemaLoaderService=e,this._profileSchemaLoader=t,this._schemaBuilder=i,this._schemaDifferService=r,this._profileSchemaProvider=s,this._userInfo=o,this._injector=c,this._measurePerformanceService=d,this._initialized$=new u.BehaviorSubject(null),this._applyingOperationsQueue$=new u.BehaviorSubject([]),this._partsChangedCallBacks=new Map}_queueOperation(e){const t=[...this._applyingOperationsQueue$.value,e];this._applyingOperationsQueue$.next(t)}_removeOperation(e){const t=this._applyingOperationsQueue$.value.filter(i=>i!==e);(0,J.Z)(this._applyingOperationsQueue$.value,t)||this._applyingOperationsQueue$.next(t)}_waitOperation(e){return this._applyingOperationsQueue$.pipe((0,h.U)(t=>t[0]),(0,P.h)(t=>null==t||t===e),(0,h.U)(()=>{}))}_findSchemaPartIndex(e){return this._state.schemaParts.findIndex(t=>t.name===e)}_getPreviousSchemaPartKey(e){const{schemaParts:t}=this._state,i=this._findSchemaPartIndex(e);return-1===i||0===i?null:t[i-1].name}_actualizeSchemaPartsStartsFrom(e){var t=this;return(0,_.Z)(function*(){const i=t._findSchemaPartIndex(e);if(-1===i)return;const r=t._state.schemaParts.slice(i).map(s=>s.name);for(const s of r)yield t._actualizeSchemaPart(s)})()}_actualizeSchemaPart(e){var t=this;return(0,_.Z)(function*(){var i;const{schemaParts:r,changedParts:s,schemaBundles:o}=t._state,c=t._getPreviousSchemaPartKey(e);if(!c)return void s.add(c);const d=o[c]??(yield(0,u.lastValueFrom)(t._buildSchemaBundle(c))),p=t._findSchemaPartIndex(e),g=t._schemaDifferService.getDiff(d,o[e]),C={...r[p],schema:g.schema,resources:{localizableImages:$b(g.localizableImages,t._cultureName),localizableStrings:$b(g.localizableStrings,t._cultureName)},localizableImages:g.localizableImages,localizableStrings:g.localizableStrings};(0,J.Z)(r[p],C)||s.add(e),r[p]=C,(i=r[p]).name??(i.name=e)})()}_actualizeSchemaBundleResources(e,t,i){const{resources:r,resourcesDiff:s}=i;if((0,O.Z)(s))return;const o=this._findSchemaPartIndex(e),c=this._state.schemaParts[o],d=W_()(c,s);t.resources={strings:Wb(r.localizableStrings,this._cultureName)},t.localizableStrings=Yb(d.localizableStrings),t.localizableImages=Yb(d.localizableImages)}init(e){return this._state={schemaName:e,schemaParts:[],schemaBundles:{},changedParts:new Set,packagePartKey:null},this._initialized$.next({schemaName:e,ready:!1}),(0,u.zip)(this._amdSchemaLoaderService.load(e),this._profileSchemaLoader.load(e)).pipe(this._measurePerformanceService.measure$(`SchemaPartsService.init.${e}`),(0,h.U)(([t,i])=>{const r=(0,BI.Z)(t),s=(0,BI.Z)(i);return this._setParts(r,s)}),(0,M.w)(()=>this._build()),(0,I.b)(()=>this._initialized$.next({schemaName:e,ready:!0})))}getState(){return this._state}restoreState(e){this._state=e,this._initialized$.next({schemaName:e.schemaName,ready:!0})}subscribeOnPartsChanged(e){const t=(0,l.generateGuid)();return this._partsChangedCallBacks.set(t,e),()=>this._partsChangedCallBacks.delete(t)}use(e){var t=this;const i=this._normalizeSchemaPartKey(e),r=this._initialized$.pipe((0,P.h)(({ready:s,schemaName:o})=>o===this._state.schemaName&&s),(0,Ee.q)(1),(0,M.w)(()=>this._buildSchemaBundle(i)),(0,M.w)(function(){var s=(0,_.Z)(function*(o){return[yield t._createSchemaService(o),yield t._createSchemaLocalizationService(i)]});return function(o){return s.apply(this,arguments)}}()));return(0,u.lastValueFrom)(r)}apply(e,t="USER"){var i=this;const r=(0,l.generateGuid)(),s=this._normalizeSchemaPartKey(t);return(0,u.lastValueFrom)(this._initialized$.pipe((0,P.h)(({ready:o,schemaName:c})=>c===this._state.schemaName&&o),(0,I.b)(()=>this._queueOperation(r)),(0,M.w)(()=>this._waitOperation(r)),(0,Ee.q)(1),(0,M.w)(()=>{const o=this._findSchemaPartIndex(s);if(-1===o)throw new Error(`schema part "${t}" not found`);const d=[...this._state.schemaParts].slice(o,this._state.schemaParts.length).map(p=>(0,u.forkJoin)([(0,u.of)(p.name),this._buildSchemaBundle(p.name)]));return(0,u.forkJoin)(d).pipe((0,M.w)(function(){var p=(0,_.Z)(function*(g){for(const[C,v]of g)yield i._apply(v,e,C)});return function(g){return p.apply(this,arguments)}}()))}),(0,G.K)(()=>(0,u.of)(void 0)),(0,I.b)(()=>this._removeOperation(r))),{defaultValue:void 0})}commit(e={silent:!0}){var t=this;return(0,u.lastValueFrom)(this._initialized$.pipe((0,P.h)(({ready:i,schemaName:r})=>r===this._state.schemaName&&i),(0,M.w)(()=>this._waitOperation(void 0)),(0,Ee.q)(1),(0,h.U)(()=>[...this._state.schemaParts].pop().name),(0,h.U)(i=>this._state.schemaBundles[i]),(0,M.w)(function(){var i=(0,_.Z)(function*(r){for(const[,s]of t._partsChangedCallBacks)yield s?.({bundle:r,silent:Boolean(e?.silent)});return r});return function(r){return i.apply(this,arguments)}}()),(0,M.w)(()=>this._saveParts()),(0,I.b)(()=>this._state.changedParts.clear())),{defaultValue:null})}_apply(e,t,i){var r=this;return(0,_.Z)(function*(){const s=yield r._createSchemaService(e),o=yield r._createSchemaLocalizationService(i);yield t([s,o]);const c={...s.schema};r._actualizeSchemaBundleResources(i,c,o),r._state.schemaBundles[i]=c,yield r._actualizeSchemaPartsStartsFrom(i)})()}_build(){const e=[...this._state.schemaParts].pop().name;return this._buildSchemaBundle(e,{tryGetFromCache:!0}).pipe(this._measurePerformanceService.measure$(`SchemaPartsService.build.${this._state.schemaName}`))}_setParts(e,t){this._state.packagePartKey=[...e].pop()?.name,t=this._normalizeProfileParts(t),this._state.schemaParts=[...e,...t]}_normalizeProfileParts(e){const t={...HI,name:this._getAllEmployeePartCode()},i={...HI};return e&&0!==e.length?(!1===e.some(r=>r.name===t.name)&&(e=[t,...e]),!1===e.some(r=>r.name===i.name)&&(e=[...e,i]),e):[t,i]}_normalizeSchemaPartKey(e){switch(e){case"PACKAGE":return this._state.packagePartKey;case"ALL_EMPLOYERS":return this._getAllEmployeePartCode();case"USER":return"";default:return e??""}}_getAllEmployeePartCode(){return this._userInfo?.isSSP?Pd.toUpperCase():Yo.toUpperCase()}_buildSchemaBundle(e,t={tryGetFromCache:!1}){const i=this._combineSchemaParts(e);return this._schemaBuilder.build(i,t).pipe((0,I.b)(r=>r.localizableStrings=this._buildLocalizableStrings(i)),(0,I.b)(r=>this._state.schemaBundles[e]=r))}_buildLocalizableStrings(e){return W_().all(e.map(t=>t.localizableStrings||{}),{arrayMerge:(t,i,r)=>i})}_combineSchemaParts(e){const t=this._findSchemaPartIndex(e);return this._state.schemaParts.slice(0,t+1)}_createSchemaService(e){const t=this._injector.get(uA)();return t.init((0,q.Z)(e)),Promise.resolve(t)}_saveParts(){const{schemaName:e,schemaParts:t,changedParts:i,packagePartKey:r}=this._state,s=this._findSchemaPartIndex(r),o=t.slice(s+1,t.length).filter(g=>i.has(g.name)),c=o.find(g=>g.name?.toUpperCase()===Yo.toUpperCase());if(c&&o.push({...c,name:Pd.toUpperCase()}),!o.length)return Promise.resolve([]);if(this._savePartsPromise)return this._savePartsPromise;const d=o.map(g=>this._profileSchemaProvider.set(e,g)),p=(0,u.forkJoin)(d).pipe((0,I.b)(()=>this._savePartsPromise=null));return this._savePartsPromise=(0,u.lastValueFrom)(p,{defaultValue:[]}),this._savePartsPromise}_createSchemaLocalizationService(e){var t=this;return(0,_.Z)(function*(){const i=t._injector.get(zI)();return yield i.init({schemaName:t._state.schemaName,partName:e}),i})()}}Wl.\u0275fac=function(e){return new(e||Wl)(n.\u0275\u0275inject(Oi),n.\u0275\u0275inject(xr),n.\u0275\u0275inject(ji),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(xp),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(le))},Wl.\u0275prov=n.\u0275\u0275defineInjectable({token:Wl,factory:Wl.\u0275fac});class $p{constructor(e){this._schemaService=e,this._forPropertyName="for"}getRelatedFor(e){const r=(this._schemaService.getViewConfigInfoByName(e).viewConfig||{})[this._forPropertyName];return(0,u.of)(r)}getRelatedForViewConfig(e){return this.getRelatedFor(e).pipe((0,u.switchMap)(t=>t?(0,u.of)(this._schemaService.getViewConfigInfoByName(t).viewConfig):(0,u.of)(null)))}getRelatedToViewElementConfig(e){const t=this._schemaService.getViewConfigInfoByProperty(this._forPropertyName,e).map(i=>i?.viewConfig);return(0,u.of)(t)}}$p.\u0275fac=function(e){return new(e||$p)(n.\u0275\u0275inject(mn))},$p.\u0275prov=n.\u0275\u0275defineInjectable({token:$p,factory:$p.\u0275fac,providedIn:"root"});class dA{constructor(e,t,i){this._schema=e,this._resourceFinderService=t,this._macrosService=i}getElements(e){const t=ve.getViewConfigInfoByFilter(i=>e.includes(i.type),this._schema?.viewConfig);return this._macrosService.handleResourceMacros(t,this._schema.resources)}getResourceValue(e){if(ls(e)&&yC(e)){return this._resourceFinderService.findValueFromResource(e,this._schema.resources)||e}return e}getDataSources(){return(0,u.of)(this._schema.modelConfig.dataSources??{})}}class Wp{constructor(e,t,i,r,s){this._loader=e,this._builder=t,this._schemaService=i,this._macrosService=r,this._resourceFinderService=s}createSchemaMetadataQuery(e){return this._loader.load(e).pipe((0,M.w)(t=>this._builder.build(t.reverse())),(0,h.U)(t=>(this._schemaService.init(t),new dA(t,this._resourceFinderService,this._macrosService))))}}Wp.\u0275fac=function(e){return new(e||Wp)(n.\u0275\u0275inject(Oi),n.\u0275\u0275inject($n),n.\u0275\u0275inject(mn),n.\u0275\u0275inject(cn),n.\u0275\u0275inject(Nt))},Wp.\u0275prov=n.\u0275\u0275defineInjectable({token:Wp,factory:Wp.\u0275fac,providedIn:"root"});class Yp{_generateConverterMetadata(e,t,i){const{converter:r,args:s}=t,o=(s??[]).map((p,g)=>[`${e}_${i}_Arg_${g}`,{value:p}]);if(0===o.length)return{converterExpression:r,converterArgsAttributes:{}};const c={};o.forEach(([p,g])=>{c[p]=g});return{converterExpression:`${r} : ${o.map(([p])=>`$${p}`).join(" : ")}`,converterArgsAttributes:c}}generate(e){const{attribute:t,converters:i}=e??{};if(!t)return null;const r=(i??[]).filter(c=>c?.converter).map((c,d)=>this._generateConverterMetadata(t,c,d));if(0===r.length)return null;return{converterExpression:r.map(({converterExpression:c})=>c).join(" | "),converterArgsAttributes:r.map(({converterArgsAttributes:c})=>c).reduce((c,d)=>({...c,...d}),{})}}}Yp.\u0275fac=function(e){return new(e||Yp)},Yp.\u0275prov=n.\u0275\u0275defineInjectable({token:Yp,factory:Yp.\u0275fac});class Qp{get schemaApi(){throw new Error("Not implemented")}init(e){this._schema=e}}Qp.\u0275fac=function(e){return new(e||Qp)},Qp.\u0275prov=n.\u0275\u0275defineInjectable({token:Qp,factory:Qp.\u0275fac,providedIn:"root"});new n.InjectionToken("Represents a filter view element options modifier for specified view element type"),new n.InjectionToken("Represents a factory of filter view element options modifiers");class Yl{constructor(e){this._schemaService=e}_isSelectionViewConfig(e){return Boolean(e?._selectionOptions)}getSelectionStateAttributeName(e){return function nA(a){const{attribute:e}=a??{};return e?"string"==typeof e?e:e.expose?.attribute||null:null}(e)}getSourceSelectionStateAttributeName(e){return function iA(a){const{attribute:e}=a??{};return e?"string"==typeof e?e:e.from||null:null}(e)}isModelBoundToSelectionViewElement(e){return this.getModelBoundSelectionViewElementsConfigs(e).length>0}getModelBoundSelectionViewElementsConfigs(e){if(!e)return[];const t=this._schemaService.findAttributeByDataSourceAttributePath(e);return t?(this._schemaService.getViewConfigInfoByPropertyValues([`$${t}`])??[]).map(r=>r?.viewConfig).filter(r=>this._isSelectionViewConfig(r)):[]}findModelBoundParentSelectionViewConfig(e){const i=this._schemaService.getViewConfigPathByPropertyValue("name",e)?.find(this._isSelectionViewConfig);return i?{viewConfig:i,boundModels:this._schemaService.findBoundDataSources(i,{collectionsOnly:!0})}:null}}Yl.\u0275fac=function(e){return new(e||Yl)(n.\u0275\u0275inject(mn))},Yl.\u0275prov=n.\u0275\u0275defineInjectable({token:Yl,factory:Yl.\u0275fac});class Jp{constructor(){this._contextParts=new Map}setContextPart(e){if(!e)return;const t=(0,l.generateGuid)();return this._contextParts.set(t,e),t}getContext(){var e=this;return(0,_.Z)(function*(){const i=Array.from(e._contextParts).map(([s,o])=>o.getContext());return(yield Promise.all(i)).filter(Boolean)})()}removeContextPart(e){this._contextParts.get(e)?.destroy(),this._contextParts.delete(e)}}Jp.\u0275fac=function(e){return new(e||Jp)},Jp.\u0275prov=n.\u0275\u0275defineInjectable({token:Jp,factory:Jp.\u0275fac,providedIn:"platform"});class Ql{}Ql.\u0275fac=function(e){return new(e||Ql)},Ql.\u0275mod=n.\u0275\u0275defineNgModule({type:Ql}),Ql.\u0275inj=n.\u0275\u0275defineInjector({providers:[cn,{provide:Xo,useFactory:function O2(a,e=!1){return{macrosName:"PrimaryDataSourceName",macrosHandler:t=>{if(!t)throw new Error("Context is not defined");const i=e?a.getPrimaryDataSourceName():t.modelConfig.primaryDataSourceName;return(0,u.of)(i)}}},deps:[mn,[new n.Optional,Tn]],multi:!0},{provide:Xo,useFactory:function j2(a=!1,e){return{macrosName:"DataSourceModuleCaption",macrosHandler:(t,i)=>uv(a).macrosHandler(t,i).pipe((0,M.w)(o=>e.getEntityData(o)),(0,h.U)(o=>o?.data?.moduleStructure?.moduleCaption))}},deps:[[new n.Optional,Tn],Sr],multi:!0}],imports:[y.CommonModule]});class Kp{}Kp.\u0275fac=function(e){return new(e||Kp)},Kp.\u0275mod=n.\u0275\u0275defineNgModule({type:Kp}),Kp.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:ji,useFactory:(a,e)=>a.DisabledAmdSchemaCacheBuilder?e.get($n):e.get(Er),deps:[[new n.Inject(te)],n.Injector]},{provide:xp,useClass:fl},Oi,$n,Er,xr,ue,dn,Fi,Li,l.FeatureService,Tr,Wl,wr,Yl,xI],imports:[y.CommonModule,D.HttpClientModule,Ql,tl]});class pA{constructor(){this.active$=new u.BehaviorSubject(!0)}}const bC=new n.InjectionToken("BINDING_ACTIVATOR"),ZI=new n.InjectionToken("PRESERVED_CONTENT_BINDING_ACTIVATOR");let vC=class{constructor(e){this._formatValuePipe=e}convert(e,t,i){return this._formatValuePipe.transform(e,i)}};vC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.FormatValue"}),(0,m.w6)("design:paramtypes",[Ri])],vC);let IC=class{convert(e){return!e}};IC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.InvertBooleanValue"})],IC);let DC=class{convert(e){return Boolean(e)}};DC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToBoolean"})],DC);let MC=class{convert(e){return e?`mailTo: ${e}`:""}};MC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToEmailLink"})],MC);let wC=class{convert(e){return e?`tel: ${e}`:""}};wC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToPhoneLink"})],wC);let xC=class{convert(e,t,i,r=null){const s=e&&e[i];return null==s||""===s?r:s}};xC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToObjectProp"})],xC);let EC=class{_tryGetLookupValueFromCollection(e,t,{primaryAttributeName:i,primaryDisplayAttributeName:r,primaryColorAttributeName:s}){const o=t.find(p=>p.attributes[i]===e);if(!o)return null;const c=o.attributes[r];if(r&&!c)return null;const d=o.attributes[s];return s&&!d?null:{value:e,displayValue:c,primaryColorValue:d}}_getAttributeValue(e,t){let i=e;for(const r of t){if(!i?.attributes||!(r in i.attributes))return;i=i.attributes[r]}return i}_getCollectionForSearch(e,t){const i=e.dataSchemas[t],r=e.getViewModelAttributePath(t,i.primaryAttributeName).split(".").slice(0,-1);let s;const o=this._getAttributeValue(e,r);if(o instanceof ti)s=[o];else{if(!(o instanceof it&&o.length))return null;s=o}const c=s[0].getViewModelAttributePath(t,i.primaryAttributeName),d=s[0].getViewModelAttributePath(t,i.primaryDisplayAttributeName);if(i.primaryDisplayAttributeName&&!d)return null;const p=s[0].getViewModelAttributePath(t,i.primaryColorAttributeName);return i.primaryColorAttributeName&&!p?null:{collection:s,keys:{primaryAttributeName:c,primaryDisplayAttributeName:d,primaryColorAttributeName:p}}}_getModelsBoundToEntity(e,t){const i=e.dataSchemas;return Object.entries(i).filter(([,r])=>r.name===t).map(([r])=>r)}_getFilterByPrimaryValues(e,t){const i=new l.EntitySchemaQuery("tempTable"),r=new l.ColumnExpression({columnPath:e}),s=t.map(d=>new l.ParameterExpression({value:d})),o=new l.InFilter(l.ComparisonType.Equal,r,s);return i.filters.add(o),i.getMetadata().filters}_getLookupValuesFromDataSource(e,t){var i=this;return(0,_.Z)(function*(){if(!e.length)return[];const r=yield l.Model.create(t),s=yield r.getSchema(),{primaryAttributeName:o,primaryDisplayAttributeName:c,primaryColorAttributeName:d}=s,p=i._getFilterByPrimaryValues(o,e),g=[o,c,d].filter(Boolean),C=yield r.load({attributes:g,parameters:[{type:l.ModelParameterType.Filter,value:p}]});return e.map(v=>{const T=C.find(j=>j[o]===v);return T?{value:T[o],displayValue:T[c],primaryColorValue:T[d]}:{value:v}})})()}getLookupValuesFromContext(e,t,i){const r=()=>({lookupValues:[],notFound:e.slice()});if(!e.length)return r();const s=this._getModelsBoundToEntity(t,i);if(!s.length)return r();const o=s.map(d=>this._getCollectionForSearch(t,d)).filter(Boolean);if(!o.length)return r();const c={lookupValues:[],notFound:[]};return e.forEach(d=>{let p;for(let g=0;!p&&g<o.length;g++){const{collection:C,keys:v}=o[g];p=this._tryGetLookupValueFromCollection(d,C,v)}p?c.lookupValues.push(p):c.notFound.push(d)}),c}convert(e,t,i){var r=this;return(0,_.Z)(function*(){const s=Array.isArray(e),o=s?e:[e],c=o.filter(l.isGuid),d=r.getLookupValuesFromContext(c,t,i),{lookupValues:p,notFound:g}=d,C=yield r._getLookupValuesFromDataSource(g,i),v=o.map(T=>p.find(j=>j.value===T)??C.find(j=>j.value===T)??T);return s?v:v[0]})()}};EC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToLookup"})],EC);let TC=class{constructor(){this._fileServicePath="rest/FileService/"}_getFilePath(e){const t=this._fileServicePath+y.Location.joinWithSlash("Download",e);return je()+t}convert(e,t,i){return i?y.Location.joinWithSlash(this._getFilePath(i),e):""}};TC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToFileLink"})],TC);let PC=class{convert(e,t){return e?"string"==typeof e?e:Xh(e.value):""}};PC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToImageLink"})],PC);let AC=class{_isEncodedUri(e){return/%[0-9A-Fa-f]{2}/g.test(e)}_getEncodedUri(e){return this._isEncodedUri(e)?e:encodeURI(e)}convert(e){return(0,O.Z)(e)?"":(e=e.trim(),this._getEncodedUri(e.startsWith("http://")||e.startsWith("https://")?e:`//${e}`))}};AC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.LinkPrefix"})],AC);let $g=class{convert(e,t,i){return(0,J.Z)(e,i)}};$g=(0,m.gn)([(0,l.CrtConverter)({type:"crt.IsEqual"})],$g);let RC=class{_normalizePrimaryAttributeValues(e){return e?Array.isArray(e)?e:[e]:[]}_getFilteredPrimaryAttributeValues(e,t,i){return(0,_.Z)(function*(){const{filterByPrimaryAttributeValues:r}=i??{},s=yield e.getPrimaryAttributeValues();return!1===r?s:t.filter(o=>s.includes(o))})()}_getViewModelAttributeName(e,t,i){const s=e.getBoundDataSchemaByAttributePath(t)?.attributes?.find(({path:p})=>p===i);if(!1===Boolean(s))return null;const c=e.getBoundDataSourceNameByAttributePath(t);return e.getViewModelAttributePath(c,s.name).split(".").pop()}_getValuesFromCollection(e,t,i){return(0,_.Z)(function*(){const r=yield e.filterByPrimaryAttributes(i);return Promise.all(r.map(s=>s[t]))})()}_loadValuesByCollection(e,t,i,r){return(0,_.Z)(function*(){const s=e.getBoundDataSchemaByAttributePath(i),o=yield l.Model.create(s.name),c=new l.InFilter(l.ComparisonType.Equal,new l.ColumnExpression({columnPath:s.primaryAttributeName}),t.map(p=>new l.ParameterExpression({value:p}))),d=yield o.load({attributes:[r],parameters:[{type:l.ModelParameterType.Filter,value:(0,hI.ZE)(c)}]});return d?d.map(p=>p[r]):[]})()}convert(e,t,i,r,s){var o=this;return(0,_.Z)(function*(){const[c,d]=e??[];if(!(c&&i&&r&&t))return[];const p=o._normalizePrimaryAttributeValues(d),g=!1!==s?.filterByPrimaryAttributeValues;if(!p?.length&&g)return[];const C=o._getViewModelAttributeName(t,i,r),v=yield o._getFilteredPrimaryAttributeValues(c,p,s);return v?.length?C?o._getValuesFromCollection(c,C,v):o._loadValuesByCollection(t,v,i,r):[]})()}};RC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToValuesFromCollection"})],RC);let kC=class{convert(e){return e?.displayValue||e?.value||e}};kC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToDisplayValue"})],kC);let NC=class{constructor(e){this._toEmptyPlaceholder=e}convert(e,t,i){return this._toEmptyPlaceholder.transform(e,i)}};NC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToEmptyPlaceholder"}),(0,m.w6)("design:paramtypes",[jn])],NC);let VC=class{constructor(e){this._injector=e,this._httpClient=this._injector.get(D.HttpClient)}_getDcmStagesList(e){return this._httpClient.post("/rest/PlaybookStageService/GetDcmStages",{dcmId:e}).pipe((0,u.map)(i=>i.stageValues))}convert(e){return e?(0,u.lastValueFrom)(this._getDcmStagesList(e.value)):Promise.resolve([])}};VC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToDcmStageValue"}),(0,m.w6)("design:paramtypes",[n.Injector])],VC);let FC=class{convert(e,t,i,...r){return Z.Ld.format(i,e,...r)}};FC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.InterpolateString"})],FC);let LC=class extends $g{convert(e,t,i){const r=Array.isArray(e)?e:[e];return!r.length||r.every(s=>super.convert(s,t,i))}};var OC;LC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.IsEveryEqualTo"})],LC),function(a){a.Sum="sum"}(OC||(OC={}));let jC=class{_summarize(e){let t=0;return Array.isArray(e)||Number.isNaN(e)?(e.map(i=>t+=Number(i)),t):e}convert(e,t,i){return e&&i===OC.Sum?this._summarize(e):0}};jC=(0,m.gn)([(0,l.CrtConverter)({type:"crt.ToAggregatedValue"})],jC);class Te extends rA{set shape(e){this._shape=e;const t=this._classes.indexOf("crt-component-rounded");"rounded"===this.shape?-1===t&&this._classes.push("crt-component-rounded"):t>=0&&this._classes.splice(t,1)}get shape(){return this._shape}get classes(){return this.getClasses()}set classes(e){this.setClasses(e)}get loading(){return this._loading}set loading(e){this._loading=Boolean(e),"boolean"==typeof e&&(e?this.handleStartLoadViewModelAttributes():this.handleFinishLoadViewModelAttributes())}constructor(e){super(e),this.injector=e,this._loading=!1,this._classes=[],this.documentDirection=null,this.documentDirection="rtl"===e.get(xe.Is)?.value?"rtl":null,this.changeDetectorRef=this.injector.get(n.ChangeDetectorRef),this.directionality=this.injector.get(xe.Is),this.elementRef=this.injector.get(n.ElementRef)}handleStartLoadViewModelAttributes(){}handleFinishLoadViewModelAttributes(){}setClasses(e){this._classes=e||[]}getClasses(){return this._classes}toggleClass(e,t,i){const r=e.indexOf(i);t&&-1===r&&e.push(i),!t&&r>=0&&e.splice(r,1)}switchClass(e,t,i){i.forEach(([r,s])=>{this.toggleClass(e,r===t,s)})}setValuesFromConfig(e,t=[]){const i=(0,At.Z)(e,["id","name","type",...t]);Object.entries(i).forEach(([r,s])=>{this[r]=s})}detectChanges(){this.changeDetectorRef.detectChanges()}isRtl(){return"rtl"===this.directionality.value}focus(){this.elementRef?.nativeElement.focus()}}Te.\u0275fac=function(e){return new(e||Te)(n.\u0275\u0275directiveInject(n.Injector))},Te.\u0275dir=n.\u0275\u0275defineDirective({type:Te,hostVars:2,hostBindings:function(e,t){2&e&&n.\u0275\u0275attribute("element-name",t.name)("dir",t.documentDirection)},inputs:{name:"name",id:"id",tabIndex:"tabIndex",styles:"styles",shape:"shape",classes:"classes",loading:"loading"},features:[n.\u0275\u0275InheritDefinitionFeature]}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],Te.prototype,"name",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],Te.prototype,"id",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Number)],Te.prototype,"tabIndex",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],Te.prototype,"styles",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String),(0,m.w6)("design:paramtypes",[String])],Te.prototype,"shape",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Array),(0,m.w6)("design:paramtypes",[Array])],Te.prototype,"classes",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Boolean),(0,m.w6)("design:paramtypes",[Boolean])],Te.prototype,"loading",null);class cs{}cs.\u0275fac=function(e){return new(e||cs)},cs.\u0275mod=n.\u0275\u0275defineNgModule({type:cs}),cs.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,A.Ps]});class Xp{constructor(e,t){this.caption="",e.addSvgIconLiteral("placeholder",t.bypassSecurityTrustHtml(f(57421)))}}Xp.\u0275fac=function(e){return new(e||Xp)(n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},Xp.\u0275cmp=n.\u0275\u0275defineComponent({type:Xp,selectors:[["crt-view-element-placeholder"]],inputs:{caption:"caption"},decls:4,vars:1,consts:[[1,"placeholder-container"],["svgIcon","placeholder",1,"icon"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"mat-icon",1),n.\u0275\u0275elementStart(2,"span"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(t.caption))},dependencies:[A.Hw],styles:[".placeholder-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-content:center;justify-content:center;border-radius:8px;position:relative;overflow:hidden}.placeholder-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:100%;max-height:64px;width:72px;align-self:center}.placeholder-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:50%;left:8px;right:8px;transform:translateY(-50%);overflow:hidden;width:calc(100% - 16px);text-overflow:ellipsis}@supports (background: -webkit-named-image(i)){.placeholder-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:initial;height:initial}}"]});var BC=f(89081);class Le{constructor(e=new u.Subscription,t=Promise.resolve()){this._subscription=e,this.ready=t}static all(e){const t=function XE(a){const e=new u.Subscription;for(const t of a)e.add(t);return e}(e.map(r=>r._subscription)),i=Promise.all(e.map(r=>r.ready)).then(()=>{});return new Le(t,i)}static subscribe(e,t,i=!1){const r=(e=e.pipe((0,ee.B)())).subscribe({next:t}),s=i?(0,u.lastValueFrom)(e.pipe((0,we.P)(),(0,h.U)(()=>{})),{defaultValue:null}):Promise.resolve();return new Le(r,s)}unsubscribe(){this._subscription.unsubscribe()}}function Wg(a,e){if(!a)return e;if(!e.startsWith(a))throw new Error(`Attribute path '${e}' should start with '${a}'`);return e.substring(a.length+1)}function qI(a){if(!$e(a))throw new Error(`'${a}' is not binding expression`);const e=a.indexOf("|");return e>-1&&(a=a.substring(0,e).trimEnd()),a.substring(1)}function UC(a,e){return GC.apply(this,arguments)}function GC(){return GC=(0,_.Z)(function*(a,e){const t=e.match(/^(?:(?<attributeHostPath>.+)\.)?(?<attributeName>[^.]+)$/),{attributeHostPath:i,attributeName:r}=t.groups;return{attributeName:r,attributeHost:i?yield Ep(a,i):a}}),GC.apply(this,arguments)}function em(a){for(;a.parent;)a=a.parent;return a}function Yg(a,e){const t=a.split(".").slice(0,-1),i=$I(e),r=i.map(s=>s.viewModel$.pipe((0,Ee.q)(1)));return(0,u.forkJoin)(r).pipe((0,h.U)(s=>{const o=[];let c=i.length-1,d=[];for(const p of t)if(o.push(p),mA(s[c],o)&&(d=[...o],c--,c<0))return null;return{context:i[c],contextPath:d.join(".")}}))}function $I(a){const e=[a];return a.parent&&e.push(...$I(a.parent)),e}function mA(a,e){let t=a;for(const i of e)t=t?.attributes?t.attributes[i]:t?.[i];return t instanceof it}class WI{getAttributeValuesStream(e,t){return e?e.events$.pipe((0,P.h)(i=>i.type===Ie.ChangeAttributeValue),(0,P.h)(i=>i?.payload?.attributeName===t),(0,M.w)(i=>t in e?Promise.resolve(e[t]):Promise.resolve(i.payload.value)),(0,ee.B)()):(0,u.of)(null)}getAttributeInitialValueStream(e,t,i){return e?(0,u.from)(Ep(e,t)).pipe((0,L.R)(i)):(0,u.of)(null)}getAttributeLocationChanges(e,t){return Yg(e,t).pipe((0,I.b)(i=>{if(!i)throw new Error(`Target binding context for attribute "${e} was not found"`)}),(0,M.w)(({context:i,contextPath:r})=>(0,u.combineLatest)([i.viewModel$,(0,u.of)(Wg(r,e))])),(0,M.w)(([i,r])=>i?UC(i,r):(0,u.of)({attributeName:void 0,attributeHost:void 0})))}evaluate(e,t){const i=e.slice(1);return this.getAttributeLocationChanges(i,t).pipe((0,M.w)(r=>this.getAttributeValueChanges(r)))}}class Zt extends WI{getAttributeValueChanges({attributeHost:e,attributeName:t}){const i=this.getAttributeValuesStream(e,t),r=this.getAttributeInitialValueStream(e,t,i);return(0,u.merge)(r,i)}}Zt.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Zt)))(t||Zt)}}(),Zt.\u0275prov=n.\u0275\u0275defineInjectable({token:Zt,factory:Zt.\u0275fac});class us extends WI{constructor(e){super(),this._featureService=e,this._readonlyProperties=["readonly","disabled"]}getAttributeValueChangesInHybridMode(e,t,i,r){const s=e.getControl(t),o=r.slice(1);return this._getValuesStream(e,t,i,()=>{const c=this.getAttributeValuesStream(e,o).pipe((0,I.b)(g=>s.setPropertyValue(i,g))),d=this.getAttributeValuesStream(e,`${t}:${i}`).pipe((0,P.h)(()=>{const g=Object.getOwnPropertyDescriptor(e,o),C=Boolean(g?.get),v=Boolean(g?.set);return!(C&&!v)}),(0,I.b)(g=>e[o]=g)),p=(0,u.from)(Ep(e,o)).pipe((0,I.b)(g=>s.setPropertyValue(i,g,!0)),(0,L.R)(c));return(0,u.merge)(p,c,d)})}_getDefaultValue(e){if(!e)return null;try{return JSON.parse(e)}catch{return e}}_getValuesStream(e,t,i,r){return this._readonlyProperties.includes(i)?(0,u.forkJoin)({disableAttributeDeactivation:this._featureService.getFeatureState("DisableAttributeDeactivationUntilBRulesExecution"),hasBRulesAffectingAttribute:e._getIsAffectedByBusinessRules({name:t})}).pipe((0,M.w)(({disableAttributeDeactivation:s,hasBRulesAffectingAttribute:o})=>s||!0!==o?r():e._businessRulesActivated$.pipe((0,M.w)(c=>c?r():(0,u.of)(!0))))):r()}getAttributeValueChanges(e){const{attributeHost:t}=e;if(!t)return(0,u.of)(null);const[i,r]=e.attributeName.split(":"),[s,o]=r.split("="),c=t.getControl(i),d=this._getDefaultValue(o);if("string"==typeof d&&d?.startsWith("$"))return this.getAttributeValueChangesInHybridMode(t,i,s,d);if(null!=d){const p=c.getPropertyByName(s,!0);p.hasInitialValue||p.setInitialValue(d)}return this._getValuesStream(t,i,s,()=>{const p=this.getAttributeValuesStream(t,`${i}:${s}`),g=(0,u.of)(c.getPropertyValue(s)).pipe((0,P.h)(C=>null!=C),(0,L.R)(p));return(0,u.merge)(g,p)})}}us.\u0275fac=function(e){return new(e||us)(n.\u0275\u0275inject(Me))},us.\u0275prov=n.\u0275\u0275defineInjectable({token:us,factory:us.\u0275fac});class ni extends Zt{removeConvertersFromExpression(e){const t=e.indexOf("|");return-1===t?e:(console.warn(`Cannot use converters in control binding expression: ${e}`),e.substring(0,t).trimEnd())}evaluate(e,t){const i=(e=this.removeConvertersFromExpression(e)).slice(1);return this.getAttributeLocationChanges(i,t).pipe((0,h.U)(({attributeHost:r,attributeName:s})=>r?r.getAttributeControl(s):new b.NI(null)))}}ni.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ni)))(t||ni)}}(),ni.\u0275prov=n.\u0275\u0275defineInjectable({token:ni,factory:ni.\u0275fac});class ds{_getStringValue(e){return e.match(/^'(.*)'$/)[1]}_getBooleanValue(e){if("true"===e)return!0;if("false"===e)return!1;throw new Error(`${e} is not Boolean value`)}evaluate(e){if(RI(e))return(0,u.of)(this._getStringValue(e));if(kI(e))return(0,u.of)(parseFloat(e));if(NI(e))return(0,u.of)(this._getBooleanValue(e));throw new Error(`Failed to parse primitive value binding expression: ${e}`)}}ds.\u0275fac=function(e){return new(e||ds)},ds.\u0275prov=n.\u0275\u0275defineInjectable({token:ds,factory:ds.\u0275fac});class ii extends Zt{_getViewModelCollectionValue(e,t){if(!t.length)return Promise.resolve(e);const i=Array.from(e).map(r=>this._getObjectProp(r,t));return Promise.all(i)}_getObjectProp(e,t){var i=this;return(0,_.Z)(function*(){const r=t.shift();return r?(e=yield e[r])instanceof ti?i._getObjectProp(e,t):e instanceof it?i._getViewModelCollectionValue(e,t):i._getObjectProp(e,t):e})()}evaluate(e,t){const i=e.slice(1);return Yg(i,t).pipe((0,h.U)(r=>r??{context:em(t),contextPath:""}),(0,M.w)(r=>(0,u.combineLatest)([r.context.viewModel$,(0,u.of)(Wg(r.contextPath,i))])),(0,M.w)(([r,s])=>r?this._getObjectProp(r,s.split(".")):(0,u.of)(null)),(0,Ee.q)(1))}}ii.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ii)))(t||ii)}}(),ii.\u0275prov=n.\u0275\u0275defineInjectable({token:ii,factory:ii.\u0275fac});class Jl{constructor(){this._converterRegistry=l.ConverterRegistry,this._injector=(0,n.inject)(n.Injector)}get(e,t){return this._converterRegistry.get(e).instantiate(t)}register(e,t){throw new Error("NotImplemented")}clear(){this._converterRegistry.clear()}}Jl.\u0275fac=function(e){return new(e||Jl)},Jl.\u0275prov=n.\u0275\u0275defineInjectable({token:Jl,factory:Jl.\u0275fac,providedIn:"root"});class ai extends Sl{constructor(e,t,i,r=!1){super(),this._convertersRegistry=e,this._objectPropBindingExpressionInterpreter=t,this._fixedValueBindingExpressionInterpreter=i,this._isDesignTime=r}_evaluateParam(e,t){if(function aA(a){return RI(a)||kI(a)||NI(a)}(e))return this._fixedValueBindingExpressionInterpreter.evaluate(e);if($e(e))return this._objectPropBindingExpressionInterpreter.evaluate(e,t);throw new Error(`Cannot parse parameter expression: ${e}`)}_evaluateParams(e,t){const i=e.map(r=>this._evaluateParam(r,t).pipe((0,we.P)()));return(0,u.forkJoin)(i).pipe((0,Xy.d)([]))}_getConverters(e,t){return e.split("|").map(r=>r.trim()).map(r=>{const[s,...o]=r.split(":").map(p=>p.trim()),c=this._evaluateParams(o,t),d=t.viewModel$.pipe((0,we.P)());return(0,u.forkJoin)([d,c]).pipe((0,h.U)(([p,g])=>C=>{if(!p)return null;const v=p._injectionContext;return this._convertersRegistry.get(s,v).convert(C,p,...g)}))})}_applyConverters(e,t){for(const[i,r]of Object.entries(t))if((e=r(e))instanceof Promise){const s=parseInt(i,10)+1;return this._applyAsyncConverters(e,[...t].slice(s))}return e}_applyAsyncConverters(e,t){return(0,_.Z)(function*(){let i=yield e;for(const r of t)i=r(i),i instanceof Promise&&(i=yield i);return i})()}evaluate(e,t){if(this._isDesignTime||(0,O.Z)(e))return(0,u.of)(r=>r);const i=this._getConverters(e,t);return(0,u.forkJoin)(i).pipe((0,h.U)(r=>s=>this._applyConverters(s,r)))}}ai.\u0275fac=function(e){return new(e||ai)(n.\u0275\u0275inject(Jl),n.\u0275\u0275inject(ii),n.\u0275\u0275inject(ds),n.\u0275\u0275inject(Tn,8))},ai.\u0275prov=n.\u0275\u0275defineInjectable({token:ai,factory:ai.\u0275fac});class ps{evaluate(e,t){const i=e.slice(1);return em(t).viewModel$.pipe((0,M.w)(r=>r?Ep(r,i):(0,u.of)(null)))}}ps.\u0275fac=function(e){return new(e||ps)},ps.\u0275prov=n.\u0275\u0275defineInjectable({token:ps,factory:ps.\u0275fac});class hn{constructor(e,t,i,r){this._attributeBindingExpressionInterpreter=e,this._attributePropertyBindingExpressionInterpreter=t,this._resourceBindingExpressionInterpreter=i,this._converterExpressionInterpreter=r}_applyConverter(e,t){return(0,_.Z)(function*(){return(e=t(e))instanceof Promise&&(e=yield e),e})()}evaluateInputValueExpression(e,t){return yC(e)?this._resourceBindingExpressionInterpreter.evaluate(e,t):AI(e)?this._attributePropertyBindingExpressionInterpreter.evaluate(e,t):this._attributeBindingExpressionInterpreter.evaluate(e,t)}evaluate(e,t){const[r,s]=e.split(/\|(.*)/).map(d=>d.trim()),o=this.evaluateInputValueExpression(r,t),c=this._converterExpressionInterpreter.evaluate(s,t);return o.pipe((0,M.w)(d=>c.pipe((0,M.w)(p=>this._applyConverter(d,p)))))}}hn.\u0275fac=function(e){return new(e||hn)(n.\u0275\u0275inject(Zt),n.\u0275\u0275inject(us),n.\u0275\u0275inject(ps),n.\u0275\u0275inject(ai))},hn.\u0275prov=n.\u0275\u0275defineInjectable({token:hn,factory:hn.\u0275fac});class ms extends hn{constructor(e,t){super(null,null,null,t),this._objectPropBindingExpressionInterpreter=e}_evaluateEventBindingExpression(e,t){const i=t.initialEvent,r=e.replace(/@event\.?/,"");return(0,u.of)(r?(0,pe.Z)(i,r):i)}evaluateInputValueExpression(e,t){return CC(e)?this._evaluateEventBindingExpression(e,t):this._objectPropBindingExpressionInterpreter.evaluate(e,t)}}ms.\u0275fac=function(e){return new(e||ms)(n.\u0275\u0275inject(ii),n.\u0275\u0275inject(ai))},ms.\u0275prov=n.\u0275\u0275defineInjectable({token:ms,factory:ms.\u0275fac});var gA=f(37470);class hs{constructor(e){this._requestParamBindingExpressionInterceptor=e}_evaluate(e,t){var i=this;return(0,_.Z)(function*(){const r={};for(const[s,o]of Object.entries(e))r[s]=yield i._evaluateConfigValue(o,t);return r})()}_evaluateConfigValue(e,t){return Array.isArray(e)?Promise.all(e.map(i=>this._evaluateConfigValue(i,t))):$e(e)||CC(e)?(0,u.lastValueFrom)(this._requestParamBindingExpressionInterceptor.evaluate(e,t),{defaultValue:null}):e&&"object"==typeof e?this._evaluate(e,t):Promise.resolve(e)}evaluate(e,t){return(0,u.from)(this._evaluate(e,t))}}hs.\u0275fac=function(e){return new(e||hs)(n.\u0275\u0275inject(ms))},hs.\u0275prov=n.\u0275\u0275defineInjectable({token:hs,factory:hs.\u0275fac});class ri{constructor(e){this._requestParamsBindingConfigInterpreter=e}_evaluateParams(e,t){return e?this._requestParamsBindingConfigInterpreter.evaluate(e,t):(0,u.of)({})}_getRequestBindingContext(e,t){return e.useRelativeContext?t:em(t)}evaluate(e,t){return this._evaluateParams(e.params,t).pipe((0,gA.M)(this._getRequestBindingContext(e,t).viewModel$),(0,h.U)(([i,r])=>({type:e.request,$context:r,...i})),(0,we.P)())}}ri.\u0275fac=function(e){return new(e||ri)(n.\u0275\u0275inject(hs))},ri.\u0275prov=n.\u0275\u0275defineInjectable({token:ri,factory:ri.\u0275fac});class si extends Zt{_getValidationStateChanges(e,t){const i=t.attributeHost.getAttributeControl(t.attributeName);return(0,u.merge)(e,i.statusChanges).pipe((0,h.U)(()=>({value:i.value,validationInfo:(0,lt.Z)(i,"valid","errors","dirty","touched")})),(0,on.x)(J.Z))}evaluate(e,t){const i=e.slice(1);return this.getAttributeLocationChanges(i,t).pipe((0,M.w)(r=>r.attributeHost?this._getValidationStateChanges(super.evaluate(e,t),r):(0,u.of)({value:null,validationInfo:{valid:!0,errors:null,dirty:!1,touched:!1}})))}}si.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(si)))(t||si)}}(),si.\u0275prov=n.\u0275\u0275defineInjectable({token:si,factory:si.\u0275fac});const Qg=[Zt,us,ni,hn,ai,ii,ds,ri,ms,hs,ps,si,bn.create({token:oy,mappings:[{predicate:"converter",injectable:ai}]})],zC="Change",Jg="ValidationInfo";function tm(a,e){const t=l.ViewElementRegistry.viewElements.get(a);return Boolean(t?.inputs?.[e])}function nm(a,e){const t=l.ViewElementRegistry.viewElements.get(a);return Boolean(t?.outputs?.[e])}function im(a){return a+zC}function YI(a){return a+Jg}function Kg(a,e){const t=e+Jg,i=l.ViewElementRegistry.viewElements.get(a);return Boolean(i?.validationInputs?.[t])}const QI=new n.InjectionToken("CRT_BINDING_CONTEXT_DESIGN_TIME"),gs=new n.InjectionToken("CRT_BINDING_CONTEXT"),fs=new n.InjectionToken("CRT_VIEW_ELEMENT_CONFIG"),_A=new n.InjectionToken("Ignore view elements not found warning"),JI=new n.InjectionToken("VIEW_ELEMENT_COMPONENT_CREATOR");function KI(a,e,t){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,_.Z)(function*(a,e,t){const i=yield(0,u.firstValueFrom)(Yg(a,t)),r=yield(0,u.firstValueFrom)(i.context.viewModel$);if(!r)return;const s=Wg(i.contextPath,a),{attributeHost:o,attributeName:c}=yield UC(r,s);o.getAttributeControl(c).markAsDirty(),o[c]=e}),ZC.apply(this,arguments)}function XI(a,e){return qC.apply(this,arguments)}function qC(){return qC=(0,_.Z)(function*(a,e){const t=yield(0,u.firstValueFrom)(Yg(a,e)),i=yield(0,u.firstValueFrom)(t.context.viewModel$);if(!i)return;const r=Wg(t.contextPath,a),{attributeHost:s,attributeName:o}=yield UC(i,r),c=s.getAttributeControl(o);c.touched||(c.markAsTouched(),c.updateValueAndValidity())}),qC.apply(this,arguments)}class tD{constructor(e){this.injector=e,this._loadingAttributeName="loading",this.bindingExpressionInterpreter=e.get(hn),this.attrCtrlExpInterpreter=e.get(ni),this.requestBindingConfigInterpreter=e.get(ri),this.validationBindingInterpreter=e.get(si),this._bindingContext=e.get(gs,null),this._macrosHandlerService=e.get(cn),this._isDesignTime=e.get(Tn,!1)}_useMacros(e,t){if(!this._bindingContext)return t(e);let i;const r=new u.Subject,s=this._bindingContext.viewModel$.pipe((0,M.w)(o=>this._macrosHandlerService.handleResourceMacros(e,o)),(0,h.U)((o,c)=>{i?.unsubscribe(),i=t(o),0===c&&i.ready.then(()=>{r.next(),r.complete()})}),(0,Bp.x)(()=>i?.unsubscribe())).subscribe();return new Le(s,(0,u.lastValueFrom)(r,{defaultValue:null}))}_bindLoadingProperty(e,t){if(Object.keys(e).some(c=>c===this._loadingAttributeName))return new Le;const r=(0,BC.Z)(e).entries().filter(([c,d])=>this.isInputBinding(c,d,t,e)&&$e(d)).value();if(!r.length)return new Le;const s=r.map(([c,d])=>qI(d)),o=em(this._bindingContext).viewModel$.pipe((0,M.w)(c=>{if(!c)return(0,u.of)();let d=[];const p=c.events$.pipe((0,P.h)(C=>C.type===Ie.StartLoadModelAttributes),(0,P.h)(C=>{const v=Object.keys(C.payload);return s.some(T=>v.includes(T))}),(0,I.b)(C=>{d=Object.keys(C.payload)}),(0,I.b)(()=>t.setPropertyValue("loading",!0))),g=c.events$.pipe((0,P.h)(C=>C.type===Ie.FinishLoadModelAttributes),(0,P.h)(C=>{const v=Object.keys(C.payload);return d.every(T=>v.includes(T))}),(0,I.b)(()=>t.setPropertyValue("loading",!1)),(0,I.b)(()=>d=[]));return(0,u.merge)(p,g)})).subscribe();return new Le(o)}_isControlProperty(e,t){return e===l.ViewElementRegistry.getFormControlRelatesAttribute(t.type)}_getViewElementInputProperties(e){const t=l.ViewElementRegistry.viewElements.get(e.type);return t?[...Object.keys(t.inputs??{}).filter(i=>t.inputs[i].propertyBindable)]:["visible"]}_getViewElementEntries(e,t){const i=l.ViewElementRegistry.getFormControlRelatesAttribute(t.type),r=e.find(([o])=>"bindTo"===o);let s=e.filter(([o])=>"bindTo"!==o);if(r){const[,o]=r;if(!o)return s;this._getViewElementInputProperties(t).forEach(d=>{if(d!==i){let p=o;p=`${p}:${d}`;const g=t[d];null!=g&&(p+=`=${g}`),s=s.filter(([C])=>C!==d),s.push([d,p])}})}return s}_bindInputWithValidation(e,t,i){const r=this.validationBindingInterpreter.evaluate(t,this._bindingContext).pipe((0,ze.O)(null),(0,u.pairwise)()),s=YI(e);return Le.subscribe(r,([c,d])=>{c?.value!==d?.value&&i.setPropertyValue(e,d.value),i.setPropertyValue(s,d?.validationInfo)})}_bindFocusout(e,t){const i=t.getEvent("focusout"),r=e.slice(1);return Le.subscribe(i,()=>XI(r,this._bindingContext))}_bindInputs(e,t){const[i,r]=(0,BC.Z)(e).entries().filter(([d,p])=>this.isInputBinding(d,p,t,e)&&!this.isTwoWayBinding(d,p,t,e)).partition(([,d])=>$e(d)).value();r.forEach(([d,p])=>{p=this._isControlProperty(d,e)?new b.NI(p):p,t.setPropertyValue(d,p)});const o=this._getViewElementEntries(i,e).map(([d,p])=>{const v=(this._isControlProperty(d,e)?this.attrCtrlExpInterpreter:this.bindingExpressionInterpreter).evaluate(p,this._bindingContext);if(Kg(e.type,d)&&ls(p))return this._bindInputWithValidation(d,p,t);{const T=j=>t.setPropertyValue(d,j);return Le.subscribe(v,T,!1)}}),c=this._bindLoadingProperty(e,t);return Le.all([...o,c])}_createRequest(e,t){const i={...this._bindingContext,initialEvent:t};return this.requestBindingConfigInterpreter.evaluate(e,i).pipe((0,h.U)(r=>({...r,$initialEvent:t})))}_bindOutputs(e,t){const r=Object.entries(e).filter(([s,o])=>this.isOutputBinding(s,o,t,e)).map(([s,o])=>{const c=t.getEvent(s).pipe((0,M.w)(p=>this._createRequest(o,p)));return Le.subscribe(c,p=>p.$context.executeRequest(p))});return Le.all(r)}_bindTwoWays(e,t){const i=Object.entries(e).filter(([s,o])=>this.isTwoWayBinding(s,o,t,e)),r=[];return i.forEach(([s,o])=>{const c=this.bindingExpressionInterpreter.evaluate(o,this._bindingContext);Kg(e.type,s)&&ls(o)?r.push(this._bindInputWithValidation(s,o,t)):r.push(Le.subscribe(c,Y=>t.setPropertyValue(s,Y)));const p=o.slice(1),g=im(s),C=this.getViewEventsStream(t,g),T=Le.subscribe(C,Y=>KI(p,Y,this._bindingContext));r.push(T);const j=this._bindFocusout(o,t);r.push(j)}),Le.all(r)}isInputBinding(e,t,i,r){return tm(r.type,e)}isOutputBinding(e,t,i,r){return nm(r.type,e)}isTwoWayBinding(e,t,i,r){const s=im(e);return ls(t)&&tm(r.type,e)&&nm(r.type,s)&&!(s in r)}bind(e,t){const i=r=>Le.all([this._bindInputs(r,e),this._bindOutputs(r,e),this._bindTwoWays(r,e)]);return this._isDesignTime?this._useMacros(t,i):i(t)}}class nD extends tD{isInputBinding(e,t,i,r){return super.isInputBinding(e,t,i,r)||!this.isOutputBinding(e,t,i,r)}isOutputBinding(e,t,i,r){return super.isOutputBinding(e,t,i,r)||i.getPropertyValue(e)instanceof n.EventEmitter}getViewEventsStream(e,t){return e.getEvent(t)}}class yA extends tD{getViewEventsStream(e,t){return e.getEvent(t).pipe((0,u.map)(i=>i.detail))}}class iD{constructor(e,t,i,r,s){this._ngZone=t,this._changeDetectorRef=i,this.nativeElement=r,this.hostView=s,this._propertyValues=new Map,this.instance=e}setValue(e,t){(0,Ga.Z)(this.instance,e,t),this._changeDetectorRef.detectChanges()}getPropertyValue(e){return(0,pe.Z)(this.instance,e)}getEvent(e){const t=this.getPropertyValue(e);return!t&&this.nativeElement?(0,u.fromEvent)(this.nativeElement,e):t}on(e,t){const r=this.getEvent(e).subscribe(t);return()=>{r.unsubscribe()}}setPropertyValue(e,t){(!this._propertyValues.has(e)||t!==this._propertyValues.get(e))&&(this._propertyValues.set(e,t),this._ngZone.run(()=>this.setValue(e,t)))}}class CA{constructor(e){this._propertyValues=new Map,this.instance=e}getPropertyValue(e){return this.instance[e]}getEvent(e){return(0,u.fromEvent)(this.instance,e)}on(e,t){return this.instance.addEventListener(e,t),()=>this.instance.removeEventListener(e,t)}setPropertyValue(e,t){(!this._propertyValues.has(e)||t!==this._propertyValues.get(e))&&(this._propertyValues.set(e,t),this.instance[e]=t)}}class SA{constructor(e,t){this._ngZone=t,this._propertyValues=new Map,this.instance=e}setValue(e,t){(0,Ga.Z)(this.instance,e,t)}getPropertyValue(e){return(0,pe.Z)(this.instance,e)}getEvent(e){return this.getPropertyValue(e)}on(e,t){const r=this.getPropertyValue(e).subscribe(t);return()=>{r.unsubscribe()}}setPropertyValue(e,t){(!this._propertyValues.has(e)||t!==this._propertyValues.get(e))&&(this._propertyValues.set(e,t),this._ngZone.run(()=>this.setValue(e,t)))}}class aD{constructor(e){this.injector=e}}class am{canResolve(e){return l.ViewElementRegistry.viewElements.has(e)||l.DesignTimeViewElementRegistry.infos.has(e)}getViewElementType(e){const t=e.type,i=l.DesignTimeViewElementRegistry.getByOverriddenType(t);if(i&&!e?.sealed)return i.typeRef;const r=l.ViewElementRegistry.viewElements.get(t);return r&&"typeRef"in r?r.typeRef:l.DesignTimeViewElementRegistry.infos.has(t)?l.DesignTimeViewElementRegistry.infos.get(t).typeRef:null}getSelector(e){if(l.DesignTimeViewElementRegistry.getByOverriddenType(e))return null;const t=l.ViewElementRegistry.viewElements.get(e);return t&&"selector"in t?t.selector:null}}am.\u0275fac=function(e){return new(e||am)},am.\u0275prov=n.\u0275\u0275defineInjectable({token:am,factory:am.\u0275fac});class ft{canResolve(e){return l.ViewElementRegistry.viewElements.has(e)}getViewElementType(e){const t=l.ViewElementRegistry.viewElements.get(e.type);return t&&"typeRef"in t?t.typeRef:null}getSelector(e){const t=l.ViewElementRegistry.viewElements.get(e);return t&&"selector"in t?t.selector:null}}ft.\u0275fac=function(e){return new(e||ft)},ft.\u0275prov=n.\u0275\u0275defineInjectable({token:ft,factory:ft.\u0275fac});class rm{_setDefaultToolbarConfigValues(e){const t=e.toolbarConfig;t&&(t instanceof Array?t:[t]).forEach(r=>{r.groupType||(r.groupType=e.viewElementGroupType),r.caption||(r.caption=e.typeCaption)})}getDesignViewElementConfigs(){const e=new Map;return l.InterfaceDesignerItemRegistry.interfaceDesignerItemRegistrationInfos.forEach((t,i)=>{const r=t.toolbarConfig;r&&(this._setDefaultToolbarConfigValues(t),e.set(i,r))}),e}}rm.\u0275fac=function(e){return new(e||rm)},rm.\u0275prov=n.\u0275\u0275defineInjectable({token:rm,factory:rm.\u0275fac});class rD extends aD{createComponent(e){const t=this.injector.get(ft),i=this.injector.get(n.ViewContainerRef),r=this.injector.get(fs),s=this.injector.get(n.Renderer2),o=t.getViewElementType(r),c=i.createComponent(o,{index:0,injector:this.injector});e?.forEach(({name:C,value:v})=>{s.setAttribute(c.location.nativeElement,C,v)});const d=c.injector.get(n.ChangeDetectorRef),p=c.injector.get(n.ElementRef).nativeElement;c.changeDetectorRef.detectChanges();const g=this.injector.get(n.NgZone);return new iD(c.instance,g,d,p,c.hostView)}}class bA extends aD{createComponent(e){const t=this.injector.get(ft),i=this.injector.get(n.Renderer2),r=this.injector.get(n.ViewContainerRef),s=this.injector.get(fs),o=t.getSelector(s.type),c=document.createElement(o);return e?.forEach(({name:d,value:p})=>{i.setAttribute(c,d,p)}),i.appendChild(r.element.nativeElement.parentElement,c),this._initDirectionality(c),new CA(c)}_initDirectionality(e){"rtl"===this.injector.get(xe.Is)?.value&&e.setAttribute("dir","rtl")}}class vA{}class sD extends vA{constructor(e){super(),this.injector=e,this.viewElementConfig=this.injector.get(fs),this.featureValues=this.injector.get(te,{optional:!0}),this.measurePerformanceService=this.injector.get(le),this._componentCreator=this.injector.get(JI)}_getElementName(){return`${this.viewElementConfig.type.split(".")?.[1]} ${this.viewElementConfig.name}`}_getDOMAttributes(){const e=[];return this.featureValues?.UseViewElementDataItemMarker&&e.push({name:"data-item-marker",value:this.viewElementConfig.dataItemMarker||this.viewElementConfig.name}),e}createComponent(e){return this._componentCreator.createComponent(e)}getComponentRef(){const e=this._getElementName(),t=this._getDOMAttributes();return this.measurePerformanceService.measure(e,()=>this.createComponent(t))}show(){const e=this.getComponentRef();return(0,u.of)(e)}}class IA extends sD{constructor(e,t,i){super(e),this.injector=e,this._creator=t,this._destroyed=i,this._renderer=this.injector.get(n.Renderer2),this._container=this.injector.get(n.ViewContainerRef),this._initMinHeight(),this._subscribeDestroyed()}get _parentElement(){return this._container.element.nativeElement.parentElement}_handleIntersection(e,t){if(this._parentElement){if(e&&!this._componentRef?.hostView)return this._initResizeObservable(),t.next(this.getComponentRef()),void t.complete();this._componentRef?.hostView&&(e?this._showElement():this._hideElement())}}_initIntersectionObserver(e){let t=this.viewElementConfig.selected;this._intersectionObserver=new IntersectionObserver(i=>{i.forEach(r=>{t?t=!1:this._handleIntersection(r.isIntersecting,e)})}),this._intersectionObserver.observe(this._parentElement),t&&this._handleIntersection(!0,e)}_initResizeObservable(){this._resizeObserver||(this._resizeObserver=new ResizeObserver(e=>{const{height:t,width:i}=e[0].contentRect;this._minHeight=`${t}px`,this._minWidth=`${i}px`}),this._resizeObserver.observe(this._parentElement))}_showElement(){this._display?this._renderer.setStyle(this._componentRef.nativeElement,"display",this._display):this._renderer.removeStyle(this._componentRef.nativeElement,"display"),this._removeMinSize()}_hideElement(){this._applyMinSize(),this._display=this._componentRef.nativeElement?.style.display,this._renderer.setStyle(this._componentRef.nativeElement,"display","none")}_removeMinSize(){this._renderer.removeStyle(this._parentElement,"min-height"),this._minWidth&&this._renderer.removeStyle(this._parentElement,"min-width")}_applyMinSize(){this._renderer.setStyle(this._parentElement,"min-height",this._minHeight),this._minWidth&&this._renderer.setStyle(this._parentElement,"min-width",this._minWidth)}_initMinHeight(){const e=l.ViewElementRegistry.viewElements.get(this.viewElementConfig.type);e?this._minHeight=e.defaultSize.height:console.warn(`View element with type "${this.viewElementConfig.type}" not found`)}_subscribeDestroyed(){this._destroyed?.subscribe(()=>{const e=this._componentRef?.hostView;e&&!e.destroyed&&e.destroy()})}createComponent(e){return this._componentRef=this._creator.createComponent(e),this._removeMinSize(),this._componentRef}show(){return this._applyMinSize(),new u.Observable(e=>{this._initIntersectionObserver(e)})}}const oD=new n.InjectionToken("COMPONENT_PROPERTIES_BINDER"),lD=new n.InjectionToken("DIRECTIVE_PROPERTIES_BINDER"),cD=new n.InjectionToken("VIEW_ELEMENT_VISIBILITY_STRATEGY"),$C=new n.InjectionToken("VIEW_ELEMENT_VISIBILITY_STRATEGY_VALUE"),WC=function(a){return!!function(a){const e=a.get(fs);return a.get(ft).getSelector(e.type)}(a)},uD=function(a){return new sD(a)},AA=function(a){return function(a){return a.get(te,{optional:!0})}(a).UseLazyComponentCreationInDesignTime},kA=function(a,e){const t=function(a){const e=a.get(fs);return l.ViewElementRegistry.viewElements.get(e.type)?.viewElementVisibilityStrategy===l.ViewElementVisibilityStrategy.Default}(a),i=AA(a),r=WC(a),s=!function(a){return a.get(Tn,!1)}(a);return t||r||s||!i?uD(a):new IA(a,new rD(a),e)};class qt{constructor(e,t,i,r,s,o){this._resolver=e,this.parentDirective=t,this.injector=i,this._container=r,this._isDesignTime=s,this._ngZone=o,this._ownProperties=[{property:"visible",defaultValue:!0,omitForViewModelBinding:!0},{property:"bindTo",defaultValue:null,omitForViewModelBinding:!1}],this._destroyed$=new u.Subject,this._showElementSubscription=new u.Subscription,this._isCreating=!1,this.nested=[],this.total=0,this.viewElementShow=new n.EventEmitter,this._visible=!1,this._featureValues=(0,n.inject)(te,{optional:!0}),this._measurePerformanceService=(0,n.inject)(le),this._directiveRef=new SA(this,this._ngZone)}get visible(){return this._visible}set visible(e){this._visible=e,this._setViewElementVisibility(e||this._isDesignTime)}_bindSelfToViewModel(){const e=this._ownProperties.reduce((t,{property:i,defaultValue:r})=>({...t,[i]:this.viewElementConfig[i]??r}),{});this._ngZone.runOutsideAngular(()=>this.bindDirectiveProperties(e))}_bindComponentToViewModel(){const e=(0,At.Z)(this.viewElementConfig,...this._ownProperties.filter(({omitForViewModelBinding:t})=>!0===t).map(({property:t})=>t));this._ngZone.runOutsideAngular(()=>this.bindComponentProperties(e))}_setViewElementVisibility(e){e&&!this.componentRef?this._showViewElement():!e&&this.componentRef&&this._hideViewElement()}_showViewElement(){const e=this.viewElementConfig.type;if(this._typeName=e,this._typeName)if(this._resolver.canResolve(e))this._showComponent();else{if(this.injector.get(_A,!1))return;const i=this._container.createComponent(Xp);i.instance.caption=e;const r=i.injector.get(n.ElementRef).nativeElement;console.warn(`View element with type "${e}" not found`),this.componentRef=new iD(i.instance,this._ngZone,i.changeDetectorRef,r,i.hostView)}}_showComponent(){if(this._isCreating)return;this._isCreating=!0;const e=this.injector.get(cD);this._showElementSubscription.add(e.show().pipe((0,P.h)(t=>!!t),(0,L.R)(this._destroyed$)).subscribe(t=>{this.componentRef=t,this._measurePerformanceService.measure(`binding ${this.viewElementConfig.name}`,()=>this._bindComponentToViewModel()),this.viewElementShow.emit(this),this._isCreating=!1,this._featureValues?.UseMeasurePerformanceTools&&this._measurePerformanceService.rendering$.next()}))}_hideViewElement(){this._componentBinding?.unsubscribe(),this._showElementSubscription.unsubscribe(),this._container.clear(),this.componentRef=null}bindDirectiveProperties(e){this._directiveBinding?.unsubscribe(),this._directiveBinding=this._directivePropertiesBinder.bind(this._directiveRef,e)}bindComponentProperties(e){this._componentBinding?.unsubscribe(),this.componentRef&&(this._componentBinding=this._componentPropertiesBinder.bind(this.componentRef,e))}updateViewElementConfig(e){this.viewElementConfig=e,this._bindSelfToViewModel(),this._bindComponentToViewModel()}ngOnInit(){this._directivePropertiesBinder=this.injector.get(lD),this._componentPropertiesBinder=this.injector.get(oD),this.parentDirective&&this.parentDirective.attachNested(this),this._bindSelfToViewModel()}attachNested(e){this.nested.push(e)}detachNested(e){this.nested.splice(this.nested.indexOf(e),1)}ngOnDestroy(){this.parentDirective&&this.parentDirective.detachNested(this),this._componentBinding?.unsubscribe(),this._directiveBinding?.unsubscribe(),this._destroyed$.next(),this._destroyed$.complete()}}qt.\u0275fac=function(e){return new(e||qt)(n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(qt,12),n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(Tn,8),n.\u0275\u0275directiveInject(n.NgZone))},qt.\u0275dir=n.\u0275\u0275defineDirective({type:qt,selectors:[["","crtViewElement",""]],inputs:{viewElementConfig:["crtViewElement","viewElementConfig"],visibilityStrategy:"visibilityStrategy",visible:"visible"},outputs:{viewElementShow:"viewElementShow"},features:[n.\u0275\u0275ProvidersFeature([{provide:fs,useFactory:a=>a.viewElementConfig,deps:[(0,n.forwardRef)(()=>qt)],multi:!1},{provide:oD,useFactory:function(a){return WC(a)?new yA(a):new nD(a)},deps:[n.Injector],multi:!1},{provide:lD,useFactory:a=>new nD(a),deps:[n.Injector],multi:!1},{provide:JI,useFactory:function(a){return WC(a)?new bA(a):new rD(a)},deps:[n.Injector],multi:!1},{provide:$C,useFactory:(a,e)=>function(a,e){return a||e}(a.visibilityStrategy,e),deps:[(0,n.forwardRef)(()=>qt),[new n.Inject($C),new n.SkipSelf,new n.Optional]],multi:!1},{provide:cD,useFactory:(a,e)=>function(a,e){const t=a.get($C)||l.ViewElementVisibilityStrategy.Default,r={[l.ViewElementVisibilityStrategy.Default]:uD,[l.ViewElementVisibilityStrategy.OnDemand]:kA}[t];if(!r)throw new Error(`Unsupported visibility strategy type: ${t}`);return r(a,e)}(a,e._destroyed$),deps:[n.Injector,(0,n.forwardRef)(()=>qt)],multi:!1},...Qg])]});class Kl{constructor(e){this.injector=e}set viewModel(e){(e instanceof ti||null==e)&&(this.viewModel$||(this.viewModel$=new u.ReplaySubject(1)),this.viewModel$.next(e))}ngOnDestroy(){this.viewModel=null,this.viewModel$?.complete()}}Kl.\u0275fac=function(e){return new(e||Kl)(n.\u0275\u0275directiveInject(n.Injector))},Kl.\u0275dir=n.\u0275\u0275defineDirective({type:Kl,selectors:[["","crtViewModel",""]],inputs:{viewModel:["crtViewModel","viewModel"]},exportAs:["crtViewModel"],features:[n.\u0275\u0275ProvidersFeature([{provide:gs,useFactory:a=>({viewModel$:a.viewModel$,parent:a.parent}),deps:[[new n.Inject(QI),new n.Self]],multi:!1},{provide:QI,useFactory:(a,e)=>{const t=new u.ReplaySubject(1);return t.next(null),(a.viewModel$??e?.viewModel$)?.subscribe(t),{viewModel$:t.asObservable(),parent:a.viewModel$?e:e?.parent,viewModelSubject:t}},deps:[(0,n.forwardRef)(()=>Kl),[new n.Inject(gs),new n.SkipSelf,new n.Optional]],multi:!1}])]});class sm{constructor(){this._viewModel$=new u.BehaviorSubject(null),this.viewModel$=this._viewModel$.asObservable()}set viewModel(e){this._viewModel$.next(e)}get viewModel(){return this._viewModel$.getValue()}}sm.\u0275fac=function(e){return new(e||sm)},sm.\u0275prov=n.\u0275\u0275defineInjectable({token:sm,factory:sm.\u0275fac});class Ji{}Ji.\u0275fac=function(e){return new(e||Ji)},Ji.\u0275mod=n.\u0275\u0275defineNgModule({type:Ji}),Ji.\u0275inj=n.\u0275\u0275defineInjector({providers:[ft,...Qg],imports:[y.CommonModule,el,cs,cs]});const YC=new n.InjectionToken("CRT_JIT_MODULES"),FA=new n.InjectionToken("CRT_SCHEMA_BINDING_CACHE");var dD=f(42993),pD=f(18877),mD=f(46198);class ge{static _getViewElementInputProperties(e){const t=l.ViewElementRegistry.viewElements.get(e.type);return[...Object.keys(t.inputs??{}).filter(i=>t.inputs[i].propertyBindable),"visible"]}static createLayoutConfigComponentParts(e,t,i){for(const[r,s]of Object.entries(t))i.attributes["layout-config-"+(0,mD.Z)(r)]={value:s}}static createVisibleComponentPartsWrapper(e,t,i,r){let o=t;const c=[];$e(t)&&(o=t,c.push({name:"crtBinding",arguments:[{value:e,propertyKey:ge.getContextPropertyName(e+"|propertyName",i)},{value:r,propertyKey:ge.getContextPropertyName(e+"|viewElementConfig",i)}]}));const d=i.directives.find(p=>"crtIf"===p.selector);if(d)d.values.unshift({propertyKey:this.getContextPropertyName(e,i),value:o,pipes:c});else{const p={values:[{propertyKey:this.getContextPropertyName(e,i),value:o,pipes:c}],selector:"crtIf",useAsterisk:!0};ge.addCrtIfDirectiveAdditionalInputs(p,r),i.directives.push(p)}return i}static getContextPropertyName(e,t){return t.name+":"+e}static getViewElementEntries(e){const t=l.ViewElementRegistry.getFormControlRelatesAttribute(e.type),i=Object.entries(e),r=i.find(([o])=>"bindTo"===o);let s=i.filter(([o])=>"bindTo"!==o);if(r){const o=this._getViewElementInputProperties(e),[,c]=r;o.forEach(d=>{if(d!==t){const p=e[d];if(null==p||"string"!=typeof p||"string"==typeof p&&!p.includes("|")){let g=c;g=`${g}:${d}`,null!=p&&(g+=`=${JSON.stringify(p)}`),s=s.filter(([C])=>C!==d),s.push([d,g])}}})}return s}static addCrtIfDirectiveAdditionalInputs(e,{visibilityStrategyMode:t}){if(!t)return;const i=e.additionalInputs||[];i.push({propertyKey:"visibilityStrategyMode",value:t}),e.additionalInputs=[...i]}}class Xl{constructor(e){this.parent=e,this.inputs={},this.outputs={},this.directives=[],this.attributes={},this.content=[]}}class Xg{constructor(e,t){this.changeDetectorRef=e,this.containerRef=t,this.init=new n.EventEmitter}ngOnInit(){this.init.emit(this)}}Xg.\u0275fac=function(e){return new(e||Xg)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(n.ViewContainerRef))},Xg.\u0275dir=n.\u0275\u0275defineDirective({type:Xg,selectors:[["","crtViewInit",""]],outputs:{init:"init"}});const QC="crt-hide-visible",om="_instanceId",ef="_instanceCache";class OA extends Error{constructor(e,t){super(`Validation error. Cannot create ${e} with name ${t}. Incorrect format`)}}const jA=/^([#a-zA-Z_]+)([\w_.-]+)/gm;function tf(a,e){const t=e.match(jA);if(!t?.length||t[0]!==e)throw new OA(a,e)}class ec{}ec.\u0275fac=function(e){return new(e||ec)},ec.\u0275mod=n.\u0275\u0275defineNgModule({type:ec}),ec.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,Ji,y.CommonModule,Ji]});class Ki{constructor(e,t,i){this._injector=t,this._ngZone=i,this._featureValues=this._injector.get(te),this._modules=Ki._flatModulesArrays(e)}static _flatModulesArrays(e){const t=e.flat(),i=t.filter((r,s)=>t.indexOf(r)!==s);if(i.length>0){const r=i.map(s=>s.name).join(", ");throw new Error(`There are module duplicates in "${YC}" token: ${r}`)}return t}_getInputExpression(e,t,i){let r;const s=t.value;return r=this._featureValues.DisableDoNotUseBindingPipeForConstant?e?`"context['${e}']${i}"`:`"${s}${i}"`:e?t.pipes||"string"==typeof s?`"context['${e}']${i}"`:`'${s}'`:`"${s}${i}"`,r}_createInputDefinitions(e,t){const i=[];for(const[r,s]of Object.entries(e.inputs)){tf("input",r);const o=s.propertyKey;o&&(t[o]=s.value);let c="";for(const g of s.pipes||[]){c+=` | ${g.name}`;for(const C of g.arguments||[])t[C.propertyKey]=C.value,c+=`:context['${C.propertyKey}']`}const p=`[${r}]=${this._getInputExpression(o,s,c)}`;i.push(p)}return i}_createAttributeDefinitions(e,t){const i=[];for(const[r,s]of Object.entries(e.attributes))tf("attribute",r),s.value?i.push(`${r}="${s.value}"`):i.push(`${r}`);return i}_createOutputDefinitions(e,t){const i=[];Object.entries(e.outputs).length>0&&i.push('crtOutputBinding #ref="crtOutputBinding"');for(const[s,o]of Object.entries(e.outputs)){tf("output",s);const c=o.propertyKey;t[c]=o.fn,i.push(`(${s})="context['${c}'](ref, $event)"`)}return i}_createDirectiveDefinitions(e,t){const i=[],r=[];for(const s of e.directives){const o=s.useAsterisk?`*${s.selector}`:`[${s.selector}]`,c=[];for(const g of s.values){const C=g.propertyKey;let v=`context['${C}']`;for(const T of g.pipes||[]){v+=` | ${T.name}`;for(const j of T.arguments||[])t[j.propertyKey]=j.value,v+=`:context['${j.propertyKey}']`}(0,u.isObservable)(g.value)?t[C]=g.value.pipe(Wf(this._ngZone)):t[C]=g.value,c.push(v)}const{variableName:d}=s;let p="";s.additionalInputs?.length>0&&(s.useAsterisk?p=this._getAdditionalStructuredDirectiveInputs(s.additionalInputs):r.push(s.additionalInputs.map(g=>`[${g.propertyKey}]='${g.value}'`).join(";"))),s.rawValue&&c.push(s.rawValue),i.push(`${o}="${c.map(g=>`(${g})`).join(" && ")}${d?";let "+d:""+p}"`)}return{directives:i,directiveInputs:r}}_getAdditionalStructuredDirectiveInputs(e){return`; ${e.map(i=>`${i.propertyKey}: '${i.value}'`).join("; ")};`}_createContentDefinitions(e,t){const i=[],r=e.content;for(const s of r){const{componentContext:o,componentTemplate:c}=this.createTemplateAndContext(s);i.push(c),Object.assign(t,o)}return i}_isHostModule(e){return"host"===l.bootstrappedCrtModules.get(e)?.source}createTemplateAndContext(e){tf("selector",e.selector);const t={},i=this._createInputDefinitions(e,t),r=this._createAttributeDefinitions(e,t),s=this._createOutputDefinitions(e,t),{directives:o,directiveInputs:c}=this._createDirectiveDefinitions(e,t),d=this._createContentDefinitions(e,t),p=e.name||"root",g=`${o.join(" ")} ${c.join(" ")}`;return{componentTemplate:`\n\t\t\t<${e.selector} id="${p}" crtViewInit (init)="refs['${p}'] = $event"\n\t\t\t\t${i.join(" ")} ${g} ${s.join(" ")} ${r.join(" ")}\n\t\t\t>\n\t\t\t\t${d.join(" ")}\n\t\t\t</${e.selector}>\n\t\t`,componentContext:t}}create(e,t,i){const r=this._injector,o=r.get(DI).map(p=>({provide:DI,useValue:p,multi:!0})),c=(i??[]).filter(p=>this._isHostModule(p));return{componentType:(0,n.Component)({selector:e,template:t,host:{class:"flex-full-height"},styles:[`\n\t\t\t\t:host > .stretch {\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t}\n\t\t\t\t.${QC} {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t`],changeDetection:n.ChangeDetectionStrategy.OnPush,imports:[ec,...this._modules,...c],standalone:!0,providers:[...o,{provide:bC,useValue:{active$:new u.BehaviorSubject(!0)}}]})(class{constructor(){this._bindingActivator=(0,n.inject)(bC),this.ownChangeDetectorRef=(0,n.inject)(n.ChangeDetectorRef),this.injector=r,this.refs={}}activate(){this.ownChangeDetectorRef.reattach(),this._bindingActivator.active$.next(!0)}deactivate(){this.ownChangeDetectorRef.detach(),this._bindingActivator.active$.next(!1)}updateViewElementInput(p,g,C){this.context={...this.context,[p+":"+g]:C},this.refs[p]?.changeDetectorRef?.detectChanges(),this.refs[p]?.changeDetectorRef?.markForCheck()}})}}}Ki.\u0275fac=function(e){return new(e||Ki)(n.\u0275\u0275inject(YC),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(n.NgZone))},Ki.\u0275prov=n.\u0275\u0275defineInjectable({token:Ki,factory:Ki.\u0275fac,providedIn:"root"});class tc{constructor(e){this._schemaChangeListenerService=e,this._componentInfoCache=new Map,this._destroyed$=new u.Subject,this._schemaChangeListenerService.schemaChanged$.pipe((0,L.R)(this._destroyed$)).subscribe(t=>{t.schemaType===Aa.ClientUnitSchema&&this._componentInfoCache.delete(t.name)})}get(e){return this._componentInfoCache.get(e)}set(e,t){this._componentInfoCache.set(e,t)}has(e){return this._componentInfoCache.has(e)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}tc.\u0275fac=function(e){return new(e||tc)(n.\u0275\u0275inject(tn))},tc.\u0275prov=n.\u0275\u0275defineInjectable({token:tc,factory:tc.\u0275fac,providedIn:"root"});class nc{constructor(){this.viewAttached$=new u.BehaviorSubject(!0)}}nc.\u0275fac=function(e){return new(e||nc)},nc.\u0275prov=n.\u0275\u0275defineInjectable({token:nc,factory:nc.\u0275fac});class ic{constructor(){this._componentRefCache=new Map,this._viewConfigCache=new Map,this._instanceCache=new Map}invalidateInstance(e){const t=[],i=Array.from(this._componentRefCache.keys());for(const[r,s]of this._instanceCache.entries())s.delete(e),r.instance.ownChangeDetectorRef.detectChanges(),!s.size&&i.indexOf(r)<i.length-1&&t.push(r);t.forEach(r=>{this._componentRefCache.delete(r),this._viewConfigCache.delete(r),this._instanceCache.delete(r),r.destroy()})}saveView(e,t,i){const r=this._componentRefCache.get(e)||new Set;r.add(t),this._componentRefCache.set(e,r),this._viewConfigCache.set(e,i)}saveInstance(e,t){const i=this._instanceCache.get(e)||new Set;i.add(t),this._instanceCache.set(e,i)}getInstances(e){return this._instanceCache.get(e)}getView(e){for(const[t,i]of this._componentRefCache.entries())if(i.has(e))return t}getViewConfig(e){return this._viewConfigCache.get(e)}ngOnDestroy(){for(const e of this._componentRefCache.keys())e.destroy();this._componentRefCache.clear(),this._viewConfigCache.clear(),this._instanceCache.clear()}}ic.\u0275fac=function(e){return new(e||ic)},ic.\u0275prov=n.\u0275\u0275defineInjectable({token:ic,factory:ic.\u0275fac});class gD{constructor(e,t){this.injector=e,this.componentPartsFactory=t,this._specialPropertiesList=[{property:"type",createComponentPart:()=>{}},{property:"layoutConfig",createComponentPart:ge.createLayoutConfigComponentParts.bind(this)}],this._loadingAttributeName="loading",this._visibleAttributeName="visible",this.initDependencies()}_createViewElementConfigProviderComponentParts(e,t){t.directives.push({selector:"crtViewElementConfig",values:[{value:e,pipes:[],propertyKey:ge.getContextPropertyName("viewElementConfig",t)}]})}_createDataItemMarkerComponentParts(e,t){t.attributes["data-item-marker"]={value:e.dataItemMarker||e.name}}createLoadingComponentParts(e,t){Object.keys(e).some(r=>r===this._loadingAttributeName)?this._createInputComponentParts(this._loadingAttributeName,e[this._loadingAttributeName],e,t):this._createDefaultLoadingPropertyBinding(e,t)}_createDefaultLoadingPropertyBinding(e,t){const i=(0,BC.Z)(e).entries().filter(([s,o])=>this.isInputBinding(s,o,e)&&$e(o)).value();let r=(0,u.of)(!1);if(i.length){const s=i.map(([o,c])=>qI(c));r=this._createLoadingPropertyValueFromContextEvent(s)}t.inputs[this._loadingAttributeName]={propertyKey:ge.getContextPropertyName(this._loadingAttributeName,t),pipes:[{name:"crtAsync",arguments:[]}],value:r}}_createLoadingPropertyValueFromContextEvent(e){const t=this.injector.get(n.NgZone);return em(this._bindingContext).viewModel$.pipe((0,M.w)(i=>{if(!i)return(0,u.of)(!1);let r=[];const s=i.events$.pipe((0,P.h)(c=>c.type===Ie.StartLoadModelAttributes),(0,h.U)(c=>c),(0,P.h)(c=>{const d=Object.keys(c.payload);return e.some(p=>d.includes(p))}),(0,I.b)(c=>{r=Object.keys(c.payload)}),(0,h.U)(()=>!0)),o=i.events$.pipe((0,P.h)(c=>c.type===Ie.FinishLoadModelAttributes),(0,h.U)(c=>c),(0,P.h)(c=>{const d=Object.keys(c.payload);return r.every(p=>d.includes(p))}),(0,h.U)(()=>!1),(0,I.b)(()=>r=[]));return(0,u.merge)(s,o).pipe(Wf(t))}))}_createContentPropertyComponentParts(e,t,i,r,s){const o=this.getViewElementSlotDefinition(i,e);for(const c of t){const d=this.componentPartsFactory.create(this.injector,c);let p=d.create(c,r,s);o.lazy&&(p=this.createLazyContentComponentParts(p)),this.featureValues.UseSchemaOutletReuseViewStrategy&&this.isAngularHost&&!this.featureValues.DisableComponentPartsCreatorAddContentProperty?d.addContentProperty(e,p,i):this.addContentProperty(e,p,i),r.content.push(p)}o.input&&this._createInputComponentParts(e,t,i,r)}_isConstant(e){const t=typeof e;return"string"===t&&!$e(e)||"number"===t||"boolean"===t||"bigint"===t}_getBindingPipeConfig(e,t,i){return[{name:"crtBinding",arguments:[{value:e,propertyKey:ge.getContextPropertyName(e+"|propertyName",i)},{value:t,propertyKey:ge.getContextPropertyName(e+"|viewElementConfig",i)}]}]}_createInputComponentParts(e,t,i,r){r.inputs[e]={propertyKey:ge.getContextPropertyName(e,r),value:t},(this.featureValues.DisableDoNotUseBindingPipeForConstant||!this._isConstant(t))&&(r.inputs[e].pipes=this._getBindingPipeConfig(e,i,r))}_createControlInputComponentParts(e,t,i,r){const s={selector:"crtIf",variableName:"control",useAsterisk:!0,values:[{value:t,propertyKey:ge.getContextPropertyName(e,r),pipes:[{name:"crtBinding",arguments:[{value:e,propertyKey:ge.getContextPropertyName(e+"|propertyName",r)},{value:i,propertyKey:ge.getContextPropertyName(e+"|viewElementConfig",r)}]}]}],additionalInputs:[]};ge.addCrtIfDirectiveAdditionalInputs(s,i),r.directives.push(s),r.inputs[e]={value:"control"}}_createInputWithValidationComponentParts(e,t,i,r){const o=this.injector.get(si).evaluate(t,this._bindingContext).pipe((0,ee.B)()),c=o.pipe((0,dD.j)("value"),(0,on.x)());r.inputs[e]={propertyKey:ge.getContextPropertyName(e,r),value:c,pipes:[{name:"crtAsync",arguments:[]}]};const d=YI(e),p=o.pipe((0,dD.j)("validationInfo"),(0,on.x)());r.inputs[d]={propertyKey:ge.getContextPropertyName(d,r),value:p,pipes:[{name:"crtAsync",arguments:[]}]}}_createOutputComponentParts(e,t,i){i.outputs[e]={propertyKey:ge.getContextPropertyName(e,i),fn:(r,s)=>{r.processOutputEvent(t,s)}}}_createTwoWayBindingComponentParts(e,t,i,r){Kg(i.type,e)?this._createInputWithValidationComponentParts(e,t,i,r):this._createInputComponentParts(e,t,i,r);const s=t.slice(1),o=im(e),c={action:"changeAttributeValue",attributePath:s};this._createOutputComponentParts(o,c,r);const d={action:"markControlAsTouched",attributePath:s};this._createOutputComponentParts("focusout",d,r)}_createSpecialPropertyComponentParts(e,t,i){return this._specialPropertiesList.find(s=>s.property===e)?.createComponentPart(e,t,i)}initDependencies(){this.bindingExpressionInterpreter=this.injector.get(hn),this._bindingContext=this.injector.get(gs),this.featureValues=this.injector.get(te),this.isAngularHost=this.injector.get(bb)}createLazyContentComponentParts(e){throw Error("View element type does not support lazy content projection.")}isSpecialPropertyBinding(e,t){return Boolean(this._specialPropertiesList.find(i=>i.property===e))}isContentPropertyBinding(e,t,i){return Boolean(this.getViewElementSlotDefinition(i,e))}getViewElementSlotDefinition(e,t){const r=l.ViewElementRegistry.viewElements.get(e.type)?.contentSlots?.find(s=>("string"==typeof s?s:s.name)===t);return"string"==typeof r?{name:r,input:!1,lazy:!1}:r}isInputBinding(e,t,i){return tm(i.type,e)}isControlBinding(e,t,i){return l.ViewElementRegistry.getFormControlRelatesAttribute(i.type)===e}isInputWithValidationBinding(e,t,i){return this.isInputBinding(e,t,i)&&ls(t)&&Kg(i.type,e)}isOutputBinding(e,t,i){return nm(i.type,e)}isTwoWayBinding(e,t,i){const r=im(e);return!(!tm(i.type,e)||!nm(i.type,r)||r in i||!$e(t))&&(!!ls(t)||(console.warn(`Cannot use two way binding for '${e}' property of '${i.name}' view element. Expression '${t}' should not have converters, properties etc.`),!1))}_processViewElementConfigProperty(e,t,i,r,s){if(this.isContentPropertyBinding(e,t,i)&&Array.isArray(t))this._createContentPropertyComponentParts(e,t,i,r,s);else if(this.isSpecialPropertyBinding(e,t))this._createSpecialPropertyComponentParts(e,t,r);else if(this.isTwoWayBinding(e,t,i))this._createTwoWayBindingComponentParts(e,t,i,r);else if(this.isOutputBinding(e,t,i)){const c={action:"processRequest",requests:Array.isArray(t)?t:[t]};this._createOutputComponentParts(e,c,r)}else this.isInputWithValidationBinding(e,t,i)?this._createInputWithValidationComponentParts(e,t,i,r):this.isControlBinding(e,t,i)?this._createControlInputComponentParts(e,t,i,r):this.isInputBinding(e,t,i)&&this._createInputComponentParts(e,t,i,r)}addIsAttachedConditionInCrtIf(e){const t={propertyKey:ge.getContextPropertyName("isViewAttached",e),value:this.injector.get(nc).viewAttached$.asObservable(),pipes:[{name:"crtAsync"}]},i=e.directives.find(({selector:r})=>"crtIf"===r);i?i.values.push(t):e.directives.push({selector:"crtIf",useAsterisk:!0,values:[t]})}create(e,t,i){const r=new Xl(t);r.selector=this.getSelector(e),r.name=e.name??(0,pD.Z)();const s=ge.getViewElementEntries(e);for(const[c,d]of s)c!==this._visibleAttributeName&&this._processViewElementConfigProperty(c,d,e,r,i);this.createLoadingComponentParts(e,r),i?.useDataItemMarker&&this._createDataItemMarkerComponentParts(e,r),this._createViewElementConfigProviderComponentParts(e,r);const o=s.find(([c])=>c===this._visibleAttributeName);return o?.[0]?ge.createVisibleComponentPartsWrapper(this._visibleAttributeName,o[1],r,e):r}}class fD extends gD{addContentProperty(e,t,i){l.ViewElementRegistry.viewElements.get(i.type)?.contentSlots?.length>1&&(t.attributes[e]={value:""}),t.attributes["#"+e]={value:""}}createLazyContentComponentParts(e){const t=new Xl;t.selector="ng-template",t.content.push(e);const i=e.directives.find(r=>"crtIf"===r.selector);return i&&t.directives.push({selector:"crtIf",values:i.values,useAsterisk:!0}),t}createControl(e){return new b.NI(e)}getSelector(e){return this.getComponentMirror(e).selector}getComponentMirror(e){const i=this.injector.get(ft).getViewElementType(e);return(0,n.reflectComponentType)(i)}}class JC{}class BA extends fD{addContentProperty(e,t,i){super.addContentProperty(e,t,i),this.featureValues.UseSchemaOutletReuseViewStrategy&&this.isAngularHost&&(this.featureValues.DisableComponentPartsRerenderCache||(t.content[0].content[0].attributes["#"+e]={value:""}))}create(e,t,i){const r=super.create(e,t,i);if(this.featureValues.UseSchemaOutletReuseViewStrategy&&this.isAngularHost){if(!this.featureValues.DisableComponentPartsRerenderCache){const s=new Xl(t);s.selector="ng-template",s.attributes.crtNgFor={value:""},s.attributes["let-instanceId"]={value:""},s.inputs.ngForOf={value:`context['${ef}']`};const o=new Xl(s);return s.content=[o],o.selector="ng-container",o.directives.push({selector:"crtAttachIf",values:[],useAsterisk:!0,rawValue:`context['${om}'] === instanceId`}),o.content=[r],s}this.addIsAttachedConditionInCrtIf(r)}return r}}class UA{constructor(e){this._injector=e}create(e,t,i){const r=new Xl(t);return r.selector="crt-view-element-placeholder",r.name=e.name??(0,pD.Z)(),r.inputs.caption={value:e.type,propertyKey:ge.getContextPropertyName("caption",r),pipes:[]},"layoutConfig"in e&&ge.createLayoutConfigComponentParts("layoutConfig",e.layoutConfig,r),"visible"in e?ge.createVisibleComponentPartsWrapper("visible",e.visible,r,e):r}addContentProperty(e,t,i){}}class GA extends gD{addContentProperty(e,t,i){l.ViewElementRegistry.viewElements.get(i.type)?.contentSlots?.length>1&&(t.attributes[e]={value:""}),t.attributes["#"+e]={value:""}}createControl(e){return new Rp(e)}getSelector(e){return this.injector.get(ft).getSelector(e.type)}createLoadingComponentParts(e,t){l.ViewElementRegistry.viewElements.get(e.type).inputs?.loading&&super.createLoadingComponentParts(e,t)}create(e,t,i){const r=super.create(e,t,i);return this.addIsAttachedConditionInCrtIf(r),r}}class _s extends JC{create(e,t){const i=e.get(ft);if(!t.type)throw new Error('"Type" property of view config can not be empty');return i.canResolve(t.type)?i.getSelector(t.type)?new GA(e,this):l.ViewElementRegistry.viewElements.get(t.type)?.reuseStrategy===l.ViewElementReuseStrategy.Rerender?new BA(e,this):new fD(e,this):(console.warn(`View element with type "${t.type}" not found`),new UA(e))}}_s.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(_s)))(t||_s)}}(),_s.\u0275prov=n.\u0275\u0275defineInjectable({token:_s,factory:_s.\u0275fac});class ys{static forRoot(e){return{ngModule:ys,providers:[{provide:YC,useValue:e}]}}}ys.\u0275fac=function(e){return new(e||ys)},ys.\u0275mod=n.\u0275\u0275defineNgModule({type:ys}),ys.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:JC,useClass:_s}],imports:[y.CommonModule]});class lm extends y.AsyncPipe{}lm.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(lm)))(t||lm)}}(),lm.\u0275pipe=n.\u0275\u0275definePipe({name:"crtAsync",type:lm,pure:!1});class nf{constructor(e,t,i,r,s){this._injector=e,this._changeDetector=t,this._bindingExpressionInterpreter=i,this._attributeFormControlExpressionInterpreter=r,this._ngZone=s,this._cache=this._injector.get(FA,null),this._bindingActivator=this._injector.get(bC,null),this._preservedContentBindingActivator=this._injector.get(ZI,null),this._subscribeToActivator()}_subscribeToActivator(){this._bindingActivator&&(this._bindingActivatorSubscription=(0,u.combineLatest)([this._bindingActivator.active$,this._preservedContentBindingActivator?.active$??(0,u.of)(!0)]).pipe((0,h.U)(([e,t])=>e&&t),(0,on.x)(),(0,u.tap)(e=>{e&&this._stream$&&!this._subscription&&(this._subscription=this._stream$.subscribe()),e||(this._subscription?.unsubscribe(),this._subscription=null)})).subscribe())}_isControlProperty(e,t){return e===l.ViewElementRegistry.getFormControlRelatesAttribute(t.type)}_getInterpreter(e){return e?this._attributeFormControlExpressionInterpreter:this._bindingExpressionInterpreter}_restoreValueFromCache(e,t,i){if(this._cache&&t.name){const r=this._cache.get(e)?.get(t.name)?.get(i);typeof r<"u"&&(this._result=r)}}_canApplyValueFromCache(e,t,i){return!!(t.name&&this._cache&&typeof this._cache.get(e)?.get(t.name)?.get(i)<"u")}_saveToCache(e,t,i){if(this._cache&&this._viewModelRef?.deref()&&e.name){const r=this._cache.get(this._viewModelRef.deref())||new Map,s=r.get(e.name)||new Map;this._cache.set(this._viewModelRef.deref(),r),r.set(e.name,s),s.set(t,i)}}transform(e,t,i){if(e!==this._oldValue){this._subscription?.unsubscribe(),this._oldValue=e,this._result=null,this._stream$=null;const r=this._isControlProperty(t,i);if($e(e)){this._bindingContext=this._injector.get(gs);const s=this._bindingContext.viewModel$.pipe((0,u.tap)(d=>{const p=this._canApplyValueFromCache(d,i,t),g=(this._viewModelRef?.deref()||null)!==d,v=l.ViewElementRegistry.getViewElementInputs(i.type)[t];(!p&&g&&this._result instanceof it||v?.reuseStrategy?.resetValue)&&(this._result=null),this._viewModelRef=d?new WeakRef(d):null,this._restoreValueFromCache(d,i,t)})),c=this._getInterpreter(r).evaluate(e,this._bindingContext).pipe(Wf(this._ngZone),(0,u.tap)(d=>{this._result!==d&&(this._result=d,this._saveToCache(i,t,d),this._changeDetector.markForCheck())}));this._stream$=(0,u.merge)(s,c),this._subscription=this._stream$.subscribe()}else this._result=r?new b.NI(e):e}return this._result}ngOnDestroy(){this._subscription?.unsubscribe(),this._bindingActivatorSubscription?.unsubscribe()}}var af;nf.\u0275fac=function(e){return new(e||nf)(n.\u0275\u0275directiveInject(n.Injector,16),n.\u0275\u0275directiveInject(n.ChangeDetectorRef,16),n.\u0275\u0275directiveInject(hn,16),n.\u0275\u0275directiveInject(ni,16),n.\u0275\u0275directiveInject(n.NgZone,16))},nf.\u0275pipe=n.\u0275\u0275definePipe({name:"crtBinding",type:nf,pure:!1}),function(a){a.HIDE="hide",a.DESTROY="destroy"}(af||(af={}));class rf{constructor(e,t,i){this._view=e,this._template=t,this._featureValues=i,this._context={$implicit:null},this.visibilityStrategyMode=af.DESTROY}_changeVisibilityByDestroyStrategy(){this.crtIf?this._ref||(this._ref=this._view.createEmbeddedView(this._template,this._context)):(this._view.clear(),this._ref=null)}_canUseHideStrategy(){return this.visibilityStrategyMode===af.HIDE&&this._featureValues.UseHideVisibilityStrategy}_changeVisibilityByHideStrategy(){if(this.crtIf)return this._ref?void this._getRootNode().classList.remove(QC):void(this._ref=this._view.createEmbeddedView(this._template,this._context));this._ref&&this._getRootNode().classList.add(QC)}_getRootNode(){return this._ref.rootNodes[0]}ngOnChanges(e){this._context.$implicit=this.crtIf,this._canUseHideStrategy()?this._changeVisibilityByHideStrategy():this._changeVisibilityByDestroyStrategy()}ngOnDestroy(){this._ref?.destroy()}}rf.\u0275fac=function(e){return new(e||rf)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(n.TemplateRef),n.\u0275\u0275directiveInject(te))},rf.\u0275dir=n.\u0275\u0275defineDirective({type:rf,selectors:[["","crtIf",""]],inputs:{crtIf:"crtIf",visibilityStrategyMode:["crtIfVisibilityStrategyMode","visibilityStrategyMode"]},features:[n.\u0275\u0275NgOnChangesFeature]});class sf{constructor(e){this._injector=e,this._requestBindingConfigInterpreter=this._injector.get(ri),this._crtNavigationLock=this._injector.get(yb)}_sendRequest(e,t){return this._requestBindingConfigInterpreter.evaluate(e,{...this._bindingContext,initialEvent:t}).pipe((0,h.U)(i=>({...i,$initialEvent:t})),(0,u.switchMap)(i=>i.$context?.executeRequest(i)??(0,u.of)(null)))}_sendRequests(e,t){var i=this;return this._crtNavigationLock.wait((0,_.Z)(function*(){const r=(0,u.from)(t).pipe((0,u.concatMap)(s=>i._sendRequest(s,e)));yield(0,u.lastValueFrom)(r)}))}processOutputEvent(e,t){if(this._bindingContext=this._injector.get(gs),"processRequest"===e.action)this._sendRequests(t,e.requests);else if("changeAttributeValue"===e.action){const r=t instanceof CustomEvent?t.detail:t;KI(e.attributePath,r,this._bindingContext)}else"markControlAsTouched"===e.action&&XI(e.attributePath,this._bindingContext)}}sf.\u0275fac=function(e){return new(e||sf)(n.\u0275\u0275directiveInject(n.Injector))},sf.\u0275dir=n.\u0275\u0275defineDirective({type:sf,selectors:[["","crtOutputBinding",""]],exportAs:["crtOutputBinding"],features:[n.\u0275\u0275ProvidersFeature([ri])]});class cm{}cm.\u0275fac=function(e){return new(e||cm)},cm.\u0275dir=n.\u0275\u0275defineDirective({type:cm,selectors:[["","crtViewElementConfig",""]],inputs:{crtViewElementConfig:"crtViewElementConfig"},features:[n.\u0275\u0275ProvidersFeature([{provide:fs,useFactory:a=>(0,q.Z)(a.crtViewElementConfig),deps:[[cm,new n.Self]]}])]});class um{constructor(e,t,i,r,s,o,c){this.injector=e,this._featureService=t,this.containerRef=i,this._componentCreator=r,this._componentPartsFactory=s,this._componentStorage=o,this._measurePerformanceService=c,this._featureValues=(0,n.inject)(te)}_getContentProperties(e){return l.ViewElementRegistry.viewElements.get(e.type)?.contentSlots?.map(t=>"string"==typeof t?t:t.name)||[]}_getInputProperties(e){const t=l.ViewElementRegistry.viewElements.get(e.type),i=t?.inputs||{};return t.contentSlots&&t.contentSlots.forEach(r=>{"object"==typeof r&&r.input&&(i[r.name]={})}),i}_getComponentParts(e){const t=new Xl;t.selector="ng-container";for(const i of(0,q.Z)(this.viewConfig)){const s=this._componentPartsFactory.create(this.injector,i).create(i,null,{useDataItemMarker:e});t.content.push(s)}return t}createComponent(e,t){let i;const r=this._measurePerformanceService.measure("ViewGenerator.getComponentParts",()=>this._getComponentParts(e)),{componentContext:s,componentTemplate:o}=this._measurePerformanceService.measure("ViewGenerator.createTemplateAndContext",()=>this._componentCreator.createTemplateAndContext(r));!t&&this.selector&&this._componentStorage.has(this.selector)?i=this._componentStorage.get(this.selector):(i=this._measurePerformanceService.measure(`ViewGenerator.createComponent.${this.selector}`,()=>this._componentCreator.create(this.selector,o,this.modules)),!t&&this.selector&&this._componentStorage.set(this.selector,i));const c=this.containerRef.createComponent(i.componentType,{index:0,injector:this.injector,environmentInjector:this.injector.get(n.EnvironmentInjector)});return c.instance.context=s,c}_excludeContentAndInputProperties(e){return(0,At.Z)(e,[...this._getContentProperties(e),...Object.keys(this._getInputProperties(e))])}canUpdateView(e,t){if(this._featureValues.DisableUpdateWithoutSchemaReload||e.length!==t.length||!this.componentInstance)return!1;for(let i=0;i<e.length;i++){const r=e[i],s=t[i];if(!(0,J.Z)(new Set(Object.keys(e[i])),new Set(Object.keys(t[i])))||!(0,J.Z)(this._excludeContentAndInputProperties(e[i]),this._excludeContentAndInputProperties(t[i])))return!1;const o=this._getContentProperties(r);for(const c of o)if(!this.canUpdateView(r[c]||[],s[c]||[]))return!1}return!0}_updateViewElementInputs(e,t){for(let i=0;i<e.length;i++){const r=t[i],s=e[i];for(const c of Object.keys(this._getInputProperties(r)))(0,J.Z)(r[c],s[c])||this.componentInstance.updateViewElementInput(r.name,c,r[c]);const o=this._getContentProperties(r);for(const c of o)this._updateViewElementInputs(s[c]||[],r[c]||[])}}updateView(e,t){this._measurePerformanceService.measure("ViewGenerator.updateView",()=>{this._updateViewElementInputs(e,t),this.componentInstance.changeDetectorRef.detectChanges()})}resetPreviousView(){this.containerRef.clear()}createView(){const e=this.createComponent(this._featureValues.UseViewElementDataItemMarker,this._featureValues.DisableComponentCacheFeature);return e.instance.changeDetectorRef=e.changeDetectorRef,this.componentInstance=e.instance,e}ngOnChanges(e){const t=e.viewConfig?.currentValue||[],i=e.viewConfig?.previousValue||[];t&&!(0,J.Z)(i,t)&&(this.canUpdateView(i,t)?this.updateView(i,t):(this.resetPreviousView(),this.createView()))}}um.\u0275fac=function(e){return new(e||um)(n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(Me),n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(Ki),n.\u0275\u0275directiveInject(JC),n.\u0275\u0275directiveInject(tc),n.\u0275\u0275directiveInject(le))},um.\u0275dir=n.\u0275\u0275defineDirective({type:um,selectors:[["","crtViewGenerator",""]],inputs:{viewConfig:"viewConfig",selector:"selector",modules:"modules"},features:[n.\u0275\u0275ProvidersFeature([...Qg]),n.\u0275\u0275NgOnChangesFeature]});class ac extends um{constructor(){super(...arguments),this._cacheService=(0,n.inject)(ic),this._viewModel$=new u.ReplaySubject(1),this._bindingContext={viewModel$:this._viewModel$.asObservable()}}resetPreviousView(){if(this.componentInstance?.deactivate(),this._componentRef){const e=this.containerRef.indexOf(this._componentRef.hostView);this.containerRef.detach(e)}}createView(){return this._viewModel$.next(this.viewModel),super.createView()}_restoreView(e){this.resetPreviousView(),this._componentRef=e,this.componentInstance=this._componentRef.instance,this._viewModel$.next(this.viewModel),this.componentInstance.activate(),this.containerRef.insert(e.hostView,0)}_createOrUpdateViewWithoutCaching(e){if("instanceId"in e)return this.resetPreviousView(),this._componentRef=this.createView(),this._componentRef.instance.context[om]=this.instanceId,void(this._componentRef.instance.context[ef]=[this.instanceId]);const t=this.viewConfig||[],i=e.viewConfig?.previousValue||[];"viewConfigId"in e&&(this.canUpdateView(i,t)?this.updateView(i,t):(this.resetPreviousView(),this._componentRef.destroy(),this._componentRef=this.createView(),this._componentRef.instance.context[om]=this.instanceId,this._componentRef.instance.context[ef]=[this.instanceId]))}_createOrUpdateView(e){const t=this.viewConfig||[],i=e.viewConfig?.previousValue||[];if("instanceId"in e||"viewConfigId"in e){const r=this._cacheService.getView(this.viewConfigId),o=this._cacheService.getViewConfig(r)||i;this.canUpdateView(o,t)?(r&&this._restoreView(r),this._componentRef.instance.context[om]=this.instanceId,this.updateView(o,t)):(this.resetPreviousView(),this._componentRef=this.createView(),this._cacheService.invalidateInstance(this.instanceId),this._componentRef.instance.context[om]=this.instanceId),this._cacheService.saveView(this._componentRef,this.viewConfigId,this.viewConfig),this._cacheService.saveInstance(this._componentRef,this.instanceId),this._componentRef.instance.context[ef]=this._cacheService.getInstances(this._componentRef)}}_resetPreviousViewWithoutCaching(e){const t="skipCache"in e?e.skipCache.previousValue:this.skipCache;"instanceId"in e&&t&&(this.resetPreviousView(),this._componentRef.destroy(),this._componentRef=null)}ngOnChanges(e){this._resetPreviousViewWithoutCaching(e),this.skipCache?this._createOrUpdateViewWithoutCaching(e):this._createOrUpdateView(e)}}ac.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ac)))(t||ac)}}(),ac.\u0275dir=n.\u0275\u0275defineDirective({type:ac,selectors:[["","crtReusableViewGenerator",""]],inputs:{instanceId:"instanceId",viewModel:"viewModel",viewConfigId:"viewConfigId",skipCache:"skipCache"},features:[n.\u0275\u0275ProvidersFeature([{provide:gs,useFactory:a=>a._bindingContext,deps:[(0,n.forwardRef)(()=>ac)]},...Qg]),n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275NgOnChangesFeature]});class dm extends y.NgForOf{}dm.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(dm)))(t||dm)}}(),dm.\u0275dir=n.\u0275\u0275defineDirective({type:dm,selectors:[["","crtNgFor",""]],features:[n.\u0275\u0275InheritDefinitionFeature]});class lf{constructor(e,t){this._containerRef=e,this._template=t,this._subscription=new u.Subscription,this._crtAttachIf$=new u.Subject,this._bindingActivator=(0,n.inject)(ZI,{optional:!0})??new pA,this._subscription=(0,u.combineLatest)([this._bindingActivator.active$,this._crtAttachIf$]).subscribe(([i,r])=>this._changeVisibilityByAttachDetachStrategy(i,r))}_changeVisibilityByAttachDetachStrategy(e,t){if(t){if(e){if(!this._viewRef)return void(this._viewRef=this._containerRef.createEmbeddedView(this._template));this._containerRef.insert(this._viewRef)}}else{const i=this._containerRef.indexOf(this._viewRef);i>=0&&this._containerRef.detach(i)}}ngOnChanges(e){this._crtAttachIf$.next(this.crtAttachIf)}ngOnDestroy(){this._subscription.unsubscribe(),this._viewRef?.destroy()}}lf.\u0275fac=function(e){return new(e||lf)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(n.TemplateRef))},lf.\u0275dir=n.\u0275\u0275defineDirective({type:lf,selectors:[["","crtAttachIf",""]],inputs:{crtAttachIf:"crtAttachIf"},features:[n.\u0275\u0275NgOnChangesFeature]});var We=f(73514),KC=f(95834),pm=f(44350),Cs=f(56558);function zA(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"th",11)(1,"mat-checkbox",12),n.\u0275\u0275listener("change",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r?s.allRowsSelectToggle():null)}),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("visibility",t.showSelectAllButton&&!t.isEmpty()?"visible":"hidden"),n.\u0275\u0275property("checked",t.isAllRowsCheckboxChecked())("indeterminate",t.isAllRowsCheckboxIntermediate())}}function HA(a,e){1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,zA,2,4,"th",10),n.\u0275\u0275elementContainerEnd())}function ZA(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"td",13)(1,"mat-checkbox",14),n.\u0275\u0275listener("click",function(r){const o=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(c.onCheckboxClick(o,r))})("change",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.recordSelectToggle(s))}),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("checked",i.isRecordSelected(t))}}function qA(a,e){1&a&&n.\u0275\u0275element(0,"th",16)}function $A(a,e){1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,qA,1,0,"th",15),n.\u0275\u0275elementContainerEnd())}function WA(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"td",17)(1,"button",18),n.\u0275\u0275listener("click",function(r){const o=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(c.toggleRowExpansion(o,r))}),n.\u0275\u0275element(2,"mat-icon",19),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("@rowExpanderTrigger",i.isRecordExpanded(t)?"expanded":"collapsed"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass","row-expander-icon "+(i.isRecordExpanded(t)?"expanded":"collapsed"))}}function YA(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"th",22)(1,"label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext(3).$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!i.isColumnSortable(t))("ngClass",i.getColumnHeaderCssClass(t.valueType,t.span)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.caption)}}function QA(a,e){1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,YA,3,3,"th",21),n.\u0275\u0275elementContainerEnd())}function JA(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"td",23)(1,"ts-table-cell-wrapper",24),n.\u0275\u0275listener("valueChange",function(r){const o=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(2).$implicit,d=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(d.onCellValueChange(o,c,r))}),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext().$implicit,s=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",s.getValueTypeCssClass(r.valueType)),n.\u0275\u0275advance(1),n.\u0275\u0275property("columnDataSchema",r)("record",t)("eventHandlers",s.eventHandlers&&s.eventHandlers[i])}}function KA(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0,2),n.\u0275\u0275template(1,QA,2,0,"ng-container",3),n.\u0275\u0275template(2,JA,2,4,"td",8),n.\u0275\u0275elementContainerEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("matColumnDef",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.showHeader)}}function XA(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,KA,3,2,"ng-container",20),n.\u0275\u0275elementContainerEnd()),2&a){const t=e.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.name)}}function eR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"td",23)(1,"div",25),n.\u0275\u0275element(2,"ts-table-cell-wrapper",26),n.\u0275\u0275elementEnd()()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass","expandable-cell-"+(i.isRecordExpanded(t)?"expanded":"collapsed")),n.\u0275\u0275attribute("colspan",i.columns.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("@expandableRowTrigger",i.isRecordExpanded(t)?"expanded":"collapsed"),n.\u0275\u0275advance(1),n.\u0275\u0275property("columnDataSchema",i.dataSchema.expandableRow)("record",t)("eventHandlers",i.eventHandlers&&i.eventHandlers[i.dataSchema.expandableRow.name])}}function tR(a,e){1&a&&n.\u0275\u0275element(0,"tr",28)}function nR(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,tR,1,0,"tr",27),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("matHeaderRowDef",t.columns)("matHeaderRowDefSticky",t.headerSticky)}}function iR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tr",29),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.onRowClick(s))})("dblclick",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.onRowDoubleClick(s))}),n.\u0275\u0275elementEnd()}if(2&a){const t=e.$implicit,i=e.even,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",r.getRowCssClass(t,i))("cdkDragData",t)("cdkDragBoundary",r.dragBoundarySelector)("cdkDragDisabled",!r.enableOrdering)}}function aR(a,e){1&a&&n.\u0275\u0275element(0,"tr",31)}const rR=function(){return["expandableRow"]};function sR(a,e){1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,aR,1,0,"tr",30),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("matRowDefColumns",n.\u0275\u0275pureFunction0(1,rR)))}function oR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"table",1),n.\u0275\u0275listener("matSortChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onSortChange(r))})("cdkDropListDropped",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onItemDrop(r))}),n.\u0275\u0275elementContainerStart(1,2),n.\u0275\u0275template(2,HA,2,0,"ng-container",3),n.\u0275\u0275template(3,ZA,2,1,"td",4),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementContainerStart(4,2),n.\u0275\u0275template(5,$A,2,0,"ng-container",3),n.\u0275\u0275template(6,WA,3,2,"td",5),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(7,XA,2,1,"ng-container",6),n.\u0275\u0275elementContainerStart(8,7),n.\u0275\u0275template(9,eR,3,6,"td",8),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(10,nR,2,2,"ng-container",3),n.\u0275\u0275template(11,iR,1,4,"tr",9),n.\u0275\u0275template(12,sR,2,2,"div",3),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("display",t.isEmpty()?"none":null),n.\u0275\u0275property("dataSource",t.dataSource)("matSortDirection",t.sortDirection)("matSortActive",t.sortColumn)("cdkDropListDisabled",!t.enableOrdering)("trackBy",t.trackByFunction),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("matColumnDef",t.getMultiSelectColumnName()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showHeader),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("matColumnDef",t.getRowExpanderColumnName()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showHeader),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.dataSchema.columns),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.showHeader),n.\u0275\u0275advance(1),n.\u0275\u0275property("matRowDefColumns",t.columns),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.dataSchema.expandableRow)}}var fe;!function(a){a.None="none",a.Intermediate="intermediate",a.All="all"}(fe||(fe={}));const lR=["headerSticky","selectMode","showHeader","showSelectAllButton","allRowsSelectState","allRowsSelectToggleHandler","sortable","sortColumn","sortDirection","selectedRowCssClass","evenRowCssClass","minWidthPerColumn"],cR={selectMode:"none",headerSticky:!1,showHeader:!0,showSelectAllButton:!0,sortable:!0,sortColumn:"",sortDirection:"asc",selectedRowCssClass:"selected",evenRowCssClass:"even-row",minWidthPerColumn:120};class _t{get filteredData(){return this.dataSource?this.dataSource.filteredData:[]}get dataSchema(){return this._dataSchema}set dataSchema(e){this._dataSchema=e;const t={};e&&e.columns.forEach(i=>{t[i.name]=i}),this.columnsDataSchema=t,this.markForCheck()}get dataColumns(){const e=this.dataSchema;return e&&e.columns?e.columns.map(t=>t.name):[]}get columns(){const e=this.dataColumns;return"multi"===this.selectMode&&e.unshift(this.getMultiSelectColumnName()),this.dataSchema.expandableRow&&("start"===this.rowExpanderPosition&&e.unshift(this.getRowExpanderColumnName()),"end"===this.rowExpanderPosition&&e.push(this.getRowExpanderColumnName())),e}get selected(){const e=this.selection.selected;return this.data.filter(t=>e.includes(this.trackRecord(t)))}set selected(e){this.deselectRedundant();const t=this.trackRecords(e);if(this.deselectExcluding(...t||[]),t){const i=this.trackRecordsAreInTable(t);this.selection.select(...i)}}get expanded(){const e=this.expansion.selected;return this.data.filter(t=>e.includes(this.trackRecord(t)))}set expanded(e){this.collapseRedundant();const t=this.trackRecords(e);if(this.collapseExcluding(...t||[]),t){const i=this.trackRecordsAreInTable(t);this.expansion.select(...i)}}set sort(e){e=e||{},this.sortColumn=e.columnName,this.sortDirection=e.direction}set matSort(e){this._matSort===e||!this._dataSource||!e||(this._matSort=e,this.dataSource.sort=e)}set data(e){e=e||[],this._dataSource||this.initDataSource(),this.dataSource.data=e}get data(){return this.dataSource&&this.dataSource.data||[]}set dataSource(e){this.initDataSource(e)}get dataSource(){return this._dataSource}get eventHandlers(){return this._eventHandlers}set eventHandlers(e){this._eventHandlers=e,this.markForCheck()}set config(e){e=e||{};const t=this._config;this._config=e,(0,J.Z)(e,t)||this._applyConfig(e)}constructor(e){this.changeDetectorRef=e,this.selection=new KC.Ov(!0,[]),this.expansion=new KC.Ov(!0,[]),this.dataValueType=l.DataValueType,this.cellValueChange=new n.EventEmitter,this.enableOrdering=!1,this.rowExpanderPosition="end",this.selectedChange=new n.EventEmitter,this.sortChange=new n.EventEmitter,this.expandedChange=new n.EventEmitter,this.recordPositionChange=new n.EventEmitter,this.rowDoubleClick=new n.EventEmitter,this.getColumnSortingAccessor=(t,i)=>{const r=this.columnsDataSchema[i],s=t&&t[i];if(!r)return s;if(r.sortingDataAccessor)return r.sortingDataAccessor(t);if(r.valueType===l.DataValueType.Lookup){return s&&s.displayValue}return s},this.getMultiSelectColumnName=()=>"_multiSelectColumn",this.getRowExpanderColumnName=()=>"_rowExpanderColumn",this.trackByFunction=(t,i)=>this.trackRecord(i),this.config=cR}_applyConfig(e){lR.forEach(t=>{const i=t,r=t,s=e[i],o=this[r];void 0!==s&&!(0,J.Z)(s,o)&&(this[r]=e[i])})}trackRecord(e){return this._dataSchema?.trackBy?this._dataSchema.trackBy(e):e}trackRecords(e){return e?.map(t=>this.trackRecord(t))}isRecordInTable(e){return this.data.some(t=>this.trackRecord(t)===e)}deselectRedundant(){if(!this.dataSource)return null;const e=this.trackRecordsAreNotInTable(this.selection.selected);return 0!==e.length&&this.selection.deselect(...e),e}collapseRedundant(){if(!this.dataSource)return null;const e=this.trackRecordsAreNotInTable(this.expansion.selected);return 0!==e.length&&this.expansion.deselect(...e),e}deselectExcluding(...e){if(!this.data||!this.selection.hasValue())return;const i=this.trackRecordsExceptExcluded(e);this.selection.deselect(...i)}collapseExcluding(...e){const t=this.trackRecordsExceptExcluded(e);this.expansion.deselect(...t)}changeSelectionForRecords(e,t){e?this.selection.select(...t):this.selection.deselect(...t)}initDataSource(e){(e=e||new We.r4).sortingDataAccessor=this.getColumnSortingAccessor,e.connect().subscribe(t=>{this.renderedDataTrackValues=this.trackRecords(t),this.deselectRedundant()?.length>0&&this.emitSelectionChange(),this.collapseRedundant()?.length>0&&this.emitExpandedChange(),this.markForCheck(),this.calculateMinWidth()}),this._dataSource=e}markForCheck(){this.changeDetectorRef.markForCheck()}emitSelectionChange(){this.selectedChange.emit(this.selected)}emitExpandedChange(){this.expandedChange.emit(this.expanded)}selectSingleRecord(e){this.deselectExcluding(e),this.selection.select(e),this.emitSelectionChange()}validateColumnEventHandlers(){const e=Object.keys(this.eventHandlers),t=this._dataSchema.expandableRow;let i=e.find(r=>!this.columnsDataSchema[r]);if(t&&i===t.name&&(i=null),i){const r=Object.keys(this.columnsDataSchema).join(", ");throw new Error(`Event handlers for column "${i}" can not be specified because the column was not defined in table data schema. Actual table columns: ${r}.`)}}changeSelectionForRange(e){if(!this.renderedDataTrackValues||!this.lastSelectToggledRecord||this.lastSelectToggledRecord===e)return!1;const t=this.renderedDataTrackValues.indexOf(this.lastSelectToggledRecord),i=this.renderedDataTrackValues.indexOf(e);if(-1===t||-1===i)return!1;const r=this.renderedDataTrackValues.slice(Math.min(t,i),Math.max(t,i)+1);return this.changeSelectionForRecords(!this.selection.isSelected(e),r),this.lastSelectToggledRecord=e,this.emitSelectionChange(),!0}trackRecordsAreInTable(e){return this.dataSource?e.filter(t=>this.isRecordInTable(t)):e}trackRecordsAreNotInTable(e){return this.dataSource?e.filter(t=>!this.isRecordInTable(t)):e}trackRecordsExceptExcluded(e){const t=this.trackRecords(this.data);return e?t.filter(i=>!e.includes(i)):t}calculateMinWidth(){const e=this.minWidthPerColumn,t=this.dataSchema?.columns?.length??0,i=!this.isEmpty()&&e>0&&t>0;this.minWidth=i?e*t+"px":""}getColumnSpanClass(e){return e>0&&e<=24?`ts-column-span-${e}`:""}allRecordsSelected(){return this.dataSource&&this.selection.hasValue()&&this.selection.selected.length>=this.filteredData.length&&this.filteredData.every(this.isRecordSelected.bind(this))}getAllRowsSelectState(){let e;return this.allRowsSelectState&&(e=this.allRowsSelectState())?e:this.allRecordsSelected()?fe.All:this.isAnyRecordSelected()?fe.Intermediate:fe.None}ngOnChanges(){this.eventHandlers&&this.columnsDataSchema&&this.validateColumnEventHandlers(),this.calculateMinWidth()}isDataSchemaEmpty(){return!this.dataSchema||!this.dataSchema.columns||0===this.dataColumns.length}isEmpty(){return this.isDataSchemaEmpty()||!this.renderedDataTrackValues||0===this.renderedDataTrackValues.length}recordSelectToggle(e){const t=this.trackRecord(e);this.selection.toggle(t),this.lastSelectToggledRecord=t,this.emitSelectionChange()}onSortChange(e){const t={columnName:e.active,direction:e.direction};this.sort=t,this.sortChange.emit(t)}isAnyRecordSelected(){return this.selection.hasValue()}isRecordSelected(e){return this.selection.isSelected(this.trackRecord(e))}isRecordExpanded(e){return this.expansion.isSelected(this.trackRecord(e))}isAllRowsCheckboxChecked(){return this.getAllRowsSelectState()===fe.All}isAllRowsCheckboxIntermediate(){return this.getAllRowsSelectState()===fe.Intermediate}allRowsSelectToggle(){if("multi"!==this.selectMode)throw new RangeError("Multi-select mode should be enabled to select all records.");if(this.allRowsSelectToggleHandler)this.allRowsSelectToggleHandler();else{const e=!this.isAllRowsCheckboxChecked();this.changeSelectionForRecords(e,this.trackRecords(this.filteredData)),this.emitSelectionChange()}}onRowClick(e){"single"===this.selectMode&&this.selectSingleRecord(this.trackRecord(e))}onRowDoubleClick(e){this.rowDoubleClick.emit(e)}getValueTypeCssClass(e){return"ts-value-type-"+(e&&l.DataValueType[e].toString().toLowerCase())}getColumnHeaderCssClass(e,t){return[this.getValueTypeCssClass(e),this.getColumnSpanClass(t)].filter(i=>Boolean(i))}getRowCssClass(e,t){const i=[];t&&i.push(this.evenRowCssClass),"single"===this.selectMode&&this.isRecordSelected(e)&&i.push(this.selectedRowCssClass);const r="function"==typeof this.dataSchema.rowCssClass?this.dataSchema.rowCssClass(e):this.dataSchema.rowCssClass;return r&&i.push(r),i}isColumnSortable(e){return!(!e.caption||this.enableOrdering)&&(this.sortable?!1!==e.sortable:!0===e.sortable)}onCheckboxClick(e,t){const i=this.trackRecord(e);t.shiftKey&&this.changeSelectionForRange(i)&&t.preventDefault(),t.stopPropagation()}toggleRowExpansion(e,t){if(t.stopPropagation(),!this.dataSchema.expandableRow)throw new Error("An expandable cell must be set for this operation");this.expansion.toggle(this.trackRecord(e)),this.emitExpandedChange()}onCellValueChange(e,t,i){this.data=this.data,this.cellValueChange.emit({record:e,columnDataSchema:t,value:i})}onItemDrop(e){const t=this.data.indexOf(e.item.data);(0,pm.bA)(this.data,t,e.currentIndex),this.data=this.data;const i={record:e.item.data,newIndex:e.currentIndex,prevIndex:t};this.recordPositionChange.emit(i)}}_t.\u0275fac=function(e){return new(e||_t)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},_t.\u0275cmp=n.\u0275\u0275defineComponent({type:_t,selectors:[["ts-table"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(Cs.YE,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.matSort=i.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n.\u0275\u0275styleProp("min-width",t.minWidth)},inputs:{dataSchema:"dataSchema",selectMode:"selectMode",headerSticky:"headerSticky",showHeader:"showHeader",showSelectAllButton:"showSelectAllButton",sortable:"sortable",sortColumn:"sortColumn",sortDirection:"sortDirection",selectedRowCssClass:"selectedRowCssClass",evenRowCssClass:"evenRowCssClass",minWidthPerColumn:"minWidthPerColumn",enableOrdering:"enableOrdering",dragBoundarySelector:"dragBoundarySelector",rowExpanderPosition:"rowExpanderPosition",selected:"selected",expanded:"expanded",sort:"sort",data:"data",dataSource:"dataSource",eventHandlers:"eventHandlers",config:"config",allRowsSelectState:"allRowsSelectState",allRowsSelectToggleHandler:"allRowsSelectToggleHandler"},outputs:{cellValueChange:"cellValueChange",selectedChange:"selectedChange",sortChange:"sortChange",expandedChange:"expandedChange",recordPositionChange:"recordPositionChange",rowDoubleClick:"rowDoubleClick"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"display","dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy","matSortChange","cdkDropListDropped",4,"ngIf"],["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy","matSortChange","cdkDropListDropped"],[3,"matColumnDef"],[4,"ngIf"],["mat-cell","","class","multi-select-column",4,"matCellDef"],["mat-cell","","class","row-expander-column",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","expandableRow"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled","click","dblclick",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","class","multi-select-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"multi-select-column"],[3,"checked","indeterminate","change"],["mat-cell","",1,"multi-select-column"],[3,"checked","click","change"],["mat-header-cell","","class","row-expander-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"row-expander-column"],["mat-cell","",1,"row-expander-column"],[1,"trigger-button",3,"click"],[3,"ngClass"],[3,"matColumnDef",4,"ngIf"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass"],["mat-cell","",3,"ngClass"],[3,"columnDataSchema","record","eventHandlers","valueChange"],[1,"expandable-row-wrapper"],[3,"columnDataSchema","record","eventHandlers"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-header-row",""],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled","click","dblclick"],["mat-row","","class","expandable-row",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"expandable-row"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,oR,13,15,"table",0),2&e&&n.\u0275\u0275property("ngIf",!t.isDataSchemaEmpty())},styles:["ts-table{display:inline-block;width:100%}ts-table table{width:100%}ts-table table tr.expandable-row{height:auto}ts-table table tr.expandable-row td.expandable-cell-collapsed{border-bottom:hidden}ts-table table tr td,ts-table table tr th{overflow:hidden}ts-table table tr td:not(.multi-select-column,.row-expander-column),ts-table table tr th:not(.multi-select-column,.row-expander-column){width:auto}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-1,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-1{width:4.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-2,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-2{width:8.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-3,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-3{width:12.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-4,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-4{width:16.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-5,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-5{width:20.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-6,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-6{width:25%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-7,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-7{width:29.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-8,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-8{width:33.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-9,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-9{width:37.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-10,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-10{width:41.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-11,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-11{width:45.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-12,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-12{width:50%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-13,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-13{width:54.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-14,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-14{width:58.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-15,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-15{width:62.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-16,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-16{width:66.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-17,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-17{width:70.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-18,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-18{width:75%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-19,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-19{width:79.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-20,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-20{width:83.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-21,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-21{width:87.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-22,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-22{width:91.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-23,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-23{width:95.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-24,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-24{width:100%}ts-table table tr td:not(:first-of-type),ts-table table tr th:not(:first-of-type){padding-left:5px}ts-table table tr td:not(:last-of-type),ts-table table tr th:not(:last-of-type){padding-right:5px}ts-table table tr td.multi-select-column,ts-table table tr th.multi-select-column{padding-right:10px;width:16px!important;text-align:center;overflow:visible!important}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple,ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple{overflow:visible;position:absolute;left:calc(50% - 16px);top:calc(50% - 16px);height:32px;width:32px}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple),ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple){display:none}ts-table table tr td.row-expander-column .trigger-button,ts-table table tr th.row-expander-column .trigger-button{background:none;border:none}ts-table table tr td.row-expander-column .trigger-button:focus,ts-table table tr th.row-expander-column .trigger-button:focus{background:none;border:none;outline:none}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon{background-image:url(\"data:image/svg+xml,%3Csvg id='Component_447' data-name='Component 447' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath id='Path_1315' data-name='Path 1315' d='M7,13,0,6.5,7,0' transform='translate(14.549 4.25) rotate(90)' fill='none' stroke='%23006ce0' stroke-width='1.1'/%3E%3Crect id='Rectangle_6725' data-name='Rectangle 6725' width='16' height='16' fill='none'/%3E%3C/svg%3E%0A\");background-position:center}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon.collapsed,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon.collapsed{transform:rotate(-180deg)}ts-table table tr td .expandable-row-wrapper,ts-table table tr th .expandable-row-wrapper{display:flex}ts-table table tr td .expandable-row-wrapper ts-table-cell-wrapper,ts-table table tr th .expandable-row-wrapper ts-table-cell-wrapper{width:100%;margin:10px 0}ts-table table tr th.ts-value-type-boolean .mat-sort-header-container{justify-content:center;padding-left:21px}ts-table table tr td.ts-value-type-boolean{text-align:center}\n"],encapsulation:2,data:{animation:[(0,_e.X$)("expandableRowTrigger",[(0,_e.SB)("collapsed",(0,_e.oB)({height:"0px",minHeight:"0"})),(0,_e.SB)("expanded",(0,_e.oB)({height:"unset"}))]),(0,_e.X$)("rowExpanderTrigger",[(0,_e.eR)("collapsed <=> expanded",[(0,_e.oB)({transform:"rotate(180deg)",opacity:0})])])]},changeDetection:0});class $t{constructor(){this.getRegisteredEvents=()=>[]}set eventHandlers(e){this._eventHandlers=e,this._validateEventHandlers()}get eventHandlers(){return this._eventHandlers}_stringify(e){const t=[()=>JSON.stringify(e),()=>e.toString()];for(let i=0;i<t.length;i++){const r=t[i];try{return r()}catch{}}return""}_checkEventCanBeHandled(e){const t=this.getRegisteredEvents();if(!t||t.some(s=>s.name===e))return;const i=t.map(s=>s.name).join(", ");let r=`Handler for event "${e}" can not be specified because the event was not registered in table cell class. Registered table column events to subscribe: ${i}.`;throw this.columnDataSchema&&(r+=` Column name: "${this.columnDataSchema.name}".`),new Error(r)}_checkHandlerIsFunction(e,t){if("function"!=typeof t)throw new TypeError(`Handler for event with name "${e}" must be a function, but actual is"${this._stringify(t)}".`)}_validateEventHandlers(){this.eventHandlers&&Object.keys(this.eventHandlers).forEach(t=>{this._checkEventCanBeHandled(t),this._checkHandlerIsFunction(t,this.eventHandlers[t])})}_checkEventDataType(e,t){return e instanceof t||e.constructor===t}_validateFiringEvent(e,t){const i=this._registeredEvents.find(s=>s.name===e);if(!i)throw new Error(`Event with name "${e}" is not registered in the cell class and can not be fired.`);const r=i.dataType;if(t&&(!r||!this._checkEventDataType(t,r)))throw new TypeError(`Type of the data in the event "${e}" must be "${r}", but actual data is "${this._stringify(t)}".`)}_getValidEventHandler(e){const t=this.eventHandlers&&this.eventHandlers[e];if(t)return this._checkHandlerIsFunction(e,t),t}isEmpty(){return!(this.columnDataSchema&&this.record)}fireEvent(e,t){this._validateFiringEvent(e,t);const i=this._getValidEventHandler(e);return i&&i(this.record,t)}ngOnInit(){this._registeredEvents=this.getRegisteredEvents()}getValue(){const e=this.record[this.columnDataSchema.name],t=this.columnDataSchema.formatter;return t?t(e,this.record):e}}function uR(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",7),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",r.getLinkUrl(t))("target",r.getLinkTarget(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.formatTextValue(i))}}function dR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",8),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(o.onLinkClick(r,s))}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("href",r.getLinkUrl(t),n.\u0275\u0275sanitizeUrl)("target",r.getLinkTarget(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.formatTextValue(i))}}function pR(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,uR,3,3,"ng-container",4),n.\u0275\u0275template(2,dR,2,3,"ng-template",null,6,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275reference(3),r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.getIsRouterLink(t))("ngIfElse",i)}}function mR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2).$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(i.formatTextValue(t))}}function hR(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,pR,4,2,"ng-container",4),n.\u0275\u0275template(2,mR,2,1,"ng-template",null,5,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.getLink(i.record))("ngIfElse",t)}}function gR(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-checkbox",9),2&a){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("checked",!!t)}}function fR(a,e){if(1&a&&(n.\u0275\u0275template(0,hR,4,2,"ng-container",0),n.\u0275\u0275template(1,gR,1,1,"mat-checkbox",3)),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.isDisplayedAsText()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isDisplayedAsBoolean())}}$t.\u0275fac=function(e){return new(e||$t)},$t.\u0275dir=n.\u0275\u0275defineDirective({type:$t,inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"}});const _R=function(a){return{$implicit:a}};function yR(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,fR,2,2,"ng-template",1,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275reference(2),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,_R,i.getValue()))("ngTemplateOutlet",t)}}class Ss extends $t{constructor(e,t){super(),this.numberUtils=t,this._textValueTypes=[l.DataValueType.Guid].concat(ot.DateTime).concat(ot.Number).concat(ot.Text).concat(ot.Lookup),this.getRegisteredEvents=()=>[{name:"click"}],this.userCulture=e.cultureInfo.sysCultureName}getLink(e){return this.columnDataSchema.linkGenerator?this.columnDataSchema.linkGenerator(e):""}getLinkUrl(e){return"string"==typeof e?e:e.url}getLinkTarget(e){const t="_self";return"string"==typeof e?t:e.target||t}getIsRouterLink(e){return!!e&&("string"==typeof e||(e.useRouterLink||!1))}onLinkClick(e,t){t&&"string"!=typeof t&&!0===t.preventDefaultClick&&(e.preventDefault(),this.fireEvent("click"))}isDisplayedAsText(){return!this.columnDataSchema.valueType||-1!==this._textValueTypes.indexOf(this.columnDataSchema.valueType)}isDisplayedAsBoolean(){return this.columnDataSchema.valueType===l.DataValueType.Boolean}formatTextValue(e){if(null==e)return"";switch(this.columnDataSchema.valueType){case l.DataValueType.Date:return e.toLocaleDateString(this.userCulture);case l.DataValueType.Time:return e.toLocaleTimeString(this.userCulture);case l.DataValueType.DateTime:return e.toLocaleString(this.userCulture);case l.DataValueType.Integer:return this.numberUtils.formatNumberValue(e,new ln({precision:0}));case l.DataValueType.Float:case l.DataValueType.Money:return this.numberUtils.formatNumberValue(e);case l.DataValueType.FLOAT1:return this.numberUtils.formatNumberValue(e,new ln({precision:1}));case l.DataValueType.FLOAT2:return this.numberUtils.formatNumberValue(e,new ln({precision:2}));case l.DataValueType.FLOAT3:return this.numberUtils.formatNumberValue(e,new ln({precision:3}));case l.DataValueType.FLOAT4:return this.numberUtils.formatNumberValue(e,new ln({precision:4}));case l.DataValueType.FLOAT8:return this.numberUtils.formatNumberValue(e,new ln({precision:8}));case l.DataValueType.IMAGELOOKUP:case l.DataValueType.Lookup:{const i=e;return i?.displayValue||i?.value}case l.DataValueType.LOCALIZABLE_STRING:return e&&e.getValue(this.userCulture);default:return e}}}Ss.\u0275fac=function(e){return new(e||Ss)(n.\u0275\u0275directiveInject(Q),n.\u0275\u0275directiveInject(kn))},Ss.\u0275cmp=n.\u0275\u0275defineComponent({type:Ss,selectors:[["ts-table-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["t",""],["disabled","true",3,"checked",4,"ngIf"],[4,"ngIf","ngIfElse"],["textBlock",""],["hyperlinkBlock",""],[3,"routerLink","target"],[3,"href","target","click"],["disabled","true",3,"checked"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,yR,3,4,"ng-container",0),2&e&&n.\u0275\u0275property("ngIf",!t.isEmpty())},dependencies:[y.NgIf,y.NgTemplateOutlet,Se.FC,Ou.rH],encapsulation:2});class bs extends $t{constructor(){super(...arguments),this.valueChange=new n.EventEmitter}setRecordValue(e){this.record[this.columnDataSchema.name]=e}setValue(e){this.setRecordValue(e),this.valueChange.emit(e)}}bs.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(bs)))(t||bs)}}(),bs.\u0275dir=n.\u0275\u0275defineDirective({type:bs,outputs:{valueChange:"valueChange"},features:[n.\u0275\u0275InheritDefinitionFeature]});var _D=f(5365);const CR=["angularTreeGrid"];class cf{constructor(){this._config={id_field:"id",parent_id_field:"parent",parent_display_field:"name",data_loading_text:"",row_class_function:null,css:{expand_class:"right-arrow",collapse_class:"down-arrow"},columns:[]},this._notImplementedContracts=["sortable","valueType","linkGenerator","sortingDataAccessor"],this.data=[]}set primaryColumn(e){this._config.id_field=e}set parentColumn(e){this._config.parent_id_field=e}set primaryDisplayColumn(e){this._config.parent_display_field=e}get config(){return this._config}_validateTreeTableColumnContract(e){const t=Object.getOwnPropertyNames(e);this._notImplementedContracts.forEach(i=>{if(-1!==t.indexOf(i))throw new Error(`Contract "${i}" in TreeTableColumnDataSchema not implemented.`)})}_rowLevelClassGenerator(e){return e.leaf?"leaf-level":"root-level"}_setColumnsConfig(e){const t=e.map(i=>(this._validateTreeTableColumnContract(i),{name:i.name,header:i.caption,css_class:"tree-table-column-"+i.name,renderer:i.formatter}));this._config.columns=t}_setRowCssClassGenerator(e){if(!this.dataSchema?.rowCssClass)return void(this._config.row_class_function=this._rowLevelClassGenerator);const t="function"==typeof this.dataSchema?.rowCssClass?this.dataSchema.rowCssClass:i=>this.dataSchema.rowCssClass;this._config.row_class_function=i=>[this._rowLevelClassGenerator(i),t(i)].join(" ")}get dataSchema(){return this._dataSchema}set dataSchema(e){this._dataSchema=e,e&&this._setColumnsConfig(e.columns),this._setRowCssClassGenerator(e)}collapseAll(){this.angularTreeGrid.collapseAll()}expandAll(){this.angularTreeGrid.expandAll()}}cf.\u0275fac=function(e){return new(e||cf)},cf.\u0275cmp=n.\u0275\u0275defineComponent({type:cf,selectors:[["ts-tree-table"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(CR,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.angularTreeGrid=i.first)}},inputs:{primaryColumn:"primaryColumn",parentColumn:"parentColumn",primaryDisplayColumn:"primaryDisplayColumn",data:"data",dataSchema:"dataSchema"},decls:2,vars:2,consts:[[1,"tree-table",3,"data","configs"],["angularTreeGrid",""]],template:function(e,t){1&e&&n.\u0275\u0275element(0,"db-angular-tree-grid",0,1),2&e&&n.\u0275\u0275property("data",t.data)("configs",t.config)},dependencies:[_D.oX],styles:['ts-tree-table .tree-table table.db-tree-view{border:0;width:100%}ts-tree-table .tree-table .db-tree-view thead tr th,ts-tree-table .tree-table .db-tree-view tbody tr td{border-left-width:0;border-right-width:0;border-top-width:0}ts-tree-table .tree-table .db-tree-view thead tr th{font:400 13px/17px Bpmonline Open Sans,Regular,sans-serif;color:#999;font-size:13px;text-align:left}ts-tree-table .tree-table .db-tree-view tbody tr{line-height:normal}ts-tree-table .tree-table .db-tree-view tbody tr td{font:400 14px/19px Bpmonline Open Sans,Regular,sans-serif;font-size:14px;color:#000000de}ts-tree-table .tree-table .db-tree-view .root-level td:first-child{padding-left:10px}ts-tree-table .tree-table .db-tree-view .leaf-level{background:#fcfcfc 0% 0% no-repeat padding-box}ts-tree-table .tree-table .db-tree-view .leaf-level td:first-child{padding-left:25px}ts-tree-table .tree-table .right-arrow:before{color:#006ce0;border-style:solid;border-width:1px 1px 0 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}ts-tree-table .tree-table .down-arrow:before{color:#006ce0;border-style:solid;border-width:0 1px 1px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}\n'],encapsulation:2});const SR=["tableCell"];class mm{constructor(){this.valueChange=new n.EventEmitter}_generateTableCell(e){this.tableCell.clear();const t=this.tableCell.createComponent(e),i=t.instance;if(e!==Ss&&!(i instanceof $t))throw new TypeError("Value of property `cellComponentClass` must be a component class inherited from `BaseTableCellComponent`");return t}_updateTableCell(){const e=this.columnDataSchema.cellComponentClass||Ss;(!this._cellComponentRef||!(this._cellComponentRef.instance instanceof e))&&(this._cellComponentRef=this._generateTableCell(e));const t=this._cellComponentRef.instance;t.columnDataSchema=this.columnDataSchema,t.record=this.record,t.eventHandlers=this.eventHandlers,t instanceof bs&&t.valueChange.subscribe(i=>this.valueChange.emit(i)),this._cellComponentRef.changeDetectorRef.detectChanges()}ngOnChanges(e){!this.record||!this.columnDataSchema||!(e.record||e.columnDataSchema||e.eventHandlers&&!(0,J.Z)(e.eventHandlers.previousValue,e.eventHandlers.currentValue))||this._updateTableCell()}}mm.\u0275fac=function(e){return new(e||mm)},mm.\u0275cmp=n.\u0275\u0275defineComponent({type:mm,selectors:[["ts-table-cell-wrapper"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(SR,7,n.ViewContainerRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.tableCell=i.first)}},inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"},outputs:{valueChange:"valueChange"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["tableCell",""]],template:function(e,t){1&e&&n.\u0275\u0275element(0,"span",null,0)},encapsulation:2});class oi{}oi.\u0275fac=function(e){return new(e||oi)},oi.\u0275mod=n.\u0275\u0275defineNgModule({type:oi}),oi.\u0275inj=n.\u0275\u0275defineInjector({imports:[_D.jA,y.CommonModule,pm._t,U.yu,A.Ps,Se.Zh,Cs.JX,We.U5,Ou.Bz,w.aw]}),n.\u0275\u0275setComponentScope(_t,[y.NgClass,y.NgForOf,y.NgIf,pm.Wj,pm.Zt,A.Hw,Se.FC,Cs.YE,Cs.nU,We.ty,We.wO,We.S4,We.t3,We.R3,We.Al,We.L7,We.ML,We.fg,We.Zw,mm],[]);const bR=["detailTableWrapper"];class hm{constructor(){this.tableEventHandlers={},this.dataChange=new n.EventEmitter,this.tableDataSource=this.createTableDataSource()}set data(e){e=e||[],this.tableDataSource.data=e,this.onDataSourceSet(e)}get data(){return this.tableDataSource.data}get readonly(){return this._readonly}set readonly(e){this._readonly!==e&&(this._readonly=e,this.onReadonlySet(e))}createTableDataSource(){return new We.r4}applyDataBinding(){const e=this.tableDataSource.data;this.tableDataSource.data=e}addRowSilent(e){this.data.push(e)}addRow(e){this.addRows(e)}addRows(...e){e.forEach(t=>this.addRowSilent(t)),this.applyDataBinding()}deleteRowSilent(e){const t=this.data,i=t.findIndex(r=>r===e);-1!==i&&t.splice(i,1)}deleteRow(e){this.deleteRows(e)}deleteRows(...e){e.forEach(t=>this.deleteRowSilent(t)),this.applyDataBinding()}onDataSourceSet(e){}checkTableIsNotEmpty(){if(!this.table)throw new Error("Table detail should contain an instance of `TableComponent`.")}onReadonlySet(e){}processRowsBeforeAdd(...e){return e}processRowsBeforeDelete(...e){return e}ngOnInit(){this.readonly=!1}fireChangeEvent(){this.dataChange.emit(this.data)}isEmpty(){return this.checkTableIsNotEmpty(),this.table.isEmpty()}onAddRow(e){this.onAddRows(e)}onAddRows(...e){if(this.readonly)return;const t=this.processRowsBeforeAdd(...e);this.addRows(...t),t?.length>0&&this.fireChangeEvent()}onDeleteRow(e){this.onDeleteRows(e)}onDeleteRows(...e){if(this.readonly)return;const t=this.processRowsBeforeDelete(...e);this.deleteRows(...t),t?.length>0&&this.fireChangeEvent()}onDeleteSelected(){this.checkTableIsNotEmpty(),this.onDeleteRows(...this.table.selected)}isDeleteSelectedButtonVisible(){return!this.readonly&&(this.checkTableIsNotEmpty(),this.table.isAnyRecordSelected())}}hm.\u0275fac=function(e){return new(e||hm)},hm.\u0275dir=n.\u0275\u0275defineDirective({type:hm,viewQuery:function(e,t){if(1&e&&(n.\u0275\u0275viewQuery(_t,7),n.\u0275\u0275viewQuery(bR,7)),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.table=i.first),n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.detailTableWrapper=i.first)}},inputs:{data:"data",isLoading:"isLoading",readonly:"readonly"},outputs:{dataChange:"dataChange"}});class gm extends hm{set sort(e){this._sort!==e&&(this._sort=e,this.tableDataSource&&e&&(this.tableDataSource.sort=e))}isEmpty(){const e=this.tableDataSource;return!this.isLoading&&(0===e.data.length||0===e.filteredData.length)}}gm.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(gm)))(t||gm)}}(),gm.\u0275dir=n.\u0275\u0275defineDirective({type:gm,viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(Cs.YE,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.sort=i.first)}},features:[n.\u0275\u0275InheritDefinitionFeature]});var vR=f(36321);const IR=new n.InjectionToken("Component selector in the shadow root of which overlay container will be injected"),DR=new n.InjectionToken("Selector of an element in the component into which the overlay container will be injected");class fm extends Rn.Xj{constructor(e,t,i="",r=""){super(e,t),this._platform=t,this._componentSelector=i,this._containerSelector=r}_getContainerRootElement(){const e=this._document.querySelector(this._componentSelector),t=e&&e.shadowRoot;return t&&t.querySelector(this._containerSelector)||this._document.body}getContainerElement(){const e=super.getContainerElement(),t=this._getContainerRootElement();return t.querySelector("."+e.className)||t.appendChild(e),e}}fm.\u0275fac=function(e){return new(e||fm)(n.\u0275\u0275inject(y.DOCUMENT),n.\u0275\u0275inject(vR.t4),n.\u0275\u0275inject(IR),n.\u0275\u0275inject(DR))},fm.\u0275prov=n.\u0275\u0275defineInjectable({token:fm,factory:fm.\u0275fac});const yD=new n.InjectionToken("Represents a set of configuration properties for getting resources");class Xi{constructor(e,t){this._customEventService=e,this._destroyed$=new u.Subject,this._defaultResources=this._getSafeResources(t.defaultResources),this._setResourcesEventName=t.setResourcesEventName,this._getResourcesEventName=t.getResourcesEventName}_getSafeResources(e){return(e=e||{}).localizableStrings=e.localizableStrings||{},e}getResources(){const e=new u.ReplaySubject;return this._customEventService.subscribe(this._setResourcesEventName).pipe((0,Ee.q)(1),(0,h.U)(t=>this._getSafeResources(t)),(0,h.U)(t=>(0,Dn.Z)(this._defaultResources,t)),(0,L.R)(this._destroyed$)).subscribe(t=>{e.next(t),e.complete()}),this._customEventService.createOutboundChannel(this._getResourcesEventName).next({}),e}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Xi.\u0275fac=function(e){return new(e||Xi)(n.\u0275\u0275inject(Ye),n.\u0275\u0275inject(yD))},Xi.\u0275prov=n.\u0275\u0275defineInjectable({token:Xi,factory:Xi.\u0275fac});class vs{constructor(){this._eventEmitter=new n.EventEmitter(!1)}emit(e){this._eventEmitter.emit(e)}subscribe(e){return this._eventEmitter.subscribe(e)}}vs.\u0275fac=function(e){return new(e||vs)},vs.\u0275prov=n.\u0275\u0275defineInjectable({token:vs,factory:vs.\u0275fac});class Is extends k_{processErrorMessage(e){this._dialogService.openInfoDialog(e)}constructor(e){super(),this._dialogService=e}}Is.\u0275fac=function(e){return new(e||Is)(n.\u0275\u0275inject(Ce))},Is.\u0275prov=n.\u0275\u0275defineInjectable({token:Is,factory:Is.\u0275fac});class rc extends $d{constructor(e,t,i){super(),this._snackBar=t,this._maskService=i,this._errorHandler=new Is(e)}_handleRequestSuccess(e,t){return e.pipe((0,I.b)(i=>{const{success:r}=i||{};(r||void 0===r)&&t()}))}_handleRequestsSuccess(e,t){let i=0;return e.map(s=>this._handleRequestSuccess(s,()=>{i++,i===e.length&&this.showSuccessMessage(t)}))}_handleRequestsFinished(e,t){const i=e.slice(),s=o=>{const c=i.indexOf(o);-1!==c&&(i.splice(c,1),0===i.length&&t())};return e.map(o=>o.pipe((0,I.b)(()=>s(o)),(0,Bp.x)(()=>s(o))))}showSuccessMessage(e){this._snackBar.open(e,"",{duration:5e3})}handleError(e,t){return this._errorHandler.handleRequest(e,t)}handleSuccess(e,t){return this._handleRequestSuccess(e,()=>this.showSuccessMessage(t))}applyMask(e,t){this._maskService.showBodyMask({delay:t.maskDelay});let i=!1;return e.pipe((0,I.b)(()=>{this._maskService.hideBodyMask(),i=!0}),(0,Bp.x)(()=>{i||this._maskService.hideBodyMask()}))}handleRequest(e,t={}){let i=this.handleError(e,t);return t.skipBodyMask||(i=this.applyMask(i,t)),t.successMessage&&(i=this.handleSuccess(i,t.successMessage)),i}handleRequests(e,t={}){let i=e.map(r=>this.handleError(r,t));return t.successMessage&&(i=this._handleRequestsSuccess(i,t.successMessage)),t.skipBodyMask||(this._maskService.showBodyMask({delay:t.maskDelay}),i=this._handleRequestsFinished(i,()=>this._maskService.hideBodyMask())),i}}rc.\u0275fac=function(e){return new(e||rc)(n.\u0275\u0275inject(Ce),n.\u0275\u0275inject(x.pl),n.\u0275\u0275inject(an))},rc.\u0275prov=n.\u0275\u0275defineInjectable({token:rc,factory:rc.\u0275fac});class sc{constructor(e){this._window=e,this._defaultBlinkInterval=500,this._defaultBlinkPrefix="*"}_getBlinkConfig(e){const t=this._window.document,i=e?.title||t.title;return{title:i,blinkTitle:e?.blinkTitle||`${this._defaultBlinkPrefix}${i}`,blinkInterval:e?.blinkInterval||this._defaultBlinkInterval,blinkOnce:!0===(e||{}).blinkOnce}}_createSyncSubject(){const e=new u.Subject;return(0,u.fromEvent)(this._window,"mousemove").pipe((0,we.P)(),(0,h.U)(t=>null)).subscribe(e),e}blink(e){return(0,u.of)(null)}}sc.\u0275fac=function(e){return new(e||sc)(n.\u0275\u0275inject(se))},sc.\u0275prov=n.\u0275\u0275defineInjectable({token:sc,factory:sc.\u0275fac,providedIn:"root"});class _m{constructor(e,t){this._sysSettingsService=e,this._title=t,this._defaultProductName="Creatio",this._productNameSysSettingsCode="ProductName"}_getProductName(){var e=this;return(0,_.Z)(function*(){const t=yield e._sysSettingsService.getByCode(e._productNameSysSettingsCode);return t?t.value:e._defaultProductName})()}setTitleAsync(e=""){var t=this;return(0,_.Z)(function*(){const i=yield t._getProductName(),r=e?[e,i].join(" - "):i;t._title.setTitle(r)})()}setTitle(e=""){this.setTitleAsync(e).then()}}_m.\u0275fac=function(e){return new(e||_m)(n.\u0275\u0275inject(l.SysSettingsService),n.\u0275\u0275inject(k.Title))},_m.\u0275prov=n.\u0275\u0275defineInjectable({token:_m,factory:_m.\u0275fac,providedIn:"root"});class wR{}class ym{constructor(e,t){this._translateService=e,this._passwordValidationRuleProvider=t,this._validationRules=[],this._initValidationRules()}_initValidationRules(){this._passwordValidationRuleProvider.getPasswordValidationRules().pipe((0,u.take)(1)).subscribe(e=>{this._validationRules=e})}validate(e){return this._validationRules.map(t=>({valid:t.pattern.test(e),caption:this._translateService.instant(t.message,t.interpolateParams)}))}getDefaultValidationRules(){return this._validationRules.map(e=>({valid:null,caption:this._translateService.instant(e.message,e.interpolateParams)}))}}ym.\u0275fac=function(e){return new(e||ym)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(wR))},ym.\u0275prov=n.\u0275\u0275defineInjectable({token:ym,factory:ym.\u0275fac,providedIn:"root"});class uf{open(e){return(0,u.of)({})}}const ER=new n.InjectionToken("GtmModuleName");class oc{set model(e){this._model!==e&&(this._model=e,this.onModelSet(e))}get model(){return this._model}constructor(e){this.injector=e,this._destroyedSubject=new u.Subject,this.destroyed$=this._destroyedSubject.asObservable(),this.hasLoadingError=!1,this.isLoading=!0,this.injectDependencies(),this._model=this.createEmptyModel()}injectDependencies(){this.dialogService=this.injector.get(Ce),this.googleTagManagerService=this.injector.get(br),this.window=this.injector.get(se),this.gtmModuleName=this.injector.get(ER,""),this._translateService=this.injector.get(w.sK),this.scrollToBottomObserverFactory=this.injector.get(Ln),this._restHandler=this.injector.get($d,null)}createEmptyModel(){return{}}onModelSet(e){}onPageLoadErrorDialogClosed(e){this.close()}onPageDataLoadError(e){this.dialogService.openInfoDialog(e.message).subscribe(t=>{this.onPageLoadErrorDialogClosed(t)})}applyPageLoadUnsuccessfulResponse(e){this.sendGtmAction(this.getPageOpenErrorGtmData()),this.model=this.createEmptyModel(),this.hideBodyMask(),this.hasLoadingError=!0,e&&e.errorInfo&&this.onPageDataLoadError(e.errorInfo)}applyPageLoadSuccessfulResponse(e){this.hasLoadingError=!1;const t=this.getModelFromLoadResponse(e);this.model=this.preProcessLoadedPageModel(t),this.sendGtmAction(this.getPageOpenGtmData())}applyPageLoadResponse(e){e&&e.success?this.applyPageLoadSuccessfulResponse(e):this.applyPageLoadUnsuccessfulResponse(e)}beforeInitialPageDataLoading(){}beforePageDataReloading(){}beforePageDataLoading(){}afterInitialPageDataLoaded(){}afterPageDataReloaded(){}afterPageDataLoaded(){}executePageDataLoading(e){return this.beforePageDataLoading(),this.showBodyMask(),e().pipe((0,L.R)(this.destroyed$),(0,Ee.q)(1),(0,I.b)(i=>{this.hideBodyMask(),i=this.preProcessPageLoadingResponse(i),this.applyPageLoadResponse(i),this.afterPageDataLoaded()}),(0,ee.B)())}loadInitialPageData(){this.beforeInitialPageDataLoading();const e=this.executePageDataLoading(()=>this.requestInitialPageData());return e.subscribe(()=>this.afterInitialPageDataLoaded()),e}preProcessPageLoadingResponse(e){return e}preProcessLoadedPageModel(e){return e}requestInitialPageData(){return this.requestPageData()}requestPageDataOnReload(){return this.requestPageData()}getDefaultGtmData(){return{moduleName:this.gtmModuleName,schemaName:this.getGtmSchemaName()}}getPageOpenGtmData(){return{action:"PageOpen"}}getPageOpenErrorGtmData(){return{action:"PageOpenError"}}sendGtmAction(e){const t=this.getDefaultGtmData();e&&t&&t.moduleName&&t.schemaName&&this.googleTagManagerService.track((0,Dn.Z)(t,e))}hideBodyMask(){this.isLoading=!1}showBodyMask(){this.isLoading=!0}translateInstant(e,t){return void 0===t?this._translateService.instant(e):this._translateService.instant(e,t)}translateAsync(e,t){return void 0===t?this._translateService.get(e):this._translateService.get(e,t)}handleRequest(e,t){return this._restHandler.handleRequest(e,t)}reloadPageData(){this.beforePageDataReloading();const e=this.executePageDataLoading(()=>this.requestPageDataOnReload());return e.subscribe(()=>this.afterPageDataReloaded()),e}openDialog(e,t){return(t=t||{}).data=t.data||{},t.data.gtmData=(0,Dn.Z)(t.data.gtmData,this.getDefaultGtmData()),this.dialogService.open(e,t)}openInfoDialog(e){return this.dialogService.openInfoDialog(e).pipe((0,L.R)(this.destroyed$))}openConfirmationDialog(e,t,i){const r=this.dialogService.openConfirmationDialog(e).pipe((0,L.R)(this.destroyed$),(0,ee.B)());return t&&r.pipe((0,P.h)(s=>s===Fh.result)).subscribe(t),i&&r.pipe((0,P.h)(s=>s===xb.result)).subscribe(i),r}ngOnInit(){this.loadInitialPageData()}ngOnDestroy(){this._destroyedSubject.next(),this._destroyedSubject.complete()}closeButtonVisible(){return!0}}oc.\u0275fac=function(e){return new(e||oc)(n.\u0275\u0275directiveInject(n.Injector))},oc.\u0275dir=n.\u0275\u0275defineDirective({type:oc});class df extends oc{get isChanged(){return this._isChanged}set isChanged(e){this.setIsChanged(e)}preProcessLoadedPageModel(e){return this.modelSnap=this.cloneModel(super.preProcessLoadedPageModel(e)),e}loadModelFromSnap(){this.model=this.cloneModel(this.modelSnap)}injectDependencies(){super.injectDependencies(),this.location=this.injector.get(y.Location)}preProcessModelForSave(e){return e}createChangeBroadcastService(){return this.injector.get(vs)}getDefaultSaveGtmData(){return{}}getSaveSuccessGtmData(){return(0,Dn.Z)(this.getDefaultSaveGtmData(),{action:"Save"})}getSaveErrorGtmData(){return(0,Dn.Z)(this.getDefaultSaveGtmData(),{action:"SaveError"})}preProcessSaveResponse(e){return e}canShowUnsuccessfulSaveMessage(){return!0}applySaveUnsuccessfulResponse(e,t){this.sendGtmAction(this.getSaveErrorGtmData()),this.hideBodyMask(),this.canShowUnsuccessfulSaveMessage()&&t&&t.errorInfo&&this.openInfoDialog(t.errorInfo.message)}applySaveSuccessfulResponse(e,t){this.sendGtmAction(this.getSaveSuccessGtmData()),this.modelSnap=this.cloneModel(e),this.isChanged=!1,this.changeBroadcastService&&this.changeBroadcastService.emit(this.model)}cloneModel(e){return(0,q.Z)(e)}applySaveResponse(e,t){t&&t.success?this.applySaveSuccessfulResponse(e,t):this.applySaveUnsuccessfulResponse(e,t)}executeSave(){const e=this.preProcessModelForSave(this.model),t=this.savePageData(e).pipe((0,ee.B)());return t.subscribe(i=>{i=this.preProcessSaveResponse(i),this.applySaveResponse(e,i)}),t}closeAfterSave(){this.goBackToSection()}recordSaved(e){e&&e.success&&this.closePageAfterSave&&this.closeAfterSave()}goBackToSection(){this.location.back()}isModelValid(){return Boolean(this.model)}constructor(e){super(e),this.closePageAfterSave=!0,this._isChanged=!1,this.changeBroadcastService=this.createChangeBroadcastService()}setIsChanged(e=!0){this._isChanged=e}cancel(){this.loadModelFromSnap(),this.isChanged=!1}saveAsync(){this.showBodyMask();const e=this.executeSave().pipe((0,ee.B)());return e.subscribe(t=>{this.hideBodyMask(),this.recordSaved(t)}),e}save(){const e=this.saveAsync();return e.subscribe(),e}saveButtonVisible(){return this.isChanged&&!this.hasLoadingError}saveButtonEnabled(){return this.isModelValid()}cancelButtonVisible(){return this.saveButtonVisible()}closeButtonVisible(){return super.closeButtonVisible()&&!this.saveButtonVisible()}close(){1!==this.window.history.length?this.goBackToSection():this.window.close()}}df.\u0275fac=function(e){return new(e||df)(n.\u0275\u0275directiveInject(n.Injector))},df.\u0275dir=n.\u0275\u0275defineDirective({type:df,features:[n.\u0275\u0275InheritDefinitionFeature]});class XC extends We.r4{constructor(e=[]){super(e),this._visibleContentSize=0,this._pageSize=40,this.resetVisibleContentSize()}resetVisibleContentSize(){this._visibleContentSize=this._pageSize}loadNext(){this._visibleContentSize+=this._pageSize,this._updateChangeSubscription()}_pageData(e){return this._visibleContentSize>=e.length?e:e.slice(0,this._visibleContentSize)}}class Cm extends oc{constructor(){super(...arguments),this._selected$=new u.Subject,this.searchKeyValue="",this.searchSettingsValue=this.getDefaultSearchSettings(),this.selected$=this._selected$.asObservable()}get tableDataSource(){return this._tableDataSource}set searchKey(e){this.searchKeyValue=e,this.onSearchKeySet(e)}get searchKey(){return this.searchKeyValue}set searchSettings(e){this.searchSettingsValue=e,this.onSearchSettingsSet(e)}get searchSettings(){return this.searchSettingsValue}set sort(e){this._sort!==e&&(this._sort=e,this.tableDataSource&&e&&(this.tableDataSource.sort=e))}get sort(){return this._sort}set dataSchema(e){this.checkTableIsNotEmpty(),this.table.dataSchema=e}get dataSchema(){return this.checkTableIsNotEmpty(),this.table.dataSchema}set selected(e){this.checkTableIsNotEmpty(),this.table.selected=e,this._selected$.next(e)}get selected(){return this.checkTableIsNotEmpty(),this.table.selected}set selectMode(e){this.checkTableIsNotEmpty(),this.table.selectMode=e}get selectMode(){return this.checkTableIsNotEmpty(),this.table.selectMode}_getSearchSettingsColumnSelectors(){const e=this.getSearchSettingsColumnDescriptors(),t=this.searchSettings.columns;return e&&t?e.filter(r=>t.includes(r.name)).map(r=>r.selector??r.name):[]}getDefaultSearchSettings(){return{searchStrategy:Mt.Contains,columns:[]}}getSearchSettingsColumnDescriptors(){return[]}createEmptyModel(){return[]}onModelSet(e){e=e||[],super.onModelSet(e),this.tableDataSource&&(this.tableDataSource.data=e),this.resetVisibleContent()}injectDependencies(){super.injectDependencies(),this.userProfileService=this.injector.get(dl)}beforePageDataLoading(){this.tableDataSource.resetVisibleContentSize(),super.beforePageDataLoading()}createEqualityPredicate(){return(e,t)=>e===t}createSearchPredicate(){return Xb(this.getStaticSearchColumns().concat(this._getSearchSettingsColumnSelectors()),this.searchSettings.searchStrategy)}createChangeBroadcastService(){return this.injector.get(vs)}updateRecord(e,t){Object.assign(e,t)}applySearchSettings(){const e=this.createSearchPredicate();e&&this.tableDataSource&&(this.tableDataSource.filterPredicate=e)}initSelectedChange(){this.checkTableIsNotEmpty(),this.table.selectedChange.subscribe(e=>{this._selected$.next(e),this.onSelectedChanged(e)})}initTableComponent(){this.dataSchema=this.getDefaultDataSchema(),this.selectMode=this.getDefaultSelectMode(),this.initSelectedChange()}initTableDataSource(){this.setTableDataSource(new XC(this.model)),this.applySearchSettings()}onSelectedChanged(e){}onRecordChanged(e,t){e&&this.updateRecord(e,t)}initChangeBroadcastSubscription(){const e=this.createEqualityPredicate();e&&(this.changeBroadcastService=this.createChangeBroadcastService(),this.changeBroadcastService.subscribe(t=>{const i=this.model.find(r=>e(r,t));this.onRecordChanged(i,t)}))}loadNextData(){this.tableDataSource&&this.tableDataSource.loadNext()}getProfileData(){const e={searchKey:this.searchKey};return(0,J.Z)(this.searchSettings,this.getDefaultSearchSettings())||(e.searchSettings=this.searchSettings),e}applyProfileData(e){e.searchSettings&&(this.searchSettingsValue=e.searchSettings,this.applySearchSettings()),e.searchKey&&(this.searchKeyValue=e.searchKey,this.applySearchKey())}loadUserProfileData(){const e=this.userProfileService.getProfile(this.getProfileDataKey()).pipe((0,ee.B)());return e.subscribe(t=>{t&&this.applyProfileData(t)}),e}saveUserProfileData(){const e=this.getProfileData(),t=this.userProfileService.saveProfile(this.getProfileDataKey(),e).pipe((0,ee.B)());return t.subscribe(),t}resetVisibleContent(){!this.scrollPageToBottomObserver||!this.tableDataSource||(this.scrollPageToBottomObserver.resetScrollMaxPosition(),this.tableDataSource.resetVisibleContentSize())}applySearchKey(){this.tableDataSource.filter=this.searchKey&&this.searchKey.trim().toLowerCase()}onSearchKeySet(e){this.applySearchKey(),this.onSearchConditionsChanged()}onSearchSettingsSet(e){this.applySearchSettings(),this.applySearchKey(),this.onSearchConditionsChanged()}onSearchConditionsChanged(){this.resetVisibleContent(),this.saveUserProfileData()}initScrollToBottomObserver(){this.scrollPageToBottomObserver=this.scrollToBottomObserverFactory.createObserver(this.window,this.loadNextData.bind(this))}setTableDataSource(e){this.checkTableIsNotEmpty(),this.table.dataSource=e,this._tableDataSource=e}getSearchSettingsColumnCaption(e){let t=e.caption;if(!t&&this.dataSchema&&(t=this.dataSchema.columns.find(i=>i.name===e.name)?.caption),!t)throw new Error(`Caption used for search settings of column "${e.name}" is not specified. Please specify it in search columns descriptor or table data schema.`);return t}checkTableIsNotEmpty(){if(!this.table)throw new Error("Section page should contain an instance of `TableComponent`.")}ngOnInit(){this.initTableComponent(),this.initTableDataSource(),this.initChangeBroadcastSubscription(),this.loadUserProfileData().subscribe(()=>{super.ngOnInit()})}ngAfterViewInit(){this.initScrollToBottomObserver()}ngOnDestroy(){super.ngOnDestroy(),this.scrollPageToBottomObserver&&this.scrollPageToBottomObserver.destroy()}isEmpty(){return this.checkTableIsNotEmpty(),!this.isLoading&&this.table.isEmpty()}getSearchInputColumnConfigs(){return(this.getSearchSettingsColumnDescriptors()??[]).map(t=>({caption:this.getSearchSettingsColumnCaption(t),name:t.name}))}areFiltersEmpty(){return!this.searchKey}close(){const e=this.window.location.href;this.window.history.back(),setTimeout(()=>{this.window.location.href===e&&this.window.close()},200)}}Cm.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Cm)))(t||Cm)}}(),Cm.\u0275dir=n.\u0275\u0275defineDirective({type:Cm,viewQuery:function(e,t){if(1&e&&(n.\u0275\u0275viewQuery(Cs.YE,5),n.\u0275\u0275viewQuery(_t,7)),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.sort=i.first),n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.table=i.first)}},features:[n.\u0275\u0275InheritDefinitionFeature]});class TR{}class pf{constructor(){this._value=new TR,this.valueChange=new n.EventEmitter}get startDate(){return this._startDate}set startDate(e){e.isSame(this._startDate)||(this._value.startDate=e.toDate(),this._startDate=e)}get endDate(){return this._endDate}set endDate(e){e.isSame(this._endDate)||(this._value.endDate=e.toDate(),this._endDate=e)}set value(e){const t={startDate:zE(e.startDate),endDate:Bb(e.endDate)};this._value=t,this._startDate=Bn()(t.startDate),this._endDate=Bn()(t.endDate)}get value(){return this._value}onValueChanged(){this.value.endDate=Bb(this.value.endDate),this.valueChange.emit(this.value)}}function PR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.title)}}pf.\u0275fac=function(e){return new(e||pf)},pf.\u0275cmp=n.\u0275\u0275defineComponent({type:pf,selectors:[["ts-date-range"]],inputs:{startDateRequired:"startDateRequired",endDateRequired:"endDateRequired",maxDate:"maxDate",value:"value"},outputs:{valueChange:"valueChange"},decls:15,vars:14,consts:[["floatLabel","never",1,"date-picker"],["matInput","",3,"max","matDatepicker","ngModel","disabled","ngModelChange","dateChange"],["matSuffix","",3,"for"],["svgIcon","start-date","matDatepickerToggleIcon","",1,"date-picker-icon"],["disabled","false"],["startDatePicker",""],[1,"period-separator"],["matInput","",3,"min","max","matDatepicker","ngModel","disabled","ngModelChange","dateChange"],["svgIcon","end-date","matDatepickerToggleIcon","",1,"date-picker-icon"],["endDatePicker",""]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"input",1),n.\u0275\u0275listener("ngModelChange",function(r){return t.startDate=r})("dateChange",function(){return t.onValueChanged()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"mat-datepicker-toggle",2),n.\u0275\u0275element(3,"mat-icon",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"mat-datepicker",4,5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"span",6),n.\u0275\u0275text(7),n.\u0275\u0275pipe(8,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"mat-form-field",0)(10,"input",7),n.\u0275\u0275listener("ngModelChange",function(r){return t.endDate=r})("dateChange",function(){return t.onValueChanged()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"mat-datepicker-toggle",2),n.\u0275\u0275element(12,"mat-icon",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(13,"mat-datepicker",4,9),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(5),r=n.\u0275\u0275reference(14);n.\u0275\u0275advance(1),n.\u0275\u0275property("max",t.value.endDate)("matDatepicker",i)("ngModel",t.startDate)("disabled",t.startDateRequired),n.\u0275\u0275advance(1),n.\u0275\u0275property("for",i),n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(8,12,"DateRange.To")),n.\u0275\u0275advance(3),n.\u0275\u0275property("min",t.value.startDate)("max",t.maxDate)("matDatepicker",r)("ngModel",t.endDate)("disabled",t.endDateRequired),n.\u0275\u0275advance(1),n.\u0275\u0275property("for",r)}},dependencies:[b.Fj,b.JJ,b.On,Ne.Mq,Ne.hl,Ne.nW,Ne.Q0,N.v_,N.nX,A.Hw,z.k0,w.X$],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .period-separator[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-top:5px}[_nghost-%COMP%]   .date-picker-icon[_ngcontent-%COMP%]{width:20px!important;height:20px;padding-bottom:4px}[_nghost-%COMP%]   .date-picker-icon[_ngcontent-%COMP%]     svg{width:20px;height:20px}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:-1em}"]});const AR=[[["","header",""]],"*"];class at{get logoLinkUrl(){return at._logoLinkUrl}get logoImageUrl(){return at._logoImageUrl}constructor(e,t){this._environment=e,this._runtimeUrlProvider=t}static setLogoLinkUrl(e){at._logoLinkUrl=e}static setLogoImageUrl(e){at._logoImageUrl=e}buildLogoImageUrl(){return"img/terrasoft.axd?s=nui-binary-syssetting&r=MenuLogoImage&source_hash="+Date.now().toString().slice(0,-5)}initDefaultLogoImageUrl(){at.setLogoImageUrl("assets/app-logo.svg")}ngOnInit(){if(!this.logoLinkUrl){const e=this._runtimeUrlProvider.getUrl();at.setLogoLinkUrl(e)}this.logoImageUrl||at.setLogoImageUrl(y.Location.joinWithSlash(this._environment.workspaceBaseUrl,this.buildLogoImageUrl()))}}var lc;at._logoLinkUrl="",at._logoImageUrl="",at.\u0275fac=function(e){return new(e||at)(n.\u0275\u0275directiveInject("environment"),n.\u0275\u0275directiveInject(Po))},at.\u0275cmp=n.\u0275\u0275defineComponent({type:at,selectors:[["ts-header"]],inputs:{title:"title"},ngContentSelectors:["[header]","*"],decls:10,vars:3,consts:[[1,"top-container"],[1,"left-container"],["class","title",4,"ngIf"],[1,"content-wrapper"],[1,"right-container"],[1,"logo-wrapper",3,"href"],["alt","logo image",1,"logo",3,"src","error"],[1,"content-wrapper","bottom-content-wrapper"],[1,"title"]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(AR),n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,PR,2,1,"span",2),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275projection(4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",4)(6,"a",5)(7,"img",6),n.\u0275\u0275listener("error",function(){return t.initDefaultLogoImageUrl()}),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(8,"div",7),n.\u0275\u0275projection(9,1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.title),n.\u0275\u0275advance(4),n.\u0275\u0275propertyInterpolate("href",t.logoLinkUrl,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("src",t.logoImageUrl,n.\u0275\u0275sanitizeUrl))},dependencies:[y.NgIf],styles:["[_nghost-%COMP%]{display:block;padding:12px 22px 12px 21px}.top-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.top-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;overflow:hidden}.top-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:Bpmonline Open Sans Light,serif;font-size:26px;height:26px}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .logo-wrapper[_ngcontent-%COMP%]{display:block}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .logo-wrapper[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;max-height:28px;max-width:134px}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.content-wrapper[_ngcontent-%COMP%]:not(:empty).top-left-content-wrapper:not(:first-child){padding-left:15px}.content-wrapper[_ngcontent-%COMP%]:not(:empty).bottom-content-wrapper{margin:14px 0 0}"]}),function(a){a.All="0",a.Section="1",a.Lookup="2"}(lc||(lc={}));class mf{constructor(){this.value=lc.All,this.valueChange=new n.EventEmitter}onValueChanged(e){this.value=e.value,this.valueChange.emit(this.value)}}function kR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",14),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}mf.\u0275fac=function(e){return new(e||mf)},mf.\u0275cmp=n.\u0275\u0275defineComponent({type:mf,selectors:[["ts-object-type-filter"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:22,vars:14,consts:[[1,"type-filter"],["disableOptionCentering","true",3,"value","valueChange","selectionChange"],["typeViewFilter",""],[1,"filter-type-caption"],["value","0",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-0"],["value","1",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-1"],["value","2",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-2"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-select",1,2),n.\u0275\u0275listener("valueChange",function(r){return t.value=r})("selectionChange",function(r){return t.onValueChanged(r)}),n.\u0275\u0275elementStart(3,"mat-select-trigger"),n.\u0275\u0275element(4,"span"),n.\u0275\u0275elementStart(5,"span",3),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"mat-option",4),n.\u0275\u0275element(8,"span",5),n.\u0275\u0275elementStart(9,"span"),n.\u0275\u0275text(10),n.\u0275\u0275pipe(11,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(12,"mat-option",6),n.\u0275\u0275element(13,"span",7),n.\u0275\u0275elementStart(14,"span"),n.\u0275\u0275text(15),n.\u0275\u0275pipe(16,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"mat-option",8),n.\u0275\u0275element(18,"span",9),n.\u0275\u0275elementStart(19,"span"),n.\u0275\u0275text(20),n.\u0275\u0275pipe(21,"translate"),n.\u0275\u0275elementEnd()()()()),2&e){const i=n.\u0275\u0275reference(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("value",t.value),n.\u0275\u0275advance(3),n.\u0275\u0275classMapInterpolate1("filter-type-icon filter-type-icon-",t.value,""),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.triggerValue),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(11,8,"ObjectTypeFilter.AllObjects")),n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(16,10,"ObjectTypeFilter.Sections")),n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(21,12,"ObjectTypeFilter.Lookups"))}},dependencies:[Xe.CK,N.v_,et.x8,et.Cb,w.X$],styles:["[_nghost-%COMP%]{line-height:16px;padding:4px 10px 0 0;min-width:100px}.filter-type-icon[_ngcontent-%COMP%]{width:16px;height:16px;background-repeat:no-repeat;margin-right:6px;display:inline-block}.filter-type-icon.filter-type-icon-0[_ngcontent-%COMP%]{background-image:url(filter_objects.svg)}.filter-type-icon.filter-type-icon-1[_ngcontent-%COMP%]{background-image:url(filter_sections.svg)}.filter-type-icon.filter-type-icon-2[_ngcontent-%COMP%]{background-image:url(filter_lookups.svg)}"]});class hf{constructor(e,t){this.entitySchemaService=e,this.data=t,this.isLoading=!1}_prepareEntityColumns(e){e&&e.success?(this.entitySchemaColumns=e.entitySchema.columns,this.entitySchemaColumns.sort((t,i)=>t.caption<i.caption?-1:1),this.data&&this.data.excludeFilter&&(this.entitySchemaColumns=this.entitySchemaColumns.filter(this.data.excludeFilter)),this.isLoading=!1):this.isLoading=!1}ngOnInit(){!this.data||!this.data.entitySchemaUId||(this.isLoading=!0,this.entitySchemaService.getEntitySchemaByUId(this.data.entitySchemaUId).subscribe(this._prepareEntityColumns.bind(this)))}onFilteredEntitySchemaColumnSelected(e){const t=e.option.value;this.selectedColumn=t}getEntitySchemaColumnCaption(e){return e&&e.caption}search(e){e?(e=e.toLowerCase(),this.filteredEntitySchemaColumns=this.entitySchemaColumns.filter(t=>-1!==t.caption.toLowerCase().indexOf(e))):this.filteredEntitySchemaColumns=this.entitySchemaColumns}}hf.\u0275fac=function(e){return new(e||hf)(n.\u0275\u0275directiveInject(Ke),n.\u0275\u0275directiveInject(E.eJ))},hf.\u0275cmp=n.\u0275\u0275defineComponent({type:hf,selectors:[["ts-select-entity-schema-column-dialog"]],decls:22,vars:17,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-actions",""],["mat-flat-button","","color","accent",3,"mat-dialog-close","disabled"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-content",""],["floatLabel","never",1,"entity-schema-column"],["type","text","matInput","",3,"placeholder","matAutocomplete","input","focus"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",1),n.\u0275\u0275element(5,"mat-icon",2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",3)(7,"button",4),n.\u0275\u0275text(8),n.\u0275\u0275pipe(9,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"button",5),n.\u0275\u0275text(11),n.\u0275\u0275pipe(12,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(13,"div",6)(14,"mat-form-field",7)(15,"input",8),n.\u0275\u0275listener("input",function(r){return t.search(r.target.value)})("focus",function(){return t.search("")}),n.\u0275\u0275pipe(16,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(17,"div",9),n.\u0275\u0275element(18,"div",10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(19,"mat-autocomplete",11,12),n.\u0275\u0275listener("optionSelected",function(r){return t.onFilteredEntitySchemaColumnSelected(r)}),n.\u0275\u0275template(21,kR,2,2,"mat-option",13),n.\u0275\u0275elementEnd()()),2&e){const i=n.\u0275\u0275reference(20);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,9,"SelectEntitySchemaColumnDialog.Title")),n.\u0275\u0275advance(5),n.\u0275\u0275property("mat-dialog-close",t.selectedColumn)("disabled",!t.selectedColumn),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(9,11,"SelectEntitySchemaColumnDialog.Select")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(12,13,"SelectEntitySchemaColumnDialog.Cancel")),n.\u0275\u0275advance(4),n.\u0275\u0275property("placeholder",n.\u0275\u0275pipeBind1(16,15,"SelectEntitySchemaColumnDialog.SelectFieldPlaceholder"))("matAutocomplete",i),n.\u0275\u0275advance(4),n.\u0275\u0275property("displayWith",t.getEntitySchemaColumnCaption),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.filteredEntitySchemaColumns)}},dependencies:[y.NgForOf,ce.VN,ce.QJ,Xe.CK,U.eB,E.aO,E.YS,E.Rb,E.ev,N.v_,N.nX,A.Hw,z.k0,w.X$],styles:["[_nghost-%COMP%]{padding:4px 10px 0;min-width:420px;min-height:136px}[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:23px!important}[mat-dialog-content][_ngcontent-%COMP%]   .field-title[_ngcontent-%COMP%]{font-family:Bpmonline Open Sans,serif;color:#444;font-size:14px;line-height:18px;text-align:left}[mat-dialog-content][_ngcontent-%COMP%]   .entity-schema-column[_ngcontent-%COMP%]{width:100%;line-height:19px;font-size:14px}[mat-dialog-content][_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;line-height:18px!important}"]});class cc{}cc.\u0275fac=function(e){return new(e||cc)},cc.\u0275mod=n.\u0275\u0275defineNgModule({type:cc}),cc.\u0275inj=n.\u0275\u0275defineInjector({providers:[kn],imports:[y.CommonModule,b.u5,N.wp,z.x4]});class Sm extends ut{set maxValue(e){this._maxValue=e}set selected(e){this._selected=e}get formattedValue(){return this._formattedValue}constructor(e,t,i,r,s,o){super(e,t,i),this._element=r,this._cdRef=s,this._formatUtility=o,this._formattedValue="",this._selected=!1,this._maxValue=999999999.99,this._maxLargeValue=999999999999,this.controlType="ts-number-input",this.isLargeNumberEnabled=!1,this.inputBlur=new n.EventEmitter,this.precision=2}_updateFormattedValue(){this._formattedValue=this._formatUtility.formatNumberValue(this.innerValue,new ln({precision:this.precision}))}_exceededMaxValue(e){const t=Math.abs(e),i=t%1;return this.isLargeNumberEnabled&&0===i?t>this._maxLargeValue:t>this._maxValue}ngAfterViewInit(){this._selected&&(this._element.nativeElement.lastElementChild.focus(),this._cdRef.detectChanges())}ngOnInit(){this._updateFormattedValue()}onInputValueChange(){this.callChangeHandler()}onInputFocus(){this.innerValue&&(this._formattedValue=this._formatUtility.formatNumberValue(this.innerValue,new ln({ignoreThousandSeparator:!0,precision:this.precision})))}writeValue(e){this.setInnerValueSilent(e),this._updateFormattedValue(),this.stateChanges.next(),this._cdRef.detectChanges()}onBlur(e){this._updateFormattedValue(),e&&(e.currentTarget.value=this._formattedValue),this.inputBlur.emit()}onInput(e){let t=e.currentTarget.value;if(""===t)return this.setInnerValueSilent(0),void(this._formattedValue="");if(t=this._formatUtility.formatStringValue(t),0===this.precision){const r=this._formatUtility.getNumberFormatInfo().decimalSeparator;t=t.replace(new RegExp(`\\${r}$`),"")}e.currentTarget.value=t;let i=this._formatUtility.parseStringToNumber(t,this.precision);"-"===t&&(i=0),(isNaN(i)||this._exceededMaxValue(i))&&(i=this.innerValue,e.currentTarget.value=this._formatUtility.formatNumberValue(i,new ln({ignoreThousandSeparator:!0,precision:this.precision}))),this.setInnerValueSilent(i)}}Sm.\u0275fac=function(e){return new(e||Sm)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(kn))},Sm.\u0275cmp=n.\u0275\u0275defineComponent({type:Sm,selectors:[["ts-number-input"]],inputs:{isLargeNumberEnabled:"isLargeNumberEnabled",maxValue:"maxValue",selected:"selected",precision:"precision"},outputs:{inputBlur:"inputBlur"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:Sm}]),n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["matInput","","dir","ltr",3,"value","disabled","required","change","blur","input","focus"],["input",""]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"input",0,1),n.\u0275\u0275listener("change",function(){return t.onInputValueChange()})("blur",function(r){return t.onBlur(r)})("input",function(r){return t.onInput(r)})("focus",function(){return t.onInputFocus()}),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("value",t.formattedValue)("disabled",t.disabled)("required",t.required)},dependencies:[xe.Lv,z.k0],styles:["input[_ngcontent-%COMP%]{text-align:left;border:0;height:100%;width:100%}input[_ngcontent-%COMP%]:focus{outline-style:none}"],changeDetection:0});class eS{constructor(e){this._overlayRef=e,this.afterClosed$=new u.Subject}_close(e){this._overlayRef.dispose(),this.afterClosed$.next(e),this.afterClosed$.complete()}close(e){this._close(e)}}function NR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-checkbox",8),n.\u0275\u0275listener("change",function(r){const o=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(c.onColumnSelectedChange(o.name,r))}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("checked",i.isColumnSelected(t.name)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(i.getColumnCheckboxCaption(t))}}function VR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,NR,2,2,"mat-checkbox",7),n.\u0275\u0275element(2,"mat-divider"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.columnConfigs)}}function FR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-radio-button",9),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}const CD=new n.InjectionToken("SEARCH_INPUT_SETTINGS_DATA");class bm{constructor(e,t,i){this._settingsOverlayRef=e,this._translateService=t,this.searchStrategyOptions=[{value:Mt.StartsWith,caption:this._translateService.instant("SearchInput.Settings.StartsWith")},{value:Mt.Contains,caption:this._translateService.instant("SearchInput.Settings.Contains")},{value:Mt.Equals,caption:this._translateService.instant("SearchInput.Settings.Equals")}];const r=i?.settings||{};this.settings={searchStrategy:r.searchStrategy??Mt.Contains,columns:r.columns?.slice()??[]},this.columnConfigs=i?.columnConfigs??[]}_setColumnSelected(e,t){const i=this.settings.columns;if(t)i.includes(e)||i.push(e);else{const r=i.indexOf(e);-1!==r&&i.splice(r,1)}}close(){this._settingsOverlayRef.close(null)}apply(){this._settingsOverlayRef.close(this.settings)}isColumnSelected(e){return this.settings.columns.includes(e)}onColumnSelectedChange(e,t){this._setColumnSelected(e,t.checked)}getColumnCheckboxCaption(e){const t=e.caption,i=this._translateService.instant("SearchInput.Settings.SearchColumnTemplate");return Z.Ld.Format(i,t)}}bm.\u0275fac=function(e){return new(e||bm)(n.\u0275\u0275directiveInject(eS),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(CD))},bm.\u0275cmp=n.\u0275\u0275defineComponent({type:bm,selectors:[["ts-search-input-settings"]],decls:11,vars:9,consts:[[1,"search-input-settings-container"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"bottom-actions"],["mat-button","",1,"",3,"click"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],[3,"checked","change",4,"ngFor","ngForOf"],[3,"checked","change"],[3,"value"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,VR,3,1,"div",1),n.\u0275\u0275elementStart(2,"mat-radio-group",2),n.\u0275\u0275listener("ngModelChange",function(r){return t.settings.searchStrategy=r}),n.\u0275\u0275template(3,FR,2,2,"mat-radio-button",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",4)(5,"button",5),n.\u0275\u0275listener("click",function(){return t.close()}),n.\u0275\u0275text(6),n.\u0275\u0275pipe(7,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"button",6),n.\u0275\u0275listener("click",function(){return t.apply()}),n.\u0275\u0275text(9),n.\u0275\u0275pipe(10,"translate"),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.columnConfigs.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngModel",t.settings.searchStrategy),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.searchStrategyOptions),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(7,5,"SearchInput.Settings.Cancel")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(10,7,"SearchInput.Settings.Apply")))},dependencies:[y.NgForOf,y.NgIf,Ft.OY,Ft.vy,b.JJ,b.On,U.eB,Se.FC,$a.d,w.X$],styles:[".search-input-settings-container{background:#ffffff 0% 0% no-repeat padding-box;box-shadow:0 0 3px #0000001a;border:1px solid #e2e2e2;opacity:1;padding:11px;min-width:220px}.search-input-settings-container mat-checkbox{display:block}.search-input-settings-container mat-checkbox,.search-input-settings-container mat-radio-button{margin-left:4px;margin-right:4px}.search-input-settings-container mat-checkbox:not(:first-child),.search-input-settings-container mat-radio-button:not(:first-child){margin-top:8px}.search-input-settings-container mat-divider{margin:14px 0}.search-input-settings-container .bottom-actions{display:flex;justify-content:flex-end;margin:8px 0 4px}.search-input-settings-container .bottom-actions button:not(:first-child){margin-left:12px}\n"],encapsulation:2});const LR={hasBackdrop:!0,backdropClass:"search-settings-backdrop",alignToElementRef:null,data:null};class Ds{constructor(e,t){this._injector=e,this._overlay=t}_getOverlayConfig(e){const i=this._overlay.position().flexibleConnectedTo(e.alignToElementRef).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:6}]);return new Rn.X_({hasBackdrop:e.hasBackdrop,backdropClass:e.backdropClass,panelClass:e.panelClass,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:i})}_createOverlay(e){const t=this._getOverlayConfig(e);return this._overlay.create(t)}_createInjector(e,t){return n.Injector.create({providers:[{provide:eS,useValue:t},{provide:CD,useValue:e.data}]})}_attachContainerPortal(e,t,i){const r=this._createInjector(t,i),s=new y_.C5(bm,null,r);return e.attach(s).instance}openSettingsMenu(e){const t={...LR,...e},i=this._createOverlay(t),r=new eS(i),s=this._attachContainerPortal(i,t,r);return i.backdropClick().subscribe(o=>{s.close()}),r.afterClosed$}}Ds.\u0275fac=function(e){return new(e||Ds)(n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(Rn.aV))},Ds.\u0275prov=n.\u0275\u0275defineInjectable({token:Ds,factory:Ds.\u0275fac});class ea{}ea.\u0275fac=function(e){return new(e||ea)},ea.\u0275mod=n.\u0275\u0275defineNgModule({type:ea}),ea.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ds],imports:[y.CommonModule,Ft.Xo,b.u5,U.yu,Se.Zh,E.yj,$a.t,N.wp,A.Ps,z.x4,w.aw]});const OR=["searchSettingsButton"];function jR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.openSettingsMenu())}),n.\u0275\u0275element(1,"div",8,9),n.\u0275\u0275elementEnd()}}class uc{set value(e){this._value=e,this._emittedValue=e}get value(){return this._value}_emitValueChange(e){this._emittedValue!==e&&(this._emittedValue=e,this.valueChange.emit(e))}_changeSettings(e){e&&!(0,J.Z)(e,this.settings)&&(this.settings=e,this.settingsChange.emit(e))}constructor(e,t){this._translateService=e,this._searchInputSettingsService=t,this._value="",this._valueChangeDebounceTime=500,this._emitValueChangeWithDebounce=(0,dv.Z)(i=>this._emitValueChange(i),this._valueChangeDebounceTime),this.showSettings=!1,this.settings={searchStrategy:Mt.Contains,columns:[]},this.settingsChange=new n.EventEmitter,this.valueChange=new n.EventEmitter,this.columnConfigs=[]}ngOnInit(){this.placeholder||(this.placeholder=this._translateService.instant("SearchInput.Placeholder"))}onValueChanged(e){e!==this._value&&(this._value=e,this._emitValueChangeWithDebounce(e))}onClear(){this._value="",this._emitValueChangeWithDebounce.cancel(),this._emitValueChange("")}openSettingsMenu(){this._searchInputSettingsService.openSettingsMenu({alignToElementRef:this.settingsButton,data:{settings:this.settings,columnConfigs:this.columnConfigs}}).subscribe(e=>this._changeSettings(e))}}uc.\u0275fac=function(e){return new(e||uc)(n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(Ds))},uc.\u0275cmp=n.\u0275\u0275defineComponent({type:uc,selectors:[["ts-search-input"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(OR,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.settingsButton=i.first)}},inputs:{showSettings:"showSettings",value:"value",placeholder:"placeholder",settings:"settings",columnConfigs:"columnConfigs"},outputs:{settingsChange:"settingsChange",valueChange:"valueChange"},ngContentSelectors:["*"],decls:8,vars:5,consts:[["matPrefix","","svgIcon","search",1,"search-icon"],["floatLabel","never",1,"search-container-form-field"],["matInput","","type","text","spellcheck","false","autocomplete","off",1,"search-input-field",3,"placeholder","value","keyup"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close",3,"click"],["svgIcon","close"],["matSuffix","",1,"search-settings-tools"],["mat-icon-button","","matSuffix","","class","search-settings-button",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",1,"search-settings-button",3,"click"],[1,"search-settings-button-icon"],["searchSettingsButton",""]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275element(0,"mat-icon",0),n.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"input",2),n.\u0275\u0275listener("keyup",function(r){return t.onValueChanged(r.target.value)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"button",3),n.\u0275\u0275listener("click",function(){return t.onClear()}),n.\u0275\u0275element(4,"mat-icon",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275projection(6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,jR,3,0,"button",6),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("placeholder",t.placeholder)("value",t.value),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("visibility",t.value?"inherit":"hidden"),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",t.showSettings))},dependencies:[y.NgIf,U.eB,N.v_,N.g4,N.nX,A.Hw,z.k0],styles:["ts-search-input{display:flex}ts-search-input mat-icon[svgicon=search]{width:16px;height:16px;margin-inline-end:6px!important;padding-top:8px!important}ts-search-input .search-container-form-field .mat-form-field-infix,ts-search-input .search-container-form-field .mat-form-field-suffix{display:flex;gap:4px}ts-search-input mat-form-field{flex-grow:1}ts-search-input mat-form-field .mat-form-field-wrapper{margin-bottom:-1em}ts-search-input mat-form-field .mat-form-field-wrapper button.close,ts-search-input mat-form-field .mat-form-field-wrapper .search-settings-button{height:22px!important;width:22px!important;vertical-align:middle!important}ts-search-input mat-form-field .mat-form-field-wrapper button.close mat-icon{display:block;margin:auto}ts-search-input mat-form-field .mat-form-field-wrapper button.close:focus{border:1px solid #c8c8c8}ts-search-input mat-form-field .mat-form-field-wrapper .search-settings-button .search-settings-button-icon{background:url(settings.svg) no-repeat;width:16px;height:16px;margin:auto;display:block}ts-search-input mat-form-field.mat-focused .mat-form-field-label{opacity:0!important}\n"],encapsulation:2});class li{constructor(){this.formulaClick=new n.EventEmitter}set caption(e){this._caption=e}get caption(){return this._caption||this.value}set index(e){this._index=e}get index(){return this._index}set value(e){this._value=e}get value(){return this._value}}var gn;li.\u0275fac=function(e){return new(e||li)},li.\u0275dir=n.\u0275\u0275defineDirective({type:li,inputs:{caption:"caption",index:"index",value:"value"},outputs:{formulaClick:"formulaClick"}}),function(a){a[a.Number=0]="Number",a[a.ColumnOperand=1]="ColumnOperand",a[a.Operator=2]="Operator",a[a.Cursor=3]="Cursor",a[a.Function=4]="Function"}(gn||(gn={}));class dc extends li{constructor(){super()}validateInput(e){return null}getFormulaItemType(){return gn.Cursor}}dc.\u0275fac=function(e){return new(e||dc)},dc.\u0275cmp=n.\u0275\u0275defineComponent({type:dc,selectors:[["ts-formula-cursor-item"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,consts:[[1,"formula-cursor"]],template:function(e,t){1&e&&n.\u0275\u0275element(0,"div",0)},styles:[".formula-cursor,.formula-cursor-hidden{width:2px;height:21px;border-radius:2px;margin-left:-1px;margin-right:-1px;background-color:#84a3e3}.formula-input:focus .formula-cursor,.formula-input:focus .formula-cursor-hidden{animation:1s blink step-end infinite}.formula-cursor-hidden{background-color:transparent}@keyframes blink{0%{background-color:#84a3e3}50%{background-color:transparent}}\n"],encapsulation:2});class pc extends li{constructor(){super()}getFormulaItemType(){return gn.Function}validateInput(e){return!1}handleItemClick(e){this.formulaClick.emit(e)}}pc.\u0275fac=function(e){return new(e||pc)},pc.\u0275cmp=n.\u0275\u0275defineComponent({type:pc,selectors:[["ts-formula-function-item"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-function-item",3,"click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275listener("click",function(r){return t.handleItemClick(r)}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption))},styles:[".formula-function-item[_ngcontent-%COMP%]{padding:0 4px;color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]});class mc extends li{constructor(){super()}getFormulaItemType(){return gn.Number}validateInput(e){return 1===e.length&&null!=e.match("[0-9.,]")}handleItemClick(e){this.formulaClick.emit(e)}}mc.\u0275fac=function(e){return new(e||mc)},mc.\u0275cmp=n.\u0275\u0275defineComponent({type:mc,selectors:[["ts-formula-numeric-input-item"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-number-input-item",3,"click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275listener("click",function(r){return t.handleItemClick(r)}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption))},styles:[".formula-number-input-item[_ngcontent-%COMP%]{color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]});class hc extends li{constructor(){super()}getFormulaItemType(){return gn.ColumnOperand}validateInput(e){return!1}handleItemClick(e){this.formulaClick.emit(e)}}hc.\u0275fac=function(e){return new(e||hc)},hc.\u0275cmp=n.\u0275\u0275defineComponent({type:hc,selectors:[["ts-formula-operand-item"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matTooltipPosition","below","matTooltipShowDelay","800",1,"formula-operand-item-wrap",3,"matTooltip","click"],[1,"formula-operand-item"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("click",function(r){return t.handleItemClick(r)}),n.\u0275\u0275elementStart(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275property("matTooltip",t.caption),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.caption))},dependencies:[Ze.Kd],styles:[".formula-operand-item-wrap{border-radius:20px;padding:0 16px;border:1px solid #b1b1b1;display:inline-block;margin:-1px 2px 4px}.formula-operand-item-wrap .formula-operand-item{font-size:14px;font-family:Bpmonline Open Sans;font-weight:400;color:#444;text-overflow:ellipsis;overflow:hidden;max-width:160px;white-space:nowrap;display:inline-block;margin-top:2px}.cdk-overlay-container .mat-tooltip{margin-top:4px;padding:10px;font-size:14px;line-height:19px;color:#444;background:#ffffff;word-break:break-word;box-shadow:#0000004d 0 0 .2em;border-radius:0;border-top:2px solid #22ac14;white-space:pre-line;text-overflow:clip}\n"],encapsulation:2});class gc extends li{constructor(){super(),this._allowedOperatorsList=["+","-","/","*","(",")"]}_createFormulaOperatorFilterRegExp(e){let t="";return e.forEach(i=>t+=i),`[${t}]`}getFormulaItemType(){return gn.Operator}validateInput(e){const t=this._createFormulaOperatorFilterRegExp(this._allowedOperatorsList);return null!=e.match(t)}handleItemClick(e){this.formulaClick.emit(e)}}gc.\u0275fac=function(e){return new(e||gc)},gc.\u0275cmp=n.\u0275\u0275defineComponent({type:gc,selectors:[["ts-formula-operator-item"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-operator-item",3,"click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275listener("click",function(r){return t.handleItemClick(r)}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption))},styles:[".formula-operator-item[_ngcontent-%COMP%]{padding:0 4px;color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]});class vm{}vm.\u0275fac=function(e){return new(e||vm)},vm.\u0275mod=n.\u0275\u0275defineNgModule({type:vm}),vm.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,Oo,Ze.AA]});class fc{constructor(){this._formulaItems=[hc,dc,gc,mc,pc]}get FormulaItemInstance(){return this._instances||(this._instances=[],this._formulaItems.forEach(e=>{const t=this._createFormulaItem(e);this._instances.push(t)})),this._instances}_createFormulaItem(e){return new e}getFormulaItemType(e){let t=null;return this.FormulaItemInstance.forEach(i=>{i.validateInput(e)&&(t=i.getFormulaItemType())}),t}createComponent(e,t){const i=this.FormulaItemInstance.find(s=>s.getFormulaItemType()===e);return t.createComponent(i.constructor).instance}}fc.\u0275fac=function(e){return new(e||fc)},fc.\u0275prov=n.\u0275\u0275defineInjectable({token:fc,factory:fc.\u0275fac,providedIn:"root"});class SD{constructor(e){Object.assign(this,e)}}function UR(a,e){}function GR(a,e){1&a&&n.\u0275\u0275element(0,"div")}class gf{set formulaData(e){e&&!J.Z(e,this._formulaData)&&(this._viewClear(),this._formulaData=e,this._generateComponents(),this.focusFormulaInputOnFormulaDataChange&&setTimeout(()=>{this._focusFormulaInput()},0))}get formulaData(){return this._formulaData}constructor(e){this._formulaItemFactory=e,this._formulaData=[],this.focusFormulaInputOnFormulaDataChange=!1,this.itemsChanged=new n.EventEmitter}_viewClear(){const e=this.container&&this.container.viewContainerRef;e&&e.clear()}_insertFormulaItem(e,t){this.formulaData.splice(e,0,t),this._generateComponents(),this.itemsChanged.emit(this.formulaData)}_removeFormulaItem(e){this.formulaData.splice(e,1),this._generateComponents(),this.itemsChanged.emit(this.formulaData)}_addCursor(e=-1){e=-1===e?this._formulaData.length:e,this._insertFormulaItem(e,new SD({type:gn.Cursor}))}_removeCursor(){let e=this._getCursorPosition();-1===e&&(e=this._formulaData.length),this._removeFormulaItem(e)}_removeCharBeforeCursor(){const e=this._getCursorPosition()-1;e>=0&&this._removeFormulaItem(e)}_removeCharAfterCursor(){const e=this._getCursorPosition()+1;e<this._formulaData.length&&this._removeFormulaItem(e)}_getCursorPosition(){return this._formulaData.findIndex(e=>e.type===gn.Cursor)}_moveCursorForward(){const e=this._getCursorPosition();e<this._formulaData.length&&this._moveCursorOnPosition(e+1)}_moveCursorBackward(){const e=this._getCursorPosition()-1;e>=0&&this._moveCursorOnPosition(e)}_moveCursorOnPosition(e){e>this._formulaData.length||(this._removeCursor(),this._addCursor(e))}_focusFormulaInput(){this.container&&this.container.viewContainerRef.element.nativeElement.parentElement.focus()}_getPositionOutsideItems(e){let t=0;const i=e.currentTarget.children[0].clientWidth;return e.offsetX>=i&&(t=this._formulaData.length),t}_addCursorIfNotExists(){let e=this._getCursorPosition();-1===e&&(e=this.formulaData.length,this._addCursor(e))}_addItemsFromTemplate(e){let t=this._getCursorPosition();this.formulaData.splice(t,0,...e.items),vy.Z(e.cursorPosition)&&(t+=e.cursorPosition,this._moveCursorOnPosition(t))}_generateComponents(){this._viewClear(),this._formulaData.forEach((e,t)=>{this._generateComponent(t,e)})}_generateComponent(e,t){0===e&&this._viewClear();const i=this._formulaItemFactory.createComponent(t.type,this.container.viewContainerRef);i.caption=t.caption,i.value=t.value,i.formulaClick.subscribe(r=>{this.handleItemClick(r,e)})}ngOnDestroy(){this._viewClear()}handleClick(e){const t=this._getPositionOutsideItems(e);-1===this._getCursorPosition()?this._addCursor(t):this._moveCursorOnPosition(t),e.stopPropagation()}handleItemClick(e,t){const r=e.currentTarget.getBoundingClientRect(),s=e.clientX,o=r.left+r.width/2,c=this._getCursorPosition();let d=t;s<o?-1!==c&&c<t&&(d-=1):(-1===c||c>t)&&(d+=1),this._moveCursorOnPosition(d),e.stopPropagation()}handleKeyDown(e){const t=e.key;switch(t){case"Backspace":this._removeCharBeforeCursor();break;case"Delete":this._removeCharAfterCursor();break;case"ArrowLeft":this._moveCursorBackward();break;case"ArrowRight":this._moveCursorForward();break;default:const i=this._getCursorPosition(),r=this._formulaItemFactory.getFormulaItemType(t);Object.values(gn).includes(r)&&this._insertFormulaItem(i,new SD({type:r,caption:t,value:t}))}}addItem(e){this._addCursorIfNotExists(),O.Z(e.template)||O.Z(e.template.items)?this._insertFormulaItem(this._getCursorPosition(),e):this._addItemsFromTemplate(e.template),this._focusFormulaInput()}deletePreviousItem(){this._removeCharBeforeCursor()}}gf.\u0275fac=function(e){return new(e||gf)(n.\u0275\u0275directiveInject(fc))},gf.\u0275cmp=n.\u0275\u0275defineComponent({type:gf,selectors:[["ts-formula-editor"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(Lo,7),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.container=i.first)}},inputs:{formulaData:"formulaData",focusFormulaInputOnFormulaDataChange:"focusFormulaInputOnFormulaDataChange"},outputs:{itemsChanged:"itemsChanged"},decls:6,vars:1,consts:[["tabindex","0","dir","ltr",1,"formula-input",3,"click","keydown"],[1,"pre-formula-item"],["tsViewContainerRef",""],[4,"ngFor","ngForOf"],[1,"post-formula-item",3,"click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("click",function(r){return t.handleClick(r)})("keydown",function(r){return t.handleKeyDown(r)}),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275text(2,"="),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,UR,0,0,"ng-template",2),n.\u0275\u0275template(4,GR,1,0,"div",3),n.\u0275\u0275elementStart(5,"div",4),n.\u0275\u0275listener("click",function(r){return t.deletePreviousItem(),r.stopPropagation()}),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(4),n.\u0275\u0275property("ngForOf",t.formulaData))},dependencies:[y.NgForOf,Lo,xe.Lv],styles:[".formula-input{-webkit-user-select:none;user-select:none;display:inline-flex;outline:none;flex-wrap:wrap;padding:0 .3em .2em;min-height:30px;border-bottom:1px solid #e7e7e7;width:100%;cursor:text}.pre-formula-item{font-size:14pt;width:20px;line-height:19px}.post-formula-item{margin-left:auto;-webkit-user-select:none;user-select:none;cursor:pointer;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KCS5zdDF7ZmlsbDojODE5NUIzO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8cmVjdCBjbGFzcz0ic3QwIiB3aWR0aD0iMTgiIGhlaWdodD0iMTYiLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xOCwxNUg1LjhMMC40LDhsNS40LTdIMThMMTgsMTV6IE02LjIsMTRIMTdsMC0xMkg2LjJMMS42LDhMNi4yLDE0eiIvPgoJPC9nPgoJPGc+CgkJPHJlY3QgeD0iMTAuNSIgeT0iMy44IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIC0yLjQzNSAxMC4xMjEzKSIgY2xhc3M9InN0MSIgd2lkdGg9IjEiIGhlaWdodD0iOC41Ii8+Cgk8L2c+Cgk8Zz4KCQk8cmVjdCB4PSI2LjgiIHk9IjcuNSIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAtMi40MzUgMTAuMTIxMykiIGNsYXNzPSJzdDEiIHdpZHRoPSI4LjUiIGhlaWdodD0iMSIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=);width:18px;height:16px;margin-top:4px;margin-bottom:auto}\n"],encapsulation:2});class Im extends $t{constructor(){super(...arguments),this.getRegisteredEvents=()=>[{name:"click"}]}}Im.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Im)))(t||Im)}}(),Im.\u0275cmp=n.\u0275\u0275defineComponent({type:Im,selectors:[["ts-delete-button-table-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["mat-icon-button","",1,"trash-icon",3,"matTooltip","click"],["svgIcon","trash"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"button",0),n.\u0275\u0275listener("click",function(){return t.fireEvent("click")}),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275element(2,"mat-icon",1),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("matTooltip",n.\u0275\u0275pipeBind1(1,1,"DeleteButtonTableCell.Tooltip"))},dependencies:[U.eB,A.Hw,Ze.Kd,w.X$],encapsulation:2});const zR=["tableWrapper"];function HR(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",15)(1,"span",16),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"span",17),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,2,"MultiselectDialog.Selected")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",t.selectedValues.length,"")}}function ZR(a,e){1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,1,"MultiselectDialog.Blankslate")))}function qR(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,"MultiselectDialog.BlankslateWithFilters")))}function $R(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275template(1,ZR,4,3,"ng-container",19),n.\u0275\u0275template(2,qR,3,3,"ng-template",null,20,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.searchKey)("ngIfElse",t)}}class ff{get searchKey(){return this.searchKeyValue}set searchKey(e){this.searchKeyValue=e,this.tableDataSource.filter=e&&e.trim().toLowerCase()}constructor(e,t,i){this._dialogData=e,this._scrollToBottomObserverFactory=t,this._dialogRef=i,this.searchColumns=[],this.tableData=[],this.searchKeyValue="",this.title="",this.selectedValues=[],this.tableDataSource=new XC}initDataSource(){this.tableDataSource.data=this.tableData,this.tableDataSource.filterPredicate=Xb(this.searchColumns)}loadNextData(){this.tableDataSource.loadNext()}ngOnInit(){!this._dialogData||!this._dialogData.data||(this.tableData=this._dialogData.data,this.dataSchema=this._dialogData.dataSchema,this.sortDirection=this._dialogData.sortDirection||"asc",this.sortColumn=this._dialogData.sortColumn,this.title=this._dialogData.title||this.title,this.selectMode=this._dialogData.selectMode||"multi",this.showSelectAllButton=void 0===this._dialogData.showSelectAllButton||this._dialogData.showSelectAllButton,this.searchColumns=this._dialogData.searchColumns||[],this.initDataSource())}ngAfterViewInit(){const e=this.tableWrapper.nativeElement;e&&(this.scrollTableToBottomObserver=this._scrollToBottomObserverFactory.createObserver(e,this.loadNextData.bind(this)))}isEmpty(){return this.table.isEmpty()}closeWithSelection(e){"single"===this.selectMode&&this._dialogRef.close([e])}}var _f;ff.\u0275fac=function(e){return new(e||ff)(n.\u0275\u0275directiveInject(E.eJ),n.\u0275\u0275directiveInject(Ln),n.\u0275\u0275directiveInject(E.hV))},ff.\u0275cmp=n.\u0275\u0275defineComponent({type:ff,selectors:[["ts-multiselect-dialog"]],viewQuery:function(e,t){if(1&e&&(n.\u0275\u0275viewQuery(zR,7),n.\u0275\u0275viewQuery(_t,7)),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.tableWrapper=i.first),n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.table=i.first)}},decls:21,vars:21,consts:[["mat-dialog-title",""],[1,"title"],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],[1,"multiselect-dialog-top-panel"],[1,"dialog-filters"],[3,"value","valueChange"],["class","select-counter-container",4,"ngIf"],["mat-dialog-content",""],["tableWrapper",""],["headerSticky","true",3,"selectMode","dataSource","dataSchema","sortColumn","sortDirection","showSelectAllButton","selected","selectedChange","rowDoubleClick"],["class","multiselect-dialog-blank-slate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close","disabled"],[1,"select-counter-container"],[1,"counter-label"],[1,"counter-value"],[1,"multiselect-dialog-blank-slate"],[4,"ngIf","ngIfElse"],["blankslateWithFilters",""]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",2),n.\u0275\u0275element(5,"mat-icon",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",4)(7,"div",5)(8,"ts-search-input",6),n.\u0275\u0275listener("valueChange",function(r){return t.searchKey=r}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(9,HR,6,4,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div",8,9)(12,"ts-table",10),n.\u0275\u0275listener("selectedChange",function(r){return t.selectedValues=r})("rowDoubleClick",function(r){return t.closeWithSelection(r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,$R,4,2,"div",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"div",12)(15,"button",13),n.\u0275\u0275text(16),n.\u0275\u0275pipe(17,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(18,"button",14),n.\u0275\u0275text(19),n.\u0275\u0275pipe(20,"translate"),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,15,t.title||"MultiselectDialog.Select")),n.\u0275\u0275advance(6),n.\u0275\u0275property("value",t.searchKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","multi"===t.selectMode),n.\u0275\u0275advance(3),n.\u0275\u0275property("selectMode",t.selectMode)("dataSource",t.tableDataSource)("dataSchema",t.dataSchema)("sortColumn",t.sortColumn)("sortDirection",t.sortDirection)("showSelectAllButton",t.showSelectAllButton)("selected",t.selectedValues),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isEmpty()),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(17,17,"MultiselectDialog.Cancel")),n.\u0275\u0275advance(2),n.\u0275\u0275property("mat-dialog-close",t.selectedValues)("disabled",0==t.selectedValues.length),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(20,19,"MultiselectDialog.Select")))},dependencies:[y.NgIf,U.eB,E.aO,E.YS,E.Rb,E.ev,A.Hw,uc,_t,w.X$],styles:["[_nghost-%COMP%]{padding:4px 10px;width:834px;max-width:100%;min-width:420px;box-sizing:border-box}[mat-dialog-title][_ngcontent-%COMP%]{display:flex}[mat-dialog-title][_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:calc(100% - 20px);display:inline-block;overflow:hidden;text-overflow:ellipsis}.multiselect-dialog-top-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-family:Bpmonline Open Sans,serif;line-height:19px;margin-top:20px;margin-bottom:5px}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .dialog-filters[_ngcontent-%COMP%]{flex-grow:1}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .dialog-filters[_ngcontent-%COMP%]   ts-search-input[_ngcontent-%COMP%]{width:max(40%,300px)}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:13px;color:#757575}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{padding-left:3px;font-size:14px;color:#444}[mat-dialog-content][_ngcontent-%COMP%]{overflow:auto!important;max-height:55vh!important;min-height:267px;height:862px}[mat-dialog-content][_ngcontent-%COMP%]   .multiselect-dialog-blank-slate[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:14px;color:#999;text-align:center}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]}),function(a){a[a.Unknown=0]="Unknown",a[a.TextBox=1]="TextBox",a[a.TextArea=2]="TextArea",a[a.DropDown=3]="DropDown",a[a.DateTime=4]="DateTime",a[a.LocalizableText=5]="LocalizableText",a[a.CheckBox=6]="CheckBox",a[a.ImageUploader=7]="ImageUploader",a[a.Autocomlete=8]="Autocomlete",a[a.LabelWithInnerLink=9]="LabelWithInnerLink"}(_f||(_f={}));class ta{constructor(e,t){this.el=e,this.render=t}set dataItemMarker(e){this.render.setAttribute(this.el.nativeElement,"data-item-marker",e)}}ta.\u0275fac=function(e){return new(e||ta)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.Renderer2))},ta.\u0275dir=n.\u0275\u0275defineDirective({type:ta,selectors:[["","tsDataItemMarker",""]],inputs:{dataItemMarker:["tsDataItemMarker","dataItemMarker"]}});class YR{}class QR extends YR{constructor(e){super(),Object.assign(this,e)}}class _c extends Ta{constructor(e){super(),this.httpClient=e,this._serviceEndpoint="/ServiceModel/CultureService.svc/"}getAllCultures(){if(!this._allCultures$){const e=this._serviceEndpoint+"GetAllCultures";this._allCultures$=this.httpClient.post(e,{}).pipe((0,h.U)(t=>t.cultures),(0,_i.d)({bufferSize:1,refCount:!1}))}return this._allCultures$}}function JR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",10)(2,"mat-label"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"textarea",11),n.\u0275\u0275listener("ngModelChange",function(r){const o=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275resetView(o.value=r)}),n.\u0275\u0275text(5,"\t\t\t\t"),n.\u0275\u0275elementEnd()()()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("data-item-marker",t.name),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("hideNonActiveItem",!t.isActive&&!i.showAll),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.title),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",i.dialogData.isDisabled)("rows",1)("ngModel",t.value)("tsDataItemMarker",i.dataQaAttribute(t.name))}}function KR(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",12)(1,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.showAll=!r.showAll)}),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275element(4,"mat-icon",14),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("tsDataItemMarker","show_hide_languages_button"),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(3,3,t.getIsActiveButtonTitle)," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("svgIcon",t.getIsActiveButtonImage)}}_c.\u0275fac=function(e){return new(e||_c)(n.\u0275\u0275inject(D.HttpClient))},_c.\u0275prov=n.\u0275\u0275defineInjectable({token:_c,factory:_c.\u0275fac,providedIn:"root"});class Dm{constructor(e,t,i){this.dialogData=e,this._dialogRef=i,this._destroyed=new u.ReplaySubject,this._maskService=new l.MaskService,this.culturesData=[];const r=t.get(A.jv),s=t.get(k.DomSanitizer);this._cultureApiService=t.get(_c),r.addSvgIconLiteral("up-arrows-icon",s.bypassSecurityTrustHtml(f(98728))),r.addSvgIconLiteral("close",s.bypassSecurityTrustHtml(f(63853))),r.addSvgIconLiteral("down-arrows-icon",s.bypassSecurityTrustHtml(f(83225)))}get getIsActiveButtonTitle(){return this.showAll?"LocalizableStringsDialog.HideInactiveLanguages":"LocalizableStringsDialog.ShowAllLanguages"}get getIsActiveButtonImage(){return this.showAll?"up-arrows-icon":"down-arrows-icon"}_getCultureValue(e){return this.dialogData.localizableStrings.getValue(e)}_getCultureLanguageModel(e){const t=new QR(e);return t.value=this._getCultureValue(e.name),t}_setNeedShowAllLanguagesButton(e){this.needShowAllLanguagesButton=e.some(t=>!t.isActive)}ngOnInit(){this._maskService.showBodyMask(),this._cultureApiService.getAllCultures().pipe((0,L.R)(this._destroyed),(0,G.K)(e=>(console.error(e),this._maskService.hideBodyMask(),(0,u.of)(null)))).subscribe(e=>{this._maskService.hideBodyMask(),this.culturesData=e.map(t=>this._getCultureLanguageModel(t)),this._setNeedShowAllLanguagesButton(e)}),this._dialogRef.keydownEvents().pipe((0,P.h)(e=>e?.key===ad.s.Escape)).subscribe(()=>this._maskService.hideBodyMask())}dataQaAttribute(e){return e+"_input"}ngOnDestroy(){this._destroyed.next(!0),this._destroyed.complete()}}Dm.\u0275fac=function(e){return new(e||Dm)(n.\u0275\u0275directiveInject(E.eJ),n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(E.hV))},Dm.\u0275cmp=n.\u0275\u0275defineComponent({type:Dm,selectors:[["ts-localizable-dialog"]],decls:17,vars:13,consts:[[1,"ts-localizable-dialog"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-content","",1,"dialog-content-wrapper"],[4,"ngFor","ngForOf"],["class","collapse-expand-language",4,"ngIf"],["mat-dialog-actions","",1,"dialog-action-buttons"],["mat-button","","data-item-marker","localizable-dialog-cancel-button",1,"cancelBtn",3,"mat-dialog-close"],["mat-flat-button","","color","primary","data-item-marker","localizable-dialog-apply-button",1,"applyBtn",3,"disabled","mat-dialog-close"],["floatLabel","always",1,"example-full-width"],["matInput","",3,"disabled","rows","ngModel","tsDataItemMarker","ngModelChange"],[1,"collapse-expand-language"],["mat-button","",3,"tsDataItemMarker","click"],[1,"expandCollapsImg",3,"svgIcon"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span"),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",2),n.\u0275\u0275element(6,"mat-icon",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",4),n.\u0275\u0275template(8,JR,6,8,"div",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,KR,5,5,"div",6),n.\u0275\u0275elementStart(10,"div",7)(11,"button",8),n.\u0275\u0275text(12),n.\u0275\u0275pipe(13,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"button",9),n.\u0275\u0275text(15),n.\u0275\u0275pipe(16,"translate"),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(4,7,t.dialogData.title)," "),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",t.culturesData),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.needShowAllLanguagesButton),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(13,9,t.dialogData.cancelBtnTitle)," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",t.dialogData.isDisabled)("mat-dialog-close",t.culturesData),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(16,11,t.dialogData.okBtnTitle)," "))},dependencies:[y.NgForOf,y.NgIf,b.Fj,b.JJ,b.On,N.v_,N.$V,z.k0,U.eB,A.Hw,E.aO,E.YS,E.Rb,E.ev,ta,w.X$],styles:[".dialog-content-wrapper[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:17px;display:flex;flex-direction:column;justify-content:space-between;width:476px;height:100%;overflow:auto!important}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]{width:100%}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:18px}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]   textarea[disabled][_ngcontent-%COMP%]{color:#000}.dialog-content-wrapper[_ngcontent-%COMP%]   .hideNonActiveItem[_ngcontent-%COMP%]{display:none}.dialog-content-wrapper[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px}[mat-dialog-actions][_ngcontent-%COMP%]{margin:9px 0!important;display:flex;flex-direction:row;justify-content:flex-end}.collapse-expand-language[_ngcontent-%COMP%]{text-align:center}.collapse-expand-language[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{text-transform:none}.collapse-expand-language[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]:focus{background-color:transparent!important}.collapse-expand-language[_ngcontent-%COMP%]   .expandCollapsImg[_ngcontent-%COMP%]{padding-left:5px;display:flex;box-sizing:content-box;width:16px;height:16px}"]});const XR=["input"],ek=["button"];function tk(a,e){1&a&&(n.\u0275\u0275elementStart(0,"div",7)(1,"span",8),n.\u0275\u0275element(2,"mat-icon",9),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd()()),2&a&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("crtTooltip",n.\u0275\u0275pipeBind1(3,1,"Input.Readonly")))}class na extends ut{constructor(e,t,i,r,s,o,c){super(e,t,i),this.translateService=r,this.dialogService=s,this.iconLineType="default",this.showLockIcon=!1,this.controlType="ts-localizable-string";const d=f(18435),p=f(6428);o.addSvgIconLiteral("localizable-strings",c.bypassSecurityTrustHtml(d)),o.addSvgIconLiteral("localizable-strings-bold",c.bypassSecurityTrustHtml(p))}get localizableStringsIcon(){return"bold"===this.iconLineType?"localizable-strings-bold":"localizable-strings"}set autofocus(e){if(e){const t=this.input.nativeElement;t.focus(),t.select()}}set stringValue(e){this.innerValue.setValueLocalizableString(this.translateService.currentLang,e),this.onChange(this.innerValue)}get stringValue(){return this.innerValue instanceof kt?this.innerValue.getValue(this.translateService.currentLang):this.innerValue}dataQaAttribute(){return this.label.toLowerCase()+"_input"}showLanguageMiniCard(e){e.preventDefault(),this.dialogService.open(Dm,{data:{title:this.label,cancelBtnTitle:"LocalizableStringsDialog.Cancel",okBtnTitle:"LocalizableStringsDialog.Apply",localizableStrings:this.innerValue,isDisabled:this.disabled},scrollStrategy:new Rn.RZ,panelClass:["dialog-top-border"]}).subscribe(t=>{t&&(t.forEach(i=>{this.innerValue.setValueLocalizableString(i.name,i.value)}),this.onChange(this.innerValue))})}writeValue(e){e||(e=new kt),super.writeValue(e)}}na.\u0275fac=function(e){return new(e||na)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},na.\u0275cmp=n.\u0275\u0275defineComponent({type:na,selectors:[["ts-localizable-text-input"]],viewQuery:function(e,t){if(1&e&&(n.\u0275\u0275viewQuery(XR,5),n.\u0275\u0275viewQuery(ek,5,n.ElementRef)),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.input=i.first),n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.button=i.first)}},inputs:{iconLineType:"iconLineType",showLockIcon:"showLockIcon",label:"label",autofocus:"autofocus",stringValue:"stringValue"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:na}]),n.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:[[1,"localizable-text-input-container"],["matInput","","autocomplete","off",1,"localizable-text-input-container-control",3,"ngModel","disabled","tsDataItemMarker","required","placeholder","ngModelChange"],["input",""],["class","icon-container",4,"ngIf"],["mat-icon-button","","type","button",1,"localizable-icon",3,"tsDataItemMarker","click"],["button",""],[1,"localizable-strings-icon",3,"svgIcon"],[1,"icon-container"],[1,"icon-baseline"],["matIconSuffix","","svgIcon","lock",1,"readonly-icon",3,"crtTooltip"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),n.\u0275\u0275listener("ngModelChange",function(r){return t.stringValue=r}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,tk,4,3,"div",3),n.\u0275\u0275elementStart(4,"button",4,5),n.\u0275\u0275listener("click",function(r){return t.showLanguageMiniCard(r)}),n.\u0275\u0275element(6,"mat-icon",6),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngModel",t.stringValue)("disabled",t.disabled)("tsDataItemMarker",t.dataQaAttribute())("required",t.required)("placeholder",t.placeholder),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.showLockIcon&&t.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("tsDataItemMarker","localizable_button_"+t.label),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("svgIcon",t.localizableStringsIcon))},dependencies:[y.NgIf,b.Fj,b.JJ,b.Q7,b.On,z.k0,U.eB,A.Hw,ta,Ya,w.X$],styles:[".localizable-text-input-container{display:flex;flex-direction:row;align-items:center}.localizable-text-input-container .mat-input-element{padding-right:21px}.localizable-text-input-container .mat-icon-button.localizable-icon{height:1.5em;width:1.5em;position:absolute;right:0}.localizable-text-input-container .mat-icon.localizable-strings-icon{width:16px;height:16px;line-height:16px}.localizable-text-input-container .mat-button-wrapper{display:flex;justify-content:center}.localizable-text-input-container .mat-button-focus-overlay,.localizable-text-input-container .mat-button-ripple-round{height:21px}.localizable-text-input-container .readonly-icon{position:absolute;right:1.5em;top:50%;transform:translateY(-50%);width:16px;height:16px}.localizable-text-input-container .readonly-icon>svg{position:absolute}.localizable-text-input-container:not(:hover) .readonly-icon{display:none}\n"],encapsulation:2});var nk=f(71561);const ik=function(a){return{visible:a}},ak=function(a,e){return{"add-image-button-icon":a,"add-disabled-image-button-icon":e}},bD=()=>{},rk={provide:b.JU,useExisting:(0,n.forwardRef)(()=>ia),multi:!0};class ia extends Te{set value(e){this._model=e,this.onChange(this._model),this.valueChange.emit(this._model)}get value(){return this._model}constructor(e){super(e),this.required=!1,this.clearButtonVisible=!1,this.label="",this.valueChange=new n.EventEmitter,this.disabled=!1,this.onChange=bD,this.onTouched=bD}get fileName(){return this._model?this._model.name:""}dataQaAttribute(){return this.label.toLowerCase()+"_input"}get isClearButtonVisible(){return this.clearButtonVisible&&Boolean(this._model)&&!this.disabled}onFilesSelected(e){0!==e.length&&(this.value=e[0])}clearFile(){this.value=null}writeValue(e){this._model=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}function sk(a,e){1&a&&n.\u0275\u0275element(0,"mat-icon",11)}function ok(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getErrorMessage," ")}}function lk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"input",8),n.\u0275\u0275template(4,sk,1,0,"mat-icon",9),n.\u0275\u0275template(5,ok,2,1,"mat-error",10),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.formComponent.key)("tsDataItemMarker",t.dataQaAttribute(t.formComponent.key))("required",t.formComponent.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.formComponent.isDisabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isInvalidComponent)}}function ck(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"textarea",12),n.\u0275\u0275text(4,"\t\t\t"),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("rows",t.formComponent.areaRows)("formControlName",t.formComponent.key)("tsDataItemMarker",t.dataQaAttribute(t.formComponent.key))("required",t.formComponent.required)}}function uk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",15),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t.key),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.value," ")}}function dk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getErrorMessage," ")}}function pk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-select",13),n.\u0275\u0275listener("selectionChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.formComponent.changeValue?s.formComponent.changeValue(r,s.form):null)}),n.\u0275\u0275template(4,uk,2,2,"mat-option",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,dk,2,1,"mat-error",10),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.formComponent.key)("tsDataItemMarker",t.dataQaAttribute(t.formComponent.key))("required",t.formComponent.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.formComponent.options),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isInvalidComponent)}}function mk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",15),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.value," ")}}function hk(a,e){if(1&a&&n.\u0275\u0275element(0,"ts-info-tooltip-icon",24),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("message",t.formComponent.info)}}function gk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getErrorMessage," ")}}function fk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",25),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.actionButtonClick())}),n.\u0275\u0275element(1,"mat-icon",26),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("title",t.formComponent.actionButton.caption),n.\u0275\u0275advance(1),n.\u0275\u0275property("svgIcon",t.formComponent.actionButton.icon)}}function _k(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",16)(1,"mat-form-field",7)(2,"mat-label"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"input",17),n.\u0275\u0275elementStart(5,"div",18),n.\u0275\u0275element(6,"div",19),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"mat-autocomplete",20,21),n.\u0275\u0275listener("optionSelected",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.formComponent.changeValue?s.formComponent.changeValue(r,s.form):null)}),n.\u0275\u0275template(9,mk,2,2,"mat-option",14),n.\u0275\u0275pipe(10,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,hk,1,1,"ts-info-tooltip-icon",22),n.\u0275\u0275template(12,gk,2,1,"mat-error",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,fk,2,2,"button",23),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275reference(8),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(i.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",i.formComponent.key)("matAutocomplete",t)("required",i.formComponent.required)("tsDataItemMarker",i.dataQaAttribute(i.formComponent.key)),n.\u0275\u0275advance(3),n.\u0275\u0275property("displayWith",i.getDisplayValueFormDropDownOptions),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(10,10,i.filteredOptions)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.formComponent.info),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isInvalidComponent),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.formComponent.actionButton)}}function yk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"input",27)(4,"mat-datepicker-toggle",28)(5,"mat-datepicker",null,29),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275reference(6),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("matDatepicker",t)("formControlName",i.formComponent.key)("tsDataItemMarker",i.dataQaAttribute(i.formComponent.key))("required",i.formComponent.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("for",t)}}function Ck(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-form-field",7)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"ts-localizable-text-input",30),n.\u0275\u0275elementStart(4,"mat-error"),n.\u0275\u0275text(5),n.\u0275\u0275pipe(6,"translate"),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.formComponent.key)("label",t.formComponent.label)("required",t.formComponent.required),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(6,5,"LocalizableStringsDialog.Validations.RequiredNameCaption")," ")}}function Sk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",31)(1,"mat-checkbox",32),n.\u0275\u0275listener("change",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.formComponent.changeValue?s.formComponent.changeValue(r,s.form):null)}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.formComponent.key)("tsDataItemMarker",t.dataQaAttribute(t.formComponent.key))("required",t.formComponent.required),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.formComponent.label," ")}}function bk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"ts-image-input",33),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("required",t.formComponent.required)("formControlName",t.formComponent.key)("label",t.formComponent.label)}}function vk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",34)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"a",35),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"span"),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formComponent.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("href",t.formComponent.value,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.formComponent.key),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formComponent.info)}}ia.\u0275fac=function(e){return new(e||ia)(n.\u0275\u0275directiveInject(n.Injector))},ia.\u0275cmp=n.\u0275\u0275defineComponent({type:ia,selectors:[["ts-image-input"]],inputs:{value:"value",required:"required",clearButtonVisible:"clearButtonVisible",label:"label",disabled:"disabled"},outputs:{valueChange:"valueChange"},features:[n.\u0275\u0275ProvidersFeature([rk]),n.\u0275\u0275InheritDefinitionFeature],decls:11,vars:18,consts:[["floatLabel","always",1,"image-input",3,"hideRequiredMarker","ngStyle","ngClass"],["matInput","",1,"file-name-input",3,"ngModel","disabled","tsDataItemMarker","required"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close-button",3,"ngClass","click"],["svgIcon","close"],["mat-icon-button","","matSuffix","",1,"add-image-button",3,"disabled","tsDataItemMarker","click"],[3,"ngClass"],["addImageButton",""],["hidden","","type","file","accept","image/*",3,"change"],["fileInput",""]],template:function(e,t){if(1&e){const i=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"input",1),n.\u0275\u0275elementStart(4,"button",2),n.\u0275\u0275listener("click",function(){return t.clearFile()}),n.\u0275\u0275element(5,"mat-icon",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"button",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(i);const s=n.\u0275\u0275reference(10);return n.\u0275\u0275resetView(s.click())}),n.\u0275\u0275element(7,"div",5,6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"input",7,8),n.\u0275\u0275listener("change",function(s){return t.onFilesSelected(s.target.files)}),n.\u0275\u0275elementEnd()()}2&e&&(n.\u0275\u0275property("hideRequiredMarker",!0)("ngStyle",t.styles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngModel",t.fileName)("disabled",!0)("tsDataItemMarker",t.dataQaAttribute())("required",t.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(13,ik,t.isClearButtonVisible)),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",t.disabled)("tsDataItemMarker","add_image_button_"+t.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(15,ak,!t.disabled,t.disabled)))},dependencies:[y.NgClass,y.NgStyle,b.Fj,b.JJ,b.Q7,b.On,N.v_,N.$V,N.nX,z.k0,U.eB,A.Hw,ta],styles:[".add-image-button[_ngcontent-%COMP%]   .add-image-button-icon[_ngcontent-%COMP%]{background:url(add-image-icon.svg) no-repeat;width:16px;height:16px;margin:auto;display:inline-block}.add-image-button[_ngcontent-%COMP%]   .add-disabled-image-button-icon[_ngcontent-%COMP%]{background:url(add-image-disable-icon.svg) no-repeat;width:16px;height:16px;margin:auto;display:inline-block}.close-button[_ngcontent-%COMP%]{visibility:hidden}.image-input[_ngcontent-%COMP%]:hover   .visible[_ngcontent-%COMP%]{visibility:visible}.mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",File),(0,m.w6)("design:paramtypes",[File])],ia.prototype,"value",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],ia.prototype,"label",void 0);class Mm{constructor(e,t){this.typeControl=_f,e.addSvgIconLiteral("lock-icon",t.bypassSecurityTrustHtml(f(76974)))}get groupComponent(){return this.form.formGroup.get(this.formComponent.key)}get isInvalidComponent(){return!!this.groupComponent&&this.groupComponent.invalid}get getErrorMessage(){return this.groupComponent.errors.message}_getFilteredOptions(e){const t=e?.toLowerCase()||"";return this.formComponent.options.filter(i=>!!i.value&&i.value.toLowerCase().indexOf(t)>-1)}_autocompleteValueChangesHandlerInit(){this.formComponent.controlType===_f.Autocomlete&&(this.filteredOptions=this.groupComponent.valueChanges.pipe((0,ze.O)(""),(0,h.U)(e=>"string"==typeof e?e:e?.value),(0,h.U)(e=>e?this._getFilteredOptions(e):this.formComponent.options)))}ngOnInit(){this._autocompleteValueChangesHandlerInit()}dataQaAttribute(e){return e+"_input"}getDisplayValueFormDropDownOptions(e){return e&&e.value?e.value:""}actionButtonClick(){this.formComponent.actionButton.clicked()}}function Ik(a,e){if(1&a&&n.\u0275\u0275element(0,"ts-dynamic-element",1),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("formComponent",t)("form",i.dynamicForm)}}Mm.\u0275fac=function(e){return new(e||Mm)(n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},Mm.\u0275cmp=n.\u0275\u0275defineComponent({type:Mm,selectors:[["ts-dynamic-element"]],inputs:{formComponent:"formComponent",form:"form"},decls:11,vars:11,consts:[[3,"formGroup"],[3,"ngSwitch"],["floatLabel","always",4,"ngSwitchCase"],["class","autocomplete-field",4,"ngSwitchCase"],["class","dynamic-checkbox",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","label-with-inner-link",4,"ngSwitchCase"],["floatLabel","always"],["matInput","","autocomplete","off",3,"formControlName","tsDataItemMarker","required"],["matSuffix","","class","lock-icon","svgIcon","lock-icon",4,"ngIf"],[4,"ngIf"],["matSuffix","","svgIcon","lock-icon",1,"lock-icon"],["matInput","",3,"rows","formControlName","tsDataItemMarker","required"],["disableOptionCentering","true",3,"formControlName","tsDataItemMarker","required","selectionChange"],["class","dynamic-element-select-option",3,"value",4,"ngFor","ngForOf"],[1,"dynamic-element-select-option",3,"value"],[1,"autocomplete-field"],["type","text","matInput","",3,"formControlName","matAutocomplete","required","tsDataItemMarker"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["disableOptionCentering","true",3,"displayWith","optionSelected"],["auto","matAutocomplete"],["class","info-icon","matSuffix","",3,"message",4,"ngIf"],["class","action-button","type","button","mat-icon-button","",3,"title","click",4,"ngIf"],["matSuffix","",1,"info-icon",3,"message"],["type","button","mat-icon-button","",1,"action-button",3,"title","click"],[1,"action-icon",3,"svgIcon"],["matInput","",3,"matDatepicker","formControlName","tsDataItemMarker","required"],["matSuffix","",3,"for"],["picker",""],[3,"formControlName","label","required"],[1,"dynamic-checkbox"],[3,"formControlName","tsDataItemMarker","required","change"],[3,"required","formControlName","label"],[1,"label-with-inner-link"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,lk,6,6,"mat-form-field",2),n.\u0275\u0275template(3,ck,5,5,"mat-form-field",2),n.\u0275\u0275template(4,pk,6,6,"mat-form-field",2),n.\u0275\u0275template(5,_k,14,12,"div",3),n.\u0275\u0275template(6,yk,7,6,"mat-form-field",2),n.\u0275\u0275template(7,Ck,7,7,"mat-form-field",2),n.\u0275\u0275template(8,Sk,3,4,"div",4),n.\u0275\u0275template(9,bk,2,3,"div",5),n.\u0275\u0275template(10,vk,7,4,"div",6),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275property("formGroup",t.form.formGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",t.formComponent.controlType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.TextBox),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.TextArea),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.DropDown),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.Autocomlete),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.DateTime),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.LocalizableText),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.CheckBox),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.ImageUploader),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",t.typeControl.LabelWithInnerLink))},dependencies:[y.NgForOf,y.NgIf,y.NgSwitch,y.NgSwitchCase,b.Fj,b.JJ,b.JL,b.Q7,b.sg,b.u,ta,na,N.nI,N.v_,N.$V,N.nX,z.k0,et.x8,Xe.CK,Ne.Mq,Ne.hl,Ne.nW,U.eB,A.Hw,Se.FC,nk.e_,ia,ce.VN,ce.QJ,Zo,y.AsyncPipe,w.X$],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{width:16px;height:16px;display:none;overflow:visible}.mat-form-field[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:22px;height:22px;padding-left:8px;bottom:-3px}.mat-form-field[_ngcontent-%COMP%]:hover   .lock-icon[_ngcontent-%COMP%]{display:block}ts-localizable-text[_ngcontent-%COMP%], ts-image-input[_ngcontent-%COMP%]{width:100%}.dynamic-checkbox[_ngcontent-%COMP%]{padding-top:7px;overflow:hidden}.label-with-inner-link[_ngcontent-%COMP%]{font-family:Open Sans,serif;font-style:normal;font-weight:400;font-size:12px;line-height:17px;color:#444;padding-top:8px;padding-bottom:24px}  .mat-checkbox-label{font-size:14px}.autocomplete-field[_ngcontent-%COMP%]{display:flex;align-items:center}.action-button[_ngcontent-%COMP%]{height:32px;width:32px;line-height:1;margin-bottom:8px}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--crt-palette-primary-50)}.action-button[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:16px;height:16px;vertical-align:baseline;color:#8095b3}"]});class wm{}function Dk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",5),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.expandRow=!r.expandRow)}),n.\u0275\u0275elementStart(1,"mat-icon"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.GetButtonIcon)}}function Mk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",2)(1,"label",3),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Dk,3,1,"button",4),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.formRow.rowSectionName," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.formRow.expandableRow)}}function wk(a,e){if(1&a&&n.\u0275\u0275element(0,"ts-dynamic-column",6),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("dynamicForm",i.dynamicForm)("formColumn",t)}}wm.\u0275fac=function(e){return new(e||wm)},wm.\u0275cmp=n.\u0275\u0275defineComponent({type:wm,selectors:[["ts-dynamic-column"]],inputs:{formColumn:"formColumn",dynamicForm:"dynamicForm"},decls:1,vars:1,consts:[[3,"formComponent","form",4,"ngFor","ngForOf"],[3,"formComponent","form"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,Ik,1,2,"ts-dynamic-element",0),2&e&&n.\u0275\u0275property("ngForOf",t.formColumn.formComponents)},dependencies:[y.NgForOf,Mm]});class xm{get GetButtonIcon(){return this.expandRow?"keyboard_arrow_down":"keyboard_arrow_up"}}function xk(a,e){if(1&a&&n.\u0275\u0275element(0,"ts-dynamic-row",5),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("dynamicForm",i.dynamicForm)("formRow",t)}}function Ek(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"form",3),n.\u0275\u0275template(1,xk,1,2,"ts-dynamic-row",4),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("formGroup",t.dynamicForm.formGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.dynamicForm.rows)}}function Tk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,Ek,2,2,"form",2),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.dynamicForm.formGroup)}}xm.\u0275fac=function(e){return new(e||xm)},xm.\u0275cmp=n.\u0275\u0275defineComponent({type:xm,selectors:[["ts-dynamic-row"]],inputs:{formRow:"formRow",dynamicForm:"dynamicForm"},decls:3,vars:4,consts:[["class","section-row",4,"ngIf"],["class","column-flex",3,"dynamicForm","formColumn",4,"ngFor","ngForOf"],[1,"section-row"],[1,"section-name"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],[1,"column-flex",3,"dynamicForm","formColumn"]],template:function(e,t){1&e&&(n.\u0275\u0275template(0,Mk,4,2,"div",0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,wk,1,2,"ts-dynamic-column",1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("ngIf",t.formRow.rowSectionName),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("display",t.expandRow?"none":"flex"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.formRow.columns))},dependencies:[y.NgForOf,y.NgIf,U.eB,A.Hw,wm],styles:[".section-row[_ngcontent-%COMP%]{justify-content:space-between;display:flex}.section-row[_ngcontent-%COMP%]   .section-name[_ngcontent-%COMP%]{font-size:20px;color:#00b2f2}.column-flex[_ngcontent-%COMP%]{flex:1}"]});class Em{}function Pk(a,e){if(1&a&&n.\u0275\u0275element(0,"ts-dynamic-form-grid",10),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("dynamicForm",t.formDialog.dynamicForm)}}function Ak(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.formDialog.cancelBtnTitle)," ")}}function Rk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"button",12),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!t.isValid&&t.formDialog.useValidation)("mat-dialog-close",t.formDialog.dynamicForm),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,3,t.formDialog.okBtnTitle)," ")}}function kk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"span"),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",3),n.\u0275\u0275element(6,"mat-icon",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",5),n.\u0275\u0275template(8,Pk,1,1,"ts-dynamic-form-grid",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",7),n.\u0275\u0275template(10,Ak,3,3,"button",8),n.\u0275\u0275template(11,Rk,3,5,"button",9),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(4,4,t.formDialog.title)," "),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",t.formDialog.dynamicForm),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.formDialog.cancelBtnTitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.formDialog.okBtnTitle)}}Em.\u0275fac=function(e){return new(e||Em)},Em.\u0275cmp=n.\u0275\u0275defineComponent({type:Em,selectors:[["ts-dynamic-form-grid"]],inputs:{dynamicForm:"dynamicForm"},decls:1,vars:1,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["novalidate","",3,"formGroup",4,"ngIf"],["novalidate","",3,"formGroup"],[3,"dynamicForm","formRow",4,"ngFor","ngForOf"],[3,"dynamicForm","formRow"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,Tk,2,1,"div",0),2&e&&n.\u0275\u0275property("ngIf",t.dynamicForm)},dependencies:[y.NgForOf,y.NgIf,b._Y,b.JL,b.sg,xm]});class yf{constructor(e){this.formDialog=e}get isValid(){return this.formDialog.dynamicForm.isValid}}yf.\u0275fac=function(e){return new(e||yf)(n.\u0275\u0275directiveInject(E.eJ))},yf.\u0275cmp=n.\u0275\u0275defineComponent({type:yf,selectors:[["ts-form-dialog"]],decls:1,vars:1,consts:[["class","form-dialog",4,"ngIf"],[1,"form-dialog"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-content","",1,"dialog-content-wrapper"],[3,"dynamicForm",4,"ngIf"],["mat-dialog-actions","",1,"dialog-action-buttons"],["mat-button","",3,"mat-dialog-close",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","mat-dialog-close",4,"ngIf"],[3,"dynamicForm"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"disabled","mat-dialog-close"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,kk,12,6,"div",0),2&e&&n.\u0275\u0275property("ngIf",t.formDialog)},dependencies:[y.NgIf,Em,U.eB,E.aO,E.YS,E.Rb,E.ev,A.Hw,w.X$],styles:[".form-dialog[_ngcontent-%COMP%]   .dialog-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:356px;height:100%;overflow:auto!important}[mat-dialog-actions][_ngcontent-%COMP%]{margin:0 0 9px!important;display:flex;flex-direction:row;justify-content:flex-end}"]});class aa{}aa.\u0275fac=function(e){return new(e||aa)},aa.\u0275mod=n.\u0275\u0275defineNgModule({type:aa}),aa.\u0275inj=n.\u0275\u0275defineInjector({});class yc{}yc.\u0275fac=function(e){return new(e||yc)},yc.\u0275mod=n.\u0275\u0275defineNgModule({type:yc}),yc.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,z.x4,U.yu,A.Ps,aa]});class Ms{}Ms.\u0275fac=function(e){return new(e||Ms)},Ms.\u0275mod=n.\u0275\u0275defineNgModule({type:Ms}),Ms.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,w.aw,z.x4,U.yu,A.Ps,E.yj,aa,Vt,sn]});class Cc{}Cc.\u0275fac=function(e){return new(e||Cc)},Cc.\u0275mod=n.\u0275\u0275defineNgModule({type:Cc}),Cc.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.UX,b.u5,aa,Ms,z.x4,et.uw,Ne.FA,Vi.XK,U.yu,Ze.AA,A.Ps,Se.Zh,yc,w.aw,ce.D8,sn,w.aw]});class tS{static required(e){return t=>t.value?.getValue(e)?null:{required:!0}}static maxLength(e,t){return i=>i.value?.getValue(e).length>t?{maxlength:!0}:null}}class nS extends vE{constructor(){super(...arguments),this.input=this.locatorFor(".localizable-text-input-container-control")}static with(e){return new dd.oD(nS,e)}getValue(){var e=this;return(0,_.Z)(function*(){return(yield e.input()).getProperty("value")})()}setValue(e){var t=this;return(0,_.Z)(function*(){const i=yield t.input();yield i.clear(),e&&(yield i.sendKeys(e)),yield i.setInputValue(e)})()}}function Nk(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",10),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("svgIcon",t.config.trigger.svgIconName)}}function Vk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",11),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.config.trigger.caption)}}function Fk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",5),n.\u0275\u0275listener("menuOpened",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onMenuOpened())}),n.\u0275\u0275template(1,Nk,1,1,"mat-icon",6),n.\u0275\u0275template(2,Vk,2,1,"span",7),n.\u0275\u0275elementStart(3,"div",8),n.\u0275\u0275element(4,"div",9),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext(),i=n.\u0275\u0275reference(4);n.\u0275\u0275property("matMenuTriggerFor",i)("disabled",t.config.trigger.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.config.trigger.svgIconName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.config.trigger.caption)}}function Lk(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-divider"),2&a){const t=n.\u0275\u0275nextContext().index;n.\u0275\u0275styleProp("visibility",0===t?"hidden":"visible")}}function Ok(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",15),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption)}}function jk(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",23),2&a){const t=n.\u0275\u0275nextContext(3).$implicit;n.\u0275\u0275property("svgIcon",t.svgIconName)}}function Bk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",21),n.\u0275\u0275template(1,jk,1,1,"mat-icon",22),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.svgIconName)}}nS.hostSelector="ts-localizable-text-input";const Uk=function(a){return{"actions-menu-button-with-icon":a}};function Gk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onMenuItemContainerClick(r,s))}),n.\u0275\u0275elementStart(1,"button",17),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext().$implicit,s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onMenuItemClick(r))}),n.\u0275\u0275elementStart(2,"div",18),n.\u0275\u0275template(3,Bk,2,1,"span",19),n.\u0275\u0275elementStart(4,"span",20),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()()()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",i.isMenuItemDisabled(t))("ngClass",n.\u0275\u0275pureFunction1(4,Uk,i.hasIcons())),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.hasIcons()),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.caption)}}function zk(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Lk,1,2,"mat-divider",12),n.\u0275\u0275template(2,Ok,2,1,"div",13),n.\u0275\u0275template(3,Gk,6,6,"ng-template",null,14,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275reference(4),r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.code===r.dividerItemCode)("ngIfElse",i),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.code===r.dividerItemCode&&t.caption)}}const vD={code:"__divider",caption:null};Object.freeze(vD);class Sc{constructor(){this.menuItemClick=new n.EventEmitter}}Sc.\u0275fac=function(e){return new(e||Sc)},Sc.\u0275dir=n.\u0275\u0275defineDirective({type:Sc,outputs:{menuItemClick:"menuItemClick"}});class bc extends Sc{constructor(){super(...arguments),this.dividerItemCode=vD.code}isMenuItemDisabled(e){return!0===e.disabled}onMenuItemClick(e){e.handler&&e.handler(),this.menuItemClick.emit(e.code)}onMenuItemContainerClick(e,t){this.isMenuItemDisabled(t)&&e.stopPropagation()}hasIcons(){return this.config?.menuItems?.some(e=>e.svgIconName)}trackByCode(e,t){return t.code}onMenuOpened(){this.visibleMenuItems=this.config?.menuItems?.filter(e=>!e.hidden)??[]}}bc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(bc)))(t||bc)}}(),bc.\u0275cmp=n.\u0275\u0275defineComponent({type:bc,selectors:[["ts-actions-menu"]],inputs:{config:"config"},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:7,consts:[[1,"actions-menu-trigger-wrapper",3,"matMenuTriggerFor","menuOpened"],["mat-button","","class","actions-menu-trigger default",3,"matMenuTriggerFor","disabled","menuOpened",4,"ngIf"],[1,"actions-menu-panel",3,"overlapTrigger"],["menu","matMenu"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-button","",1,"actions-menu-trigger","default",3,"matMenuTriggerFor","disabled","menuOpened"],["class","actions-menu-trigger-icon",3,"svgIcon",4,"ngIf"],["class","actions-menu-trigger-caption",4,"ngIf"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[1,"actions-menu-trigger-icon",3,"svgIcon"],[1,"actions-menu-trigger-caption"],[3,"visibility",4,"ngIf","ngIfElse"],["class","menu-divider-caption",4,"ngIf"],["menuItem",""],[1,"menu-divider-caption"],[3,"click"],["mat-menu-item","",3,"disabled","ngClass","click"],[1,"actions-menu-item-button-content"],["class","actions-menu-item-icon-wrapper",4,"ngIf"],[1,"actions-menu-item-text"],[1,"actions-menu-item-icon-wrapper"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){if(1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("menuOpened",function(){return t.onMenuOpened()}),n.\u0275\u0275projection(1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,Fk,5,4,"button",1),n.\u0275\u0275elementStart(3,"mat-menu",2,3),n.\u0275\u0275template(5,zk,5,3,"ng-container",4),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(4);n.\u0275\u0275property("matMenuTriggerFor",i),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",null==t.config?null:t.config.trigger),n.\u0275\u0275advance(1),n.\u0275\u0275classMap(null==t.config?null:t.config.cssClasses),n.\u0275\u0275property("overlapTrigger",null==t.config?null:t.config.overlapTrigger),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.visibleMenuItems)("ngForTrackBy",t.trackByCode)}},dependencies:[y.NgClass,y.NgForOf,y.NgIf,U.eB,$a.d,A.Hw,qn.W0,qn.tN,qn.D8],styles:["ts-actions-menu .actions-menu-trigger-wrapper{display:flex;align-items:center}.mat-menu-content .menu-divider-caption{padding:0 16px;text-transform:uppercase;font-size:14px;color:#4b7fc7;height:33px;line-height:33px}.actions-menu-panel{max-width:500px!important}.actions-menu-panel button.mat-menu-item{height:33px!important;line-height:33px!important;padding-right:30px}.actions-menu-panel button.mat-menu-item.actions-menu-button-with-icon{padding-left:12px!important}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content{display:flex;flex-direction:row;align-items:center}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content .actions-menu-item-icon-wrapper{width:16px;height:16px;padding-right:8px;line-height:16px}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content .actions-menu-item-icon-wrapper mat-icon{width:16px;height:16px;margin:0!important}.actions-menu-panel mat-divider{margin:5px 12px}\n"],encapsulation:2,changeDetection:0});const Zk=function(a,e,t){return{menuItems:a,overlapTrigger:e,cssClasses:t}};class Cf extends Sc{constructor(e,t){super(),this._matIconRegistry=e,this._domSanitizer=t,this.menuItems=[],this.cssClasses="",this.overlapTrigger=!0,this._registerIcons()}_registerIcons(){this._matIconRegistry.addSvgIconLiteral("vertical-dots",this._domSanitizer.bypassSecurityTrustHtml(f(53409)))}}function qk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"a",6),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext();n.\u0275\u0275property("routerLink",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.formatTextValue(i,r.columnDataSchema.valueType))}}function $k(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2).$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(i.formatTextValue(t,i.columnDataSchema.valueType))}}function Wk(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,qk,2,2,"a",4),n.\u0275\u0275template(2,$k,2,1,"ng-template",null,5,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.columnDataSchema.linkGenerator&&i.columnDataSchema.linkGenerator(i.record))("ngIfElse",t)}}function Yk(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"span",2),n.\u0275\u0275template(2,Wk,4,2,"ng-container",3),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isDisplayedAsText())}}Cf.\u0275fac=function(e){return new(e||Cf)(n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},Cf.\u0275cmp=n.\u0275\u0275defineComponent({type:Cf,selectors:[["ts-compact-actions-menu"]],inputs:{menuItems:"menuItems",cssClasses:"cssClasses",overlapTrigger:"overlapTrigger"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:5,consts:[[3,"config","menuItemClick"],["svgIcon","vertical-dots"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"ts-actions-menu",0),n.\u0275\u0275listener("menuItemClick",function(r){return t.menuItemClick.emit(r)}),n.\u0275\u0275element(1,"mat-icon",1),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("config",n.\u0275\u0275pureFunction3(1,Zk,t.menuItems,t.overlapTrigger,t.cssClasses))},dependencies:[A.Hw,bc],styles:["[_nghost-%COMP%]{display:block}mat-icon[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}"],changeDetection:0});class Tm extends Ss{getValue(){if(!this.isDisplayedAsText())throw new l.ArgumentOutOfRangeException("Only text columns can be displayed via NamedFolderTableCellComponent.");return super.getValue()}}Tm.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Tm)))(t||Tm)}}(),Tm.\u0275cmp=n.\u0275\u0275defineComponent({type:Tm,selectors:[["ts-named-folder-table-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","named-folder-cell-wrapper",4,"ngIf"],[1,"named-folder-cell-wrapper"],[1,"folder-icon"],[4,"ngIf"],[3,"routerLink",4,"ngIf","ngIfElse"],["elseBlock",""],[3,"routerLink"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,Yk,3,1,"div",0),2&e&&n.\u0275\u0275property("ngIf",!t.isEmpty()&&t.getValue())},dependencies:[y.NgIf,Ou.rH],styles:[".named-folder-cell-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.named-folder-cell-wrapper[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin-right:8px;background:url(folder-icon.svg) no-repeat}"]});class vc{}vc.\u0275fac=function(e){return new(e||vc)},vc.\u0275mod=n.\u0275\u0275defineNgModule({type:vc}),vc.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ye,Xi,{provide:yD,useValue:new class MR{constructor(e,t,i){this._getResourcesEventName=e,this._setResourcesEventName=t,this._defaultResources=i}get defaultResources(){return this._defaultResources}get getResourcesEventName(){return l.ValidationUtilities.checkStringIsNotEmpty("getResourcesEventName",this._getResourcesEventName)}get setResourcesEventName(){return l.ValidationUtilities.checkStringIsNotEmpty("setResourcesEventName",this._setResourcesEventName)}}("getFilterableListResources","setFilterableListResources",{localizableStrings:{NoDataPlaceholder:"No data",SearchPlaceholder:"Search",FilterFavoriteTitle:"Only favorites",RemoveFromFavoriteButtonTitle:"Remove from favorites",AddToFavoriteButtonTitle:"Add to favorites",ClearButtonTitle:"Cancel"}})}],imports:[y.CommonModule,b.u5,N.wp,A.Ps,z.x4,jo.gR,U.yu]});var ID=f(28879);class DD{constructor(e,t){this._value=e,this._property=t}get property(){return this._property}get value(){return this._value}canMatchItem(e){if(!e)return!1;const t=e[this.property],i=null!=t,r=typeof t===this._value.constructor.name.toLowerCase();return i&&r}isItemMatch(e){return this.canMatchItem(e)&&this.isValueMatch(e[this.property])}}class Sf extends DD{constructor(e,t){super(e,t||Sf.DEFAULT_PROPERTY)}isValueMatch(e){const t=e.toLowerCase(),i=this.value.toLowerCase(),r=(0,ID.Z)(t.split(" "));return(0,ID.Z)(i.split(" ")).every(o=>r.find(c=>c.includes(o)))}}Sf.DEFAULT_PROPERTY="caption";class Qk extends DD{isValueMatch(e){return e===this.value}}class Pm{_isFilterNotFalsy(e){return e&&null!==e.value&&void 0!==e.value}transform(e,t){if(!e)return[];if(!t)return e;let i=[...e];return t.filter(this._isFilterNotFalsy).forEach(s=>{i=i.filter(o=>s.isItemMatch(o))}),i}}function Jk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.filteringValue="")}),n.\u0275\u0275element(1,"mat-icon",10),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();let i;n.\u0275\u0275advance(1),n.\u0275\u0275property("title",null==(i=n.\u0275\u0275pipeBind1(2,1,t.localizableStrings$))?null:i.ClearButtonTitle)}}function Kk(a,e){1&a&&n.\u0275\u0275element(0,"mat-icon",11)}function Xk(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-list-item",16),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.onItemSelected(s))}),n.\u0275\u0275elementStart(1,"button",17),n.\u0275\u0275listener("click",function(r){const o=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(c.toggleFavorite(o,r))}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",18),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(3);let r;n.\u0275\u0275classProp("active",t.isActive),n.\u0275\u0275attribute("data-qa",t.caption),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",t.isFavorite?i.favoriteCssClass:i.regularCssClass)("title",t.isFavorite?null==(r=n.\u0275\u0275pipeBind1(2,6,i.localizableStrings$))?null:r.RemoveFromFavoriteButtonTitle:null==(r=n.\u0275\u0275pipeBind1(3,8,i.localizableStrings$))?null:r.AddToFavoriteButtonTitle),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function eN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275template(1,Xk,6,10,"mat-list-item",15),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t)}}function tN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",19),n.\u0275\u0275element(1,"div",20),n.\u0275\u0275elementStart(2,"div",21),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext(2);let i;n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",null==(i=n.\u0275\u0275pipeBind1(4,1,t.localizableStrings$))?null:i.NoDataPlaceholder," ")}}function nN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-action-list"),n.\u0275\u0275template(1,eN,2,1,"div",12),n.\u0275\u0275template(2,tN,5,3,"ng-template",null,13,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&a){const t=e.ngIf,i=n.\u0275\u0275reference(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.length>0)("ngIfElse",i)}}Pm.\u0275fac=function(e){return new(e||Pm)},Pm.\u0275pipe=n.\u0275\u0275definePipe({name:"filter",type:Pm,pure:!0});let fn=class extends Te{constructor(e,t,i){super(i),this._resourcesService=e,this._changeDetector=t,this._filters=[],this.regularCssClass="regular",this.favoriteCssClass="favorite",this.filteringValue="",this.displayOnlyFavorites=!1,this.items=[],this.itemSelected=new n.EventEmitter,this.favoriteStateChanged=new n.EventEmitter}get _searchFilter(){return new Sf(this.filteringValue)}get _favoritesFilter(){return new Qk(this.displayOnlyFavorites,"isFavorite")}get filters(){return this._filters=[this._searchFilter],this.displayOnlyFavorites&&this._filters.push(this._favoritesFilter),this._filters}get localizableStrings$(){return this._resources$.pipe((0,h.U)(e=>e.localizableStrings))}ngOnInit(){this._resources$=this._resourcesService.getResources()}onItemSelected(e){const t={id:e.id};this.itemSelected.emit(t)}toggleFavorite(e,t){t.stopPropagation();const{id:i,isFavorite:r}=e,s={id:i,isFavorite:!r};this.favoriteStateChanged.emit(s)}onFilteringValueChanged(e){this.filteringValue=e,this._changeDetector.detectChanges()}toggleDisplayOnlyFavorites(){this.displayOnlyFavorites=!this.displayOnlyFavorites,this._changeDetector.detectChanges()}};fn.\u0275fac=function(e){return new(e||fn)(n.\u0275\u0275directiveInject(Xi),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(n.Injector))},fn.\u0275cmp=n.\u0275\u0275defineComponent({type:fn,selectors:[["ts-filterable-list"]],inputs:{items:"items"},outputs:{itemSelected:"itemSelected",favoriteStateChanged:"favoriteStateChanged"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:14,vars:17,consts:[[1,"filterable-list-container",3,"ngStyle","ngClass"],[1,"filter-input-container"],[1,"display-only-favorites-button-container"],["mat-icon-button","","data-qa","filter-favorite-btn",3,"ngClass","title","click"],["floatLabel","never"],["matInput","","type","text","spellcheck","false","autocomplete","off","data-qa","search-input",3,"value","placeholder","input"],["matSuffix","","mat-icon-button","","aria-label","Clear","data-qa","clear-filter-btn",3,"click",4,"ngIf","ngIfElse"],["searchIcon",""],[4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear","data-qa","clear-filter-btn",3,"click"],["matSuffix","",1,"clear-icon",3,"title"],["matSuffix","",1,"search-icon"],["class","items-list",4,"ngIf","ngIfElse"],["noData",""],[1,"items-list"],["disableRipple","",3,"active","click",4,"ngFor","ngForOf"],["disableRipple","",3,"click"],["mat-icon-button","","data-qa","favorite-btn",3,"ngClass","title","click"],[1,"item-caption"],["data-qa","blank-slate",1,"blank-slate"],["data-qa","blank-slate-icon",1,"icon"],["data-qa","blank-slate-label",1,"label"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"button",3),n.\u0275\u0275listener("click",function(){return t.toggleDisplayOnlyFavorites()}),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"mat-form-field",4)(7,"input",5),n.\u0275\u0275listener("input",function(r){return t.onFilteringValueChanged(r.target.value)}),n.\u0275\u0275pipe(8,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,Jk,3,3,"button",6),n.\u0275\u0275template(10,Kk,1,0,"ng-template",null,7,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(12,nN,4,2,"mat-action-list",8),n.\u0275\u0275pipe(13,"filter"),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(11);let r,s;n.\u0275\u0275property("ngStyle",t.styles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngClass",t.displayOnlyFavorites?t.favoriteCssClass:t.regularCssClass)("title",null==(r=n.\u0275\u0275pipeBind1(5,10,t.localizableStrings$))?null:r.FilterFavoriteTitle),n.\u0275\u0275advance(3),n.\u0275\u0275property("value",t.filteringValue)("placeholder",null==(s=n.\u0275\u0275pipeBind1(8,12,t.localizableStrings$))?null:s.SearchPlaceholder),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.filteringValue)("ngIfElse",i),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind2(13,14,t.items,t.filters))}},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,N.v_,N.nX,A.Hw,z.k0,jo.Zj,jo.oh,U.eB,y.AsyncPipe,Pm],styles:[".filterable-list-container{display:flex;flex-direction:column;height:100%;min-height:inherit;max-height:inherit}.filterable-list-container .display-only-favorites-button-container .mat-icon-button{height:32px;width:32px}.filterable-list-container .items-list{margin-top:8px}.filterable-list-container .blank-slate{display:flex;flex-direction:column;align-items:center}.filterable-list-container .blank-slate .label{color:#757575;font-size:12px;font-family:Open Sans,Regular,sans-serif;margin-top:16px}.filterable-list-container .blank-slate .icon{width:100px;height:104px;margin-top:24px;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iaWNvbl9zZWFyY2hfYmlnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTA0IiB2aWV3Qm94PSIwIDAgMTAwIDEwNCI+DQogIDxnIGlkPSJQYXRoXzc0NTciIGRhdGEtbmFtZT0iUGF0aCA3NDU3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcxNC44MTggLTY0OS41MTIpIiBmaWxsPSJyZ2JhKDEwMCwxODQsMjIzLDAuMSkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI+DQogICAgPHBhdGggZD0iTSAxNzE4LjYwMTY4NDU3MDMxMyA3NTIuNTA1ODU5Mzc1IEMgMTcyMS41NjE2NDU1MDc4MTMgNzUwLjM3MDQyMjM2MzI4MTMgMTcyNC4zMTk3MDIxNDg0MzggNzQ3LjEzMzIzOTc0NjA5MzggMTcyNi44MzQ1OTQ3MjY1NjMgNzQyLjgzNTgxNTQyOTY4NzUgQyAxNzI5LjQyMTI2NDY0ODQzOCA3MzguNDE1NTg4Mzc4OTA2MyAxNzMwLjc1NTM3MTA5Mzc1IDczNC41MjIwMzM2OTE0MDYzIDE3MzAuODEwOTEzMDg1OTM4IDczNC4zNTgzOTg0Mzc1IEwgMTczMS4wMDY1OTE3OTY4NzUgNzMzLjc4MTkyMTM4NjcxODggTCAxNzMwLjU4NDM1MDU4NTkzOCA3MzMuMzQzMzIyNzUzOTA2MyBDIDE3MjYuMjg1NTIyNDYwOTM4IDcyOC44NzkzMzM0OTYwOTM4IDE3MjIuOTE0MzA2NjQwNjI1IDcyMy43MTg5MzMxMDU0Njg4IDE3MjAuNTY0MzMxMDU0Njg4IDcxOC4wMDUzNzEwOTM3NSBDIDE3MTguMTI5NTE2NjAxNTYzIDcxMi4wODU1NzEyODkwNjI1IDE3MTYuODk1MDE5NTMxMjUgNzA1LjgwNzY3ODIyMjY1NjMgMTcxNi44OTUwMTk1MzEyNSA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE3MTYuODk1MDE5NTMxMjUgNjkyLjc1MTk1MzEyNSAxNzE4LjE3NjUxMzY3MTg3NSA2ODYuMzU1NzczOTI1NzgxMyAxNzIwLjcwMzczNTM1MTU2MyA2ODAuMzM1MjY2MTEzMjgxMyBDIDE3MjMuMTQ0ODk3NDYwOTM4IDY3NC41MTk5NTg0OTYwOTM4IDE3MjYuNjM5NzcwNTA3ODEzIDY2OS4yOTczMDIyNDYwOTM4IDE3MzEuMDkxMTg2NTIzNDM4IDY2NC44MTIzMTY4OTQ1MzEzIEMgMTczNS41NDIxMTQyNTc4MTMgNjYwLjMyNzgxOTgyNDIxODggMTc0MC43MjQ4NTM1MTU2MjUgNjU2LjgwNzEyODkwNjI1IDE3NDYuNDk1MzYxMzI4MTI1IDY1NC4zNDgwODM0OTYwOTM4IEMgMTc1Mi40Njg3NSA2NTEuODAyNjczMzM5ODQzOCAxNzU4LjgxNDY5NzI2NTYyNSA2NTAuNTEyMDIzOTI1NzgxMyAxNzY1LjM1NzA1NTY2NDA2MyA2NTAuNTEyMDIzOTI1NzgxMyBDIDE3NzEuODk5MTY5OTIxODc1IDY1MC41MTIwMjM5MjU3ODEzIDE3NzguMjQ0ODczMDQ2ODc1IDY1MS44MDI2NzMzMzk4NDM4IDE3ODQuMjE4MjYxNzE4NzUgNjU0LjM0ODA4MzQ5NjA5MzggQyAxNzg5Ljk4ODc2OTUzMTI1IDY1Ni44MDcxMjg5MDYyNSAxNzk1LjE3MTUwODc4OTA2MyA2NjAuMzI3ODE5ODI0MjE4OCAxNzk5LjYyMjU1ODU5Mzc1IDY2NC44MTIzMTY4OTQ1MzEzIEMgMTgwNC4wNzM5NzQ2MDkzNzUgNjY5LjI5NzM2MzI4MTI1IDE4MDcuNTY4ODQ3NjU2MjUgNjc0LjUyMDAxOTUzMTI1IDE4MTAuMDEwMTMxODM1OTM4IDY4MC4zMzUyNjYxMTMyODEzIEMgMTgxMi41Mzc0NzU1ODU5MzggNjg2LjM1NTgzNDk2MDkzNzUgMTgxMy44MTg5Njk3MjY1NjMgNjkyLjc1MTk1MzEyNSAxODEzLjgxODk2OTcyNjU2MyA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE4MTMuODE4OTY5NzI2NTYzIDcwNS45Mzk4MTkzMzU5Mzc1IDE4MTIuNTM3NDc1NTg1OTM4IDcxMi4zMzU3NTQzOTQ1MzEzIDE4MTAuMDEwMTMxODM1OTM4IDcxOC4zNTYxNDAxMzY3MTg4IEMgMTgwNy41Njg4NDc2NTYyNSA3MjQuMTcxMjY0NjQ4NDM3NSAxODA0LjA3Mzk3NDYwOTM3NSA3MjkuMzkzODU5ODYzMjgxMyAxNzk5LjYyMjU1ODU5Mzc1IDczMy44Nzg3ODQxNzk2ODc1IEMgMTc5NS4xNzE1MDg3ODkwNjMgNzM4LjM2MzI4MTI1IDE3ODkuOTg4NzY5NTMxMjUgNzQxLjg4MzkxMTEzMjgxMjUgMTc4NC4yMTgyNjE3MTg3NSA3NDQuMzQyOTU2NTQyOTY4OCBDIDE3NzguMjQ0ODczMDQ2ODc1IDc0Ni44ODgzNjY2OTkyMTg4IDE3NzEuODk5MDQ3ODUxNTYzIDc0OC4xNzkwMTYxMTMyODEzIDE3NjUuMzU3MDU1NjY0MDYzIDc0OC4xNzkwMTYxMTMyODEzIEMgMTc1OS42MDc1NDM5NDUzMTMgNzQ4LjE3OTAxNjExMzI4MTMgMTc1My45Nzk4NTgzOTg0MzggNzQ3LjE3MzUyMjk0OTIxODggMTc0OC42MzA2MTUyMzQzNzUgNzQ1LjE5MDM2ODY1MjM0MzggTCAxNzQ4LjA3MDQzNDU3MDMxMyA3NDQuOTgyNjY2MDE1NjI1IEwgMTc0Ny42MjIwNzAzMTI1IDc0NS4zNzc1MDI0NDE0MDYzIEMgMTc0Ny4yODQ3OTAwMzkwNjMgNzQ1LjY3NDQ5OTUxMTcxODggMTc0Ni45NDcxNDM1NTQ2ODggNzQ1LjkyMTgxMzk2NDg0MzggMTc0Ni41NTkzMjYxNzE4NzUgNzQ2LjE1NTgyMjc1MzkwNjMgQyAxNzM3LjA4NTQ0OTIxODc1IDc1MS44ODMxNzg3MTA5Mzc1IDE3MjkuNjYxNzQzMTY0MDYzIDc1Mi40NDk4MjkxMDE1NjI1IDE3MTguNjAxNjg0NTcwMzEzIDc1Mi41MDU4NTkzNzUgWiIgc3Ryb2tlPSJub25lIi8+DQogICAgPHBhdGggZD0iTSAxNzY1LjM1NzA1NTY2NDA2MyA2NTEuNTEyMDIzOTI1NzgxMyBDIDE3NTguOTUwMTk1MzEyNSA2NTEuNTEyMDIzOTI1NzgxMyAxNzUyLjczNjIwNjA1NDY4OCA2NTIuNzc1NzU2ODM1OTM3NSAxNzQ2Ljg4NzQ1MTE3MTg3NSA2NTUuMjY4MDY2NDA2MjUgQyAxNzQxLjIzNjIwNjA1NDY4OCA2NTcuNjc2MjA4NDk2MDkzOCAxNzM2LjE2MDQwMDM5MDYyNSA2NjEuMTI0Mzg5NjQ4NDM3NSAxNzMxLjgwMDkwMzMyMDMxMyA2NjUuNTE2Nzg0NjY3OTY4OCBDIDE3MjcuNDQwNDI5Njg3NSA2NjkuOTEwMTU2MjUgMTcyNC4wMTY5Njc3NzM0MzggNjc1LjAyNjA2MjAxMTcxODggMTcyMS42MjU4NTQ0OTIxODggNjgwLjcyMjI5MDAzOTA2MjUgQyAxNzE5LjE1MDI2ODU1NDY4OCA2ODYuNjE5NjI4OTA2MjUgMTcxNy44OTUwMTk1MzEyNSA2OTIuODg1NTU5MDgyMDMxMyAxNzE3Ljg5NTAxOTUzMTI1IDY5OS4zNDYwMDgzMDA3ODEzIEMgMTcxNy44OTUwMTk1MzEyNSA3MDUuNjc2NTEzNjcxODc1IDE3MTkuMTA0MjQ4MDQ2ODc1IDcxMS44MjY0NzcwNTA3ODEzIDE3MjEuNDg5MTM1NzQyMTg4IDcxNy42MjUgQyAxNzIzLjc5MTAxNTYyNSA3MjMuMjIxNjc5Njg3NSAxNzI3LjA5MzM4Mzc4OTA2MyA3MjguMjc2NjcyMzYzMjgxMyAxNzMxLjMwNDU2NTQyOTY4OCA3MzIuNjQ5NjU4MjAzMTI1IEwgMTczMi4xNDkyOTE5OTIxODggNzMzLjUyNjc5NDQzMzU5MzggTCAxNzMxLjc1NzgxMjUgNzM0LjY3OTg3MDYwNTQ2ODggQyAxNzMxLjU3OTIyMzYzMjgxMyA3MzUuMjA2MDU0Njg3NSAxNzI4LjEyNDc1NTg1OTM3NSA3NDUuMTg4OTY0ODQzNzUgMTcyMS4zOTczMzg4NjcxODggNzUxLjQ3NjY4NDU3MDMxMjUgQyAxNzI1LjExMzY0NzQ2MDkzOCA3NTEuNDEyNTk3NjU2MjUgMTcyOC40MDk1NDU4OTg0MzggNzUxLjIzMjIzODc2OTUzMTMgMTczMS41NzE0MTExMzI4MTMgNzUwLjcyNDc5MjQ4MDQ2ODggQyAxNzM2Ljc0NzMxNDQ1MzEyNSA3NDkuODk0MTA0MDAzOTA2MyAxNzQxLjIwOTk2MDkzNzUgNzQ4LjIyMTE5MTQwNjI1IDE3NDYuMDQyNjAyNTM5MDYzIDc0NS4yOTk2ODI2MTcxODc1IEMgMTc0Ni4zNzgwNTE3NTc4MTMgNzQ1LjA5NzI5MDAzOTA2MjUgMTc0Ni42Njk5MjE4NzUgNzQ0Ljg4MzU0NDkyMTg3NSAxNzQ2Ljk2MTA1OTU3MDMxMyA3NDQuNjI3MDc1MTk1MzEyNSBMIDE3NDcuODU3Nzg4MDg1OTM4IDc0My44MzczNDEzMDg1OTM4IEwgMTc0OC45NzgxNDk0MTQwNjMgNzQ0LjI1MjY4NTU0Njg3NSBDIDE3NTQuMjE1ODIwMzEyNSA3NDYuMTk0NDU4MDA3ODEyNSAxNzU5LjcyNjU2MjUgNzQ3LjE3OTAxNjExMzI4MTMgMTc2NS4zNTcwNTU2NjQwNjMgNzQ3LjE3OTAxNjExMzI4MTMgQyAxNzcxLjc2MzY3MTg3NSA3NDcuMTc5MDE2MTEzMjgxMyAxNzc3Ljk3NzUzOTA2MjUgNzQ1LjkxNTI4MzIwMzEyNSAxNzgzLjgyNjE3MTg3NSA3NDMuNDIyOTczNjMyODEyNSBDIDE3ODkuNDc3Mjk0OTIxODc1IDc0MS4wMTQ4MzE1NDI5Njg4IDE3OTQuNTUzMjIyNjU2MjUgNzM3LjU2NjcxMTQyNTc4MTMgMTc5OC45MTI3MTk3MjY1NjMgNzMzLjE3NDMxNjQwNjI1IEMgMTgwMy4yNzMzMTU0Mjk2ODggNzI4Ljc4MTAwNTg1OTM3NSAxODA2LjY5Njc3NzM0Mzc1IDcyMy42NjUyMjIxNjc5Njg4IDE4MDkuMDg4MDEyNjk1MzEzIDcxNy45NjkxMTYyMTA5Mzc1IEMgMTgxMS41NjM3MjA3MDMxMjUgNzEyLjA3MTg5OTQxNDA2MjUgMTgxMi44MTg5Njk3MjY1NjMgNzA1LjgwNjE1MjM0Mzc1IDE4MTIuODE4OTY5NzI2NTYzIDY5OS4zNDYwMDgzMDA3ODEzIEMgMTgxMi44MTg5Njk3MjY1NjMgNjkyLjg4NTU1OTA4MjAzMTMgMTgxMS41NjM3MjA3MDMxMjUgNjg2LjYxOTY4OTk0MTQwNjMgMTgwOS4wODgwMTI2OTUzMTMgNjgwLjcyMjI5MDAzOTA2MjUgQyAxODA2LjY5Njc3NzM0Mzc1IDY3NS4wMjYxMjMwNDY4NzUgMTgwMy4yNzMzMTU0Mjk2ODggNjY5LjkxMDIxNzI4NTE1NjMgMTc5OC45MTI3MTk3MjY1NjMgNjY1LjUxNjc4NDY2Nzk2ODggQyAxNzk0LjU1MzIyMjY1NjI1IDY2MS4xMjQzODk2NDg0Mzc1IDE3ODkuNDc3Mjk0OTIxODc1IDY1Ny42NzYyMDg0OTYwOTM4IDE3ODMuODI2MTcxODc1IDY1NS4yNjgwNjY0MDYyNSBDIDE3NzcuOTc3NTM5MDYyNSA2NTIuNzc1NzU2ODM1OTM3NSAxNzcxLjc2MzY3MTg3NSA2NTEuNTEyMDIzOTI1NzgxMyAxNzY1LjM1NzA1NTY2NDA2MyA2NTEuNTEyMDIzOTI1NzgxMyBNIDE3NjUuMzU3MDU1NjY0MDYzIDY0OS41MTIwMjM5MjU3ODEzIEMgMTc5Mi42NzUwNDg4MjgxMjUgNjQ5LjUxMjAyMzkyNTc4MTMgMTgxNC44MTg5Njk3MjY1NjMgNjcxLjgyMjk5ODA0Njg3NSAxODE0LjgxODk2OTcyNjU2MyA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE4MTQuODE4OTY5NzI2NTYzIDcyNi44Njc5ODA5NTcwMzEzIDE3OTIuNjc1MDQ4ODI4MTI1IDc0OS4xNzkwMTYxMTMyODEzIDE3NjUuMzU3MDU1NjY0MDYzIDc0OS4xNzkwMTYxMTMyODEzIEMgMTc1OS4zNTQ5ODA0Njg3NSA3NDkuMTc5MDE2MTEzMjgxMyAxNzUzLjYwNDk4MDQ2ODc1IDc0OC4xMDEwMTMxODM1OTM4IDE3NDguMjgyOTU4OTg0Mzc1IDc0Ni4xMjc5OTA3MjI2NTYzIEMgMTc0Ny45NDc5OTgwNDY4NzUgNzQ2LjQyMjk3MzYzMjgxMjUgMTc0Ny41NjQ5NDE0MDYyNSA3NDYuNzE2OTc5OTgwNDY4OCAxNzQ3LjA3NjA0OTgwNDY4OCA3NDcuMDEyMDIzOTI1NzgxMyBDIDE3MzYuMzIzOTc0NjA5Mzc1IDc1My41MTIwMjM5MjU3ODEzIDE3MjguMDc5OTU2MDU0Njg4IDc1My41MTIwMjM5MjU3ODEzIDE3MTQuODE4OTY5NzI2NTYzIDc1My41MTIwMjM5MjU3ODEzIEMgMTcyNC41ODg5ODkyNTc4MTMgNzQ5LjM5Njk3MjY1NjI1IDE3MjkuNzc0MDQ3ODUxNTYzIDczNC4zMDIwMDE5NTMxMjUgMTcyOS44NjQwMTM2NzE4NzUgNzM0LjAzNjk4NzMwNDY4NzUgQyAxNzIxLjIyMzk5OTAyMzQzOCA3MjUuMDY1MDAyNDQxNDA2MyAxNzE1Ljg5NTAxOTUzMTI1IDcxMi44MzU5OTg1MzUxNTYzIDE3MTUuODk1MDE5NTMxMjUgNjk5LjM0NjAwODMwMDc4MTMgQyAxNzE1Ljg5NTAxOTUzMTI1IDY3MS44MjI5OTgwNDY4NzUgMTczOC4wMzc5NjM4NjcxODggNjQ5LjUxMjAyMzkyNTc4MTMgMTc2NS4zNTcwNTU2NjQwNjMgNjQ5LjUxMjAyMzkyNTc4MTMgWiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjNjRiOGRmIi8+DQogIDwvZz4NCiAgPGcgaWQ9Ikdyb3VwXzc3NjAiIGRhdGEtbmFtZT0iR3JvdXAgNzc2MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3MTQuODE4IC02NDkuNTEyKSI+DQogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8xMzM2IiBkYXRhLW5hbWU9IkVsbGlwc2UgMTMzNiIgY3g9IjEyLjI1IiBjeT0iMTIuMjUiIHI9IjEyLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzQ4LjA2OSA2ODIuMDQyKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjRiOGRmIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzUxMyIgZGF0YS1uYW1lPSJMaW5lIDUxMyIgeDE9IjEyLjQ2MyIgeTE9IjEyLjQ2MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2OS4xMDYgNzAyLjgyOSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY0YjhkZiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgPC9nPg0KPC9zdmc+DQo=);background-position:center}.filterable-list-container .mat-icon-button{background-color:transparent}.filterable-list-container .mat-icon-button.favorite{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojZmZiNzRkO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNOC41LDEuMWwyLjMsNC42NjcsNS4yLjcxLTMuNywzLjY1Mi44LDQuOTcxTDguNSwxMi43NjcsMy45LDE1LjFsLjktNC45NzFMMSw2LjQ3N2w1LjItLjcxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSAtMC4xKSIvPjxyZWN0IGNsYXNzPSJiIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4=);background-position:center}.filterable-list-container .mat-icon-button.regular{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojZGJkYmRiO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNOC41LDMuMyw5LjksNi4ybC4yLjUuNS4xLDMuMi40TDExLjYsOS40bC0uNC40LjEuNS41LDMuMUw5LDExLjhsLS41LS4yLS41LjJMNS4yLDEzLjJsLjYtMywuMS0uNS0uNC0uNEwzLjIsNy4xbDMuMS0uNC41LS4xTDcsNi4xLDguNSwzLjNNOC41LDEsNi4yLDUuNywxLDYuNCw0LjgsMTBsLS45LDUsNC42LTIuM0wxMy4xLDE1bC0uOC01TDE2LDYuNGwtNS4yLS43WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEpIi8+PHJlY3QgY2xhc3M9ImIiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIvPjwvc3ZnPg==);background-position:center}.filterable-list-container .mat-icon-button.regular:hover{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCjxkZWZzPiA8c3R5bGU+LmF7ZmlsbDojZmZiNzRkO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPg0KPHBhdGggY2xhc3M9ImEiIGQ9Ik04LjUsMy4zLDkuOSw2LjJsLjIuNS41LjEsMy4yLjRMMTEuNiw5LjRsLS40LjQuMS41LjUsMy4xTDksMTEuOGwtLjUtLjItLjUuMkw1LjIsMTMuMmwuNi0zLC4xLS41LS40LS40TDMuMiw3LjFsMy4xLS40LjUtLjFMNyw2LjEsOC41LDMuM004LjUsMSw2LjIsNS43LDEsNi40LDQuOCwxMGwtLjksNSw0LjYtMi4zTDEzLjEsMTVsLS44LTVMMTYsNi40bC01LjItLjdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSkiLz4NCjxyZWN0IGNsYXNzPSJiIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4=);background-position:center}.filter-input-container{display:flex;flex-direction:row;margin-right:10px;padding-left:6px}.filter-input-container .mat-form-field{font-size:13px;width:100%}.filter-input-container .mat-form-field input{font-family:Open Sans,Regular,sans-serif;color:#444}.filter-input-container .mat-form-field .mat-input-element{vertical-align:middle}.filter-input-container .mat-form-field .mat-form-field-ripple{top:1px;height:1px;background:#006ce0}.filter-input-container .mat-form-field .mat-form-field-underline{border-bottom:1px #c8c8c8 solid;background-color:transparent;margin-top:3px}.filter-input-container .mat-form-field .mat-form-field-wrapper{padding-top:5px;margin-bottom:-1.25em}.filter-input-container .mat-form-field .mat-form-field-empty.mat-form-field-label{padding-top:2px;color:#999}.filter-input-container .mat-form-field .mat-form-field-infix{border-top:none}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button,.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:18px;height:18px;margin-right:8px}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{color:#999;vertical-align:middle}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon.search-icon{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiPjxnIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzgwOTViMyIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI+PGNpcmNsZSBjeD0iNiIgY3k9IjYiIHI9IjQuNSIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTSA5LjQsOS40IDE0LDE0Ii8+PC9nPjwvc3ZnPg==)}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon.clear-icon{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPGcgaWQ9Ikdyb3VwXzIzNTUiIGRhdGEtbmFtZT0iR3JvdXAgMjM1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MyAtMjEzNCkiPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE0NiIgZGF0YS1uYW1lPSJMaW5lIDE0NiIgeTE9IjEwIiB4Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0Ni41IDIxMzcuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzc1NzU3NSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xNDciIGRhdGEtbmFtZT0iTGluZSAxNDciIHgyPSIxMCIgeTI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NDYuNSAyMTM3LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3NTc1NzUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xMDkyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAxMDkyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0MyAyMTM0KSIgZmlsbD0ibm9uZSIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.mat-list.mat-list-base.mat-action-list{padding-top:0;overflow:auto}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar{width:4px}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar-track{background:transparent;border:4px solid transparent;background-clip:content-box}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar-thumb{background:#999999;border-radius:4px}.mat-list.mat-list-base.mat-action-list .mat-list-item{font-size:13px;font-family:Open Sans,Regular,sans-serif;color:#444;height:33px;padding-left:6px;box-sizing:border-box}.mat-list.mat-list-base.mat-action-list .mat-list-item.active{background-color:#e5ebfb}.mat-list.mat-list-base.mat-action-list .mat-list-item:hover{background:#f2f5ff}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content{padding-left:8px}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content .mat-icon-button{height:16px;width:16px}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content .item-caption{padding-left:8px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\n"],encapsulation:3}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Array)],fn.prototype,"items",void 0),(0,m.gn)([(0,l.CrtOutput)(),(0,m.w6)("design:type",n.EventEmitter)],fn.prototype,"itemSelected",void 0),(0,m.gn)([(0,l.CrtOutput)(),(0,m.w6)("design:type",n.EventEmitter)],fn.prototype,"favoriteStateChanged",void 0),fn=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.FilterableList",reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,m.w6)("design:paramtypes",[Xi,n.ChangeDetectorRef,n.Injector])],fn);const iN=["dataViewWrapper"];function aN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",10),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.additionalText)}}function rN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",11)(1,"a",12),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("href",t.helpLinkUrl.url,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.helpLinkUrl.caption)}}function sN(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",13),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",14),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("mat-dialog-close",!1),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(3,4,"TableDialog.Cancel")," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("mat-dialog-close",!0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.continueButtonCaption)}}function oN(a,e){1&a&&(n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,"TableDialog.Close")," "))}class bf{constructor(e,t){this.dialogData=e,this.scrollToBottomObserverFactory=t,this.title="",this.sortColumn="",this.additionalText="",this.continueButtonCaption=""}_initScrollToBottomObserver(){const e=this.dataViewWrapper.nativeElement;this._scrollToBottomObserver=this.scrollToBottomObserverFactory.createObserver(e,this._loadNextData.bind(this))}_loadNextData(){this.tableDataSource&&this.tableDataSource.loadNext()}ngAfterViewInit(){this._initScrollToBottomObserver()}ngOnInit(){!this.dialogData||!this.dialogData.data||(this.tableDataSource=new XC(this.dialogData.data),this.dataSchema=this.dialogData.dataSchema,this.title=this.dialogData.title||this.title,this.sortColumn=this.dialogData.sortColumn,this.additionalText=this.dialogData.additionalText,this.helpLinkUrl=this.dialogData.helpLinkUrl,this.continueButtonCaption=this.dialogData.continueButtonCaption)}ngOnDestroy(){this._scrollToBottomObserver&&this._scrollToBottomObserver.destroy()}}function lN(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",1),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("svgIcon",t.svgIconName)}}bf.\u0275fac=function(e){return new(e||bf)(n.\u0275\u0275directiveInject(E.eJ),n.\u0275\u0275directiveInject(Ln))},bf.\u0275cmp=n.\u0275\u0275defineComponent({type:bf,selectors:[["ts-table-dialog"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(iN,7),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.dataViewWrapper=i.first)}},decls:13,vars:8,consts:[["mat-dialog-title",""],[1,"dialog-content-wrapper"],["class","table-dialog-additional-text",4,"ngIf"],["class","table-dialog-help-link-url",4,"ngIf"],["mat-dialog-content","",1,"data-table"],["dataViewWrapper",""],["headerSticky","true",3,"dataSource","dataSchema","sortColumn"],["mat-dialog-actions",""],[4,"ngIf","ngIfElse"],["withoutContinue",""],[1,"table-dialog-additional-text"],[1,"table-dialog-help-link-url"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",1),n.\u0275\u0275template(4,aN,2,1,"div",2),n.\u0275\u0275template(5,rN,3,2,"div",3),n.\u0275\u0275elementStart(6,"div",4,5),n.\u0275\u0275element(8,"ts-table",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",7),n.\u0275\u0275template(10,sN,6,6,"ng-container",8),n.\u0275\u0275template(11,oN,3,3,"ng-template",null,9,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()()),2&e){const i=n.\u0275\u0275reference(12);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.title),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.additionalText),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.helpLinkUrl),n.\u0275\u0275advance(3),n.\u0275\u0275property("dataSource",t.tableDataSource)("dataSchema",t.dataSchema)("sortColumn",t.sortColumn),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.continueButtonCaption)("ngIfElse",i)}},dependencies:[y.NgIf,U.eB,E.aO,E.YS,E.Rb,E.ev,_t,w.X$],styles:["ts-table-dialog{min-width:850px;max-width:900px;margin:0 8px!important;padding:0}ts-table-dialog .table-dialog-additional-text{margin-bottom:4px;display:inline}ts-table-dialog .table-dialog-help-link-url{display:inline;cursor:pointer}ts-table-dialog .data-table{overflow-y:auto!important;max-height:330px;margin:0;padding:0}ts-table-dialog .data-table table{padding-top:0}ts-table-dialog [mat-dialog-actions]{display:flex;flex-direction:row;justify-content:flex-end;margin:20px 0 10px!important}\n"],encapsulation:2});class Am extends $t{get svgIconName(){return{[Tu.Error]:this.errorIconName,[Tu.Warning]:this.warningIconName,[Tu.Information]:""}[this.getValue()]??""}constructor(e,t){super(),this._matIconRegistry=e,this._domSanitizer=t,this.errorIconName="error-icon",this.warningIconName="warning-icon",this._registerIcons()}_registerIcons(){[this.warningIconName,this.errorIconName].forEach(e=>{this._matIconRegistry.addSvgIconLiteral(e,this._domSanitizer.bypassSecurityTrustHtml(f(71477)("./"+e+".svg")))})}}function cN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-checkbox",1),n.\u0275\u0275listener("change",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.setValue(r.checked))}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("disabled",t.isDisabled())("checked",t.getValue())("matTooltip",t.getTooltipText())}}Am.\u0275fac=function(e){return new(e||Am)(n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},Am.\u0275cmp=n.\u0275\u0275defineComponent({type:Am,selectors:[["ts-error-type-icon-table-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","error-type-icon",3,"svgIcon",4,"ngIf"],[1,"error-type-icon",3,"svgIcon"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,lN,1,1,"mat-icon",0),2&e&&n.\u0275\u0275property("ngIf",!t.isEmpty()&&t.getValue())},dependencies:[y.NgIf,A.Hw],styles:[".error-type-icon[_ngcontent-%COMP%]{height:16px;width:16px}"]});class Ic extends bs{isDisabled(){const e=this.columnDataSchema.disabled;return"function"==typeof e?e(this.record):e}getTooltipText(){const e=this.columnDataSchema.tooltip;return"function"==typeof e?e(this.record):e}}Ic.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Ic)))(t||Ic)}}(),Ic.\u0275cmp=n.\u0275\u0275defineComponent({type:Ic,selectors:[["ts-checkbox-table-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"disabled","checked","matTooltip","change",4,"ngIf"],[3,"disabled","checked","matTooltip","change"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,cN,1,3,"mat-checkbox",0),2&e&&n.\u0275\u0275property("ngIf",!t.isEmpty())},dependencies:[y.NgIf,Se.FC,Ze.Kd],encapsulation:2});class Rm{}Rm.\u0275fac=function(e){return new(e||Rm)},Rm.\u0275mod=n.\u0275\u0275defineNgModule({type:Rm}),Rm.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5]});var uN=f(85261);class Dc{constructor(e){this._cdr=e,this._delay=2e3,this._stop=new u.Subject,this._start=new u.Subject,this._datetime=Bn()(),this._timer$=(0,u.timer)(0,this._delay).pipe((0,L.R)(this._stop),(0,uN.a)(()=>this._start))}set datetime(e){this._stop.next(),this._datetime=Bn()(e),this._start.next()}static _getDuration(e){const t=Bn()();return e?Bn().duration(e.diff(t)):Bn().duration({hour:0,minute:0,second:0})}_getTimerSubscription$(){return this._timer$.subscribe(()=>{if(this.value="",this._datetime.isValid()){const e=Dc._getDuration(this._datetime);this.value=`${e.humanize(!0)}`}this._cdr.detectChanges()})}ngOnDestroy(){this._stop.next(null),this._stop.complete(),this._timerSubscription$.unsubscribe()}ngOnInit(){this._timerSubscription$=this._getTimerSubscription$()}}Dc.\u0275fac=function(e){return new(e||Dc)(n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},Dc.\u0275cmp=n.\u0275\u0275defineComponent({type:Dc,selectors:[["ts-time-ago"]],inputs:{datetime:"datetime"},decls:2,vars:1,consts:[[1,"time-ago"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.value))},changeDetection:0});const dN=function(a,e){return{"date-picker-filter-container":a,"date-picker-filter-container-rtl":e}},pN=function(a){return{"clear-date-icon-wrap":!0,"icon-hidden":a}};class vf{constructor(e,t){this._directionality=t,this._defaultCulture="en-US",this.dateChange=new n.EventEmitter,this.cultureCode=e&&e.cultureInfo&&e.cultureInfo.sysCultureName||this._defaultCulture}set selectedDate(e){this._selectedDate=e}get selectedDate(){return this._selectedDate}updateFormattedValue(e){this.formattedDate=e&&e.toLocaleDateString(this.cultureCode)}isRtl(){return this._directionality&&"rtl"===this._directionality.value}clearDate(){this.selectedDate=null,this.clearIconVisible=!1,this.onDateChange()}showClearIcon(){this.clearIconVisible=!0}onDateChange(){const e=this.selectedDate;e&&this.showClearIcon(),this.updateFormattedValue(e),this.dateChange.emit(e)}}vf.\u0275fac=function(e){return new(e||vf)(n.\u0275\u0275directiveInject(Q),n.\u0275\u0275directiveInject(xe.Is))},vf.\u0275cmp=n.\u0275\u0275defineComponent({type:vf,selectors:[["ts-date-picker-filter"]],inputs:{selectedDate:"selectedDate",datePickerFilterFunction:"datePickerFilterFunction"},outputs:{dateChange:"dateChange"},decls:11,vars:13,consts:[[1,"date-picker-filter-component"],[3,"ngClass"],["matSuffix","",1,"datepicker-toggle",3,"for"],["svgIcon","datetime-picker-calendar-icon","matDatepickerToggleIcon","",1,"date-picker-calendar-icon"],["disabled","false","ngDefaultControl","",3,"restoreFocus"],["picker",""],[1,"date-time-buttom-marker"],["ngDefaultControl","",1,"date-time-value"],["ngDefaultControl","","disabled","",3,"matDatepickerFilter","matDatepicker","ngModel","dateInput","ngModelChange","dateChange"],[1,"close-icon",3,"ngClass","click"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-datepicker-toggle",2),n.\u0275\u0275element(3,"mat-icon",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"mat-datepicker",4,5)(6,"span",6),n.\u0275\u0275elementStart(7,"span",7),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"input",8),n.\u0275\u0275listener("dateInput",function(){return t.showClearIcon()})("ngModelChange",function(r){return t.selectedDate=r})("dateChange",function(){return t.onDateChange()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"span",9),n.\u0275\u0275listener("click",function(){return t.clearDate()}),n.\u0275\u0275elementEnd()()()),2&e){const i=n.\u0275\u0275reference(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(8,dN,!t.isRtl(),t.isRtl())),n.\u0275\u0275advance(1),n.\u0275\u0275property("for",i),n.\u0275\u0275advance(2),n.\u0275\u0275property("restoreFocus",!1),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(t.formattedDate),n.\u0275\u0275advance(1),n.\u0275\u0275property("matDatepickerFilter",t.datePickerFilterFunction)("matDatepicker",i)("ngModel",t.selectedDate),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(11,pN,!t.clearIconVisible))}},dependencies:[y.NgClass,N.nX,Ne.Mq,Ne.hl,Ne.nW,Ne.Q0,A.Hw,b.Fj,b.JJ,b.On],styles:['.mat-calendar-body-cell-content.mat-focus-indicator{--palette-primary-500: #f2f5ff}.mat-calendar-body-cell-content.mat-focus-indicator.mat-calendar-body-selected{background-color:#006ce0}.date-picker-filter-component{display:inline-block;max-width:150px}.date-picker-filter-component .date-picker-filter-container{display:flex;align-items:center;position:relative;height:26px}.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mdc-icon-button{height:30px;width:36px;line-height:20px;color:#006ce0}.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mat-mdc-button-ripple,.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mdc-icon-button__ripple{height:40px;width:40px;transform:translate(-4%)}.date-picker-filter-component .date-picker-filter-container input:disabled{border:none;background:none;width:0px}.date-picker-filter-component .date-picker-filter-container .mat-datepicker-toggle{display:inline-block}.date-picker-filter-component .date-picker-filter-container .clear-date-icon-wrap{max-height:15px}.date-picker-filter-component .date-picker-filter-container .clear-date-icon-wrap .mdc-icon-button{height:17px;width:17px;margin-left:3px}.date-picker-filter-component .date-picker-filter-container span{font-size:14px}.date-picker-filter-component .date-picker-filter-container .date-time-buttom-marker{border-top:.32em solid #4d6a98;border-right:.32em solid transparent;border-left:.32em solid transparent;content:"";position:absolute;left:37px;z-index:-1}.date-picker-filter-component .date-picker-filter-container .date-time-value{margin-left:7px}.date-picker-filter-component .date-picker-filter-container .close-icon{margin-top:1px;display:inline-block;width:17px;height:17px;margin-left:0;margin-right:0;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV83IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPGxpbmUgaWQ9IkxpbmVfNSIgZGF0YS1uYW1lPSJMaW5lIDUiIHkxPSIxMCIgeDI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzYiIGRhdGEtbmFtZT0iTGluZSA2IiB4Mj0iMTAiIHkyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPg0KPC9zdmc+DQo=);cursor:pointer}.date-picker-filter-component .date-picker-filter-container .close-icon.icon-hidden{display:none}.date-picker-filter-component .date-picker-filter-container-rtl{display:flex;align-items:center;position:relative;height:26px}.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mdc-icon-button{height:30px;width:36px;line-height:20px;color:#006ce0}.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mat-mdc-button-ripple,.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mdc-icon-button__ripple{height:40px;width:40px;transform:translate(-4%)}.date-picker-filter-component .date-picker-filter-container-rtl input:disabled{border:none;background:none;width:0px}.date-picker-filter-component .date-picker-filter-container-rtl .mat-datepicker-toggle{display:inline-block}.date-picker-filter-component .date-picker-filter-container-rtl .clear-date-icon-wrap{max-height:15px}.date-picker-filter-component .date-picker-filter-container-rtl .clear-date-icon-wrap .mdc-icon-button{height:17px;width:17px;margin-right:3px}.date-picker-filter-component .date-picker-filter-container-rtl span{font-size:14px}.date-picker-filter-component .date-picker-filter-container-rtl .date-time-buttom-marker{border-top:.32em solid #4d6a98;border-right:.32em solid transparent;border-left:.32em solid transparent;content:"";position:absolute;right:37px;z-index:-1}.date-picker-filter-component .date-picker-filter-container-rtl .date-time-value{margin-right:7px}.date-picker-filter-component .date-picker-filter-container-rtl .close-icon{margin-top:1px;display:inline-block;width:17px;height:17px;margin-right:0;margin-left:0;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV83IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPGxpbmUgaWQ9IkxpbmVfNSIgZGF0YS1uYW1lPSJMaW5lIDUiIHkxPSIxMCIgeDI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzYiIGRhdGEtbmFtZT0iTGluZSA2IiB4Mj0iMTAiIHkyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPg0KPC9zdmc+DQo=);cursor:pointer}.date-picker-filter-component .date-picker-filter-container-rtl .close-icon.icon-hidden{display:none}\n'],encapsulation:2});class ws{constructor(e,t){this._matIconRegistry=e,this._domSanitizer=t}registerIcons(){["datetime-picker-calendar-icon"].forEach(t=>{this._matIconRegistry?.addSvgIconLiteral(t,this._domSanitizer?.bypassSecurityTrustHtml(f(38280)("./"+t+".svg")))})}}ws.\u0275fac=function(e){return new(e||ws)(n.\u0275\u0275inject(A.jv),n.\u0275\u0275inject(k.DomSanitizer))},ws.\u0275prov=n.\u0275\u0275defineInjectable({token:ws,factory:ws.\u0275fac});class km{constructor(e){this._assetsService=e,this._assetsService.registerIcons()}}function hN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",9),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption)}}km.\u0275fac=function(e){return new(e||km)(n.\u0275\u0275inject(ws))},km.\u0275mod=n.\u0275\u0275defineNgModule({type:km}),km.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:Vi.Ad,useFactory:function mN(a){return a.cultureInfo.sysCultureName},deps:[Q]},Ne.FA,ws],imports:[y.CommonModule,N.wp,Ne.FA,Vi.XK,z.x4,F.PW,A.Ps,b.u5,D.HttpClientModule,E.yj,N.wp,Ne.FA]});class Nm{get searchKey(){return this._searchKey}set searchKey(e){if(this._searchKey=e,this._selectedColumn){const t=!e;this._changeFilter(t)}}get filteredColumns(){return this._filteredColumns}set entitySchema(e){this._entitySchema=e,this._columns=e.columns.filter(t=>ot.Text.includes(t.dataValueType)||t.dataValueType===l.DataValueType.Lookup||t.dataValueType===l.DataValueType.Guid),this._filteredColumns=this._columns}get selectedColumn(){return this._selectedColumn}constructor(e,t,i,r){this._entitySchemaService=e,this._maskService=t,this._dialogService=i,this._translateService=r,this._destroyed$=new u.Subject,this._searchKey="",this.valueChange=new n.EventEmitter}_buildFilterGroup(e){const t=new l.FilterGroup;t.logicalOperation=l.LogicalOperatorType.And;const i=this._selectedColumn.dataValueType===l.DataValueType.Guid?l.ComparisonType.Equal:l.ComparisonType.Contain;return t.addSchemaColumnFilterWithParameter(i,e,this._searchKey),t}_getFilterColumnPath(){return this._selectedColumn.dataValueType!==l.DataValueType.Lookup?(0,u.of)(this._selectedColumn.name):(this._maskService.showBodyMask(),this._entitySchemaService.getEntitySchemaByUId(this._selectedColumn.referenceSchemaUId).pipe((0,h.U)(e=>{this._maskService.hideBodyMask();const t=e.entitySchema.getPrimaryDisplayColumn()?.name;if(t)return this._selectedColumn.name+"."+t;const i=e.entitySchema.getPrimaryColumn()?.name;return this._selectedColumn.name+"."+i})))}_changeFilter(e=!1){e?this.valueChange.emit(null):this._selectedColumn.dataValueType!==l.DataValueType.Guid||(0,l.isGuid)(this._searchKey)?this._getFilterColumnPath().pipe((0,L.R)(this._destroyed$)).subscribe(t=>{const i=this._buildFilterGroup(t);this.valueChange.emit(i)}):this._dialogService.openInfoDialog(this._translateService.instant("QuickEntityFilter.NonGuidMessage"))}searchColumn(e){e||this.selectColumn(null),e=e.toLocaleLowerCase().trim(),this._filteredColumns=this._columns.filter(t=>t.caption.toLocaleLowerCase().includes(e))}getColumnCaption(e){return e.caption}selectColumn(e){this._selectedColumn=e,e?this._searchKey&&this._changeFilter():this._changeFilter(!0)}ngOnInit(){this._selectedColumn=this._entitySchema?.getPrimaryDisplayColumn()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}function gN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"mat-icon",2),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("svgIcon",t.iconName)}}Nm.\u0275fac=function(e){return new(e||Nm)(n.\u0275\u0275directiveInject(Ke),n.\u0275\u0275directiveInject(an),n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(w.sK))},Nm.\u0275cmp=n.\u0275\u0275defineComponent({type:Nm,selectors:[["ts-quick-entity-filter"]],inputs:{entitySchema:"entitySchema"},outputs:{valueChange:"valueChange"},decls:10,vars:5,consts:[[1,"select-column-container"],["type","text","matInput","","spellcheck","false",3,"matAutocomplete","value","input"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"search-container"],[3,"value","valueChange"],[3,"value"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field")(2,"input",1),n.\u0275\u0275listener("input",function(r){return t.searchColumn(r.target.value)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",2),n.\u0275\u0275element(4,"div",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-autocomplete",4,5),n.\u0275\u0275listener("optionSelected",function(r){return t.selectColumn(r.option.value)}),n.\u0275\u0275template(7,hN,2,2,"mat-option",6),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(8,"div",7)(9,"ts-search-input",8),n.\u0275\u0275listener("valueChange",function(r){return t.searchKey=r}),n.\u0275\u0275elementEnd()()),2&e){const i=n.\u0275\u0275reference(6);n.\u0275\u0275advance(2),n.\u0275\u0275property("matAutocomplete",i)("value",null==t.selectedColumn?null:t.selectedColumn.caption),n.\u0275\u0275advance(3),n.\u0275\u0275property("displayWith",t.getColumnCaption),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.filteredColumns),n.\u0275\u0275advance(2),n.\u0275\u0275property("value",t.searchKey)}},dependencies:[y.NgForOf,ce.VN,ce.QJ,Xe.CK,N.v_,N.nX,z.k0,uc],styles:["ts-quick-entity-filter{display:flex}ts-quick-entity-filter .select-column-container{flex-basis:50%;padding-right:20px}ts-quick-entity-filter .select-column-container .mat-form-field{width:100%!important}ts-quick-entity-filter .search-container{flex-basis:50%}\n"],encapsulation:2});class Mc extends $t{get iconName(){return this.columnDataSchema.iconName}}Mc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Mc)))(t||Mc)}}(),Mc.\u0275cmp=n.\u0275\u0275defineComponent({type:Mc,selectors:[["ts-icon-table-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","drag-drop-icon-wrapper","cdkDragHandle","",4,"ngIf"],["cdkDragHandle","",1,"drag-drop-icon-wrapper"],[3,"svgIcon"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,gN,2,1,"div",0),2&e&&n.\u0275\u0275property("ngIf",!t.isEmpty())},dependencies:[y.NgIf,A.Hw]});var If=f(39303),fN=f(59443);class ci{}ci.\u0275fac=function(e){return new(e||ci)},ci.\u0275mod=n.\u0275\u0275defineNgModule({type:ci}),ci.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,U.yu,Ne.FA,If.ni,N.wp,A.Ps,z.x4,fN.OC]});class xs{}xs.\u0275fac=function(e){return new(e||xs)},xs.\u0275mod=n.\u0275\u0275defineNgModule({type:xs}),xs.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,b.u5,ci,U.yu,Se.Zh,N.wp,A.Ps,z.x4,cc]});const _N=function(a,e){return{"forecast-hint-content":a,"forecast-hint-content-rtl":e}};class Df{set hintConfig(e){this._hintConfig!==e&&(this._hintConfig=e)}get hintConfig(){return this._hintConfig}get cssClasses(){return this._hintConfig?.cssClasses||this._defaultCssClass}constructor(e){this._directionality=e,this._defaultCssClass="simple-hint"}isRtl(){return"rtl"===this._directionality.value}}Df.\u0275fac=function(e){return new(e||Df)(n.\u0275\u0275directiveInject(xe.Is))},Df.\u0275cmp=n.\u0275\u0275defineComponent({type:Df,selectors:[["ts-simple-hint"]],inputs:{hintConfig:"hintConfig"},decls:4,vars:8,consts:[[1,"simple-hint-value",3,"ngClass"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"span",0),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"br"),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275classMap(t.cssClasses),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(5,_N,!t.isRtl(),t.isRtl())),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",null==t.hintConfig?null:t.hintConfig.displayValue," "))},dependencies:[y.NgClass],styles:['.simple-hint[_ngcontent-%COMP%]{margin:15px 30px;min-width:60px;max-width:300px;display:inline-block;align-items:center;background:#fff;border-top:4px solid;position:relative;min-height:50px;padding:10px;text-align:left;box-shadow:#0000004d 0 0 .6em .02em;-moz-box-shadow:rgba(0,0,0,.3) 0 0 .2em;-webkit-box-shadow:rgba(0,0,0,.3) 0 0 .2em;font-size:13px;border-top-color:#20c964}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content[_ngcontent-%COMP%]{direction:ltr}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content-rtl[_ngcontent-%COMP%]{direction:ltr;text-align:right}.simple-hint[_ngcontent-%COMP%]:before{border-color:transparent transparent #20c964 transparent}.simple-hint[_ngcontent-%COMP%]:after, .simple-hint[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:0;height:0;border-style:solid}.simple-hint[_ngcontent-%COMP%]:after{left:calc(50% - 6px);top:-12px;border-color:transparent transparent #fff transparent;border-width:6px}.simple-hint[_ngcontent-%COMP%]:before{left:calc(50% - 7px);top:-17px;border-width:7px}']});class wc{}wc.\u0275fac=function(e){return new(e||wc)},wc.\u0275mod=n.\u0275\u0275defineNgModule({type:wc}),wc.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});var MD=f(17762);class Es{constructor(e,t){this._matIconRegistry=e,this._domSanitizer=t}registerIcons(){["arrow-down","full-screen-open","full-screen-close","settings","info","show-more-icon"].forEach(t=>{this._matIconRegistry?.addSvgIconLiteral(t,this._domSanitizer?.bypassSecurityTrustHtml(f(46377)("./"+t+".svg")))})}}Es.\u0275fac=function(e){return new(e||Es)(n.\u0275\u0275inject(A.jv),n.\u0275\u0275inject(k.DomSanitizer))},Es.\u0275prov=n.\u0275\u0275defineInjectable({token:Es,factory:Es.\u0275fac});class Vm{constructor(e){this._assetsService=e,this._assetsService.registerIcons()}}function yN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",6),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onFullScreenClicked())}),n.\u0275\u0275element(2,"mat-icon",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("disableRipple",!0),n.\u0275\u0275advance(1),n.\u0275\u0275property("svgIcon",t.fullScreenIcon)}}function CN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",13),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.onSettingActionClicked(null==s?null:s.code))}),n.\u0275\u0275element(2,"mat-icon",14),n.\u0275\u0275elementStart(3,"span"),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&a){const t=e.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("svgIcon",null==t?null:t.imageName),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==t?null:t.name)}}function SN(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",8)(2,"div"),n.\u0275\u0275element(3,"mat-icon",9)(4,"span",10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"mat-menu",null,11),n.\u0275\u0275template(7,CN,5,2,"ng-container",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275reference(6),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("disableRipple",!0)("matMenuTriggerFor",t),n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",i.settingActions)}}Vm.\u0275fac=function(e){return new(e||Vm)(n.\u0275\u0275inject(Es))},Vm.\u0275mod=n.\u0275\u0275defineNgModule({type:Vm}),Vm.\u0275inj=n.\u0275\u0275defineInjector({providers:[Es],imports:[y.CommonModule,oi,b.u5,U.yu,qn.jT,A.Ps,F.PW,wc,MD.Yn]});const bN=function(a){return{"panel-collapse-button-content-collapsed":a}},vN=function(a){return{"panel-collapse-button-icon-close":a}};function IN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",15),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onCollapseButtonClicked())}),n.\u0275\u0275elementStart(2,"div",0),n.\u0275\u0275element(3,"mat-icon",16),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("disableRipple",!0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(3,bN,t.isCollapsed)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(5,vN,t.isCollapsed))}}function DN(a,e){1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1,2),n.\u0275\u0275elementContainerEnd())}const MN=[[["",8,"panel-title-item"]],[["",8,"panel-action-button-left"]],[["",8,"panel-main-content"]]],wN=function(a,e){return{"panel-main-container":a,"panel-main-container-rtl":e}},xN=function(a){return{"panel-header-collapsed-container":a}},EN=function(a){return{clickable:a}};class Fm{constructor(e,t){this._directionality=e,this._eventService=t,this.titleClicked=new n.EventEmitter,this.fullScreenClicked=new n.EventEmitter,this.collapseClicked=new n.EventEmitter,this.fullScreenIcon="full-screen-open"}isRtl(){return"rtl"===this._directionality.value}onTitleClicked(){this.titleConfig?.isClickable&&this.titleClicked.emit(this.titleConfig?.recordId)}onSettingActionClicked(e){this._eventService.emit({name:"settingActionClicked",value:e})}onFullScreenClicked(){this.isShowFullScreenButton&&(this.isFullScreen=!this.isFullScreen,this.fullScreenIcon=this.isFullScreen?"full-screen-close":"full-screen-open",this.fullScreenClicked.emit(this.isFullScreen))}onCollapseButtonClicked(){this.isShowCollapseButton&&(this.isCollapsed=!this.isCollapsed,this.collapseClicked.emit(this.isCollapsed))}}function PN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0,7),n.\u0275\u0275elementStart(1,"div",8)(2,"mat-icon",9,10),n.\u0275\u0275listener("mouseover",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275reference(3);return n.\u0275\u0275resetView(r.show())})("mouseout",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275reference(3);return n.\u0275\u0275resetView(r.hide())}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("libHintOverlay",t.infoHintConfig)}}Fm.\u0275fac=function(e){return new(e||Fm)(n.\u0275\u0275directiveInject(xe.Is),n.\u0275\u0275directiveInject(nl))},Fm.\u0275cmp=n.\u0275\u0275defineComponent({type:Fm,selectors:[["ts-panel-content"]],inputs:{isFullScreen:"isFullScreen",isCollapsed:"isCollapsed",isShowCollapseButton:"isShowCollapseButton",isShowFullScreenButton:"isShowFullScreenButton",titleConfig:"titleConfig",settingActions:"settingActions"},outputs:{titleClicked:"titleClicked",fullScreenClicked:"fullScreenClicked",collapseClicked:"collapseClicked"},ngContentSelectors:[".panel-title-item",".panel-action-button-left",".panel-main-content"],decls:12,vars:15,consts:[[3,"ngClass"],[1,"panel-header-container",3,"ngClass"],[1,"panel-left-container"],[1,"panel-caption",3,"ngClass","click"],[1,"panel-right-container"],[4,"ngIf"],["mat-icon-button","",3,"disableRipple","click"],[1,"panel-full-screen-button",3,"svgIcon"],["mat-icon-button","",1,"panel-settings-button",3,"disableRipple","matMenuTriggerFor"],["svgIcon","settings",1,"panel-settings-button-icon"],[1,"panel-arrow-down-icon"],["menu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","",1,"panel-settings-action-button",3,"click"],[1,"panel-action-button-image",3,"svgIcon"],["mat-icon-button","",1,"panel-collapse-button",3,"disableRipple","click"],["svgIcon","arrow-down",1,"panel-collapse-button-icon",3,"ngClass"]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(MN),n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),n.\u0275\u0275listener("click",function(){return t.onTitleClicked()}),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275projection(5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",4),n.\u0275\u0275projection(7,1),n.\u0275\u0275template(8,yN,3,2,"ng-container",5),n.\u0275\u0275template(9,SN,8,3,"ng-container",5),n.\u0275\u0275template(10,IN,4,7,"ng-container",5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(11,DN,2,0,"ng-container",5),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(8,wN,!t.isRtl(),t.isRtl())),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(11,xN,t.isCollapsed)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(13,EN,null==t.titleConfig?null:t.titleConfig.isClickable)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",null==t.titleConfig?null:t.titleConfig.displayValue," "),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",t.isShowFullScreenButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.settingActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isShowCollapseButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.isCollapsed))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,U.eB,qn.W0,qn.tN,qn.D8,A.Hw],styles:['.panel-settings-action-button{align-items:center}.panel-settings-action-button .panel-action-button-image{height:19px;width:19px;display:inline-block}.panel-main-container{width:100%;display:flex;flex-direction:column}.panel-main-container .panel-header-container{min-height:40px;padding-top:16px;padding-left:16px;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:nowrap;align-items:center;background-color:#fff}.panel-main-container .panel-header-container .panel-left-container{display:flex;justify-content:flex-start;align-content:center;align-items:center;height:100%;flex-direction:row}.panel-main-container .panel-header-container .panel-left-container .panel-caption{color:#006ce0;font-size:18px}.panel-main-container .panel-header-container .panel-left-container .panel-caption.clickable:hover{cursor:pointer;text-decoration:underline}.panel-main-container .panel-header-container .panel-right-container{display:flex;justify-content:flex-end;align-items:center;height:100%;flex-direction:row}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button{width:32px;height:32px;display:inline-block;margin-right:16px}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-bottom:0}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div.panel-collapse-button-content-collapsed{padding-bottom:3px}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon{width:18px;height:18px;display:inline-block}.panel-main-container .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon-close{transform:rotate(180deg)}.panel-main-container .panel-header-container .panel-right-container .panel-full-screen-button{width:16px;height:16px;display:inline-block;margin-right:16px}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button{width:32px;height:32px;display:inline-block;margin-right:16px}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button div{display:flex;flex-direction:row;justify-content:center;align-items:center}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button div .panel-settings-button-icon{width:16px;display:inline-block}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button div .panel-arrow-down-icon{position:relative;bottom:0;right:0;height:0;content:"";font-size:14px;border-right:.32em solid transparent;border-left:.32em solid transparent;border-top:.32em solid #54657d;margin-left:3px}.panel-main-container .panel-header-container .panel-right-container .panel-settings-button:hover{cursor:pointer}.panel-main-container-rtl{width:100%;display:flex;flex-direction:column}.panel-main-container-rtl .panel-header-container{min-height:40px;padding-top:16px;padding-right:16px;display:flex;justify-content:space-between;flex-direction:row;flex-wrap:nowrap;align-items:center;background-color:#fff}.panel-main-container-rtl .panel-header-container .panel-left-container{display:flex;justify-content:flex-start;align-content:center;align-items:center;height:100%;flex-direction:row}.panel-main-container-rtl .panel-header-container .panel-left-container .panel-caption{color:#006ce0;font-size:18px}.panel-main-container-rtl .panel-header-container .panel-left-container .panel-caption.clickable:hover{cursor:pointer;text-decoration:underline}.panel-main-container-rtl .panel-header-container .panel-right-container{display:flex;justify-content:flex-end;align-items:center;height:100%;flex-direction:row}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button{width:32px;height:32px;display:inline-block;margin-left:16px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-bottom:0}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div.panel-collapse-button-content-collapsed{padding-bottom:3px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon{width:18px;height:18px;display:inline-block}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-collapse-button div .panel-collapse-button-icon-close{transform:rotate(180deg)}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-full-screen-button{width:16px;height:16px;display:inline-block;margin-left:16px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button{width:32px;height:32px;display:inline-block;margin-left:16px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button div{display:flex;flex-direction:row;justify-content:center;align-items:center}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button div .panel-settings-button-icon{width:16px;display:inline-block}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button div .panel-arrow-down-icon{position:relative;bottom:0;right:0;height:0;content:"";font-size:14px;border-right:.32em solid transparent;border-left:.32em solid transparent;border-top:.32em solid #54657d;margin-right:3px}.panel-main-container-rtl .panel-header-container .panel-right-container .panel-settings-button:hover{cursor:pointer}\n'],encapsulation:2});const AN=[[["",8,"panel-list-action-button-left"]]],RN=function(a,e){return{"main-panel-list-container":a,"main-panel-list-container-rtl":e}},kN=function(){return[0]},NN=function(a){return{threshold:a}};class Mf{constructor(e){this._directionality=e,this.titleClicked=new n.EventEmitter,this.settingActionClicked=new n.EventEmitter,this.fullScreenClicked=new n.EventEmitter,this.collapseClicked=new n.EventEmitter,this.loadMore=new n.EventEmitter,this.sortChange=new n.EventEmitter}isRtl(){return"rtl"===this._directionality.value}onTitleClicked(e){this.titleClicked.emit(e)}onSettingActionClicked(e){this.settingActionClicked.emit(e)}onFullScreenClicked(e){this.isFullScreen=e,this.fullScreenClicked.emit(e)}onCollapseButtonClicked(e){this.isCollapsed=e,this.collapseClicked.emit(e)}onLoadMore(){this.isLoadMore&&this.loadMore.emit()}onSortChange(e){this.sortChange.emit(e)}}function FN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.data.additionalText)}}function LN(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",8),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",9),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("mat-dialog-close",!1),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,4,"ValidationErrorDialogComponent.Cancel")),n.\u0275\u0275advance(2),n.\u0275\u0275property("mat-dialog-close",!0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.data.continueButtonCaption)}}function ON(a,e){1&a&&(n.\u0275\u0275elementStart(0,"button",8),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,"ValidationErrorDialogComponent.Close")))}Mf.\u0275fac=function(e){return new(e||Mf)(n.\u0275\u0275directiveInject(xe.Is))},Mf.\u0275cmp=n.\u0275\u0275defineComponent({type:Mf,selectors:[["ts-panel-list"]],inputs:{isShowInfoButton:"isShowInfoButton",infoHintConfig:"infoHintConfig",tableConfig:"tableConfig",tableDataSchema:"tableDataSchema",selected:"selected",tableData:"tableData",isFullScreen:"isFullScreen",isCollapsed:"isCollapsed",isShowCollapseButton:"isShowCollapseButton",isShowFullScreenButton:"isShowFullScreenButton",titleConfig:"titleConfig",settingActions:"settingActions",loadMoreButtonLczCaption:"loadMoreButtonLczCaption",isLoadMore:"isLoadMore",sortColumn:"sortColumn",sortDirection:"sortDirection"},outputs:{titleClicked:"titleClicked",settingActionClicked:"settingActionClicked",fullScreenClicked:"fullScreenClicked",collapseClicked:"collapseClicked",loadMore:"loadMore",sortChange:"sortChange"},ngContentSelectors:[".panel-list-action-button-left"],decls:8,vars:22,consts:[[3,"ngClass"],[3,"isFullScreen","isCollapsed","isShowFullScreenButton","isShowCollapseButton","settingActions","titleConfig","collapseClicked","fullScreenClicked","settingActionClicked","titleClicked"],[1,"panel-action-button-left"],["class","panel-title-item",4,"ngIf"],[1,"panel-main-content","panel-table"],[3,"data","dataSchema","selected","headerSticky","config","sortColumn","sortDirection","selectedChange","sortChange"],["inViewport","",1,"panel-table-load-more-container",3,"inViewportOptions","inViewportAction"],[1,"panel-title-item"],[1,"panel-title-info-button"],["svgIcon","info",3,"libHintOverlay","mouseover","mouseout"],["titleInfoIcon","libHintOverlay"]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(AN),n.\u0275\u0275elementStart(0,"div",0)(1,"ts-panel-content",1),n.\u0275\u0275listener("collapseClicked",function(r){return t.onCollapseButtonClicked(r)})("fullScreenClicked",function(r){return t.onFullScreenClicked(r)})("settingActionClicked",function(r){return t.onSettingActionClicked(r)})("titleClicked",function(r){return t.onTitleClicked(r)}),n.\u0275\u0275elementContainerStart(2,2),n.\u0275\u0275projection(3),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(4,PN,4,1,"ng-container",3),n.\u0275\u0275elementStart(5,"div",4)(6,"ts-table",5),n.\u0275\u0275listener("selectedChange",function(r){return t.selected=r})("sortChange",function(r){return t.onSortChange(r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div",6),n.\u0275\u0275listener("inViewportAction",function(){return t.onLoadMore()}),n.\u0275\u0275elementEnd()()()()),2&e&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(16,RN,!t.isRtl(),t.isRtl())),n.\u0275\u0275advance(1),n.\u0275\u0275property("isFullScreen",t.isFullScreen)("isCollapsed",t.isCollapsed)("isShowFullScreenButton",t.isShowFullScreenButton)("isShowCollapseButton",t.isShowCollapseButton)("settingActions",t.settingActions)("titleConfig",t.titleConfig),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.isShowInfoButton),n.\u0275\u0275advance(2),n.\u0275\u0275property("data",t.tableData)("dataSchema",t.tableDataSchema)("selected",t.selected)("headerSticky",!0)("config",t.tableConfig)("sortColumn",t.sortColumn)("sortDirection",t.sortDirection),n.\u0275\u0275advance(1),n.\u0275\u0275property("inViewportOptions",n.\u0275\u0275pureFunction1(20,NN,n.\u0275\u0275pureFunction0(19,kN))))},dependencies:[y.NgClass,y.NgIf,_t,A.Hw,Od,MD.wt,Fm],styles:[".main-panel-list-container .panel-main-container,.main-panel-list-container .panel-main-container-rtl{height:100%}.main-panel-list-container .panel-main-container .panel-left-container .panel-title-info-button,.main-panel-list-container .panel-main-container-rtl .panel-left-container .panel-title-info-button{align-items:center;margin-left:8px;height:24px;width:24px}.main-panel-list-container .panel-main-container .panel-table,.main-panel-list-container .panel-main-container-rtl .panel-table{flex-grow:2;overflow:auto}.main-panel-list-container .panel-main-container .panel-table::-webkit-scrollbar,.main-panel-list-container .panel-main-container-rtl .panel-table::-webkit-scrollbar{-webkit-appearance:none;width:5px;height:5px}.main-panel-list-container .panel-main-container .panel-table::-webkit-scrollbar-thumb,.main-panel-list-container .panel-main-container-rtl .panel-table::-webkit-scrollbar-thumb{background-color:#0003}.main-panel-list-container .panel-main-container .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container .panel-main-container .panel-table td.mat-cell:first-of-type,.main-panel-list-container .panel-main-container .panel-table td.mat-footer-cell:first-of-type,.main-panel-list-container .panel-main-container-rtl .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container .panel-main-container-rtl .panel-table td.mat-cell:first-of-type,.main-panel-list-container .panel-main-container-rtl .panel-table td.mat-footer-cell:first-of-type{padding-left:24px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container{display:block;text-align:center}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button{cursor:pointer}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button{height:16px;width:16px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon{height:16px;width:16px;line-height:16px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text{font-size:14px;color:#444;padding-left:4px;line-height:16px}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover{color:#10a0e3}.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-text,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-text{display:inline-block;vertical-align:top}.main-panel-list-container-rtl .panel-main-container,.main-panel-list-container-rtl .panel-main-container-rtl{height:100%}.main-panel-list-container-rtl .panel-main-container .panel-left-container .panel-title-info-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-left-container .panel-title-info-button{align-items:center;margin-right:8px;height:24px;width:24px}.main-panel-list-container-rtl .panel-main-container .panel-table,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table{flex-grow:2;overflow:auto}.main-panel-list-container-rtl .panel-main-container .panel-table::-webkit-scrollbar,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table::-webkit-scrollbar{-webkit-appearance:none;width:5px;height:5px}.main-panel-list-container-rtl .panel-main-container .panel-table::-webkit-scrollbar-thumb,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table::-webkit-scrollbar-thumb{background-color:#0003}.main-panel-list-container-rtl .panel-main-container .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container .panel-table td.mat-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container .panel-table td.mat-footer-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table th.mat-header-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table td.mat-cell:first-of-type,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table td.mat-footer-cell:first-of-type{padding-right:24px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container{display:block;text-align:center}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button{cursor:pointer}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button{height:16px;width:16px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button button.mat-icon-button mat-icon.panel-table-load-more-button-icon.mat-icon{height:16px;width:16px;line-height:16px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text{font-size:14px;color:#444;padding-right:4px;line-height:16px}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button .panel-table-load-more-button-text:hover{color:#10a0e3}.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container-rtl .panel-main-container .panel-table .panel-table-load-more-container .panel-table-load-more-button-text,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-icon,.main-panel-list-container-rtl .panel-main-container-rtl .panel-table .panel-table-load-more-container .panel-table-load-more-button-text{display:inline-block;vertical-align:top}\n"],encapsulation:2});class wf{constructor(e){this.data=e}}function iS(a){if("number"==typeof a)return!0;if("string"==typeof a){const e=Number.parseInt(a);return String(e)===a}return!1}wf.\u0275fac=function(e){return new(e||wf)(n.\u0275\u0275directiveInject(E.eJ))},wf.\u0275cmp=n.\u0275\u0275defineComponent({type:wf,selectors:[["ts-validation-error-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","validation-dialog-additional-text",4,"ngIf"],[1,"validation-dialog-error"],["mat-dialog-actions",""],[4,"ngIf","ngIfElse"],["withoutContinue",""],[1,"validation-dialog-additional-text"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",1),n.\u0275\u0275template(4,FN,2,1,"span",2),n.\u0275\u0275elementStart(5,"span",3),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",4),n.\u0275\u0275template(8,LN,6,6,"ng-container",5),n.\u0275\u0275template(9,ON,3,3,"ng-template",null,6,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(10);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.data.title),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.data.additionalText),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.data.validationError),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.data.continueButtonCaption)("ngIfElse",i)}},dependencies:[y.NgIf,U.eB,E.aO,E.YS,E.Rb,E.ev,w.X$],styles:["ts-validation-error-dialog{margin:0!important;padding:0 6px;width:720px}ts-validation-error-dialog [mat-dialog-actions]{float:right}ts-validation-error-dialog [mat-dialog-content] .validation-dialog-error,ts-validation-error-dialog [mat-dialog-content] .validation-dialog-additional-text{white-space:pre-wrap}ts-validation-error-dialog [mat-dialog-content] .validation-dialog-error{font-family:monospace;font-size:13px}\n"],encapsulation:2});const jN=["container"],wD={Primary:{key:"primary",value:"#FFFFFF"}},xD={alignItems:"stretch"};class be extends Te{constructor(e){super(e),this.injector=e,this.destroyed$=new u.Subject,this.items=[],this.visiblePadding=!0,this.borderRadius=Fe.None,this.stretch=!1,this.fitContent=!0,this.width=Number.MAX_VALUE,this.window=this.injector.get(se),this._featureService=this.injector.get(Me),this.renderer=this.injector.get(n.Renderer2)}get isResponsive(){return this.responsiveWidth<Number.MAX_VALUE}get isResponsiveWidth(){return this.width<this.responsiveWidth}get responsiveWidth(){return 395*this.window.devicePixelRatio}set responsiveWidth(e){throw new Error("responsiveWidth is not supported yet")}static isBaseColorKey(e){if(e&&"string"==typeof e){const t=e.toLowerCase();return be._baseColors.some(i=>i.key===t)}return!1}static isBaseColorValue(e){if(e&&"string"==typeof e){const t=e.toLowerCase();return be._baseColors.some(i=>i.value===t)}return!1}static getBaseColorKey(e){const t=e.toLowerCase();return be._baseColors.find(i=>i.value===t)?.key}static getBaseColorValue(e){const t=e.toLowerCase();return be._baseColors.find(i=>i.key===t)?.value}_preparePadding(){const{top:e,bottom:t}=this.padding;let{left:i,right:r}=this.padding;return this.isRtl()&&([r,i]=[i,r]),{top:e,bottom:t,left:i,right:r}}_paddingClasses(){const e=[],t=this.padding;if(!t)return e;if((0,gt.Z)(t)){const{top:i,bottom:r,left:s,right:o}=this._preparePadding();return this.applySizeClass("container-padding-top-{0}",i,e),this.applySizeClass("container-padding-bottom-{0}",r,e),this.applySizeClass("container-padding-left-{0}",s,e),this.applySizeClass("container-padding-right-{0}",o,e),e}return this.applySizeClass("container-padding-{0}",t,e),e}_paddingStyles(){const e={},t=this.padding;if(!t)return e;if((0,gt.Z)(t)){const{top:i,bottom:r,left:s,right:o}=this._preparePadding();return this.applySizeStyle("paddingTop",i,e),this.applySizeStyle("paddingBottom",r,e),this.applySizeStyle("paddingLeft",s,e),this.applySizeStyle("paddingRight",o,e),e}return this.applySizeStyle("padding",t,e),e}_borderRadiusClasses(){const e=[],t=this.borderRadius;return t&&t!==Fe.None&&(this.applySizeClass("container-border-radius-{0}",t,e),e.push("container-border-area")),e}_borderRadiusStyles(){const e={},t=this.borderRadius;return t&&(iS(t)?e.borderRadius=`${t}px`:qg(t)||(e.borderRadius=t)),e}_colorClasses(){const e=this.color?.toLowerCase(),t=[];return be.isBaseColorKey(e)&&t.push(`container-background-color-${e}`),t}_colorStyles(){const e={};return this.color&&!be.isBaseColorKey(this.color)&&(e.backgroundColor=this.color),e}onScroll(){}applySizeClass(e,t,i){if("string"==typeof t&&qg(t)&&t!==Fe.None){const r=Z.Ld.Format(e,t.toLowerCase());i.push(r)}}onResize(){this.window.requestAnimationFrame(()=>{this.zone.run(()=>{this.isResponsive&&(this.width=this.window.innerWidth,this.detectChanges())})})}getClasses(){return[...super.getClasses(),...this._paddingClasses(),...this._colorClasses(),...this._borderRadiusClasses()]}applySizeStyle(e,t,i){t&&(iS(t)?i[e]=`${t}px`:"string"==typeof t&&!qg(t)&&(i[e]=t))}setValuesFromConfig(e,t=[]){super.setValuesFromConfig(e,["items"])}get containerStyles(){return{...this.styles||{},...this._paddingStyles(),...this._borderRadiusStyles(),...this._colorStyles()}}detectChangesAsync(e=null){this.window.requestAnimationFrame(()=>{setTimeout(()=>{this.detectChanges(),e?.()})})}ngOnInit(){this._featureService.getFeatureState("HideDesignPadding").subscribe(e=>{e&&(this.visiblePadding=!1)})}ngAfterViewInit(){this.zone=this.injector.get(n.NgZone),this.resizeObserver=new S_.Z(()=>this.onResize()),this.container&&this.resizeObserver.observe(this.container.nativeElement)}ngOnDestroy(){this.resizeObserver?.disconnect(),this.destroyed$.next(),this.destroyed$.complete()}}be._baseColors=Object.values(wD).map(({key:a,value:e})=>({key:a.toLowerCase(),value:e.toLowerCase()})),be.\u0275fac=function(e){return new(e||be)(n.\u0275\u0275directiveInject(n.Injector))},be.\u0275dir=n.\u0275\u0275defineDirective({type:be,viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(jN,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.container=i.first)}},hostVars:4,hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("scroll",function(){return t.onScroll()}),2&e&&n.\u0275\u0275classProp("stretch",t.stretch)("fit-content",t.fitContent)},inputs:{items:"items",visiblePadding:"visiblePadding",padding:"padding",borderRadius:"borderRadius",color:"color",responsiveWidth:"responsiveWidth",stretch:"stretch",fitContent:"fitContent"},features:[n.\u0275\u0275InheritDefinitionFeature]}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Array)],be.prototype,"items",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],be.prototype,"visiblePadding",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],be.prototype,"padding",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],be.prototype,"borderRadius",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Z.Ld)],be.prototype,"color",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Number),(0,m.w6)("design:paramtypes",[Object])],be.prototype,"responsiveWidth",null),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],be.prototype,"stretch",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],be.prototype,"fitContent",void 0);class Ts extends be{constructor(){super(...arguments),this.slotHTMLElements=[]}setSlotElementStyles(e){e=this.castSlotElements(e.filter(t=>!(t instanceof Comment))),this.applySlotElementStyles(e)}castSlotElements(e){}getItemLayout(e){}castElementStylesToLayoutConfig(e){}applySlotElementStyles(e){e.forEach(t=>{const i=this.getItemLayout(t.layoutConfig);Object.entries(i).forEach(([r,s])=>{const o=(0,mD.Z)(r);this.renderer.setStyle(t,o,s)})})}get shouldUseSlots(){return!this.items||!this.items.length}}Ts.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Ts)))(t||Ts)}}(),Ts.\u0275dir=n.\u0275\u0275defineDirective({type:Ts,features:[n.\u0275\u0275InheritDefinitionFeature]});const BN=["items"];function UN(a,e){1&a&&n.\u0275\u0275elementContainer(0)}function GN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"slot",4),n.\u0275\u0275listener("slotchange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.slotChange(r))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275projection(1)}}function zN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275elementContainer(1,7),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",i.getItemLayout(t.layoutConfig)),n.\u0275\u0275advance(1),n.\u0275\u0275property("crtViewElement",t)}}function HN(a,e){if(1&a&&n.\u0275\u0275template(0,zN,2,2,"div",5),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngForOf",t.items)}}const ED=(a,e)=>{const t=a.charAt(0).toUpperCase()+a.slice(1);return{caption:`LayoutElements.Flex${t}.Caption`,hint:`LayoutElements.Flex${t}.Hint`,icon:f(20470)(`./flex-${a}-icon.svg`),defaultPropertyValues:{direction:a,items:[],fitContent:!0},position:e}},Ps={...xD,direction:"row",justifyContent:"start",gap:Fe.Small};let yt=class extends Ts{constructor(e){super(e),this.injector=e,this._containerClasses=[],this.direction=Ps.direction,this.justifyContent=Ps.justifyContent,this.alignItems=Ps.alignItems,this.gap=Ps.gap,this.innerScroll=new n.EventEmitter}getClasses(){const t=[...super.getClasses(),...this._gapClasses()].sort();return(0,J.Z)(this._containerClasses,t)||(this._containerClasses=t),this._containerClasses}_gapClasses(){const e=[],t=this.gap||Ps.gap;return this.applySizeClass("container-gap-{0}",t,e),e}castElementStylesToLayoutConfig(e){const[t,i,r,s,o,c,d,p,g,C]=["basis","align-self","grow","shrink","width","height","min-width","max-width","min-height","max-height"].map(v=>{const T=`layout-config-${v}`,j=e.getAttribute(T);if(j)return j});return{basis:t,alignSelf:i,grow:Number(r),shrink:Number(s),width:Number(o),height:Number(c),minWidth:Number(d),maxWidth:Number(p),minHeight:Number(g),maxHeight:Number(C)}}castSlotElements(e){for(const t of e){const i=this.castElementStylesToLayoutConfig(t);t.layoutConfig=i}return e}get flexStyles(){const e={};e.justifyContent=this.justifyContent||Ps.justifyContent,e.alignItems=this.alignItems||Ps.alignItems,e.flexWrap=this.wrap||(this.isVertical?"nowrap":"wrap");const t=this.gap;return t&&(iS(t)?e.gap=t+"px":qg(t)||(e.gap=t)),{...this.containerStyles,...e}}get flexDirection(){return this.isVertical?this.direction||this.styles?.flexDirection:this.isResponsiveWidth?"row-reverse"===this.direction?"column-reverse":"column":this.direction||this.styles?.flexDirection}get isVertical(){return["column","column-reverse"].includes(this.direction)}getItemLayout(e){let t={};return e?.basis&&("fit-content"===e.basis?"column"===this.direction?t.height="fit-content":t.width="fit-content":t.flexBasis=e.basis),void 0!==e?.grow&&(t.flexGrow=e.grow),void 0!==e?.shrink&&(t.flexShrink=e.shrink),e?.alignSelf&&(t.alignSelf=e.alignSelf),e?.width&&(t.width=`${e.width}px`,t.minWidth=`${e.width}px`),e?.minWidth&&(t.minWidth=`${e.minWidth}px`),e?.maxWidth&&(t.maxWidth=`${e.maxWidth}px`),e?.height&&(t.height=`${e.height}px`,t.minHeight=`${e.height}px`),e?.minHeight&&(t.minHeight=`${e.minHeight}px`),e?.maxHeight&&(t.maxHeight=`${e.maxHeight}px`),e&&e.styles&&(t={...t,...e.styles}),t}ngAfterContentInit(){this.children.changes.pipe((0,ze.O)(this.children),(0,L.R)(this.destroyed$)).subscribe(()=>{const e=this.children.map(({nativeElement:t})=>t);e?.length&&(this.slotHTMLElements=e,this.setSlotElementStyles(this.slotHTMLElements))})}slotChange(e){const t=e.target.assignedNodes();!t||!t.length||(this.slotHTMLElements=t,this.setSlotElementStyles(this.slotHTMLElements))}onInnerScroll(){this.innerScroll.emit()}};yt.\u0275fac=function(e){return new(e||yt)(n.\u0275\u0275directiveInject(n.Injector))},yt.\u0275cmp=n.\u0275\u0275defineComponent({type:yt,selectors:[["crt-flex"]],contentQueries:function(e,t,i){if(1&e&&n.\u0275\u0275contentQuery(i,BN,4,n.ElementRef),2&e){let r;n.\u0275\u0275queryRefresh(r=n.\u0275\u0275loadQuery())&&(t.children=r)}},inputs:{direction:"direction",justifyContent:"justifyContent",wrap:"wrap",alignItems:"alignItems",gap:"gap"},outputs:{innerScroll:"innerScroll"},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:9,consts:[[1,"crt-flex",3,"ngStyle","ngClass","scroll"],[4,"ngIf","ngIfThen","ngIfElse"],["slotsTemplate",""],["itemsTemplate",""],[3,"slotchange"],["class","crt-view-element-container",3,"ngStyle",4,"ngFor","ngForOf"],[1,"crt-view-element-container",3,"ngStyle"],[3,"crtViewElement"]],template:function(e,t){if(1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("scroll",function(){return t.onInnerScroll()}),n.\u0275\u0275template(1,UN,1,0,"ng-container",1),n.\u0275\u0275template(2,GN,2,0,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(4,HN,1,1,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(3),r=n.\u0275\u0275reference(5);n.\u0275\u0275styleProp("flex-direction",t.flexDirection),n.\u0275\u0275property("ngStyle",t.flexStyles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id)("flex-direction",t.flexDirection),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.shouldUseSlots)("ngIfThen",i)("ngIfElse",r)}},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,qt],styles:[".crt-flex,web-flex-container{display:flex;width:100%;height:100%;min-height:0;min-width:0;overflow:auto}@supports (background: -webkit-named-image(i)){.crt-flex,web-flex-container{height:initial}}crt-flex{display:flex;flex-direction:column;min-height:0;min-width:0;overflow:auto}crt-flex.stretch{min-width:0;width:100%}crt-flex.stretch>.crt-flex{min-height:0;min-width:0}crt-flex .crt-flex>.stretch{flex-grow:1}.crt-view-element-container:empty{display:none}\n"],encapsulation:2}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],yt.prototype,"direction",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],yt.prototype,"justifyContent",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],yt.prototype,"wrap",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],yt.prototype,"alignItems",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],yt.prototype,"gap",void 0),(0,m.gn)([(0,l.CrtOutput)(),(0,m.w6)("design:type",Object)],yt.prototype,"innerScroll",void 0),yt=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.FlexContainer",contentSlots:["items"],reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,l.CrtInterfaceDesignerItem)({toolbarConfig:[ED("row",80),ED("column",90)],designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.FlexPropertiesPanel",viewElementGroupType:l.ViewElementGroupType.LayoutElements,typeCaption:"TypeCaptions.FlexContainer"}),(0,m.w6)("design:paramtypes",[n.Injector])],yt);class As{constructor(){this._maxGridLayoutRow=1,this._maxColumnsCount=12,this._defaultItemLayout={colSpan:1,row:1,column:1,rowSpan:1},this._defaultRowSpan=1,this._defaultColSpan=6}_applyExplicitPositions(e,t){if(e.every(i=>!i?.layoutConfig)){let i=1,r=1;e.forEach(s=>{const o=s.layoutConfig||{};void 0===o.column&&(o.column=r,r++),void 0===o.colSpan&&(o.colSpan=1),void 0===o.row&&(o.row=i),void 0===o.rowSpan&&(o.rowSpan=1),1===o.column&&-1===o.colSpan&&i++,r>t&&(r=1,i++),s.layoutConfig=o})}return e}_checkBitmapIntersection(e,t){let i,r;for(i=0,r=e.length;i<r;i++)if((e[i]&t[i])>0)return!0;return!1}_calculateBitMask(e,t,i){const r=i-e;return Math.pow(2,r)-Math.pow(2,r-t)}_isEmpty(e){return null==e||""===e||(0,he.Z)(e)&&0===e.length}_getItemBitmap(e,t){const i=[];if(this._isEmpty(e))return i;const r=e.column,s=e.row,o=e.colSpan||this._defaultColSpan;let d,p;for(d=s,p=s+(e.rowSpan||this._defaultRowSpan);d<p;d++)i[d]=this._calculateBitMask(r,o,t);return i}_setDefaultValue(e,t,i,r){e[i]||(e[i]=r),t[i]||(t[i]=r)}_fixItemIntersect(e,t){const i=e.layoutConfig,r=t.layoutConfig,s=this._tryFixColumns(i,r);let o=!0;return s||(o=this._tryFixRows(i,r)),!s&&!o&&i.row>this._maxGridLayoutRow&&(this._maxGridLayoutRow+=1),!s&&!o&&this._moveDownItem(e),e}_moveDownItem(e){this._maxGridLayoutRow++;const t=e.layoutConfig;t.row=this._maxGridLayoutRow,t.column=1;const i=this._originalItems.find(r=>r.name===e.name);i&&(t.colSpan=i.layoutConfig.colSpan||1)}_tryFixColumns(e,t){return this._setDefaultValue(e,t,"colSpan",this._defaultColSpan),this._calculateNewParameters(e,t,"column","colSpan")}_tryFixRows(e,t){return this._setDefaultValue(e,t,"rowSpan",this._defaultRowSpan),this._calculateNewParameters(e,t,"row","rowSpan")}_calculateNewParameters(e,t,i,r){const s=e[r],o=t[r],c=t[i],d=c+o,p=e[i],C=c<=p,v=C?d-p:p+s-c;return!(s<=v)&&(C&&(e[i]=d),e[r]=s-v,!0)}_compareItemsPositions(e,t){const i=e.layoutConfig||(0,q.Z)(this._defaultItemLayout),r=t.layoutConfig||(0,q.Z)(this._defaultItemLayout),s=Math.max(i.colSpan||this._defaultColSpan,i.rowSpan||this._defaultRowSpan),o=Math.max(r.colSpan||this._defaultColSpan,r.rowSpan||this._defaultRowSpan);return i.row!==r.row?i.row<r.row?-1:1:s<o||i.column<r.column&&s<=o?-1:1}_getMaxGridLayoutRow(e){const t=e.map(i=>{const r=i.layoutConfig||{};return(r.row||1)+(r.rowSpan||1)-1});return Math.max(...t)||1}_getMaxColumnsCount(e,t){const i=e.map(r=>{const s=r.layoutConfig||{};return(s.column||1)+(s.colSpan||1)-1});return Math.max(...i,t,this._maxColumnsCount)}fixItemsOverlap(e,t){this._originalItems=(0,q.Z)(e);const i=[],r=[];return this._maxGridLayoutRow=this._getMaxGridLayoutRow(e),this._maxColumnsCount=this._getMaxColumnsCount(e,t),[...e].sort((o,c)=>this._compareItemsPositions(o,c)).forEach(o=>{let c=this._getItemBitmap(o.layoutConfig,this._maxColumnsCount);r.forEach(d=>{const p=this._getItemBitmap(d.layoutConfig,this._maxColumnsCount);this._checkBitmapIntersection(p,c)&&(o=this._fixItemIntersect(o,d),c=this._getItemBitmap(o.layoutConfig,this._maxColumnsCount),i.push(o.name))}),r.push(o)}),this._applyExplicitPositions(e,t),{items:e,affectedItems:i}}}As.\u0275fac=function(e){return new(e||As)},As.\u0275prov=n.\u0275\u0275defineInjectable({token:As,factory:As.\u0275fac});const qN=["items"];function $N(a,e){1&a&&n.\u0275\u0275elementContainer(0)}function WN(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"slot",5),n.\u0275\u0275listener("slotchange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.slotChange(r))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275projection(1)}}function YN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275elementContainer(1,10),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngStyle",i.getItemLayout(t.layoutConfig)),n.\u0275\u0275advance(1),n.\u0275\u0275property("crtViewElement",t)}}function QN(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,YN,2,2,"div",8),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.items)}}function JN(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275elementContainer(1,10),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngStyle",i.getItemLayout(t.layoutConfig)),n.\u0275\u0275advance(1),n.\u0275\u0275property("crtViewElement",t)}}function KN(a,e){if(1&a&&n.\u0275\u0275template(0,JN,2,2,"div",8),2&a){const t=n.\u0275\u0275nextContext(2),i=n.\u0275\u0275reference(1);n.\u0275\u0275property("ngForOf",t.fixItemsOverlap(t.items,i).items)}}function XN(a,e){if(1&a&&(n.\u0275\u0275template(0,QN,2,1,"ng-container",6),n.\u0275\u0275template(1,KN,1,1,"ng-template",null,7,n.\u0275\u0275templateRefExtractor)),2&a){const t=n.\u0275\u0275reference(2),i=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",i.gridContainerAllowOverlapFeature)("ngIfElse",t)}}const TD={...xD,columnsTemplate:"minmax(32px, 1fr)"},Lm=(a,e,t={},i="column")=>{const r=TD.columnsTemplate,o=new Array(a).fill(r);return{caption:`LayoutElements.Grid${i.charAt(0).toUpperCase()+i.slice(1)}${a}.Caption`,icon:f(83028)(`./grid-${i}-${a}-icon.svg`),defaultPropertyValues:{columns:o,rows:"minmax(max-content, 32px)",gap:{columnGap:Fe.Large},items:[],fitContent:!0,...t},position:e}};let Ct=class extends Ts{ngAfterContentInit(){this.children.changes.pipe((0,ze.O)(this.children),(0,L.R)(this.destroyed$)).subscribe(()=>{const e=this.children.map(({nativeElement:t})=>t);e?.length&&(this.slotHTMLElements=e,this.setSlotElementStyles(this.slotHTMLElements))})}getClasses(){const r=[...super.getClasses()||[],...this._gridTemplateColumnsClasses(),...this._gapClasses()].sort();return(0,J.Z)(this._containerClasses,r)||(this._containerClasses=r),this._containerClasses}get gridStyles(){const e={};return this.justifyItems&&(e.justifyItems=this.justifyItems),this.alignItems&&(e.alignItems=this.alignItems),this.isResponsiveWidth&&(e.gridTemplateAreas="initial"),{...this.containerStyles,...e,...this._gapStyles(),...this._rowsStyles(),...this._columnsStyles()}}get gridTemplateColumns(){return this.width<this.responsiveWidth?TD.columnsTemplate:this.gridStyles.gridTemplateColumns}constructor(e){super(e),this.injector=e,this._containerClasses=[],this.featureService=this.injector.get(Me),this._gridContainerItemsLayoutService=this.injector.get(As),this.featureService.getFeatureState("GridContainerAllowOverlap").pipe((0,L.R)(this.destroyed$)).subscribe(t=>this.gridContainerAllowOverlapFeature=t)}_gapStyles(){const e={},t=this.gap;if((0,gt.Z)(t)){const{columnGap:i,rowGap:r}=t;this.applySizeStyle("columnGap",i,e),this.applySizeStyle("rowGap",r,e)}else this.applySizeStyle("gap",this.gap,e);return e}_rowsStyles(){const e={};return this.isResponsiveWidth?e.gridAutoRows="max-content":"string"==typeof this.rows?e.gridAutoRows=this.rows:this.rows instanceof Array&&(e.gridTemplateRows=this.rows.join(" ")),e}_columnsStyles(){const e={};return"string"==typeof this.columns?e.gridAutoColumns=this.columns:this.columns instanceof Array&&(e.gridTemplateColumns=this.columns.join(" ")),e}_gridTemplateColumnsClasses(){const e=[];return this.width<this.responsiveWidth&&e.push("crt-grid-responsive"),e}_gapClasses(){const e=[],t=this.gap;if(t)if((0,gt.Z)(t)){const{columnGap:i,rowGap:r}=t;this.applySizeClass("container-column-gap-{0}",i,e),this.applySizeClass("container-row-gap-{0}",r,e)}else this.applySizeClass("container-gap-{0}",t,e);return e}_fullLayoutConfig(e){const t={};let i="";void 0!==e?.column&&(i+=e.column),void 0!==e?.colSpan&&(i&&(i+="/"),-1!==e.colSpan&&(i+="span "),i+=e.colSpan);let r="";return void 0!==e?.row&&(r+=e.row),void 0!==e?.rowSpan&&(r&&(r+="/"),-1!==e.rowSpan&&(r+="span "),r+=e.rowSpan),i&&(t.gridColumn=i),r&&(t.gridRow=r),t}_responsiveLayoutConfig(e){const t={},i=e?.rowSpan;return void 0!==i&&-1!==i&&(t.gridRow=`span ${i}`),t}_computedGridColumns(e){return getComputedStyle(e).getPropertyValue("container-template-columns").split(" ")}_applySlotElementsResponsiveStyles(e){for(const t of e){const i=t?.layoutConfig?.rowSpan;void 0!==i&&-1!==i&&(this.renderer.setStyle(t,"grid-row-start",`span ${i}`),this.renderer.setStyle(t,"grid-row-end","auto")),this.renderer.setStyle(t,"grid-column-start","auto"),this.renderer.setStyle(t,"grid-column-end","auto")}}applySlotElementStyles(e){this.isResponsiveWidth?this._applySlotElementsResponsiveStyles(e):super.applySlotElementStyles(e)}castElementStylesToLayoutConfig(e){const[t,i,r,s]=["row","column","row-span","col-span"].map(o=>{const c=`layout-config-${o}`,d=e.getAttribute(c);if(d)return Number(d)});return{row:t,column:i,rowSpan:r,colSpan:s}}castSlotElements(e){for(const t of e)t.layoutConfig=this.castElementStylesToLayoutConfig(t);if(!this.gridContainerAllowOverlapFeature&&this.container?.nativeElement){const t=e.map(i=>({layoutConfig:i.layoutConfig}));this.fixItemsOverlap(t,this.container.nativeElement)}return e}onResize(){super.onResize(),this.shouldUseSlots&&this.window.requestAnimationFrame(()=>{this.zone.run(()=>{this.setSlotElementStyles(this.slotHTMLElements)})})}getItemLayout(e){return e?this.isResponsiveWidth?this._responsiveLayoutConfig(e):this._fullLayoutConfig(e):null}fixItemsOverlap(e,t){let i=[];if(!0!==this.allowOverlap&&e){const r=this._computedGridColumns(t);i=this._gridContainerItemsLayoutService.fixItemsOverlap(e,r.length).affectedItems}return{items:e,affectedItems:i}}slotChange(e){const t=e.target.assignedNodes();!t||!t.length||(this.slotHTMLElements=t,this.setSlotElementStyles(this.slotHTMLElements))}};function n4(a,e){if(1&a&&n.\u0275\u0275elementContainer(0,3),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("crtViewModel",t)("crtViewElement",i.itemViewConfig)}}function i4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,n4,1,2,"ng-container",2),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.viewModels)}}Ct.\u0275fac=function(e){return new(e||Ct)(n.\u0275\u0275directiveInject(n.Injector))},Ct.\u0275cmp=n.\u0275\u0275defineComponent({type:Ct,selectors:[["crt-grid"]],contentQueries:function(e,t,i){if(1&e&&n.\u0275\u0275contentQuery(i,qN,4,n.ElementRef),2&e){let r;n.\u0275\u0275queryRefresh(r=n.\u0275\u0275loadQuery())&&(t.children=r)}},inputs:{rows:"rows",columns:"columns",gap:"gap",justifyItems:"justifyItems",alignItems:"alignItems",allowOverlap:"allowOverlap"},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:7,vars:8,consts:[[1,"crt-grid",3,"ngStyle","ngClass"],["container",""],[4,"ngIf","ngIfThen","ngIfElse"],["slotsTemplate",""],["itemsTemplate",""],[3,"slotchange"],[4,"ngIf","ngIfElse"],["fixItemsLayoutConfig",""],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"crtViewElement"]],template:function(e,t){if(1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275template(2,$N,1,0,"ng-container",2),n.\u0275\u0275template(3,WN,2,0,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(5,XN,3,2,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(4),r=n.\u0275\u0275reference(6);n.\u0275\u0275styleProp("grid-template-columns",t.gridTemplateColumns),n.\u0275\u0275property("ngStyle",t.gridStyles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.shouldUseSlots)("ngIfThen",i)("ngIfElse",r)}},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,qt],styles:["crt-grid,web-grid-container{display:block;width:100%;position:relative;min-height:0;min-width:0;overflow:auto}crt-grid>.crt-grid,web-grid-container>.crt-grid{display:grid;width:100%;height:100%;min-height:0;min-width:0;overflow:auto}@supports (background: -webkit-named-image(i)){crt-grid>.crt-grid,web-grid-container>.crt-grid{height:initial}}crt-grid>.crt-grid>*,web-grid-container>.crt-grid>*{min-height:0;min-width:0;overflow:auto}@media screen and (max-width: 600px){.crt-grid:not(.crt-grid-responsive){grid-template-columns:1fr!important}}\n"],encapsulation:2}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],Ct.prototype,"rows",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],Ct.prototype,"columns",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],Ct.prototype,"gap",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],Ct.prototype,"justifyItems",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],Ct.prototype,"alignItems",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Boolean)],Ct.prototype,"allowOverlap",void 0),Ct=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.GridContainer",contentSlots:["items"],reuseStrategy:l.ViewElementReuseStrategy.Reuse}),(0,l.CrtInterfaceDesignerItem)({toolbarConfig:[((a,e)=>{const t={padding:{top:Fe.Medium,right:Fe.Large,bottom:Fe.Medium,left:Fe.Large},color:wD.Primary.key,borderRadius:Fe.Medium};return Lm(a,e,t,"area")})(1,40),Lm(1,50),Lm(2,60),Lm(3,70),Lm(4,80)],designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.GridPropertiesPanel",viewElementGroupType:l.ViewElementGroupType.LayoutElements,typeCaption:"TypeCaptions.GridContainer"}),(0,m.w6)("design:paramtypes",[n.Injector])],Ct);let _n=class extends Te{};_n.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(_n)))(t||_n)}}(),_n.\u0275cmp=n.\u0275\u0275defineComponent({type:_n,selectors:[["ts-component-list"]],inputs:{itemViewConfig:"itemViewConfig",viewModels:"viewModels"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[[1,"ts-component-list",3,"ngStyle","ngClass"],[4,"ngIf"],[3,"crtViewModel","crtViewElement",4,"ngFor","ngForOf"],[3,"crtViewModel","crtViewElement"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,i4,2,1,"div",1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("ngStyle",t.styles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.viewModels))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,Kl,qt],encapsulation:2}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],_n.prototype,"itemViewConfig",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",it)],_n.prototype,"viewModels",void 0),_n=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.ComponentList",reuseStrategy:l.ViewElementReuseStrategy.Reuse})],_n);let ui=class extends Te{};ui.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ui)))(t||ui)}}(),ui.\u0275cmp=n.\u0275\u0275defineComponent({type:ui,selectors:[["ts-label"]],inputs:{label:"label"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"ts-label",3,"ngStyle","ngClass"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275property("ngStyle",t.styles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.label))},dependencies:[y.NgClass,y.NgStyle],encapsulation:2}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],ui.prototype,"label",void 0),ui=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.DeprecatedLabel",reuseStrategy:l.ViewElementReuseStrategy.Reuse})],ui);let ra=class extends Te{};ra.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ra)))(t||ra)}}(),ra.\u0275cmp=n.\u0275\u0275defineComponent({type:ra,selectors:[["ts-list"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:16,vars:3,consts:[[1,"ts-list",3,"ngStyle","ngClass"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ul")(2,"li"),n.\u0275\u0275text(3,"1 Item"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"li"),n.\u0275\u0275text(5,"2 Item"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"li"),n.\u0275\u0275text(7,"3 Item"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"li"),n.\u0275\u0275text(9,"4 Item"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"li"),n.\u0275\u0275text(11,"5 Item"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"li"),n.\u0275\u0275text(13,"6 Item"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"li"),n.\u0275\u0275text(15,"7 Item"),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275property("ngStyle",t.styles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id))},dependencies:[y.NgClass,y.NgStyle],encapsulation:2}),ra=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.List",reuseStrategy:l.ViewElementReuseStrategy.Reuse})],ra);class xc{constructor(e,t){this._matIconRegistry=e,this._domSanitizer=t,this._registerIcons()}_registerIcons(){["collapse"].forEach(t=>{this._matIconRegistry.addSvgIconLiteral(t,this._domSanitizer.bypassSecurityTrustHtml(f(88395)("./"+t+".svg")))})}}xc.\u0275fac=function(e){return new(e||xc)(n.\u0275\u0275inject(A.jv),n.\u0275\u0275inject(k.DomSanitizer))},xc.\u0275mod=n.\u0275\u0275defineNgModule({type:xc}),xc.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,A.Ps]});class Om{constructor(){this._direction="right",this.animationState="initial",this.isExpanded=!1,this.toggle=new n.EventEmitter}set direction(e){this._direction=e}get direction(){return this._direction}set animationDisabled(e){this._animationDisabled=e}get animationDisabled(){return this._animationDisabled}_setDefaultAnimationState(){this.animationState="initial"}_changeAnimationState(e){this.animationState=e}_onMouseEnter(){this._changeAnimationState(`slide-${this.direction}`)}_onMouseLeave(){this._changeAnimationState("initial")}onMouseAction(e){if(this.animationDisabled)this._setDefaultAnimationState();else switch(e){case"enter":this._onMouseEnter();break;case"leave":this._onMouseLeave()}}onToggle(){this.toggle.emit()}}function a4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"crt-expansion-button",2),n.\u0275\u0275listener("toggle",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onToggle())}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("direction",null==t.panelConfig?null:t.panelConfig.direction)("animationDisabled",null==t.panelConfig?null:t.panelConfig.animationDisabled)("isExpanded",t.isExpanded)}}Om.\u0275fac=function(e){return new(e||Om)},Om.\u0275cmp=n.\u0275\u0275defineComponent({type:Om,selectors:[["crt-expansion-button"]],inputs:{isExpanded:"isExpanded",direction:"direction",animationDisabled:"animationDisabled"},outputs:{toggle:"toggle"},decls:3,vars:8,consts:[[3,"mouseenter","mouseleave","click"],["svgIcon","collapse",1,"arrow-icon"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("mouseenter",function(){return t.onMouseAction("enter")})("mouseleave",function(){return t.onMouseAction("leave")})("click",function(){return t.onToggle()}),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275element(2,"mat-icon",1),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275classMapInterpolate1("expansion-button-wrapper ",t.direction,""),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("expansion-btn ",t.animationState,""),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("reversed",t.isExpanded))},dependencies:[A.Hw],styles:[".expansion-button-wrapper{width:29px;height:40px;display:flex;position:absolute}.expansion-button-wrapper.left{justify-content:flex-end;left:-17px}.expansion-button-wrapper.left .expansion-btn{border-radius:8px 0 0 8px}.expansion-button-wrapper.left .expansion-btn .arrow-icon{transform:rotate(0)}.expansion-button-wrapper.left .expansion-btn .arrow-icon.reversed{transform:rotate(180deg)}.expansion-button-wrapper.right{justify-content:flex-start;left:17px}.expansion-button-wrapper.right .expansion-btn{border-radius:0 8px 8px 0}.expansion-button-wrapper.right .expansion-btn .arrow-icon{transform:rotate(180deg)}.expansion-button-wrapper.right .expansion-btn .arrow-icon.reversed{transform:rotate(0)}.expansion-button-wrapper .expansion-btn{display:flex;justify-content:center;align-items:center;height:100%;cursor:pointer;transition:.3s cubic-bezier(.18,.89,.32,1.28)}.expansion-button-wrapper .expansion-btn.initial{width:16px}.expansion-button-wrapper .expansion-btn.slide-left,.expansion-button-wrapper .expansion-btn.slide-right{width:25px}.expansion-button-wrapper .expansion-btn .arrow-icon{height:16px;width:16px}\n"],encapsulation:2});const r4=function(a){return{show:a}};class xf{constructor(){this.isExpanded=!1,this.toggle=new n.EventEmitter}onToggle(){this.toggle.emit()}}xf.\u0275fac=function(e){return new(e||xf)},xf.\u0275cmp=n.\u0275\u0275defineComponent({type:xf,selectors:[["ts-vertical-expansion-panel"]],inputs:{isExpanded:"isExpanded",panelConfig:"panelConfig"},outputs:{toggle:"toggle"},ngContentSelectors:["*"],decls:4,vars:7,consts:[["class","expansion-button",3,"direction","animationDisabled","isExpanded","toggle",4,"ngIf"],[1,"panel",3,"ngClass"],[1,"expansion-button",3,"direction","animationDisabled","isExpanded","toggle"]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,a4,1,3,"crt-expansion-button",0),n.\u0275\u0275elementStart(2,"div",1),n.\u0275\u0275projection(3),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275classMapInterpolate1("container button-placement-",null==t.panelConfig?null:t.panelConfig.direction,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==t.panelConfig?null:t.panelConfig.showToggleButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(5,r4,t.isExpanded)))},dependencies:[y.NgClass,y.NgIf,Om],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100%}.expansion-button[_ngcontent-%COMP%]{position:absolute;z-index:3}.button-placement-left[_ngcontent-%COMP%]   .expansion-button[_ngcontent-%COMP%]{right:calc(100% + 10px)}.button-placement-right[_ngcontent-%COMP%]   .expansion-button[_ngcontent-%COMP%]{left:100%}.panel[_ngcontent-%COMP%]{display:none}.panel.show[_ngcontent-%COMP%]{display:flex;height:100%}"],changeDetection:0});class jm{}jm.\u0275fac=function(e){return new(e||jm)},jm.\u0275mod=n.\u0275\u0275defineNgModule({type:jm}),jm.\u0275inj=n.\u0275\u0275defineInjector({});class di{constructor(e,t){this.httpClient=e,this.sysSettingsService=t,this._serviceUrl="/rest/FacebookOmnichannelMessagingService/",this._settingsCodes=["IdentityServerUrl"],this._sysSettingsValues={},this.sysSettingsService.getByCodes(this._settingsCodes).subscribe(i=>{const r=i&&i.success&&i.values&&(0,Fv.Z)(i.values||{},s=>s.value);r&&(this._sysSettingsValues=r)})}getApplicationId(){return this.httpClient.get(this._serviceUrl+"GetCurrentFacebookAppId")}getApiVersion(){return"v20.0"}getIdentityServerUrl(){return this._sysSettingsValues.IdentityServerUrl}getPageName(e,t){return this.httpClient.get(this._serviceUrl+`GetPageName?pageId=${e}&channelId=${t}`).pipe((0,u.map)(i=>JSON.parse(i).name),(0,u.take)(1))}}di.\u0275fac=function(e){return new(e||di)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(De))},di.\u0275prov=n.\u0275\u0275defineInjectable({token:di,factory:di.\u0275fac});class Ec{constructor(e,t){this._settingsService=e,this._window=t,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management",this._toSubscribeFields="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}_loadScript(e,t,i=null){const r=document.createElement("script");r.async=!0,r.src=e,r.onload=t,i||(i=document.head),i.appendChild(r)}_innerLogin(e=!1){const t={scope:this._permissions,return_scopes:!0};return e&&(t.auth_type="rerequest"),new u.Observable(i=>{FB.login(r=>{r.authResponse?i.next(!0):i.next(!1)},t)})}_getSubscribed(e,t){FB.api(`/me/subscribed_apps?access_token=${e}`,"GET",{},i=>{t(i?.data?.[0]?.subscribed_fields||[])})}isLoggedIn(){return new u.Observable(e=>{FB.getLoginStatus(t=>{"connected"===t.status?e.next(!0):e.next(!1)})})}login(){return this._innerLogin()}reLogin(){return this._innerLogin(!0)}getPages(){return new u.Observable(e=>{FB.api("me/accounts",t=>{e.next(t)})})}initialize(){return new u.Observable(e=>{this._loadScript(this._sdkUrl,()=>{this._settingsService.getApplicationId().subscribe(t=>{const i=t.replace(/\D+/g,"").trim();FB.init({appId:i,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._settingsService.getApiVersion()}),this.isInitialized=!0,e.next(!0)})})})}attachPage(e){return new u.Observable(t=>{this._getSubscribed(e,i=>{const r=(0,dg.Z)(i,this._toSubscribeFields.split(",")).join(",");FB.api(`/me/subscribed_apps?subscribed_fields=${r}&access_token=${e}`,"POST",{},s=>{t.next(s)})})})}isFacebookSettingValid(){return this._settingsService.getIdentityServerUrl()&&"https:"===this._window.location.protocol}}Ec.\u0275fac=function(e){return new(e||Ec)(n.\u0275\u0275inject(di),n.\u0275\u0275inject("Window"))},Ec.\u0275prov=n.\u0275\u0275defineInjectable({token:Ec,factory:Ec.\u0275fac});let PD=class extends l.BaseRequestHandler{constructor(e){super(),this._facebookProvider=e}handle(e){return this._facebookProvider.initialize().pipe((0,u.take)(1)).subscribe(),this.next?.handle(e)}};PD=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.OpenFacebookIntegrationPageRequest",type:"crt.OpenFacebookIntegrationPageHandler"}),(0,m.w6)("design:paramtypes",[Ec])],PD);const Tc={OK:{key:"OK",config:{color:"primary",caption:"Dialog.Ok"}},YES:{key:"YES",config:{color:"primary",caption:"Dialog.Yes"}},NO:{key:"NO",config:{color:"default",caption:"Dialog.No"}}};class Pc{}Pc.\u0275fac=function(e){return new(e||Pc)},Pc.\u0275mod=n.\u0275\u0275defineNgModule({type:Pc}),Pc.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});class AD{get photo(){return this._photo||((0,l.isEmptyGuid)(this.photoId)?"":Xh(this.photoId))}set photo(e){this._photo=e}constructor(e,t,i){this.id=e,this.name=t,this.photoId=i}}function o4(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"img",3),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("src",null==t.contact?null:t.contact.photo,n.\u0275\u0275sanitizeUrl)}}function l4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("background",t.contactColor),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.getInitials())}}class Bm{constructor(){this.contactClick=new n.EventEmitter}getInitials(){return this.contact&&this.contact.name?this.contact.name.replace(/\s+/g," ").trim().split(" ",2).map(function(t){return t.substr(0,1).toUpperCase()}).join(""):""}contactClicked(){return this.contactClick.emit({contactId:this.contact.id}),!1}}var aS,RD,Ef,Ac,sa;Bm.\u0275fac=function(e){return new(e||Bm)},Bm.\u0275cmp=n.\u0275\u0275defineComponent({type:Bm,selectors:[["ts-contact-photo"]],inputs:{contact:"contact",contactColor:"contactColor"},outputs:{contactClick:"contactClick"},ngContentSelectors:["*"],decls:5,vars:2,consts:[[3,"click"],[4,"ngIf","ngIfElse"],["noPhoto",""],["alt","Contact photo",1,"contact-photo",3,"src"],[1,"contact-photo","no-photo"]],template:function(e,t){if(1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("click",function(){return t.contactClicked()}),n.\u0275\u0275template(1,o4,2,1,"ng-container",1),n.\u0275\u0275template(2,l4,2,3,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275projection(4),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.contact.photo)("ngIfElse",i)}},dependencies:[y.NgIf],styles:[".contact-photo[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px;cursor:pointer}.contact-photo.no-photo[_ngcontent-%COMP%]{text-align:center;line-height:2.2em;font-size:14px;display:inline-block;min-width:32px;min-height:32px;color:#fff}"]}),function(a){a.Completed="a1b0184b-0a54-4a47-ba08-a5772105d3b2"}(aS||(aS={})),function(a){a[a.Inactive=0]="Inactive",a[a.Active=1]="Active",a[a.ChatsExceeded=2]="ChatsExceeded"}(RD||(RD={}));class u4{}!function(a){a[a.Incoming=1]="Incoming",a[a.Outcoming=2]="Outcoming"}(Ef||(Ef={})),function(a){a[a.Text=0]="Text",a[a.File=1]="File",a[a.Image=2]="Image",a[a.System=5]="System"}(Ac||(Ac={}));!function(a){a.FacebookMessenger="50491c6c-d82b-4b86-b38c-99262d11a5ac",a.Telegram="645170ab-c67a-4dcc-9def-c0e5236bdfe0",a.WhatsApp="1398dc73-b428-4e21-b97a-c1bb6b4bc621",a.AdaConnector="fd6491c5-0ebe-408a-a4c3-057a1ac79dd4"}(sa||(sa={}));class d4{get type(){switch(this.typeId){case sa.FacebookMessenger:return sa.FacebookMessenger;case sa.Telegram:return sa.Telegram;default:throw new Error(`Type with id ${this.typeId} not found`)}}}class Rs{_getChatOperator(e){const t=new u4;return e.Operator&&(t.contact=this._getContact(e["Operator.Contact"]),t.displayValue=e.Operator.displayValue,t.value=e.Operator.value),t}_getContact(e){if(e)return new AD(e.value,e.displayValue,e.primaryImageValue)}_getChannel(e){const t=e.Channel,i=e["Channel.Provider"],r={};return t&&(r.id=t.value,r.name=t.displayValue),i&&(r.provider={id:i.value,name:i.displayValue,icon:rw(i.primaryImageValue)}),r.source=e["Channel.Source"],r.msgSettingsId=e["Channel.MsgSettingsId"],r}_getQueue(e){const t=e.Queue,i={};return t&&(i.id=t.value),i}_createChat(e){const t=this._getContact(e.Contact);t.account=e["Contact.Account"];const i=this._getChannel(e),r=this._getQueue(e),s=this._getChatOperator(e);return{id:e.Id,contact:t,lastMessageTime:e.ModifiedOn,status:e.Status,channel:i,chatPreview:e.ChatPreview,operator:s,unprocessedMsgCount:e.UnprocessedMsgCount,chatStartDate:e.ChatStartDate,closeDate:e.CloseDate,completionDate:e.CompletionDate,lastMessageDirection:e.LastMessageDirection,channelId:e.ChannelId,chatQueueId:e.ChatQueueId||r.id}}_getLookupValue(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]?e[t].value:void 0}getEntity(e){return this._createChat(e)}getEntityColumns(e){return[new re("Id",e.id,l.DataValueType.Guid),new re("Contact",this._getLookupValue(e,"contact"),l.DataValueType.Lookup),new re("Contact.Account",this._getLookupValue(e,"account"),l.DataValueType.Lookup),new re("ModifiedOn",e.lastMessageTime,l.DataValueType.DateTime),new re("Status",this._getLookupValue(e,"status"),l.DataValueType.Lookup),new re("Channel",this._getLookupValue(e,"channel"),l.DataValueType.Lookup),new re("Channel.Provider",this._getLookupValue(e,"channel"),l.DataValueType.Lookup),new re("Channel.Source",e.channel?.source,l.DataValueType.Text),new re("Channel.MsgSettingsId",e.channel?.msgSettingsId,l.DataValueType.Text),new re("ChatPreview",e.chatPreview,l.DataValueType.Text),new re("Operator",this._getLookupValue(e,"operator"),l.DataValueType.Lookup),new re("UnprocessedMsgCount",e.unprocessedMsgCount,l.DataValueType.Integer),new re("ChatStartDate",e.chatStartDate,l.DataValueType.DateTime),new re("CloseDate",e.closeDate,l.DataValueType.DateTime),new re("CompletionDate",e.completionDate,l.DataValueType.DateTime),new re("Operator.Contact",this._getLookupValue(e,"operatorContact"),l.DataValueType.Lookup),new re("Queue",this._getLookupValue(e,"queue"),l.DataValueType.Lookup)]}}Rs.\u0275fac=function(e){return new(e||Rs)},Rs.\u0275prov=n.\u0275\u0275defineInjectable({token:Rs,factory:Rs.\u0275fac});class ks{_createChatQueueOperator(e){return{id:e.Id,operator:e.Operator,chatQueue:e.ChatQueue}}getValueFromLookup(e,t){return e.hasOwnProperty(t)&&!(0,O.Z)(e[t])?e[t].value:void 0}getEntity(e){return this._createChatQueueOperator(e)}getEntityColumns(e){return[new re("Id",e.id,l.DataValueType.Guid),new re("Operator",this.getValueFromLookup(e,"operator"),l.DataValueType.Lookup),new re("ChatQueue",this.getValueFromLookup(e,"chatQueue"),l.DataValueType.Lookup)]}}ks.\u0275fac=function(e){return new(e||ks)},ks.\u0275prov=n.\u0275\u0275defineInjectable({token:ks,factory:ks.\u0275fac});class Ns{_createChannel(e){const t=e.Provider,i=e.ChatQueue,r=e.Language;return{id:e.Id,name:e.Name,typeId:t.value,typeName:t.displayValue,msgSettingsId:e.MsgSettingsId,queueId:i.value,queueName:i.displayValue,source:e.Source,isActive:e.IsActive,languageId:r.value,languageName:r.displayValue}}getEntity(e){return this._createChannel(e)}getEntityColumns(e){return[new re("Id",e.id,l.DataValueType.Guid),new re("Name",e.name,l.DataValueType.Text),new re("Provider",e.typeId,l.DataValueType.Lookup),new re("MsgSettingsId",e.msgSettingsId,l.DataValueType.Guid),new re("ChatQueue",e.queueId,l.DataValueType.Lookup),new re("Source",e.source,l.DataValueType.Text),new re("IsActive",e.isActive,l.DataValueType.Boolean),new re("Language",e.languageId,l.DataValueType.Lookup)]}}Ns.\u0275fac=function(e){return new(e||Ns)},Ns.\u0275prov=n.\u0275\u0275defineInjectable({token:Ns,factory:Ns.\u0275fac});class St extends V_{static get rowsCount(){return 30}constructor(e,t,i,r,s,o){super(t,i,r),this.rightsService=e,this.httpClient=s,this.userInfo=o,this._serviceUrl="/rest/OmnichannelChatService/",this._canManageChatsOperationCode="CanManageChats",this._cacheChatActions={},this.entitySchemaName="OmniChat"}_postWithChatId(e,t){const i=this._serviceUrl+t;return this.httpClient.post(i,{chatId:e})}_getMessages(e,t){const i=this._serviceUrl+t;return this.httpClient.post(i,{chatId:e}).pipe((0,h.U)(this._mapChatMessage()))}_getAllConversationMessages(e,t,i){const r=(new D.HttpHeaders).set("Content-Type","application/json; charset=utf-8"),s=this._serviceUrl+"GetAllConversation";return this.httpClient.post(s,{contactId:e,channelId:t,rowCount:St.rowsCount,rowOffset:i},{headers:r}).pipe((0,h.U)(this._mapChatMessage()))}_mapChatMessage(){return e=>(e.forEach(t=>{t.time=new Date(t.time),t.author=new AD(t.author.id,t.author.name,t.author.photoId)}),e)}acceptChat(e){return this._postWithChatId(e,"AcceptChat")}getConversation(e){return this._getMessages(e,"GetConversation")}getAllConversation(e,t,i=0){return this._getAllConversationMessages(e,t,i)}markAsRead(e){const t=this._serviceUrl+"MarkChatAsRead";this.httpClient.post(t,{chatId:e}).subscribe()}getMessageTemplate(e){const t=this._serviceUrl+"GetUnifiedMessageTemplate";return this.httpClient.post(t,{chatId:e})}sendMessage(e){const i={message:e};return this.httpClient.post("/rest/OmnichannelOutcomeMessagingService/SendMessage",i)}sendMessageWithAttachments(e,t){const r=new FormData;return r.append("message",JSON.stringify(e)),Array.from(t).forEach((s,o)=>{r.append("file"+o,s,s.name)}),this.httpClient.post("/rest/OmnichannelOutcomeMessagingService/SendMessageWithAttachments",r)}completeChat(e){return this._postWithChatId(e,"CloseActiveChat")}getOperatorChats(){const e=this._serviceUrl+"GetChats";return this.httpClient.post(e,{operatorId:this.userInfo.id}).pipe((0,h.U)(t=>({success:!0,errorInfo:null,result:t.Chats.map(i=>this.entityConverter.getEntity(i))})),(0,G.K)(t=>this.getBaseErrorResponse(t)))}getChatHistory(e){return this._getMessages(e,"GetHistory")}getChatActions(e){if(this._cacheChatActions[e])return(0,u.of)(this._cacheChatActions[e]);const t=this._serviceUrl+"GetChatActions";return this.httpClient.post(t,{chatId:e}).pipe((0,I.b)(i=>this._cacheChatActions[e]=i))}isOperatorCanManageChats(){return this.rightsService.getCanExecuteOperation(this._canManageChatsOperationCode).pipe((0,h.U)(e=>e))}isOperatorActive(){const e=new l.EntitySchemaQuery("OperatorSession");return e.rowCount=1,e.addSchemaColumn("OperatorState.OperatorAvailable","IsActive"),e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Is_null,"SessionEndDate",null),e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"SysUser",this.userInfo.id),this.queryExecutor.executeSelectQuery(e).pipe((0,h.U)(t=>t&&t[0].IsActive||!1),(0,G.K)(()=>(0,u.of)(!1)))}isOperatorHasActiveChannel(){const e=new l.EntitySchemaQuery("Channel");e.rowCount=1;const t=new l.FilterGroup;return t.logicalOperation=l.LogicalOperatorType.Or,t.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ChatQueue.[ChatQueueOperator:ChatQueue:Id].[SysAdminUnitInRole:SysAdminUnit:Operator].SysAdminUnit",this.userInfo.id),t.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ChatQueue.[ChatQueueOperator:ChatQueue:Id].[SysAdminUnitInRole:SysAdminUnitRoleId:Operator].SysAdminUnit",this.userInfo.id),e.filters.add(t),e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"IsActive",!0),this.queryExecutor.executeSelectQuery(e).pipe((0,h.U)(i=>i&&i.length>0||!1),(0,G.K)(()=>(0,u.of)(!1)))}hasUncompletedChats(e){const t=this._serviceUrl+"GetHasUncompletedChats";return this.httpClient.post(t,{channelId:e})}}St.\u0275fac=function(e){return new(e||St)(n.\u0275\u0275inject(mt),n.\u0275\u0275inject(me),n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(Rs),n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(Q))},St.\u0275prov=n.\u0275\u0275defineInjectable({token:St,factory:St.\u0275fac,providedIn:"root"});class Vs{constructor(e,t,i){this._sysSettingsService=e,this._facebookSettingsService=t,this._window=i,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management",this._fieldsToSubscribe="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}get fbApiLibrary(){return this._window.FB||null}_initApi(e){console.log(`FB.init call for appId:${e}`),this.fbApiLibrary.init({appId:e,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._facebookSettingsService.getApiVersion()})}_getSubscribedApps(e){return new u.Observable(t=>{console.log(`FB.api call for path '/me/subscribed_apps?access_token=${e}'`),this.fbApiLibrary.api(`/me/subscribed_apps?access_token=${e}`,"GET",{},i=>{const r=i?.data?.[0]?.subscribed_fields||[];t.next(r),t.complete()})})}isFacebookSettingValid(){var e=this;return(0,_.Z)(function*(){return(yield(0,u.firstValueFrom)(e._sysSettingsService.getValueByCode("IdentityServerUrl")))&&"https:"===e._window.location.protocol})()}initApi(){return this.fbApiLibrary?(0,u.of)(!0):this.loadLibrary().pipe((0,u.concatMap)(()=>this._facebookSettingsService.getApplicationId()),(0,u.concatMap)(e=>{const t=e.replace(/\D+/g,"").trim();return this._initApi(t),(0,u.of)(!0)}))}loadLibrary(){return new u.Observable(e=>{console.log("Loading FB SDK...");const t=document.createElement("script");t.src=this._sdkUrl,t.onload=()=>{console.log("FB SDK loaded"),e.next(),e.complete()},t.onerror=i=>{e.error(i)},document.body.appendChild(t)})}login(){const e={scope:this._permissions,return_scopes:!0,auth_type:"rerequest"};return new u.Observable(t=>{console.log("FB.login call"),this.fbApiLibrary.login(i=>{i.authResponse&&"connected"===i.status&&(t.next(),t.complete())},e)})}getPages(){return new u.Observable(e=>{console.log("FB.api call for path 'me/accounts'"),this.fbApiLibrary.api("me/accounts",t=>{const i=[];t.data.forEach(r=>{i.push({id:r.id,name:r.name,token:r.access_token})}),e.next(i),e.complete()})})}subscribeApps(e,t){return new u.Observable(i=>{console.log(`FB.api call for path '/me/subscribed_apps?subscribed_fields=${t}&access_token=${e}'`),this.fbApiLibrary.api(`/me/subscribed_apps?subscribed_fields=${t}&access_token=${e}`,"POST",{},r=>{i.next(Boolean(r)),i.complete()})})}attachPage(e){return this._getSubscribedApps(e).pipe((0,u.concatMap)(t=>{const i=(0,dg.Z)(t,this._fieldsToSubscribe.split(",")).join(",");return this.subscribeApps(e,i)}))}}Vs.\u0275fac=function(e){return new(e||Vs)(n.\u0275\u0275inject(De),n.\u0275\u0275inject(di),n.\u0275\u0275inject("Window"))},Vs.\u0275prov=n.\u0275\u0275defineInjectable({token:Vs,factory:Vs.\u0275fac});class Fs{constructor(e){this.httpClient=e,this._serviceUrl="/rest/TelegramOmnichannelMessagingService/"}registerTelegramChannel(e){const t=this._serviceUrl+"RegisterChannel";return this.httpClient.post(t,{token:e})}validateRegisterChannel(e){return e.IsTokenValid?e.IsTokenExist?"ChatSettings.ChannelPage.Telegram.TelegramTokenAlreadyExists":"":"ChatSettings.ChannelPage.Telegram.InvalidTelegramToken"}getTelegramUserName(e){const t=this._serviceUrl+"GetUserName";return this.httpClient.post(t,{settingsId:e})}removeTelegramChannel(e){const t=(new D.HttpHeaders).set("Content-Type","application/json; charset=utf-8"),i=this._serviceUrl+"RemoveChannel";return this.httpClient.post(i,{telegramId:e},{headers:t})}}Fs.\u0275fac=function(e){return new(e||Fs)(n.\u0275\u0275inject(D.HttpClient))},Fs.\u0275prov=n.\u0275\u0275defineInjectable({token:Fs,factory:Fs.\u0275fac,providedIn:"root"});class Rc{constructor(e){this.httpClient=e,this._serviceUrl="/rest/FacebookOmnichannelMessagingService/"}registerFacebookChannel(e,t){const i=(new D.HttpHeaders).set("Content-Type","application/json; charset=utf-8"),r=this._serviceUrl+"Register";return this.httpClient.post(r,{token:e,source:t},{headers:i})}removeFacebookChannel(e){const t=(new D.HttpHeaders).set("Content-Type","application/json; charset=utf-8"),i=this._serviceUrl+"RemoveChannel";return this.httpClient.post(i,{facebookId:e},{headers:t})}}Rc.\u0275fac=function(e){return new(e||Rc)(n.\u0275\u0275inject(D.HttpClient))},Rc.\u0275prov=n.\u0275\u0275defineInjectable({token:Rc,factory:Rc.\u0275fac,providedIn:"root"});class kc{wrapPhoneNumber(e){return`+${e}`}getRequestData(e,t,i){return{token:e,appId:t,channelPhoneNumber:this.wrapPhoneNumber(i)}}constructor(e){this.httpClient=e,this._serviceUrl="/rest/WhatsAppOmnichannelMessagingService/"}tryConnect(e,t,i){const r=this._serviceUrl+"Validate";return this.httpClient.post(r,this.getRequestData(e,t,i))}register(e,t,i){const r=this._serviceUrl+"RegisterChannel";return this.httpClient.post(r,this.getRequestData(e,t,i))}validateRegisterChannel(e){let t="";if(!e?.IsConnectionSuccess&&e?.errorInfo?.errorCode){const i=e.errorInfo.errorCode;t=["InvalidAppSidException","InvalidAccountPhoneNumberException","AuthenticateException"].indexOf(i)>-1?`ChatSettings.ChannelPage.WhatsApp.ErrorMessages.${i}`:e.errorInfo.message}return t}removeWhatsAppChannel(e){const t=(new D.HttpHeaders).set("Content-Type","application/json; charset=utf-8"),i=this._serviceUrl+"RemoveChannel";return this.httpClient.post(i,{whatsAppId:e},{headers:t})}}kc.\u0275fac=function(e){return new(e||kc)(n.\u0275\u0275inject(D.HttpClient))},kc.\u0275prov=n.\u0275\u0275defineInjectable({token:kc,factory:kc.\u0275fac,providedIn:"root"});class Nc extends V_{constructor(e,t,i){super(e,t,i),this.entitySchemaName="ChatQueueOperator"}mapSysAdminUnit(e){return{id:e.Id,name:e.Name,parentRoleId:e.ParentRole&&e.ParentRole.value,sysAdminUnitTypeValue:e.SysAdminUnitTypeValue}}addSysAdminUnitQueryFilters(e){const t=new l.FilterGroup;t.logicalOperation=l.LogicalOperatorType.Or,t.addSchemaColumnFilterWithParameter(l.ComparisonType.Not_equal,"SysAdminUnitTypeValue",4),t.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Active",1),e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ConnectionType",0),e.filters.add(t)}getSysAdminUnitQuery(){const e=new l.EntitySchemaQuery("SysAdminUnit");return e.addSchemaColumn("Id"),e.addSchemaColumn("Name"),e.addSchemaColumn("ParentRole"),e.addSchemaColumn("SysAdminUnitTypeValue"),e.addSchemaColumn("ConnectionType"),e.addSchemaColumn("Active"),this.addSysAdminUnitQueryFilters(e),e}getItemsByChatQueueId(e){const t=this.createGetAllItemsEsq();return t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"ChatQueue",e),this.queryExecutor.executeSelectQuery(t).pipe((0,h.U)(i=>({success:!0,errorInfo:null,result:i.map(r=>this.entityConverter.getEntity(r))})),(0,G.K)(i=>this.getBaseErrorResponse(i)))}getSysAdminUnitList(){const e=this.getSysAdminUnitQuery();return this.queryExecutor.executeSelectQuery(e).pipe((0,h.U)(t=>({success:!0,errorInfo:null,sysAdminUnits:t.map(i=>this.mapSysAdminUnit(i))})))}}Nc.\u0275fac=function(e){return new(e||Nc)(n.\u0275\u0275inject(me),n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(ks))},Nc.\u0275prov=n.\u0275\u0275defineInjectable({token:Nc,factory:Nc.\u0275fac});class oa extends V_{constructor(e,t,i){super(e,t,i),this.entitySchemaName="Channel"}_createNewChannel(e){const t=new d4;return t.id=(0,l.generateGuid)(),t.typeId=e,t}getLookupValues(e){const t=new l.EntitySchemaQuery(e);return t.addSchemaColumn("Id"),t.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),this.queryExecutor.executeSelectQuery(t).pipe((0,h.U)(i=>i.map(r=>({value:r.Id,displayValue:r.Name}))))}getChannelTypeItems(){const e=new l.EntitySchemaQuery("ChannelProvider");return e.addSchemaColumn("Id"),e.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),e.addSchemaColumn("PageUrl"),this.queryExecutor.executeSelectQuery(e).pipe((0,h.U)(t=>t.map(i=>({value:i.Id,displayValue:i.Name,pageUrl:i.PageUrl}))))}getChannelQueueItems(){const e=new l.EntitySchemaQuery("ChatQueue");return e.addSchemaColumn("Id"),e.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),e.addSchemaColumn("[ChatQueueOperator:ChatQueue].Id","Operator"),this.queryExecutor.executeSelectQuery(e).pipe((0,h.U)(t=>{const i=t.filter(s=>Boolean(s.Operator));return i.filter((s,o)=>i.findIndex(c=>c.Id===s.Id)===o).map(s=>({value:s.Id,displayValue:s.Name}))}))}getActiveLanguages(){const e=new l.EntitySchemaQuery("SysLanguage");return e.addSchemaColumn("Id"),e.addSchemaColumn("Name").withOrdering(l.OrderDirection.Asc,0),e.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"IsUsed",1),this.queryExecutor.executeSelectQuery(e).pipe((0,h.U)(t=>t.map(i=>({value:i.Id,displayValue:i.Name}))))}generateNewChannelResponse(e){return{success:!0,result:[this._createNewChannel(e)]}}checkCanSaveChannel(e,t){const i=new l.EntitySchemaQuery("Channel");i.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"Source",e),this.queryExecutor.executeSelectQuery(i).subscribe(r=>{t(!(r&&r[0]))})}}oa.\u0275fac=function(e){return new(e||oa)(n.\u0275\u0275inject(me),n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(Ns))},oa.\u0275prov=n.\u0275\u0275defineInjectable({token:oa,factory:oa.\u0275fac});let rS=class extends l.BaseRequestHandler{constructor(e,t,i,r){super(),this._telegramService=e,this._messageDialogProvider=t,this._translateService=i,this._maskService=r}_setModelValue(e,t,i,r){const s=e.getViewModelAttributePaths(t,i)[0];e[s]=r}_setModelValues(e,t){var i=this;return(0,_.Z)(function*(){const r=yield e.getPrimaryModelName();i._setModelValue(e,r,"Name",t.ChannelName),i._setModelValue(e,r,"Source",t.TelegramId),i._setModelValue(e,r,"MsgSettingsId",t.SettingsId)})()}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context,r=yield i.validate();if(Object.keys(r).length>0)return;yield t._maskService.showBodyMask();const s=yield i.TelegramToken,o=yield(0,u.firstValueFrom)(t._telegramService.registerTelegramChannel(s)),c=t._telegramService.validateRegisterChannel(o);if(yield t._maskService.hideBodyMask(),!(c?.length>0))return yield t._setModelValues(i,o),t.next?.handle(e);t._messageDialogProvider.open({data:{message:t._translateService.instant(c),actions:[Tc.OK]}})})()}};function p4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",2)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.firstMessageDate)}}function m4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",10)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.separatorText)}}rS=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.SaveRecordRequest",type:"crt.TelegramChannelSaveHandler",scopes:["TelegramChannel_AddingPage"]}),(0,m.w6)("design:paramtypes",[Fs,uf,w.sK,l.MaskService])],rS);const h4=function(){return{}};function g4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",11)(1,"label",12),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"ts-contact-photo",13),n.\u0275\u0275listener("contactClick",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext().$implicit,s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.openContact(r.author.id))}),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("hidden",!i.isContactChanged(t)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.isBotMessage?i.bot.name:t.author.name," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("contact",t.isBotMessage?n.\u0275\u0275pureFunction0(4,h4):t.author)("contactColor",i.getContactBackground(t))}}function f4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",14)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.formatSystemMessage(t))}}const kD=function(a,e){return{"first-in-sequence":a,"last-in-sequence":e}};function _4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",15)(1,"span",16),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",17),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(3,kD,i.isFirstMessageInSequence(t),i.isLastMessageInSequence(t))),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.text),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.getLocalTime(t.time))}}const y4=function(a,e){return{width:a,height:e}};function C4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",24)(1,"img",25),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(s.openImage(r))})("load",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(s.onChatImgLoaded(r))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"span",26),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(3,y4,r.imageContainerSize.width+"px",r.imageContainerSize.height+"px"))("src",r.getImageUrl(t.fileId),n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(r.getLocalTime(i.time))}}function S4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",27)(1,"span",28)(2,"a",29),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"span",17),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(4,kD,r.isFirstMessageInSequence(i),r.isLastMessageInSequence(i))),n.\u0275\u0275advance(2),n.\u0275\u0275property("href",r.getFileUrl(t.fileId),n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.fileName),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(r.getLocalTime(i.time))}}function b4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",21),n.\u0275\u0275template(1,C4,4,6,"div",22),n.\u0275\u0275template(2,S4,6,7,"div",23),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngSwitch",t.fileType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",i.messageType.Image)}}function v4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",30)(1,"span",16),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",17),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext(2).$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.text),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.getLocalTime(t.time))}}function I4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275template(1,b4,3,2,"div",19),n.\u0275\u0275template(2,v4,5,2,"div",20),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.attachments),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.showMessageFromAttachment(t))}}const D4=function(a){return{"bot-message":a}},M4=function(a){return{display:a}};function w4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275text(1),n.\u0275\u0275template(2,m4,3,1,"div",4),n.\u0275\u0275template(3,g4,4,5,"div",5),n.\u0275\u0275elementStart(4,"div",6),n.\u0275\u0275template(5,f4,3,1,"div",7),n.\u0275\u0275template(6,_4,5,6,"div",8),n.\u0275\u0275template(7,I4,3,2,"div",9),n.\u0275\u0275elementEnd()()),2&a){const t=e.$implicit,i=e.index,r=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(r.getDirectionName(t.direction)+"-message"),n.\u0275\u0275propertyInterpolate1("id","message_",t.id,""),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(11,D4,t.isBotMessage))("ngStyle",n.\u0275\u0275pureFunction1(13,M4,r.getIsDuplicateMessage(t.id)?"none":"")),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.cachePreviousMessage(i)," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isShowSeparator(t,i)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isSystemMessage(t)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",t.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",r.messageType.System),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",r.messageType.Text)}}class la{constructor(e,t,i,r,s){this._userInfo=e,this._translateService=t,this.injector=i,this._contactColorService=r,this.featureService=s,this._omnichannelMessageFileSchema={name:"OmnichannelMessageFile",uid:"E6B4C4D4-0A51-4A6D-A8C5-18B63FADDAD4"},this._isFileApiEnabled=!1,this._fileServiceUrl=`rest/FileService/GetFile/${this._omnichannelMessageFileSchema.uid}/`,this._imageUrl=`img/entity/hash/${this._omnichannelMessageFileSchema.name}/Data/`,this._duplicateIds=[],this.messagesCounter=0,this.contactClick=new n.EventEmitter,this.messageType=Ac,this.bot={name:this._translateService.instant("ChatSettings.ChatWindow.Bots.Name")||"Copilot"},this.imageContainerSize={width:200,height:120},this.lastSystemMessageIndex=0,this.featureService.getFeatureState("UseFileApiInChats").pipe((0,u.shareReplay)({bufferSize:1,refCount:!1})).subscribe(o=>this._isFileApiEnabled=o)}set messages(e){this._messages=e,e&&this._findDuplicateMessagesWithoutAttachments(),this._setLastSystemMessageIndex()}get messages(){return this._messages}static _trimSlashes(e){return e.replace(/(^([/\\])+)|(([/\\])+$)/,"")}static _isLargeImage(e,t){return e.naturalWidth>=t.offsetWidth||e.naturalHeight>=t.offsetHeight}_isNewDay(e){return this._previousMessage&&this._previousMessage.time&&e.time&&this._previousMessage.time.getDay()!==e.time.getDay()}_isNewMessages(e){const t=this.messages.length-this.messagesCounter;return e===t&&t>0}_formatDate(e){return new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName).format(e)}_joinPath(...e){return e.map(t=>la._trimSlashes(t)).join("/")}_setFirstMessageData(){if(this.messages?.length>0){const e=this.messages.find(t=>t.direction===Ef.Incoming);if(!e)return;this.firstMessageDate=this._formatDate(e.time),this.contactColor=this._contactColorService.getNextColor(e.author.id)}}_setLastSystemMessageIndex(){this._messages&&(this._messages.length<St.rowsCount?this.lastSystemMessageIndex=0:this._messages.length===St.rowsCount?this.lastSystemMessageIndex=St.rowsCount-1:this.lastSystemMessageIndex=JS.Z.findLastIndex(this._messages,e=>e.type===Ac.System)+1)}_isAuthorChanged(e,t){return e.author.id!==t.author.id||this.isSystemMessage(t)}_findDuplicateMessagesWithoutAttachments(){const e=this.messages.reduce((i,r)=>{const{text:s,time:o}=r,c=`${s}-${o}`;return i[c]||(i[c]=[]),i[c].push(r),i},{}),t=Object.values(e).filter(i=>i.length>1);this._duplicateIds=t.flat().filter(i=>(0,O.Z)(i.attachments)).map(i=>i.id)}getDirectionName(e){return Ef[e].toLowerCase()}getContactBackground(e){return e.isBotMessage?"none":1===e.direction?this.contactColor:"#40bf62"}isContactChanged(e){return!this._previousMessage||(this._previousMessage.author.id!==e.author.id||this._previousMessage.isBotMessage!==e.isBotMessage||this._previousMessage.type===Ac.System)}ngOnChanges(){this._setFirstMessageData()}cachePreviousMessage(e){this._previousMessage=e>0?this.messages[e-1]:void 0}openContact(e){return this.contactClick.emit({contactId:e}),!1}trackMessageById(e,t){return t.id}isShowSeparator(e,t){return this._isNewDay(e)?this.separatorText=this._formatDate(e.time):this.separatorText=this._isNewMessages(t)?this._translateService.instant("ChatSettings.ChatWindow.NewMessages"):"",""!==this.separatorText}openImage(e){const t=e.target,i=document.body,r=document.createElement("div");r.classList.add("full-chat-image-container"),r.style.backgroundImage="url('"+t.src+"')",r.style.backgroundSize=la._isLargeImage(t,i)?"contain":"auto",r.addEventListener("click",function(){i.removeChild(r)}),i.appendChild(r)}getFileUrl(e){return this._joinPath(je(),this._fileServiceUrl,e)}getImageUrl(e){return this._isFileApiEnabled?this.getFileUrl(e):this._joinPath(je(),this._imageUrl,e)}isFirstMessageInSequence(e){const t=this.messages.findIndex(r=>r.id===e.id);if(0===t)return!0;const i=this.messages[t-1];return this._isAuthorChanged(e,i)}isLastMessageInSequence(e){const t=this.messages.findIndex(r=>r.id===e.id);if(t===this.messages.length-1)return!0;const i=this.messages[t+1];return this._isAuthorChanged(e,i)}isSystemMessage(e){return e.type===Ac.System}onChatImgLoaded(e){const t=e.target;this.isImageOversize(t.width,t.height)&&t.parentElement.classList.add("img-contain")}isImageOversize(e,t){const i=e/t,r=this.imageContainerSize.width/this.imageContainerSize.height;return Math.max(i,r)/Math.min(i,r)<=2&&e>this.imageContainerSize.width&&t>this.imageContainerSize.height}formatSystemMessage(e){const t=new Date(e.time);Gb(t,this._userInfo.timeZoneOffsetHours);const i=this._formatDate(t),r=zb(t,this._userInfo.cultureInfo);return e.text.replace("{datePart}",i).replace("{timePart}",r)}getLocalTime(e){const t=new Date(e);return Gb(t,this._userInfo.timeZoneOffsetHours),zb(t,this._userInfo.cultureInfo)}showMessageFromAttachment(e){return e.text}getIsDuplicateMessage(e){return!!this.messages&&-1!==this._duplicateIds.indexOf(e)}}function x4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",1)(1,"span",2),n.\u0275\u0275text(2),n.\u0275\u0275elementStart(3,"a",3),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.contactClicked(null==r.chat.operator.contact?null:r.chat.operator.contact.id))}),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()()}if(2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.getEndDateCaption(t.chat.completionDate)," "),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==t.chat.operator.contact?null:t.chat.operator.contact.name)}}function E4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"div",1)(2,"span",2),n.\u0275\u0275text(3),n.\u0275\u0275elementStart(4,"a",3),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.contactClicked(r.chat.contact.id))}),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(6,"div",4)(7,"crt-chat-messages",5),n.\u0275\u0275listener("chatChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.chat=r)}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(8,x4,5,2,"div",6),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",t.getStartDateCaption(t.chat.chatStartDate)," "),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.chat.contact.name),n.\u0275\u0275advance(2),n.\u0275\u0275property("messages",t.messages)("chat",t.chat),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isChatCompleted())}}la.\u0275fac=function(e){return new(e||la)(n.\u0275\u0275directiveInject(Q),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(Do),n.\u0275\u0275directiveInject(Me))},la.\u0275cmp=n.\u0275\u0275defineComponent({type:la,selectors:[["crt-chat-messages"]],inputs:{messages:"messages",messagesCounter:"messagesCounter",chat:"chat"},outputs:{contactClick:"contactClick"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["class","first-message-date-separator messages-separator",4,"ngIf"],["class","message",3,"class","id","ngClass","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"first-message-date-separator","messages-separator"],[1,"message",3,"id","ngClass","ngStyle"],["class","messages-separator",4,"ngIf"],["class","message-author",3,"hidden",4,"ngIf"],[1,"text-block",3,"ngSwitch"],["class","system-message-type",4,"ngSwitchCase"],["class","message-type text-message-type",3,"ngClass",4,"ngSwitchCase"],["class","attachment-message-type",4,"ngSwitchDefault"],[1,"messages-separator"],[1,"message-author",3,"hidden"],[1,"author-name"],[1,"author-photo",3,"contact","contactColor","contactClick"],[1,"system-message-type"],[1,"message-type","text-message-type",3,"ngClass"],[1,"message-text"],[1,"message-time"],[1,"attachment-message-type"],[3,"ngSwitch",4,"ngFor","ngForOf"],["class","message-type text-message-type",4,"ngIf"],[3,"ngSwitch"],["class","message-type image-message-type",4,"ngSwitchCase"],["class","message-type file-message-type",3,"ngClass",4,"ngSwitchDefault"],[1,"message-type","image-message-type"],["alt","",1,"image-container",3,"ngStyle","src","click","load"],[1,"image-time"],[1,"message-type","file-message-type",3,"ngClass"],[1,"download-file","message-text"],[1,"file-message-type-link",3,"href"],[1,"message-type","text-message-type"]],template:function(e,t){1&e&&(n.\u0275\u0275template(0,p4,3,1,"div",0),n.\u0275\u0275template(1,w4,8,15,"div",1)),2&e&&(n.\u0275\u0275property("ngIf",t.firstMessageDate),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.messages)("ngForTrackBy",t.trackMessageById))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,y.NgStyle,y.NgSwitch,y.NgSwitchCase,y.NgSwitchDefault,Bm],styles:[".message[_ngcontent-%COMP%]{flex-direction:column;display:flex}.message[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_fadein .5s ease 1 alternate}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}.message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{font-family:Open Sans,serif;font-size:11px;text-align:center;letter-spacing:0;color:#999;opacity:1;vertical-align:top}.message[_ngcontent-%COMP%]   .author-photo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;cursor:pointer}.message[_ngcontent-%COMP%]   .message-author[_ngcontent-%COMP%]{margin-bottom:-13px;margin-top:17px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{display:block;position:relative;bottom:-3px;float:right;text-align:center;font-family:Open Sans,serif;letter-spacing:0;color:#999;opacity:1;padding-top:2px;font-size:11px;margin-left:13px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:3px;display:inline-block;padding:8px 10px;margin:1px 0 1px 39px;text-align:left}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{text-align:left;font-family:Open Sans,serif;font-size:15px;letter-spacing:0;color:#444;opacity:1;white-space:pre-wrap;word-break:break-word}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .image-time[_ngcontent-%COMP%]{position:absolute;right:18px;bottom:18px;color:#fff;background-color:#999;font-size:11px;border-radius:12px;padding-left:5px;padding-right:5px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .message-image-item[_ngcontent-%COMP%]{position:relative}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:auto;background-position:center;object-fit:none}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .system-message-type[_ngcontent-%COMP%]{font-size:11px;text-align:center;color:#999;margin-top:17px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{padding-left:22px;text-decoration:none}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ29tcG9uZW50XzQ2OV8xIiBkYXRhLW5hbWU9IkNvbXBvbmVudCA0Njkg4oCTIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8ZyBpZD0iR3JvdXBfNzQ5MiIgZGF0YS1uYW1lPSJHcm91cCA3NDkyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MikiPg0KICAgIDxwYXRoIGlkPSJQYXRoXzY5NDQiIGRhdGEtbmFtZT0iUGF0aCA2OTQ0IiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC44Ii8+DQogIDwvZz4NCiAgPGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNSAwLjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM1NDY1N2QiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzc3OSIgZGF0YS1uYW1lPSJMaW5lIDc3OSIgeDI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUgMTQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU0NjU3ZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg0K);background-repeat:no-repeat;background-position:2px 5px}.message.incoming-message[_ngcontent-%COMP%]{text-align:left}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:0 16px 16px 0;padding-right:16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.text-message-type[_ngcontent-%COMP%]{padding-left:14px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence[_ngcontent-%COMP%]:not(.last-in-sequence){border-radius:16px 16px 16px 0}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.last-in-sequence[_ngcontent-%COMP%]:not(.first-in-sequence){border-radius:0 16px 16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence.last-in-sequence[_ngcontent-%COMP%]{border-radius:16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{color:#4e7bd8}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ29tcG9uZW50XzQ2OV8xIiBkYXRhLW5hbWU9IkNvbXBvbmVudCA0Njkg4oCTIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8ZyBpZD0iR3JvdXBfNzQ5MiIgZGF0YS1uYW1lPSJHcm91cCA3NDkyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MikiPg0KICAgIDxwYXRoIGlkPSJQYXRoXzY5NDQiIGRhdGEtbmFtZT0iUGF0aCA2OTQ0IiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC44Ii8+DQogIDwvZz4NCiAgPGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNSAwLjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM1NDY1N2QiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzc3OSIgZGF0YS1uYW1lPSJMaW5lIDc3OSIgeDI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUgMTQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU0NjU3ZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg0K)}.message.incoming-message[_ngcontent-%COMP%]   .author-photo[_ngcontent-%COMP%]{float:left}.message.incoming-message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{margin-left:7px}.message.outcoming-message[_ngcontent-%COMP%]{text-align:right}.message.outcoming-message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{margin-right:7px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:16px 0 0 16px;padding-left:16px;padding-right:14px;margin-right:0}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence[_ngcontent-%COMP%]:not(.last-in-sequence){border-radius:16px 16px 0}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.last-in-sequence[_ngcontent-%COMP%]:not(.first-in-sequence){border-radius:16px 0 16px 16px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence.last-in-sequence[_ngcontent-%COMP%]{border-radius:16px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{color:#e5e8ee}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtbmFtZT0iQ29tcG9uZW50IDQ2OSDigJMgMSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBzdHlsZT0iIj48cmVjdCBpZD0iYmFja2dyb3VuZHJlY3QiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9IjAiIHk9IjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIvPgogIAogIAogIAogIAo8ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PGcgaWQ9Ikdyb3VwXzc0OTIiIGRhdGEtbmFtZT0iR3JvdXAgNzQ5MiIgY2xhc3M9IiIgc3Ryb2tlPSIjZGFkYWRhIiBzdHJva2Utb3BhY2l0eT0iMSI+CiAgICA8cGF0aCBpZD0iUGF0aF82OTQ0IiBkYXRhLW5hbWU9IlBhdGggNjk0NCIgZD0iTTMuNSw3LjUwMDAwNzgxMjQ5OTk3MyBsNSw0LjUgbDUsLTQuNSAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RhZGFkYSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KICA8L2c+PGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIgeTI9IjAuNSIgeDI9IjguNSIgeDE9IjguNSIgY2xhc3M9IiIvPjxsaW5lIGRhdGEtbmFtZT0iTGluZSA3NzgiIHkxPSIxMS41IiBmaWxsPSJub25lIiBzdHJva2U9IiNkYWRhZGEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIiB5Mj0iMC41IiB4Mj0iOC41IiB4MT0iOC41IiBjbGFzcz0iIiBpZD0ic3ZnXzEiLz48bGluZSBpZD0iTGluZV83NzkiIGRhdGEtbmFtZT0iTGluZSA3NzkiIHgyPSIxNC41IiBmaWxsPSJub25lIiBzdHJva2U9IiNkYWRhZGEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIiB5Mj0iMTQuNDgxNzAxNzM5MTMyNDA0IiB5MT0iMTQuNDgxNzAxNzM5MTMyNDA0IiB4MT0iMi41IiBjbGFzcz0iIi8+PHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIGNsYXNzPSIiIHk9IjIuMTk3ODAyNTQzNjQwMTM2NyIgeD0iNTEuMDk4OTAzNjU2MDA1ODYiIHRyYW5zZm9ybT0icm90YXRlKC0xLjU5MTE0NTE1NzgxNDAyNTkgNTkuMDk4OTAzNjU2MDA2MDE2LDEwLjE5NzgwMjU0MzY0MDAzNCkgIi8+PC9nPjwvc3ZnPg==)}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo[_ngcontent-%COMP%]   .contact-photo.no-photo[_ngcontent-%COMP%]{font-size:12px!important}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]{display:inline-block;width:16px}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]     .contact-photo{line-height:1.6em;font-size:1em;width:16px;height:16px;min-width:16px;min-height:16px}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]{background:linear-gradient(#fafcfe,#fafcfe) padding-box,linear-gradient(to bottom right,rgba(0,119,255,.2509803922),rgba(138,31,230,.2509803922),rgba(241,37,91,.2509803922),rgba(255,24,0,.2509803922)) border-box;border:1px solid transparent}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{color:#444}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#999}.message.bot-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]     .contact-photo{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9Ikljb24gfCBBSSBDb3BpbG90IC0gMTZ4MTYgfCBoZWF2eSI+CjxnIGlkPSJTdWJ0cmFjdCI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMC4yMzU3NjEgNi4wNjQzNEMwLjA4MTc0MTkgNi42ODQxNiAwIDcuMzMyNTMgMCA4QzAgMTIuNDE4MyAzLjU4MTcyIDE2IDggMTZDMTAuOTYxMSAxNiAxMy41NDY1IDE0LjM5MTIgMTQuOTI5NyAxMkgxMi43MzYxQzExLjU5OSAxMy4zNDUgOS44OTkyMSAxNC4xOTkxIDggMTQuMTk5MUM0LjU3NjMzIDE0LjE5OTEgMS44MDA4OSAxMS40MjM3IDEuODAwODkgOEMxLjgwMDg5IDcuNjUzNzkgMS44MjkyNyA3LjMxNDIxIDEuODgzODMgNi45ODM0NkwwLjIzNTc2MSA2LjA2NDM0Wk0xMi43MzYxIDQuMDAwMDFDMTEuNTk5IDIuNjU0OTggOS44OTkyMyAxLjgwMDg5IDggMS44MDA4OUM3LjMzNTY1IDEuODAwODkgNi42OTU3MSAxLjkwNTQgNi4wOTU3MiAyLjA5ODg3TDMuNTI4NDcgMS4zNjUzN0M0LjgwNTAxIDAuNTAzMzI3IDYuMzQzNzMgMCA4IDBDMTAuOTYxMSAwIDEzLjU0NjUgMS42MDg4IDE0LjkyOTggNC4wMDAwMUgxMi43MzYxWiIgZmlsbD0idXJsKCNwYWludDBfcmFkaWFsXzQ3NDdfNzgxMDIpIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMC4yMzU3NjEgNi4wNjQzNEMwLjA4MTc0MTkgNi42ODQxNiAwIDcuMzMyNTMgMCA4QzAgMTIuNDE4MyAzLjU4MTcyIDE2IDggMTZDMTAuOTYxMSAxNiAxMy41NDY1IDE0LjM5MTIgMTQuOTI5NyAxMkgxMi43MzYxQzExLjU5OSAxMy4zNDUgOS44OTkyMSAxNC4xOTkxIDggMTQuMTk5MUM0LjU3NjMzIDE0LjE5OTEgMS44MDA4OSAxMS40MjM3IDEuODAwODkgOEMxLjgwMDg5IDcuNjUzNzkgMS44MjkyNyA3LjMxNDIxIDEuODgzODMgNi45ODM0NkwwLjIzNTc2MSA2LjA2NDM0Wk0xMi43MzYxIDQuMDAwMDFDMTEuNTk5IDIuNjU0OTggOS44OTkyMyAxLjgwMDg5IDggMS44MDA4OUM3LjMzNTY1IDEuODAwODkgNi42OTU3MSAxLjkwNTQgNi4wOTU3MiAyLjA5ODg3TDMuNTI4NDcgMS4zNjUzN0M0LjgwNTAxIDAuNTAzMzI3IDYuMzQzNzMgMCA4IDBDMTAuOTYxMSAwIDEzLjU0NjUgMS42MDg4IDE0LjkyOTggNC4wMDAwMUgxMi43MzYxWiIgZmlsbD0idXJsKCNwYWludDFfcmFkaWFsXzQ3NDdfNzgxMDIpIi8+CjwvZz4KPGcgaWQ9InNoYXBlIj4KPHBhdGggZD0iTTE2IDhMNyAxMS41TDguNSA4TDAgMkwxNiA4WiIgZmlsbD0idXJsKCNwYWludDJfcmFkaWFsXzQ3NDdfNzgxMDIpIi8+CjxwYXRoIGQ9Ik0xNiA4TDcgMTEuNUw4LjUgOEwwIDJMMTYgOFoiIGZpbGw9InVybCgjcGFpbnQzX3JhZGlhbF80NzQ3Xzc4MTAyKSIvPgo8L2c+CjwvZz4KPGRlZnM+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQwX3JhZGlhbF80NzQ3Xzc4MTAyIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMTg3OTk3IC0wLjgyMjgyOSkgcm90YXRlKDcyLjA0NjgpIHNjYWxlKDM2LjYyNyAxNS43Mzc5KSI+CjxzdG9wIHN0b3AtY29sb3I9IiMwMDc3RkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjYxIiBzdG9wLWNvbG9yPSIjOEExRkU2Ii8+CjxzdG9wIG9mZnNldD0iMC45MzUiIHN0b3AtY29sb3I9IiNGMTI1NUIiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkYxODAwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQxX3JhZGlhbF80NzQ3Xzc4MTAyIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC0zLjM1OTE5IC01LjEpIHJvdGF0ZSg1My43Njk0KSBzY2FsZSgzNi45NDMyIDE2LjQ2NSkiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMDgxQTJGIi8+CjxzdG9wIG9mZnNldD0iMC42MSIgc3RvcC1jb2xvcj0iIzhBMUZFNiIvPgo8c3RvcCBvZmZzZXQ9IjAuOTM1IiBzdG9wLWNvbG9yPSIjRjEyNTVCIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGMTgwMCIvPgo8L3JhZGlhbEdyYWRpZW50Pgo8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50Ml9yYWRpYWxfNDc0N183ODEwMiIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgwLjIwMTQ3NCAxLjUxMTQ1KSByb3RhdGUoNTkuNjc5NCkgc2NhbGUoMjMuOTY2NiAxNS4zMDQzKSI+CjxzdG9wIHN0b3AtY29sb3I9IiMwMDc3RkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjYxIiBzdG9wLWNvbG9yPSIjOEExRkU2Ii8+CjxzdG9wIG9mZnNldD0iMC45MzUiIHN0b3AtY29sb3I9IiNGMTI1NUIiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkYxODAwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQzX3JhZGlhbF80NzQ3Xzc4MTAyIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC0zLjYgLTEuMDI4MTMpIHJvdGF0ZSgzNy4wOTQ1KSBzY2FsZSgyOS4zMzY1IDEzLjE5MzQpIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzA4MUEyRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjEiIHN0b3AtY29sb3I9IiM4QTFGRTYiLz4KPHN0b3Agb2Zmc2V0PSIwLjkzNSIgc3RvcC1jb2xvcj0iI0YxMjU1QiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjE4MDAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K)!important;background-size:16px 16px;cursor:default}.messages-separator[_ngcontent-%COMP%]{width:100%;text-align:center;border-bottom:1px solid #e3e6ec;line-height:.1em;margin:17px 0}.messages-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;letter-spacing:0;color:#999;opacity:1;font-family:Open Sans,serif;font-size:11px}.first-message-date-separator[_ngcontent-%COMP%]{border:none;margin-top:8px}.incoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{background-color:#eaedf3;border:1px solid #e3e6ec;align-self:flex-start}.outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{background-color:#006ce0;align-self:flex-end}.outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%], .outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#fff}.text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{position:relative;background-color:#fff;border:none}.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{padding-left:0}.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{padding-right:0}"]});class Tf{constructor(e,t,i){this.chatService=e,this._userInfo=t,this._translateService=i,this.contactClick=new n.EventEmitter,this.messagesLoaded=new n.EventEmitter}_loadHistory(){this.chatService.getChatHistory(this.chatId).pipe((0,u.tap)(e=>{e&&(this.messages=e,this._setChatInfo())})).subscribe()}_setChatInfo(){this.chatService.getItem(this.chatId).subscribe(e=>{e.success&&(this.chat=e.result[0],this.messagesLoaded.emit())})}getStartDateCaption(e){const t=this._translateService.instant("ChatSettings.History.Captions.StartDate");return Z.Ld.Format(t,this.formatChatDate(e))}getEndDateCaption(e){const t=this._translateService.instant("ChatSettings.History.Captions.EndDate");return Z.Ld.Format(t,this.formatChatDate(e))}formatChatDate(e){const i=e?new Date(e):new Date;return new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(i)}ngOnInit(){(0,l.isEmptyGuid)(this.chatId)||this._loadHistory()}contactClicked(e){this.contactClick.emit({contactId:e})}isChatCompleted(){return this.chat.status.value===aS.Completed}}Tf.\u0275fac=function(e){return new(e||Tf)(n.\u0275\u0275directiveInject(St),n.\u0275\u0275directiveInject(Q),n.\u0275\u0275directiveInject(w.sK))},Tf.\u0275cmp=n.\u0275\u0275defineComponent({type:Tf,selectors:[["crt-omnichannel-messaging-chat-history"]],inputs:{chatId:["chatid","chatId"]},outputs:{contactClick:"contactClick",messagesLoaded:"messagesLoaded"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"chat-status-info-container"],[1,"chat-date"],[1,"contact-name",3,"click"],[1,"chat-history-component-container"],[3,"messages","chat","chatChange"],["class","chat-status-info-container",4,"ngIf"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,E4,9,5,"div",0),2&e&&n.\u0275\u0275property("ngIf",t.chat)},dependencies:[y.NgIf,la],styles:[".chat-date{color:#999;font-size:13px;font-family:Open Sans,serif}.chat-history-component-container{margin-bottom:19px}.contact-name{font-size:13px;color:#4e7bd8;cursor:pointer}.contact-name:hover{text-decoration:underline}.full-chat-image-container{top:0;width:100%;height:100%;z-index:999999999999;position:fixed;align-items:center;background-position:center;background-repeat:no-repeat;background-color:#000000b3}\n"],encapsulation:2});class Ls{get contextService(){return void 0===this._contextService&&(this._contextService=this._injector.get(_b,null)),this._contextService}constructor(e,t,i){this._modelGenerator=e,this._window=t,this._injector=i,this._schemaName="AcademyUrlData"}_createAcademyHelpUrlDataItem(e){return{configurationVersion:e.ConfigurationVersion,contextHelpCode:e.Code,contextHelpId:e.ContextHelpId,enableContextHelp:e.EnableContextHelp,lmsUrl:e.LMSUrl,productEdition:e.ProductEdition,useLmsDocumentation:e.UseLmsDocumentation}}_getSchemaColumns(){return["ContextHelpId","EnableContextHelp","Code","ProductEdition","ConfigurationVersion","UseLmsDocumentation","LMSUrl"]}_createDataSourceParameters(e){return[{type:l.ModelParameterType.Filter,value:this._getContextHelpCodeFilter(e)}]}_getContextHelpCodeFilter(e){return new l.CompareFilter(l.ComparisonType.Equal,new l.ColumnExpression({columnPath:"Code"}),new l.ParameterExpression({value:e}))}_getAcademyHelpUrlData(e){return this._modelGenerator.generateOne({type:"crt.EntityDataSource",config:{entitySchemaName:this._schemaName}},"").pipe((0,M.w)(t=>t.load({attributes:this._getSchemaColumns(),parameters:e})),(0,h.U)(t=>1===t.length?this._createAcademyHelpUrlDataItem(t[0]):null))}_buildUrl(e){let t="#";return e&&(t=e.useLmsDocumentation?this._getLmsDocumentationUrl(e):Z.Ld.empty),t}_getLmsDocumentationUrl(e){const t=[],i=e.productEdition;i&&t.push("product="+encodeURIComponent(i));const r=e.configurationVersion;r&&t.push("ver="+encodeURIComponent(r));const s=e.enableContextHelp,o=e.contextHelpId;return s&&o&&t.push("id="+encodeURIComponent(o)),`${e.lmsUrl}?${t.join("&")}`}getAcademyHelpUrl(e){if(e===Z.Ld.empty)return(0,u.of)(Z.Ld.empty);const t=this._createDataSourceParameters(e);return this._getAcademyHelpUrlData(t).pipe((0,h.U)(i=>i?this._buildUrl(i):Z.Ld.empty))}openContextHelp(){const e=this.contextService;if(!e)throw new Error(`${_b.toString()} was not provided`);const t=e.getContextCode();this.getAcademyHelpUrl(t).subscribe(i=>{this._window.open(i)})}}Ls.\u0275fac=function(e){return new(e||Ls)(n.\u0275\u0275inject(Ht),n.\u0275\u0275inject(se),n.\u0275\u0275inject(n.Injector))},Ls.\u0275prov=n.\u0275\u0275defineInjectable({token:Ls,factory:Ls.\u0275fac,providedIn:"root"});let ND=class extends l.BaseRequest{};ND=(0,m.gn)([(0,l.CrtRequest)({type:"crt.AcademyHelpLinkRequest"})],ND);let sS=class extends l.BaseRequestHandler{constructor(e,t){super(),this._window=e,this._academyHelpUrlService=t}_getAcademyHelpUrl(e){return this._academyHelpUrlService.getAcademyHelpUrl(e)}_openUrl(e){e&&this._window.open(e,"_blank")}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.contextHelpCode;return i&&t._getAcademyHelpUrl(i).subscribe(r=>t._openUrl(r)),t.next?.handle(e)})()}};sS=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.AcademyHelpLinkRequestHandler",requestType:"crt.AcademyHelpLinkRequest"}),(0,m.fM)(0,(0,l.CrtInject)(se)),(0,m.w6)("design:paramtypes",[Window,Ls])],sS);let Os=class{};Os.\u0275fac=function(e){return new(e||Os)},Os.\u0275mod=n.\u0275\u0275defineNgModule({type:Os}),Os.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]}),Os=(0,m.gn)([(0,l.CrtModule)({requestHandlers:[sS]})],Os);class Um{constructor(e){this._academyService=e,this.academyUrl$=new u.BehaviorSubject("")}ngOnInit(){this._academyService.getAcademyHelpUrl("ChatAccess").pipe((0,u.take)(1)).subscribe(e=>{this.academyUrl$.next(e)})}}Um.\u0275fac=function(e){return new(e||Um)(n.\u0275\u0275directiveInject(Ls))},Um.\u0275cmp=n.\u0275\u0275defineComponent({type:Um,selectors:[["ts-facebook-channel-error-dialog"]],decls:12,vars:12,consts:[["mat-dialog-content",""],[1,"message"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementStart(4,"a",2),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275text(6),n.\u0275\u0275pipe(7,"translate"),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(8,"div",3)(9,"button",4),n.\u0275\u0275text(10),n.\u0275\u0275pipe(11,"translate"),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(3,4,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Message")," "),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("href",n.\u0275\u0275pipeBind1(5,6,t.academyUrl$),n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(7,8,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Link.Text")," "),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(11,10,"InfoDialog.OK")," "))},dependencies:[U.eB,E.aO,E.Rb,E.ev,y.AsyncPipe,w.X$],styles:["[mat-dialog-content][_ngcontent-%COMP%]{max-height:450px;overflow-y:auto!important}[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{float:right;margin-left:auto;border-radius:4px}"]});let oS=class extends l.BaseRequestHandler{constructor(e,t,i,r,s,o){super(),this._facebookApiProvider=e,this._channelService=t,this._facebookRegistrationService=i,this._maskService=r,this._dialogProvider=s,this._messageDialogProvider=o}_isCreateFacebookChannelRequest(e){return"Channel"===e.entityName&&this._getDefaultValue(e,"Provider")===sa.FacebookMessenger}_getDefaultValue(e,t){return e.defaultValues.find(i=>i.attributeName===t)?.value}_getChannel(e){return{id:(0,l.generateGuid)(),name:e.name,typeId:sa.FacebookMessenger,source:e.id,isActive:!1}}_addFacebookMessengerChannels(e){var t=this;return(0,_.Z)(function*(){(yield t._facebookApiProvider.isFacebookSettingValid())?t.initFacebookPages().pipe((0,u.concatMap)(i=>(0,u.from)(i)),(0,u.concatMap)(i=>t._facebookApiProvider.attachPage(i.token).pipe((0,u.concatMap)(()=>{const r=t._getChannel(i);return t._maskService.showBodyMask(),t._facebookRegistrationService.registerFacebookChannel(i.token,i.id).pipe((0,u.concatMap)(s=>s?.success?(r.msgSettingsId=s.SettingsId,r.id=(0,l.generateGuid)(),r.isActive=!0,(0,u.from)(t._channelService.insertItem(r)).pipe((0,u.concatMap)(()=>t._openChannelEditingPage(e,i.id,i.name,r.id)))):(t._messageDialogProvider.open({data:{message:s?.errorInfo?.message||"An unknown error occurred during the operation.",actions:[Tc.OK]}}),u.EMPTY)))})))).subscribe(()=>{console.log("FB channel connected")},null,()=>{(0,u.from)(t._reloadChannelsList(e)),t._maskService.hideBodyMask()}):yield(0,u.firstValueFrom)(t._dialogProvider.open(Um,{panelClass:["crt-message-dialog"]}))})()}_reloadChannelsList(e){return(0,_.Z)(function*(){const{$context:t,scopes:i}=e,r=e.$context.models.find(o=>"Channel"===o.dataSource.initialConfig.entitySchemaName),s={type:"crt.LoadDataRequest",scopes:i,config:{loadType:l.DataSourceLoadType.Reload},$context:t,dataSourceName:r.dataSource.dataSourceName};yield l.HandlerChainService.instance.process(s)})()}_openChannelEditingPage(e,t,i,r){return(0,_.Z)(function*(){const s=e.$context;yield s.executeRequest({type:"crt.OpenPageRequest",schemaName:"FBMessengerChannel_EditPage",modelInitConfigs:[{recordId:r,action:l.ModelInPageAction.Edit}],$context:s})})()}initFacebookPages(){return this._facebookApiProvider.initApi().pipe((0,u.concatMap)(()=>this._facebookApiProvider.login()),(0,u.concatMap)(()=>this._facebookApiProvider.getPages()))}handle(e){var t=this;return(0,_.Z)(function*(){if(!t._isCreateFacebookChannelRequest(e))return t.next?.handle(e);yield t._addFacebookMessengerChannels(e)})()}};oS=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.CreateRecordRequest",type:"crt.FacebookChannelCreateRecordHandler",scopes:["ChatSettingsPage"]}),(0,m.w6)("design:paramtypes",[Vs,oa,Rc,l.MaskService,class xR{open(e,t){return(0,u.of)({})}},uf])],oS);let lS=class extends l.BaseRequestHandler{constructor(e,t,i,r,s){super(),this._whatsAppService=e,this._channelService=t,this._messageDialogProvider=i,this._translateService=r,this._maskService=s}_handleConnectError(e){if(e?.errorInfo?.errorCode){const t=this._whatsAppService.validateRegisterChannel(e);this._messageDialogProvider.open({data:{message:this._translateService.instant(t),actions:[Tc.OK]}})}}_getDigits(e){return e.replace(/\D+/g,"")}_setModelValue(e,t,i,r){const s=e.getViewModelAttributePaths(t,i)[0];e[s]=r}_setModelValues(e,t,i){var r=this;return(0,_.Z)(function*(){const s=yield e.getPrimaryModelName();r._setModelValue(e,s,"MsgSettingsId",t.SettingsId),r._setModelValue(e,s,"Source",i),r._setModelValue(e,s,"Name",i)})()}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context,r=yield i.validate();if(Object.keys(r).length>0)return;yield t._maskService.showBodyMask();const s=yield i.TwilioToken,o=yield i.ApplicationId,c=t._getDigits(yield i.PhoneNumber);if(yield(0,u.firstValueFrom)(t.validateIntegration(c,s,o))){const p=yield(0,u.firstValueFrom)(t._whatsAppService.register(s,o,c)),g=t._whatsAppService.validateRegisterChannel(p);if(yield t._maskService.hideBodyMask(),!(g?.length>0))return yield t._setModelValues(e.$context,p,c),t.next?.handle(e);t._messageDialogProvider.open({data:{message:t._translateService.instant(g),actions:[Tc.OK]}})}})()}validateIntegration(e,t,i){return new u.Observable(r=>{this._channelService.checkCanSaveChannel(e,s=>{s?this._whatsAppService.tryConnect(t,i,e).subscribe(o=>{o?.IsConnectionSuccess?r.next(!0):(this._maskService.hideBodyMask(),this._handleConnectError(o),r.next(!1)),r.complete()}):(this._maskService.hideBodyMask(),this._messageDialogProvider.open({data:{message:this._translateService.instant("ChatSettings.ChannelPage.WhatsApp.ChannelDuplicatedErrorMessage"),actions:[Tc.OK]}}),r.next(!1),r.complete())})})}};var VD,FD;lS=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.SaveRecordRequest",type:"crt.WhatsAppSaveChannelHandler",scopes:["WhatsAppChannel_AddingPage"]}),(0,m.w6)("design:paramtypes",[kc,oa,uf,w.sK,l.MaskService])],lS),function(a){a[a.Deny=0]="Deny",a[a.CanRead=1]="CanRead",a[a.CanEdit=2]="CanEdit",a[a.All=3]="All"}(VD||(VD={})),function(a){a[a.Deny=0]="Deny",a[a.Allow=1]="Allow",a[a.AllowAndGrant=2]="AllowAndGrant"}(FD||(FD={}));class ca{constructor(e){this.httpClient=e,this.serviceEndpoint="ServiceModel/RightManagementService.svc/"}saveAdministratedObject(e){const t=this.serviceEndpoint+"SaveAdministratedObject";return this.httpClient.post(t,{administratedObject:e})}getAdministratedObject(e){const t=this.serviceEndpoint+"GetAdministratedObject";return this.httpClient.post(t,{schemaUId:e})}getAdministratedObjects(e){let t;switch(e){case lc.Section:t="GetSectionObjects";break;case lc.Lookup:t="GetLookupObjects";break;case lc.All:default:t="GetAllObjects"}const i=this.serviceEndpoint+t;return this.httpClient.post(i,null)}getSysAdminUnitList(){if(!this._getSysAdminUnitList$){const e=this.serviceEndpoint+"GetSysAdminUnitList";this._getSysAdminUnitList$=this.httpClient.post(e,null).pipe((0,_i.d)(1)),this._getSysAdminUnitList$.subscribe()}return this._getSysAdminUnitList$}getSysAdminUnitById(e){const t=this.serviceEndpoint+"GetSysAdminUnitById";return this.httpClient.post(t,{sysAdminUnitId:e})}}ca.\u0275fac=function(e){return new(e||ca)(n.\u0275\u0275inject(D.HttpClient))},ca.\u0275prov=n.\u0275\u0275defineInjectable({token:ca,factory:ca.\u0275fac});var LD=f(55211);const T4=["treeScrollWrapper"],OD=function(a){return{selected:a}};function P4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-tree-node",5),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onNodeClick(s))}),n.\u0275\u0275element(1,"div",6),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,OD,i.isSelectedNode(t))),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}function A4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-tree-node",5),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onNodeClick(s))}),n.\u0275\u0275element(1,"div",7),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()}if(2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(4,OD,i.isSelectedNode(t))),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",i.treeControl.isExpanded(t)?"minus":"plus"),n.\u0275\u0275attribute("aria-label","toggle "+t.name),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}class R4 extends LD.C2{expandParents(e){const t=this.getLevel(e);if(t<1)return;for(let r=this.dataNodes.indexOf(e)-1;r>=0;r--){const s=this.dataNodes[r];if(this.getLevel(s)<t){if(-1===this.getDescendants(s).indexOf(e))continue;if(this.expand(s),0===this.getLevel(s))break}}}}class Gm{constructor(){this.selectedUnitChange=new n.EventEmitter,this.treeControl=new R4(e=>e.level,e=>e.expandable),this.treeFlattener=new ke.JZ(this._transformNodeToFlatNode,e=>e.level,e=>e.expandable,e=>e.children),this.treeDataSource=new ke.kc(this.treeControl,this.treeFlattener)}set dataSource(e){this._dataSource!==e&&(this._dataSource=e,this._initTreeDataSource(),this._expandToSysAdminUnit(this.selectedUnit))}set selectedUnit(e){this._selectedUnit!==e&&(this._selectedUnit=e,this._expandToSysAdminUnit(e))}get selectedUnit(){return this._selectedUnit}_createNode(e){return{id:e.id,name:e.name,children:[]}}_transformNodeToFlatNode(e,t){return{id:e.id,name:e.name,expandable:!!(e.children&&e.children.length>0),level:t}}_createTreeDataFromFlatList(e){const t=[],i=[],r=e.map((s,o)=>(i[s.id]=o,this._createNode(s)),this);return e.forEach(s=>{const o=r[i[s.id]];if((0,l.isEmptyGuid)(s.parentRoleId)||s.sysAdminUnitTypeValue===qe.User)t.push(o);else{const c=r[i[s.parentRoleId]];if(!c)return;c.children.push(o)}}),t}_initTreeDataSource(){Array.isArray(this._dataSource)?this.treeDataSource.data=this._createTreeDataFromFlatList(this._dataSource):this.treeDataSource=null}_expandToSysAdminUnit(e){if(!e||!this.treeControl.dataNodes)return;const t=this.treeControl.dataNodes.find(i=>i.id===e.id);t&&(this.treeControl.expandParents(t),setTimeout(()=>this._scrollToItem(e),0))}_scrollToItem(e){const t=this._dataSource.findIndex(s=>s.id===e.id),i=this.treeScrollWrapper.nativeElement,r=i.scrollHeight/this._dataSource.length;i.scrollTop=t*r}hasChildren(e,t){return t.expandable}onNodeClick(e){const t=this._dataSource.find(i=>i.id===e.id);this._selectedUnit=t,this.selectedUnitChange.emit(t)}isSelectedNode(e){return!(!this.selectedUnit||this.selectedUnit.id!==e.id)}}function k4(a,e){1&a&&n.\u0275\u0275element(0,"ts-mask")}function N4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",19),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.name)}}function V4(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-optgroup",16),n.\u0275\u0275template(1,N4,2,2,"mat-option",18),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("label",t.name),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.sysAdminUnits)}}function F4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",20),n.\u0275\u0275listener("selectedUnitChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.selectedUnit=r)})("dblclick",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onTreeDoubleClick())}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("dataSource",t.dataSource)("selectedUnit",t.selectedUnit)}}function L4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",20),n.\u0275\u0275listener("selectedUnitChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.selectedUnit=r)})("dblclick",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onTreeDoubleClick())}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("dataSource",t.dataSource)("selectedUnit",t.selectedUnit)}}function O4(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",20),n.\u0275\u0275listener("selectedUnitChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.selectedUnit=r)})("dblclick",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onTreeDoubleClick())}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("dataSource",t.dataSource)("selectedUnit",t.selectedUnit)}}var Pe;Gm.\u0275fac=function(e){return new(e||Gm)},Gm.\u0275cmp=n.\u0275\u0275defineComponent({type:Gm,selectors:[["ts-sysadminunit-tree"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(T4,7),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.treeScrollWrapper=i.first)}},inputs:{dataSource:"dataSource",selectedUnit:"selectedUnit"},outputs:{selectedUnitChange:"selectedUnitChange"},decls:5,vars:3,consts:[[1,"tree-wrapper"],["treeScrollWrapper",""],[3,"dataSource","treeControl"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click"],[1,"toggle-icon"],["matTreeNodeToggle","",1,"toggle-icon",3,"ngClass"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0,1)(2,"mat-tree",2),n.\u0275\u0275template(3,P4,3,4,"mat-tree-node",3),n.\u0275\u0275template(4,A4,3,6,"mat-tree-node",4),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("dataSource",t.treeDataSource)("treeControl",t.treeControl),n.\u0275\u0275advance(2),n.\u0275\u0275property("matTreeNodeDefWhen",t.hasChildren))},dependencies:[y.NgClass,ke.fQ,ke.ah,ke.eu,ke.gi,ke.uo],styles:[".tree-wrapper[_ngcontent-%COMP%]{padding-top:15px;display:block;overflow:auto;max-height:313px}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{color:#444;line-height:19px;max-height:30px;min-height:30px;white-space:nowrap}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%]{background-color:#f2f5ff}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-right:14px;margin-top:2px}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{background:url(plus.svg) no-repeat;cursor:pointer}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{background:url(minus.svg) no-repeat;cursor:pointer}"]}),function(a){a[a.OrganizationRoles=0]="OrganizationRoles",a[a.FunctionalRoles=1]="FunctionalRoles",a[a.Users=2]="Users"}(Pe||(Pe={}));class zm{constructor(e,t,i,r,s){this.dialogRef=e,this.dialogService=t,this.rightManagementService=i,this.translateService=r,this.data=s,this.isLoading=!1,this.selectedTabIndex=0}_getGroupNameByTabIndex(e){let t="";switch(e){case Pe.OrganizationRoles:t=this.translateService.instant("SelectSysAdminUnitDialog.OrganizationalRoles");break;case Pe.FunctionalRoles:t=this.translateService.instant("SelectSysAdminUnitDialog.FunctionalRoles");break;case Pe.Users:t=this.translateService.instant("SelectSysAdminUnitDialog.Users")}return t}_getAllEmployeesUnit(){return this.sysAdminUnits.find(e=>e.id===Yo)}_getAllPortalUsersUnit(){return this.sysAdminUnits.find(e=>e.id===Pd)}_getSysAdminUnitTypesByTabIndex(e){let t=[];switch(e){case Pe.OrganizationRoles:t=[qe.Organization,qe.Division,qe.Manager,qe.SelfServicePortalUser];break;case Pe.FunctionalRoles:t=[qe.FunctionalRole];break;case Pe.Users:t=[qe.User]}return t}_fillSysAdminUnitGroups(e){this.sysAdminUnitGroups=[],Object.keys(Pe).forEach(t=>{const i=Number(Pe[t]);if(isNaN(i))return;const r=this._getSysAdminUnitTypesByTabIndex(i),s=e.filter(o=>r.indexOf(o.sysAdminUnitTypeValue)>-1);s.length>0&&this.sysAdminUnitGroups.push({name:this._getGroupNameByTabIndex(i),tabIndex:i,sysAdminUnits:s})})}_prepareSysAdminUnits(e){if(!e||!e.success)return this.isLoading=!1,void(e&&e.errorInfo&&this.dialogService.openInfoDialog(e.errorInfo.message));this.sysAdminUnits=e.sysAdminUnits,this._fillSysAdminUnitGroups(this.sysAdminUnits),this.fillContentByTab(Pe.OrganizationRoles),this.isLoading=!1}_applySysAdminUnit(){const e=this.data&&this.data.validator,t=e&&e(this.selectedUnit);!t||t.success?this.dialogRef.close(this.selectedUnit):this.dialogService.openInfoDialog(t.message)}_changeTabIndexBySysAdminUnitType(e){let t=this.selectedTabIndex;switch(e){case qe.Organization:case qe.Division:case qe.Manager:case qe.SelfServicePortalUser:t=Pe.OrganizationRoles;break;case qe.FunctionalRole:t=Pe.FunctionalRoles;break;case qe.User:t=Pe.Users}this.selectedTabIndex=t}ngOnInit(){this.isLoading=!0,this.rightManagementService.getSysAdminUnitList().subscribe(this._prepareSysAdminUnits.bind(this))}fillContentByTab(e){if(!Array.isArray(this.sysAdminUnits))return void(this.dataSource=null);const t=this._getSysAdminUnitTypesByTabIndex(e),i=this.sysAdminUnits.filter(r=>t.indexOf(r.sysAdminUnitTypeValue)>-1);if(e===Pe.FunctionalRoles){i.push(this._getAllEmployeesUnit());const r=this._getAllPortalUsersUnit();r&&i.push(r)}this.dataSource=i}onTreeDoubleClick(){this.selectedUnit&&this._applySysAdminUnit()}onSelectButtonClick(){this._applySysAdminUnit()}getSysAdminUnitName(e){return e.name}onFilteredSysAdminUnitSelected(e){const t=e.option.value;this._changeTabIndexBySysAdminUnitType(t.sysAdminUnitTypeValue),this.selectedUnit=t}search(e){if(!e)return void(this.filteredSysAdminUnitGroups$=(0,u.of)([]));e=e.toLocaleLowerCase();const t=(i,r)=>{const s=r.toLowerCase();return i.filter(o=>-1!==o.name.toLowerCase().indexOf(s))};this.filteredSysAdminUnitGroups$=(0,u.of)(this.sysAdminUnitGroups.map(i=>({name:i.name,tabIndex:i.tabIndex,sysAdminUnits:t(i.sysAdminUnits,e)})).filter(i=>i.sysAdminUnits.length>0))}isOrganizationalRolesVisible(){return this.selectedTabIndex===Pe.OrganizationRoles}isFunctionalRolesVisible(){return this.selectedTabIndex===Pe.FunctionalRoles}isUsersVisible(){return this.selectedTabIndex===Pe.Users}}zm.\u0275fac=function(e){return new(e||zm)(n.\u0275\u0275directiveInject(E.hV),n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(ca),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(E.eJ))},zm.\u0275cmp=n.\u0275\u0275defineComponent({type:zm,selectors:[["ts-select-sysadminunit-dialog"]],decls:34,vars:32,consts:[[4,"ngIf"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-actions",""],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-content",""],[1,"search-input"],["floatLabel","never"],["matInput","","type","text","spellcheck","false",3,"placeholder","matAutocomplete","input","focus"],["matSuffix","","svgIcon","search"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"label",4,"ngFor","ngForOf"],["mat-stretch-tabs","","animationDuration","0ms","disableRipple","true",3,"selectedIndex","selectedIndexChange"],[3,"label"],[3,"dataSource","selectedUnit","selectedUnitChange","dblclick",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","selectedUnit","selectedUnitChange","dblclick"]],template:function(e,t){if(1&e&&(n.\u0275\u0275template(0,k4,1,0,"ts-mask",0),n.\u0275\u0275elementStart(1,"div",1)(2,"span"),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",2),n.\u0275\u0275element(6,"mat-icon",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",4)(8,"button",5),n.\u0275\u0275listener("click",function(){return t.onSelectButtonClick()}),n.\u0275\u0275text(9),n.\u0275\u0275pipe(10,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",6),n.\u0275\u0275text(12),n.\u0275\u0275pipe(13,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"input",10),n.\u0275\u0275listener("input",function(r){return t.search(r.target.value)})("focus",function(r){return t.search(r.target.value)}),n.\u0275\u0275pipe(18,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(19,"mat-icon",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"mat-autocomplete",12,13),n.\u0275\u0275listener("optionSelected",function(r){return t.onFilteredSysAdminUnitSelected(r)}),n.\u0275\u0275template(22,V4,2,2,"mat-optgroup",14),n.\u0275\u0275pipe(23,"async"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(24,"mat-tab-group",15),n.\u0275\u0275listener("selectedIndexChange",function(r){return t.selectedTabIndex=r})("selectedIndexChange",function(r){return t.fillContentByTab(r)}),n.\u0275\u0275elementStart(25,"mat-tab",16),n.\u0275\u0275pipe(26,"translate"),n.\u0275\u0275template(27,F4,1,2,"ts-sysadminunit-tree",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(28,"mat-tab",16),n.\u0275\u0275pipe(29,"translate"),n.\u0275\u0275template(30,L4,1,2,"ts-sysadminunit-tree",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(31,"mat-tab",16),n.\u0275\u0275pipe(32,"translate"),n.\u0275\u0275template(33,O4,1,2,"ts-sysadminunit-tree",17),n.\u0275\u0275elementEnd()()()),2&e){const i=n.\u0275\u0275reference(21);n.\u0275\u0275property("ngIf",t.isLoading),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(4,16,"SelectSysAdminUnitDialog.Title")),n.\u0275\u0275advance(5),n.\u0275\u0275property("disabled",!t.selectedUnit),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(10,18,"SelectSysAdminUnitDialog.Select")," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(13,20,"SelectSysAdminUnitDialog.Cancel")),n.\u0275\u0275advance(5),n.\u0275\u0275property("placeholder",n.\u0275\u0275pipeBind1(18,22,"SelectSysAdminUnitDialog.Search"))("matAutocomplete",i),n.\u0275\u0275advance(3),n.\u0275\u0275property("displayWith",t.getSysAdminUnitName),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(23,24,t.filteredSysAdminUnitGroups$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("selectedIndex",t.selectedTabIndex),n.\u0275\u0275advance(1),n.\u0275\u0275property("label",n.\u0275\u0275pipeBind1(26,26,"SelectSysAdminUnitDialog.OrganizationalRoles")),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isOrganizationalRolesVisible()),n.\u0275\u0275advance(1),n.\u0275\u0275property("label",n.\u0275\u0275pipeBind1(29,28,"SelectSysAdminUnitDialog.FunctionalRoles")),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isFunctionalRolesVisible()),n.\u0275\u0275advance(1),n.\u0275\u0275property("label",n.\u0275\u0275pipeBind1(32,30,"SelectSysAdminUnitDialog.Users")),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isUsersVisible())}},dependencies:[An,y.NgForOf,y.NgIf,ce.VN,ce.QJ,Xe.CK,Xe.NA,U.eB,E.aO,E.YS,E.Rb,E.ev,A.Hw,N.v_,N.nX,z.k0,He.SK,He.R7,Gm,y.AsyncPipe,w.X$],styles:["[_nghost-%COMP%]{padding:4px 10px;min-width:580px;min-height:512px}[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:5px!important}.search-input[_ngcontent-%COMP%]{padding-top:12px;font-size:14px}.search-input[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%;line-height:18px!important}.search-input[_ngcontent-%COMP%]   mat-icon[svgicon=search][_ngcontent-%COMP%]{width:16px;height:16px;line-height:0;vertical-align:middle}"]});let cS=class extends l.BaseRequestHandler{constructor(e,t,i){super(),this.dialogService=e,this.queryExecutor=t,this.translateService=i,this._dataSourceName="QueueAgentsListDS"}_getEntityName(e){return e.$context.dataSchemas[this._dataSourceName]?.dataSourceConfig?.config?.entitySchemaName}_getInsertQuery(e,t){var i=this;return(0,_.Z)(function*(){const r=i._getEntityName(e),s=new l.InsertQuery(r);return[{path:"Operator",value:t,type:l.DataValueType.Guid},{path:"ChatQueue",value:yield e.$context.Id,type:l.DataValueType.Guid}].forEach(c=>{s.addColumn(c.path,c.value,c.type)}),s})()}_createDuplicationsValidator(e){return t=>{const i=e.find(r=>r.attributes.QueueAgentsListDS_Operator.value===t.id);return{success:(0,O.Z)(i),message:this.translateService.instant("ChatSettings.ChatQueueOperatorDetail.DuplicationMessage")}}}_saveViewModel(e){return(0,_.Z)(function*(){const{$context:t,scopes:i}=e,r={type:"crt.SaveRecordRequest",preventCardClose:!0,scopes:i,$context:t};return yield l.HandlerChainService.instance.process(r)})()}_reloadAgentDetail(e){return(0,_.Z)(function*(){const t=e.$context,i=yield t.getPrimaryModelName(),r=yield t.getPrimaryDataSchema(),s={type:"crt.LoadDataRequest",config:{loadType:l.DataSourceLoadType.Reload},$context:t,parameters:[{type:"primaryColumnValue",value:r.primaryAttributeName}],dataSourceName:i};yield l.HandlerChainService.instance.process(s)})()}handle(e){var t=this;return(0,_.Z)(function*(){if(e.$context.PrimaryModelMode===V.Create&&!(yield t._saveViewModel(e)))return;const r=yield e.$context.QueueAgentsList,s=yield(0,u.lastValueFrom)(t.dialogService.open(zm,{data:{validator:t._createDuplicationsValidator(r)}}));if(s?.id){const o=yield t._getInsertQuery(e,s.id),c=t.queryExecutor.executeInsertQuery(o);yield(0,u.lastValueFrom)(c),yield t._reloadAgentDetail(e)}yield t.next?.handle(e)})()}};cS=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.CreateQueueAgentHandler",requestType:"crt.CreateQueueAgentHandlerRequest"}),(0,m.w6)("design:paramtypes",[Ce,me,w.sK])],cS);let uS=class extends l.BaseRequestHandler{constructor(e){super(),this.telegramService=e,this._telegramBotAttrName="TelegramBot"}_setTelegramBotLink(e,t){const i=`<a target='_blank' href='https://t.me/${e}'>${e}</a>`;t[this._telegramBotAttrName]=i}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context,r=i.getViewModelAttributePaths(yield i.getPrimaryModelName(),"MsgSettingsId")[0],s=yield i[r],o=yield i[t._telegramBotAttrName];return s&&!o&&!t._getUserName$&&(t._getUserName$=t.telegramService.getTelegramUserName(s).subscribe(c=>{t._setTelegramBotLink(c,i),t._getUserName$.unsubscribe()})),yield t.next?.handle(e)})()}};uS=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.TelegramChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["TelegramChannel_EditPage"]}),(0,m.w6)("design:paramtypes",[Fs])],uS);const jD_Modal="modal",Vc_ClassicUI="7x",Vc_FreedomUI="8x";class yn{static getModuleNameByAlias(e){const t=this._moduleAliases;return Object.keys(t).find(i=>t[i]===e)}static replaceModuleNameByAlias(e){const t=e.split("/");return t[0]=this._moduleAliases[t[0]]||t[0],t.join("/")}}yn._moduleAliases={CardSchemaViewModule:"Card",PageSchemaViewModule:"Page",SectionSchemaViewModule:"Section"},yn.\u0275fac=function(e){return new(e||yn)},yn.\u0275prov=n.\u0275\u0275defineInjectable({token:yn,factory:yn.\u0275fac,providedIn:"root"});class js{static _parseChildRoutes(e,t){const i=[],r=e.match("\\[(.+)\\]");if(r?.length>0){const s=r[1],[o,c]=this._getChildRoutesIndexes(s),d=o>=0&&c>0;let g,p=s;d&&(g=s.substring(o,c+1),p=s.replace(g,"")),p.split(",").forEach((C,v)=>{const T=this._getChildSegmentByPath(C);if(T.contextName=`${t}_${T.target}${v}`,d){const j=s.indexOf(C);"["===s.at(j+C.length)&&(T.children=this._parseChildRoutes(g,T.contextName))}i.push(T)})}return i}static _getChildRoutesIndexes(e){const t=[],i=[],r=[];for(let s=0;s<e.length;s++){const o=e.charAt(s);if("["===o)t.push(s);else if("]"===o){const c=t.pop();i.push(c),r.push(s)}}return[i.at(-1),r.at(-1)]}static _getRootSegmentByPath(e){if(!e)return{recordId:void 0,contextName:"root",action:void 0,schemaName:void 0,moduleName:void 0};const t=e.split("/");let i,r,s,o;return 5===t.length&&"SectionModuleV2"===t[0]?[i,,r,s,o]=t:[i,r,s,o]=t,{moduleName:yn.getModuleNameByAlias(i)||i,schemaName:r,action:s,recordId:o,contextName:"root"}}static _getChildSegmentByPath(e){const t=e.split("=");let i,r;t[1]?(r=t[0],i=t[1]):i=t[0];const[s,o,c]=i.split("/");return{schemaName:s,action:o,recordId:c,target:r}}static parse(e){const i=new URL(e).hash.split("#")[1];return js.parseLocation(i)}static parseLocation(e){const t=e?.indexOf("[");let i,r="";t>=0?(i=e.substring(0,t),r=e.substring(t)):i=e;const s=this._getRootSegmentByPath(i);let o=[];return r&&(o=this._parseChildRoutes(r,s.contextName)),{root:s,children:o}}static getQueryParams(e){const t=e.lastIndexOf("?"),i={};return t<0||e.substring(t+1).split("&").forEach(s=>{const o=s.split("=");i[o[0]]=o[1]}),i}}var pi,Wt,Oe,Be;!function(a){a.Auto="auto",a.PreferFreedomUI="freedom-ui"}(pi||(pi={}));class BD{static initialize(){co.config({disableDefaultAlphabetLength:!0,disableDefaultIdLength:!0,idLength:7}),co.characters("0123456789abcdefghijklmnopqrstuvwxyz")}static generateUnique(e,t="",i="_"){const r=new RegExp(`^${t}`);return t+e.replace(r,"")+i+co.generate()}}BD.initialize();class R{static get angularSchemaType(){return R._angularSchemaType}static _getTypeColumnName(e,t){return R.getEntityStructure(e,t??pi.Auto)?.pages.find(s=>s.typeColumnName)?.typeColumnName}static _getTypeColumnValue(e){return(0,_.Z)(function*(){const{entityName:t,typeColumnValue:i}=e;if(i)return i;const r=R._getTypeColumnName(t,e.uiTypePriority),s=R.getRecordLookupValue(e.recordId);return r&&s?(yield(yield l.Model.create(t)).load({attributes:[r],parameters:[{type:l.ModelParameterType.Filter,value:new l.CompareFilter(l.ComparisonType.Equal,new l.ColumnExpression({columnPath:"Id"}),new l.ParameterExpression({value:s}))}]}))?.[0]?.[r]?.value:null})()}static _getModuleStructureBySectionSchema(e){return Object.values(Terrasoft.configuration.ModuleStructure).find(t=>t.sectionSchema===e)}static _getSectionModuleName(e){return R._getModuleStructureBySectionSchema(e)?.sectionModule}static _getSectionEditPageModuleName(e){return Object.values(Terrasoft.configuration.ModuleStructure).find(i=>i.cardSchema===e||i.pages?.some(r=>r.cardSchema===e))?.cardModule}static _getSchemaRequire(e){return new Promise(t=>{Terrasoft.require([e],i=>t(i))})}static _isSchemaInheritedFrom(e,t){return(0,_.Z)(function*(){let i=Terrasoft.configuration.Structures[t];i||(yield R._getSchemaRequire(t),i=Terrasoft.configuration.Structures[t]);const r=i?.structureParent;return!!r&&(r===e||R._isSchemaInheritedFrom(e,r))})()}static _getModuleName(e){return(0,_.Z)(function*(){const t=R._getSectionModuleName(e)??R._getSectionEditPageModuleName(e);if(t)return t;if(yield R._isSchemaInheritedFrom("BasePageV2",e))return"CardModuleV2";switch(!0){case yield R._isSchemaInheritedFrom("BaseHomePage",e):return"HomePage";case yield R._isSchemaInheritedFrom("BaseIntroPageSchema",e):return"IntroPage";case yield R._isSchemaInheritedFrom("BaseSectionV2",e):return"SectionModuleV2";default:return"PageSchemaViewModule"}})()}static _getTypedPage(e,t){if(!t||t.length<=1)return;if(e.entityPageName){const r=t.find(s=>s.cardSchema===e.entityPageName);if(r)return r}let i=e.typeColumnValue;if(!i&&e.entityName){const s=R.getEntityStructure(e.entityName,e.uiTypePriority)?.attribute;if(s){const o=e.defaultValues?.find(c=>c.attributeName===s);i=o?.value?.value||o?.value}}return i?t.find(r=>r.UId===i):void 0}static _getDefaultPages(e){return e?.filter(t=>R._isDefaultPage(t))}static _getNotTypedAddPage(e){return e?.find(t=>R._isAddPage(t)&&!t.UId)}static _getTypedAddPage(e){return e?.find(t=>R._isAddPage(t)&&t.UId)}static _getTypedDefaultPage(e){return e?.find(t=>R._isDefaultPage(t)&&t.UId)}static _getNotTypedDefaultPage(e){return e?.find(t=>R._isDefaultPage(t)&&!t.UId)}static _isDefaultPage(e){return e.isDefault||!e.actions}static _isAddPage(e){return e.actions?.add}static _getDefaultPage(e){const t=R.getEntityStructure(e.entityName,e.uiTypePriority);if(!t)return;const i=R._getDefaultPages(t.pages),s=R._getTypedPage(e,i)||R._getNotTypedDefaultPage(i);return!s&&t.pages?.length?(console.warn("Default page not found and random page is given instead. Please, check passed options."),t.pages[0]):s}static _getAddPage(e){const i=R.getEntityStructure(e.entityName,e.uiTypePriority)?.pages,r=R.getPagesForAddAction(i);if(r?.length<=1)return r?.[0];const s=R._getTypedPage(e,r);if(s)return s;const o=R._getNotTypedAddPage(i),c=R._getNotTypedDefaultPage(i);let d=o||c;return d||(console.warn("Add or default page not found and random page is given instead. Please, check options."),console.warn(e),d=i?.[0]),d}static _getEditPage(e){return R._getDefaultPage(e)}static _getGroupedTypedPages(e){const t={};for(const i of e){const{UId:r}=i;r&&(t[r]=t[r]??[],t[r].push(i))}return t}static _getModuleConfig(e){return Object.values(Terrasoft.configuration.ModuleStructure).find(t=>t.cardSchema===e||t.sectionSchema===e||t.pages?.some(i=>i.cardSchema===e))}static getPagesForAddAction(e){if((0,O.Z)(e))return[];const t=R._getGroupedTypedPages(e),i=R._getNotTypedAddPage(e),r=R._getNotTypedDefaultPage(e),s=Object.values(t).map(c=>{const d=R._getTypedAddPage(c);if(d)return d;const p=R._getTypedDefaultPage(c);return p&&i?{...i,...(0,lt.Z)(p,["caption","captionLcz","UId"])}:i||p||r});if(!(0,O.Z)(s))return s;const o=i||r;return o?[o]:[]}static getCardSchemaName(e){return e?.cardSchema??e?.cardSchemaName}static getEntityStructure(e,t=pi.Auto){if(!e)return;let i;return t===pi.PreferFreedomUI&&(i=Object.values(Terrasoft.configuration.EntityStructure).find(r=>r.page8X&&r.entitySchemaName===e)),i??Terrasoft.ModuleUtils.getEntityStructureByName(e)}static getRecordLookupValue(e){return"string"==typeof e?e:e?.value}static getPageForActionAsync(e){return(0,_.Z)(function*(){const i={typeColumnValue:yield R._getTypeColumnValue(e),...e};return R.getPageForAction(i)})()}static getPageForAction(e){let t;return t=e.action===l.ModelInPageAction.Add?R._getAddPage(e):R._getEditPage(e),t||(t=R._getDefaultPage(e)),t}static getPageSchemaNameForAction(e){return(0,_.Z)(function*(){if(e.entityPageName)return e.entityPageName;const t=yield R.getPageForActionAsync(e);return R.getCardSchemaName(t)})()}static isAngularSchema(e){return(0,_.Z)(function*(){return yield R._getSchemaRequire(e),(yield R._getSchemaRequire(e+"Structure")).type===R._angularSchemaType})()}static generateChainModuleId(e){return BD.generateUnique(e+"_chain")}static getValuePairs(e){return e&&e.map(t=>{let i,r;const s=t.value;return s?.value?(r=s.value,i=s.displayValue):r=s,{name:t.attributeName,value:r,displayValue:i}})}static getModuleName(e,t){return(0,_.Z)(function*(){if(!e&&!t)throw new l.ArgumentEmptyException("schemaName");return e&&!t&&(t=yield R._getModuleName(e)),t})()}static getEditPageModuleName(e,t=pi.Auto){return R.getEntityStructure(e,t)?.cardModuleName}static hasEntityEditPage(e){return(0,_.Z)(function*(){const t=yield R.getPageForActionAsync(e);return Boolean(t)})()}static isSectionEditPage(e){return Boolean(R._getSectionEditPageModuleName(e))}static isAngularListPage(e){return(0,_.Z)(function*(){return!!(yield R.isAngularSchema(e))&&R._isSchemaInheritedFrom("BaseGridSectionTemplate",e)})()}static isAngularRouting(e){return R._angularModules.includes(e)}static getSectionEntityName(e){return R._getModuleStructureBySectionSchema(e)?.entitySchemaName}static getPageEntitySchemaName(e){const t=this._getModuleConfig(e);return t?.entitySchemaName?t.entitySchemaName:Object.values(Terrasoft.configuration.EntityStructure).find(r=>r.pages?.some(s=>s.cardSchema===e))?.entitySchemaName}static getEntityPageStructure(e){return Object.values(Terrasoft.configuration.EntityStructure).find(i=>i.pages.find(r=>r.cardSchema===e))?.pages?.find(i=>i.cardSchema===e)}static isMiniPage(e){const t=R.getEntityPageStructure(e);if(t){const i="MiniPage"===t.schemaGroup;return Promise.resolve(i)}return R._isSchemaInheritedFrom("BaseMiniPageTemplate",e)}static getSysModuleId(e){return(R._getModuleConfig(e)||Object.values(Terrasoft.configuration.ModuleStructure).find(i=>i.sectionModule===e))?.moduleId}}function UD(a,e){return a?.moduleName===e?.moduleName&&a?.schemaName===e?.schemaName&&a?.action===e?.action&&a?.recordId===e?.recordId&&a?.contextName===e?.contextName}function GD(a,e){if(a?.length!==e?.length)return!1;for(let i=0;i<a?.length;i++){const r=UD(a[i],e[i]),s=GD(a[i].children,e[i].children),o=a[i].target===e[i].target;if(!(r&&s&&o))return!1}return!0}function zD(a,e,t,i){let r=[];return(0,O.Z)(t)||t.forEach(s=>{const o=i===a,c=s.target===e;if(o&&c)r.push(s);else{const p=zD(a,e,s?.children,s.contextName);r=[...r,...p]}}),r}function HD(a){const e=(0,At.Z)(a,"historyIndex","children");return e.modelInitConfigs=e.modelInitConfigs?.map(t=>(0,At.Z)(t,"name")),e}function ZD(a){const e=a.children||[];return(0,O.Z)(e)?a:ZD(e[0])}R._angularSchemaType=9,R._angularModules=["PageSchemaViewModule","CardSchemaViewModule","HomePage","Desktop","SectionSchemaViewModule"];class qD{static _applyRecordId(e,t,i){return e&&e!==l.ModelInPageAction.Add?t+"/"+i:t}static _getLocationByUrlSegment(e){const t=[e.moduleName,e.schemaName,e.action].filter(i=>i&&"undefined"!==i).join("/");return this._applyRecordId(e.action,t,e.recordId)}static _getPrevRootLocation(e){const t=js.parseLocation(e);return this._getLocationByUrlSegment(t.root)}static _getRootLocationSegment(e){return{schemaName:e.schemaName,moduleName:e.moduleName,action:e.modelInitConfigs?.[0]?.action,recordId:e.modelInitConfigs?.[0]?.recordId}}static _getRootLocation(e,t){let i;const r=this._getChildrenState(t),{prevLocation:s,isInChain:o}=e;if(!s||!o&&(0,O.Z)(r)){const c=this._getRootLocationSegment(e);i=this._getLocationByUrlSegment(c)}else i=this._getPrevRootLocation(s);return i}static _getChildrenState(e){return e.children||[]}static _getChildLocationSegment(e){return{schemaName:e.schemaName,action:e.modelInitConfigs?.[0]?.action,recordId:e.modelInitConfigs?.[0]?.recordId}}static _getChildrenLocation(e){let t="";if((0,O.Z)(e))return t;const i=[...e].sort((s,o)=>s.target.localeCompare(o.target));let r="";return i.forEach(s=>{r===s.target?t+=",":(t+=`${s.target}=`,r=s.target);const o=this._getChildLocationSegment(s);t+=this._getLocationByUrlSegment(o);const c=this._getChildrenLocation(s.children);t=t.concat(`${c}`)}),`[${t}]`}static getLocationByState(e,t){const i=this._getRootLocation(e,t),r=this._getChildrenState(t);return i+this._getChildrenLocation(r)}}class rt extends Ta{constructor(e){super(),this.window=e,this.state$=new u.Subject,this._indexHistoryStates()}_indexHistoryStates(){const e=()=>{const t=this.getState();if(!t||!("historyIndex"in t)){let i;i=this.previousState?this.previousState?.historyIndex+1:this.window.history.length-1;const r={...t,historyIndex:i};this.window.history.replaceState(r,"indexState")}};e(),this.window.addEventListener("popstate",e,!0),this._popstateSubscription=new u.Subscription(()=>this.window.removeEventListener("popstate",e))}replaceAliasWithModuleName(e){const t=e.split("/");return t[0]=yn.getModuleNameByAlias(t[0])||t[0],t.join("/")}onPopState(e){}prepareExternalUrl(e){}getBaseHref(){return`${this.window.Terrasoft.workspaceBaseUrl}/Shell`}getRoute(e){const i={...js.parse(this.window.location.href),state:e};return this._applyChildStateToChildSegment(i.children,e.children),i}_applyChildStateToChildSegment(e,t){!e||!t||e.forEach((i,r)=>{const s=t[r];i.parameters=s.parameters,i.defaultValues=s.modelInitConfigs?.[0]?.defaultValues,i.children&&this._applyChildStateToChildSegment(i.children,s.children)})}ngOnDestroy(){this._popstateSubscription.unsubscribe()}}rt.\u0275fac=function(e){return new(e||rt)(n.\u0275\u0275inject(se))},rt.\u0275prov=n.\u0275\u0275defineInjectable({token:rt,factory:rt.\u0275fac,providedIn:"root"});class Fc extends rt{constructor(e,t){super(e),this._ngZone=t}get previousState(){return this._previousState}_splitHistoryState(e){const i=e.split("?")[0].split("/"),r={},o=js.parse(this.window.location.href).root;if(r.moduleName=o.moduleName,r.schemaName=o.schemaName,r.operationType=o.action,i.length<=4&&i[3])return r.recordId=o.recordId,r;let c=3;"add"!==r.operationType&&(c=4,i[3]&&(r.recordId=o.recordId));const d=(i.length-c)/2;r.valuePairs=[];for(let p=0;p<d;p++){const g=c+2*p;r.valuePairs[p]={name:i[g],value:i[g+1]}}return r}_getHash(e=this.window.location.href){const t=e.indexOf("#");return t>=0?e.slice(t):"#"+e}_hasOnlyHistoryState(e){const t=Object.keys(e);return 1===t.length&&t.includes("historyIndex")}_toHistoryState(e){const t={recordId:e.recordId,schemaName:e.schemaName,moduleName:e.moduleName,operationType:e.action};return t.modelInitConfigs=[{recordId:e.recordId,action:e.action}],t}_toChildHistoryStates(e){const t=[];return e.forEach(i=>{const r=this._toHistoryState(i);r.target=i.target,r.children=[],(0,O.Z)(i.children)||(r.children=this._toChildHistoryStates(i.children)),t.push(r)}),t}_backToReconstructedState(){const e=js.parse(this.window.location.href),t=this._toChildHistoryStates(e.children);if(t.length>0){t.pop();const i=this._toHistoryState(e.root),r={...this.window.history.state,...i,children:t},s={schemaName:r.schemaName,moduleName:r.moduleName,modelInitConfigs:r.modelInitConfigs},o=qD.getLocationByState(s,r);return this._ngZone.run(()=>{this.replaceState(r,"",o)}),!0}return!1}getActivePathInfo(){let e=this.path();return"/"===e.charAt(0)&&(e=e.slice(1)),e=this.replaceAliasWithModuleName(e),this._splitHistoryState(e)}path(e=!1){const t=this._getHash();return e?t:t.slice(1)}pushState(e,t,i){const r=this.getState()||this._previousState||{historyIndex:0};(e??(e={})).historyIndex=r.historyIndex+1,this.window.history.pushState(e,t,this._getHash(i)),this._previousState=this.getState(),this.state$.next(e)}replaceState(e,t,i){(e??(e={})).historyIndex=this.getState().historyIndex,this.window.history.replaceState(e,t,this._getHash(i)),this.state$.next(e)}forward(){this.go(1)}back(){this.window.history.length<2?this._backToReconstructedState():(this._previousState=this.getState(),this.go(-1))}go(e){this.window.history.go(e)}getState(){let e=this.window.history.state;if((0,O.Z)(e))return null;if(this._hasOnlyHistoryState(e)){const t=js.parse(this.window.location.href),i=this._toHistoryState(t.root),r=this._toChildHistoryStates(t.children);e={...e,...i,children:r}}return e}ngOnDestroy(){super.ngOnDestroy()}}Fc.\u0275fac=function(e){return new(e||Fc)(n.\u0275\u0275inject(se),n.\u0275\u0275inject(n.NgZone))},Fc.\u0275prov=n.\u0275\u0275defineInjectable({token:Fc,factory:Fc.\u0275fac,providedIn:"root"}),function(a){a.Entity="entity",a.Schema="schema",a.Module="module"}(Wt||(Wt={}));!function(a){a.Push="push",a.Replace="replace"}(Oe||(Oe={}));class $D{getState(e){var t=this;return(0,_.Z)(function*(){let i={};yield t.enrichState(i,e);const r=e?.state??{};return i={...i,...r},i})()}}!function(a){a.Back="back",a.Forward="forward",a.ExecuteTransition="executeTransition",a.Go="go"}(Be||(Be={}));class mi{_addToBucket(e,t){let i=e[t.type];i||(i=[],e[t.type]=i),i.push(t)}_eventBucketsReducer(e,t){return t.type===Be.Go&&-1===t.delta?this._addToBucket(e,mi._backEvent):this._addToBucket(e,t),e}_prepareForwardEvents(e,t){let i=[];const r=[];for(const s of e)(s.config.mode===Oe.Push?r:i).push(s);return 0===i.length&&t&&r.length>0&&(r[0].config.mode=Oe.Replace),i.length>0&&(i=[i[i.length-1]]),[...i,...r]}normalize(e){const t=e.reduce(this._eventBucketsReducer.bind(this),{}),i=t[Be.Go],r=t[Be.Forward];if(i||r)return[...i||[],...r||[]];const s=t[Be.Back],o=t[Be.ExecuteTransition];return s&&!o?[s[0]]:this._prepareForwardEvents(o,Boolean(s))}}mi._backEvent={type:Be.Back},mi.\u0275fac=function(e){return new(e||mi)},mi.\u0275prov=n.\u0275\u0275defineInjectable({token:mi,factory:mi.\u0275fac,providedIn:"root"});class Lc{constructor(e,t,i,r){this._zoneService=e,this._normalizer=t,this._logger=i,this._applicationInfo=r,this._queue=[],this._state=Ti.Idle,this.navigationEventsReady$=new n.EventEmitter(!1);const s=e.register("navigation",lg.ExecutionTracking);this._stateChangeSubscription=s.onStateChange$.subscribe(this._onStateChange.bind(this))}_onStateChange(e){this._state!==e&&(this._state=e,e===Ti.Idle&&this._execQueue())}_execQueue(){if(!this._queue.length||this._state===Ti.Busy)return;const e=this._normalizer.normalize(this._queue);this._applicationInfo.isDebugEnabled&&this._logger.log(`Executing ${this._queue.length} events as ${e.length}`,this._queue,{sourceEvents:this._queue,normalizedEvents:e}),this._queue=[],this.navigationEventsReady$.next(e)}_push(e){this._queue.push(e),this._execQueue()}pushTransition(e){this._push({type:Be.ExecuteTransition,config:e})}push(e,t){this._push({type:e,delta:t})}ngOnDestroy(){this._stateChangeSubscription.unsubscribe()}}Lc.\u0275fac=function(e){return new(e||Lc)(n.\u0275\u0275inject(Zn),n.\u0275\u0275inject(mi),n.\u0275\u0275inject(wa),n.\u0275\u0275inject(Qe))},Lc.\u0275prov=n.\u0275\u0275defineInjectable({token:Lc,factory:Lc.\u0275fac,providedIn:"root"});const WD=new n.InjectionToken("ShellModuleAliasesFactory"),z4=new n.InjectionToken("DontUseChildRouting"),dS=new n.InjectionToken("CHILD_HISTORY_STATE_BUILDERS"),pS=new n.InjectionToken("ENTITY_CHILD_HISTORY_STATE_BUILDERS",{factory:()=>{const a=(0,n.inject)(dS,{optional:!0})||[],e=(0,n.inject)(pS)||[];return a.concat(e)}}),mS=new n.InjectionToken("SCHEMA_CHILD_HISTORY_STATE_BUILDERS",{factory:()=>{const a=(0,n.inject)(dS,{optional:!0})||[],e=(0,n.inject)(mS)||[];return a.concat(e)}}),YD=new n.InjectionToken("Navigation guard");class ua{constructor(e,t,i){this._locationStrategy=e,this._navigationQueue=t,this._moduleAliasesFeatureFactory=i,this._handlerChain=l.HandlerChainService.instance,this._onNavigationEventsReadySubscription=this._navigationQueue.navigationEventsReady$.pipe((0,u.switchMap)(r=>this._handleNavigationEvents(r))).subscribe(),this._moduleAliasesFeatureFactory().then(r=>this._moduleAliasesFeatureEnabled=r)}_handleNavigationEvent(e){switch(e.type){case Be.Back:this._locationStrategy.back();break;case Be.Forward:this._locationStrategy.forward();break;case Be.Go:this._locationStrategy.go(e.delta)}}_handleNavigationEvents(e){var t=this;return(0,_.Z)(function*(){const i=e.length-1;for(let r=0;r<e.length;r++){const s=e[r];if(s.type===Be.ExecuteTransition){const o=r<i;yield t._executeTransition(s.config,o)}else t._handleNavigationEvent(s)}})()}_changeHistoryStateUsing8xRouting({mode:e,state:t,pageTitle:i,location:r}){return i=i??"",e===Oe.Replace?this.replaceState(t,i,r):e===Oe.Push?this.pushState(t,i,r):void 0}_changeHistoryStateUsing7xRouting({mode:e,state:t,location:i},r){var s=this;return(0,_.Z)(function*(){const o=e===Oe.Replace?"ReplaceHistoryState":"PushHistoryState";yield s._handlerChain.process({type:"crt.7XRequest",$context:null,action:o,hash:i,stateObj:t,silent:t?.silent??r})})()}_changeHistoryState(e,t,i){var r=this;return(0,_.Z)(function*(){t?r._changeHistoryStateUsing8xRouting(e):yield r._changeHistoryStateUsing7xRouting(e,i)})()}_load7xModule({state:e,moduleConfig:t}){var i=this;return(0,_.Z)(function*(){const r=e.initConfig,o=R.isAngularRouting(e.moduleName)?"ChainModuleStub":e.moduleName,c={renderTo:"centerPanel",id:t?.moduleId??e?.moduleId,keepAlive:t?.keepAlive??!0,instanceConfig:r,replaceLastModuleInChain:e.replaceLastModuleInChain};yield i._handlerChain.process({type:"crt.7XRequest",$context:null,action:"LoadModule",moduleName:o,moduleParams:c})})()}_executeTransition(e,t){var i=this;return(0,_.Z)(function*(){const r=e.state,s=r.children?.length>0,o=R.isAngularRouting(r.moduleName)||s,c=Boolean(r.isInChain);t&&(r.silent=!0,r.moduleId=e.moduleConfig?.moduleId??r?.moduleId),yield i._changeHistoryState(e,o,c),!t&&c&&!s&&(yield i._load7xModule(e))})()}_getProcessedHash(e){return this._moduleAliasesFeatureEnabled?yn.replaceModuleNameByAlias(e):e}executeTransition(e){this._navigationQueue.pushTransition(e)}pushState(e,t,i){const r=this._getProcessedHash(i);this._locationStrategy.pushState(e,t,r)}replaceState(e,t,i){const r=this._getProcessedHash(i);this._locationStrategy.replaceState(e,t,r)}go(e){this._navigationQueue.push(Be.Go,e)}back(){this._navigationQueue.push(Be.Back)}forward(){this._navigationQueue.push(Be.Forward)}ngOnDestroy(){this._onNavigationEventsReadySubscription.unsubscribe()}}ua.\u0275fac=function(e){return new(e||ua)(n.\u0275\u0275inject(rt),n.\u0275\u0275inject(Lc),n.\u0275\u0275inject(WD))},ua.\u0275prov=n.\u0275\u0275defineInjectable({token:ua,factory:ua.\u0275fac,providedIn:"root"});class Bs{constructor(e,t,i){this._rightsService=e,this._featureService=t,this._navigationGuards=i}canActivate(e){var t=this;return(0,_.Z)(function*(){if(!(yield t._featureService.getFeatureState("EnablePageOpeningRestrictions"))||(yield t._rightsService.getCanExecuteOperation("CanBypassPageOpeningRestrictions")))return Promise.resolve(!0);for(const s of t._navigationGuards){const o=yield s.canActivate(e);if(!0!==o)return Promise.resolve(o)}return Promise.resolve(!0)})()}}Bs.\u0275fac=function(e){return new(e||Bs)(n.\u0275\u0275inject(l.RightsService),n.\u0275\u0275inject(l.FeatureService),n.\u0275\u0275inject(YD))},Bs.\u0275prov=n.\u0275\u0275defineInjectable({token:Bs,factory:Bs.\u0275fac,providedIn:"root"});class Us{constructor(e,t,i,r){var s=this;this._location=e,this._moduleAliasesFeatureFactory=t,this._historyService=i,this._navigationGuardsService=r,this._popState$=(0,u.fromEvent)(window,"popstate"),this._navigateStart$=new u.Subject,this._navigateEnd$=new u.Subject,this._prevRoute={},this._currentRoute={},this.navigateStart$=this._navigateStart$.asObservable(),this.navigateEnd$=this._navigateEnd$.asObservable(),this.historyState$=(0,u.merge)((0,u.of)(this._location.getState()),this._location.state$.pipe((0,B.z)(()=>(0,u.of)(this._location.getState()))),this._popState$.pipe((0,B.z)(()=>(0,u.of)(this._location.getState())))).pipe((0,M.w)(function(){var o=(0,_.Z)(function*(c){const d=yield s._navigationGuardsService.canActivate(s.getActiveRouteInfo());let p=c;if(!1===d)throw new Error("Navigation prevented.");if(void 0!==d&&"boolean"!=typeof d){const g=s._location.path();s._historyService.replaceState(d.state,d.title||"",d.path||g),p=d.state}return p});return function(c){return o.apply(this,arguments)}}()),(0,I.b)(o=>{if(this._moduleAliasesFeatureEnabled){const c=this._location.path();this._shouldReplaceModuleNameByAlias(c)&&this._historyService.replaceState(o,"",c)}}),(0,ee.B)()),this.location$=(0,u.merge)((0,u.of)(new URL(window.location.href)),this._location.state$.pipe((0,B.z)(()=>(0,u.of)(new URL(window.location.href)))),this._popState$.pipe((0,B.z)(()=>(0,u.of)(new URL(window.location.href))))),this.crtRoute$=this.historyState$.pipe((0,u.map)(o=>this._location.getRoute(o)),(0,I.b)(o=>{this._prevRoute=this._currentRoute,this._currentRoute=o}),(0,u.filter)(o=>!(0,J.Z)(this._prevRoute,o)),(0,u.shareReplay)({bufferSize:1,refCount:!1})),this._moduleAliasesFeatureFactory().then(o=>this._moduleAliasesFeatureEnabled=o)}_shouldReplaceModuleNameByAlias(e){return yn.replaceModuleNameByAlias(e)!==e}_filterChildrenRoute(e,t){const i=!UD(e,this._prevRoute.root),r=!function U4(a,e){return(0,J.Z)(HD(a),HD(e))}(t,this._prevRoute.state);return i||r}onNavigateStart(){this._navigateStart$.next()}onNavigateEnd(){this._navigateEnd$.next()}getNavigation$(e){return this.crtRoute$.pipe((0,u.filter)(t=>{if(e)throw new Error("Not implemented yet");return!(!(0,O.Z)(t.state?.children)||!(0,O.Z)(this._prevRoute.state?.children))||this._filterChildrenRoute(t.root,t.state)}))}getChildNavigation$(e,t){return this.crtRoute$.pipe((0,u.filter)(i=>!GD(i.children,this._prevRoute.children)),(0,u.map)(i=>zD(e,t,i.children,i.root.contextName)))}getActiveRouteInfo(){const e=this._location.getActivePathInfo(),t=this._location.getState(),i={moduleName:t&&t.moduleName||e.moduleName,schemaName:t&&t.schemaName||e.schemaName,operationType:e.operationType||t.operation,recordId:e.recordId};return t.isInChain&&(i.isInChain=!0),i}}Us.\u0275fac=function(e){return new(e||Us)(n.\u0275\u0275inject(rt),n.\u0275\u0275inject(WD),n.\u0275\u0275inject(ua),n.\u0275\u0275inject(Bs))},Us.\u0275prov=n.\u0275\u0275defineInjectable({token:Us,factory:Us.\u0275fac,providedIn:"root"});class Hm{constructor(e){this._historyService=e}pushState(e,t,i){this._historyService.pushState(e,t,i)}replaceState(e,t,i){this._historyService.replaceState(e,t,i)}go(e){this._historyService.go(e)}back(){this.go(-1)}forward(){this.go(1)}}Hm.\u0275fac=function(e){return new(e||Hm)(n.\u0275\u0275inject(ua))},Hm.\u0275prov=n.\u0275\u0275defineInjectable({token:Hm,factory:Hm.\u0275fac,providedIn:"root"});class Oc{constructor(e,t,i){this._window=e,this._locationStrategy=t,this._router=i,this._destroyed$=new u.Subject,this._initListenPopStateEvent(),this._initListenNavigationEndEvent()}_initListenNavigationEndEvent(){this.navigateEnd$=this._router.navigateEnd$.pipe((0,u.map)((0,_.Z)(function*(){yield l.HandlerChainService.instance.process({type:"crt.7XRequest",action:"RefreshCacheHash",$context:null})})),(0,u.takeUntil)(this._destroyed$))}_initListenPopStateEvent(){var e=this;this.popState$=(0,u.fromEvent)(this._window,"popstate").pipe((0,u.map)(function(){var t=(0,_.Z)(function*({state:i}){(yield e._isHistoryStateChanged(i))&&(yield l.HandlerChainService.instance.process({type:"crt.7XRequest",action:"8xHistoryStateChanged",$context:null,back:e._isBack(i)}))});return function(i){return t.apply(this,arguments)}}()),(0,u.takeUntil)(this._destroyed$))}_isHistoryStateChanged(e){var t=this;return(0,_.Z)(function*(){const i=t._locationStrategy.getActivePathInfo(),r=e?.schemaName??i.schemaName;if(!r||(yield R.isAngularSchema(r))){const p=e?.moduleName??i.moduleName;if((!p||r||R.isAngularRouting(p))&&!e?.isInChain)return!1}const c=t._locationStrategy.previousState?.moduleId===e?.moduleId;return!t._wasChildrenRouting()||!c})()}_wasChildrenRouting(){return this._locationStrategy.previousState?.children?.length>0}_isBack(e){return e?.historyIndex<this._locationStrategy.previousState?.historyIndex}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}Oc.\u0275fac=function(e){return new(e||Oc)(n.\u0275\u0275inject(se),n.\u0275\u0275inject(rt),n.\u0275\u0275inject(Us))},Oc.\u0275prov=n.\u0275\u0275defineInjectable({token:Oc,factory:Oc.\u0275fac,providedIn:"root"});class da{constructor(e){this.injector=e,this.locationStrategy=e.get(rt),this.dontUseChildRouting=(0,n.inject)(z4,{optional:!0}),this._childHistoryStateBuilders=this.getChildHistoryStateBuilders()||[]}_getChildHistoryStates(e){return Promise.all(this._childHistoryStateBuilders.map(t=>t.getState(e)))}_getPrevChildHistoryStates(e){return e}_getState(e,t){var i=this;return(0,_.Z)(function*(){if(yield i.dontUseChildRouting)return i.getRootState(e,t);let o,s=yield i._getChildHistoryStates(t);s=s.filter(p=>!(0,O.Z)(p)),o=(0,O.Z)(s)?i.getRootState(e,t):yield i._applyChildrenHistoryStates(e,s);const c=i._getPrevChildHistoryStates(e.prevState);return!(0,O.Z)(c?.children)&&(0,O.Z)(s)&&(o.keepAlive=!0),o})()}_applyChildrenHistoryStates(e,t){const i=(0,q.Z)(e.prevState)??{},r=ZD(i);return this._setChildrenState(r,t),i}_setChildrenState(e,t){e.children=t}_getLocation(e,t){return qD.getLocationByState(e,t)}_getSchemaUIType(e){return(0,_.Z)(function*(){if(e.schemaName)return(yield R.isAngularSchema(e.schemaName))?Vc_FreedomUI:Vc_ClassicUI})()}getChildHistoryStateBuilders(){return(0,n.inject)(dS,{optional:!0})}getModelInitConfigs(e){return[]}getSchemaName(e,t){return Promise.resolve("")}getStateModuleId(e){return""}getModuleName(e,t){const i=e.schemaUIType===Vc_ClassicUI?t.state?.moduleName:"";return Promise.resolve(i)}getRootState(e,t){const i={...(0,q.Z)(t?.state??{})};if(i.isInChain=e.isInChain,i.moduleName=e.moduleName,e.isInChain||(i.moduleId=this.getStateModuleId(e)),e.schemaUIType===Vc_ClassicUI){const r=e.modelInitConfigs?.[0];i.operation=r?.action,i.primaryColumnValue=r?.recordId,i.valuePairs=R.getValuePairs(r?.defaultValues),i.isSeparateMode=!0,i.isInChain&&(i.schemaName=e?.schemaName)}else i.schemaName=e.schemaName,i.modelInitConfigs=e.modelInitConfigs;return i}getModuleConfig({isInChain:e,moduleName:t,prevState:i}){return e?{moduleId:(i?.moduleId??"")+R.generateChainModuleId(t)}:null}getCommonTransitionInfo(e){var t=this;return(0,_.Z)(function*(){const i=t.locationStrategy.getState(),r={};return r.schemaName=yield t.getSchemaName(r,e),r.schemaUIType=yield t._getSchemaUIType(r),r.navigationState=e.state,r.isInChain=r.navigationState?.isInChain??i?.isInChain,r.modelInitConfigs=t.getModelInitConfigs(e),r.prevState=i,r.prevLocation=t.locationStrategy.path(),r.moduleName=yield t.getModuleName(r,e),r})()}getTransitionConfig(e){var t=this;return(0,_.Z)(function*(){const i=yield t.getCommonTransitionInfo(e);if(!i)return null;const r=yield t._getState(i,e),s=t._getLocation(i,r),o=t.getModuleConfig(i);return{mode:e.mode,location:s,state:r,pageTitle:"",moduleConfig:o}})()}}da.\u0275fac=function(e){return new(e||da)(n.\u0275\u0275inject(n.Injector))},da.\u0275prov=n.\u0275\u0275defineInjectable({token:da,factory:da.\u0275fac});class hi extends da{getChildHistoryStateBuilders(){return(0,n.inject)(pS)}getSchemaName(e,t){return(0,_.Z)(function*(){const i=yield R.getPageForActionAsync(t.options);return e.page=i,R.getCardSchemaName(i)||t.options.entityPageName})()}getModuleName(e,t){var i=()=>super.getModuleName,r=this;return(0,_.Z)(function*(){const s=yield i().call(r,e,t);if(s)return s;const o=e.page?.cardModuleName;if(o)return o;const{uiTypePriority:c,entityName:d}=t.options;return R.getEditPageModuleName(d,c)||e.schemaName&&R.getModuleName(e.schemaName)})()}getCommonTransitionInfo(e){var t=()=>super.getCommonTransitionInfo,i=this;return(0,_.Z)(function*(){const r=yield t().call(i,e);return r.moduleName?(r?.schemaUIType===Vc_ClassicUI&&e.options.action!==l.ModelInPageAction.Edit&&(r.isInChain=!0),r):null})()}getModelInitConfigs(e){const{action:t,defaultValues:i,recordId:r}=e.options;if(!t)return null;const s=i?.filter(c=>c.value),o={action:t};return t===l.ModelInPageAction.Add?o.defaultValues=s:o.recordId=R.getRecordLookupValue(r),[o]}getStateModuleId(e){const t=e.modelInitConfigs?.[0];return[e.moduleName,t?.recordId,e.schemaName].filter(Boolean).join("_")}}hi.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(hi)))(t||hi)}}(),hi.\u0275prov=n.\u0275\u0275defineInjectable({token:hi,factory:hi.\u0275fac});class pa extends da{getModuleConfig({navigationState:e}){return{keepAlive:e?.keepAlive??!0}}getRootState(e,t){const i=t.options,r={...t?.state??{}};return r.moduleId=i.moduleId,r.moduleName=i.moduleName,r.parameters=i.parameters,r.initConfig=i.initConfig,r.silent??(r.silent=!1),r}getModuleName(e,t){const i=e.isInChain?e.prevLocation:t.options?.moduleName;return Promise.resolve(i)}}pa.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(pa)))(t||pa)}}(),pa.\u0275prov=n.\u0275\u0275defineInjectable({token:pa,factory:pa.\u0275fac});class Gs extends $D{enrichState(e,t){e.target=jD_Modal,e.schemaName=t?.options?.schemaName;const{modelInitConfigs:i,parameters:r}=t.options;return r&&(e.parameters=r),i&&(e.modelInitConfigs=i),Promise.resolve()}getState(e){var t=()=>super.getState,i=this;return(0,_.Z)(function*(){const r=e?.options?.schemaName;return(0,O.Z)(r)||!(yield R.isMiniPage(r))?null:t().call(i,e)})()}}Gs.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Gs)))(t||Gs)}}(),Gs.\u0275prov=n.\u0275\u0275defineInjectable({token:Gs,factory:Gs.\u0275fac});class ma extends da{_getTransitionConfigWithoutSchemaName(e){const t={...(0,q.Z)(e?.state??{})};return this.locationStrategy.getState()?.isInChain&&(t.isInChain??(t.isInChain=!0)),t.moduleId=`${t.moduleName}_`,{mode:e.mode,location:t.moduleName,state:t}}getChildHistoryStateBuilders(){return(0,n.inject)(mS)}getSchemaName(e,t){const{schemaName:i}=t.options;return Promise.resolve(i)}getModuleName(e,t){var i=()=>super.getModuleName,r=this;return(0,_.Z)(function*(){return(yield i().call(r,e,t))||R.getModuleName(e.schemaName)})()}getRootState(e,t){const i=super.getRootState(e,t),{parameters:r}=t.options;return e.schemaUIType===Vc_FreedomUI&&r&&(i.parameters=r),i}getModelInitConfigs(e){return e.options.modelInitConfigs}getStateModuleId(e){return[e.moduleName,e.schemaName].filter(Boolean).join("_")}getTransitionConfig(e){if(!e.options.schemaName){const t=this._getTransitionConfigWithoutSchemaName(e);return Promise.resolve(t)}return super.getTransitionConfig(e)}}ma.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(ma)))(t||ma)}}(),ma.\u0275prov=n.\u0275\u0275defineInjectable({token:ma,factory:ma.\u0275fac});class jc{}jc.\u0275fac=function(e){return new(e||jc)},jc.\u0275mod=n.\u0275\u0275defineNgModule({type:jc}),jc.\u0275inj=n.\u0275\u0275defineInjector({providers:[ma,{provide:mS,useClass:Gs,multi:!0}]});class ha{constructor(){this._entityTransitionConfigBuilder=(0,n.inject)(hi),this._schemaTransitionConfigBuilder=(0,n.inject)(ma),this._moduleTransitionConfigBuilder=(0,n.inject)(pa),this._navigationEventNotifier=(0,n.inject)(Oc),this._router=(0,n.inject)(Us),this._historyService=(0,n.inject)(ua),this._translateService=(0,n.inject)(w.sK),this._entitySchemaService=(0,n.inject)(Ke),this.locationStrategy=(0,n.inject)(rt),this.handlerChain=l.HandlerChainService.instance,this._navigationEndEventSubscription=this.subscribeForNavigationEndEvent(),this._navigationPopStateEventSubscription=this.subscribeForNavigationPopStateEvent()}_translate(e){return this._translateService.instant(`Navigation.${e}`)}_getEntityNavigationConfig(e){const t={mode:e?.mode??Oe.Push,state:e?.state??{},options:e.options};return this._entityTransitionConfigBuilder.getTransitionConfig(t)}_geSchemaNavigationConfig(e){const t={mode:e?.mode??Oe.Push,state:e?.state??{},options:e.options};return this._schemaTransitionConfigBuilder.getTransitionConfig(t)}_getModuleNavigationConfig(e){const t={mode:e?.mode??Oe.Push,state:e?.state??{},options:e.options};return this._moduleTransitionConfigBuilder.getTransitionConfig(t)}_showEntityNavigationError(e){console.error(this._translate("DoesntHaveAddPageMessage"));const t=e.options.entityName;this._entitySchemaService.getEntitySchemaByName(t).pipe((0,h.U)(i=>i.entitySchema?.uId),(0,u.take)(1)).subscribe(i=>{if(i){const r=this._translate("GoToEntityDesignerMessage"),c=`${je()}ClientApp/#/EntitySchemaDesigner/${i}?callbackAction=RelatedPage`,d=Z.Ld.format(r,c);console.info(d)}})}executeTransition(e){return this._historyService.executeTransition(e),Promise.resolve()}subscribeForNavigationEndEvent(){return this._navigationEventNotifier.navigateEnd$.subscribe()}subscribeForNavigationPopStateEvent(){return this._navigationEventNotifier.popState$.subscribe()}back(){this._historyService.back()}getState(){return this.locationStrategy.getState()}navigate(e){var t=this;return(0,_.Z)(function*(){let i;switch(t._router.onNavigateStart(),e.options.type){case Wt.Schema:i=yield t._geSchemaNavigationConfig(e);break;case Wt.Entity:if(i=yield t._getEntityNavigationConfig(e),!i)return t._router.onNavigateEnd(),void t._showEntityNavigationError(e);break;case Wt.Module:i=yield t._getModuleNavigationConfig(e)}yield t.executeTransition(i)})()}getActiveRouteInfo(){return this._router.getActiveRouteInfo()}ngOnDestroy(){this._navigationPopStateEventSubscription.unsubscribe(),this._navigationEndEventSubscription.unsubscribe()}}ha.\u0275fac=function(e){return new(e||ha)},ha.\u0275prov=n.\u0275\u0275defineInjectable({token:ha,factory:ha.\u0275fac,providedIn:"root"});class zs extends $D{_getMiniPageSchemaName(e){return(0,_.Z)(function*(){const t=yield R.getPageForActionAsync(e.options),i="MiniPage"===t?.schemaGroup?t:null;return R.getCardSchemaName(i)})()}_getRecordId({options:e}){return"string"==typeof e.recordId?e.recordId:e.recordId?.value}enrichState(e,t){var i=this;return(0,_.Z)(function*(){e.schemaName=yield i._getMiniPageSchemaName(t);const{action:r,messageTags:s}=t.options,o={action:r};r===l.ModelInPageAction.Add?o.defaultValues=t.options?.defaultValues?.filter(c=>c.value):o.recordId=i._getRecordId(t),e.modelInitConfigs=[o],e.messageTags=s,e.target=jD_Modal})()}getState(e){var t=()=>super.getState,i=this;return(0,_.Z)(function*(){return(yield i._getMiniPageSchemaName(e))?t().call(i,e):null})()}}zs.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(zs)))(t||zs)}}(),zs.\u0275prov=n.\u0275\u0275defineInjectable({token:zs,factory:zs.\u0275fac});class Bc{}Bc.\u0275fac=function(e){return new(e||Bc)},Bc.\u0275mod=n.\u0275\u0275defineNgModule({type:Bc}),Bc.\u0275inj=n.\u0275\u0275defineInjector({providers:[hi,{provide:pS,useClass:zs,multi:!0}]});class Uc{}Uc.\u0275fac=function(e){return new(e||Uc)},Uc.\u0275mod=n.\u0275\u0275defineNgModule({type:Uc}),Uc.\u0275inj=n.\u0275\u0275defineInjector({providers:[pa]});class Gc{_getDefaultValues(e){return e&&e.map(t=>{const i=(0,Dt.Z)(t.value)||(0,Dt.Z)(t.displayValue)?t.value:t;return{attributeName:t.name,value:i}})}generate(e){let t=e?.modelInitConfigs;if(!t){const i=e?.operation||e?.operationType;if(i){const r=this._getDefaultValues(e.valuePairs);t=[{action:i,recordId:e.primaryColumnValue||e.recordId,defaultValues:r}]}}return t}}Gc.\u0275fac=function(e){return new(e||Gc)},Gc.\u0275prov=n.\u0275\u0275defineInjectable({token:Gc,factory:Gc.\u0275fac});class Zm{constructor(e){this._locationStrategy=e}shouldAppendState(e){return this._locationStrategy.getActivePathInfo().schemaName===e}appendState(e){const t=this._locationStrategy.getActivePathInfo(),i=this._locationStrategy.path().split("/");e.moduleName??(e.moduleName=t.moduleName),e.schemaName??(e.schemaName=t.schemaName),e.operationType??(e.operationType=t.operationType);let r=3;if(i.length>4&&"add"!==e?.operationType&&(r=4,i[3]&&(e.recordId=t.recordId)),i.length>4){const s=(i.length-r)/2;e.valuePairs=[];for(let o=0;o<s;o++){const c=r+2*o;e.valuePairs[o]={name:i[c],value:i[c+1]}}}else i[3]&&(e.recordId=t.recordId)}}Zm.\u0275fac=function(e){return new(e||Zm)(n.\u0275\u0275inject(rt))},Zm.\u0275prov=n.\u0275\u0275defineInjectable({token:Zm,factory:Zm.\u0275fac});class Hs{constructor(e,t,i){this._location=e,this._entityTransitionConfigBuilder=t,this._featureService=i}_getRecordUrl(e){var t=this;return(0,_.Z)(function*(){const i={options:{type:Wt.Entity,action:l.ModelInPageAction.Edit,...e}},r={mode:Oe.Push,state:{},options:i.options},o=`#${(yield t._entityTransitionConfigBuilder.getTransitionConfig(r)).location}`;return`${t._location.getBaseHref()}/${o}`})()}getUrl(e){var t=this;return(0,_.Z)(function*(){return(yield t._featureService.getFeatureState("DisableEntityRecordUrlCreation"))?yield t._getRecordUrl(e):function aw(a,e){return`${l_()}/Navigation/Navigation.aspx?schemaName=${a}&recordId=${e}`}(e.entityName,e.recordId)})()}}Hs.\u0275fac=function(e){return new(e||Hs)(n.\u0275\u0275inject(rt),n.\u0275\u0275inject(hi),n.\u0275\u0275inject(l.FeatureService))},Hs.\u0275prov=n.\u0275\u0275defineInjectable({token:Hs,factory:Hs.\u0275fac});class zc{get entityStructure(){return Object.values(window.Terrasoft.configuration.EntityStructure)}get moduleStructure(){return Object.values(window.Terrasoft.configuration.ModuleStructure)}get currentUserWorkplaces(){return window.Terrasoft.configuration.WorkplacesStructure?.CurrentUserWorkplaces}_isSectionExistsInWorkplaces(e){return this.currentUserWorkplaces?.length<1?this.moduleStructure.some(t=>t.sectionSchema===e):this.currentUserWorkplaces.some(t=>t.modules.some(i=>i.sectionName===e))}_isPageAccessible(e){return this.entityStructure.some(t=>t.pages.some(i=>i.cardSchema===e&&(!0===i.isDefault||Object.values(i.actions).some(r=>!0===r))&&i.role!==this._getPageExcludedRole()))}_getPageExcludedRole(){return this._userInfo.isSSP?Yo:Pd}_is7xPageAccessible(e){if(!this._pageExistsInModuleStructure(e)&&!this._userInfo.isSSP)return!0;const t=this.moduleStructure.filter(r=>r.cardSchema===e||r.pages?.some(s=>s.cardSchema===e)).map(r=>r.moduleId);return this.currentUserWorkplaces.flatMap(r=>r.modules).some(r=>t.includes(r.moduleId))}_getRedirectState(){return{state:{moduleName:"Desktop"},path:"Desktop"}}_pageExistsInModuleStructure(e){return this.moduleStructure.some(t=>t.cardSchema===e)}_getRouteTargetType(e){if(e.isInChain)return"ModuleInChain";switch(e.moduleName){case"CardSchemaViewModule":return"FreedomPage";case"CardModuleV2":return"7xPage";case"SectionSchemaViewModule":return"FreedomSection";case"SectionModuleV2":return e.operationType?"7xPage":"7xSection";default:return}}constructor(e){this._injector=e,this._userInfo=this._injector.get(Q),this._clientLogService=this._injector.get(ja)}canActivate(e){let t,i;if(this._injector.get(vb)?.includes(e.schemaName))return Promise.resolve(!0);switch(this._getRouteTargetType(e)){case"FreedomSection":case"7xSection":i=Ro.SectionAccess,t=!e.schemaName||this._isSectionExistsInWorkplaces(e.schemaName);break;case"FreedomPage":i=Ro.PageAccess,t=this._isPageAccessible(e.schemaName);break;case"7xPage":i=Ro.PageAccess,t=this._is7xPageAccessible(e.schemaName);break;default:t=!0}return t?Promise.resolve(!0):(console.error((new Fu).message),this._clientLogService.logError(new Fu(e.schemaName,this._userInfo.contactName,i)).subscribe(),Promise.resolve(this._getRedirectState()))}}zc.\u0275fac=function(e){return new(e||zc)(n.\u0275\u0275inject(n.Injector))},zc.\u0275prov=n.\u0275\u0275defineInjectable({token:zc,factory:zc.\u0275fac});class Hc extends Ba{constructor(e){super(e),this.injector=e,this._navigationService=this.injector.get(ha)}_bypassPageOpeningRestrictions(){return this._navigationService.getState().bypassPageOpeningRestrictions}checkAccess(e){var t=()=>super.checkAccess,i=this;return(0,_.Z)(function*(){e&&!i._bypassPageOpeningRestrictions()&&(yield t().call(i,e))})()}}Hc.\u0275fac=function(e){return new(e||Hc)(n.\u0275\u0275inject(n.Injector))},Hc.\u0275prov=n.\u0275\u0275defineInjectable({token:Hc,factory:Hc.\u0275fac,providedIn:"root"});const H4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),Z4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\u041d\u044f\u043c\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0437\u0430 \u043d\u043e\u0432 \u0438\u043b\u0438 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430\u0449 \u0437\u0430\u043f\u0438\u0441. \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0438\u044f\u0442 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\u0442\u0435 \u043d\u0430 \u0431\u0443\u0442\u043e\u043d\u0438\u0442\u0435 \u0432 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u0438\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043d\u0430 Freedom","GoToEntityDesignerMessage":"\u0417\u0430 \u0434\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0438, \u043e\u0442\u0438\u0434\u0435\u0442\u0435 \u043d\u0430 URL: {0}"}}'),q4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),$4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Es gibt keine Seite f\xfcr neue oder bestehende Aufzeichnungen. Systemadministrator muss die Einstellungen der Freiheits-Oberfl\xe4che \xfcberpr\xfcfen","GoToEntityDesignerMessage":"Um Seiten einzurichten, gehen Sie zu URL: {0}"}}'),W4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),Y4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"No hay ninguna p\xe1gina para el registro nuevo o existente. El administrador del sistema debe comprobar la configuraci\xf3n del bot\xf3n en la interfaz de usuario de la Freedom","GoToEntityDesignerMessage":"Para configurar p\xe1ginas vaya a la URL: {0}"}}'),Q4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Il n\'y a pas de page pour les enregistrements nouveaux ou existants. L\'administrateur du syst\xe8me doit v\xe9rifier les param\xe8tres du bouton dans l\'interface Freedom UI","GoToEntityDesignerMessage":"Pour configurer les pages, allez \xe0 l\'URL : {0}"}}'),J4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),K4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Ne postoji stranica za nove ili postoje\u0107e zapise. Sistem administrator mora provjeriti postavke tipki u Freedom UI","GoToEntityDesignerMessage":"Za postavljanje stranica idite na URL: {0}"}}'),X4=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Nincs oldal \xfaj vagy megl\xe9v\u0151 rekordhoz. A rendszergazd\xe1nak ellen\u0151riznie kell a gombbe\xe1ll\xedt\xe1sokat a Freedom UI-ban","GoToEntityDesignerMessage":"Az oldalak be\xe1ll\xedt\xe1s\xe1hoz l\xe9pjen a k\xf6vetkez\u0151 URL-re: {0}"}}'),eV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),tV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Non c\'\xe8 nessuna pagina per il record nuovo o esistente. L\'amministratore di sistema deve controllare le impostazioni del pulsante nella Freedom UI","GoToEntityDesignerMessage":"Per impostare le pagine vai all\'URL: {0}"}}'),nV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\u65b0\u898f\u307e\u305f\u306f\u65e2\u5b58\u306e\u30ec\u30b3\u30fc\u30c9\u306e\u30da\u30fc\u30b8\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u306fFreedom UI\u306e\u30dc\u30bf\u30f3\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002","GoToEntityDesignerMessage":"\u30da\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u306b\u306fURL\uff1a {0} \u306b\u9077\u79fb\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}}'),iV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\uc0c8 \ub808\ucf54\ub4dc \ub610\ub294 \uae30\uc874 \ub808\ucf54\ub4dc\uc5d0 \ub300\ud55c \ud398\uc774\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790\ub294 Freedom UI\uc5d0\uc11c \ubc84\ud2bc \uc124\uc815\uc744 \ud655\uc778\ud574\uc57c \ud569\ub2c8\ub2e4","GoToEntityDesignerMessage":"\ud398\uc774\uc9c0\ub97c \uc124\uc815\ud558\ub824\uba74 URL\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4. {0}"}}'),aV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),rV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),sV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),oV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"N\xe3o h\xe1 nenhuma p\xe1gina para os registros novos ou existentes. O administrador do sistema dever\xe1 verificar as configura\xe7\xf5es do bot\xe3o na UI Freedom","GoToEntityDesignerMessage":"Para configurar as p\xe1ginas ir para a URL: {0}"}}'),lV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),cV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Nu exist\u0103 nicio pagin\u0103 pentru \xeenregistrarea nou\u0103 sau existent\u0103. Administratorul de sistem trebuie s\u0103 verifice set\u0103rile butonului din Freedom UI","GoToEntityDesignerMessage":"Pentru configurarea paginilor merge\u021bi la URL: {0}"}}'),uV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\u0414\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u043d\u0435\u0442 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043a\u043d\u043e\u043f\u043a\u0438 \u0432 \u0434\u0438\u0437\u0430\u0439\u043d\u0435\u0440\u0435 Freedom UI","GoToEntityDesignerMessage":"\u0414\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435: {0}"}}'),dV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"Nuk ka faqe p\xebr t\xeb dh\xebna t\xeb reja ose ekzistuese. Administratori i sistemit duhet t\xeb kontrolloj\xeb butonin e konfigurimit n\xeb Freedom Ul","GoToEntityDesignerMessage":"P\xebr t\xeb konfiguruar faqet shko te URL:{0}"}}'),pV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),mV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),hV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),gV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\u041d\u0435\u043c\u0430\u0454 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0430\u0431\u043e \u0456\u0441\u043d\u0443\u044e\u0447\u043e\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0443. \u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0438\u0439 \u0430\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u043c\u0430\u0454 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u043a\u043d\u043e\u043f\u043e\u043a \u0443 Freedom UI","GoToEntityDesignerMessage":"\u0414\u043b\u044f \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0441\u0442\u043e\u0440\u0456\u043d\u043e\u043a \u043f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u0434\u043e URL: {0}"}}'),fV=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"There is no page for new or existing record. System administrator must check the button settings in the Freedom UI","GoToEntityDesignerMessage":"To set up pages go to URL: {0}"}}'),_V=JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\u6ca1\u6709\u65b0\u8bb0\u5f55\u6216\u73b0\u6709\u8bb0\u5f55\u7684\u9875\u9762\u3002\u7cfb\u7edf\u7ba1\u7406\u5458\u5fc5\u987b\u68c0\u67e5\u81ea\u7531\u754c\u9762\u4e2d\u7684\u6309\u94ae\u8bbe\u7f6e","GoToEntityDesignerMessage":"\u8981\u8bbe\u7f6e\u9875\u9762, \u8bf7\u8bbf\u95eeURL: {0}"}}'),yV={"zh-TW":JSON.parse('{"Navigation":{"DoesntHaveAddPageMessage":"\u6ca1\u6709\u65b0\u8bb0\u5f55\u6216\u73b0\u6709\u8bb0\u5f55\u7684\u9875\u9762\u3002\u7cfb\u7edf\u7ba1\u7406\u5458\u5fc5\u987b\u68c0\u67e5\u81ea\u7531\u754c\u9762\u4e2d\u7684\u6309\u94ae\u8bbe\u7f6e","GoToEntityDesignerMessage":"\u8981\u8bbe\u7f6e\u9875\u9762, \u8bf7\u8bbf\u95eeURL: {0}"}}'),"hr-HR":K4,"lv-LV":aV,"hu-HU":X4,"zh-CN":_V,"vi-VN":fV,"uk-UA":gV,"tr-TR":hV,"th-TH":mV,"sv-SE":pV,"sq-AL":dV,"ro-RO":cV,"pt-PT":lV,"pt-BR":oV,"pl-PL":sV,"nl-NL":rV,"ko-KR":iV,"ja-JP":nV,"it-IT":tV,"id-ID":eV,"he-IL":J4,"fr-FR":Q4,"es-ES":Y4,"de-DE":$4,"cs-CZ":q4,"bg-BG":Z4,"ar-SA":H4,"en-US":W4,"ru-RU":uV};let Zs=class{};Zs.\u0275fac=function(e){return new(e||Zs)},Zs.\u0275mod=n.\u0275\u0275defineNgModule({type:Zs}),Zs.\u0275inj=n.\u0275\u0275defineInjector({providers:[Gc,Hs,{provide:rt,useClass:Fc},Bs,{provide:YD,useClass:zc,multi:!0},{provide:Ba,useClass:Hc},wa,l.RightsService],imports:[Rt.forRoot({i18n:yV}),Bc,jc,Uc]}),Zs=(0,m.gn)([(0,l.CrtModule)({requestHandlers:[]})],Zs);let QD=class extends l.BaseRequestHandler{constructor(e,t){super(),this._navigationService=e,this._recordUrlCreator=t}_getEntityPageUITypePriority(e){var t=this;return(0,_.Z)(function*(){const i=t._navigationService.getActiveRouteInfo().schemaName;return i&&(yield R.isAngularListPage(i))&&R.getSectionEntityName(i)===e?pi.PreferFreedomUI:pi.Auto})()}_openEntityPage(e,t){var i=this;return(0,_.Z)(function*(){const r=t,s=yield i._getEntityPageUITypePriority(r?.entityName);yield i._navigationService.navigate({mode:r.replaceHistoryState?Oe.Replace:Oe.Push,options:{type:Wt.Entity,action:e,uiTypePriority:s,...r}})})()}_openDuplicatesPage(e){var t=this;return(0,_.Z)(function*(){yield t._navigationService.navigate({mode:Oe.Push,state:{duplicatesSchemaName:e.entityName},options:{type:Wt.Schema,schemaName:e.schemaName}})})()}_getEntityPageUrl(e){var t=this;return(0,_.Z)(function*(){const i=e,r=yield t._getEntityPageUITypePriority(i?.entityName);return t._recordUrlCreator.getUrl({uiTypePriority:r,...i})})()}handle(e){var t=this;return(0,_.Z)(function*(){const i=e?.payload;switch(e.action){case"BackHistoryState":t._navigationService.back();break;case"AddRecord":yield t._openEntityPage(l.ModelInPageAction.Add,i);break;case"EditRecord":yield t._openEntityPage(l.ModelInPageAction.Edit,i);break;case"CopyRecord":yield t._openEntityPage(l.ModelInPageAction.Copy,i);break;case"OpenDuplicatesPage":yield t._openDuplicatesPage(i);break;case"OpenPage":yield t._navigationService.navigate({mode:Oe.Push,options:{type:Wt.Schema,...i}});break;case"HasEntityEditPage":return R.hasEntityEditPage(i);case"LoadRightsModule":yield t._navigationService.navigate({mode:Oe.Push,options:{type:Wt.Module,initConfig:{moduleConfig:i},moduleId:Mh.generateUnique("Rights_module"),moduleName:"Rights"},state:{isInChain:!0,silent:!0,_internalNotSilentIn8x:!0}});break;case"GetRecordUrl":return t._getEntityPageUrl(i)}return t.next?.handle(e)})()}};QD=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.7XRequest",type:"crt.Crt7XRequestHandler"}),(0,m.w6)("design:paramtypes",[ha,Hs])],QD);class CV extends l.BaseRequestHandler{constructor(e){super(),this._rightsService=e.get(mt),this._navigationService=e.get(ha)}_redirectToMainApplication(){var e=this;return(0,_.Z)(function*(){yield e._navigationService.navigate({mode:Oe.Push,options:{type:Wt.Schema},state:{moduleName:"Desktop"}})})()}getOperation(){return""}handle(e){var t=this;return(0,_.Z)(function*(){return(yield(0,u.firstValueFrom)(t._rightsService.getCanExecuteOperation(t.getOperation())))?t.next?.handle(e):t._redirectToMainApplication()})()}}let hS=class extends CV{constructor(e){super(e)}getOperation(){return"CanManageChats"}};hS=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.ChatSettingsPageInitHandler",requestType:"crt.HandleViewModelInitRequest",scopes:["ChatSettingsPage"]}),(0,m.w6)("design:paramtypes",[n.Injector])],hS);let gS=class extends l.BaseRequestHandler{constructor(e,t,i,r){super(),this._chatService=e,this._maskService=t,this._messageDialogProvider=i,this._translateService=r,this._channelsListName="ChannelsList",this._activeChatsValidationErrorMsgCode="ChatSettings.Channel.ActiveChatsValidationError"}_validateForActiveChats(e){var t=this;return(0,_.Z)(function*(){yield t._maskService.showBodyMask();const i=yield(0,u.lastValueFrom)(t._chatService.hasUncompletedChats(e));if(yield t._maskService.hideBodyMask(),i){const r=t._translateService.instant(t._activeChatsValidationErrorMsgCode);return t._messageDialogProvider.open({data:{message:r,actions:[Tc.OK]}}),!1}return!0})()}_isValid(e){return this._validateForActiveChats(e)}handle(e){var t=this;return(0,_.Z)(function*(){if(e.itemsAttributeName===t._channelsListName){const i=e.recordId;if(!(yield t._isValid(i)))return}t.next?.handle(e)})()}};gS=(0,m.gn)([(0,l.CrtRequestHandler)({requestType:"crt.DeleteRecordRequest",type:"crt.ChanelDeleteRecordHandler",scopes:["ChatSettingsPage"]}),(0,m.w6)("design:paramtypes",[St,l.MaskService,uf,w.sK])],gS);let fS=class extends l.BaseRequestHandler{_setFacebookPageLink(e,t,i){const r=`<a target='_blank' href='https://facebook.com/${t}'>${e}</a>`;i[this._facebookPageLinkAttrName]=r}constructor(e){super(),this._facebookSettingsService=e,this._facebookPageLinkAttrName="FacebookLink"}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context,r=i.getViewModelAttributePaths(yield i.getPrimaryModelName(),"Source")[0],s=yield i[r],o=yield i[t._facebookPageLinkAttrName];if(s&&!o&&!t._pageRequested){t._pageRequested=!0;const c=i.getViewModelAttributePaths(yield i.getPrimaryModelName(),"Id")[0],d=yield i[c];t._getPageName$=t._facebookSettingsService.getPageName(s,d).subscribe(p=>{t._setFacebookPageLink(p,s,i),t._getPageName$.unsubscribe()})}return yield t.next?.handle(e)})()}};fS=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.FacebookChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["FBMessengerChannel_EditPage"]}),(0,m.w6)("design:paramtypes",[di])],fS);let _S=class extends l.BaseRequestHandler{constructor(){super(...arguments),this._whatsappAttrName="WhatsAppLink"}_setWhatsAppLink(e,t){const i=`<a target='_blank' href='https://wa.me/${e}'>${e}</a>`;t[this._whatsappAttrName]=i}handle(e){var t=this;return(0,_.Z)(function*(){const i=e.$context,r=i.getViewModelAttributePaths(yield i.getPrimaryModelName(),"Source")[0],s=yield i[r],o=yield i[t._whatsappAttrName];return s&&!o&&t._setWhatsAppLink(s,i),yield t.next?.handle(e)})()}};_S=(0,m.gn)([(0,l.CrtRequestHandler)({type:"crt.WhatsAppChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["WhatsAppChannel_EditPage"]})],_S);let qs=class{};function SV(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-form-field",1)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"input",2),n.\u0275\u0275listener("keydown.enter",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onEnterKeyDown(r))}),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",t.styles)("ngClass",t.classes),n.\u0275\u0275attribute("id",t.id),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.caption),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControl",t.value)("value",null==t.value?null:t.value.value)}}qs.\u0275fac=function(e){return new(e||qs)},qs.\u0275mod=n.\u0275\u0275defineNgModule({type:qs}),qs.\u0275inj=n.\u0275\u0275defineInjector({providers:[oa,Ns,St,Rs,Vs,di,ks,Jf,{provide:ca,useClass:Nc}],imports:[y.CommonModule,Pc,b.u5,D.HttpClientModule,w.aw,U.yu,E.yj]}),qs=(0,m.gn)([(0,l.CrtModule)({requestHandlers:[rS,lS,cS,uS,oS,gS,fS,_S,hS]})],qs);let Yt=class extends Te{constructor(){super(...arguments),this.enterKeyDown=new n.EventEmitter}onEnterKeyDown(e){this.enterKeyDown.next(e)}};Yt.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Yt)))(t||Yt)}}(),Yt.\u0275cmp=n.\u0275\u0275defineComponent({type:Yt,selectors:[["ts-input"]],inputs:{caption:"caption",value:"value"},outputs:{enterKeyDown:"enterKeyDown"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","full-width ts-input","appearance","fill",3,"ngStyle","ngClass",4,"ngIf"],["appearance","fill",1,"full-width","ts-input",3,"ngStyle","ngClass"],["matInput","","autocomplete","off",3,"formControl","value","keydown.enter"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,SV,4,6,"mat-form-field",0),2&e&&n.\u0275\u0275property("ngIf",t.value)},dependencies:[y.NgClass,y.NgIf,y.NgStyle,b.Fj,b.JJ,N.v_,N.$V,z.k0,b.oH],encapsulation:2}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",String)],Yt.prototype,"caption",void 0),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",b.NI)],Yt.prototype,"value",void 0),(0,m.gn)([(0,l.CrtOutput)(),(0,m.w6)("design:type",Object)],Yt.prototype,"enterKeyDown",void 0),Yt=(0,m.gn)([(0,l.CrtViewElement)({type:"crt.DeprecatedInput",formControlConfig:{relatesTo:"value"},reuseStrategy:l.ViewElementReuseStrategy.Reuse})],Yt);Fe.None,Fe.Small,Fe.Medium,Fe.Large;const bV=["default-file-icon","file-excel","file-image","file-pdf","file-powerpoint","file-word"];class Zc{}Zc.\u0275fac=function(e){return new(e||Zc)},Zc.\u0275mod=n.\u0275\u0275defineNgModule({type:Zc}),Zc.\u0275inj=n.\u0275\u0275defineInjector({providers:[ca],imports:[Vt,wi,sn,y.CommonModule,pm._t,b.u5,ce.D8,U.yu,Se.Zh,E.yj,$a.t,Pn.To,A.Ps,z.x4,qn.jT,et.uw,b_.Wd,Cs.JX,We.U5,He.Nn,Ze.AA,ke.dp,N.wp,Ho,w.aw]});class st{get invalid(){return this.group.get(this.field.name).invalid}get required(){return this.field.validations&&this.field.validations.some(e=>"required"===e.name)}get error(){const{validations:e,asyncValidations:t}=this.field;let i="";return[e,t].some(r=>{if(r)for(const s of r)if(this.group.get(this.field.name).hasError(s.name))return i=s.message,!0}),i}ngOnInit(){void 0!==this.field.value&&this.group.get(this.field.name)&&this.group.get(this.field.name).setValue(this.field.value)}}st.\u0275fac=function(e){return new(e||st)},st.\u0275dir=n.\u0275\u0275defineDirective({type:st});class qc extends st{}function vV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}qc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(qc)))(t||qc)}}(),qc.\u0275cmp=n.\u0275\u0275defineComponent({type:qc,selectors:[["ts-button-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"full-width","ts-button-control",3,"formGroup"],["type","submit","mat-raised-button","","color","primary"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"button",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label))},dependencies:[U.eB,b.JL,b.sg],styles:["[_nghost-%COMP%]{display:block}"]});class $c extends st{}function IV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}$c.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory($c)))(t||$c)}}(),$c.\u0275cmp=n.\u0275\u0275defineComponent({type:$c,selectors:[["ts-checkbox-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[1,"full-width","ts-checkbox-control",3,"formGroup"],["disableRipple","",3,"formControlName"],[4,"ngIf"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"mat-checkbox",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,vV,2,1,"mat-error",2),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.field.name),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.invalid))},dependencies:[y.NgIf,N.nI,Se.FC,b.JJ,b.JL,b.sg,b.u],styles:[":host{display:block}.ts-checkbox-control .mat-checkbox{display:block}\n"],encapsulation:2});class Wc extends st{}function DV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275elementContainer(1,4),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("data-item-marker",i.field.name+" "+i.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",t)("group",i.nestedGroup)}}Wc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Wc)))(t||Wc)}}(),Wc.\u0275cmp=n.\u0275\u0275defineComponent({type:Wc,selectors:[["ts-input-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:5,consts:[["floatLabel","always",1,"full-width","ts-input-control",3,"formGroup"],["matInput","","autocomplete","off",3,"formControlName","required"],[4,"ngIf"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"input",1),n.\u0275\u0275template(4,IV,2,1,"mat-error",2),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.field.name)("required",t.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.invalid))},dependencies:[y.NgIf,N.nI,N.v_,N.$V,z.k0,b.Fj,b.JJ,b.JL,b.Q7,b.sg,b.u],styles:["[_nghost-%COMP%]{display:block}"]});class $s extends st{get nestedGroup(){return this.group.get(this.field.name)}}function MV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}$s.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory($s)))(t||$s)}}(),$s.\u0275cmp=n.\u0275\u0275defineComponent({type:$s,selectors:[["ts-form-group-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[3,"formGroup"],[1,"column-editor-cell-group",3,"formGroupName"],[1,"form-group"],[4,"ngFor","ngForOf"],["tsDynamicField","",3,"field","group"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),n.\u0275\u0275template(3,DV,2,3,"div",3),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroupName",t.field.name),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.field.nestedItems))},styles:["[_nghost-%COMP%]{display:block}"]});class Yc extends st{}Yc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Yc)))(t||Yc)}}(),Yc.\u0275cmp=n.\u0275\u0275defineComponent({type:Yc,selectors:[["ts-localizable-text-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:6,consts:[["floatLabel","always",1,"full-width","ts-localizable-text-control",3,"formGroup"],[3,"formControlName","label","required"],[4,"ngIf"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"ts-localizable-text-input",1),n.\u0275\u0275template(4,MV,2,1,"mat-error",2),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.field.name)("label",t.field.label)("required",t.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.invalid))},dependencies:[y.NgIf,N.nI,N.v_,N.$V,b.JJ,b.JL,b.Q7,b.sg,b.u,na],styles:["[_nghost-%COMP%]{display:block}"]});class Pf{}function wV(a,e){1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,"columnEmpty")," "))}const xV=function(a){return[a]};function EV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"stringFormat"),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind2(2,1,n.\u0275\u0275pipeBind1(3,4,t.codeError.message),n.\u0275\u0275pureFunction1(6,xV,t.codeError.parameter))," ")}}function TV(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"form",1)(1,"div",2),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-form-field",3)(4,"mat-label"),n.\u0275\u0275text(5),n.\u0275\u0275pipe(6,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(7,"ts-localizable-text-input",4),n.\u0275\u0275template(8,wV,3,3,"mat-error",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"mat-form-field",6)(10,"mat-label"),n.\u0275\u0275text(11),n.\u0275\u0275pipe(12,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(13,"input",7),n.\u0275\u0275template(14,EV,4,8,"mat-error",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"div",8)(16,"button",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.dialogRef.close())}),n.\u0275\u0275text(17),n.\u0275\u0275pipe(18,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(19,"button",10),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onSaveClick())}),n.\u0275\u0275text(20),n.\u0275\u0275pipe(21,"translate"),n.\u0275\u0275elementEnd()()()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",t.lookupForm),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.title),n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",t.lookupForm),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(6,11,"captionLabel")),n.\u0275\u0275advance(2),n.\u0275\u0275property("label",t.captionLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==t.caption?null:t.caption.invalid),n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",t.lookupForm),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(12,13,"nameLabel")),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",null==t.name?null:t.name.invalid),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(18,15,"cancelButton")," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(21,17,"saveButton")," ")}}class qm{constructor(e,t,i){this.translateService=e,this.dialogRef=t,this.data=i}setLookupFormDefaultValues(){this.name.setValue(this.data.schemaNamePrefix)}get caption(){return this.lookupForm.get("caption")}get name(){return this.lookupForm.get("name")}get codeError(){const e=this.name.errors,t={message:"",parameter:null};switch(!0){case!(0,Dt.Z)(e.required):t.message="columnEmpty";break;case!(0,Dt.Z)(e.requiredWithPrefix):t.message="wrongColumnNameWithPrefix",t.parameter=e.requiredWithPrefix.prefix;break;case!(0,Dt.Z)(e.pattern):t.message="wrongColumnName";break;case!(0,Dt.Z)(e.duplicate):t.message="duplicateColumnName";break;case!(0,Dt.Z)(e.maxlength):t.message="wrongCaptionLength",t.parameter=e.maxlength.requiredLength;break;case!(0,Dt.Z)(e.prefix):t.message="wrongPrefix",t.parameter=e.prefix.requiredPrefix}return t}ngOnInit(){this.captionLabel=this.translateService.instant("captionLabel"),this.lookupForm=this.data.group,this.title=this.data.title,null===this.name.value&&this.setLookupFormDefaultValues()}onSaveClick(){this.lookupForm.valid?this.dialogRef.close(!0):(this.lookupForm.updateValueAndValidity(),this.lookupForm.markAllAsTouched())}}function PV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",9),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}function AV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}qm.\u0275fac=function(e){return new(e||qm)(n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(E.hV),n.\u0275\u0275directiveInject(E.eJ))},qm.\u0275cmp=n.\u0275\u0275defineComponent({type:qm,selectors:[["ts-lookup-form"]],decls:1,vars:1,consts:[["class","lookup-dialog-form",3,"formGroup",4,"ngIf"],[1,"lookup-dialog-form",3,"formGroup"],["mat-dialog-title",""],["data-item-marker","new-lookup-caption","floatLabel","always",1,"full-width","ts-localizable-text-control",3,"formGroup"],["formControlName","caption","required","",3,"label"],[4,"ngIf"],["data-item-marker","new-lookup-name","floatLabel","always",1,"full-width","ts-input-control",3,"formGroup"],["matInput","","formControlName","name","autocomplete","off","required",""],["mat-dialog-actions",""],["mat-button","","data-item-marker","new-lookup-cancel",3,"click"],["mat-flat-button","","color","primary","data-item-marker","new-lookup-save",3,"click"]],template:function(e,t){1&e&&n.\u0275\u0275template(0,TV,22,19,"form",0),2&e&&n.\u0275\u0275property("ngIf",t.lookupForm)},dependencies:[y.NgIf,N.nI,N.v_,N.$V,z.k0,U.eB,b._Y,b.Fj,b.JJ,b.JL,b.Q7,b.sg,b.u,na,E.YS,E.ev,w.X$,Nd],styles:["[_nghost-%COMP%]{display:block;margin:0;min-width:440px}[_nghost-%COMP%]   .lookup-dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .lookup-dialog-form[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{padding:0;margin-bottom:0;min-height:32px;margin-top:24px;justify-content:flex-end}"]});class Ws extends st{get _filterValue$(){return this.group.get(this.field.name).valueChanges.pipe((0,ze.O)(""),(0,h.U)(t=>"string"==typeof t?t.toLowerCase():t.name.toLowerCase()))}filterByContains(e,t){return e.filter(i=>i?.name?.toLowerCase()?.indexOf(t)>=0)}sortByLengthAsc(e){return e.sort((t,i)=>t?.name?.length>i?.name?.length?1:-1)}sortByStartWithAsc(e,t){return e.sort((i,r)=>i?.name?.toLowerCase()?.startsWith(t)&&r?.name?.toLowerCase()?.startsWith(t)?0:i?.name?.toLowerCase()?.startsWith(t)?-1:0)}updateValue(e){const t=this.group.get(this.field.name),i=t.value;if(i?.value){const r=e.find(s=>(0,J.Z)(s.value,i.value));r&&!(0,J.Z)(i,r)&&t.setValue(r)}}getOptions(){return(this.field.options instanceof Array?(0,u.of)(this.field.options):this.field.options).pipe((0,I.b)(this.updateValue.bind(this)))}initOptions(){this.options=(0,u.combineLatest)([this._filterValue$,this.getOptions()]).pipe((0,h.U)(([e,t])=>({filterValue:e,options:e?this.filterByContains(t,e):t})),(0,h.U)(({filterValue:e,options:t})=>({filterValue:e,options:e?this.sortByLengthAsc(t):t})),(0,h.U)(({filterValue:e,options:t})=>this.sortByStartWithAsc(t,e)))}ngOnInit(){super.ngOnInit(),this.initOptions()}displayFn(e){return e?.name||""}}function RV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",11),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}function kV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}function NV(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",12),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.openLookupDialog(r))}),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275element(2,"mat-icon",13),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("matTooltip",n.\u0275\u0275pipeBind1(1,2,t.allowEdit?"editLookupTooltipCaption":"createLookupTooltipCaption")),n.\u0275\u0275advance(2),n.\u0275\u0275property("svgIcon",t.lookupDialogIcon)}}Ws.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Ws)))(t||Ws)}}(),Ws.\u0275cmp=n.\u0275\u0275defineComponent({type:Ws,selectors:[["ts-autocomplete-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:12,vars:10,consts:[["floatLabel","always",1,"full-width","ts-autocomplete-control",3,"formGroup"],[1,"input-wrapper"],["type","text","matInput","",3,"formControlName","matAutocomplete","required"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[4,"ngIf"],[3,"value"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",1),n.\u0275\u0275element(4,"input",2),n.\u0275\u0275elementStart(5,"mat-autocomplete",3,4),n.\u0275\u0275template(7,PV,2,2,"mat-option",5),n.\u0275\u0275pipe(8,"async"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",6),n.\u0275\u0275element(10,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,AV,2,1,"mat-error",8),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(6);n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(2),n.\u0275\u0275property("formControlName",t.field.name)("matAutocomplete",i)("required",t.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("displayWith",t.displayFn),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(8,8,t.options)),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",t.invalid)}},dependencies:[y.NgForOf,y.NgIf,N.nI,N.v_,N.$V,N.nX,z.k0,Xe.CK,ce.VN,ce.QJ,b.Fj,b.JJ,b.JL,b.Q7,b.sg,b.u,y.AsyncPipe],styles:[".ts-autocomplete-control{display:flex;align-items:center;justify-content:space-between}.ts-autocomplete-control .mat-form-field-infix{display:flex;align-items:center}.ts-autocomplete-control .mat-form-field-wrapper{width:100%}.ts-autocomplete-control .input-wrapper{flex-grow:1}\n"],encapsulation:2});class $m extends Ws{constructor(e,t,i,r,s){super(),this.lookupService=i,this.dialogService=r,this.translateService=s,this.editedItems={},e.addSvgIconLiteral("create-lookup-icon",t.bypassSecurityTrustHtml(f(77578))),e.addSvgIconLiteral("edit-lookup-icon",t.bypassSecurityTrustHtml(f(50312)))}get allowEdit(){return this.control.value?.allowEdit||this.control.value?.isNewLookup}get lookupDialogIcon(){return this.allowEdit?"edit-lookup-icon":"create-lookup-icon"}get control(){return this.group.get(this.field.name)}setLookupControl(e){const t=this.lookupForm.get("caption"),i=this.lookupForm.get("name"),r=t.value.getValue(this.translateService.currentLang),s=this.control.value?.value;this.control.patchValue({name:r,value:e?i.value:s,isNewLookup:e||this.control.value?.isNewLookup,newLookupCaption:t.value,newLookupName:i.value,allowEdit:!0}),this.editedItems[e?i.value:s]=this.control.value,this.control.updateValueAndValidity(),this.initOptions()}openDialog(e){this.dialogService.open(qm,{data:{group:this.lookupForm,title:this.translateService.instant(e?"newLookupCaption":"editLookupCaption"),schemaNamePrefix:this.field.validationConfig.schemaNamePrefix},panelClass:"lookup-detail-dialog",scrollStrategy:new Rn.RZ}).pipe((0,Ee.q)(1)).subscribe(t=>{t&&this.setLookupControl(e)})}openEditLookupDialog(){const{newLookupCaption:e,newLookupName:t}=this.control.value;(e||t?(0,u.of)({caption:e,name:t}):this.lookupService.getLookupInfo(this.control.value.value)).subscribe(({caption:i,name:r})=>{const s=this.lookupService.getLookupNameList().pipe((0,h.U)(o=>o.filter(c=>c!==r)));this.lookupForm=this.createLookupForm(s),this.lookupForm.patchValue({caption:new kt(i),name:r}),this.openDialog(!1)})}openCreateLookupDialog(){const e=this.lookupService.getLookupNameList();this.lookupForm=this.createLookupForm(e),this.openDialog(!0)}getOptions(){return super.getOptions().pipe((0,h.U)(e=>{for(const t of e)this.editedItems[t.value]&&Object.assign(t,this.editedItems[t.value]);return e}))}createLookupForm(e){const t=this.field.validationConfig;return new b.cw({caption:new b.p4(null,{validators:[tS.required(this.translateService.currentLang)]}),name:new b.p4(null,{validators:[b.kI.required,Ko.requiredWithPrefix(t.schemaNamePrefix),b.kI.pattern(/^[a-zA-Z_]{1}[a-zA-Z0-9_]*$/),b.kI.maxLength(t.maxColumnNameLength),Ko.prefix(t.schemaNamePrefix)],asyncValidators:[Ko.duplicateAsync(e)]})},{updateOn:"change"})}openLookupDialog(e){e.preventDefault(),this.allowEdit?this.openEditLookupDialog():this.openCreateLookupDialog()}}function VV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-option",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit;n.\u0275\u0275property("value",t.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.name)}}function FV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}$m.\u0275fac=function(e){return new(e||$m)(n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer),n.\u0275\u0275directiveInject(Pf),n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(w.sK))},$m.\u0275cmp=n.\u0275\u0275defineComponent({type:$m,selectors:[["ts-lookup-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:14,vars:11,consts:[[1,"full-width","ts-lookup-control"],["floatLabel","always",3,"formGroup"],[1,"input-wrapper"],["type","text","matInput","",3,"formControlName","matAutocomplete","required"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[4,"ngIf"],["class","show-lookup-dialog","mat-icon-button","","data-item-marker","show-lookup-dialog",3,"matTooltip","click",4,"ngIf"],[3,"value"],["mat-icon-button","","data-item-marker","show-lookup-dialog",1,"show-lookup-dialog",3,"matTooltip","click"],[1,"lookup-form-icon",3,"svgIcon"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",2),n.\u0275\u0275element(5,"input",3),n.\u0275\u0275elementStart(6,"mat-autocomplete",4,5),n.\u0275\u0275template(8,RV,2,2,"mat-option",6),n.\u0275\u0275pipe(9,"async"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(10,"div",7),n.\u0275\u0275element(11,"div",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(12,kV,2,1,"mat-error",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,NV,3,4,"button",10),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(7);n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(2),n.\u0275\u0275property("formControlName",t.field.name)("matAutocomplete",i)("required",t.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("displayWith",t.displayFn),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(9,9,t.options)),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",t.invalid),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.field.isSupportCreatingMode)}},dependencies:[y.NgForOf,y.NgIf,N.nI,N.v_,N.$V,N.nX,z.k0,Xe.CK,U.eB,ce.VN,ce.QJ,A.Hw,Ze.Kd,b.Fj,b.JJ,b.JL,b.Q7,b.sg,b.u,y.AsyncPipe,w.X$],styles:[".ts-lookup-control{display:flex;align-items:center;justify-content:space-between}.ts-lookup-control .mat-form-field-infix{display:flex;align-items:center}.ts-lookup-control .input-wrapper{flex-grow:1}.ts-lookup-control .mat-icon-button.show-lookup-dialog{display:flex;align-items:center;justify-content:center;height:32px;width:32px;min-width:32px;padding:0;border-radius:0;position:relative;bottom:4px}.ts-lookup-control .mat-icon-button.show-lookup-dialog:hover{background-color:#f2f5ff}.ts-lookup-control .mat-icon-button.show-lookup-dialog[disabled]{opacity:.6}.ts-lookup-control .mat-icon-button.show-lookup-dialog .mat-button-wrapper{line-height:16px}.ts-lookup-control .mat-icon-button.show-lookup-dialog .mat-button-wrapper .mat-icon{height:16px;width:16px;line-height:16px}.ts-lookup-control .mat-icon-button.show-lookup-dialog .mat-button-wrapper .mat-icon svg{position:relative;bottom:1px}\n"],encapsulation:2});class Qc extends st{get options$(){return this.field.options instanceof Array?(0,u.of)(this.field.options):this.field.options}}function LV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275elementContainer(1,3),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("data-item-marker",t.name+" "+t.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",t)("group",i.group)}}Qc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Qc)))(t||Qc)}}(),Qc.\u0275cmp=n.\u0275\u0275defineComponent({type:Qc,selectors:[["ts-select-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:[["floatLabel","always",1,"full-width","ts-select-control",3,"formGroup"],["disableRipple","","disableOptionCentering","",3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-select",1),n.\u0275\u0275template(4,VV,2,2,"mat-option",2),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,FV,2,1,"mat-error",3),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.field.name)("required",t.required),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(5,6,t.options$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.invalid))},dependencies:[y.NgForOf,y.NgIf,N.nI,N.v_,N.$V,et.x8,Xe.CK,b.JJ,b.JL,b.Q7,b.sg,b.u,y.AsyncPipe],styles:["[_nghost-%COMP%]{display:block}"]});class Ys extends st{}function OV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-radio-button",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("value",t.value)("checked",t.checked)("disabled",i.field.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}function jV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-error"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.error)}}Ys.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Ys)))(t||Ys)}}(),Ys.\u0275cmp=n.\u0275\u0275defineComponent({type:Ys,selectors:[["ts-fields-group-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[[1,"full-width","ts-fields-group-control",3,"formGroup"],[3,"expanded"],[4,"ngFor","ngForOf"],["tsDynamicField","",3,"field","group"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),n.\u0275\u0275element(5,"div"),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(7,LV,2,3,"div",2),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275property("expanded",!0),n.\u0275\u0275advance(3),n.\u0275\u0275classMap("expansion-panel-icon expansion-panel-icon-"+t.field.name),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.field.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.field.children))},styles:["[_nghost-%COMP%]{display:block}"]});class Jc extends st{ngOnInit(){super.ngOnInit(),this.options=this.field.options.map(e=>({name:e.name,value:e.value,checked:e.value===this.field.value}))}}var K;Jc.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Jc)))(t||Jc)}}(),Jc.\u0275cmp=n.\u0275\u0275defineComponent({type:Jc,selectors:[["ts-radio-button-group"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:5,consts:[[1,"full-width","ts-radio-button-group",3,"formGroup"],["id","radio-group-label"],[1,"ts-radio-group",3,"formControlName"],["disableRipple","","class","ts-radio-button",3,"value","checked","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],["disableRipple","",1,"ts-radio-button",3,"value","checked","disabled"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"label",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-radio-group",2),n.\u0275\u0275template(4,OV,2,4,"mat-radio-button",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,jV,2,1,"mat-error",4),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",t.field.name),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.options),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.invalid))},dependencies:[y.NgForOf,y.NgIf,N.nI,Ft.OY,Ft.vy,b.JJ,b.JL,b.sg,b.u],styles:[".ts-radio-button-group   [_nghost-%COMP%]{display:block}.ts-radio-button-group[_ngcontent-%COMP%]   .ts-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),function(a){a.Input="Input",a.CheckBox="CheckBox",a.Select="Select",a.Button="Button",a.LocalizableText="LocalizableText",a.FieldsGroup="FieldsGroup",a.FormGroup="FormGroup",a.Autocomplete="Autocomplete",a.RadioButtonGroup="RadioButtonGroup",a.Custom="Custom",a.Lookup="Lookup"}(K||(K={}));const JD=new n.InjectionToken("FIELD_CONFIG");var gi;function BV(a,e){1&a&&n.\u0275\u0275elementContainer(0)}!function(a){a.General="general",a.Editability="editability",a.Appearance="appearance",a.Advanced="advanced",a.ObjectSettings="objectsettings",a.Inheritance="inheritance",a.Behavior="behavior",a.DataSource="datasource",a.AccessRights="accessRights",a.HistoryColumns="historyColumns"}(gi||(gi={}));class Wm extends st{constructor(e){super(),this.injector=e}ngOnInit(){this.customComponentInjector=n.Injector.create({providers:[{provide:JD,useValue:this.field},{provide:b.cw,useValue:this.group}],parent:this.injector})}}Wm.\u0275fac=function(e){return new(e||Wm)(n.\u0275\u0275directiveInject(n.Injector))},Wm.\u0275cmp=n.\u0275\u0275defineComponent({type:Wm,selectors:[["ts-custom-template-control"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[1,"full-width","ts-custom-template",3,"formGroup"],[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,BV,1,0,"ng-container",1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.group),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngComponentOutlet",t.field.component)("ngComponentOutletInjector",t.customComponentInjector))},dependencies:[y.NgComponentOutlet,b.JL,b.sg],styles:["[_nghost-%COMP%]{display:block}"]});class Af{constructor(e,t){this.group=e,this.field=t}}Af.\u0275fac=function(e){return new(e||Af)(n.\u0275\u0275directiveInject(b.cw),n.\u0275\u0275directiveInject(JD))},Af.\u0275dir=n.\u0275\u0275defineDirective({type:Af});class ga{constructor(){this.controlRegistry=new Map}getControlsConfig(){return{[K.Button]:qc,[K.CheckBox]:$c,[K.Input]:Wc,[K.FormGroup]:$s,[K.Select]:Qc,[K.LocalizableText]:Yc,[K.FieldsGroup]:Ys,[K.Autocomplete]:Ws,[K.RadioButtonGroup]:Jc,[K.Custom]:Wm,[K.Lookup]:$m}}registerDynamicControlComponent(e,t){this.controlRegistry.set(e,t)}unregisterDynamicControlComponent(e){this.controlRegistry.delete(e)}getDynamicControlComponent(e){return this.controlRegistry.get(e)}}ga.\u0275fac=function(e){return new(e||ga)},ga.\u0275prov=n.\u0275\u0275defineInjectable({token:ga,factory:ga.\u0275fac});class Qs{constructor(e,t){this.container=e,this.dynamicFieldsService=t}ngOnInit(){this.components=this.dynamicFieldsService.getControlsConfig(),this.components[this.field.type]&&(this.componentRef=this.container.createComponent(this.components[this.field.type]),this.componentRef.instance.field=this.field,this.componentRef.instance.group=this.group,this.dynamicFieldsService.registerDynamicControlComponent(this.field.name,this.componentRef.instance))}ngOnDestroy(){this.componentRef?.destroy(),this.dynamicFieldsService.unregisterDynamicControlComponent(this.field.name)}}Qs.\u0275fac=function(e){return new(e||Qs)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(ga))},Qs.\u0275dir=n.\u0275\u0275defineDirective({type:Qs,selectors:[["","tsDynamicField",""]],inputs:{field:"field",group:"group"}});class Kc{}Kc.\u0275fac=function(e){return new(e||Kc)},Kc.\u0275mod=n.\u0275\u0275defineNgModule({type:Kc}),Kc.\u0275inj=n.\u0275\u0275defineInjector({imports:[z.x4,et.uw,Se.Zh,U.yu,N.wp,Pn.To,ce.D8,A.Ps,Ft.Xo,Ze.AA,z.x4,et.uw,Se.Zh,U.yu,N.wp,Pn.To,ce.D8,A.Ps,Ft.Xo,Ze.AA]});class fa{}fa.\u0275fac=function(e){return new(e||fa)},fa.\u0275mod=n.\u0275\u0275defineNgModule({type:fa}),fa.\u0275inj=n.\u0275\u0275defineInjector({providers:[ga],imports:[y.CommonModule,Kc,b.UX,b.u5,Ms,E.yj,w.aw.forChild()]}),n.\u0275\u0275setComponentScope($s,function(){return[y.NgForOf,b.JL,b.sg,b.x0,Qs]},[]),n.\u0275\u0275setComponentScope(Ys,function(){return[y.NgForOf,Pn.pp,Pn.ib,Pn.yz,Pn.yK,b.JL,b.sg,Qs]},[]);class _a{}_a.\u0275fac=function(e){return new(e||_a)},_a.\u0275mod=n.\u0275\u0275defineNgModule({type:_a}),_a.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule,oi]});class Xc{constructor(e){this._queryExecutor=e}_getColumnPath(e){return"string"==typeof e?e:e.columnPath}_addSchemaColumn(e,t){e.addSchemaColumn(this._getColumnPath(t))}_addPrimaryColumnIfNeeded(e,t,i){const r=e.getPrimaryColumn().name;t.some(s=>this._getColumnPath(s)===r)||i.addSchemaColumn(r)}_getEsqOrderDirection(e){return e?"asc"===e?l.OrderDirection.Asc:l.OrderDirection.Desc:l.OrderDirection.None}_applySort(e,t){if(!t?.sort)return;const i=this._getEsqOrderDirection(t.sort.direction);e.getColumn(t.sort.columnName).withOrdering(i,0)}_buildEsq(e,t){const i=new l.EntitySchemaQuery(e.name);return t.columns.forEach(r=>this._addSchemaColumn(i,r)),this._addPrimaryColumnIfNeeded(e,t.columns,i),this._applySort(i,t),t.filter&&i.filters.add(t.filter),i.rowCount=t.rowCount,i.rowsOffset=t.rowsOffset,i}loadEntityData(e,t){l.ValidationUtilities.checkArgumentEmpty("entitySchema",e),l.ValidationUtilities.checkArgumentEmpty("config",t);const i=this._buildEsq(e,t);return this._queryExecutor.executeSelectQuery(i)}}Xc.\u0275fac=function(e){return new(e||Xc)(n.\u0275\u0275inject(me))},Xc.\u0275prov=n.\u0275\u0275defineInjectable({token:Xc,factory:Xc.\u0275fac,providedIn:"root"});class eu{_mapEntityColumnDataSchema(e){return{name:e.name,caption:e.caption,valueType:e.dataValueType}}_getColumnPath(e){return"string"==typeof e?e:e.columnPath}buildTableDataSchema(e,t){l.ValidationUtilities.checkArgumentEmpty("entitySchema",e),l.ValidationUtilities.checkArgumentEmpty("columns",t);const i=t.map(s=>e.columns.find(o=>this._getColumnPath(s)===o.name)),r=e.getPrimaryColumn().name;return{columns:i.map(this._mapEntityColumnDataSchema.bind(this)),trackBy:s=>s[r]}}}eu.\u0275fac=function(e){return new(e||eu)},eu.\u0275prov=n.\u0275\u0275defineInjectable({token:eu,factory:eu.\u0275fac,providedIn:"root"});const UV=["dataViewWrapper"];class Ym{set config(e){this._validateConfig(e);const t=this._config;this._config=e,(0,J.Z)(e,t)||this._applyConfig(e,t)}get sort(){return this._sort}get selectedRecords(){if(!this._entitySchema)return[];const e=this._entitySchema.getPrimaryColumn().name;return this.selectedIds?this._data.filter(t=>this.selectedIds.includes(t[e])):[]}set selectedRecords(e){const t=this._entitySchema.getPrimaryColumn().name,i=this.selectedIds.filter(o=>!this.data.some(c=>c[t]===o)),r=new Set(this.selectedIds),s=new Set(e.map(o=>o[t]).concat(i));this.selectedIds=[...s],(0,J.Z)(r,s)||this.selectedIdsChange.emit(this.selectedIds)}get tableDataSchema(){return this._tableDataSchema}get data(){return this._data}get tableConfig(){return this._config?.tableConfig}constructor(e,t,i,r,s){this._restHandler=e,this._entitySchemaService=t,this._loaderService=i,this._tableDataSchemaBuilder=r,this._scrollToBottomObserverFactory=s,this._destroyed$=new u.Subject,this._defaultPageSize=20,this._data=[],this._tableDataSchema={columns:[]},this._allPagesWasLoaded=!1,this._isDataLoading=!1,this.selectedIds=[],this.selectedIdsChange=new n.EventEmitter,this.dataChange=new n.EventEmitter,this.rowDoubleClick=new n.EventEmitter}_getPageSize(e){return e.pageSize??this._defaultPageSize}_afterLoaded(e,t){const i=t.length<this._getPageSize(e);this._allPagesWasLoaded=i,this.dataChange.emit({data:this._data.slice(),isLastPage:i})}_executeLoading(e,t){const i=this._restHandler.handleRequest(t()).pipe((0,ee.B)());return i.subscribe(r=>this._afterLoaded(e,r)),i}_validateConfig(e){if(l.ValidationUtilities.checkArgumentEmpty("config",e),l.ValidationUtilities.checkArgumentEmpty("entitySchema",e.entitySchema),"string"==typeof e.entitySchema&&l.ValidationUtilities.checkStringIsNotEmpty("entitySchema",e.entitySchema),l.ValidationUtilities.checkArgumentEmpty("columns",e.columns),0===e.columns.length)throw new Error("Entity data view config should contain at least one column.")}_initScrollToBottomObserver(){this._scrollToBottomObserver=this._scrollToBottomObserverFactory.createObserver(this.dataViewWrapper.nativeElement,this._onScrollToBottom.bind(this))}_initDefaultSort(e,t){const i=e.getPrimaryDisplayColumn()?.name,s=i&&t.columns.some(o=>this._getColumnPath(o)===i)?i:this._getColumnPath(t.columns[0]);this._sort={columnName:s,direction:"asc"}}_getEntitySchema(e){if("object"==typeof e)return this._entitySchema=e,(0,u.of)(e);const t=this._restHandler.handleRequest(this._entitySchemaService.getEntitySchemaByUId(e),{skipBodyMask:!0}).pipe((0,L.R)(this._destroyed$),(0,h.U)(i=>i.entitySchema),(0,ee.B)());return t.subscribe(i=>this._entitySchema=i),t}_prepareLoaderFilters(e){let t=null;if(e.excludedIds?.length>0){let i;i=new l.FilterGroup,i.addSchemaColumnInFilterWithParameters(l.ComparisonType.Not_equal,this._entitySchema.getPrimaryColumn().name,e.excludedIds),e.filter&&i.add(e.filter),t=i}else t=e.filter;return t}_createDefaultLoaderConfig(e){return{rowCount:this._getPageSize(e),rowsOffset:-1,sort:this._sort,columns:e.columns,filter:this._prepareLoaderFilters(e)}}_loadRows(e,t){return this._isDataLoading=!0,this._loaderService.loadEntityData(e,t).pipe((0,Ee.q)(1),(0,I.b)(()=>this._isDataLoading=!1),(0,L.R)(this._destroyed$),(0,ee.B)())}_loadNextData(e,t){const i=this._createDefaultLoaderConfig(t);i.rowsOffset=this._data.length;const r=this._loadRows(e,i);return r.subscribe(s=>this._data=this._data.concat(s)),r}_getColumnPath(e){return"string"==typeof e?e:e.columnPath}_resetScroll(){this.dataViewWrapper?.nativeElement&&(this.dataViewWrapper.nativeElement.scrollTop=0),this._scrollToBottomObserver?.resetScrollMaxPosition()}_loadFirstData(e,t){this._resetScroll();const i=this._createDefaultLoaderConfig(t),r=this._loadRows(e,i);return this._data=[],r.subscribe(s=>{this._data=s,this._tableDataSchema=this._tableDataSchemaBuilder.buildTableDataSchema(e,t.columns)}),r}_applyConfig(e,t){const i=e.columns;let r;if(t&&(0,J.Z)(e.entitySchema,t.entitySchema)){const s=!(0,J.Z)(i,t.columns);s&&this._initDefaultSort(this._entitySchema,e),this._entitySchema&&(s||!(0,J.Z)(e.filter,t.filter)||!(0,J.Z)(e.excludedIds,t.excludedIds))&&(r=this._loadFirstData(this._entitySchema,e))}else r=this._getEntitySchema(e.entitySchema).pipe((0,I.b)(s=>this._initDefaultSort(s,e)),(0,B.z)(s=>this._loadFirstData(s,e)));r&&this._executeLoading(e,()=>r)}_onScrollToBottom(){if(this._isDataLoading||this._allPagesWasLoaded)return;const e=this._config;this._executeLoading(e,()=>this._loadNextData(this._entitySchema,e))}onSortChange(e){if((0,J.Z)(e,this._sort))return;const t=this._config;this._sort=e,this._executeLoading(t,()=>this._loadFirstData(this._entitySchema,t))}ngAfterViewInit(){this._initScrollToBottomObserver()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this._scrollToBottomObserver.destroy()}}function GV(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-quick-entity-filter",13),n.\u0275\u0275listener("valueChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onFilterChanged(r))}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("entitySchema",t.entitySchema)}}function zV(a,e){1&a&&n.\u0275\u0275element(0,"mat-spinner",19)}Ym.\u0275fac=function(e){return new(e||Ym)(n.\u0275\u0275directiveInject($d),n.\u0275\u0275directiveInject(Ke),n.\u0275\u0275directiveInject(Xc),n.\u0275\u0275directiveInject(eu),n.\u0275\u0275directiveInject(Ln))},Ym.\u0275cmp=n.\u0275\u0275defineComponent({type:Ym,selectors:[["ts-entity-data-view"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(UV,7),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.dataViewWrapper=i.first)}},inputs:{config:"config",selectedIds:"selectedIds"},outputs:{selectedIdsChange:"selectedIdsChange",dataChange:"dataChange",rowDoubleClick:"rowDoubleClick"},decls:3,vars:7,consts:[[1,"entity-data-view-wrapper"],["dataViewWrapper",""],[3,"data","dataSchema","sort","config","selected","selectedChange","sortChange","rowDoubleClick"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0,1)(2,"ts-table",2),n.\u0275\u0275listener("selectedChange",function(r){return t.selectedRecords=r})("sortChange",function(r){return t.onSortChange(r)})("rowDoubleClick",function(r){return t.rowDoubleClick.emit(r)}),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275styleProp("display",t.data.length>0?null:"none"),n.\u0275\u0275advance(2),n.\u0275\u0275property("data",t.data)("dataSchema",t.tableDataSchema)("sort",t.sort)("config",t.tableConfig)("selected",t.selectedRecords))},dependencies:[_t],styles:[".entity-data-view-wrapper[_ngcontent-%COMP%]{height:100%;overflow:auto}"]});const HV=function(a){return{"lookup-dialog-counter-value-hidden":a}};function ZV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",14)(1,"span",15),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",16)(5,"div",17),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,zV,1,0,"mat-spinner",18),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,4,"LookupDialog.Selected")),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(6,HV,null===t.displayedSelectedRecordsCount)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.displayedSelectedRecordsCount||0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null===t.displayedSelectedRecordsCount)}}function qV(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-entity-data-view",20),n.\u0275\u0275listener("dataChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onEntityRecordsLoaded(r))})("selectedIdsChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.selectedIds=r)})("selectedIdsChange",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onSelectedIdsChange())})("rowDoubleClick",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onRowDoubleClick(r))}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",t.entityDataViewConfig)("selectedIds",t.selectedIds)}}function $V(a,e){1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,1,"LookupDialog.Blankslate")))}function WV(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,"BaseTableDetail.BlankslateWithFilters")))}function YV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",21),n.\u0275\u0275template(1,$V,4,3,"ng-container",22),n.\u0275\u0275template(2,WV,3,3,"ng-template",null,23,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.entityFilter)("ngIfElse",t)}}class tu{get entityFilter(){return this._quickEntityFilter}get entityDataViewConfig(){return{entitySchema:this._entitySchema,columns:this._getDisplayedColumns(),tableConfig:this._getTableConfig(),excludedIds:this._getLookupDialogConfig().excludedIds,filter:this._quickEntityFilter,pageSize:this._pageSize}}get selectMode(){return this._dialogData.tableConfig.selectMode}get entitySchema(){return this._entitySchema}get defaultBlankslateVisible(){return this._defaultBlankslateVisible}get displayedSelectedRecordsCount(){return this._allPagesSelectionEnabled?this._allPagesSelectedCount:this._loadedSelectedCount}constructor(e,t,i,r,s,o,c){this._dialogData=e,this._dialogRef=t,this._entitySchemaService=i,this._restHandler=r,this._translateService=s,this._queryExecutor=o,this._dialogService=c,this._pageSize=20,this._allPagesSelectionWarningRecordsNumber=1e3,this._destroyed$=new u.Subject,this._allPagesRecordsCountRequestCancel$=new u.Subject,this._defaultBlankslateVisible=!1,this._loadedRecords=[],this._allPagesWasLoaded=!1,this._allPagesSelectionEnabled=!1,this._allPagesUnselectedIds=null,this._allPagesRecordsCount=null,this._allPagesSelectedCount=null,this._allRowsSelectState=null,this._loadedSelectedCount=0,this.selectedIds=[],l.ValidationUtilities.checkArgumentEmpty("data",e),l.ValidationUtilities.checkArgumentEmpty("lookupDialogConfig",e.lookupDialogConfig),this.selectedIds=e.lookupDialogConfig.selectedIds?.slice()??[],this._getEntitySchema(e.lookupDialogConfig.entitySchema).pipe((0,L.R)(this._destroyed$)).subscribe(d=>this._entitySchema=d),this._applyIncomingFilter()}_getPrimaryColumnName(){return this._entitySchema.getPrimaryColumn().name}_getLoadedRecordIds(){const e=this._getPrimaryColumnName();return this._loadedRecords.map(t=>t[e])}_unselectAllExceptLoaded(){const e=this.selectedIds;this.selectedIds=this._getLoadedRecordIds().filter(t=>e.includes(t))}_getLookupDialogConfig(){return this._dialogData.lookupDialogConfig}_actualizeLoadedSelectedCount(){this._loadedSelectedCount=this.selectedIds.length}_canExistNotLoadedSelectedRecords(e){return e===fe.None&&!this._allPagesSelectionEnabled&&!this._allPagesWasLoaded}_actualizeAllPagesUnselectedIds(){const e=this.selectedIds,t=this._getLoadedRecordIds(),i=t.filter(s=>!e.includes(s)),r=t.filter(s=>e.includes(s));for(const s of i)this._allPagesUnselectedIds.add(s);for(const s of r)this._allPagesUnselectedIds.delete(s)}_calculateAllPagesSelectedCount(){this._allPagesSelectedCount=null===this._allPagesRecordsCount?null:this._allPagesRecordsCount-this._allPagesUnselectedIds.size}_setAllPagesRecordsCount(e){this._allPagesRecordsCount=e,this._calculateAllPagesSelectedCount()}_handleRequest(e){return t=>this._restHandler.handleRequest(t,e)}_getDisplayedColumns(){let e=this._getLookupDialogConfig().displayedColumns;if(!e){const t=this._entitySchema.getPrimaryDisplayColumn();e=t?[t.name]:[this._getPrimaryColumnName()]}return e}_getTableConfig(){return{...this._dialogData.tableConfig,allRowsSelectState:()=>this._allRowsSelectState,allRowsSelectToggleHandler:()=>this._allRowsSelectToggle()}}_applyIncomingFilter(){const e=this._getLookupDialogConfig().filter;e&&(this._quickEntityFilter||(this._quickEntityFilter=new l.FilterGroup),this._quickEntityFilter.add(e))}_getEntitySchema(e){return"object"==typeof e?(0,u.of)(e):this._entitySchemaService.getEntitySchemaByUId(e).pipe(this._handleRequest(),(0,h.U)(t=>t.entitySchema))}_actualizeDefaultBlankslateVisibility(e){this._defaultBlankslateVisible=0===e.length}_confirmAllPagesSelection(){if(this.displayedSelectedRecordsCount<this._allPagesSelectionWarningRecordsNumber)return(0,u.of)(!0);const e=this._translateService.instant("LookupDialog.AllPagesSelectionWarning");return this._dialogService.openConfirmationDialog(e).pipe((0,h.U)(t=>t===Fh.result))}_enableAllPagesSelection(){this._unselectAllExceptLoaded(),this._allPagesSelectionEnabled=!0,this._allPagesRecordsCount||this._loadAllPagesRecordsCount(),this._allRowsSelectState=fe.All,this._allPagesUnselectedIds=new Set}_disableAllPagesSelection({unselectAllRecords:e}){this._allPagesRecordsCountRequestCancel$.next(),this._allPagesSelectionEnabled=!1,e&&(this.selectedIds=[],this._allRowsSelectState=fe.None),this._actualizeLoadedSelectedCount(),this._allPagesUnselectedIds=null}_createAllFilteredRecordsEsq(){const e=this._getPrimaryColumnName(),t=new l.EntitySchemaQuery(this._entitySchema.name);this._quickEntityFilter&&t.filters.add(this._quickEntityFilter);const i=this._getLookupDialogConfig().excludedIds;return i?.length>0&&t.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Not_equal,e,i),t}_createAllFilteredIdsEsq(){const e=this._createAllFilteredRecordsEsq();return e.addSchemaColumn(this._getPrimaryColumnName()),e}_loadAllPagesRecordsCount(){const e=this._getPrimaryColumnName(),t=this._createAllFilteredRecordsEsq();t.addAggregationFunctionColumn(e,l.AggregationType.Count,"Count"),this._queryExecutor.executeSelectQuery(t).pipe(this._handleRequest({skipBodyMask:!0}),(0,L.R)((0,u.merge)(this._allPagesRecordsCountRequestCancel$,this._destroyed$)),(0,G.K)(()=>(this._disableAllPagesSelection({unselectAllRecords:!1}),u.EMPTY)),(0,h.U)(i=>i[0].Count)).subscribe(i=>this._setAllPagesRecordsCount(i))}_loadIsAnyRecordExist(e){const t=this._createAllFilteredIdsEsq();return t.rowCount=1,e(t),this._queryExecutor.executeSelectQuery(t).pipe((0,L.R)(this._destroyed$),this._handleRequest({maskDelay:0}),(0,h.U)(i=>1===i.length),(0,G.K)(()=>(0,u.of)(!0)),(0,_i.d)())}_clearNotLoadedRecordsCachedInfo(){this._isAnyNotLoadedRecordSelected$=null,this._isAnyNotLoadedRecordUnselected$=null}_loadIsAnyNotLoadedRecordSelected(){return this._isAnyNotLoadedRecordSelected$??(this._isAnyNotLoadedRecordSelected$=this._loadIsAnyRecordExist(e=>e.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Equal,this._getPrimaryColumnName(),this.selectedIds)))}_loadIsAnyNotLoadedRecordUnselected(){return this._isAnyNotLoadedRecordUnselected$??(this._isAnyNotLoadedRecordUnselected$=this._loadIsAnyRecordExist(e=>e.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Not_equal,this._getPrimaryColumnName(),this.selectedIds)))}_loadAllPagesSelectedIds(){const e=this._getPrimaryColumnName(),t=this._getLoadedRecordIds().filter(i=>this._allPagesUnselectedIds.has(i));return this._queryExecutor.executeSelectQuery(this._createAllFilteredIdsEsq()).pipe((0,L.R)(this._destroyed$),this._handleRequest(),(0,h.U)(i=>i.map(r=>r[e])),(0,h.U)(i=>i.filter(r=>!t.includes(r))))}_actualizeAllRowsSelectState(){let e;const t=this._getLoadedRecordIds(),i=t.length>0&&t.some(s=>this.selectedIds.includes(s)),r=i&&t.every(s=>this.selectedIds.includes(s));return e=0===this.selectedIds.length||!i&&this._allPagesWasLoaded?(0,u.of)(fe.None):r&&(this._allPagesWasLoaded||this._allPagesSelectionEnabled)?(0,u.of)(fe.All):i&&!r?(0,u.of)(fe.Intermediate):i?this._loadIsAnyNotLoadedRecordUnselected().pipe((0,h.U)(s=>s?fe.Intermediate:fe.All)):this._loadIsAnyNotLoadedRecordSelected().pipe((0,h.U)(s=>s?fe.Intermediate:fe.None)),e.subscribe(s=>this._allRowsSelectState=s),e}_unselectNotLoadedRecords(){const e=this._getPrimaryColumnName(),t=this._createAllFilteredIdsEsq();t.filters.addSchemaColumnInFilterWithParameters(l.ComparisonType.Equal,e,this.selectedIds);const i=this._queryExecutor.executeSelectQuery(t).pipe(this._handleRequest(),(0,L.R)((0,u.merge)(this._destroyed$)),(0,h.U)(r=>r.map(s=>s[e])),(0,G.K)(()=>(0,u.of)([])),(0,ee.B)());return i.subscribe(r=>{this.selectedIds=this.selectedIds.filter(s=>!r.includes(s))}),i}_toggleLoadedRecordsSelection(e){const t=this._getLoadedRecordIds();e===fe.None?this.selectedIds=this.selectedIds.filter(i=>!t.includes(i)):this.selectedIds=[...new Set(this.selectedIds.concat(t))]}_toggleAllPagesSelectionIfRequired(e){const t=!this._allPagesSelectionEnabled&&this.selectedIds.length>0&&e===fe.All&&!this._allPagesWasLoaded,i=this._allPagesSelectionEnabled&&e===fe.None;return t?(this._enableAllPagesSelection(),!0):i?(this._disableAllPagesSelection({unselectAllRecords:!0}),!1):null}_allRowsSelectToggle(){const e=this._allRowsSelectState===fe.All?fe.None:fe.All;this._allRowsSelectState=e,this._toggleLoadedRecordsSelection(e),this._canExistNotLoadedSelectedRecords(e)?(this._loadedSelectedCount=null,this._unselectNotLoadedRecords().subscribe(()=>this._actualizeLoadedSelectedCount())):this._actualizeLoadedSelectedCount(),null===this._toggleAllPagesSelectionIfRequired(e)&&this._allPagesSelectionEnabled&&(this._allPagesUnselectedIds.clear(),this._calculateAllPagesSelectedCount())}_resetSelectionOnFilterChanged(){this._allPagesSelectionEnabled&&this._disableAllPagesSelection({unselectAllRecords:!0}),"multi"!==this.selectMode&&(this.selectedIds=[]),this._setAllPagesRecordsCount(null),this._allRowsSelectState=null}_closeWithSelection(e){const t=this._getPrimaryColumnName();this._dialogRef.close({selectedIds:e,selectedRecords:this._loadedRecords.filter(i=>e.includes(i[t]))})}getDialogTitle(){if(!this._entitySchema)return"";const e=this._translateService.instant("LookupDialog.TitleTemplate");return Z.Ld.Format(e,this._entitySchema.caption)}ngOnDestroy(){this._destroyed$.next()}onFilterChanged(e){this._resetSelectionOnFilterChanged(),this._quickEntityFilter=e,this._applyIncomingFilter()}onEntityRecordsLoaded({data:e,isLastPage:t}){if(this._loadedRecords=e,this._clearNotLoadedRecordsCachedInfo(),this._actualizeDefaultBlankslateVisibility(e),this._allPagesWasLoaded=t,this._allPagesSelectionEnabled){const i=this._getPrimaryColumnName();this.selectedIds=e.map(r=>r[i]).filter(r=>!this._allPagesUnselectedIds.has(r)),this._actualizeLoadedSelectedCount(),t&&this._disableAllPagesSelection({unselectAllRecords:!1})}!this._allRowsSelectState&&"multi"===this.selectMode&&this._actualizeAllRowsSelectState()}isAnyRecordSelected(){return this.displayedSelectedRecordsCount>0}onRowDoubleClick(e){if("single"!==this.selectMode)return;const t=this._getPrimaryColumnName();this._dialogRef.close({selectedIds:[e[t]],selectedRecords:[e]})}closeWithCurrentSelection(){this._allPagesSelectionEnabled?this._confirmAllPagesSelection().pipe((0,P.h)(e=>e),(0,B.z)(()=>this._loadAllPagesSelectedIds())).subscribe(e=>this._closeWithSelection(e)):this._closeWithSelection(this.selectedIds)}onSelectedIdsChange(){this._allPagesSelectionEnabled?(this._actualizeAllPagesUnselectedIds(),this._calculateAllPagesSelectedCount()):this._actualizeLoadedSelectedCount(),this._actualizeAllRowsSelectState()}}tu.\u0275fac=function(e){return new(e||tu)(n.\u0275\u0275directiveInject(E.eJ),n.\u0275\u0275directiveInject(E.hV),n.\u0275\u0275directiveInject(Ke),n.\u0275\u0275directiveInject($d),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(me),n.\u0275\u0275directiveInject(Ce))},tu.\u0275cmp=n.\u0275\u0275defineComponent({type:tu,selectors:[["ts-lookup-dialog"]],decls:20,vars:12,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],[1,"lookup-dialog-top-panel"],[1,"dialog-filters"],[3,"entitySchema","valueChange",4,"ngIf"],["class","counter-container",4,"ngIf"],["mat-dialog-content",""],[3,"config","selectedIds","dataChange","selectedIdsChange","rowDoubleClick",4,"ngIf"],["class","lookup-dialog-blank-slate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"entitySchema","valueChange"],[1,"counter-container"],[1,"counter-label"],[1,"lookup-dialog-counter-value-wrapper"],[1,"counter-value",3,"ngClass"],["diameter","18",4,"ngIf"],["diameter","18"],[3,"config","selectedIds","dataChange","selectedIdsChange","rowDoubleClick"],[1,"lookup-dialog-blank-slate"],[4,"ngIf","ngIfElse"],["blankslateWithFilters",""]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"span"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",1),n.\u0275\u0275element(5,"mat-icon",2),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(6,"div",3)(7,"div",4),n.\u0275\u0275template(8,GV,1,1,"ts-quick-entity-filter",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,ZV,8,8,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div",7),n.\u0275\u0275template(11,qV,1,2,"ts-entity-data-view",8),n.\u0275\u0275template(12,YV,4,2,"div",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",10)(14,"button",11),n.\u0275\u0275text(15),n.\u0275\u0275pipe(16,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(17,"button",12),n.\u0275\u0275listener("click",function(){return t.closeWithCurrentSelection()}),n.\u0275\u0275text(18),n.\u0275\u0275pipe(19,"translate"),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(t.getDialogTitle()),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",t.entitySchema),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","multi"===t.selectMode),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.entitySchema),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.defaultBlankslateVisible),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(16,8,"LookupDialog.CancelButton")),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",!t.isAnyRecordSelected()),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(19,10,"LookupDialog.SelectButton")))},dependencies:[y.NgClass,y.NgIf,Ym,U.eB,E.aO,E.YS,E.Rb,E.ev,A.Hw,Ju.sN,Nm,w.X$],styles:["[_nghost-%COMP%]{padding:4px 10px;width:834px;max-width:100%;min-width:420px;box-sizing:border-box}.counter-container[_ngcontent-%COMP%]{display:flex;align-items:baseline}.counter-container[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:13px;color:#757575;margin-right:4px}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{font-size:14px;color:#444}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]   .counter-value.lookup-dialog-counter-value-hidden[_ngcontent-%COMP%]{visibility:hidden;width:0}[mat-dialog-content][_ngcontent-%COMP%]{max-height:55vh!important;min-height:267px;height:862px}[mat-dialog-content][_ngcontent-%COMP%]   .lookup-dialog-blank-slate[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:14px;color:#999;text-align:center;padding-top:22px}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]});class nu{constructor(e){this._dialogService=e,this._defaultTableConfig={headerSticky:!0}}_createTableConfig(e){return{...this._defaultTableConfig,...e}}openWithMultiselect(e){const t={lookupDialogConfig:e,tableConfig:this._createTableConfig({selectMode:"multi"}),gtmData:null};return this._dialogService.open(tu,{data:t}).pipe((0,h.U)(i=>({selectedIds:i?.selectedIds})))}open(e){const t={lookupDialogConfig:e,tableConfig:this._createTableConfig({selectMode:"single"}),gtmData:null};return this._dialogService.open(tu,{data:t}).pipe((0,h.U)(i=>({selectedId:i?.selectedIds[0],selectedRecord:i?.selectedRecords[0]})))}}nu.\u0275fac=function(e){return new(e||nu)(n.\u0275\u0275inject(Ce))},nu.\u0275prov=n.\u0275\u0275defineInjectable({token:nu,factory:nu.\u0275fac});class Js{}Js.\u0275fac=function(e){return new(e||Js)},Js.\u0275mod=n.\u0275\u0275defineNgModule({type:Js}),Js.\u0275inj=n.\u0275\u0275defineInjector({providers:[nu],imports:[y.CommonModule,Vt,_a,ce.D8,U.yu,E.yj,N.wp,A.Ps,z.x4,Ju.UK,ea,w.aw]});class KD{static prefixValidator(e,t){return t?()=>null:Ko.prefix(e)}static lookupPrimaryDisplayColumn(e){return t=>(0,O.Z)(t.value)||!t.value.value||t.value.isNewLookup?(0,u.of)(null):e.checkLookupPrimaryDisplayColumn(t.value).pipe((0,h.U)(i=>i?null:{primaryDisplayColumn:{value:t.value}}))}}class Tt{static _createControlConfig(e,t){return e.type=t,e}static findFieldByName(e,t){let i=null;return e.forEach(r=>{i||(r.name===t?i=r:r.type===K.FieldsGroup&&(i=this.findFieldByName(r.children,t)))}),i}static addField(e,t,i){void 0===i&&(i=e.length),e.splice(i,0,t)}static addFieldToGroup(e,t,i,r){const s=this.findFieldByName(e,t);!s||s.type!==K.FieldsGroup||this.addField(s.children,i,r)}static createCheckBoxFieldConfig(e){return this._createControlConfig(e,K.CheckBox)}static createInputFieldConfig(e){return this._createControlConfig(e,K.Input)}static createAutocompleteFieldConfig(e){return this._createControlConfig(e,K.Autocomplete)}static createSelectFieldConfig(e){return this._createControlConfig(e,K.Select)}static createLocalizableTextFieldConfig(e){return this._createControlConfig(e,K.LocalizableText)}}class QV{static acceptableOptionsValidator(e){return t=>{const i=t.value;return(e instanceof Array?(0,u.of)(e):e).pipe((0,h.U)(r=>{if((0,O.Z)(i))return!0;const s="string"==typeof i?i.toLowerCase():i.name.toLowerCase();return r.some(o=>o?.name?.toLowerCase()===s||o?.value===i?.value)}),(0,we.P)(),(0,h.U)(r=>r?null:{acceptableOptions:{value:name}}))}}}function JV(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275elementContainer(1,2),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("data-item-marker",t.name+" "+t.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",t)("group",i.form)}}class Qm{get value(){return this.form.value}get invalid(){return this.form.invalid}constructor(e,t){this.formBuilder=e,this.dynamicFieldsService=t,this.fields=[],this.submit=new n.EventEmitter}set updateOn(e){(!this.form||this.form.updateOn!==e)&&(this.form=this.createForm(e))}createForm(e="change"){const t=this.formBuilder.group({},{updateOn:e});return this.fields.forEach(i=>{const r=i.children;r?r.forEach(s=>this.setFormControl(t,s)):this.setFormControl(t,i)}),t}setFormControl(e,t){t.type===K.FormGroup?this.setFormGroup(e,t):this.setFormField(e,t)}setFormGroup(e,t){const i=this.formBuilder.group({});t.nestedItems.forEach(r=>{const s={value:t.value,disabled:r.disabled},o=this.formBuilder.control(s,this.bindValidations(t.validations||[]));i.addControl(r.name,o)}),e.addControl(t.name,i)}setFormField(e,t){if(t.type===K.Button||t.type===K.FieldsGroup)return;const i=this.formBuilder.control(t.value,this.bindValidations(t.validations||[]),this.bindAsyncValidations(t.asyncValidations||[]));!0===t.disabled&&i.disable(),e.addControl(t.name,i)}bindValidations(e){if(e.length>0){const t=this.getValidList(e);return b.kI.compose(t)}return null}bindAsyncValidations(e){if(e.length>0){const t=this.getValidList(e);return b.kI.composeAsync(t)}return null}getValidList(e){const t=[];return e.forEach(i=>{t.push(i.validator)}),t}validateAllFormFields(e){Object.keys(e.controls).forEach(t=>{e.get(t).markAsTouched({onlySelf:!0})})}ngOnInit(){this.form||(this.form=this.createForm())}onSubmit(e){e.preventDefault(),e.stopPropagation(),this.form.valid?this.submit.emit(this.form.value):this.validateAllFormFields(this.form)}addFieldValidation(e,t){const i=Tt.findFieldByName(this.fields,e);i&&(i.validations||(i.validations=[]),i.validations.push(t),this.form.get(e).setValidators(this.bindValidations(i.validations||[])))}setFieldValidations(e,t=[]){const i=Tt.findFieldByName(this.fields,e);i.validations=t,this.form.get(e).setValidators(this.bindValidations(i.validations))}findControlComponent(e){return this.dynamicFieldsService.getDynamicControlComponent(e)}}Qm.\u0275fac=function(e){return new(e||Qm)(n.\u0275\u0275directiveInject(b.qu),n.\u0275\u0275directiveInject(ga))},Qm.\u0275cmp=n.\u0275\u0275defineComponent({type:Qm,selectors:[["ts-dynamic-form"]],inputs:{updateOn:"updateOn",fields:"fields"},outputs:{submit:"submit"},decls:2,vars:2,consts:[[1,"dynamic-form",3,"formGroup","submit"],[4,"ngFor","ngForOf"],["tsDynamicField","",3,"field","group"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("submit",function(r){return t.onSubmit(r)}),n.\u0275\u0275template(1,JV,2,3,"div",1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("formGroup",t.form),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.fields))},dependencies:[y.NgForOf,b._Y,b.JL,b.sg,Qs],styles:[".dynamic-form .mat-expansion-panel-body{display:grid;grid-column-gap:32px;grid-template-columns:repeat(auto-fill,minmax(318px,1fr));max-width:768px;width:100%}@media all and (-ms-high-contrast: none){.dynamic-form .mat-expansion-panel-body{display:flex;flex-direction:column}}.dynamic-form .full-width{width:100%}.dynamic-form .mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}\n"],encapsulation:2});class Qt{constructor(e,t){this.container=e,this.translateService=t,this.destroyed$=new u.Subject,this.formCreated=new n.EventEmitter,this.valueChanged=new n.EventEmitter}get formComponent(){return this.componentRef.instance}onConfigLoaded(e){for(const i of Object.keys(e)){const r=this.formComponent.form.get(i);r&&(this.getField(i).type===K.LocalizableText&&(e[i]=new kt(e[i])),r.setValue(e[i]),r.updateValueAndValidity())}const{validationConfig:t}=e;this.setAdditionalValidators(t,e)}setAdditionalValidators(e,t){e.maxColumnCaptionLength&&this.formComponent.addFieldValidation("caption",{message:tr(this.translateService.instant("wrongCaptionLength"),[e.maxColumnCaptionLength]),name:"maxlength",validator:tS.maxLength(this.translateService.currentLang,e.maxColumnCaptionLength)}),t.allowEmptyCaption||this.formComponent.addFieldValidation("caption",{message:this.translateService.instant("columnEmpty"),name:"required",validator:tS.required(this.translateService.currentLang)}),e.maxColumnNameLength&&this.formComponent.addFieldValidation("name",{message:tr(this.translateService.instant("wrongCaptionLength"),[e.maxColumnNameLength]),name:"maxlength",validator:b.kI.maxLength(e.maxColumnNameLength)}),this.formComponent.addFieldValidation("name",{message:tr(this.translateService.instant("wrongPrefix"),[e.schemaNamePrefix]),name:"prefix",validator:KD.prefixValidator(e.schemaNamePrefix,e.isInherited)}),this.formComponent.addFieldValidation("name",{message:tr(this.translateService.instant("duplicateColumnName"),[]),name:"duplicate",validator:Ko.duplicate(e.schemaColumnsNames)})}ngOnInit(){this.componentRef=this.container.createComponent(Qm),this.componentRef.instance.fields=this.fields,this.componentRef.instance.updateOn="change",this.onConfigLoaded(this.model),this.formCreated.emit(this.formComponent),this.formComponent.form.valueChanges.pipe((0,L.R)(this.destroyed$)).subscribe(e=>{this.valueChanged.next(e)})}getField(e){return Tt.findFieldByName(this.fields,e)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}Qt.\u0275fac=function(e){return new(e||Qt)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(w.sK))},Qt.\u0275dir=n.\u0275\u0275defineDirective({type:Qt,selectors:[["","tsMetaItemPropertiesPage",""]],inputs:{fields:"fields",model:"model"},outputs:{formCreated:"formCreated",valueChanged:"valueChanged"}});class iu extends Pf{constructor(e){super(),this.customEventService=e}checkLookupPrimaryDisplayColumn(e){return this.customEventService.getDataViaEvent("CheckLookupPrimaryDisplayColumn",e)}getLookupInfo(e){return this.customEventService.getDataViaEvent("GetLookupInfo",e)}getLookupList(){return this.customEventService.getDataViaEvent("GetLookupList")}getLookupNameList(){return this.customEventService.getDataViaEvent("GetLookupNameList")}}iu.\u0275fac=function(e){return new(e||iu)(n.\u0275\u0275inject(Ye))},iu.\u0275prov=n.\u0275\u0275defineInjectable({token:iu,factory:iu.\u0275fac});class au{}au.\u0275fac=function(e){return new(e||au)},au.\u0275mod=n.\u0275\u0275defineNgModule({type:au}),au.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:Pf,useClass:iu}],imports:[y.CommonModule,fa,x.y,A.Ps,z.x4,U.yu,b.UX]});class KV{getFields(e){return[]}}class Jm extends KV{constructor(e,t){super(),this.translateService=e,this.customEventService=t}getFields(e){const t=e.validationConfig?.schemaNamePrefix;return[{name:gi.General,label:this.translateService.instant("generalCaption"),type:K.FieldsGroup,children:[{name:"caption",label:this.translateService.instant("captionLabel"),type:K.LocalizableText,validations:[]},{name:"name",label:this.translateService.instant("nameLabel"),type:K.Input,validations:[{message:this.translateService.instant("columnEmpty"),name:"required",validator:b.kI.required},{message:tr(this.translateService.instant("wrongColumnNameWithPrefix"),[t]),name:"requiredWithPrefix",validator:Ko.requiredWithPrefix(t)},{message:this.translateService.instant("wrongColumnName"),name:"pattern",validator:b.kI.pattern(/^[a-zA-Z_]{1}[a-zA-Z0-9_]*$/)}]}]}]}getModel(){return this.customEventService.getDataViaEvent("GetColumnConfig")}}Jm.\u0275fac=function(e){return new(e||Jm)(n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(Ye))},Jm.\u0275prov=n.\u0275\u0275defineInjectable({token:Jm,factory:Jm.\u0275fac});class Ks{constructor(e){this.translateService=e,this.destroyed$=new u.Subject,this.valueChanged=new n.EventEmitter}setAllControlDisableState(){this.model.isDisabled&&this.formComponent.form.disable()}onFormCreated(e){this.formComponent=e,this.formComponent.form.valueChanges.pipe((0,L.R)(this.destroyed$)).subscribe(t=>{this.valueChanged.next(t)}),this.setAllControlDisableState()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}checkValidity(){const e=this.formComponent.form;return!!e.valid||(e.updateValueAndValidity(),e.markAllAsTouched(),!1)}}Ks.\u0275fac=function(e){return new(e||Ks)(n.\u0275\u0275directiveInject(w.sK))},Ks.\u0275cmp=n.\u0275\u0275defineComponent({type:Ks,selectors:[["ts-meta-item-properties-page"]],inputs:{model:"model",fields:"fields"},outputs:{valueChanged:"valueChanged"},decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});class Xs extends Ks{constructor(e,t){super(t),this.snackBar=e,this._subscriptions=new u.Subscription,this._messageDuration=1e4}_showChangeTypeMessage(){const e=this.formComponent.form.get("name"),t=tr(this.translateService.instant("changeTypeMessage"),[e.value]),i=this.translateService.instant("undoButtonCaption");return this.snackBar.open(t,i,{duration:this._messageDuration,panelClass:"change-type-message"})}_showPageDateValueTypeMessage(){return this.snackBar.open(this.translateService.instant("pageDataValueTypeTypeMessage"),null,{duration:this._messageDuration,panelClass:"page-data-value-type-message"})}_setDataValueType(e){const t=this.formComponent.form.get("dataValueType");t.setValue(e),t.updateValueAndValidity({emitEvent:!1})}_onDataValueTypeValueChanges(e,t,i){if(this._needShowNotice(e,t,i))this._showChangeTypeMessage().afterDismissed().pipe((0,we.P)(),(0,P.h)(s=>s.dismissedByAction)).subscribe(()=>{setTimeout(()=>this._setDataValueType(e),0)});else{this.snackBar.dismiss();const r=Tt.findFieldByName(this.formComponent.fields,"dataValueType");this.fillAllowedDataValueType(t,r),this._changeDataValueTypeDependedProperties(t)}}_changeDataValueTypeDependedProperties(e){if(!ot.Text.includes(e))return;const i=this.formComponent.form.get("defValue");let r=i?.value??{};(e===l.DataValueType.PHONE_TEXT||e===l.DataValueType.RICH_TEXT)&&(r={valueSourceType:l.DefaultValueSource.None,value:null,valueSource:null},i.setValue(r)),this._updateIsMultiLineControlSettings(r,e),this._updateIsMaskedControlSettings(r,e),this._updateIsFormatValidatedControlSettings(r,e),this._updateIsLocalizableTextControlSettings(r,e),this._updateIsValueCloneableControlSettings(r)}_updateIsMultiLineControlSettings(e,t){const i=this.formComponent.form.get("isMultiLineText");i&&([l.DataValueType.PHONE_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.WEB_TEXT].includes(t)?this._changeControlSettings(i,!1,!1):t===l.DataValueType.RICH_TEXT?this._changeControlSettings(i,!0,!1):e.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(i,!1,!1):i.enable())}_updateIsMaskedControlSettings(e,t){const i=this.formComponent.form.get("isMasked");i&&(t===l.DataValueType.PHONE_TEXT?i.enable():(t===l.DataValueType.RICH_TEXT||(e.valueSourceType,l.DefaultValueSource.Sequence),this._changeControlSettings(i,!1,!1)))}_updateIsFormatValidatedControlSettings(e,t){const i=this.formComponent.form.get("isFormatValidated");i&&(t===l.DataValueType.EMAIL_TEXT?i.enable():this._changeControlSettings(i,!1,!1))}_updateIsLocalizableTextControlSettings(e,t){const i=this.formComponent.form.get("isLocalizableText");i&&([l.DataValueType.PHONE_TEXT,l.DataValueType.EMAIL_TEXT,l.DataValueType.WEB_TEXT].includes(t)?this._changeControlSettings(i,!1,!1):t===l.DataValueType.RICH_TEXT?i.enable():e.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(i,!1,!1):i.enable())}_updateIsValueCloneableControlSettings(e){const t=this.formComponent.form.get("isValueCloneable");t&&(e.valueSourceType===l.DefaultValueSource.Sequence?this._changeControlSettings(t,!1,!1):t.enable())}_updateDefaultValueDependedProperties(e){const i=this.formComponent.form.get("dataValueType").value;ot.Text.includes(i)&&(this._updateIsMultiLineControlSettings(e,i),this._updateIsMaskedControlSettings(e,i),this._updateIsLocalizableTextControlSettings(e,i),this._updateIsValueCloneableControlSettings(e))}_changeControlSettings(e,t,i){e.setValue(t),i?e.enable():e.disable()}_needShowNotice(e,t,i){return i.checkTypeConversion&&i.dataValueType!==t&&On.isPrecisionLost(e,t)}fillAllowedDataValueType(e,t){t.value=e,t.options=On.getAllowedChangeTypes(e).map(i=>({name:this.translateService.instant(It[i.type].translateKey),value:i.type})),t.options.unshift({name:this.translateService.instant(It[e].translateKey),value:It[e].type})}ngOnInit(){const e={name:"dataValueType",type:K.Select,label:this.translateService.instant("columnFormat")};Tt.addFieldToGroup(this.fields,gi.General,e,2),this.fillAllowedDataValueType(this.model.dataValueType,e)}ngAfterViewInit(){this.model.needShowPageDataValueTypeMessage&&this._showPageDateValueTypeMessage()}onFormCreated(e){super.onFormCreated(e);const t=e.form.get("dataValueType"),i=this.model.initialDataValueType||this.model.dataValueType;this._subscriptions.add(t.valueChanges.subscribe(s=>this._onDataValueTypeValueChanges(i,s,this.model)));const r=e.form.get("defValue");r&&(this._updateDefaultValueDependedProperties(r.value),this._subscriptions.add(r.valueChanges.subscribe(s=>this._updateDefaultValueDependedProperties(s))))}ngOnDestroy(){this.snackBar.dismiss(),this._subscriptions.unsubscribe()}}Xs.\u0275fac=function(e){return new(e||Xs)(n.\u0275\u0275directiveInject(x.pl),n.\u0275\u0275directiveInject(w.sK))},Xs.\u0275cmp=n.\u0275\u0275defineComponent({type:Xs,selectors:[["ts-meta-item-with-data-value-type-properties-page"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});class Km extends Xs{ngOnInit(){super.ngOnInit();Tt.findFieldByName(this.fields,"dataValueType").label=this.translateService.instant("columnTextFormat"),this.model.dataValueType!==l.DataValueType.PHONE_TEXT&&this.model.dataValueType!==l.DataValueType.WEB_TEXT&&this.model.dataValueType!==l.DataValueType.EMAIL_TEXT&&this.model.dataValueType!==l.DataValueType.RICH_TEXT&&Tt.addFieldToGroup(this.fields,gi.Appearance,{name:"isMultilineText",value:this.model.isMultilineText,type:K.CheckBox,label:this.translateService.instant("isMultilineTextLabel")})}}Km.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Km)))(t||Km)}}(),Km.\u0275cmp=n.\u0275\u0275defineComponent({type:Km,selectors:[["ts-text-meta-item-properties-page"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});class Xm extends Xs{ngOnInit(){super.ngOnInit();Tt.findFieldByName(this.fields,"dataValueType").label=this.translateService.instant("columnNumberFormat")}}Xm.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(Xm)))(t||Xm)}}(),Xm.\u0275cmp=n.\u0275\u0275defineComponent({type:Xm,selectors:[["ts-number-meta-item-properties-page"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});class eh extends Xs{}eh.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(eh)))(t||eh)}}(),eh.\u0275cmp=n.\u0275\u0275defineComponent({type:eh,selectors:[["ts-date-time-meta-item-properties-page"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});class th extends Ks{}th.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(th)))(t||th)}}(),th.\u0275cmp=n.\u0275\u0275defineComponent({type:th,selectors:[["ts-boolean-meta-item-properties-page"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});class XV{static acceptableOptionsValidator(e){return t=>t.value&&t.value.isNewLookup?(0,u.of)(null):QV.acceptableOptionsValidator(e)(t)}}class Rf extends Ks{constructor(e,t){super(e),this.translateService=e,this.lookupService=t,this._isCascadeDisabled=!1,this.lookupControlValidations=[{name:"required",validator:b.kI.required,message:this.translateService.instant("selectValueCaption")}]}setLookupControlDisabledState(){this.model.canChangeReferenceSchema||this.formComponent.form.get(this.lookupControlName).disable()}get referenceSchemaList(){return this.lookupService.getLookupList()}get lookupControlName(){return"lookup"}addDataSourceFieldsGroup(){Tt.addField(this.fields,{name:gi.DataSource,label:this.translateService.instant("dataSource"),type:K.FieldsGroup,children:[]},1)}addLookupField(){const e=this.referenceSchemaList;Tt.addFieldToGroup(this.fields,gi.DataSource,{label:this.translateService.instant(this.lookupControlName),name:this.lookupControlName,type:K.Lookup,value:this.model.referenceSchemaConfig?.uId?{value:this.model.referenceSchemaConfig.uId,name:this.model.referenceSchemaConfig.caption,allowEdit:this.model.referenceSchemaConfig.allowEdit}:null,options:e,isSupportCreatingMode:this.model.canCreateReferenceSchema,validationConfig:this.model.validationConfig,validations:this.lookupControlValidations,asyncValidations:[{name:"acceptableOptions",validator:XV.acceptableOptionsValidator(e),message:this.translateService.instant("selectValueCaption")},{name:"primaryDisplayColumn",validator:KD.lookupPrimaryDisplayColumn(this.lookupService),message:this.translateService.instant("lookupSchemaDoesNotHavePrimaryDisplayColumnMsg")}]})}addIsSimpleLookupField(){Tt.addFieldToGroup(this.fields,gi.DataSource,{type:K.RadioButtonGroup,label:this.translateService.instant("lookupView"),name:"isSimpleLookup",value:this.model.isSimpleLookup,options:[{name:this.translateService.instant("selectionWindow"),value:!1},{name:this.translateService.instant("list"),value:!0}]})}get isCascadeDisabled(){return this._isCascadeDisabled}set isCascadeDisabled(e){this._isCascadeDisabled=e}addIsCascadeField(){const e="boolean"==typeof this.model.isCascade&&this.model.isCascade;Tt.addFieldToGroup(this.fields,gi.DataSource,{type:K.RadioButtonGroup,label:this.translateService.instant("lookupValueDeletion"),disabled:this.isCascadeDisabled,name:"isCascade",value:e,options:[{name:this.translateService.instant("blockDeletionCaption"),value:!1},{name:this.translateService.instant("DeleteRecordsCaption"),value:!0}]})}addFields(){this.addDataSourceFieldsGroup(),this.addLookupField(),this.addIsSimpleLookupField(),this.addIsCascadeField()}ngOnInit(){this.addFields()}onFormCreated(e){super.onFormCreated(e),this.setLookupControlDisabledState()}}Rf.\u0275fac=function(e){return new(e||Rf)(n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(Pf))},Rf.\u0275cmp=n.\u0275\u0275defineComponent({type:Rf,selectors:[["ts-lookup-meta-item-properties-page"]],features:[n.\u0275\u0275ProvidersFeature([]),n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["tsMetaItemPropertiesPage","",3,"model","fields","formCreated"]],template:function(e,t){1&e&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275listener("formCreated",function(r){return t.onFormCreated(r)}),n.\u0275\u0275elementContainerEnd()),2&e&&n.\u0275\u0275property("model",t.model)("fields",t.fields)},dependencies:[Qt],encapsulation:2});let ya=class{constructor(e){this._materialIconsRegistrator=e,bV.forEach(t=>{this._materialIconsRegistrator.addIcons([{name:t,icon:f(20695)(`./${t}.svg`)},{name:`${t}-large`,icon:f(87197)(`./${t}.svg`)}])})}};ya.\u0275fac=function(e){return new(e||ya)(n.\u0275\u0275inject(rn))},ya.\u0275mod=n.\u0275\u0275defineNgModule({type:ya}),ya.\u0275inj=n.\u0275\u0275defineInjector({providers:[GS,sc,As,{provide:Vi.Ad,useFactory:function eF(a){return a.cultureInfo.sysCultureName},deps:[Q]},{provide:Vi.sG,useValue:Z_.$o},{provide:Vi._A,useClass:Z_.t7,deps:[Vi.Ad]},{provide:L2.Jm,useValue:{showDelay:300,hideDelay:300,touchendHideDelay:1e3,position:"above"}}],imports:[y.CommonModule,ci,Cc,fa,xs,_a,vc,b.u5,Js,ce.D8,U.yu,Se.Zh,Ne.FA,E.yj,$a.t,N.wp,A.Ps,z.x4,qn.jT,Z_.Yd,Ju.UK,Vi.si,et.uw,Ze.AA,ea,Ou.Bz,oi,Ei,w.aw,b.UX,Ji,Pn.To,xc,qa,Zc,ci,fa,xs,_a,Js,au,ea,oi]}),ya=(0,m.gn)([(0,l.CrtModule)({viewElements:[Ct,yt,Yt,ui,_n,fn,ra],converters:[vC,IC,$g,DC,MC,NC,kC,PC,xC,wC,TC,EC,AC,RC,jC,VC,FC,LC],requestHandlers:[aC]}),(0,m.w6)("design:paramtypes",[rn])],ya);class kf{constructor(e){this._elRef=e,this.clickOutside=new n.EventEmitter}onOutsideClick(e){const t=e.target;this._elRef.nativeElement.contains(t)||this.clickOutside.emit()}}kf.\u0275fac=function(e){return new(e||kf)(n.\u0275\u0275directiveInject(n.ElementRef))},kf.\u0275dir=n.\u0275\u0275defineDirective({type:kf,selectors:[["","crtClickOutside",""]],hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("click",function(r){return t.onOutsideClick(r)},!1,n.\u0275\u0275resolveDocument)},outputs:{clickOutside:"crtClickOutside"}});class nh{constructor(){this.isRequired=!1}get ariaRequired(){return this.isRequired}}nh.\u0275fac=function(e){return new(e||nh)},nh.\u0275dir=n.\u0275\u0275defineDirective({type:nh,selectors:[["","crtAriaRequired",""]],hostVars:1,hostBindings:function(e,t){2&e&&n.\u0275\u0275attribute("aria-required",t.ariaRequired)},inputs:{isRequired:["crtAriaRequired","isRequired"]}}),(0,m.gn)([(0,l.CrtInput)(),(0,m.w6)("design:type",Object)],nh.prototype,"isRequired",void 0);class Nf{get errors(){return this.getErrorMessages({...this.control?.errors,...this._parentControl?.errors})}get errorMessages(){return this.errors.join("\n")}get invalid(){return this._isControlInvalid(this.control)||this._isControlInvalid(this._parentControl)}set parentControl(e){this._parentControl=e,this._reuseFeatureEnabled&&Boolean(this.control)&&(this.control.markAsUntouched(),this.control.markAsPristine())}get parentControl(){return this._parentControl}constructor(e,t){this.injector=t,this.control=e;const i=this.injector.get(te,{},{optional:!0}),r=this.injector.get(se);this._reuseFeatureEnabled=(0,pe.Z)(r,"Terrasoft")?.isAngularHost&&i?.UseSchemaOutletReuseViewStrategy}_isControlInvalid(e){return e.invalid&&(e.dirty||e.touched)}getErrorMessages(e){return Object.values(e||{}).map(t=>t?.message).filter(Boolean)}validate(e){return this.control.errors}ngDoCheck(){this.control.touched&&this._parentControl?this._parentControl.markAsTouched():!this._parentControl?.touched||this.control.touched?this.control.touched&&!this._parentControl&&this.control.markAsUntouched():this.control.markAsTouched()}}var $;Nf.\u0275fac=function(e){return new(e||Nf)(n.\u0275\u0275directiveInject(b.NI),n.\u0275\u0275directiveInject(n.Injector))},Nf.\u0275dir=n.\u0275\u0275defineDirective({type:Nf,inputs:{parentControl:"parentControl"}}),function(a){a.DEFAULT="default-file-icon",a.IMAGE="file-image",a.PDF="file-pdf",a.WORD="file-word",a.EXCEL="file-excel",a.POWERPOINT="file-powerpoint"}($||($={}));const nF={doc:$.WORD,docx:$.WORD,pdf:$.PDF,ppt:$.POWERPOINT,pptx:$.POWERPOINT,xls:$.EXCEL,xlsx:$.EXCEL,bmp:$.IMAGE,gif:$.IMAGE,ico:$.IMAGE,jpeg:$.IMAGE,jpg:$.IMAGE,png:$.IMAGE,svg:$.IMAGE,webp:$.IMAGE,ai:$.IMAGE,cod:$.IMAGE,cmx:$.IMAGE,emz:$.IMAGE,eps:$.IMAGE,dib:$.IMAGE,heic:$.IMAGE,ief:$.IMAGE,jfif:$.IMAGE,jpe:$.IMAGE,pbm:$.IMAGE,pgm:$.IMAGE,pjp:$.IMAGE,pjpeg:$.IMAGE,pnm:$.IMAGE,ppm:$.IMAGE,ras:$.IMAGE,rgb:$.IMAGE,tif:$.IMAGE,xbm:$.IMAGE,xpm:$.IMAGE,xwd:$.IMAGE};class ih{getFileIcon(e,t=""){const i=e?.lastIndexOf(".")||-1;let r=$.DEFAULT;if(-1!==i){const s=e.split(".").pop();r=nF[s?.toLowerCase()]||$.DEFAULT}return t?`${r}-${t}`:r}}ih.\u0275fac=function(e){return new(e||ih)},ih.\u0275prov=n.\u0275\u0275defineInjectable({token:ih,factory:ih.\u0275fac});const iF={minWidth:0,maxWidth:Number.MAX_VALUE},XD=new n.InjectionToken("A horizontal resizing configuration");class eo{constructor(e,t){this._isRtl="rtl"===e.value,this._defaultResizingConfig=this._mergeConfigs(t,iF)}get resizeEdges(){return this._isRtl?{left:!0}:{right:!0}}_mergeConfigs(e,t){return{minWidth:e?.minWidth??t?.minWidth,maxWidth:e?.maxWidth??t?.maxWidth,defaultWidth:e?.defaultWidth??t?.defaultWidth}}isAvailableEdges(e){return this._isRtl?Boolean(e?.left):Boolean(e?.right)}getAdjustedWidth(e,t){const{minWidth:i,maxWidth:r,defaultWidth:s}=this._mergeConfigs(t,this._defaultResizingConfig);return"number"!=typeof e?s:(e=Math.min(e,r),e=Math.max(e,i))}}eo.\u0275fac=function(e){return new(e||eo)(n.\u0275\u0275inject(xe.Is),n.\u0275\u0275inject(XD,8))},eo.\u0275prov=n.\u0275\u0275defineInjectable({token:eo,factory:eo.\u0275fac});class to{static withConfig(e){return{ngModule:to,providers:[eo,{provide:XD,useValue:e}]}}}var eM,tM;to.\u0275fac=function(e){return new(e||to)},to.\u0275mod=n.\u0275\u0275defineNgModule({type:to}),to.\u0275inj=n.\u0275\u0275defineInjector({providers:[eo]});const Vf=Symbol("ItemsFiltersField"),Ff=Symbol("ItemsFiltersProperty"),ah=Symbol("RelatedItemsFiltersField"),yS=Symbol("RelatedItemsFiltersProperty"),CS=Symbol("IsItemsCustomFilterFunctionField"),SS=Symbol("IsRelatedItemsCustomFilterFunctionField"),bS=Symbol("mapFunctionField"),nM=Symbol("mapFunctionProperty");class ru{constructor(){this[eM]=!1,this[tM]=!1,this.breadCrumbs=[],this.caption$=new u.Subject,this.breadCrumbs$=new u.Subject}get[yS](){return this[ah]||(this[ah]=[]),this[ah]}get[Ff](){return this[Vf]||(this[Vf]=[]),this[Vf]}get[nM](){if(this[bS])return this[bS];throw new Error("Map function is null")}get sortFunction(){return this._sortFunction?this._sortFunction:ru._defaultSortFunction}get relatedItemsSortFunction(){return this._relatedItemsSortFunction?this._relatedItemsSortFunction:ru._defaultRelatedItemsSortFunction}static _sortByCaption(e,t){return e.caption?.toLowerCase().localeCompare(t.caption?.toLowerCase())}static _defaultSortFunction(e,t,i){const r=e?.selectedMetaPaths;if(r){const s=r.includes(t.metaPath),o=r.includes(i.metaPath);if(s&&!o)return-1;if(!s&&o)return 1}return ru._sortByCaption(t,i)}static _defaultRelatedItemsSortFunction(e,t){return ru._sortByCaption(e,t)}_getFilteredItems(e,t){return t.reduce((i,r)=>i.filter(r),e)}_filterResultData(e){return e.items=this._getFilteredItems(e.items,this[Ff]),e.relatedItems=this._getFilteredItems(e.relatedItems,this[yS]),e}_mapItems(e){return e.map(this[nM],this)}_sortResultData(e){return e.items.sort(this.sortFunction.bind(this,this.launchOptions)),e.relatedItems.sort(this.relatedItemsSortFunction),e}_updateItemsMetaPath(e,t){e.map(i=>(i.metaPath=this.getMetaPath(t,i),i.metaPathCaption=this.getMetaPathCaption(t,i),i.columnPath=this.getColumnPath(t,i),this.enrichMetaPathCaptionArray(t,i),i),this)}_enrichMetaPath(e,t){return this._updateItemsMetaPath(e.items,t),this._updateItemsMetaPath(e.relatedItems,t),e}_getAllowedItemsFilter(e){return t=>e.indexOf(t.id)>=0}_getAllowedRelatedItemsFilter(){return e=>!1}_getExcludedItemsFilter(e){return t=>e.indexOf(t.id)<0}_initializeCurrentState(e){return this.getInitialState(e).pipe((0,h.U)(t=>{this.initialState=t}))}setBreadCrumbs(e){const t=this.initialState.getRootItem();e.metaPath!==t?.metaPath?(e.caption||(e.caption=this.getCaption()),this.breadCrumbs.push(e)):this.breadCrumbs=this.initialState.getBreadCrumbs()}copyStructureExplorerItem(e){return{id:e.id,name:e.name,caption:e.caption,shortCaption:e.shortCaption,hasChildren:e.hasChildren,metaPath:e.metaPath,metaPathCaption:e.metaPathCaption,columnPath:e.columnPath,tags:e.tags?[...e.tags]:null,data:e.data}}getDefaultRootItem(){return{id:null,name:null,caption:null,hasChildren:!0,metaPath:"",metaPathCaption:"",columnPath:"",tags:null,data:null}}addItemsFilterFunction(e){if(this[CS])throw new Error("Items custom filter function already exists");this[Ff].push(e)}addRelatedItemsFilterFunction(e){if(this[SS])throw new Error("Related items custom filter function already exists");this[yS].push(e)}setMapFunction(e){this[bS]=e}getMetaPath(e,t){return e.metaPath?`${e.metaPath}.${t.id}`:t.id}getColumnPath(e,t){return e.columnPath?`${e.columnPath}.${t.name}`:t.name}getMetaPathCaption(e,t){return e.metaPathCaption?`${e.metaPathCaption}.${t.caption}`:t.metaPathCaption??t.caption}enrichMetaPathCaptionArray(e,t){t.metaPathCaptionArray?t.metaPathCaptionArray.push(t.caption):t.metaPathCaptionArray=[e.caption,t.caption]}innerInitialize(e){this.launchOptions=e.options,e.options&&Array.isArray(e.options.allowedItems)&&(this.addItemsFilterFunction(this._getAllowedItemsFilter(e.options.allowedItems)),this.addRelatedItemsFilterFunction(this._getAllowedRelatedItemsFilter())),e.options&&Array.isArray(e.options.excludedItems)&&this.addItemsFilterFunction(this._getExcludedItemsFilter(e.options.excludedItems)),e.mapFunction&&this.setMapFunction(e.mapFunction),e.itemsCustomFilterFunction&&(this[CS]=!0,this[Ff].push(e.itemsCustomFilterFunction)),e.relatedItemsCustomFilterFunction&&(this[SS]=!0,this[ah].push(e.relatedItemsCustomFilterFunction)),e.sortFunction&&(this._sortFunction=e.sortFunction),e.relatedItemsSortFunction&&(this._relatedItemsSortFunction=e.relatedItemsSortFunction)}updateBreadCrumbsByIndex(e){if(this.breadCrumbs.length<e)throw new Error("Current index is out of breadCrumbs range");this.breadCrumbs=this.breadCrumbs.slice(0,e),this.breadCrumbs$.next(this.breadCrumbs)}getItems(e){let t;if(e){if(!1===e.hasChildren)throw new Error("Can not drill down in item without children");t=this.copyStructureExplorerItem(e)}else t=this.getDefaultRootItem();return this.getAllItems(t).pipe((0,I.b)(()=>{this.caption$.next(this.getCaption()),this.setBreadCrumbs(t),this.breadCrumbs$.next(this.breadCrumbs)}),(0,h.U)(i=>this._mapItems(i)),(0,h.U)(i=>this.mapItemsToResult(i)),(0,h.U)(i=>this._enrichMetaPath(i,t)),(0,h.U)(i=>this._filterResultData(i)),(0,h.U)(i=>this._sortResultData(i)))}initialize(e){return this[Vf]=[],this[ah]=[],this.innerInitialize(e),this._initializeCurrentState(e)}}var Lf;eM=CS,tM=SS,function(a){a.Selected="selected",a.Canceled="canceled"}(Lf||(Lf={}));class vS{constructor(e){if(this._selectedItemArrays=e,!Array.isArray(e))throw new Error("SelectedItemArrays property is invalid")}getRootItem(){const e=this._selectedItemArrays[0];return e&&e[e.length-2]}getSelectedItems(){return this._selectedItemArrays.map(e=>e[e.length-1])}getBreadCrumbs(){const e=this._selectedItemArrays[0];return e?.slice(0,e?.length-1)}}var rF=f(70549);class su{_mapDataSchemaAttributeToStructureItem(e){return{name:e.name,caption:e.caption,dataValueType:e.dataValueType,item:e}}_mapToStructureExplorerItem(e){return{columnPath:e.path,caption:e.caption,metaPath:e.path,metaPathCaption:e.caption,hasChildren:!0,name:e.name,id:e.name,tags:[e.caption,e.name],data:{name:e.name,caption:e.caption,isDataSource:!1,item:e}}}_mapDataSchemaToStructureItem(e,t){return{name:e,caption:t.caption,item:t,isDataSource:!0,dataSchemaType:t.type}}getDataSchemaAttributeStructureItemsBySchemaName(e,t,i){return this.getDataSchemaByName(e,i).pipe((0,h.U)(r=>({caption:r.caption,structureItems:r.attributes.filter(s=>s.usageType!==l.DataSchemaAttributeUsageType.None).map(s=>this._mapDataSchemaAttributeToStructureItem(s))})),(0,B.z)(r=>t?.useBackwards?this.getDataSchemaBackReference({schemaName:e,schemaCaption:r.caption?.toString()}).pipe((0,h.U)(s=>[...r.structureItems,...s])):(0,u.of)(r.structureItems)))}getDataSchemaAttributeStructureExplorerItemByPath(e,t){return this.getDataSchemaAttributeByPath(e,t).pipe((0,h.U)(i=>this._mapToStructureExplorerItem(i)))}getDataSourceStructureItemByName(e){return this.getDataSourceByName(e).pipe((0,M.w)(t=>(0,u.forkJoin)([(0,u.of)(t),t.getSchema().pipe((0,Ee.q)(1))])),(0,h.U)(([t,i])=>this._mapDataSchemaToStructureItem(t.dataSourceName,i)))}getDataSourceStructureItems(){return this.getDataSources().pipe((0,rF.J)(),(0,M.w)(e=>(0,u.forkJoin)([(0,u.of)(e),e.getSchema().pipe((0,Ee.q)(1))]).pipe((0,P.h)(t=>!t[0].hasErrors))),(0,h.U)(([e,t])=>this._mapDataSchemaToStructureItem(e.dataSourceName,t)),(0,KS.q)())}}su.\u0275fac=function(e){return new(e||su)},su.\u0275prov=n.\u0275\u0275defineInjectable({token:su,factory:su.\u0275fac});class no extends ru{constructor(e,t,i,r,s){super(),this._dataSourceStructureItemService=e,this._rightsService=t,this._userInfo=i,this.translateService=r,this.featureValues=s,this._defaultCaptionKey="CDK.DataGroupCaption",this.name="DataSourceStructureExplorerDataProvider",this.setMapFunction(this._mapItemToExplorerItem)}_setTranslations(){this._defaultCaption=this.translateService.instant(this._defaultCaptionKey)}_getAttributes(e,t){return(0,u.forkJoin)([(0,u.of)(this.featureValues.UseColumnReadPermissionsForStructureExplorer),this._dataSourceStructureItemService.getDataSchemaAttributeStructureItemsBySchemaName(e,this.launchOptions,t)]).pipe((0,B.z)(([i,r])=>(0,u.iif)(()=>i&&t===l.DataSchemaType.Entity,this._rightsService.getCanReadColumns({schemaName:e,columnNames:r.filter(s=>s.item.attributeType===l.DataSchemaAttributeType.OwnAttribute).map(s=>s.name)}).pipe((0,B.z)(s=>{let o=[];return this._userInfo.isSSP&&(r=r.filter(c=>c.item.usageType===l.DataSchemaAttributeUsageType.General)),s&&0!==Object.keys(s).length?(o=r.filter(c=>!1!==s[c.name]),(0,u.of)(o)):(0,u.of)(r)})),(0,u.of)(r))))}_getDataSources(){return this._dataSourceStructureItemService.getDataSourceStructureItems()}_getDataSourceStructureItemByName(e){return this._dataSourceStructureItemService.getDataSourceStructureItemByName(e)}_joinPath(...e){return e.filter(Ii.Ig).join(".")}_setStructureExplorerItemPaths(e,t){e.metaPath=this._joinPath(t?.metaPath,e.metaPath),e.columnPath=this._joinPath(t?.columnPath,e.columnPath),e.metaPathCaption=this._joinPath(t?.caption,e.metaPathCaption)}getCaption(){return this._currentSelectedItem?.caption||this._defaultCaption}mapItemsToResult(e){const t={items:[],relatedItems:[],hideItems:!1};return e.forEach(i=>{const r=i.data.item,s=r.attributeType;i.data.isDataSource?(t.relatedItems.push(i),t.hideItems=!0):r.dataValueType===l.DataValueType.Lookup&&r.referenceSchemaName&&(i.data.dataSchemaType=l.DataSchemaType.Entity,t.relatedItems.push(i)),s!==l.DataSchemaAttributeType.BackReferenceAttribute&&t.items.push(i)}),t}getChildItems(e){return this._getAttributes(e)}getAllItems(e){const t=null==e.data;if(this._currentSelectedItem=e.data,t)return this._getDataSources();const i=e.data.item;return this._getAttributes(i.referenceSchemaName||i.name,this._currentSelectedItem?.dataSchemaType)}_getStructureItemIcon(e){if(e.item instanceof El&&e.item.defaultValueSchema){const{valueSourceType:t}=e.item.defaultValueSchema;if(t===l.DefaultValueSource.Sequence)return"autonumber-icon"}return null}_mapItemToExplorerItem(e){const t={columnPath:e.item.name,data:e,hasChildren:!0,tags:[e.caption,e.name],caption:e.caption,shortCaption:e.shortCaption,id:e.name,name:e.name,metaPathCaption:e.caption,metaPath:e.name},i=this._getStructureItemIcon(e);return i&&(t.iconName=i),t}_mapDataSourceItemToStructureExplorerItem(e){const t={columnPath:e.item.name,hasChildren:!0,caption:e.caption,shortCaption:e.shortCaption,metaPath:e.name,id:e.name,metaPathCaption:e.caption,name:e.name,tags:[e.caption,e.name],data:{name:e.name,caption:e.caption,isDataSource:!0,item:e.item,dataSchemaType:e.dataSchemaType}},i=this._getStructureItemIcon(e);return i&&(t.iconName=i),t}_findOwnAttribute(e,t,i){return this._getAttributes(e,i).pipe((0,h.U)(r=>r.map(s=>this._mapItemToExplorerItem(s))),(0,h.U)(r=>r.find(s=>s.name===t)))}_getSelectedReferenceAttributes(e,t){const i=t.split("."),r=e.item.name,s=e.item.caption;return(0,u.combineLatest)(i.map((o,c)=>{const d=`${r}.${i.slice(0,c+1).join(".")}`;return this._dataSourceStructureItemService.getDataSchemaAttributeStructureExplorerItemByPath(d,e.dataSchemaType)})).pipe((0,I.b)(o=>{o.forEach((c,d)=>{const p=o[d-1];this._setStructureExplorerItemPaths(c,p)}),o.forEach(c=>{c.metaPath=this._joinPath(e.name,c.metaPath),c.columnPath=this._joinPath(r,c.columnPath),c.metaPathCaption=this._joinPath(s,c.metaPathCaption)})}))}_getSelectedAttributes(e,t){const i=e.item.name;return this._findOwnAttribute(i,t,e.dataSchemaType).pipe((0,B.z)(r=>{if(r){r.columnPath=`${e.name}.${r.columnPath}`,r.metaPath=`${e.name}.${r.name}`;const s=`${e.caption}.${r.caption}`;return r.metaPathCaption=s,(0,u.of)([r])}return this._getSelectedReferenceAttributes(e,t)}))}_getSelectedPath(e){if(!e||0===e.length)return null;this._currentSelectedItem=null;const t=e[0].split(".");return{dataSourceName:t.shift(),path:t.join(".")}}_getRootItem(){const e=this.getDefaultRootItem();return e.caption=this.getCaption(),e}_getInitialStataForDataSource({dataSourceName:e,path:t}){const i=this._getRootItem();return this._getDataSourceStructureItemByName(e).pipe((0,I.b)(r=>{i.id=r.name,i.caption=r.caption,i.data=r}),(0,h.U)(r=>({structureItem:r,structureExplorerItem:this._mapDataSourceItemToStructureExplorerItem(r)})),(0,B.z)(({structureItem:r,structureExplorerItem:s})=>(0,u.iif)(()=>Boolean(t),this._getSelectedAttributes(r,t).pipe((0,h.U)(o=>[s,...o])),(0,u.of)([i,s]))),(0,h.U)(r=>new vS([r])))}_getInitialStateForSelectedPath({dataSourceName:e,path:t}){return this._getDataSources().pipe((0,B.z)(i=>{const r=i.find(c=>c.name===e),s=this._mapDataSourceItemToStructureExplorerItem(r),o=this._getRootItem();return this._getSelectedAttributes(r,t).pipe((0,h.U)(c=>new vS([[o,s,...c]])))}))}getInitialState(e){if(this._setTranslations(),this._currentSelectedItem=null,e.navigateOnlyThroughDataSource)return this._getInitialStataForDataSource({...this._getSelectedPath(e.options?.selectedMetaPaths),dataSourceName:e.navigateOnlyThroughDataSource});const t=this._getSelectedPath(e.options?.selectedMetaPaths);return t?this._getInitialStateForSelectedPath(t):(0,u.of)(new vS([]))}}no.\u0275fac=function(e){return new(e||no)(n.\u0275\u0275inject(su),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Q),n.\u0275\u0275inject(w.sK),n.\u0275\u0275inject(te))},no.\u0275prov=n.\u0275\u0275defineInjectable({token:no,factory:no.\u0275fac});class ou{constructor(e,t){this._queryExecutor=e,this._translateService=t,this._byColumnCaptionKey="CDK.ByColumnCaption",this._whereColumnCaptionKey="CDK.WhereColumnCaption",this._isColumnCaptionKey="CDK.IsColumnCaption",this._whereColumnCaption=this._translateService.instant(this._whereColumnCaptionKey),this._isColumnCaption=this._translateService.instant(this._isColumnCaptionKey),this._byColumnCaption=this._translateService.instant(this._byColumnCaptionKey)}_getBackwardReferencesEsq(e){const t=new l.EntitySchemaQuery("SysEntitySchemaReference");return t.addSchemaColumn("ColumnCaption","ColumnCaption"),t.addSchemaColumn("ColumnName","ColumnName"),t.addSchemaColumn("SysSchema.Name","Name"),t.addSchemaColumn("SysSchema.Caption","Caption"),t.rowCount=-1,t.isDistinct=!0,t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"[SysSchema:Id:ReferenceSchema].Name",e),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Not_start_with,"SysSchema.Name","VwSys"),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Not_start_with,"SysSchema.Name","Sys"),t.filters.addSchemaColumnFilterWithParameter(l.ComparisonType.Equal,"UsageType",0),t}_mapRowItemToDataSourceStructureItem(e,t){const i=e.Name,r=e.ColumnName,s=e.ColumnCaption,o=e.Caption,c=`${t} ${this._isColumnCaption} ${s}`,d=`(${this._whereColumnCaption} ${c})`,p=t===s?`${o} (${this._byColumnCaption} ${s})`:`${o} ${d}`;return{caption:p,shortCaption:o,dataValueType:l.DataValueType.Lookup,name:i,item:{caption:p,attributeType:l.DataSchemaAttributeType.BackReferenceAttribute,dataValueType:l.DataValueType.Lookup,isValueCloneable:!0,name:i,path:`[${i}:${r}].Id`,referenceSchemaName:i}}}getBackwardReferences(e){const t=this._getBackwardReferencesEsq(e.schemaName);return this._queryExecutor.executeSelectQuery(t).pipe((0,h.U)(i=>i.map(r=>this._mapRowItemToDataSourceStructureItem(r,e.schemaCaption))))}}ou.\u0275fac=function(e){return new(e||ou)(n.\u0275\u0275inject(me),n.\u0275\u0275inject(w.sK))},ou.\u0275prov=n.\u0275\u0275defineInjectable({token:ou,factory:ou.\u0275fac});var oF=f(41050);const iM=new n.InjectionToken("DataProviders");class io{constructor(e){this._dataProviders=e,this._dataProvidersTable=this._dataProviders}get(){return this._dataProvidersTable}}io.\u0275fac=function(e){return new(e||io)(n.\u0275\u0275inject(iM))},io.\u0275prov=n.\u0275\u0275defineInjectable({token:io,factory:io.\u0275fac});class rh{transform(e,t){return e&&t?e.filter(i=>!i.parentId||t.includes(i.parentId)):e}}rh.\u0275fac=function(e){return new(e||rh)},rh.\u0275pipe=n.\u0275\u0275definePipe({name:"filterStructureItems",type:rh,pure:!1});const lF=["searchInput"];function cF(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",20),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function uF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",21),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext(),s=r.$implicit,o=r.index,c=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(c.onBreadCrumbsClick(s,o))}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",22),n.\u0275\u0275text(4," > "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function dF(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,cF,3,1,"ng-container",19),n.\u0275\u0275template(2,uF,5,1,"ng-container",19),n.\u0275\u0275elementContainerEnd()),2&a){const t=e.last;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t)}}function pF(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275template(1,dF,3,2,"ng-container",18),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.breadCrumbs)}}function mF(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"label"),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275attribute("title",n.\u0275\u0275pipeBind1(1,2,t.fieldsTabTooltip$)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(3,4,t.fieldsTabCaption$)," ")}}const hF=function(a){return{"expanded-icon":a}};function gF(a,e){if(1&a&&n.\u0275\u0275element(0,"div",32),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(1,hF,null==i.expandedGroups?null:i.expandedGroups.includes(t.id)))}}function fF(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-checkbox",33),n.\u0275\u0275listener("click",function(i){return i.preventDefault()}),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("checked",i.isItemChecked(t))}}function _F(a,e){if(1&a&&n.\u0275\u0275element(0,"mat-icon",34),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("svgIcon",i.getItemIcon(t))}}const yF=function(a,e,t,i){return{"checkbox-is-visible":a,"even-row":e,"child-item":t,"group-item":i}};function CF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",27),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.onItemChecked(s))})("mouseover",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.hovered=s.id)})("mouseleave",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.hovered=null)}),n.\u0275\u0275template(1,gF,1,3,"div",28),n.\u0275\u0275template(2,fF,1,1,"mat-checkbox",29),n.\u0275\u0275template(3,_F,1,1,"mat-icon",30),n.\u0275\u0275elementStart(4,"div",31),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=e.index,r=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(6,yF,(r.hovered===t.id||r.isItemChecked(t))&&"group"!==t.type,i%2,"child"===t.type,"group"===t.type)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","group"===t.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","group"!==t.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isShowTypeIcons()),n.\u0275\u0275advance(1),n.\u0275\u0275property("title",r.getCaption(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.getCaption(t)," ")}}function SF(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,CF,6,11,"div",26),n.\u0275\u0275pipe(2,"filterStructureItems"),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind2(2,1,t.data.items,t.expandedGroups))}}function bF(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-tab",23),n.\u0275\u0275template(1,mF,4,6,"ng-template",24),n.\u0275\u0275template(2,SF,3,4,"ng-container",25),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(),i=n.\u0275\u0275reference(18);n.\u0275\u0275property("disabled",!t.hasLoaded),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.data.items.length>0)("ngIfElse",i)}}const vF=function(a){return{"even-row":a}};function IF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",37),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.onItemDrilledDown(s))}),n.\u0275\u0275element(1,"div",38),n.\u0275\u0275elementStart(2,"div",39),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&a){const t=e.$implicit,i=e.index;n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,vF,i%2)),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(t.caption)}}function DF(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,IF,4,4,"div",36),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.data.relatedItems)}}function MF(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-tab",35),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275template(2,DF,2,1,"ng-container",25),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(),i=n.\u0275\u0275reference(18);n.\u0275\u0275property("label",n.\u0275\u0275pipeBind1(1,4,t.relatedObjectsTabCaption$))("disabled",!t.hasLoaded),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.data.relatedItems.length>0)("ngIfElse",i)}}function wF(a,e){1&a&&(n.\u0275\u0275elementStart(0,"div",41)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd()()),2&a&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,1,"StructureExplorerDialog.NoData")))}function xF(a,e){if(1&a&&n.\u0275\u0275template(0,wF,4,3,"div",40),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",t.hasLoaded)}}const EF=function(a){return{rtl:a}};class Cn{constructor(e,t,i,r,s,o,c,d,p,g){this._data=e,this.dialogRef=t,this.translateService=i,this._directionality=r,this._matIconRegistry=s,this._domSanitizer=o,this._maskService=c,this._changeDetector=d,this._translateService=p,this._featureValues=g,this._afterViewInit$=new u.Subject,this._destroyed$=new u.Subject,this.expandedGroups=[],this.rootItem=null,this.isBackWardReference=!1,this.selectedItems=[],this.selectedTabIndex=0,this.fieldsTabCaption$=new u.ReplaySubject(1),this.fieldsTabTooltip$=new u.ReplaySubject(1),this.relatedObjectsTabCaption$=new u.ReplaySubject(1),this.searchKey=null,this.data=Cn._getEmptyData(),this._fullData=Cn._getEmptyData(),this._provider=e.providers[0],this._registerIcons(),this.viewConfig=this._data.viewConfig}static _includeSubstring(e,t){const i=e.toLowerCase(),r=t.toLowerCase();return-1!==i.indexOf(r)}static _getEmptyData(){return{items:[],relatedItems:[]}}_registerIcons(){["binary-icon","boolean-icon","color-icon","date-icon","date-time-icon","float-icon","function-icon","guid-icon","image-icon","image-link-icon","integer-icon","lookup-icon","string-icon","time-icon","rich-text-icon","phone-text-icon","autonumber-icon","email-text-icon","web-text-icon"].forEach(t=>{this._matIconRegistry.addSvgIconLiteral(t,this._domSanitizer.bypassSecurityTrustHtml(f(49735)("./"+t+".svg")))})}_getFieldTabCaption(e){const t=this.data?.items?.length,r=this.searchKey&&this.searchKey!==Z.Ld.Empty?` (${t})`:"",s=this.viewConfig?.fieldsTabTranslateKey||"StructureExplorerDialog.FieldsTabCaption",o=this.translateService.instant(s);return Z.Ld.Format(o,e,r)}_getRelatedObjectsTabCaption(){const e=this.data?.relatedItems?.length,i=this.searchKey&&this.searchKey!==Z.Ld.Empty?` (${e})`:"",r=this.translateService.instant("StructureExplorerDialog.RelatedObjectsTabCaption");return Z.Ld.Format(r,i)}_updateBreadCrumbsByIndex(e){this._provider.updateBreadCrumbsByIndex(e)}_filterData(e){e&&""!==e?(this.data.items=this._fullData.items.filter(t=>Cn._includeSubstring(t.caption,e)),this.data.relatedItems=this._fullData.relatedItems.filter(t=>Cn._includeSubstring(t.caption,e))):(this.data.items=this._fullData.items,this.data.relatedItems=this._fullData.relatedItems)}_initSelectedItems(){this.selectedItems=this._provider.initialState.getSelectedItems(),this.selectedItems.length>1&&!this._data.enableMultiSelection&&(this.selectedItems=[])}_isFullDataEmpty(){return 0===this._fullData.items.length&&0===this._fullData.relatedItems.length}_focusSearchInput(){(0,u.timer)(0).subscribe(()=>{this._searchInputElement.focused=!0,this._searchInputElement.focus()})}_selectRelatedItemsTab(){this.selectedTabIndex=1}_selectItemsTab(){this.selectedTabIndex=0}_transformToCountAggregationItem(e){const t=e.data;if(e.columnPath=this._formReferenceColumnPath(e?.data?.item?.path),this._isForwardReferenceItem(e)){const i=e?.columnPath?.split(".");i.pop(),e.columnPath=`${i.join(".")}.Id`}return t.item.attributeType="Aggregation",t.item.dataValueType=l.DataValueType.Integer,t.dataValueType=l.DataValueType.Integer,e.data.item.aggregationFunction=l.AggregationFunction.Count,e.data.item.aggregationFunctionCaption=this.getAggregationCaption(l.AggregationFunction.Count),e.id=`${e.id}.${l.AggregationFunction.Count}`,e.metaPath=`${e.metaPath}.${l.AggregationFunction.Count}`,e}_formReferenceColumnPath(e){const t=this.breadCrumbs.filter(i=>!i.data.isDataSource);return t.map((i,r)=>{const s=i?.data?.item?.path?.split(".")[0],o=e?.split(".").pop();return r===t.length-1?`${s}.${o}`:s}).join(".")}_isAggregationOrBackReferenceItem(e){return"Aggregation"===e?.data?.item?.attributeType||"BackReference"===e?.data?.item?.attributeType}_isForwardReferenceItem(e){return"Own"===e?.data?.item?.attributeType}_handleGroupClick(e){const t=this.expandedGroups.indexOf(e.id);-1!==t?this.expandedGroups.splice(t,1):this.expandedGroups.push(e.id)}_buildBackReferenceItems(e){const i={useBackwardRootPath:!1,useAggregationFunctionColumns:!0,...this.viewConfig?.backwardItemsConfig};if(i.useBackwardRootPath)return this.generateBackReferenceItems(e);if(i.useAggregationFunctionColumns){const r=(0,q.Z)(this.rootItem);return[this._transformToCountAggregationItem(r),...this.generateAggregationItems(e)]}return[]}generateBackReferenceItems(e){const t=[];return e.forEach(i=>{const r=(0,q.Z)(i);r.columnPath=this._formReferenceColumnPath(r?.data?.item?.path),t.push(r)}),t}generateAggregationItems(e){const t=[];return e.forEach(i=>{const r=i.data?.dataValueType;let s=function aF(a){switch(a){case l.DataValueType.Integer:case l.DataValueType.Float:case l.DataValueType.FLOAT1:case l.DataValueType.FLOAT2:case l.DataValueType.FLOAT3:case l.DataValueType.FLOAT4:case l.DataValueType.FLOAT8:case l.DataValueType.Money:return[{func:l.AggregationFunction.Sum,captionResource:"Sum"},{func:l.AggregationFunction.Avg,captionResource:"Avg"},{func:l.AggregationFunction.Max,captionResource:"MaxValue"},{func:l.AggregationFunction.Min,captionResource:"MinValue"},{func:l.AggregationFunction.TopOne,captionResource:"TopOne"}];case l.DataValueType.Date:case l.DataValueType.DateTime:return[{func:l.AggregationFunction.Max,captionResource:"MaxDate"},{func:l.AggregationFunction.Min,captionResource:"MinDate"},{func:l.AggregationFunction.TopOne,captionResource:"TopOne"}];default:return[{func:l.AggregationFunction.TopOne,captionResource:"TopOne"}]}}(r);this._featureValues.StructureExplorerTopOneFunction||(s=s.filter(o=>o.func!==l.AggregationFunction.TopOne)),0!==s.length&&r!==l.DataValueType.Lookup&&r!==l.DataValueType.Image&&r!==l.DataValueType.IMAGELOOKUP&&(i.type="group",t.push(i),s.forEach(o=>{const{func:c,captionResource:d}=o,p=(0,q.Z)(i);p.id=`${p.id}.${c}`,p.parentId=i.id,p.metaPath=`${p.metaPath}.${c}`,p.type="child",p.data.item.attributeType="Aggregation",p.data.item.aggregationFunction=c,p.data.item.aggregationFunctionCaption=this.getAggregationCaption(d),p.data.item.referenceSchemaName=this.rootItem.data?.item.referenceSchemaName,p.columnPath=this._formReferenceColumnPath(p?.data?.item?.path),t.push(p)}))}),t}getAggregationCaption(e){return this._translateService.instant("AggregationNames."+e)}ngOnInit(){this._provider.caption$.pipe((0,L.R)(this._destroyed$)).subscribe(e=>{this._schemaName=e}),this.rootItem=this._provider.initialState.getRootItem(),this._initSelectedItems(),this.prepareBreadCrumbs(),(0,u.forkJoin)({dataLoaded:this.prepareData(),afterViewInit:this._afterViewInit$}).pipe((0,L.R)(this._destroyed$)).subscribe(()=>{this._focusSearchInput()})}ngAfterViewInit(){this._afterViewInit$.next(),this._afterViewInit$.complete()}prepareBreadCrumbs(){this.breadCrumbs=[],this._provider.breadCrumbs$.pipe((0,L.R)(this._destroyed$)).subscribe(e=>{this.breadCrumbs=e})}prepareData(){return this.hasLoaded=!1,this._maskService.showBodyMask({delay:1e3}),this.data.items=[],this.data.relatedItems=[],this._provider.getItems(this.rootItem).pipe((0,G.K)(e=>(console.warn(`StructureExplorerComponent#prepareData error: ${e}`),(0,u.of)({items:[],relatedItems:[]}))),(0,h.U)(e=>{this._fullData=e,this.isBackWardReference&&(this._fullData.items=this._buildBackReferenceItems(this._fullData.items)),this.data.hideItems=this._fullData.hideItems,this.onSearchKeyChanged(this.searchKey),this.hasRelatedItems=e.relatedItems.length>0,this.showItemsTab=!0!==e.hideItems,this.showItemsTab||this._selectRelatedItemsTab(),this._maskService.hideBodyMask(),this.hasLoaded=!0}))}onSearchKeyChanged(e){this.searchKey=e,this._isFullDataEmpty()||this._filterData(this.searchKey);const t=this.isBackWardReference?this.rootItem.shortCaption||this.rootItem.caption:this._schemaName,i=this.isBackWardReference?this.rootItem.caption:this._schemaName;this.fieldsTabCaption$.next(this._getFieldTabCaption(t)),this.fieldsTabTooltip$.next(this._getFieldTabCaption(i));const r=this._getRelatedObjectsTabCaption();this.relatedObjectsTabCaption$.next(r)}onBreadCrumbsClick(e,t){this._updateBreadCrumbsByIndex(t),this.onItemDrilledDown(e.id?e:null)}onItemDrilledDown(e){this.isBackWardReference=this._isAggregationOrBackReferenceItem(e)||this.isBackWardReference,this.rootItem=e,this.prepareBreadCrumbs(),this._data.collectDrillDownItems||(this.selectedItems=[]),this.searchKey="",this.expandedGroups=[],this.prepareData().pipe((0,L.R)(this._destroyed$)).subscribe(()=>{this._changeDetector.detectChanges(),this._selectItemsTab(),this._focusSearchInput()})}onItemChecked(e){if("group"!==e.type)if(this.isItemChecked(e)){const t=this.selectedItems.map(({metaPath:i})=>i).indexOf(e.metaPath);this.selectedItems.splice(t,1)}else this._data.enableMultiSelection||(this.selectedItems=[]),this.selectedItems.push(e);else this._handleGroupClick(e)}onItemSelected(){this.dialogRef.close({selectedItems:this.selectedItems,dialogResult:Lf.Selected})}onCancelled(){this.dialogRef.close({selectedItems:[],dialogResult:Lf.Canceled})}isItemChecked(e){return this.selectedItems.map(({metaPath:t})=>t).includes(e.metaPath)}isRtl(){return"rtl"===this._directionality.value}getItemIcon(e){if(e.iconName)return e.iconName;if(this._isAggregationOrBackReferenceItem(e))return"function-icon";switch(e.data.dataValueType){case l.DataValueType.Boolean:return"boolean-icon";case l.DataValueType.Date:return"date-icon";case l.DataValueType.Color:return"color-icon";case l.DataValueType.Guid:return"guid-icon";case l.DataValueType.DateTime:return"date-time-icon";case l.DataValueType.Time:return"time-icon";case l.DataValueType.Integer:return"integer-icon";case l.DataValueType.Lookup:return"lookup-icon";case l.DataValueType.Blob:case l.DataValueType.FILE:return"binary-icon";case l.DataValueType.Image:return"image-icon";case l.DataValueType.IMAGELOOKUP:return"image-link-icon";case l.DataValueType.Float:case l.DataValueType.FLOAT1:case l.DataValueType.FLOAT2:case l.DataValueType.FLOAT3:case l.DataValueType.FLOAT4:case l.DataValueType.FLOAT8:case l.DataValueType.Money:return"float-icon";case l.DataValueType.RICH_TEXT:return"rich-text-icon";case l.DataValueType.PHONE_TEXT:return"phone-text-icon";case l.DataValueType.WEB_TEXT:return"web-text-icon";case l.DataValueType.EMAIL_TEXT:return"email-text-icon";case l.DataValueType.Text:case l.DataValueType.LOCALIZABLE_STRING:case l.DataValueType.HASH_TEXT:case l.DataValueType.SECURE_TEXT:case l.DataValueType.SHORT_TEXT:case l.DataValueType.MEDIUM_TEXT:case l.DataValueType.MAXSIZE_TEXT:case l.DataValueType.LONG_TEXT:case l.DataValueType.METADATA_TEXT:default:return"string-icon"}}getCaption(e){return this._isAggregationOrBackReferenceItem(e)?e.data?.item?.aggregationFunctionCaption:e.caption}ngOnDestroy(){this._updateBreadCrumbsByIndex(0),this._maskService.hideBodyMask(),this._destroyed$.next(),this._destroyed$.complete()}isShowTypeIcons(){return!this.viewConfig?.hideTypeIcons}isShowBreadcrumbs(){return!this.viewConfig?.hideBreadcrumbs}getTitle(){const e=this.viewConfig?.titleTranslateKey||"StructureExplorerDialog.Title";return this._translateService.get(e)}}Cn.\u0275fac=function(e){return new(e||Cn)(n.\u0275\u0275directiveInject(E.eJ),n.\u0275\u0275directiveInject(E.hV),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(xe.Is),n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer),n.\u0275\u0275directiveInject(an),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(te))},Cn.\u0275cmp=n.\u0275\u0275defineComponent({type:Cn,selectors:[["ts-structure-explorer"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(lF,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t._searchInputElement=i.first)}},decls:26,vars:24,consts:[[1,"structure-explorer-ct",3,"ngClass"],["mat-dialog-title","",1,"structure-explorer-title"],["class","structure-explorer-breadcrumbs-ct",4,"ngIf"],[1,"search-container"],["floatLabel","never",1,"search-container-form-field"],["matInput","","type","text","spellcheck","false","autocomplete","off",1,"search-field",3,"placeholder","value","disabled","keyup"],["searchInput","matInput"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close",3,"click"],[1,"clear-icon"],[1,"structure-explorer-content"],["mat-align-tabs","start","animationDuration","0ms",1,"structure-explorer-content-tab-group",3,"selectedIndex","selectedTabChange"],[3,"disabled",4,"ngIf"],[3,"label","disabled",4,"ngIf"],["noItems",""],[1,"structure-explorer-actions"],["mat-button","","mat-dialog-close","",1,"action-button","cancelBtn",3,"click"],["mat-flat-button","","color","primary",1,"action-button","selectBtn",3,"disabled","click"],[1,"structure-explorer-breadcrumbs-ct"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"structure-explorer-breadcrumbs"],[1,"structure-explorer-breadcrumbs","active",3,"click"],[1,"structure-explorer-breadcrumbs","delimiter"],[3,"disabled"],["mat-tab-label",""],[4,"ngIf","ngIfElse"],["class","structure-explorer-item-ct",3,"ngClass","click","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"structure-explorer-item-ct",3,"ngClass","click","mouseover","mouseleave"],["class","related-object-icon",3,"ngClass",4,"ngIf"],["class","structure-explorer-item-checkbox",3,"checked","click",4,"ngIf"],["class","structure-explorer-item-icon",3,"svgIcon",4,"ngIf"],[1,"structure-explorer-item-caption",3,"title"],[1,"related-object-icon",3,"ngClass"],[1,"structure-explorer-item-checkbox",3,"checked","click"],[1,"structure-explorer-item-icon",3,"svgIcon"],[3,"label","disabled"],["class","structure-explorer-item-ct related-objects",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"structure-explorer-item-ct","related-objects",3,"ngClass","click"],[1,"related-object-icon"],[1,"related-object-item-caption"],["class","no-items-ctr",4,"ngIf"],[1,"no-items-ctr"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,pF,2,1,"div",2),n.\u0275\u0275elementStart(5,"div",3)(6,"mat-form-field",4)(7,"label")(8,"input",5,6),n.\u0275\u0275listener("keyup",function(r){return t.onSearchKeyChanged(r.target.value)}),n.\u0275\u0275pipe(10,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(11,"button",7),n.\u0275\u0275listener("click",function(){return t.onSearchKeyChanged(null)}),n.\u0275\u0275element(12,"mat-icon",8),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(13,"mat-dialog-content",9)(14,"mat-tab-group",10),n.\u0275\u0275listener("selectedTabChange",function(r){return t.selectedTabIndex=r.index}),n.\u0275\u0275template(15,bF,3,3,"mat-tab",11),n.\u0275\u0275template(16,MF,3,6,"mat-tab",12),n.\u0275\u0275template(17,xF,1,1,"ng-template",null,13,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(19,"mat-dialog-actions",14)(20,"button",15),n.\u0275\u0275listener("click",function(){return t.onCancelled()}),n.\u0275\u0275text(21),n.\u0275\u0275pipe(22,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(23,"button",16),n.\u0275\u0275listener("click",function(){return t.onItemSelected()}),n.\u0275\u0275text(24),n.\u0275\u0275pipe(25,"translate"),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(22,EF,t.isRtl())),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(3,14,t.getTitle())," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isShowBreadcrumbs()),n.\u0275\u0275advance(4),n.\u0275\u0275propertyInterpolate("placeholder",n.\u0275\u0275pipeBind1(10,16,"StructureExplorerDialog.SearchPlaceHolder")),n.\u0275\u0275property("value",t.searchKey)("disabled",!t.hasLoaded),n.\u0275\u0275advance(3),n.\u0275\u0275styleProp("visibility",t.searchKey?"inherit":"hidden"),n.\u0275\u0275advance(3),n.\u0275\u0275property("selectedIndex",t.selectedTabIndex),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showItemsTab),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasRelatedItems),n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(22,18,"StructureExplorerDialog.CancelButtonCaption")," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",!t.hasLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(25,20,"StructureExplorerDialog.SelectButtonCaption")," "))},dependencies:[y.NgClass,y.NgForOf,y.NgIf,E.aO,E.YS,E.Rb,E.ev,He.SK,He.gz,He.R7,U.eB,Se.FC,N.v_,N.nX,z.k0,A.Hw,y.AsyncPipe,w.X$,rh],styles:['.mat-dialog-title[_ngcontent-%COMP%]{margin:0}.structure-explorer-ct[_ngcontent-%COMP%]{width:40vw;height:72vh;display:flex;flex-direction:column}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:not(.related-objects){padding-left:0;padding-right:36px}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:not(.related-objects).checkbox-is-visible{padding-left:0;padding-right:10px}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:not(.related-objects).checkbox-is-visible   .structure-explorer-item-checkbox[_ngcontent-%COMP%]{margin-right:0}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .mat-checkbox-inner-container[_ngcontent-%COMP%]{margin-left:0}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-title[_ngcontent-%COMP%]{margin-bottom:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs-ct[_ngcontent-%COMP%]{margin:0 0 16px;min-height:20px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs.active[_ngcontent-%COMP%]{cursor:pointer}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs.delimiter[_ngcontent-%COMP%]{margin:0 8px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{margin-bottom:8px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]{width:100%}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{line-height:18px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:16px;height:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%], .structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%]{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPGcgaWQ9Ikdyb3VwXzIzNTUiIGRhdGEtbmFtZT0iR3JvdXAgMjM1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MyAtMjEzNCkiPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE0NiIgZGF0YS1uYW1lPSJMaW5lIDE0NiIgeTE9IjEwIiB4Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0Ni41IDIxMzcuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzc1NzU3NSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xNDciIGRhdGEtbmFtZT0iTGluZSAxNDciIHgyPSIxMCIgeTI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NDYuNSAyMTM3LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3NTc1NzUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xMDkyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAxMDkyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0MyAyMTM0KSIgZmlsbD0ibm9uZSIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]{height:100%;overflow-x:hidden}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-content-tab-group[_ngcontent-%COMP%]{height:100%}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]{min-height:35px;border-bottom:1px solid lightgrey;display:flex;align-items:center;cursor:pointer;padding-left:36px;gap:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:after{content:"";min-height:inherit}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.checkbox-is-visible[_ngcontent-%COMP%]{padding-left:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.checkbox-is-visible[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]{display:block;height:16px;width:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.checkbox-is-visible[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout{align-items:center;vertical-align:baseline}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.group-item[_ngcontent-%COMP%]{padding-left:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.group-item[_ngcontent-%COMP%]   .expanded-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.child-item[_ngcontent-%COMP%]{padding-left:55px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.child-item.checkbox-is-visible[_ngcontent-%COMP%]{padding-left:29px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.related-objects[_ngcontent-%COMP%]{padding-left:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]{display:none}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-icon[_ngcontent-%COMP%]{display:block;height:16px;width:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .related-object-icon[_ngcontent-%COMP%]{display:block;height:16px;width:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmEsLmJ7ZmlsbDpub25lO30uYntzdHJva2U6IzgwOTViMzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxNikgcm90YXRlKC05MCkiPjxyZWN0IGNsYXNzPSJhIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTYsMCwwLDZjLjAwOC0uMDA4LDYsNiw2LDYiIHRyYW5zZm9ybT0ibWF0cml4KDAuMDM1LCAtMC45OTksIDAuOTk5LCAwLjAzNSwgMS4zOTgsIDExLjI4OCkiLz48L2c+PC9zdmc+)}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-caption[_ngcontent-%COMP%]{height:15px;line-height:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .no-items-ctr[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-actions[_ngcontent-%COMP%]{justify-content:flex-end}']});class lu{constructor(e,t){this._dialogService=e,this._dataProviderResolver=t}show(e){const t=this._dataProviderResolver.get();let i;const r=[],s=[];e.providers.forEach(c=>{i=t.find(d=>d.name===c.name),i&&(r.push(i.initialize(c)),s.push(i))});const o=PM.toColdObservable(()=>this._dialogService.open(Cn,{data:{providers:s,enableMultiSelection:e.enableMultiSelection,collectDrillDownItems:e.collectDrillDownItems,viewConfig:e.viewConfig},panelClass:"dialog-top-border"}).pipe((0,h.U)(c=>!0!==e.returnDialogResult?c?.selectedItems:c)));return(0,u.concat)(...r,o).pipe((0,oF.Z)())}}lu.\u0275fac=function(e){return new(e||lu)(n.\u0275\u0275inject(Ce),n.\u0275\u0275inject(io))},lu.\u0275prov=n.\u0275\u0275defineInjectable({token:lu,factory:lu.\u0275fac});class ao{}ao.\u0275fac=function(e){return new(e||ao)},ao.\u0275mod=n.\u0275\u0275defineNgModule({type:ao}),ao.\u0275inj=n.\u0275\u0275defineInjector({providers:[lu,io],imports:[Vt,y.CommonModule,E.yj,w.aw,He.Nn,U.yu,Se.Zh,wi,N.wp,z.x4,A.Ps]});class sh{}sh.\u0275fac=function(e){return new(e||sh)},sh.\u0275mod=n.\u0275\u0275defineNgModule({type:sh}),sh.\u0275inj=n.\u0275\u0275defineInjector({providers:[no,ou,{provide:iM,useExisting:no,multi:!0}],imports:[ao,ao]});class cu{}cu.\u0275fac=function(e){return new(e||cu)},cu.\u0275mod=n.\u0275\u0275defineNgModule({type:cu}),cu.\u0275inj=n.\u0275\u0275defineInjector({providers:[w.sK],imports:[b.u5,y.CommonModule,sn,w.aw]});var Of=f(24463);class jf{constructor(){this.readOnly=!1,this.textChange=new n.EventEmitter}}jf.\u0275fac=function(e){return new(e||jf)},jf.\u0275cmp=n.\u0275\u0275defineComponent({type:jf,selectors:[["ts-code-editor"]],inputs:{language:"language",readOnly:"readOnly",text:"text"},outputs:{textChange:"textChange"},decls:1,vars:0,template:function(e,t){1&e&&n.\u0275\u0275element(0,"div")},encapsulation:2});class oh{}oh.\u0275fac=function(e){return new(e||oh)},oh.\u0275mod=n.\u0275\u0275defineNgModule({type:oh}),oh.\u0275inj=n.\u0275\u0275defineInjector({imports:[y.CommonModule]});var TF=f(24568);const PF=["codemirrorContainer"];function AF(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"ts-info-tooltip-icon",4),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("message",t.tooltipMessage)}}class uu{get _languageOptions(){return this.languagesOptions.get(this.language)}get code(){return this._code}get options(){return{autoCloseBrackets:!0,dragDrop:!0,autofocus:!1,readOnly:this.readOnly,lineWrapping:!0,lineNumbers:!0,theme:"neat",lint:!0,foldGutter:!0,indentWithTabs:!0,indentUnit:4,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"],mode:this.language,extraKeys:{F11:function(){this.toggleFullScreenMode()}.bind(this),Esc:function(){this.escapeFullScreenMode()}.bind(this),"Ctrl-Space":"autocomplete",F3:"findNext","Shift-F3":"findPrev","Ctrl-Y":"deleteLine","Ctrl-F":"findPersistent"}}}set codemirrorContainer(e){this._renderCodemirrorComponent(e)}set text(e){this._code=e,this._innerCode=e,this._applyCodemirrorProperty("value",e)}set language(e){this._language=e,this._applyCodemirrorProperty("language",e),this._applyCodemirrorProperty("languageOptions",this._languageOptions),this._applyCodemirrorProperty("options",this.options)}get language(){return this._language}set readOnly(e){this._readOnly=e,this._applyCodemirrorProperty("readOnly",e),this._applyCodemirrorProperty("options",this.options)}get readOnly(){return this._readOnly}get tooltipMessage(){return this._tooltipKeys.map(e=>this._translateService.instant(e)).join("\r\n")}constructor(e,t,i){this._translateService=e,this._changeDetector=t,this._featureValues=i,this._readOnly=!1,this._keyBinding=[{key:"F11",run:function(){return this.toggleFullScreenMode(),!0}.bind(this)},{key:"Escape",run:function(){return this.escapeFullScreenMode(),!0}.bind(this)}],this._tooltipKeys=["CodeMirror.HotkeysDescription","CodeMirror.SelectAll","CodeMirror.Undo","CodeMirror.Redo","CodeMirror.Find","CodeMirror.FindNext","CodeMirror.FindPrev","CodeMirror.Replace","CodeMirror.ReplaceAll","CodeMirror.DeleteLine","CodeMirror.GoLineStart","CodeMirror.GoLineEnd","CodeMirror.JmpToLine","CodeMirror.Fullscreen","CodeMirror.FullscreenExit","CodeMirror.Autocomplete"],this.isFullScreen=!1,this.hideTooltip=!1,this.languagesOptions=new Map([[Of.Y.Javascript,{parserOptions:{ecmaVersion:2020},rules:{semi:["warn"]}}]]),this.textChange=new n.EventEmitter}get _useCodemirror5(){return!!this._featureValues.UseCodemirror5}_applyCodemirrorProperty(e,t){this._codemirrorComponent&&(this._codemirrorComponent[e]=t)}_loadCodemirrorModule(){return this._useCodemirror5?new Promise(e=>(0,TF.Z)(e,1e3)).then(()=>Promise.all([f.e(476),f.e(633),f.e(578)]).then(f.bind(f,70578))).then(()=>Promise.all([f.e(476),f.e(432)]).then(f.bind(f,37432))):Promise.all([f.e(893),f.e(638)]).then(f.bind(f,94638))}_renderCodemirrorComponent(e){this._loadCodemirrorModule().then(t=>{const i=t.CodemirrorComponent;this._codemirrorComponent=e.createComponent(i).instance,this._codemirrorComponent.value=this._code,this._codemirrorComponent.registerOnChange(this.onTextChange.bind(this)),this._useCodemirror5?this._codemirrorComponent.options=this.options:(this._codemirrorComponent.language=this._language,this._codemirrorComponent.languageOptions=this._languageOptions,this._codemirrorComponent.readOnly=this._readOnly,this._codemirrorComponent.keyBinding=this._keyBinding),this._changeDetector.detectChanges()})}escapeFullScreenMode(){this.isFullScreen&&this.toggleFullScreenMode()}toggleFullScreenMode(){this.isFullScreen=!this.isFullScreen,this._changeDetector.detectChanges()}onTextChange(e){e!==this._innerCode&&this.textChange.emit(e)}}var du,H,Ca,aM,IS,DS,lh;uu.\u0275fac=function(e){return new(e||uu)(n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(te))},uu.\u0275cmp=n.\u0275\u0275defineComponent({type:uu,selectors:[["ts-code-editor"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(PF,5,n.ViewContainerRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.codemirrorContainer=i.first)}},inputs:{hideTooltip:"hideTooltip",text:"text",language:"language",readOnly:"readOnly",languagesOptions:"languagesOptions"},outputs:{textChange:"textChange"},decls:4,vars:2,consts:[["class","CodeMirror-hotkeys-tooltip-infoButton",4,"ngIf"],[3,"className"],["codemirrorContainer",""],[1,"CodeMirror-hotkeys-tooltip-infoButton"],[1,"field-tooltip",3,"message"]],template:function(e,t){1&e&&(n.\u0275\u0275template(0,AF,2,1,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275elementContainer(2,null,2),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275property("ngIf",!t.hideTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("className",t.isFullScreen?"CodeMirror-Wrapper-Full-Screen":"CodeMirror-Wrapper"))},dependencies:[y.NgIf,Zo],styles:['.CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines{padding:4px 0}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{padding:0 4px}.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid black;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor-mark{background-color:#14ff1480;animation:blink 1.06s steps(1) infinite}.cm-animate-fat-cursor{width:auto;border:0;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;inset:-50px 0 0;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3,.cm-s-default .cm-type{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-s-default .cm-error,.cm-invalidchar{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:white}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-50px;margin-right:-50px;padding-bottom:50px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:50px solid transparent}.CodeMirror-vscrollbar,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-gutter-filler{position:absolute;z-index:6;display:none;outline:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-50px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;font-variant-ligatures:contextual}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;inset:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors,.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:#ff06}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}.CodeMirror-lint-markers{width:16px}.CodeMirror-lint-tooltip{background-color:#ffd;border:1px solid black;border-radius:4px;color:#000;font-family:monospace;font-size:10pt;overflow:hidden;padding:2px 5px;position:fixed;white-space:pre;white-space:pre-wrap;z-index:100;max-width:600px;opacity:0;transition:opacity .4s;-moz-transition:opacity .4s;-webkit-transition:opacity .4s;-o-transition:opacity .4s;-ms-transition:opacity .4s}.CodeMirror-lint-mark{background-position:left bottom;background-repeat:repeat-x}.CodeMirror-lint-mark-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=)}.CodeMirror-lint-mark-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==)}.CodeMirror-lint-marker{background-position:center center;background-repeat:no-repeat;cursor:pointer;display:inline-block;height:16px;width:16px;vertical-align:middle;position:relative}.CodeMirror-lint-message{padding-left:18px;background-position:top left;background-repeat:no-repeat}.CodeMirror-lint-marker-warning,.CodeMirror-lint-message-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=)}.CodeMirror-lint-marker-error,.CodeMirror-lint-message-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=)}.CodeMirror-lint-marker-multiple{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:right bottom;width:100%;height:100%}.CodeMirror-lint-tooltip{z-index:900}.CodeMirror-hotkeys-tooltip-infoButton{display:flex;justify-content:flex-end;position:sticky;top:0;margin-top:-22px;transform:translate(-10px,10px);pointer-events:none;z-index:99}.CodeMirror-hotkeys-tooltip-infoButton .field-tooltip{pointer-events:auto}\n'],encapsulation:2}),function(a){a[a.json=1]="json",a[a.xml=2]="xml"}(du||(du={})),function(a){a.Text="Text",a.Integer="Integer",a.Float="Float",a.Boolean="Boolean",a.DateTime="DateTime",a.Guid="Guid",a.Date="Date",a.Time="Time",a.Object="Object"}(H||(H={})),function(a){a[a.undefined=0]="undefined",a[a.rest=1]="rest",a[a.soap11=2]="soap11",a[a.soap12=3]="soap12"}(Ca||(Ca={})),function(a){a[a.None=0]="None",a[a.Basic=1]="Basic",a[a.Digest=2]="Digest",a[a.OAuth20=3]="OAuth20"}(aM||(aM={})),function(a){a[a.Undefined=0]="Undefined",a[a.Get=1]="Get",a[a.Post=2]="Post",a[a.Put=3]="Put",a[a.Patch=4]="Patch",a[a.Delete=5]="Delete"}(IS||(IS={})),function(a){a[a.Undefined=0]="Undefined",a[a.Body=1]="Body",a[a.UrlSegment=2]="UrlSegment",a[a.QueryString=3]="QueryString",a[a.HttpHeader=4]="HttpHeader",a[a.Cookie=5]="Cookie"}(DS||(DS={})),function(a){a[a.None=0]="None",a[a.Const=1]="Const",a[a.SysSetting=2]="SysSetting"}(lh||(lh={}));const MS={string:H.Text,boolean:H.Boolean,decimal:H.Float,float:H.Float,double:H.Float,dateTime:H.DateTime,time:H.Time,date:H.Date,hexBinary:H.Text,base64Binary:H.Text,integer:H.Integer,nonPositiveInteger:H.Text,negativeInteger:H.Text,long:H.Integer,int:H.Integer,short:H.Integer,byte:H.Integer,nonNegativeInteger:H.Text,unsignedLong:H.Text,unsignedInt:H.Text,unsignedShort:H.Integer,unsignedByte:H.Integer,positiveInteger:H.Text,char:H.Integer,guid:H.Guid,anyType:H.Text};class pu{constructor(e){e&&(this.uId=e.uId,this.name=e.name,this.parentSchemaUId=e.parentSchemaUId),this.uId=this.uId||(0,l.generateGuid)()}update(e){this.uId=e.uId,this.name=e.name}equal(e){if(null==e)return!1;let t=this.uId===e.uId&&this.name===e.name;return(this.parentSchemaUId||e.parentSchemaUId)&&(t=t&&this.parentSchemaUId===e.parentSchemaUId),t}clone(){return new pu(this)}getLocalizableValues(e){}loadLocalizableValues(e,t=!1){}}var oM;!function(a){a[a.Success=0]="Success",a[a.Error=1]="Error",a[a.NoChanges=2]="NoChanges"}(oM||(oM={}));const RF=new n.InjectionToken("SchemaDesignerConverter");class xS extends ZS{constructor(e){super(e),this.typeName="Terrasoft.Core.Addons.AddonSchema",this.metaData=e.metaData,this.addonName=e.addonName,this.targetSchemaUId=e.targetSchemaUId,this.targetSchemaManagerName=e.targetSchemaManagerName,this.typeName=e.typeName,this.id=e.id,this.parentSchemaUId=e.parentSchemaUId,this.package=e.package,this.resources=e.resources}clone(){return new xS(this)}set addonConfig(e){this.metaData=JSON.stringify(e,null,"\t")}get addonConfig(){try{return JSON.parse(this.metaData)}catch{throw new Error("Invalid addon JSON metadata received from server")}}equal(e){return this.metaData===e.metaData&&this.addonName===e.addonName&&this.targetSchemaManagerName===e.targetSchemaManagerName&&this.targetSchemaUId===e.targetSchemaUId&&this.typeName===e.typeName&&this.extendParent===e.extendParent&&this.uId===e.uId&&this.name===e.name&&this.packageUId===e.packageUId&&this.caption===e.caption&&this.id===e.id&&this.parentSchemaUId===e.parentSchemaUId}}class Uf{constructor(...e){if(this._isLoaded=!1,this._isChanged=!1,this.id=(0,l.generateGuid)(),e[0]instanceof Uf){const t=e[0];this.addonName=t.addonName,this._targetSchemaUId=t.targetSchemaUId,this.targetSchemaManagerName=t.targetSchemaManagerName,this.targetParentSchemaUId=t.targetParentSchemaUId,this.targetPackageUId=t.targetPackageUId,this.id=t.id,this._apiService=t._apiService,this._isLoaded=t._isLoaded,this._isChanged=t._isChanged,t._schema&&(this._schema=t._schema.clone()),this.useFullHierarchy=t.useFullHierarchy}else this.addonName=e[0],this._targetSchemaUId=e[1],this.targetParentSchemaUId=e[2],this.targetPackageUId=e[3],this.targetSchemaManagerName=e[4],this._apiService=e[5],this.useFullHierarchy=e[6]}get targetSchemaUId(){return this._targetSchemaUId}set targetSchemaUId(e){this._targetSchemaUId=e,this._schema&&(this._schema.targetSchemaUId=e)}get schema$(){return this._isLoaded?(0,u.of)(this._schema):this._loadSchema()}get addonConfig(){return this.schema$.pipe((0,h.U)(e=>{const t=e.addonConfig;return this._setMetadataDefValues(t),t}))}set addonConfig(e){(0,u.forkJoin)([this.schema$,e]).subscribe(([t,i])=>{t.addonConfig=i,this._isChanged=!0})}get isChanged(){return this._isChanged}get resources(){return this._resources}_setMetadataDefValues(e){this.addonName===Ph.BusinessRule&&e.rules?.forEach(i=>{i.name=i.name||function i3(){return`BusinessRule_${(0,l.generateGuid)().substring(0,7)}`}(),i.enabled=i.enabled||void 0===i.enabled})}_setAddonResources(e){this._resources=e.map(t=>{const i=t.key.split(".");return{key:[i[2],i[3]].join("."),value:t.value}}),this._schema.resources=[...this._resources]}_loadSchema(){return this._schema$||(this._schema$=this._apiService.getAddon({targetSchemaUId:this.targetSchemaUId,addonName:this.addonName,targetParentSchemaUId:this.targetParentSchemaUId,targetPackageUId:this.targetPackageUId,targetSchemaManagerName:this.targetSchemaManagerName,useFullHierarchy:this.useFullHierarchy}).pipe((0,I.b)(e=>{e.success&&(this._schema=new xS(e.schema),this._schema.typeName="Terrasoft.Core.Addons.AddonSchema",this._isLoaded=!0,this._setAddonResources(e.schema.resources??[]))}),(0,h.U)(()=>this._schema),(0,ee.B)())),this._schema$}save(){return this._isLoaded?this._apiService.saveAddon(this._schema).pipe((0,h.U)(e=>e.success),(0,I.b)(()=>{this._isChanged=!1})):(0,u.of)(!0)}clone(){return new Uf(this)}equal(e){let t=this._isLoaded===e._isLoaded&&e.targetSchemaUId===this.targetSchemaUId&&e.addonName===this.addonName&&this.targetSchemaManagerName===e.targetSchemaManagerName;return t&&this._isLoaded&&(t=this._schema.equal(e._schema)),t}createOrUpdateResource(e){const t=this.resources.findIndex(i=>i.key===e.key);-1===t?this.resources.push(e):this.resources.splice(t,1,e),this._schema.resources=[...this._resources]}removeResource(e){const t=this.resources.findIndex(i=>i.key===e);this.resources.splice(t,1),this._schema.resources=[...this._resources]}}var mu;!function(a){a[a.NO=0]="NO",a[a.YES=1]="YES"}(mu||(mu={}));mu.NO,mu.NO,mu.YES,mu.YES;class ro{constructor(e){this.getAddonMethodName="GetSchema",this.saveAddonMethodName="SaveSchema",this.serviceEndpoint="/ServiceModel/AddonSchemaDesignerService.svc/",this._httpClient=e.get(D.HttpClient),this._workplaceService=e.get(xo)}getAddon(e){const t=`${this.serviceEndpoint}${this.getAddonMethodName}`;return this._httpClient.post(t,e)}saveAddon(e){const t=`${this.serviceEndpoint}${this.saveAddonMethodName}`;return this._httpClient.post(t,e).pipe((0,u.switchMap)(i=>this._workplaceService.resetWorkplaceScriptCache().pipe((0,h.U)(()=>i))))}}ro.\u0275fac=function(e){return new(e||ro)(n.\u0275\u0275inject(n.Injector))},ro.\u0275prov=n.\u0275\u0275defineInjectable({token:ro,factory:ro.\u0275fac});class so{constructor(e){this._apiService=e.get(ro),this._features=e.get(te,{optional:!0})}_getParentSchemaUId(e){const t=e.parentSchema??e.parent;return t?.name===e.name?t.uId:l.EMPTY_GUID}create(e,t){return e.addonTypes&&0!==e.addonTypes.length?e.addonTypes.map(i=>{const r=this._getParentSchemaUId(e);return this.createAddonInfo(e,i,r,t)}):[]}createAddonInfo(e,t,i,r){return new Uf(t,e.uId,i,e.package.uId,r,this._apiService,e.useFullHierarchy)}}so.\u0275fac=function(e){return new(e||so)(n.\u0275\u0275inject(n.Injector))},so.\u0275prov=n.\u0275\u0275defineInjectable({token:so,factory:so.\u0275fac});const uM=new n.InjectionToken("SchemaDesignerApiUrl");class ch{constructor(e){this.createNewSchemaMethodName="CreateNewSchema",this.getSchemaMethodName="GetSchema",this.saveSchemaMethodName="SaveSchema",this.httpClient=e.get(D.HttpClient),this.serviceEndpoint=e.get(uM),this._converter=e.get(RF,null,{optional:!0}),this._addonInfoFactory=e.get(so),this._errorHandler=e.get(k_)}get converter(){return this._converter}getSchemaManagerName(){return null}getSchemaFromService(e,t,i=!1){const r=i?{headers:new D.HttpHeaders({"Content-Type":"application/json"})}:{};return this.httpClient.post(e,t,r).pipe((0,h.U)(s=>{if(s.schema){const o=this.getSchemaManagerName();return s.schema=this.convertToObject(s.schema),s.schema.addons=this._addonInfoFactory.create(s.schema,o),s}return s}),(0,ee.B)())}getSchemasFromService(e,t,i=!1){const r=i?{headers:new D.HttpHeaders({"Content-Type":"application/json"})}:{};return this.httpClient.post(e,t,r).pipe((0,h.U)(s=>{if(s.schemas){const o=this.getSchemaManagerName();return s.schemas.forEach((c,d)=>{s.schemas[d]=this.convertToObject(c),s.schemas[d].addons=this._addonInfoFactory.create(c,o)}),s}return s}),(0,ee.B)())}createObject(e,t){return Object.assign(new e,t)}convertToObject(e){return this._converter.convertToSchema(e)}convertSchemaToDTO(e){return e}_addonSaveHandler(e){const t=e.save();return this._errorHandler.handleRequest(t).pipe((0,G.K)(()=>(0,u.of)(!1)),(0,h.U)(i=>({message:`Addon ${e.addonName} was ${i?"successfully":"not"} saved!`,result:i})))}_saveAddons(e){return(0,u.forkJoin)(e.map(t=>this._addonSaveHandler(t))).pipe((0,h.U)(t=>{const i=t.filter(r=>!r.result).map(r=>r.message);return i.length>0?i:null}))}createSchema(e){const t=`${this.serviceEndpoint}${this.createNewSchemaMethodName}`;return this.getSchemaFromService(t,e)}getSchema(e){const t=`${this.serviceEndpoint}${this.getSchemaMethodName}`;return this.getSchemaFromService(t,e)}saveSchema(e,t=!1){t&&(e.useFullHierarchy=!0);const i=`${this.serviceEndpoint}${this.saveSchemaMethodName}`,r=e.addons?[...e.addons]:null,s=(0,At.Z)(e,["addons"]),o=this.httpClient.post(i,s);return this._errorHandler.handleRequest(o).pipe((0,vu.b)(d=>{const p=r?.filter(g=>g.isChanged);return d.success&&p?.length>0?this._saveAddons(p).pipe((0,h.U)(g=>({...d,addonsErrors:g}))):(0,u.of)(d)}),(0,ee.B)())}checkUniqueSchemaName(e,t,i){const r=this.serviceEndpoint+"CheckUniqueSchemaName",s={schemaName:e,excludeUId:t,managerName:i};return this.httpClient.post(r,s,{headers:new D.HttpHeaders({"Content-Type":"application/json"})}).pipe((0,ee.B)())}}ch.\u0275fac=function(e){return new(e||ch)(n.\u0275\u0275inject(n.Injector))},ch.\u0275prov=n.\u0275\u0275defineInjectable({token:ch,factory:ch.\u0275fac,providedIn:"root"});const dM=new n.InjectionToken("SchemaImageUploaderApiUrl");class uh{constructor(e,t){this._httpClient=e,this._endPointUrl=t}appendImageToSchema(e,t,i){const r=new FormData;return r.append("schemaUId",e),r.append("imageUId",t.uId),r.append("isLastImage",i.toString()),r.append("files",t.data,t.data.name),this._httpClient.post(`${this._endPointUrl}/SaveImage`,r)}}uh.\u0275fac=function(e){return new(e||uh)(n.\u0275\u0275inject(D.HttpClient),n.\u0275\u0275inject(dM))},uh.\u0275prov=n.\u0275\u0275defineInjectable({token:uh,factory:uh.\u0275fac});class dh{constructor(e){this.httpClient=e,this._getTemplatesEndpoint="rest/schema.template.api/templates"}getTemplates(){return this.httpClient.get(this._getTemplatesEndpoint)}}dh.\u0275fac=function(e){return new(e||dh)(n.\u0275\u0275inject(D.HttpClient))},dh.\u0275prov=n.\u0275\u0275defineInjectable({token:dh,factory:dh.\u0275fac,providedIn:"root"});class ph{constructor(e){this._httpClient=e,this._appInstallerServiceUrl="ServiceModel/AppInstallerService.svc/",this._getDesignPackageUId="GetDesignPackageUId"}getDesignPackageUId(e){const t=`${this._appInstallerServiceUrl}${this._getDesignPackageUId}`;return this._httpClient.post(t,{schemaUId:e})}}ph.\u0275fac=function(e){return new(e||ph)(n.\u0275\u0275inject(D.HttpClient))},ph.\u0275prov=n.\u0275\u0275defineInjectable({token:ph,factory:ph.\u0275fac,providedIn:"root"});class pM{copy(e){return{...e}}isEmpty(e){return!1}}class VF extends pM{copy(e){const t=e.metadata,i=[],r=[];return t.rules.forEach(s=>{const o=new Gg(s,new kt,null,null,null),{uId:c,name:d}=o,p=o.copy();p.name=d;const g=p.uId,C=(e.resources||[]).find(v=>v.key?.includes(c));if(C){const v=C.key.replace(c,g);r.push({...C,key:v})}i.push(p.toMetadata())}),{metadata:{...e.metadata,rules:i},name:e.name,resources:r}}isEmpty(e){return!e.metadata?.rules||0===e.metadata.rules?.length}}class hu{create(e){return e===Ph.BusinessRule?new VF:new pM}}hu.\u0275fac=function(e){return new(e||hu)},hu.\u0275prov=n.\u0275\u0275defineInjectable({token:hu,factory:hu.\u0275fac});class mh{}mh.\u0275fac=function(e){return new(e||mh)},mh.\u0275mod=n.\u0275\u0275defineNgModule({type:mh}),mh.\u0275inj=n.\u0275\u0275defineInjector({providers:[ro,so,hu],imports:[y.CommonModule]});class mM extends pu{constructor(){super(...arguments),this.namespaces=[],this.serviceMethods=[]}}class hM extends pu{}class gM extends hM{}class fM extends hM{}class _M extends pu{}class hh extends pu{constructor(){super(...arguments),this.itemProperties=[]}static parseValue(e,t){switch(e.dataValueTypeName){case H.Boolean:return Boolean(t);case H.DateTime:case H.Date:case H.Time:return new Date(t);default:return t}}}class FF{constructor(){this.source=lh.None}}const bt=a=>a?.includes(":")?a.split(":")[1]:a,ES=(a,e)=>{if(!e)return"";const t=a&&a.includes(":")?a.split(":")[0]:"";return t?e.lookupNamespaceURI(t):""},fi=a=>a?a.replace(/\./g,"\\.").replace(/:/g,"\\:"):null;class oo{static _getTypeElementByName(e,t){if(!e)return null;let i=e.querySelector(`types > schema > complexType[name=${fi(t)}]`);return i||(i=e.querySelector(`types > schema > simpleType[name=${fi(t)}]`)),this._getTypeDefinitionElement(i)}static _getTypeDefinitionElement(e){if(!e)return null;const t=e.getAttribute("type");if(!t)return e;const i=bt(t);return this._getTypeElementByName(e.ownerDocument,i)}static _getIsRestrictionElement(e){if(!e)return!1;let t=e.querySelector("simpleType:not(element > simpleType)");return"simpleType"===e.localName&&(t=e),!!t&&!!t.querySelector("restriction:not(element > simpleType > restriction)")}static getIsArray(e){return!!e&&"unbounded"===e.getAttribute("maxOccurs")}static getSimpleTypeName(e){if(!e)return"";let t=e.querySelector("simpleType");if("simpleType"===e.localName&&(t=e),t){const i=t.querySelector("restriction");return i?bt(i.getAttribute("base")):"string"}return""}static getDataValeTypeName(e){let t=bt(e.getAttribute("type"));if(t||(t=this.getSimpleTypeName(e)),!MS[t]){const r=this._getTypeDefinitionElement(e);this._getIsRestrictionElement(r)&&(t=this.getSimpleTypeName(r))}return MS[t]}static getSchemaElementByName(e,t){return e?e.querySelector(`definitions > types > schema > element[name=${fi(t)}]`):null}static getElementDefinition(e){if(!e)return null;const t=bt(e.getAttribute("ref")),i=this.getSchemaElementByName(e.ownerDocument,t);return i&&i.setAttribute("maxOccurs",e.getAttribute("maxOccurs")),i??e}static getIsExtensionType(e){if(!e)return!1;const t=this._getTypeDefinitionElement(e),i=!!t.querySelector("complexType > complexContent > extension"),r=!!t.querySelector("complexType > simpleContent > extension");return i||r}static getExtensionInfo(e){if(!e)return null;const i=this._getTypeDefinitionElement(e).querySelector("complexType extension"),r=bt(i.getAttribute("base")),s=this._getTypeElementByName(e.ownerDocument,r),o=this.getSimpleTypeName(s),c=i.querySelectorAll("extension > sequence > element");return{baseTypeName:o||r,baseTypeElementRef:s,nodes:Array.from(c)}}static getComplexTypeChildElements(e){if(!e)return[];const t=this._getTypeDefinitionElement(e),i="complexType"===t.localName?"sequence > element":"complexType > sequence > element",r=t.querySelectorAll(i);return Array.from(r)}}class Sa{constructor(e){this.nested=[],e&&(this.typeName=e.typeName,this.referenceDataTypeName=e.referenceDataTypeName,this.baseTypeName=e.baseTypeName,this.isExtension=!0===e.isExtension,this.nodes=e.nodes||[],this.caption=e.caption,this.path=e.path,this.dataValueType=e.dataValueType,this.isArray=e.isArray,this.sequenceElementName=e.sequenceElementName,this.nested=e.nested||[],this.parent=e.parent,this.namespace=e.namespace)}get isObject(){return this.dataValueType===H.Object}get isSimpleType(){return!this.isObject}static _generatePrefixForNamespace(e,t){for(let i=0;i<1e3;i++){const r="ns"+i;if(!t.find(s=>s.prefix===r))return r}}static getPrefixForNamespace(e,t){return t.find(r=>r.name===e)||t.push({prefix:this._generatePrefixForNamespace(e,t),name:e}),t.find(r=>r.name===e).prefix}static fromElement(e){const t=oo.getElementDefinition(e),i=t.getAttribute("name"),r=oo.getDataValeTypeName(t),s=t.getAttribute("type"),o=bt(s),c=ES(s,t),d=new Sa({typeName:i,referenceDataTypeName:o,caption:i,path:i,dataValueType:r||H.Object,isArray:oo.getIsArray(t),namespace:c});if(d.isSimpleType)return d;if(oo.getIsExtensionType(t)){const g=oo.getExtensionInfo(t),C=MS[g.baseTypeName];if(C)return d.dataValueType=C,d;const v=Sa.fromElement(g.baseTypeElementRef);d.isExtension=!0,d.baseTypeName=g.baseTypeName,d.nodes=[...g.nodes,...v.nodes]}else d.nodes=oo.getComplexTypeChildElements(t);return d}_buildPath(e,t){const i=Sa.getPrefixForNamespace(e.namespace,t);let r=e.isArray&&!e.isObject?"":`${i}:${e.path}`,s=e.parent;for(;s&&!s.isArray;)r=`${Sa.getPrefixForNamespace(s.namespace,t)}:${s.path}${r?"/"+r:""}`,s=s.parent;return r}_buildCaption(e){let t=e.isArray&&!e.isObject?"":e.path,i=e.parent;for(;i&&!i.isArray;)t=`${i.path}${t?" "+t:""}`,i=i.parent;return t}toServiceParameter(e){const t=new hh;return t.caption=this._buildCaption(this),t.path=this._buildPath(this,e),t.dataValueTypeName=this.dataValueType,t.isArray=this.isArray,t.isRequired=!1,t.sequenceElementName=this.sequenceElementName,t.type=DS.Body,this.nested&&(t.itemProperties=this.nested.map(i=>i.toServiceParameter(e))),t}}class LF{constructor(e,t,i=""){this.doc=e,this.namespaces=t,this.schemaNamePrefix=i,this.maxNameLength=200}getSoapAction(e,t){const i=e.querySelector(`operation[name=${fi(t)}] > operation`);return i?i.getAttribute("soapAction"):null}exitFromLoop(e,t){let i=!1;if(t.has(e)){let r=t.get(e);2===r?i=!0:t.set(e,++r)}else t.set(e,1);return i}flattenWsdlElement(e,t){if(!e.nested.length)return[e];if(e.isArray&&e.isObject){const i=e.parent||e,r=e.nested.flatMap(o=>(o.parent=e,this.flattenWsdlElement(o)));return[new Sa({caption:i.caption,path:t||i.path,dataValueType:i.dataValueType,isArray:!0,sequenceElementName:e.sequenceElementName,namespace:i.namespace,nested:r,parent:i.parent})]}return e.nested.flatMap(i=>(i.parent=e,this.flattenWsdlElement(i)))}getSequenceElementName(e,t){return Sa.getPrefixForNamespace(e,this.namespaces)+":"+t}getComplexType(e,t,i){if(this.exitFromLoop(e.referenceDataTypeName,i))return null;const r=e.namespace||t;return e.nodes.forEach(s=>{const o=this.getWsdlElementFromSequenceElement(s,r,i);o&&e.nested.push(o)}),e.namespace=t,e}getWsdlElementFromSequenceElement(e,t="",i){const r=Sa.fromElement(e);return r.sequenceElementName=this.getSequenceElementName(t,r.typeName),r.isSimpleType?(r.namespace=t,r):this.getComplexType(r,t,new Map(i))}getParameterFromSequenceElement(e,t,i){const r=this.getWsdlElementFromSequenceElement(e,t);return(r?this.flattenWsdlElement(r,i):[]).map(o=>o.toServiceParameter(this.namespaces))}getParametersByTypeName(e,t){const i=oo.getSchemaElementByName(this.doc,e),r=i.getAttribute("type");let s;if(r){const c=fi(bt(r));s=this.doc.querySelectorAll(`definitions > types > schema > complexType[name=${c}] > sequence > element`)}else s=i.querySelectorAll(":scope > complexType > sequence > element");let o=[];return s.forEach(c=>{const d=this.getParameterFromSequenceElement(c,t,e);o=[...o,...d]}),o}getParametersFromMessage(e){const t=this.doc.querySelectorAll(`definitions > message[name=${fi(e)}] > part`),i=[];return t.forEach(r=>{const s=r.getAttribute("element");if(!s){const d=r.getAttribute("type"),p=ES(d,r);return void i.push(...this.getParameterFromSequenceElement(r,p))}const o=bt(s),c=ES(s,r);i.push(...this.getParametersByTypeName(o,c))}),i}truncateName(e){return e.length<=this.maxNameLength?e:e.substr(e.length-this.maxNameLength,this.maxNameLength)}reduceByUpperCaseChars(e){const t=e.match(/[A-Z][a-z]+/g);return t?t.map((i,r,s)=>r!==s.length-1?i.charAt(0):i).join(""):e}_getPrefixedName(e,t=""){const i=this.reduceByUpperCaseChars((t+e).split(" ").join(""));return this.truncateName(this.schemaNamePrefix+i)}_generateParametersNames(e,t="",i=null){i=i||new Set,e.forEach(r=>{const s=this._getPrefixedName(r.caption,t);let o=s,c=1;for(;i.has(o);)o=s+c,o=this.truncateName(o),c++;i.add(o),r.name=o,r.itemProperties&&this._generateParametersNames(r.itemProperties,r.caption,i)})}_generateMethodName(e){return`${this._getPrefixedName(e)}_${(0,l.generateGuid)().split("-").shift()}`}hasCommonCaptionPart(e){const t=e.length&&e[0].caption;return!e.find(i=>{const r=i.caption.split(" ");return r.length<=1||r[0]!==t.split(" ")[0]})}removeCommonCaptionPart(e){e.forEach(t=>{const i=t.caption.split(" ");i.shift(),t.caption=i.join(" ")})}normalizeParametersCaption(e){this.hasCommonCaptionPart(e)&&this.removeCommonCaptionPart(e)}getParametersForInput(e){const t=bt(e.getAttribute("message")),i=this.getParametersFromMessage(t);return this.normalizeParametersCaption(i),this._generateParametersNames(i),i}getRootElementCode(e){const t=bt(e.getAttribute("message")),r=this.doc.querySelector(`definitions > message[name=${fi(t)}] > part`).getAttribute("element");return bt(r)}getRequest(e){const t=new gM;t.contentType=du.xml,t.methodType=IS.Post;const i=e.querySelector("input");return t.uri=this.getRootElementCode(i)||e.getAttribute("name"),t.parameters=this.getParametersForInput(i),t}getResponse(e){const t=new fM;t.contentType=du.xml;const i=e.querySelector("output");return t.parameters=this.getParametersForInput(i),t}getMethod(e,t){const i=new _M;return i.caption=t.getAttribute("name"),i.name=this._generateMethodName(i.caption),i.soapAction=this.getSoapAction(e,i.caption),i.request=this.getRequest(t),i.response=this.getResponse(t),i}}class TS extends Error{constructor(e,t){super(t),this.fileName=e}}class PS extends TS{constructor(){super(null,"Wsdl parsing error"),this.errorCode="WsdlParsingError"}}class OF extends TS{constructor(e,t){super(null,t.message),this.errorCode="DownloadXmlSchemaError",this.urls=e}}class jF extends TS{constructor(e){super(e,`File '${e}' not found`),this.errorCode="SchemaDocumentFileNotFoundError"}}class ba{constructor(e){this.httpClient=e,this.downloadWsdlEndpointUrl="/rest/DownloadWsdlEndpoint/",this.getXmlSchemaContentMethod="GetXmlSchemaFilesContent"}download(e=[]){if(!e||0===e.length)return(0,u.of)(new Map);const t=`${this.downloadWsdlEndpointUrl}${this.getXmlSchemaContentMethod}`;return this.httpClient.post(t,e).pipe((0,I.b)(i=>{if(!i.success)throw new OF(e,i.errorInfo)}),(0,h.U)(i=>{const r=new TextDecoder("utf-8");return i.files.map(s=>{const o=new Uint8Array(s.Value),c=r.decode(o);return[s.Key,c]})}),(0,h.U)(i=>new Map(i)))}}ba.\u0275fac=function(e){return new(e||ba)(n.\u0275\u0275inject(D.HttpClient))},ba.\u0275prov=n.\u0275\u0275defineInjectable({token:ba,factory:ba.\u0275fac});class Sn{constructor(e){this.downloadWsdl=e}static getDocumentOwnSchemaNodes(e){return Array.from(e.querySelectorAll("schema"))}static getDocument(e){return(new DOMParser).parseFromString(e,"text/xml")}concatFiles(e){return new Map([...this.files,...e])}findWsdl(e){let t;return e.forEach((i,r)=>{(new DOMParser).parseFromString(i,"text/xml").querySelector("definitions > service")&&(t=[r,i])}),t}getLocation(e,t){const i=e.getAttribute("schemaLocation");i&&t.push(i)}getImportsForSchema(e){const i=(new DOMParser).parseFromString(e,"text/xml"),r=[],s=i.querySelectorAll("definitions > types > schema > import"),o=i.querySelectorAll("definitions > types > schema > include");return s.forEach(c=>this.getLocation(c,r)),o.forEach(c=>this.getLocation(c,r)),r}findMissingImports(){const e=[],t=this.findWsdl(this.files);if(!t)return(0,u.throwError)(()=>new PS);const i=new Map([t]),r=new Set;for(;i.size;){const[s,o]=i.entries().next().value;this.getImportsForSchema(o).forEach(d=>{r.has(d)||(this.files.has(d)?i[d]=this.files[d]:e.push(d))}),r.add(s),i.delete(s)}return(0,u.of)(e)}downloadMissingImports(e){return e.length?this.downloadWsdl.download(e):(0,u.of)(new Map)}reInitialize(e){this.wsdlFileName=null,this.documents=new Map,this.mergedFiles=new Set,e.forEach((t,i)=>{const r=Sn.getDocument(t);this.documents.set(i,r),r.querySelector("definitions > service")&&(this.wsdlFileName=i)})}getDocumentByName(e){var t=this;return(0,_.Z)(function*(){if(t.documents.has(e))return t.documents.get(e).cloneNode(!0);throw new jF(e)})()}getInsertedSchemaNodes(e,t){var i=this;return(0,_.Z)(function*(){const r=[],s=Array.from(e.querySelectorAll(t));for(const o of s){const c=o.getAttribute("schemaLocation"),d=yield i.getDocumentSchemaNodes(c);r.push(...d),o.parentElement.removeChild(o)}return r})()}getDocumentSchemaNodes(e){var t=this;return(0,_.Z)(function*(){if(!e||t.mergedFiles.has(e))return[];t.mergedFiles.add(e);const i=yield t.getDocumentByName(e);return[...yield t.getInsertedSchemaNodes(i,"schema > import"),...yield t.getInsertedSchemaNodes(i,"schema > include"),...Sn.getDocumentOwnSchemaNodes(i)]})()}mergeSchemas(e,t){var i=this;return(0,_.Z)(function*(){const r=Array.from(e.querySelectorAll(t));for(const s of r){const o=s.getAttribute("schemaLocation"),c=yield i.getDocumentSchemaNodes(o),d=s.parentElement;for(const p of c)d.insertAdjacentElement("beforebegin",p);s.parentElement.removeChild(s)}return e})()}mergeWsdl(){var e=this;return(0,_.Z)(function*(){if(null==e.wsdlFileName)throw new PS;const t=yield e.getDocumentByName(e.wsdlFileName);return yield e.mergeSchemas(t,"definitions > types > schema > import"),yield e.mergeSchemas(t,"definitions > types > schema > include"),t})()}merge(e){return this.files=e,this.findMissingImports().pipe((0,vu.b)(t=>this.downloadMissingImports(t)),(0,h.U)(t=>this.concatFiles(t)))}mergeDocument(e){return this.merge(e).pipe((0,B.z)(t=>(this.reInitialize(t),this.mergeWsdl())))}}Sn.\u0275fac=function(e){return new(e||Sn)(n.\u0275\u0275inject(ba))},Sn.\u0275prov=n.\u0275\u0275defineInjectable({token:Sn,factory:Sn.\u0275fac,providedIn:"root"});class Jt{constructor(e,t){this.sysSettingsService=e,this.wsdlMerge=t,this.schemaNamePrefixSysSettingCode="SchemaNamePrefix"}static getServiceType(e){switch(e.querySelector("address").namespaceURI){case"http://schemas.xmlsoap.org/wsdl/soap/":return Ca.soap11;case"http://schemas.xmlsoap.org/wsdl/soap12/":return Ca.soap12;default:return Ca.undefined}}static getBaseUri(e){return e.querySelector("address").getAttribute("location")}static getTargetNamespace(e){return{prefix:"tem",name:e.querySelector("definitions").getAttribute("targetNamespace")??"http://tempuri.org"}}getMethods(e,t,i,r){const s=[],o=bt(t.getAttribute("binding")),c=e.querySelector(`definitions > binding[name=${fi(o)}]`),d=bt(c.getAttribute("type"));return e.querySelectorAll(`definitions > portType[name=${fi(d)}] > operation`).forEach(g=>{const C=new LF(e,i,r);s.push(C.getMethod(c,g))}),s}getService(e,t=""){const i=e.querySelector("definitions > service"),r=[];return e.querySelectorAll("definitions > service > port").forEach(o=>{const c=new mM;c.namespaces=[Jt.getTargetNamespace(e)],c.type=Jt.getServiceType(o),c.caption=i.getAttribute("name"),c.name=t+c.caption,c.portName=o.getAttribute("name"),c.serviceMethods=this.getMethods(e,o,c.namespaces,t),c.baseUri=Jt.getBaseUri(o),r.push(c)}),r}getSchemaNamePrefix$(){return this.sysSettingsService.getByCodes([this.schemaNamePrefixSysSettingCode]).pipe((0,h.U)(e=>{if(!e.success)throw new Error(e.errorInfo.message);return e.values[this.schemaNamePrefixSysSettingCode].value}))}build(e){return(0,u.combineLatest)([this.getSchemaNamePrefix$(),this.wsdlMerge.mergeDocument(e)]).pipe((0,h.U)(([t,i])=>{const r=this.getService(i,t);if(!r||0===r.length)throw new PS;return r}))}}var AS,Kt;Jt.\u0275fac=function(e){return new(e||Jt)(n.\u0275\u0275inject(De),n.\u0275\u0275inject(Sn))},Jt.\u0275prov=n.\u0275\u0275defineInjectable({token:Jt,factory:Jt.\u0275fac}),function(a){a.upload="upload",a.selectService="selectService",a.setupRequest="setupRequest",a.setupResponse="setupResponse"}(AS||(AS={})),function(a){a.Success="Success",a.Skip="Skip",a.Close="Close",a.Error="Error"}(Kt||(Kt={}));const BF=["uploadWsdl"];class gh{constructor(){this.urlChanged=new n.EventEmitter,this.filesSelected=new n.EventEmitter}getFileContent(e){return(0,_.Z)(function*(){return new Promise((t,i)=>{const r=new FileReader;r.onloadend=s=>{t(r.result)},r.readAsText(e)})})()}onWsdlSelected(e){var t=this;return(0,_.Z)(function*(){if(0===e.length)return;const i=new Map;for(const r of Array.from(e)){const s=yield t.getFileContent(r);i.set(r.name,s)}t.uploadWsdlElementRef.nativeElement.value=null,t.filesSelected.next(i)})()}onWsdlSelect(){this.uploadWsdlElementRef.nativeElement.click()}onUrlChange(e){this.urlChanged.next(e.target.value)}}gh.\u0275fac=function(e){return new(e||gh)},gh.\u0275cmp=n.\u0275\u0275defineComponent({type:gh,selectors:[["ts-wsdl-upload"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(BF,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.uploadWsdlElementRef=i.first)}},outputs:{urlChanged:"urlChanged",filesSelected:"filesSelected"},decls:16,vars:10,consts:[[1,"content"],[1,"upload"],["type","file","data-item-marker","upload_wsdl",2,"display","none",3,"multiple","change"],["uploadWsdl",""],["mat-flat-button","","cdkFocusInitial","",1,"upload-file",3,"click"],["alt","upload","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmEsLmIsLmN7ZmlsbDpub25lO30uYSwuYntzdHJva2U6IzRlN2JkODtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9LmF7c3Ryb2tlLXdpZHRoOjAuOHB4O308L3N0eWxlPjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MykiPjxwYXRoIGNsYXNzPSJhIiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIvPjwvZz48bGluZSBjbGFzcz0iYiIgeTE9IjExIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjUgMC41KSIvPjxsaW5lIGNsYXNzPSJiIiB4Mj0iMTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNSAxNC41KSIvPjxyZWN0IGNsYXNzPSJjIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4="],[1,"upload-file-separator"],[1,"wsdl-link-field"],["matInput","","autocomplete","off",3,"placeholder","input"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",1)(5,"input",2,3),n.\u0275\u0275listener("change",function(r){return t.onWsdlSelected(r.target.files)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"button",4),n.\u0275\u0275listener("click",function(){return t.onWsdlSelect()}),n.\u0275\u0275element(8,"img",5)(9,"span",6),n.\u0275\u0275text(10),n.\u0275\u0275pipe(11,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div")(13,"mat-form-field",7)(14,"input",8),n.\u0275\u0275listener("input",function(r){return t.onUrlChange(r)}),n.\u0275\u0275pipe(15,"translate"),n.\u0275\u0275elementEnd()()()()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,4,"WsdlFileAndUrlPromptCaption")),n.\u0275\u0275advance(3),n.\u0275\u0275property("multiple",!0),n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(11,6,"WsdlUploadButtonCaption")," "),n.\u0275\u0275advance(4),n.\u0275\u0275property("placeholder",n.\u0275\u0275pipeBind1(15,8,"WsdlLinkPlaceholderText")))},dependencies:[N.v_,U.eB,z.k0,w.X$],styles:[".content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px;font-family:Open Sans,sans-serif}.upload[_ngcontent-%COMP%]{margin-top:8px}.upload[_ngcontent-%COMP%]   .wsdl-link-field[_ngcontent-%COMP%]{width:100%;margin-top:1.5em}.mat-flat-button.upload-file[_ngcontent-%COMP%]{text-transform:none;font-size:13px;color:#006ce0;background-color:#f2f5ff;border-radius:2px}.mat-flat-button.upload-file[_ngcontent-%COMP%]:hover{background-color:#f2f5ff}.mat-flat-button.upload-file[_ngcontent-%COMP%]   span.upload-file-separator[_ngcontent-%COMP%]{width:.6em}"]});class UF{}class gu extends $t{constructor(){super(...arguments),this.getRegisteredEvents=()=>[{name:"selectMethod",dataType:UF}]}}var Gf;gu.\u0275fac=function(){let a;return function(t){return(a||(a=n.\u0275\u0275getInheritedFactory(gu)))(t||gu)}}(),gu.\u0275cmp=n.\u0275\u0275defineComponent({type:gu,selectors:[["ts-custom-cell"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"caption",3,"click"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275listener("click",function(){return t.fireEvent("selectMethod")}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(null==t.record?null:t.record.caption))},styles:[".caption[_ngcontent-%COMP%]{line-height:36px}"]}),function(a){a.None="None",a.ExpandOnlyRoot="ExpandOnlyRoot"}(Gf||(Gf={}));const GF=["originalPickerToggle"];function zF(a,e){1&a&&n.\u0275\u0275element(0,"mat-icon",11)}function HF(a,e){1&a&&n.\u0275\u0275element(0,"mat-icon",12)}function ZF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",8),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onPickerIconClick())}),n.\u0275\u0275template(1,zF,1,0,"mat-icon",9),n.\u0275\u0275template(2,HF,1,0,"ng-template",null,10,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","time"===i.type)("ngIfElse",t)}}class fu extends ut{get convertedValue(){return this._convertedValue}set convertedValue(e){this._convertedValue=e,this.innerValue=e.toDate()}constructor(e,t,i,r,s){super(e,t,i),this._matIconRegistry=r,this._domSanitizer=s,this.controlType="ts-datetime-picker",this.type="datetime",this._registerIcons()}_registerIcons(){["datetime-picker-toggle-date","datetime-picker-toggle-time"].forEach(e=>{this._matIconRegistry.addSvgIconLiteral(e,this._domSanitizer.bypassSecurityTrustHtml(f(86634)("./"+e+"-icon.svg")))}),this._matIconRegistry.addSvgIconLiteral("read-only",this._domSanitizer.bypassSecurityTrustHtml(f(94309)))}writeValue(e){this._convertedValue=Bn()(e),super.writeValue(e)}onPickerIconClick(){this.originalPickerToggle.nativeElement.dispatchEvent(new MouseEvent("click"))}}function qF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"input",5,6),n.\u0275\u0275listener("input",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onValueChanged(r.target.value))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-placeholder",7),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275reference(2),i=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("required",t.errors&&(t.dirty||t.touched)),n.\u0275\u0275advance(1),n.\u0275\u0275property("type",i.getInputType())("ngModel",i.value)("required",i.required)("disabled",!i.enabled),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,7,i.getPlaceholder(i.name)))}}function $F(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"ts-datetime-picker",8,9),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onValueChanged(r))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-placeholder",7),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275reference(2),i=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("required",t.errors&&(t.dirty||t.touched)),n.\u0275\u0275advance(1),n.\u0275\u0275property("type",i.getDateTimeInputType())("ngModel",i.value)("required",i.required)("disabled",!i.enabled),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,7,i.getPlaceholder(i.name)))}}function WF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-checkbox",10),n.\u0275\u0275listener("change",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onValueChanged(r.checked))}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("checked",t.value)("disabled",!t.enabled)}}fu.\u0275fac=function(e){return new(e||fu)(n.\u0275\u0275directiveInject(b.a5,10),n.\u0275\u0275directiveInject(Di.Lq),n.\u0275\u0275directiveInject(Mi.tE),n.\u0275\u0275directiveInject(A.jv),n.\u0275\u0275directiveInject(k.DomSanitizer))},fu.\u0275cmp=n.\u0275\u0275defineComponent({type:fu,selectors:[["ts-datetime-picker"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(GF,5,n.ElementRef),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.originalPickerToggle=i.first)}},inputs:{label:"label",minDate:"minDate",maxDate:"maxDate",type:"type"},features:[n.\u0275\u0275ProvidersFeature([{provide:Za.Eo,useExisting:fu}]),n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:10,consts:[[1,"datetime-picker-input-wrapper"],["matInput","","type","text","autocomplete","false","spellcheck","false",3,"ngModel","matDatetimepicker","required","min","max","disabled","ngModelChange"],["input",""],[3,"for"],["originalPickerToggle",""],["mat-icon-button","",3,"click",4,"ngIf"],["openOnFocus","true","mode","portrait",3,"type","disabled"],["datetimePicker",""],["mat-icon-button","",3,"click"],["svgIcon","datetime-picker-toggle-time",4,"ngIf","ngIfElse"],["dateIcon",""],["svgIcon","datetime-picker-toggle-time"],["svgIcon","datetime-picker-toggle-date"]],template:function(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),n.\u0275\u0275listener("ngModelChange",function(r){return t.convertedValue=r}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"mat-datetimepicker-toggle",3,4),n.\u0275\u0275template(5,ZF,4,2,"button",5),n.\u0275\u0275element(6,"mat-datetimepicker",6,7),n.\u0275\u0275elementEnd()),2&e){const i=n.\u0275\u0275reference(7);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngModel",t.convertedValue)("matDatetimepicker",i)("required",t.required)("min",t.minDate)("max",t.maxDate)("disabled",t.disabled),n.\u0275\u0275advance(2),n.\u0275\u0275property("for",i),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("type",t.type)("disabled",t.disabled)}},dependencies:[y.NgIf,b.Fj,b.JJ,b.Q7,b.On,U.eB,If._R,If.C,If.RZ,A.Hw,z.k0],styles:["ts-datetime-picker{width:100%}ts-datetime-picker .datetime-picker-input-wrapper{display:flex;align-items:center;position:relative;min-width:calc(18ch + 26px)}ts-datetime-picker .datetime-picker-input-wrapper mat-datetimepicker-toggle{display:none}ts-datetime-picker .datetime-picker-input-wrapper button[mat-icon-button]{height:26px;width:26px;line-height:26px;position:absolute;right:0}ts-datetime-picker .datetime-picker-input-wrapper button[mat-icon-button] mat-icon{height:16px!important;width:16px!important;line-height:16px;position:relative;bottom:2px}\n"],encapsulation:2});const YF=function(a){return[a]};class fh{constructor(e,t){this.translateService=e,this._directionality=t,this.name="",this.valueChanged=new n.EventEmitter}isRtl(){return"rtl"===this._directionality?.value}getPlaceholder(e){return this.translateService.get("ServiceClientParameterPlaceholder").pipe((0,h.U)(t=>t.replace("{0}",e)))}onValueChanged(e){this.valueChanged.next(e)}getDateTimeInputType(){return{[H.Date]:"date",[H.DateTime]:"datetime",[H.Time]:"time"}[this.valueType]}getInputType(){return{[H.Text]:"text",[H.Guid]:"text",[H.Integer]:"number",[H.Float]:"number"}[this.valueType]}}function QF(a,e){1&a&&n.\u0275\u0275element(0,"button",8)}function JF(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,QF,1,0,"button",7),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasLeaves)}}fh.\u0275fac=function(e){return new(e||fh)(n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(xe.Is))},fh.\u0275cmp=n.\u0275\u0275defineComponent({type:fh,selectors:[["ts-editable-value"]],inputs:{name:"name",value:"value",valueType:"valueType",required:"required",enabled:"enabled"},outputs:{valueChanged:"valueChanged"},decls:5,vars:6,consts:[["matForm","",1,"editable-value"],["floatLabel","never","hideRequiredMarker","",3,"required",4,"ngIf"],[3,"ngClass"],["class","boolean-value",3,"checked","disabled","change",4,"ngIf"],["floatLabel","never","hideRequiredMarker",""],["matInput","","autocomplete","off",3,"type","ngModel","required","disabled","input"],["valueInput","ngModel"],[1,"placeholder"],[3,"type","ngModel","required","disabled","ngModelChange"],["dateInput","ngModel"],[1,"boolean-value",3,"checked","disabled","change"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,qF,6,9,"mat-form-field",1),n.\u0275\u0275template(2,$F,6,9,"mat-form-field",1),n.\u0275\u0275elementStart(3,"div",2),n.\u0275\u0275template(4,WF,1,2,"mat-checkbox",3),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.getInputType()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.getDateTimeInputType()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(4,YF,t.isRtl()?"checkboxContainer-rtl":"checkboxContainer")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","Boolean"===t.valueType))},dependencies:[N.v_,N.Tl,b.Fj,b.JJ,b.Q7,b.On,fu,y.NgClass,y.NgIf,z.k0,Se.FC,y.AsyncPipe],styles:["mat-form-field[_ngcontent-%COMP%]{margin-top:15px;width:100%}mat-form-field[_ngcontent-%COMP%]   ts-datetime-picker[_ngcontent-%COMP%]{width:100%;margin-bottom:-1px}mat-form-field[_ngcontent-%COMP%]   ts-datetime-picker[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{position:relative}.editable-value[_ngcontent-%COMP%]{padding-right:5px;text-align:right}.editable-value[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding-right:5px}.editable-value[_ngcontent-%COMP%]   .checkboxContainer[_ngcontent-%COMP%], .editable-value[_ngcontent-%COMP%]   .checkboxContainer-rtl[_ngcontent-%COMP%]{width:100%}.editable-value[_ngcontent-%COMP%]   .checkboxContainer[_ngcontent-%COMP%]{text-align:left}.editable-value[_ngcontent-%COMP%]   .checkboxContainer-rtl[_ngcontent-%COMP%]{text-align:right}"]});const yM=function(a){return["checklist-leaf-node",a]};function KF(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-checkbox",9),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.selectAll())}),n.\u0275\u0275elementStart(1,"label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(5,yM,t.hasLeaves?"":"checkbox-padding-left"))("checked",t.allSelected())("indeterminate",t.partiallySelected())("disabled",t.readonly),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.caption)}}function XF(a,e){1&a&&n.\u0275\u0275element(0,"button",8)}function eL(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",10),n.\u0275\u0275template(2,XF,1,0,"button",7),n.\u0275\u0275elementStart(3,"label",11),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"label",12),n.\u0275\u0275text(6),n.\u0275\u0275pipe(7,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.hasLeaves),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",t.hasLeaves?"editable-label-header-item":"editable-label-item-margin"),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(7,4,"TreeHeaderValueColumnCaption"))}}function tL(a,e){1&a&&n.\u0275\u0275element(0,"button",8)}const RS=function(a,e){return[a,e]};function nL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-checkbox",15),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext().$implicit,s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.parameterLeafSelectionToggle(r))}),n.\u0275\u0275elementStart(1,"span",11),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(5,yM,i.hasLeaves?"":"checkbox-padding-left"))("checked",i.parameterSelection.isSelected(t))("disabled",i.readonly),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(7,RS,i.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption)}}function iL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span",21),n.\u0275\u0275text(1,"*"),n.\u0275\u0275elementEnd())}function aL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-editable-value",22),n.\u0275\u0275listener("valueChanged",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.valueChanged(r,s.uId))}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext(2).$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("value",t.value)("name",t.caption)("valueType",t.dataValueTypeName)("required",t.isRequired)("enabled",!i.readonly),n.\u0275\u0275attribute("data-item-marker",t.value)}}function rL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",23),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onCreateCollectionItem(r,s))}),n.\u0275\u0275element(1,"mat-icon",24),n.\u0275\u0275elementEnd()}}function sL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",25),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2).$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onRemoveCollectionItem(r,s))}),n.\u0275\u0275element(1,"mat-icon",26),n.\u0275\u0275elementEnd()}}const oL=function(a,e,t){return[a,e,t]};function lL(a,e){if(1&a&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",11),n.\u0275\u0275text(2),n.\u0275\u0275template(3,iL,2,0,"span",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",12),n.\u0275\u0275template(5,aL,1,6,"ts-editable-value",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",18),n.\u0275\u0275template(7,rL,2,0,"button",19),n.\u0275\u0275template(8,sL,2,0,"button",20),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction3(9,oL,i.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName,i.hasLeaves?"editable-label-item":"editable-label-item-margin")),n.\u0275\u0275attribute("data-item-marker",t.caption),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.caption," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isRequired),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("has-button",i.isCollectionItem(t)&&!i.readonly),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.isArray),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isArray&&i.canManageCollectionItems),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isCollectionItem(t)&&i.canManageCollectionItems)}}function cL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-tree-node",13),n.\u0275\u0275template(1,tL,1,0,"button",7),n.\u0275\u0275template(2,nL,3,10,"mat-checkbox",14),n.\u0275\u0275template(3,lL,9,13,"ng-container",2),n.\u0275\u0275elementEnd()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("data-item-marker","leaf "+t.caption),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.hasLeaves),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.canSelect),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.showValues)}}function uL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-checkbox",31),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext().$implicit,s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.parameterSelectionToggle(r))}),n.\u0275\u0275elementStart(1,"span",11),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("checked",i.descendantsAllSelected(t))("indeterminate",i.descendantsPartiallySelected(t))("disabled",i.readonly),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(5,RS,i.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption)}}function dL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",11),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(2,RS,i.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.caption)}}function pL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",23),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onCreateCollectionItem(r,s))}),n.\u0275\u0275element(1,"mat-icon",24),n.\u0275\u0275elementEnd()}}function mL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",25),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onRemoveCollectionItem(r,s))}),n.\u0275\u0275element(1,"mat-icon",26),n.\u0275\u0275elementEnd()}}function hL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"mat-tree-node",27)(1,"button",28),n.\u0275\u0275element(2,"mat-icon"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,uL,3,8,"mat-checkbox",29),n.\u0275\u0275template(4,dL,2,5,"span",30),n.\u0275\u0275elementStart(5,"div",18),n.\u0275\u0275template(6,pL,2,0,"button",19),n.\u0275\u0275template(7,mL,2,0,"button",20),n.\u0275\u0275elementEnd()()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275attribute("data-item-marker","collection "+t.caption),n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label","Toggle "+t.caption),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("expanded",i.treeControl.isExpanded(t)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.canSelect),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.showValues),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isArray&&i.canManageCollectionItems),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isCollectionItem(t)&&i.canManageCollectionItems)}}class gL{}class _u{constructor(e){this._directionality=e,this._nestedNodeMap=new Map,this._expanded=[],this._destroyed$=new u.Subject,this.parameters=[],this.selectedParameters=[],this.canSelect=!0,this.showValues=!1,this.canManageCollectionItems=!1,this.initialExpandMode=Gf.None,this.expandedChanged=new n.EventEmitter,this.selectedChange=new n.EventEmitter,this.valueChange=new n.EventEmitter,this.createCollectionItem=new n.EventEmitter,this.removeCollectionItem=new n.EventEmitter,this.parameterSelection=new KC.Ov(!0),this._getLevel=t=>t.level,this._isExpandable=t=>t.expandable,this._getChildren=t=>t.itemProperties,this._transformer=(t,i)=>{const r=this._nestedNodeMap.get(t.uId),s=r&&r.caption===t.caption?r:new gL;return s.caption=t.caption,s.uId=t.uId,s.dataValueTypeName=t.dataValueTypeName,s.level=i,s.expandable=!!t.itemProperties?.length,s.itemProperties=t.itemProperties,s.value=t.value,s.isRequired=t.isRequired,s.isArray=t.isArray,this._nestedNodeMap.set(t.uId,s),s},this.hasChild=(t,i)=>i.expandable,this._treeFlattener=new ke.JZ(this._transformer,this._getLevel,this._isExpandable,this._getChildren),this.treeControl=new LD.C2(this._getLevel,this._isExpandable),this.dataSource=new ke.kc(this.treeControl,this._treeFlattener)}get hasLeaves(){return this.parameters?.some(e=>e?.itemProperties?.length>0)}getParameterLevel(e,t,i=0){const r=t||[];for(const s of r){if(s.uId===e.uId)return i;const o=this.getParameterLevel(e,s.itemProperties,i+1);if(-1!==o)return o}return-1}_checkAllParentsSelection(e){let t=this._getParentNode(e);for(;t;)this._checkRootNodeSelection(t),t=this._getParentNode(t);this.selectedChange.next(this.parameterSelection.selected)}_checkRootNodeSelection(e){const t=this.parameterSelection.isSelected(e),i=this.treeControl.getDescendants(e),r=i.length>0&&i.some(s=>this.parameterSelection.isSelected(s));t&&!r?this.parameterSelection.deselect(e):!t&&r&&this.parameterSelection.select(e)}_getParentNode(e){const t=this._getLevel(e);if(t<1)return null;for(let r=this.treeControl.dataNodes.indexOf(e)-1;r>=0;r--){const s=this.treeControl.dataNodes[r];if(this._getLevel(s)<t)return s}return null}isRtl(){return"rtl"===this._directionality?.value}allSelected(){const e=this.treeControl.dataNodes;return e?.length>0&&e.every(t=>this.parameterSelection.isSelected(t))}partiallySelected(){return this.treeControl.dataNodes?.some(i=>this.parameterSelection.isSelected(i))&&!this.allSelected()}selectAll(){const e=this.partiallySelected();this.treeControl.dataNodes.forEach(t=>{e&&this.parameterSelection.isSelected(t)||(t.expandable?this.parameterLeafSelectionToggle(t):this.parameterSelectionToggle(t))})}descendantsAllSelected(e){const t=this.treeControl.getDescendants(e);return t.length>0&&t.every(i=>this.parameterSelection.isSelected(i))}isCollectionItem(e){const t=this._getParentNode(e);return!!t&&t.isArray}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(r=>this.parameterSelection.isSelected(r))&&!this.descendantsAllSelected(e)}parameterSelectionToggle(e){this.parameterSelection.toggle(e);const t=this.treeControl.getDescendants(e);this.parameterSelection.isSelected(e)?this.parameterSelection.select(...t):this.parameterSelection.deselect(...t),t.forEach(i=>this.parameterSelection.isSelected(i)),this._checkAllParentsSelection(e)}parameterLeafSelectionToggle(e){this.parameterSelection.toggle(e),this._checkAllParentsSelection(e)}ngOnChanges(){if(this.dataSource=new ke.kc(this.treeControl,this._treeFlattener),this.parameters&&(this.dataSource.data=this.parameters,this.selectedParameters)){const e=this.selectedParameters.map(t=>{const i=this.getParameterLevel(t,this.parameters);return this._transformer(t,i)});this.parameterSelection.select(...e)}}ngOnInit(){this.initialExpandMode===Gf.ExpandOnlyRoot&&this.treeControl.dataNodes.filter(e=>0===e.level).forEach(e=>{this.treeControl.expand(e)}),this.treeControl.expansionModel.changed.pipe((0,L.R)(this._destroyed$)).subscribe(e=>{this._expanded=[...this._expanded,...e.added.filter(t=>t.expandable)],e.removed&&(this._expanded=this._expanded.filter(t=>!e.removed.find(i=>i.uId===t.uId))),this.expandedChanged.next(this._expanded)}),this.initialExpanded&&this.treeControl.dataNodes.filter(e=>this.initialExpanded.find(t=>t.uId===e.uId)).forEach(e=>{this.treeControl.expand(e)})}valueChanged(e,t){this.valueChange.next({recordId:t,value:e})}onCreateCollectionItem(e,t){this.createCollectionItem.next(t.uId),t.expandable=!0,this.dataSource.data=this.parameters,this.treeControl.expand(t),e.stopPropagation()}onRemoveCollectionItem(e,t){this.removeCollectionItem.next(t.uId),this.dataSource.data=this.parameters}trackBy(e,t){return t.uId+t.expandable}}_u.\u0275fac=function(e){return new(e||_u)(n.\u0275\u0275directiveInject(xe.Is))},_u.\u0275cmp=n.\u0275\u0275defineComponent({type:_u,selectors:[["ts-parameters-tree"]],inputs:{initialExpanded:"initialExpanded",parameters:"parameters",selectedParameters:"selectedParameters",canSelect:"canSelect",showValues:"showValues",canManageCollectionItems:"canManageCollectionItems",readonly:"readonly",caption:"caption",initialExpandMode:"initialExpandMode"},outputs:{expandedChanged:"expandedChanged",selectedChange:"selectedChange",valueChange:"valueChange",createCollectionItem:"createCollectionItem",removeCollectionItem:"removeCollectionItem"},features:[n.\u0275\u0275NgOnChangesFeature],decls:8,vars:7,consts:[[1,"content"],[1,"header"],[4,"ngIf"],[3,"ngClass","checked","indeterminate","disabled","change",4,"ngIf"],[1,"parameters-tree",3,"dataSource","treeControl","trackBy"],["matTreeNodeToggle","","matTreeNodePadding","","matTreeNodePaddingIndent","24",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","24",4,"matTreeNodeDef","matTreeNodeDefWhen"],["mat-icon-button","","disabled","",4,"ngIf"],["mat-icon-button","","disabled",""],[3,"ngClass","checked","indeterminate","disabled","change"],[1,"editable-header-block"],[3,"ngClass"],[1,"editable-value-item"],["matTreeNodeToggle","","matTreeNodePadding","","matTreeNodePaddingIndent","24"],[3,"ngClass","checked","disabled","change",4,"ngIf"],[3,"ngClass","checked","disabled","change"],["class","required",4,"ngIf"],[3,"value","name","valueType","required","enabled","valueChanged",4,"ngIf"],[1,"tree-button"],["mat-icon-button","",3,"click",4,"ngIf"],["class","delete-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"required"],[3,"value","name","valueType","required","enabled","valueChanged"],["mat-icon-button","",3,"click"],[1,"add-button-icon"],["mat-icon-button","",1,"delete-button",3,"click"],[1,"trash-icon"],["matTreeNodePadding","","matTreeNodePaddingIndent","24"],["mat-icon-button","","matTreeNodeToggle","",1,"toggle"],[3,"checked","indeterminate","disabled","change",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"checked","indeterminate","disabled","change"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,JF,2,1,"ng-container",2),n.\u0275\u0275template(3,KF,3,7,"mat-checkbox",3),n.\u0275\u0275template(4,eL,8,6,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-tree",4),n.\u0275\u0275template(6,cL,4,4,"mat-tree-node",5),n.\u0275\u0275template(7,hL,8,8,"mat-tree-node",6),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.showValues),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.canSelect),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showValues),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.dataSource)("treeControl",t.treeControl)("trackBy",t.trackBy),n.\u0275\u0275advance(2),n.\u0275\u0275property("matTreeNodeDefWhen",t.hasChild))},dependencies:[y.NgClass,y.NgIf,U.eB,A.Hw,ke.fQ,ke.ah,ke.eu,ke.gi,ke.uo,Se.FC,fh,w.X$],styles:[".toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background:no-repeat top url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmEsLmJ7ZmlsbDpub25lO30uYntzdHJva2U6IzgwOTViMzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxNikgcm90YXRlKC05MCkiPjxyZWN0IGNsYXNzPSJhIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTYsMCwwLDZjLjAwOC0uMDA4LDYsNiw2LDYiIHRyYW5zZm9ybT0ibWF0cml4KDAuMDM1LCAtMC45OTksIDAuOTk5LCAwLjAzNSwgMS4zOTgsIDExLjI4OCkiLz48L2c+PC9zdmc+)}.toggle[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%]{transform:rotate(90deg);background-position-y:4px;background-position-x:0}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{top:0;position:sticky;z-index:1000;padding-top:15px;padding-bottom:2px;display:flex}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:0;width:36px}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1px}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   label.editable-label-item-margin[_ngcontent-%COMP%]{margin-left:9px;width:calc(50% + 20px)}.content[_ngcontent-%COMP%]   .editable-header-block[_ngcontent-%COMP%]{display:flex;width:100%}.content[_ngcontent-%COMP%]   .editable-label-item[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .editable-label-header-item[_ngcontent-%COMP%]{flex-basis:100%}.content[_ngcontent-%COMP%]   .editable-label-item-margin[_ngcontent-%COMP%]{width:50%;margin-left:9px}.content[_ngcontent-%COMP%]   .checkbox-padding-left[_ngcontent-%COMP%]{padding-left:9px}.content[_ngcontent-%COMP%]   .editable-value-item[_ngcontent-%COMP%]{flex-basis:400px;flex-shrink:0}.content[_ngcontent-%COMP%]   .has-button[_ngcontent-%COMP%]{flex-basis:364px}.content[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{visibility:visible}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]{height:36px;min-height:36px}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:16px;line-height:16px}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{padding-right:.6em}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl[_ngcontent-%COMP%]{background-position-y:2px;background-repeat:no-repeat}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter[_ngcontent-%COMP%]{padding-left:22px;background-position:left}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl[_ngcontent-%COMP%]{padding-right:22px;background-position:right}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .tree-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:1em}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .tree-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LnRyYXNoX2F7ZmlsbDojNGU3YmQ4O30udHJhc2hfYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMSkiPjxyZWN0IGNsYXNzPSJ0cmFzaF9hIiB3aWR0aD0iMSIgaGVpZ2h0PSI3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDQpIi8+PHJlY3QgY2xhc3M9InRyYXNoX2EiIHdpZHRoPSIxIiBoZWlnaHQ9IjciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcgNCkiLz48cmVjdCBjbGFzcz0idHJhc2hfYSIgd2lkdGg9IjEiIGhlaWdodD0iNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNSA0KSIvPjxwYXRoIGNsYXNzPSJ0cmFzaF9hIiBkPSJNMTAyNi0xNTNoLTN2LTJoLTV2MmgtM3YxaDF2OC45bDEuNDEsMS4xaDYuMTVsMS40NS0xLjFWLTE1MmgxWm0tNy0xaDN2MWgtM1ptNSwxMC40LS43OC42aC01LjQ3bC0uNzUtLjU5Vi0xNTJoN1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDE1IDE1NSkiLz48L2c+PHJlY3QgY2xhc3M9InRyYXNoX2IiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIvPjwvc3ZnPg0K)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .add-button-icon[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2Ij48ZGVmcy8+PGxpbmUgeTI9IjEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjUgMikiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICM0ZTdiZDg7Ii8+PGxpbmUgeTI9IjEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNSA4LjUpIHJvdGF0ZSg5MCkiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICM0ZTdiZDg7Ii8+PHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBzdHlsZT0iZmlsbDogbm9uZTsiLz48L3N2Zz4NCg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Text[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Text[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTEzLjEsMS40bDAuMSwzaC0wLjRjLTAuMS0wLjUtMC4yLTAuOS0wLjMtMS4xYy0wLjItMC40LTAuNC0wLjYtMC44LTAuOGMtMC4zLTAuMi0wLjctMC4zLTEuMy0wLjNIOC45djkuNmMwLDAuOCwwLjEsMS4zLDAuMywxLjRjMC4yLDAuMywwLjYsMC40LDEuMSwwLjRoMC40VjE0SDUuM3YtMC4zaDAuNGMwLjUsMCwwLjktMC4yLDEuMS0wLjVDNywxMyw3LjEsMTIuNSw3LjEsMTEuOFYyLjJINS42Yy0wLjYsMC0xLDAtMS4zLDAuMUM0LDIuNSwzLjcsMi43LDMuNSwzQzMuMywzLjMsMy4xLDMuOCwzLjEsNC40SDIuN2wwLjEtM0gxMy4xeiIgZmlsbD0iIzZjYjAzOSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Collection[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Collection[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTQsMXYySDJ2MkgwdjExaDEydi0yaDJ2LTJoMlYxSDR6IE0xMSwxNUgxVjZoMTBWMTV6IE0xMywxM2gtMVY1SDNWNGgxMFYxM3ogTTE1LDExaC0xVjNINVYyaDEwVjExeiIgZmlsbD0iI2I2OTFjZSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Object[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Object[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTQsMXYySDJ2MkgwdjExaDEydi0yaDJ2LTJoMlYxSDR6IE0xMSwxNUgxVjZoMTBWMTV6IE0xMywxM2gtMVY1SDNWNGgxMFYxM3ogTTE1LDExaC0xVjNINVYyaDEwVjExeiIgZmlsbD0iI2I2OTFjZSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Integer[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Integer[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0iI2VlYWY0YiI+DQoJCTxwYXRoIGQ9Ik0xLjgsNS4yTDEuOCw1LjJMMC41LDUuOUwwLjIsNS4xTDIsNC4yaDAuOVYxMmgtMVY1LjJ6Ii8+DQoJCTxwYXRoIGQ9Ik00LjYsMTJ2LTAuNmwwLjgtMC44YzItMS45LDIuOS0yLjksMi45LTQuMWMwLTAuOC0wLjQtMS41LTEuNS0xLjVjLTAuNywwLTEuMywwLjQtMS43LDAuN0w0LjgsNC45QzUuMyw0LjQsNi4xLDQuMSw3LDQuMWMxLjcsMCwyLjQsMS4yLDIuNCwyLjNjMCwxLjQtMSwyLjYtMi43LDQuMmwtMC42LDAuNnYwaDMuNVYxMkg0LjZ6Ii8+DQoJCTxwYXRoIGQ9Ik0xMC43LDEwLjhjMC4zLDAuMiwxLDAuNSwxLjcsMC41YzEuNCwwLDEuOC0wLjksMS44LTEuNWMwLTEuMS0xLTEuNi0yLTEuNmgtMC42VjcuNGgwLjZjMC44LDAsMS43LTAuNCwxLjctMS4zYzAtMC42LTAuNC0xLjItMS40LTEuMmMtMC42LDAtMS4yLDAuMy0xLjYsMC41bC0wLjMtMC44YzAuNC0wLjMsMS4yLTAuNiwyLTAuNmMxLjUsMCwyLjIsMC45LDIuMiwxLjljMCwwLjgtMC41LDEuNS0xLjQsMS44djBjMSwwLjIsMS43LDAuOSwxLjcsMmMwLDEuMi0xLDIuMy0yLjgsMi4zYy0wLjksMC0xLjYtMC4zLTItMC41TDEwLjcsMTAuOHoiLz4NCgk8L2c+DQo8L3N2Zz4=)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Float[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Float[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0iI2VmN2U2MyI+PHBhdGggZD0iTTYuNiw3LjljMCwyLjktMS4xLDQuNS0yLjksNC41QzIsMTIuNCwwLjksMTAuOCwwLjksOGMwLTIuOCwxLjItNC40LDIuOS00LjRDNS42LDMuNiw2LjYsNS4yLDYuNiw3Ljl6IE0yLDhjMCwyLjIsMC43LDMuNCwxLjcsMy40YzEuMiwwLDEuNy0xLjQsMS43LTMuNWMwLTIuMS0wLjUtMy40LTEuNy0zLjRDMi43LDQuNSwyLDUuNywyLDh6Ii8+DQoJCTxwYXRoIGQ9Ik03LjMsMTEuNWMwLTAuNSwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44YzAsMC41LTAuMywwLjgtMC44LDAuOEM3LjYsMTIuNCw3LjMsMTIsNy4zLDExLjV6Ii8+DQoJCTxwYXRoIGQ9Ik0xNSw0LjdoLTMuMmwtMC4zLDIuMmMwLjIsMCwwLjQtMC4xLDAuNy0wLjFjMC43LDAsMS4zLDAuMSwxLjgsMC41YzAuNywwLjQsMS4yLDEuMSwxLjIsMi4yYzAsMS43LTEuMywyLjktMy4xLDIuOWMtMC45LDAtMS43LTAuMy0yLjEtMC41bDAuMy0wLjljMC40LDAuMiwxLDAuNSwxLjgsMC41YzEuMSwwLDItMC43LDItMS44YzAtMS4xLTAuNy0xLjktMi40LTEuOWMtMC41LDAtMC45LDAuMS0xLjIsMC4xbDAuNS00LjFoNFY0Ljd6Ii8+DQoJPC9nPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Boolean[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Boolean[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTE0LDJ2MTJIMlYySDE0IE0xNSwxSDF2MTRoMTRWMUwxNSwxeiIgZmlsbD0iIzViYzhjNCIvPg0KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzViYzhjNCIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTSA1IDcuNSA3LjUgMTAuNSAxMS41IDQuNSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.DateTime[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.DateTime[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOGU4ZWI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPg0KCQk8cGF0aCBkPSJNIDE0IDMuNSAxNS41IDMuNSAxNS41IDE1LjUgMS41IDE1LjUgMS41IDMuNSAzIDMuNSIvPg0KCQk8cGF0aCBkPSJNIDYsMy41IDExLDMuNSIvPg0KCQk8cGF0aCBkPSJNIDEsNy41IDE2LDcuNSIvPg0KCTwvZz4NCgk8ZyBmaWxsPSIjOGU4ZWI3Ij4NCgkJPHBhdGggZD0iTTUsMnYzSDRWMkg1IE02LDFIM3Y1aDNWMUw2LDF6Ii8+DQoJCTxwYXRoIGQ9Ik0xMywydjNoLTFWMkgxMyBNMTQsMWgtM3Y1aDNWMUwxNCwxeiIvPg0KCTwvZz4NCjwvc3ZnPg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Date[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Date[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOGU4ZWI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPg0KCQk8cGF0aCBkPSJNIDE0IDMuNSAxNS41IDMuNSAxNS41IDE1LjUgMS41IDE1LjUgMS41IDMuNSAzIDMuNSIvPg0KCQk8cGF0aCBkPSJNIDYsMy41IDExLDMuNSIvPg0KCQk8cGF0aCBkPSJNIDEsNy41IDE2LDcuNSIvPg0KCTwvZz4NCgk8ZyBmaWxsPSIjOGU4ZWI3Ij4NCgkJPHBhdGggZD0iTTUsMnYzSDRWMkg1IE02LDFIM3Y1aDNWMUw2LDF6Ii8+DQoJCTxwYXRoIGQ9Ik0xMywydjNoLTFWMkgxMyBNMTQsMWgtM3Y1aDNWMUwxNCwxeiIvPg0KCTwvZz4NCjwvc3ZnPg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Time[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Time[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOGU4ZWI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPg0KCQk8cGF0aCBkPSJNIDE0IDMuNSAxNS41IDMuNSAxNS41IDE1LjUgMS41IDE1LjUgMS41IDMuNSAzIDMuNSIvPg0KCQk8cGF0aCBkPSJNIDYsMy41IDExLDMuNSIvPg0KCQk8cGF0aCBkPSJNIDEsNy41IDE2LDcuNSIvPg0KCTwvZz4NCgk8ZyBmaWxsPSIjOGU4ZWI3Ij4NCgkJPHBhdGggZD0iTTUsMnYzSDRWMkg1IE02LDFIM3Y1aDNWMUw2LDF6Ii8+DQoJCTxwYXRoIGQ9Ik0xMywydjNoLTFWMkgxMyBNMTQsMWgtM3Y1aDNWMUwxNCwxeiIvPg0KCTwvZz4NCjwvc3ZnPg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Guid[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Guid[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0iIzk3YmFkMiI+PHBhdGggZD0iTTUuMiwyLjJ2MS4zSDMuOXYxMC4xaDEuMnYxLjNIMS4ydi0xLjNoMS4yVjMuNEgxLjJWMi4ySDUuMnoiLz4NCgkJPHBhdGggZD0iTTE0LjcsMTQuOGgtMS40di0xLjVoMGMtMC43LDEuMi0xLjcsMS43LTMuMSwxLjdjLTEuMSwwLTItMC40LTIuNy0xLjJzLTEtMS45LTEtMy4zYzAtMS41LDAuNC0yLjcsMS4xLTMuNnMxLjctMS4zLDMtMS4zYzEuMiwwLDIuMSwwLjUsMi43LDEuNWgwVjEuNWgxLjRWMTQuOHogTTEzLjMsMTAuN1Y5LjRjMC0wLjctMC4yLTEuMy0wLjctMS44cy0xLjEtMC44LTEuOC0wLjhjLTAuOSwwLTEuNiwwLjMtMi4xLDFzLTAuOCwxLjUtMC44LDIuN2MwLDEsMC4yLDEuOSwwLjcsMi41czEuMSwwLjksMS45LDAuOWMwLjgsMCwxLjUtMC4zLDItMC45UzEzLjMsMTEuNiwxMy4zLDEwLjd6Ii8+DQoJPC9nPg0KPC9zdmc+)}"]});class _h{constructor(e){this.translateService=e,this.listMode="multi",this.methodChecked=new n.EventEmitter,this.parameterChecked=new n.EventEmitter,this.dataSchema={columns:[{name:"caption",caption:this.translateService.instant("WizardMethodCaption"),valueType:l.DataValueType.Text,cellComponentClass:gu}],rowCssClass:this.getRowCssClass.bind(this)}}get parameters(){return this.selectedMethod?.[this.parametersKey].parameters}get selectedMethod(){return this.methods?.find(e=>e.uId===this._selectedMethod?.uId)||(this._selectedMethod=this.methods&&this.methods[0]),this._selectedMethod}set selectedMethod(e){this._selectedMethod=e}get eventHandlers(){return{caption:{selectMethod:this.onMethodSelected.bind(this)}}}get editParametersEnabled(){return!!this.selected?.find(e=>e.uId===this.selectedMethod?.uId)}get tableConfig(){return{selectMode:this.listMode,sortColumn:"caption"}}getRowCssClass(e){return e.uId===this.selectedMethod?.uId?"selected":""}onMethodSelected(e){"multi"===this.listMode&&(this.selectedMethod=this.methods.find(t=>t.uId===e.uId))}onMethodChecked(e){"multi"===this.listMode?this.methodChecked.next(e):this.selectedMethod=this.methods?.find(t=>t.uId===e?.[0].uId)}onParameterChecked(e){this.parameterChecked.next(e)}}function _L(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div")(1,"mat-option",5)(2,"div",6)(3,"div",7),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()()()),2&a){const t=e.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("value",t.uId),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate2(" ",t.portName," (",i.getSoapVersion(t.type),") ")}}_h.\u0275fac=function(e){return new(e||_h)(n.\u0275\u0275directiveInject(w.sK))},_h.\u0275cmp=n.\u0275\u0275defineComponent({type:_h,selectors:[["ts-soap-service-request-builder"]],inputs:{methods:"methods",selected:"selected",selectedParameters:"selectedParameters",listMode:"listMode",parametersKey:"parametersKey",parametersCaption:"parametersCaption"},outputs:{methodChecked:"methodChecked",parameterChecked:"parameterChecked"},ngContentSelectors:["*"],decls:6,vars:11,consts:[[1,"soap-service-request-builder"],[1,"caption"],[1,"container"],[1,"panel","method-selector",3,"data","dataSchema","headerSticky","minWidthPerColumn","config","selected","eventHandlers","selectedChange"],[1,"panel","parameter-selector",3,"parameters","selectedParameters","caption","readonly","selectedChange"]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275projection(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",2)(4,"ts-table",3),n.\u0275\u0275listener("selectedChange",function(r){return t.onMethodChecked(r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"ts-parameters-tree",4),n.\u0275\u0275listener("selectedChange",function(r){return t.onParameterChecked(r)}),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275advance(4),n.\u0275\u0275property("data",t.methods)("dataSchema",t.dataSchema)("headerSticky",!0)("minWidthPerColumn",0)("config",t.tableConfig)("selected",t.selected)("eventHandlers",t.eventHandlers),n.\u0275\u0275advance(1),n.\u0275\u0275property("parameters",t.parameters)("selectedParameters",t.selectedParameters)("caption",t.parametersCaption)("readonly",!(t.editParametersEnabled||"single"===t.listMode)))},dependencies:[_t,_u],styles:[".soap-service-request-builder[_ngcontent-%COMP%]{flex-basis:100%;overflow:hidden;width:860px;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start}.soap-service-request-builder[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{flex-shrink:0}.soap-service-request-builder[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{flex-basis:100%;margin-top:10px;display:flex;flex-direction:row;align-items:stretch}.soap-service-request-builder[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{flex-basis:50%;overflow-y:auto}.soap-service-request-builder[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel.parameter-selector[_ngcontent-%COMP%]{margin-left:10px}"]});class yh{constructor(){this.serviceSelected=new n.EventEmitter}onServiceSelect(e){this.serviceSelected.next(e)}getSoapVersion(e){let t="";return e===Ca.soap11&&(t="SOAP 1.1"),e===Ca.soap12&&(t="SOAP 1.2"),t}}yh.\u0275fac=function(e){return new(e||yh)},yh.\u0275cmp=n.\u0275\u0275defineComponent({type:yh,selectors:[["ts-soap-select-service"]],inputs:{services:"services",selectedServiceUId:"selectedServiceUId"},outputs:{serviceSelected:"serviceSelected"},decls:7,vars:5,consts:[[1,"soap-select-service"],[1,"caption"],["floatLabel","always",1,"service-select-field"],["mat-basic","","disableOptionCentering","","required","","data-item-marker","select_service",3,"value","valueChange","selectionChange"],[4,"ngFor","ngForOf"],[3,"value"],[1,"service-select-option"],[1,"col-service-name"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"mat-form-field",2)(5,"mat-select",3),n.\u0275\u0275listener("valueChange",function(r){return t.selectedServiceUId=r})("selectionChange",function(r){return t.onServiceSelect(r)}),n.\u0275\u0275template(6,_L,5,3,"div",4),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,3,"SelectSoapService")),n.\u0275\u0275advance(3),n.\u0275\u0275property("value",t.selectedServiceUId),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.services))},dependencies:[N.v_,y.NgForOf,et.x8,Xe.CK,w.X$],styles:[".soap-select-service[_ngcontent-%COMP%]{margin-bottom:10px}.soap-select-service[_ngcontent-%COMP%]   .service-select-field[_ngcontent-%COMP%]{width:250px}.service-select-option[_ngcontent-%COMP%]{display:flex;line-height:19px;margin-top:5px;margin-bottom:5px}.service-select-option[_ngcontent-%COMP%]   .col-service-name[_ngcontent-%COMP%]{flex:1}"]});const yL=["wizardStepper"];function CL(a,e){1&a&&n.\u0275\u0275element(0,"ts-mask",21)}function SL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-soap-select-service",22),n.\u0275\u0275listener("serviceSelected",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.onServiceSelected(r))}),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("services",t.services)("selectedServiceUId",null==t.selectedService?null:t.selectedService.uId)}}var va;!function(a){a.Success="Success",a.Error="Error",a.Skip="SkipQuickSetup",a.Close="Close"}(va||(va={}));class Ch{get wizardCaption(){if(this.selectedService){const e=this.translateService.instant("SoapWizardServiceSelectedCaption"),t=this.selectedService.caption;return e.replace("##service-caption##",t.charAt(0).toUpperCase()+t.slice(1))}return this.translateService.instant("SoapWizardCaption")}constructor(e,t,i,r,s,o,c,d){this._dialogRef=e,this.featureService=t,this.translateService=i,this.changeDetector=r,this.builder=s,this.snackBar=o,this.downloadWsdl=c,this.googleTagManager=d,this.services=[],this.selectedRequestParameters=[],this.selectedResponseParameters=[],this.step=AS.upload}_getGtmActionFromResultCode(e){return{[Kt.Close]:va.Close,[Kt.Skip]:va.Skip,[Kt.Error]:va.Error,[Kt.Success]:va.Success}[e]}_closeDialog(e,t=[]){const i=this._getGtmActionFromResultCode(e);this._sendGTMData(i);const r={services:t,resultCode:e};this._dialogRef.close(r)}_sortServices(e){return e.sort((t,i)=>t.type===i.type?t.portName.localeCompare(i.portName):i.type-t.type)}_flattenParameter(e){const t=[e];return e.itemProperties&&e.itemProperties.forEach(i=>{const r=this._flattenParameter(i);t.push(...r)}),t}_flattenParameters(e,t){const i=[];return e?.serviceMethods.forEach(r=>{r[t]?.parameters?.forEach(s=>{i.push(...this._flattenParameter(s))})}),i}_getWsdlParseErrorText(e){if(!e)return this.translateService.instant("WsdlParsingError");switch(e.errorCode){case"SchemaDocumentFileNotFoundError":return this.translateService.instant(e.errorCode).replace(/{\d}/,e.fileName);case"DownloadXmlSchemaError":return e.message;default:return this.translateService.instant("WsdlParsingError")}}_showErrorMessage(e){this._sendGTMData(va.Error);const t=this._getWsdlParseErrorText(e);this.snackBar.open(t,"",{duration:5e3})}_getGTMModuleName(){return 0===this.wizardStepper.selectedIndex?"QuickSetupStartPage":"QuickSetupMethodSelection"}_sendGTMData(e){const t={action:e,moduleName:this._getGTMModuleName(),schemaName:"WebServiceSetup"};this.googleTagManager.track(t)}onKeyUp(){this._closeDialog(Kt.Close)}onSkipQuickSetupClick(){this._closeDialog(Kt.Skip)}onCloseQuickSetupClick(){this._closeDialog(Kt.Close)}onWsdlFilesSelected(e){this.builder.build(e).subscribe({next:t=>this.onServiceParsed(t),error:t=>this._showErrorMessage(t)})}onWsdlUrlChanged(e){this._wsdlUrl=e}onStepChange(e){0===e.selectedIndex&&(this.selectedService=null,this.services=null,this.changeDetector.detectChanges())}getSelectedParameters(e,t){return[...e.filter(i=>{const r=t.find(s=>s.uId===i.uId);return r&&i?.itemProperties?.length>0&&(i.itemProperties=[...this.getSelectedParameters(i.itemProperties,t)]),!!r})]}onSaveService(){const e={...this.selectedService};e.serviceMethods=[...e.serviceMethods.filter(t=>this.selectedMethods.includes(t))],e.serviceMethods.forEach(t=>{t.request.parameters=this.getSelectedParameters(t.request?.parameters,this.selectedRequestParameters),t.response.parameters=this.getSelectedParameters(t.response?.parameters,this.selectedResponseParameters)}),this._closeDialog(Kt.Success,[e])}onParseWsdlByLink(){this.isLoading=!0,this.downloadWsdl.download([this._wsdlUrl]).subscribe({next:e=>{this.isLoading=!1,this.onWsdlFilesSelected(e)},error:e=>{this.isLoading=!1,this._showErrorMessage(e)}})}onServiceParsed(e){this.featureService.getFeatureState("NotUseWsdlWizardSteps").subscribe(t=>{if(t)this._closeDialog(Kt.Success,e);else{const i=e.filter(r=>r.type!==Ca.undefined);this.services=this._sortServices(i),this.selectedService=this.services[0],this.selectedMethods=[...this.selectedService.serviceMethods],this.selectedRequestParameters=this._flattenParameters(this.selectedService,"request"),this.selectedResponseParameters=this._flattenParameters(this.selectedService,"response"),this._sendGTMData(va.Success),this.wizardStepper.next()}})}onServiceSelected(e){this.selectedService=this.services.find(t=>t.uId===e.value),this.selectedMethods=[...this.selectedService.serviceMethods],this.changeDetector.detectChanges(),this.selectedMethods=[...this.selectedService.serviceMethods],this.selectedRequestParameters=this._flattenParameters(this.selectedService,"request"),this.selectedResponseParameters=this._flattenParameters(this.selectedService,"response")}onMethodChecked(e){this.selectedMethods=[...e]}onParameterChecked(e){this.selectedRequestParameters=[...e]}onResponseParameterChecked(e){this.selectedResponseParameters=[...e]}ngOnInit(){this.googleTagManager.initialize()}}Ch.\u0275fac=function(e){return new(e||Ch)(n.\u0275\u0275directiveInject(E.hV),n.\u0275\u0275directiveInject(Me),n.\u0275\u0275directiveInject(w.sK),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(Jt),n.\u0275\u0275directiveInject(x.pl),n.\u0275\u0275directiveInject(ba),n.\u0275\u0275directiveInject(br))},Ch.\u0275cmp=n.\u0275\u0275defineComponent({type:Ch,selectors:[["ts-web-service-wizard"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(yL,5),2&e){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.wizardStepper=i.first)}},hostBindings:function(e,t){1&e&&n.\u0275\u0275listener("keyup.esc",function(){return t.onKeyUp()},!1,n.\u0275\u0275resolveWindow)},decls:48,vars:44,consts:[["class","component-mask",4,"ngIf"],[1,"web-service-wizard"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"click"],["alt","close","src","data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaXQ9IiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgZm9jdXNhYmxlPSJmYWxzZSI+DQogIDxyZWN0IGlkPSJSZWN0YW5nbGVfNyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJub25lIj48L3JlY3Q+DQogIDxsaW5lIGlkPSJMaW5lXzUiIGRhdGEtbmFtZT0iTGluZSA1IiB5MT0iMTAiIHgyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSI+PC9saW5lPg0KICA8bGluZSBpZD0iTGluZV82IiBkYXRhLW5hbWU9IkxpbmUgNiIgeDI9IjEwIiB5Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzk5OSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiPjwvbGluZT4NCjwvc3ZnPg=="],[3,"selectionChange"],["wizardStepper",""],[1,"soap-service-wizard-step-content","step-0"],[1,"upload-wsdl",3,"filesSelected","urlChanged"],["wsdlUpload",""],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"continue-without-setup",3,"click"],["mat-flat-button","","color","accent",1,"next","step-one-next-button",3,"disabled","click"],[1,"soap-service-wizard-step-content","step-1"],["class","select-service",3,"services","selectedServiceUId","serviceSelected",4,"ngIf"],[1,"request-builder",3,"methods","selected","selectedParameters","parametersKey","parametersCaption","methodChecked","parameterChecked"],["mat-button","","matStepperPrevious",""],["mat-flat-button","","color","accent","matStepperNext",""],[1,"soap-service-wizard-step-content","step-2"],[1,"response-builder",3,"methods","selectedParameters","listMode","parametersKey","parametersCaption","parameterChecked"],["mat-flat-button","","color","accent",3,"click"],[1,"component-mask"],[1,"select-service",3,"services","selectedServiceUId","serviceSelected"]],template:function(e,t){if(1&e&&(n.\u0275\u0275template(0,CL,1,0,"ts-mask",0),n.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"span"),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",3),n.\u0275\u0275listener("click",function(){return t.onCloseQuickSetupClick()}),n.\u0275\u0275element(6,"img",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"mat-horizontal-stepper",5,6),n.\u0275\u0275listener("selectionChange",function(r){return t.onStepChange(r)}),n.\u0275\u0275elementStart(9,"mat-step")(10,"div",7)(11,"ts-wsdl-upload",8,9),n.\u0275\u0275listener("filesSelected",function(r){return t.onWsdlFilesSelected(r)})("urlChanged",function(r){return t.onWsdlUrlChanged(r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",10)(14,"button",11),n.\u0275\u0275listener("click",function(){return t.onSkipQuickSetupClick()}),n.\u0275\u0275text(15),n.\u0275\u0275pipe(16,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(17,"button",12),n.\u0275\u0275listener("click",function(){return t.onParseWsdlByLink()}),n.\u0275\u0275pipe(18,"async"),n.\u0275\u0275text(19),n.\u0275\u0275pipe(20,"translate"),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(21,"mat-step")(22,"div",13),n.\u0275\u0275template(23,SL,1,2,"ts-soap-select-service",14),n.\u0275\u0275elementStart(24,"ts-soap-service-request-builder",15),n.\u0275\u0275listener("methodChecked",function(r){return t.onMethodChecked(r)})("parameterChecked",function(r){return t.onParameterChecked(r)}),n.\u0275\u0275pipe(25,"translate"),n.\u0275\u0275text(26),n.\u0275\u0275pipe(27,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(28,"div",10)(29,"button",16),n.\u0275\u0275text(30),n.\u0275\u0275pipe(31,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(32,"button",17),n.\u0275\u0275text(33),n.\u0275\u0275pipe(34,"translate"),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(35,"mat-step")(36,"div",18)(37,"ts-soap-service-request-builder",19),n.\u0275\u0275listener("parameterChecked",function(r){return t.onResponseParameterChecked(r)}),n.\u0275\u0275pipe(38,"translate"),n.\u0275\u0275text(39),n.\u0275\u0275pipe(40,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(41,"div",10)(42,"button",16),n.\u0275\u0275text(43),n.\u0275\u0275pipe(44,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(45,"button",20),n.\u0275\u0275listener("click",function(){return t.onSaveService()}),n.\u0275\u0275text(46),n.\u0275\u0275pipe(47,"translate"),n.\u0275\u0275elementEnd()()()()()()),2&e){const i=n.\u0275\u0275reference(12);n.\u0275\u0275property("ngIf",t.isLoading),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(t.wizardCaption),n.\u0275\u0275advance(11),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(16,22,"SkipWizardButtonCaption")),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",!n.\u0275\u0275pipeBind1(18,24,i.urlChanged)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(20,26,"WizardNext")),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",(null==t.services?null:t.services.length)>1),n.\u0275\u0275advance(1),n.\u0275\u0275property("methods",null==t.selectedService?null:t.selectedService.serviceMethods)("selected",t.selectedMethods)("selectedParameters",t.selectedRequestParameters)("parametersKey","request")("parametersCaption",n.\u0275\u0275pipeBind1(25,28,"WizardRequestParametersCaption")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(27,30,"WizardActionCaption")," "),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(31,32,"WizardBack")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(34,34,"WizardNext")),n.\u0275\u0275advance(4),n.\u0275\u0275property("methods",t.selectedMethods)("selectedParameters",t.selectedResponseParameters)("listMode","single")("parametersKey","response")("parametersCaption",n.\u0275\u0275pipeBind1(38,36,"WizardResponseParametersCaption")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(40,38,"WizardResponseActionCaption")," "),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(44,40,"WizardBack")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(47,42,"WizardSave"))}},dependencies:[y.NgIf,U.eB,E.YS,E.ev,Dp.C0,Dp.Vq,Dp.Ic,Dp.fd,An,gh,_h,yh,y.AsyncPipe,w.X$],styles:[".web-service-wizard[_ngcontent-%COMP%]{margin-top:-8px;min-width:500px;max-height:80vh;display:flex;flex-direction:column}.web-service-wizard[_ngcontent-%COMP%]   [mat-dialog-actions][_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:row;justify-content:flex-end;margin-bottom:0;margin-top:16px}.web-service-wizard[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:10px}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]{overflow:hidden;flex-basis:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .upload-wsdl[_ngcontent-%COMP%]{flex-basis:100%}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .select-service[_ngcontent-%COMP%]{flex-shrink:0}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .request-builder[_ngcontent-%COMP%], .web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .response-builder[_ngcontent-%COMP%]{flex-basis:100%;overflow:hidden;display:flex;flex-direction:column}"]});class Ia{constructor(e){this._dialogService=e,this._destroyed$=new u.Subject}showWizard(){return this._dialogService.open(Ch,{disableClose:!0,panelClass:"dialog-top-border"})}ngOnDestroy(){this._destroyed$.next()}}Ia.\u0275fac=function(e){return new(e||Ia)(n.\u0275\u0275inject(Ce))},Ia.\u0275prov=n.\u0275\u0275defineInjectable({token:Ia,factory:Ia.\u0275fac});class Sh{get caption(){return this.schema.caption}get dataValueTypeName(){return this.schema.dataValueTypeName}get uId(){return this.instanceUId}get isRequired(){return this.schema.isRequired}get isArray(){return this.schema.isArray}constructor(e,t=""){this.schema=e,this.value=hh.parseValue(e,t),this.instanceUId=(0,l.generateGuid)()}}class yu{constructor(e){this.httpClient=e,this.callServiceSchemaEndpointUrl="/rest/CallServiceSchemaService/",this.callServiceSchemaMethodName="Execute"}sendRequest(e,t,i){const r=`${this.callServiceSchemaEndpointUrl}${this.callServiceSchemaMethodName}`;return this.httpClient.post(r,{serviceName:e,methodName:t,parameters:i||[]}).pipe((0,h.U)(s=>s.ExecuteResult))}}yu.\u0275fac=function(e){return new(e||yu)(n.\u0275\u0275inject(D.HttpClient))},yu.\u0275prov=n.\u0275\u0275defineInjectable({token:yu,factory:yu.\u0275fac,providedIn:"root"});const ML=[[["",8,"left-caption"]],[["",8,"right-caption"]]];class bh{}bh.\u0275fac=function(e){return new(e||bh)},bh.\u0275cmp=n.\u0275\u0275defineComponent({type:bh,selectors:[["ts-double-side-panel"]],inputs:{request:"request",response:"response",language:"language"},ngContentSelectors:[".left-caption",".right-caption"],decls:11,vars:8,consts:[[1,"double-side-panel"],["data-item-marker","request-panel",1,"panel","panel-left"],[1,"header"],[1,"body"],[3,"language","text","readOnly","hideTooltip"],["data-item-marker","response-panel",1,"panel"]],template:function(e,t){1&e&&(n.\u0275\u0275projectionDef(ML),n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),n.\u0275\u0275projection(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275element(5,"ts-code-editor",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",5)(7,"div",2),n.\u0275\u0275projection(8,1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",3),n.\u0275\u0275element(10,"ts-code-editor",4),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275advance(5),n.\u0275\u0275property("language",t.language)("text",t.request)("readOnly",!0)("hideTooltip",!0),n.\u0275\u0275advance(5),n.\u0275\u0275property("language",t.language)("text",t.response)("readOnly",!0)("hideTooltip",!0))},dependencies:[uu],styles:[".double-side-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;width:100%;height:100%}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{flex-basis:100%;overflow:hidden;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.double-side-panel[_ngcontent-%COMP%]   .panel.panel-left[_ngcontent-%COMP%]{margin-right:20px}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:32px;flex-shrink:0}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex-basis:100%;border-width:1px;border-style:solid;margin-top:16px;overflow:hidden;display:flex;flex-direction:row;align-items:stretch;justify-content:stretch}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ts-code-editor[_ngcontent-%COMP%]{font-size:1.6em;overflow:hidden}"],changeDetection:0});class vh{get errorMessage(){return`Error code: ${this.errorInfo?.errorCode}\n\nError message: ${this.errorInfo?.message}\n\nStack trace:\n`+this.errorInfo?.stackTrace}}function xL(a,e){1&a&&n.\u0275\u0275element(0,"ts-mask",13)}function EL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span",14),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,"ServiceClientRequestTabCaption")))}function TL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ts-parameters-tree",22),n.\u0275\u0275listener("valueChange",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(s.onParameterValueChange(r))})("expandedChanged",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(s.onRequestParametersExpandChange(r))})("createCollectionItem",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(s.onCreateCollectionItem(r))})("removeCollectionItem",function(r){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(s.onRemoveCollectionItem(r))}),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("parameters",t.requestParameters)("initialExpanded",t.requestExpanded)("caption",n.\u0275\u0275pipeBind1(1,8,"ServiceClientRequestParameters"))("readonly",!1)("canSelect",!1)("showValues",!0)("canManageCollectionItems",!0)("initialExpandMode","ExpandOnlyRoot")}}function PL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"div",23)(1,"div",24),n.\u0275\u0275element(2,"div",25),n.\u0275\u0275elementStart(3,"div",26)(4,"span"),n.\u0275\u0275text(5),n.\u0275\u0275pipe(6,"translate"),n.\u0275\u0275elementEnd()()()()),2&a&&(n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(6,1,"RequestParametersEmptyMessage")))}vh.\u0275fac=function(e){return new(e||vh)},vh.\u0275cmp=n.\u0275\u0275defineComponent({type:vh,selectors:[["ts-service-execution-error"]],inputs:{errorInfo:"errorInfo"},decls:1,vars:3,consts:[[3,"text","readOnly","hideTooltip"]],template:function(e,t){1&e&&n.\u0275\u0275element(0,"ts-code-editor",0),2&e&&n.\u0275\u0275property("text",t.errorMessage)("readOnly",!0)("hideTooltip",!0)},dependencies:[uu],styles:["ts-code-editor[_ngcontent-%COMP%]{font-size:1.6em}"]});const CM=function(a){return[a]};function AL(a,e){if(1&a){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"span",17),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",18),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onOpenAuthenticationPageButtonClick())}),n.\u0275\u0275element(6,"div",3),n.\u0275\u0275elementStart(7,"span",19),n.\u0275\u0275text(8),n.\u0275\u0275pipe(9,"translate"),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(10,TL,2,10,"ts-parameters-tree",20),n.\u0275\u0275template(11,PL,7,3,"div",21),n.\u0275\u0275elementEnd()}if(2&a){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate2("",n.\u0275\u0275pipeBind1(4,6,"ServiceClientRequestPrompt")," ",null==t.serviceMethod?null:t.serviceMethod.caption,""),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(10,CM,t.isRtl()?"open-authentication-settings-icon-rtl":"open-authentication-settings-icon")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(9,8,"OpenAuthenticationSettingsButtonCaption")),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.requestParametersEmpty),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.requestParametersEmpty)}}function RL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span",27),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,"ServiceClientResponseTabCaption")))}function kL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",15)(1,"span",17),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"ts-parameters-tree",28),n.\u0275\u0275pipe(5,"translate"),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",null==t.serviceMethod?null:t.serviceMethod.caption," ",n.\u0275\u0275pipeBind1(3,7,"ServiceClientResponseTabCaption")," "),n.\u0275\u0275advance(2),n.\u0275\u0275property("parameters",t.responseParameters)("caption",n.\u0275\u0275pipeBind1(5,9,"ServiceClientRequestParameters"))("readonly",!0)("canSelect",!1)("showValues",!0)}}function NL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"mat-tab"),n.\u0275\u0275template(1,RL,3,3,"ng-template",8),n.\u0275\u0275template(2,kL,6,11,"ng-template",9),n.\u0275\u0275elementEnd())}function VL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span",29),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&a&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,1,"ServiceClientErrorTabCaption")))}function FL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",15)(1,"span",17),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",30),n.\u0275\u0275element(5,"ts-service-execution-error",31),n.\u0275\u0275elementEnd()()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,2,"ServiceClientErrorTabInfo")),n.\u0275\u0275advance(3),n.\u0275\u0275property("errorInfo",null==t.serviceLastResponse?null:t.serviceLastResponse.errorInfo)}}function LL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"mat-tab"),n.\u0275\u0275template(1,VL,3,3,"ng-template",8),n.\u0275\u0275template(2,FL,6,4,"ng-template",9),n.\u0275\u0275elementEnd())}function OL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"span",32),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.bodyTabCaption)}}function jL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",33)(1,"ts-double-side-panel",34)(2,"span",35),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"span",36),n.\u0275\u0275text(6),n.\u0275\u0275pipe(7,"translate"),n.\u0275\u0275elementEnd()()()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("language",t.bodyCodeEditorLanguage)("request",t.requestBody)("response",t.responseBody),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(4,5,"ServiceClientRawRequesCaption")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(7,7,"ServiceClientRawResponseCaption"))}}function BL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"mat-tab"),n.\u0275\u0275template(1,OL,2,1,"ng-template",8),n.\u0275\u0275template(2,jL,8,9,"ng-template",9),n.\u0275\u0275elementEnd())}function UL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"span",37),n.\u0275\u0275text(1,"Raw http"),n.\u0275\u0275elementEnd())}function GL(a,e){if(1&a&&(n.\u0275\u0275elementStart(0,"div",15)(1,"ts-double-side-panel",34)(2,"span",35),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"span",36),n.\u0275\u0275text(6),n.\u0275\u0275pipe(7,"translate"),n.\u0275\u0275elementEnd()()()),2&a){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("language",t.rawDataCodeEditorLanguage)("request",t.requestRawData)("response",t.responseRawData),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(4,5,"ServiceClientRawRequesCaption")),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(7,7,"ServiceClientRawResponseCaption"))}}function zL(a,e){1&a&&(n.\u0275\u0275elementStart(0,"mat-tab"),n.\u0275\u0275template(1,UL,2,0,"ng-template",8),n.\u0275\u0275template(2,GL,8,9,"ng-template",9),n.\u0275\u0275elementEnd())}const HL=function(a){return{"mat-dialog-title-rtl-text":a}};class Ih{get serviceMethod(){return this.serviceSchema.serviceMethods[0]}get requestParametersEmpty(){return 0===this.requestParameters?.length}get hasResponse(){return null!=this.serviceLastResponse}get hasResponseError(){return this.hasResponse&&null!=this.serviceLastResponse.errorInfo}get hasRawData(){return!O.Z(this.requestRawData)||!O.Z(this.responseRawData)}get hasBodyData(){return!O.Z(this.requestBody)||!O.Z(this.responseBody)}get requestBody(){return this.hasResponse?this.serviceLastResponse.RequestBody:""}get responseBody(){return this.hasResponse?this.serviceLastResponse.ResponseBody:""}get requestRawData(){return this.hasResponse?this.serviceLastResponse.RequestRawData:""}get responseRawData(){return this.hasResponse?this.serviceLastResponse.ResponseRawData:""}get bodyCodeEditorLanguage(){return this.serviceMethod.request.contentType===du.json?Of.Y.Json:Of.Y.Xml}get bodyTabCaption(){return this.serviceMethod.request.contentType===du.json?"json":"xml"}constructor(e,t,i,r,s){this.httpClient=e,this.serviceClientData=t,this.callService=i,this.customEventService=r,this._directionality=s,this.isLoading=!1,this.rawDataCodeEditorLanguage=Of.Y.Http,this.serviceSchema=t.schema,this._requestParametersDefaultValuesMap=t.parametersValues||new Map,this.requestParameters=this._createParametersInstances(this.serviceMethod.request.parameters,this._requestParametersDefaultValuesMap),this._createDefaultEmptyCollectionItems(this.requestParameters)}_createParametersInstances(e,t=null){return e&&e.map(i=>{const r=i.name,s=t?.get(r)||"";return new Sh(i,s)})}_createDefaultEmptyCollectionItems(e){e?.forEach(t=>{t.isArray&&this.onCreateCollectionItem(t.uId)})}_getSimpleArrayValues(e){return e.itemProperties?.map(t=>t.value)}_prepareNestedForRequest(e){return e&&e.map(t=>t.itemProperties.map(i=>this._getParameterValue(i)))}_getParameterRealValue(e){return e.dataValueTypeName===H.Object?null:e.isArray?this._getSimpleArrayValues(e):e.value}_getParameterValue(e){const t=this._getParameterRealValue(e);return{code:e.schema.name,value:t,nested:e.dataValueTypeName===H.Object?this._prepareNestedForRequest(e.itemProperties):null}}_getParametersValues(e){return e&&0!==e.length?e.map(t=>this._getParameterValue(t)):null}_createParameter(e,t){const i=new hh;return i.name=e.schema.sequenceElementName,i.caption=t,i.dataValueTypeName=e.schema.dataValueTypeName,i}_createNestedParameters(e){if(e.schema.dataValueTypeName===H.Object)e.itemProperties=e.value?.map((t,i)=>{const r=this._createParameter(e,`Item ${i}`),s=new Sh(r);return s.itemProperties=this._createResponseParameters(e.schema.itemProperties,t),s});else{const t=e.schema.dataValueTypeName;e.schema.dataValueTypeName=H.Object,e.itemProperties=e.value?.map((i,r)=>{const s=this._createParameter(e,`Item ${r}`);return s.dataValueTypeName=t,new Sh(s,i)})}}_findParameterValue(e,t){return t[e.schema.name]}_createResponseParameters(e,t){const i=this._createParametersInstances(e);return i.forEach(r=>{r.value=this._findParameterValue(r,t),r.schema.isArray&&this._createNestedParameters(r)}),i}_parseResponse(e){const t=JSON.parse(e);return this._createResponseParameters(this.serviceMethod.response.parameters,t)}_treeSearch(e,t){let i=null;return!e||(i=e.find(r=>r.uId===t),i)||e.forEach(r=>{i||(i=this._treeSearch(r.itemProperties,t))}),i}_findParameterParent(e,t){const i=this._treeSearch(e,t);return i?this._treeSearch(e,i.parentUId):null}_getMaxCollectionIndex(e){return e&&0!==e.length?Math.max(...e.map(t=>t.caption.split(" ")[1])):-1}_generateInstance(e){e.itemProperties=e.itemProperties||[];const t=new hh;t.name=e.schema.sequenceElementName,t.caption=`Item ${this._getMaxCollectionIndex(e.itemProperties)+1}`,t.dataValueTypeName=e.schema.dataValueTypeName,t.itemProperties=[...e.schema.itemProperties];const i=new Sh(t);return i.parentUId=e.uId,i}_addSimpleItem(e){const t=this._generateInstance(e);e.itemProperties=[...e.itemProperties,t]}_addComplexItem(e){const t=this._generateInstance(e);t.itemProperties=e.schema.itemProperties.map(i=>{const r=this._requestParametersDefaultValuesMap.get(i.name)||"";return new Sh(i,r)}),e.itemProperties=[...e.itemProperties,t],t.itemProperties.forEach(i=>{i.isArray&&this.onCreateCollectionItem(i.uId)})}isRtl(){return"rtl"===this._directionality?.value}onRequestParametersExpandChange(e){this.requestExpanded=e}onParameterValueChange(e){this._treeSearch(this.requestParameters,e.recordId).value=e.value,this.requestParameters=[...this.requestParameters]}onCreateCollectionItem(e){const t=this._treeSearch(this.requestParameters,e);t.dataValueTypeName!==H.Object?this._addSimpleItem(t):this._addComplexItem(t)}onRemoveCollectionItem(e){const t=this._findParameterParent(this.requestParameters,e);t&&(t.itemProperties=t.itemProperties.filter(i=>i.uId!==e))}onSendRequestButtonClick(){this.isLoading=!0;const e=this._getParametersValues(this.requestParameters);this.callService.sendRequest(this.serviceSchema.name,this.serviceMethod?.name,e).subscribe(t=>{this.isLoading=!1,this.serviceLastResponse=t,t.success&&200===t.StatusCode?(this.responseParameters=this._parseResponse(t.ParameterValues),this.tabIndex=1):t.errorInfo?this.tabIndex=2:this.tabIndex=4})}onOpenAuthenticationPageButtonClick(){this.customEventService.createOutboundChannel("OpenAuthenticationPage").next()}}Ih.\u0275fac=function(e){return new(e||Ih)(n.\u0275\u0275directiveInject(D.HttpClient),n.\u0275\u0275directiveInject(E.eJ),n.\u0275\u0275directiveInject(yu),n.\u0275\u0275directiveInject(Ye),n.\u0275\u0275directiveInject(xe.Is))},Ih.\u0275cmp=n.\u0275\u0275defineComponent({type:Ih,selectors:[["ts-service-client-form"]],decls:21,vars:19,consts:[["class","component-mask",4,"ngIf"],[1,"service-client-form"],["mat-dialog-title",""],[3,"ngClass"],["mat-icon-button","","mat-dialog-close","",3,"ngClass"],["alt","close","src","data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaXQ9IiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgZm9jdXNhYmxlPSJmYWxzZSI+DQogIDxyZWN0IGlkPSJSZWN0YW5nbGVfNyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJub25lIj48L3JlY3Q+DQogIDxsaW5lIGlkPSJMaW5lXzUiIGRhdGEtbmFtZT0iTGluZSA1IiB5MT0iMTAiIHgyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSI+PC9saW5lPg0KICA8bGluZSBpZD0iTGluZV82IiBkYXRhLW5hbWU9IkxpbmUgNiIgeDI9IjEwIiB5Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzk5OSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiPjwvbGluZT4NCjwvc3ZnPg=="],[1,"dialog-content"],["mat-align-tabs","start",1,"tab-group",3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["matTabContent",""],[4,"ngIf"],["mat-dialog-actions",""],["data-item-marker","send-request","color","accent","mat-flat-button","",1,"send-request-action",3,"click"],[1,"component-mask"],["data-item-marker","request-parameters-tab",1,"request-parameters-tab"],[1,"tab-content"],[1,"tree-header"],[1,"service-method-caption"],["data-item-marker","OpenAuthenticationSettingsButton",1,"open-authentication-settings-button",3,"click"],[1,"open-authentication-settings-label"],["class","panel parameter-selector","data-item-marker","request-parameters-tree",3,"parameters","initialExpanded","caption","readonly","canSelect","showValues","canManageCollectionItems","initialExpandMode","valueChange","expandedChanged","createCollectionItem","removeCollectionItem",4,"ngIf"],["class","blank-slate-wrapper",4,"ngIf"],["data-item-marker","request-parameters-tree",1,"panel","parameter-selector",3,"parameters","initialExpanded","caption","readonly","canSelect","showValues","canManageCollectionItems","initialExpandMode","valueChange","expandedChanged","createCollectionItem","removeCollectionItem"],[1,"blank-slate-wrapper"],[1,"blank-slate-inner-ct"],[1,"blank-slate-image"],[1,"blank-slate-title"],["data-item-marker","response-parameters-tab",1,"response-parameters-tab"],["data-item-marker","response-parameters-tree",1,"panel","parameter-selector",3,"parameters","caption","readonly","canSelect","showValues"],["data-item-marker","response-error-tab",1,"response-parameters-tab"],[1,"errorWrapper"],[1,"show-error",3,"errorInfo"],["data-item-marker","raw-body-tab",1,"response-parameters-tab"],[1,"tab-content","body-content"],[3,"language","request","response"],[1,"left-caption","service-method-caption"],[1,"right-caption","service-method-caption"],["data-item-marker","raw-http-tab",1,"response-parameters-tab"]],template:function(e,t){1&e&&(n.\u0275\u0275template(0,xL,1,0,"ts-mask",0),n.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"span",3),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"button",4),n.\u0275\u0275element(7,"img",5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"mat-dialog-content",6)(9,"mat-tab-group",7),n.\u0275\u0275listener("selectedIndexChange",function(r){return t.tabIndex=r}),n.\u0275\u0275elementStart(10,"mat-tab"),n.\u0275\u0275template(11,EL,3,3,"ng-template",8),n.\u0275\u0275template(12,AL,12,12,"ng-template",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,NL,3,0,"mat-tab",10),n.\u0275\u0275template(14,LL,3,0,"mat-tab",10),n.\u0275\u0275template(15,BL,3,0,"mat-tab",10),n.\u0275\u0275template(16,zL,3,0,"mat-tab",10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"div",11)(18,"button",12),n.\u0275\u0275listener("click",function(){return t.onSendRequestButtonClick()}),n.\u0275\u0275text(19),n.\u0275\u0275pipe(20,"translate"),n.\u0275\u0275elementEnd()()()),2&e&&(n.\u0275\u0275property("ngIf",t.isLoading),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(15,HL,t.isRtl())),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate2("",n.\u0275\u0275pipeBind1(5,11,"ServiceClientHeaderCaption")," ",t.serviceSchema.caption,""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(17,CM,t.isRtl()?"close-rtl-dialog":"close-dialog")),n.\u0275\u0275advance(3),n.\u0275\u0275property("selectedIndex",t.tabIndex),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",!!t.responseParameters),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasResponseError),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasBodyData),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasRawData),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(20,13,"SendRequestButtonCaption")))},dependencies:[y.NgClass,y.NgIf,U.eB,E.aO,E.YS,E.Rb,E.ev,An,He.SK,He.gz,He.R7,He.Ql,bh,vh,_u,w.X$],styles:[".service-client-form[_ngcontent-%COMP%]{margin-top:-8px;width:920px;display:flex;flex-direction:column;height:60vh}.service-client-form[_ngcontent-%COMP%]   ts-double-side-panel[_ngcontent-%COMP%]{height:100%}.service-client-form[_ngcontent-%COMP%]   .errorWrapper[_ngcontent-%COMP%]{margin-top:1.3em;flex-basis:100%;overflow-y:auto}.service-client-form[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{flex-basis:100%;display:flex;flex-direction:column;max-height:none}.service-client-form[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .tab-group[_ngcontent-%COMP%]{flex-basis:100%;height:100%}.service-client-form[_ngcontent-%COMP%]   [mat-dialog-actions][_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:row;justify-content:flex-end;margin-bottom:0;margin-top:28px}.service-client-form[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:10px}.service-client-form[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.service-client-form[_ngcontent-%COMP%]   .service-method-caption[_ngcontent-%COMP%]{flex-grow:0;display:inline-block;margin-top:16px;height:17px;text-align:left;opacity:1}.service-client-form[_ngcontent-%COMP%]   .parameter-selector[_ngcontent-%COMP%], .service-client-form[_ngcontent-%COMP%]   .show-error[_ngcontent-%COMP%]{flex-basis:100%;overflow-y:auto}.service-client-form[_ngcontent-%COMP%]   .tree-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-button[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;height:25px;border:0;border-radius:4px;display:flex;align-items:center}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon[_ngcontent-%COMP%], .service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon-rtl[_ngcontent-%COMP%]{width:16px;height:16px;background-position:center;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiNGRkZGRkYiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjQiIHdpZHRoPSIyNCIvPjxwYXRoIGQ9Ik05LDV2Mmg2LjU5TDQsMTguNTlMNS40MSwyMEwxNyw4LjQxVjE1aDJWNUg5eiIvPjwvc3ZnPg==);border-radius:3px;background-size:15px}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon[_ngcontent-%COMP%]{margin-right:10px}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon-rtl[_ngcontent-%COMP%]{margin-left:10px}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-label[_ngcontent-%COMP%]{letter-spacing:0px;margin-bottom:3px}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;overflow-y:scroll}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]   .blank-slate-inner-ct[_ngcontent-%COMP%]{color:#999;flex-basis:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]   .blank-slate-inner-ct[_ngcontent-%COMP%]   .blank-slate-image[_ngcontent-%COMP%]{margin-bottom:40px;width:120px;height:125px;background-position:center;background-repeat:no-repeat;background-size:contain;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAACLCAYAAABLJYpxAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAABATSURBVHhe7Z0LlJVVFcd5idFCs7QULEq0zDTThYAp2gPTUPFtUChpptHK1FKKspdY0tsMUrOXkS50Gfl+rLQ00VILzDCyVDQzUsuEfPTW/j9m7+bOvXtm7szce+f7zj17rd+C+b7vnO+cs/c933nuMyR1Oea6B0aIHcSh4hSxSFwhfip+K/4inhbPVfEfsVb8QawQ14vFYr54l3ijeJG9JkvRRcoaKrYTx4rviF+Kf4lqxTeSP4prxSfFW8RoS06WwRYp4yVitlgiqAUiBf5N3CG+L84U1CCEmS6miAni1ca29u9rxWSxt5gp5ghqDYzuBvGgeFZUv+u/4mfiE2KSGGZJzdIKUYFjEO8Ty0S1gp4Rt4qvCAxgohjbJLYR+4kPCwzv96IyLbBGLBR7iGwozRAVLG2HA8WVgl9npQJWirPEQWKciBTZKnYR1ExXC2qsynSuFh8XYy1bWQYiKshNxamCX2BlQd8pThPNrBkGyivEOwW1SqWhYNyXiimWzSx9ERUcNQA9i8qexF/F18UbRKSMIrO1OEnQ9vH8wG2CGm+oZT1Ld6JCGiNoL/xTeAH+Rpwo+CVGBV823iwuFv8WnkdqwmlWDFkqRQUzSnxK0KD0AvuFeLvYUkSFXHZ2EtSOlXm+WexkxZJFhTFDPGSFA/yKZomoQFMEI/mG8NqSHhh/b2ZF1H6izNOuuEq4UTwi3i9SrSl6Y1dxjfDy+LOYZcXVPqJMv0c8aYXAt5exAMYNokJrNw4T9wk3ErrFY6zo0hVlcjNxuWUaGOKeKqJCamdofNMw90Yrtch0K8b0RJljlPBPllky/VnxMhEVTqYD5mt+J/zH9FWxgRVpGqIM0RX1XwHzEvuKqDAytYwX5ws3EKYHyv+ZUSZGCqa6PWPMYDK5FRVCpmdop/mgIDXwBCvm8okSv4m40TLDkDGfkXbtiTSKN4n7BWXK+MgBVtzlESX6pWKVZeLvggUyUWYzfYc1KywL8B/dHCv24osSyzyCd8UeE7l90XheLpYKyhhOseIvriiRjFU8bAnmu7ibiDKXGTh8oll85AYyz9RQPFHi+JS4YdAjYW1DlKlMY2F+xg1krqmjOKJEMZvqnxIMg6V3UUYyzaHSQIrTBlFiRgtWaJMwPiWvF1EGMs3lWwId0Eg9yNQzeKJEDBeM/ZOodWJPESU803xog1wi0AXd3ImmpsERJYDxfxLDFoBDRJToTOugF8OeHHTCLPeWpqrWil7MmgsSAUy1R4nNtB62Vnj7j2WII01lrRG9kH0dPpR7nogSmRk8WGf7lEA/Z5vami96GUv6fPSTKmywtwNkYt4t0BEcbOprruhFZ9sLWQ2+s4gSlikG3xTo6nHR3PaHXvBWexkcLaIEZYrDVoLV++jrh6I5WyAUMeMZvuXvAhElJlM82ArhG8qPMnU2VhQxWw55AQNdeU1GufiiQHd8XjY3lTZGFCHL533T8lEiSkCmuDD+cY9Af4tNrY0RRchmGyJm6Xz08kzxYdslOoTJptqBiSI63CJk002eNyk3lwl0yeDYwBqnigDXBz7axt6S6IWZ8sAyClbmoc+BTc4pAtoXRMSkGsOy0Qsz5cKn9+8W/XMoo4AbCNZmENEZInpRpnzgQM+nPmaauvsmCniERcBI6CtF9KJMOfHZ9DtN3X0TBWSrIhHQR45ekCkvTJz+Q6DfvUzl9YkCsH+VgERANRS9ICXwHPghwXZDPA6yQ+91Ino2Fb4n0PG1pvb6RAHwY0VAIogiTgV8ivlKtmpwVHuhYJ9IFLbs4GaTfDK4Od5U37PoQVw5+lj8PiKKOAWYRHTfpRjCLeIcgeOU5cKN5AGBT9EojrJDnsnj6ab+nkUPzrUAvxJRhCnAp/JR4fmM1r4eIHBvzTOsX2EIuvqZsoM/V/KHt8bhZgLdix7yX808EUWYAr5SG//nr7JrEQwa4RuDZ/FKHD1TZvADgo938jfVTCAWPcBAFw9Sze4oogjLDjWA+wV9m13rCa9JmbiK7pcdXIOTv3PNDGLRA3jY5UF2x0cRpQB7d8kjn5V6dv2zPMG9Jm9v11LCF4rT/hphplArunm7PYiL5iiiFMCrMHn8ecW13mBDOGFwgRDdLzN4V3pCkL89zRS6im7gr8vXbKS8NpSzV8gj7pSi+9WwB9gHjFLd5umztWeYOXQV3fDhctYcRhGkAqOD/iOoR9luTPy6UvVhdoIgjyvMHLqKbtC/5wFWl0cRpATHcZBXtg9G9x2MwR2lpLxuls4HeeRH80IziU7RRV9Gxjc5iiAlOIjHG5nMHUUNU3o13pJnDUSRT2hoBO5Oal8ziQ7RBdob3IDXiChwanxaeJ5xqc2pBrh2nCY+KnyRE0Z0nIjiSImLBPldYGbRIbpAgXCj3kZaKtAriw4AdBgAO1JEYVPjZEGef2Rm0SG6wFFU3OCQmChgyvC9xdMh3XgO9GOBE20SRkTbaR2Lb1h7zMyiQ3SBxhY3FogoYCZ92B3HyDh20OkEV3/cZRfbpQrNxNwrsIPOBUD6w+camOOPAmXaA/bTYgfHuWFwyB4X6OOmOC3dHZwCxZR8PXACdRRHaviu/I6RUv2HaWkusAc2CpAqeFUm3/VAFzeKIzU4WZv8LnHj8FlK+vpRgFRx46C9hfIjfEEQ/4/iSA2c75Pfju6s/kMjdP0FEQVIFTcOvBNF94FPSjsZB+tbyO9KNw4f/GBRcRQgVbJx1IIvD/K7xo2DIzu5wMRbFCBVsnHUwhYN8rvWjeMzdqHdvAJm46iF5Qzk91k3Dt8a9yURBUiVbBy1+Bri57JxZOOoJhuHkY2jlhrj+Jxd+JqIAqRKNo5aWMvTxThybyW+D+1mHN5bWefGwe5yLrAkLgqQKtk4amEOifw+6sZxjF1gRi4KkCrZOGo5WJDfVW4cbBjmwh0iCpAq2ThqOVaQ32VuHLiP5AKuq6MAqZKNo5aPCPJ7iRsHF7nAWfPs7qoOkCrZOGrxEzG+7MYxVOCAlovtdKpjNo5arhLk9/j1xoHoD/xUcBFvxVGgFMnGUctKQX73N9NYbxw/sIu4YIgCpUg2jq6w9dO/IFuZaaw3Dh8IS91BXCXZOLrCuXDk9UnR6Rddf/hO8nZaKpiNoyvvFevLw8yiQ3SBKoUb9FjGiyhwamTj6Ir7SVtoZtEpuugFwbkcUeDUyMbRFbwqktcZZhKdoosX2032jUaBUyMbRyfsCfatkLWnSOriHLuJs5IogtTIxtGJH52y2syhq+gGPil5gHbHNiKKJCWycXSyWJDPRWYOtaKbPhjGBEwUSUpk4+jE89k5+FUtuslSQR5aKqJIUiIbRwfulwPXVs83U6gV3dzVHmTXPZ+ZKLJUcOPgsKHrusHPQ0vZODgMgDwuNTOIRQ8wCfeQPcxB+VFkqeDGUQ+pGgeO8vBmRB4PNTPoXvQQ57nx8A0iijAV8A6Ik7h6SNWJnu+NZch8lJlA96KH6KkQgH4vJ1FHkWbS4EqBrs8z9fcuevgmC5TPd0sXtj4ybIGeJ5jqexc9PMMC4Wqxnbz9tBP88NHxclN7faIAnETNmlIC4xc7ijxTXphcfVyg3yNM7fWLAuHAlcA4rm2ntaXtAKdwoVvGcTYwldcvCjRa+AF5zPVHL8mUD8avvPt6kqm776LAbmHUHuNE9LJMuXCncDgI7L372p0ocGXtwbbJ6GWZ8sBhh37q1Amm5v4LkVhkRJrPtC83iwS65Kzckabi/osioefis7Xt5qYhJdjZ6IdJH27qHbgosv0sUgZN8DgXvTxTbH4s0OFNptbGiSL1vS2cqpi7tuXCmwb8uHcwlTZO7CXuQJ99LtUJyBQThslZloDe5ps6Gy+KnOOseAk7o9rFWXyZYUr+eoHOOPVzQ1Nl40WRs97DN9uyr5IDXKJEZYqBu1Tgc7KLqbF5opdsIfzw/3baPlk2WKDkhyXPM/U1X/SyvYUfvZkn5ooHi5N8RR8HHgwz1bVG9ELffM06S47liBKZaT1sbfX1OBjIi01lrRO9dJjw9gfnkqR+KG9Z+K5AJ3QaJpq6Wi96+UbC91jSGt5WRAnOtIbTBbqAWaamwRMlgpVizPCRIAbIthZRwjPN5UThhnGqqWfwRYlhoGWdJYxh2ry0sLWwz9k7COeYWoojStRu4hlL4JkiykSm8bB11SfULhTDTSXFESWK2Vs/MG+WiDKSaSwMI3iNcZkonmEgSpi7RsZA6E5Fmck0Ds7ap7y9xhhhqiieKHE+hn+WiDKTaQz88NxFE3D8WjFrDESJowtLQjnVmkUlUaYyA4dy9h8hnCY6Pf8VUZRAP+a63U5eaCUsslotKGcaoLOt+IsrSiQJ99YyLiurM5UZOIxhPC0oY8aUdrfiL7YooV+wRK8QUcYy/Wc74ZudYZnYwoq+2KKEbi6esoTn7mtjwYnbI4KypbvK0HhxeyTVosT6yZK51mgcuL2orC3YRlCOz4iLEswcirc13iGijGbqh22KnA7uNTG1BT++0Vbk5REl2lej3yiizGbqg5X87EV2rwZATTzJirpcooSzBI1M4P0Hb/tRpjM9g1EwYcY+ZDcKRpeZK2ntyq1GiRL+PHGfIDOM1EUZz3QPvjFY+OtjFrBWsLJuYyvmcooy4CdYs3eWrlZUAM2C47TLutufrRwc7PyEqDQKfM1vYsVbXlEmmJb3WcBWeznmU7ZGYJTfFhx5yr6M6NmisLP4mFgu3CCA9sUHxEZWtOUWZWRj4Z+Ty0VUGM2AmoI5BF9mXwlOSPDbPVsUZQXaVEGv43bBXJOnlfbZFWK6KO5EWV9FmWEzEy6vySS/3lZ9TlD6/cIL+GpB4Z4vfOWZw8YdDk5mVvhI0Qo3max4myY4Gw/F+3qWSm4TJ4sxVpxpiTLm592jgANFVFCNhAOBONrDC5iRwqPF/2cg9f8NBX67F4rKxl0lhGOZPt96GoEYzV6CZY31bgbH4QkzzYcI5jjwD3+puEdQHtXvZA6EVfnHi3GW3DRFGTxMePXIApOoABvFTHGL8IJmT8wC0eu3Wc8wiMSQMz0oVsT74TI9wcbwhwWO01D2rwV7Pfibtk2k/GrwfESNhvHRrW/eftQiiTK6u3Dn8BeISKEDhbbCXLFKeIEz8nquGGtJ6bMo7CgxSWAwGBifRdoBzGpWtgXqgU8YxoOzfE5txtMitVa/01dqUcZZP+DTxIyCNnLpH3Hhd/si4cPFwP9ZnNz06ljveIFgIzhtE5gi6G7Sw+Bv2lXsC+67K8aURQWyj/CV5LeKRvQE+M4zTMxZcu4vwuFX+UFR/v5+yiIF0ejysYyfiP4YBr88agbcGi4R94pKYwC+6Xw69rBXZymqSEmbCtoVrjyW/O0oJhsc1MNAFKvMafVTC9BW+LzAFQPP3yUY9as0AofvPIcaMyJI9Z1OXz9lkaLopvnCkkaAIbAOgb0UzBkwFpA/GWUSKQw/GzeLSMFAV46aAHCk/qC4W9AOuUbwyeDTMF8ww7i/2F60R3cuWRky5H+qu+L1QQx6mwAAAABJRU5ErkJggg==)}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]   .blank-slate-inner-ct[_ngcontent-%COMP%]   .blank-slate-title[_ngcontent-%COMP%]{max-width:240px;margin-bottom:30px}"]});class Da{constructor(e,t){this.dialogService=e,this.sysSettingsService=t,this._destroyed$=new u.Subject}getFlatParameters(e){const t=[...e];return e.forEach(i=>{i.itemProperties&&t.push(...this.getFlatParameters(i.itemProperties))}),t}getParametersConstValuesEntries(e){const t=e.filter(i=>i.defValue.source===lh.Const).map(i=>[i.name,i.defValue.value]);return(0,u.of)(t)}getSysSettingsValuesEntries(e){const t=e.filter(r=>r.defValue.source===lh.SysSetting),i=t.map(r=>r.defValue.value);return 0===i.length?(0,u.of)([]):this.sysSettingsService.getByCodes(i).pipe((0,h.U)(r=>r.values),(0,h.U)(r=>t.map(s=>[s.name,r[s.defValue.value].value])))}getParametersValues(e){const t=this.getFlatParameters(e);return(0,u.combineLatest)([this.getSysSettingsValuesEntries(t),this.getParametersConstValuesEntries(t)]).pipe((0,h.U)(([i,r])=>[...i,...r]),(0,h.U)(i=>new Map(i)))}show(e){this.getParametersValues(e.serviceMethods[0].request.parameters).subscribe(t=>{this.dialogService.open(Ih,{data:{schema:e,parametersValues:t},disableClose:!0,panelClass:"dialog-top-border"})})}ngOnDestroy(){this._destroyed$.next()}}Da.\u0275fac=function(e){return new(e||Da)(n.\u0275\u0275inject(Ce),n.\u0275\u0275inject(De))},Da.\u0275prov=n.\u0275\u0275defineInjectable({token:Da,factory:Da.\u0275fac});class Ma{_getCaptionFromDto(e){if("string"==typeof e)return e;return`${e[Object.keys(e)[0]]}`}_convertFromObjectCollectionDto(e,t){return e?Object.keys(e.items).map(r=>{const s=e.items[r];return t(s)}):[]}_parameterValueFromDtoConverter(e){const t=new FF;return e&&(t.source=e.source,t.value=e.value),t}_parameterFromDtoConverter(e){const t=new hh;return t.uId=e.uId,t.name=e.name,t.caption=this._getCaptionFromDto(e.caption),t.path=e.path,t.type=e.type,t.isArray=e.isArray,t.isRequired=e.isRequired,t.sequenceElementName=e.sequenceElementName,t.dataValueTypeName=e.dataValueTypeName,t.defValue=this._parameterValueFromDtoConverter(e.defValue),t.itemProperties=this._convertFromObjectCollectionDto(e.itemProperties,i=>this._parameterFromDtoConverter(i)),t}_convertRequestSchemaFromDto(e){if(!e)return null;const t=new gM;return t.uri=e.uri,t.uId=e.uId,t.name=e.name,t.methodType=e.httpMethodType,t.contentType=e.contentType,t.parameters=this._convertFromObjectCollectionDto(e.parameters,i=>this._parameterFromDtoConverter(i)),t}_convertResponseSchemaFromDto(e){if(!e)return null;const t=new fM;return t.uId=e.uId,t.name=e.name,t.contentType=e.contentType,t.parameters=this._convertFromObjectCollectionDto(e.parameters,i=>this._parameterFromDtoConverter(i)),t}_methodFromDtoConverter(e){const t=new _M;return t.uId=e.uId,t.name=e.name,t.caption=this._getCaptionFromDto(e.caption),t.timeout=e.requestTimeout,t.soapAction=e.soapAction,t.request=this._convertRequestSchemaFromDto(e.request),t.response=this._convertResponseSchemaFromDto(e.response),t}_convertToObjectCollectionDto(e,t){const i={};return e?.forEach(r=>{const s=t(r),o=s.uId;i[o]=s}),{items:i}}_parameterToDtoConverter(e){const t={};return t.uId=e.uId,t.name=e.name,t.caption=e.caption,t.path=e.path,t.type=e.type,t.isArray=e.isArray,t.isRequired=e.isRequired,t.sequenceElementName=e.sequenceElementName,t.dataValueTypeName=e.dataValueTypeName,t.itemProperties=this._convertToObjectCollectionDto(e.itemProperties,i=>this._parameterToDtoConverter(i)),t}_convertRequestSchemaToDto(e){if(!e)return null;const t={};return t.uri=e.uri,t.httpMethodType=e.methodType,t.contentType=e.contentType,t.parameters=this._convertToObjectCollectionDto(e.parameters,i=>this._parameterToDtoConverter(i)),t}_convertResponseSchemaToDto(e){if(!e)return null;const t={};return t.contentType=e.contentType,t.parameters=this._convertToObjectCollectionDto(e.parameters,i=>this._parameterToDtoConverter(i)),t}_methodToDtoConverter(e){const t={};return t.uId=e.uId,t.name=e.name,t.caption=e.caption,t.requestTimeout=e.timeout,t.soapAction=e.soapAction,t.request=this._convertRequestSchemaToDto(e.request),t.response=this._convertResponseSchemaToDto(e.response),t}convertToDto(e){const t={};return t.uId=e.uId,t.name=e.name,t.baseUri=e.baseUri,t.caption=e.caption,t.type=e.type,t.retryCount=e.retryCount,t.namespaces=e.namespaces.map(i=>i),t.methods=this._convertToObjectCollectionDto(e.serviceMethods,i=>this._methodToDtoConverter(i)),t}convertFromDto(e){const t=new mM;return t.uId=e.uId,t.name=e.name,t.baseUri=e.baseUri,t.caption=this._getCaptionFromDto(e.caption),t.type=e.type,t.retryCount=e.retryCount,t.namespaces=this._convertFromObjectCollectionDto(e.namespaces,i=>{const r={};return r.name=i.name,r.prefix=i.prefix,r}),t.serviceMethods=this._convertFromObjectCollectionDto(e.methods,i=>this._methodFromDtoConverter(i)),t}}Ma.\u0275fac=function(e){return new(e||Ma)},Ma.\u0275prov=n.\u0275\u0275defineInjectable({token:Ma,factory:Ma.\u0275fac});class Cu{}Cu.\u0275fac=function(e){return new(e||Cu)},Cu.\u0275mod=n.\u0275\u0275defineNgModule({type:Cu}),Cu.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ia,Da,Jt,Ma,ba,Sn],imports:[N.wp,b.u5,ci,y.CommonModule,Vt,U.yu,A.Ps,z.x4,E.yj,Dp.T5,et.uw,sn,ke.dp,Se.Zh,ya,cu,wi,w.aw.forRoot(),He.Nn]});class Dh{constructor(e,t,i,r){this._customEventService=e,this._webServiceWizardService=t,this._webServiceClientService=i,this._webServiceDtoConverterService=r,this._destroyed$=new u.Subject}_onServicesSetup(e){this._customEventService.createOutboundChannel("WebServicesCreated").next(e)}_subscribeCustomEventService(e){return this._customEventService.subscribe(e).pipe((0,L.R)(this._destroyed$))}_convertToDto(e){return{services:e.services.map(t=>this._webServiceDtoConverterService.convertToDto(t)),resultCode:e.resultCode}}_getServiceSchema(e){const t=this._webServiceDtoConverterService.convertFromDto(e.serviceSchemaDto);return t.serviceMethods=t.serviceMethods.filter(i=>i.uId===e.methodUId),t}_openServiceWizard(){this._webServiceWizardService.showWizard().pipe((0,h.U)(e=>this._convertToDto(e))).subscribe(e=>{this._onServicesSetup(e)})}_openServiceClient(e){this._webServiceClientService.show(e)}ngOnInit(){this._subscribeCustomEventService("OpenWebServiceWizard").subscribe(()=>this._openServiceWizard()),this._subscribeCustomEventService("OpenServiceClient").pipe((0,h.U)(e=>this._getServiceSchema(e))).subscribe(e=>this._openServiceClient(e))}ngOnDestroy(){this._destroyed$.next()}}Dh.\u0275fac=function(e){return new(e||Dh)(n.\u0275\u0275directiveInject(Ye),n.\u0275\u0275directiveInject(Ia),n.\u0275\u0275directiveInject(Da),n.\u0275\u0275directiveInject(Ma))},Dh.\u0275cmp=n.\u0275\u0275defineComponent({type:Dh,selectors:[["ts-web-service-proxy"]],decls:2,vars:0,template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"p"),n.\u0275\u0275text(1,"web-service-proxy works!"),n.\u0275\u0275elementEnd())}});class Su{constructor(e,t){this._customElementsBootstrapService=e,this.translate=t,this._customElements=[{componentName:"ts-web-service-proxy",componentType:Dh}],t.use("en-US")}ngDoBootstrap(){this._customElements.forEach(({componentName:e,componentType:t})=>{this._customElementsBootstrapService.defineComponent(e,t)})}}Su.\u0275fac=function(e){return new(e||Su)(n.\u0275\u0275inject(po),n.\u0275\u0275inject(w.sK))},Su.\u0275mod=n.\u0275\u0275defineNgModule({type:Su}),Su.\u0275inj=n.\u0275\u0275defineInjector({providers:[Ia,Da,Ma,Ye,{provide:XS,useValue:"GetWebServiceTranslation"},{provide:D.HTTP_INTERCEPTORS,useClass:nr,multi:!0},u_,y2,f2],imports:[k.BrowserModule,F.PW,Cu,x.y,D.HttpClientModule,fo,w.aw.forRoot({loader:{provide:w.Zw,useClass:_o}}),D.HttpClientXsrfModule.withOptions({cookieName:"BPMCSRF",headerName:"BPMCSRF"})]}),k.platformBrowser().bootstrapModule(Su).catch(a=>console.error(a))},24463:(S,Ge,f)=>{"use strict";var k,D;f.d(Ge,{Y:()=>k}),(D=k||(k={})).Csharp="text/x-csharp",D.Javascript="text/javascript",D.Json="application/ld+json",D.Css="text/css",D.Less="text/x-less",D.Sql="text/x-sql",D.SqlServer="text/x-mssql",D.PgSql="text/x-pgsql",D.Xml="application/xml",D.Http="message/http",D.Markdown="text/x-markdown"},46700:(S,Ge,f)=>{var k={"./af":26431,"./af.js":26431,"./ar":81286,"./ar-dz":1616,"./ar-dz.js":1616,"./ar-kw":9759,"./ar-kw.js":9759,"./ar-ly":43160,"./ar-ly.js":43160,"./ar-ma":62551,"./ar-ma.js":62551,"./ar-ps":51500,"./ar-ps.js":51500,"./ar-sa":79989,"./ar-sa.js":79989,"./ar-tn":6962,"./ar-tn.js":6962,"./ar.js":81286,"./az":15887,"./az.js":15887,"./be":14572,"./be.js":14572,"./bg":3276,"./bg.js":3276,"./bm":93344,"./bm.js":93344,"./bn":58985,"./bn-bd":83990,"./bn-bd.js":83990,"./bn.js":58985,"./bo":94391,"./bo.js":94391,"./br":46728,"./br.js":46728,"./bs":5536,"./bs.js":5536,"./ca":41043,"./ca.js":41043,"./cs":70420,"./cs.js":70420,"./cv":33513,"./cv.js":33513,"./cy":6771,"./cy.js":6771,"./da":47978,"./da.js":47978,"./de":46061,"./de-at":25204,"./de-at.js":25204,"./de-ch":2653,"./de-ch.js":2653,"./de.js":46061,"./dv":85,"./dv.js":85,"./el":8579,"./el.js":8579,"./en-au":25724,"./en-au.js":25724,"./en-ca":10525,"./en-ca.js":10525,"./en-gb":52847,"./en-gb.js":52847,"./en-ie":67216,"./en-ie.js":67216,"./en-il":39305,"./en-il.js":39305,"./en-in":73364,"./en-in.js":73364,"./en-nz":79130,"./en-nz.js":79130,"./en-sg":11161,"./en-sg.js":11161,"./eo":50802,"./eo.js":50802,"./es":40328,"./es-do":45551,"./es-do.js":45551,"./es-mx":75615,"./es-mx.js":75615,"./es-us":64790,"./es-us.js":64790,"./es.js":40328,"./et":96389,"./et.js":96389,"./eu":52961,"./eu.js":52961,"./fa":26151,"./fa.js":26151,"./fi":7997,"./fi.js":7997,"./fil":58898,"./fil.js":58898,"./fo":37779,"./fo.js":37779,"./fr":28174,"./fr-ca":3287,"./fr-ca.js":3287,"./fr-ch":38867,"./fr-ch.js":38867,"./fr.js":28174,"./fy":50452,"./fy.js":50452,"./ga":45014,"./ga.js":45014,"./gd":74127,"./gd.js":74127,"./gl":72124,"./gl.js":72124,"./gom-deva":6444,"./gom-deva.js":6444,"./gom-latn":37953,"./gom-latn.js":37953,"./gu":76604,"./gu.js":76604,"./he":1222,"./he.js":1222,"./hi":74235,"./hi.js":74235,"./hr":622,"./hr.js":622,"./hu":37735,"./hu.js":37735,"./hy-am":90402,"./hy-am.js":90402,"./id":59187,"./id.js":59187,"./is":30536,"./is.js":30536,"./it":35007,"./it-ch":94667,"./it-ch.js":94667,"./it.js":35007,"./ja":62093,"./ja.js":62093,"./jv":80059,"./jv.js":80059,"./ka":66870,"./ka.js":66870,"./kk":80880,"./kk.js":80880,"./km":1083,"./km.js":1083,"./kn":68785,"./kn.js":68785,"./ko":21721,"./ko.js":21721,"./ku":37851,"./ku-kmr":31385,"./ku-kmr.js":31385,"./ku.js":37851,"./ky":1727,"./ky.js":1727,"./lb":40346,"./lb.js":40346,"./lo":93002,"./lo.js":93002,"./lt":64035,"./lt.js":64035,"./lv":56927,"./lv.js":56927,"./me":5634,"./me.js":5634,"./mi":94173,"./mi.js":94173,"./mk":86320,"./mk.js":86320,"./ml":11705,"./ml.js":11705,"./mn":31062,"./mn.js":31062,"./mr":92805,"./mr.js":92805,"./ms":11341,"./ms-my":59900,"./ms-my.js":59900,"./ms.js":11341,"./mt":37734,"./mt.js":37734,"./my":19034,"./my.js":19034,"./nb":9324,"./nb.js":9324,"./ne":46495,"./ne.js":46495,"./nl":70673,"./nl-be":76272,"./nl-be.js":76272,"./nl.js":70673,"./nn":72486,"./nn.js":72486,"./oc-lnc":46219,"./oc-lnc.js":46219,"./pa-in":2829,"./pa-in.js":2829,"./pl":78444,"./pl.js":78444,"./pt":53170,"./pt-br":66117,"./pt-br.js":66117,"./pt.js":53170,"./ro":96587,"./ro.js":96587,"./ru":39264,"./ru.js":39264,"./sd":42135,"./sd.js":42135,"./se":95366,"./se.js":95366,"./si":93379,"./si.js":93379,"./sk":46143,"./sk.js":46143,"./sl":196,"./sl.js":196,"./sq":21082,"./sq.js":21082,"./sr":91621,"./sr-cyrl":98963,"./sr-cyrl.js":98963,"./sr.js":91621,"./ss":41404,"./ss.js":41404,"./sv":55685,"./sv.js":55685,"./sw":46490,"./sw.js":46490,"./ta":54106,"./ta.js":54106,"./te":39204,"./te.js":39204,"./tet":83692,"./tet.js":83692,"./tg":86361,"./tg.js":86361,"./th":31735,"./th.js":31735,"./tk":1568,"./tk.js":1568,"./tl-ph":96129,"./tl-ph.js":96129,"./tlh":13759,"./tlh.js":13759,"./tr":81644,"./tr.js":81644,"./tzl":90875,"./tzl.js":90875,"./tzm":16878,"./tzm-latn":11041,"./tzm-latn.js":11041,"./tzm.js":16878,"./ug-cn":74357,"./ug-cn.js":74357,"./uk":74810,"./uk.js":74810,"./ur":86794,"./ur.js":86794,"./uz":28966,"./uz-latn":77959,"./uz-latn.js":77959,"./uz.js":28966,"./vi":35386,"./vi.js":35386,"./x-pseudo":23156,"./x-pseudo.js":23156,"./yo":68028,"./yo.js":68028,"./zh-cn":9330,"./zh-cn.js":9330,"./zh-hk":89380,"./zh-hk.js":89380,"./zh-mo":60874,"./zh-mo.js":60874,"./zh-tw":96508,"./zh-tw.js":96508};function D(x){var F=n(x);return f(F)}function n(x){if(!f.o(k,x)){var F=new Error("Cannot find module '"+x+"'");throw F.code="MODULE_NOT_FOUND",F}return k[x]}D.keys=function(){return Object.keys(k)},D.resolve=n,S.exports=D,D.id=46700},35828:S=>{S.exports='<svg width="56" height="51" viewBox="0 0 56 51" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M52.401 48.6233C52.008 49.0263 51.36 49.0256 50.9678 48.6218L40.2231 37.5595C39.8456 37.1709 39.8463 36.5523 40.2245 36.1645L41.7488 34.6018C42.1418 34.1989 42.7898 34.1995 43.182 34.6033L53.9267 45.6656C54.3042 46.0543 54.3036 46.6728 53.9253 47.0606L52.401 48.6233Z" stroke="currentColor" stroke-width="2"/>\n\t<circle cx="25.386" cy="21.386" r="20.386" stroke="currentColor" stroke-width="2"/>\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M45.0652 13H46V12V7V6H45H40.2397C40.5739 6.32273 40.8976 6.65625 41.2103 7H45V12H44.6076C44.7684 12.3287 44.921 12.6621 45.0652 13ZM5.28475 14.0682C5.02991 14.0234 4.76769 14 4.5 14C2.01472 14 0 16.0147 0 18.5C0 20.8363 1.78038 22.7567 4.05841 22.9786C4.0337 22.643 4.01674 22.3053 4.0077 21.9656C2.3078 21.7264 1 20.2659 1 18.5C1 16.567 2.567 15 4.5 15C4.65605 15 4.80971 15.0102 4.96036 15.03C5.06106 14.706 5.16926 14.3854 5.28475 14.0682Z" fill="currentColor"/>\n\t<mask id="path-4-inside-1_15152_1853" fill="white">\n\t\t<path fill-rule="evenodd" clip-rule="evenodd" d="M46.088 16H37H36V15V4V3H36.3156C36.8393 3.31201 37.3486 3.64575 37.8422 4H37V15H45.8022C45.9053 15.33 46.0006 15.6634 46.088 16ZM5.03754 27.985C10.0342 27.7063 14 23.5663 14 18.5C14 14.3366 11.3218 10.7988 7.59429 9.51532C7.40334 9.80095 7.21908 10.0914 7.04175 10.3865C10.4945 11.4671 13 14.691 13 18.5C13 23.113 9.32534 26.8677 4.74355 26.9966C4.83378 27.3294 4.93185 27.6589 5.03754 27.985Z"/>\n\t</mask>\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M46.088 16H37H36V15V4V3H36.3156C36.8393 3.31201 37.3486 3.64575 37.8422 4H37V15H45.8022C45.9053 15.33 46.0006 15.6634 46.088 16ZM5.03754 27.985C10.0342 27.7063 14 23.5663 14 18.5C14 14.3366 11.3218 10.7988 7.59429 9.51532C7.40334 9.80095 7.21908 10.0914 7.04175 10.3865C10.4945 11.4671 13 14.691 13 18.5C13 23.113 9.32534 26.8677 4.74355 26.9966C4.83378 27.3294 4.93185 27.6589 5.03754 27.985Z" fill="currentColor"/>\n\t<path d="M46.088 16V18H48.673L48.0239 15.4978L46.088 16ZM36 16H34V18H36V16ZM36 3V1H34V3H36ZM36.3156 3L37.3392 1.28179L36.8662 1H36.3156V3ZM37.8422 4V6H44.0588L39.0084 2.37518L37.8422 4ZM37 4V2H35V4H37ZM37 15H35V17H37V15ZM45.8022 15L47.7112 14.4035L47.2727 13H45.8022V15ZM5.03754 27.985L3.13495 28.6016L3.61009 30.0678L5.14892 29.9819L5.03754 27.985ZM7.59429 9.51532L8.24542 7.62428L6.78818 7.12251L5.93162 8.40378L7.59429 9.51532ZM7.04175 10.3865L5.32744 9.35642L4.01782 11.5358L6.4444 12.2953L7.04175 10.3865ZM4.74355 26.9966L4.6873 24.9974L2.14861 25.0688L2.81325 27.52L4.74355 26.9966ZM46.088 14H37V18H46.088V14ZM37 14H36V18H37V14ZM38 16V15H34V16H38ZM38 15V4H34V15H38ZM38 4V3H34V4H38ZM36 5H36.3156V1H36V5ZM35.292 4.71821C35.7667 5.00102 36.2285 5.3036 36.676 5.62482L39.0084 2.37518C38.4688 1.98791 37.9119 1.62299 37.3392 1.28179L35.292 4.71821ZM37 6H37.8422V2H37V6ZM39 15V4H35V15H39ZM45.8022 13H37V17H45.8022V13ZM43.8932 15.5965C43.9866 15.8954 44.073 16.1973 44.1521 16.5022L48.0239 15.4978C47.9283 15.1294 47.824 14.7646 47.7112 14.4035L43.8932 15.5965ZM12 18.5C12 22.499 8.86909 25.7682 4.92615 25.9881L5.14892 29.9819C11.1992 29.6445 16 24.6336 16 18.5H12ZM6.94315 11.4064C9.88844 12.4205 12 15.2162 12 18.5H16C16 13.457 12.7552 9.17712 8.24542 7.62428L6.94315 11.4064ZM8.75605 11.4167C8.91679 11.1492 9.08383 10.8858 9.25696 10.6269L5.93162 8.40378C5.72284 8.71607 5.52137 9.03369 5.32744 9.35642L8.75605 11.4167ZM6.4444 12.2953C9.08657 13.1221 11 15.5902 11 18.5H15C15 13.7917 11.9025 9.8121 7.63909 8.47783L6.4444 12.2953ZM11 18.5C11 22.0272 8.18992 24.8988 4.6873 24.9974L4.79979 28.9958C10.4608 28.8365 15 24.1987 15 18.5H11ZM6.94012 27.3685C6.8444 27.0731 6.75557 26.7746 6.67384 26.4732L2.81325 27.52C2.91199 27.8841 3.0193 28.2448 3.13495 28.6016L6.94012 27.3685Z" fill="currentColor" mask="url(#path-4-inside-1_15152_1853)"/>\n\t<path d="M12.25 44.3349L16 46.5L12.25 48.6651L12.25 44.3349Z" stroke="currentColor"/>\n</svg>\n'},37648:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n\t<g fill="none" stroke="#162e4c">\n\t\t<circle cx="8" cy="8" r="7"/>\n\t</g>\n\t<g fill="#162e4c">\n\t\t<path stroke="#162e4c" d="M8 12.5v-6.5"/>\n\t\t<path d="M8.5 5H7.5V4h1z"/>\n\t</g>\n</svg>\n'},17363:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" enable-background="new 0 0 22 22" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" focusable="false"><circle cx="11" cy="11" r="9.5" fill="none" stroke="#22AC14" stroke-miterlimit="10" class="circle"></circle><g xmlns="http://www.w3.org/2000/svg" class="content" fill="#22AC14"><path d="m10 9h2v7h-2v-7"></path><path d="M10,6h2v2h-2V7"></path></g></svg>'},37433:S=>{S.exports='<svg id="Group_7" data-name="Group 7" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<rect id="Rectangle_7" data-name="Rectangle 7" width="24" height="24" fill="none"/>\n\t<line id="Line_5" data-name="Line 5" y1="10" x2="10" transform="translate(7 7)" fill="none" stroke="#ffff" stroke-miterlimit="10" stroke-width="1"/>\n\t<line id="Line_6" data-name="Line 6" x2="10" y2="10" transform="translate(7 7)" fill="none" stroke="#ffff" stroke-miterlimit="10" stroke-width="1"/>\n</svg>\n'},60046:S=>{S.exports='<svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M4.74997 1.34375H13.75V2.28125H4.74997V1.34375ZM4.74997 6.03125H13.75V6.96875H4.74997V6.03125ZM4.74997 10.7188H13.75V11.6562H4.74997V10.7188ZM2.74997 3.6875V0.171875H0.816077V1.10938H1.74997V3.6875H2.74997ZM0.790527 6.67903V8.14062H3.3159V7.16581H1.868L3.24044 6.51803V4.625H0.790527V5.5625H2.24997V5.97591L0.790527 6.67903ZM0.790527 11.8906V12.8281H3.24044V9.07812H0.790527V10.0156H2.24997V10.4844H1.49997V11.4219H2.24997V11.8906H0.790527Z" fill="#0D2E4E"/>\n</svg>\n'},48941:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16.024" viewBox="0 0 16 16.024"><defs><style>.structure-explorer-binary-icon-unique-class-a{fill:none;}.structure-explorer-binary-icon-unique-class-b{fill:#54657d;}</style></defs><g transform="translate(0 0)"><rect class="structure-explorer-binary-icon-unique-class-a" width="16" height="16" transform="translate(0 0)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M881.587-85.337c0,2.3-.838,3.573-2.306,3.573-1.3,0-2.173-1.24-2.194-3.479,0-2.272.959-3.521,2.307-3.521C880.791-88.764,881.587-87.493,881.587-85.337Zm-3.6.1c0,1.761.531,2.761,1.347,2.761.918,0,1.357-1.093,1.357-2.822,0-1.667-.419-2.761-1.347-2.761C878.557-88.055,877.985-87.077,877.985-85.233Z" transform="translate(-871.088 88.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M881.587-85.337c0,2.3-.838,3.573-2.306,3.573-1.3,0-2.173-1.24-2.194-3.479,0-2.272.959-3.521,2.307-3.521C880.791-88.764,881.587-87.493,881.587-85.337Zm-3.6.1c0,1.761.531,2.761,1.347,2.761.918,0,1.357-1.093,1.357-2.822,0-1.667-.419-2.761-1.347-2.761C878.557-88.055,877.985-87.077,877.985-85.233Z" transform="translate(-876.088 97.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M874.186-87.884h-.023l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-871.607 88.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M884.332-87.884h-.024l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-870.754 88.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M884.332-87.884h-.024l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-875.754 97.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M884.332-79.907h-.024l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-870.754 89.811)"/></g></svg>'},13742:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-boolean-icon-unique-class-a,.structure-explorer-boolean-icon-unique-class-b{fill:none;}.structure-explorer-boolean-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}</style></defs><g transform="translate(-586.213 93.047)"><path class="structure-explorer-boolean-icon-unique-class-a" d="M591.213-85.547l2.5,2,6.5-7.5"/><path class="structure-explorer-boolean-icon-unique-class-a" d="M1626.707,39.564a6.5,6.5,0,1,1-6.1-4.263" transform="translate(-1026.389 -126.848)"/></g><rect class="structure-explorer-boolean-icon-unique-class-b" width="16" height="16"/></svg>'},67765:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8.456.779c2.084.007 2.813.35 4.468 1.861l-1.875 2.424-2.95-1.229Z" fill="#0d2e4e" opacity=".8"/><path d="M7.467 15.445c-2.083-.006-2.813-.35-4.467-1.861l1.875-2.424 2.949 1.229Z" fill="#0d2e4e" opacity=".4"/><path d="M15.5 8.331c-.064 2.22-.431 3.006-2 4.809l-2.4-1.931 1.322-3.175Z" fill="#0d2e4e" opacity=".6"/><path d="M.629 7.618c.006-2.084.35-2.814 1.86-4.468l2.425 1.875-1.229 2.949Z" fill="#0d2e4e" opacity=".2"/><path d="M13.409 3.076c1.5 1.443 1.8 2.195 1.949 4.431l-3.03.46-1.286-2.925Z" fill="#0d2e4e" opacity=".8"/><path d="M2.574 13.009c-1.5-1.443-1.795-2.195-1.948-4.43l3.029-.46 1.287 2.925Z" fill="#0d2e4e" opacity=".4"/><path d="M13.293 13.403c-1.578 1.562-2.386 1.878-4.769 2.1l-.4-3.055 3.149-1.384Z" fill="#0d2e4e" opacity=".6"/><path d="M3.026 2.622C4.468 1.122 5.22.828 7.455.674l.461 3.03L4.99 4.99Z" fill="#0d2e4e" opacity=".2"/><g transform="translate(-798.326 92.909)" fill="none"><path d="M798.326-92.909h16v16h-16z"/><circle cx="7.5" cy="7.5" r="7.5" transform="translate(798.826 -92.409)" stroke="#162e4c"/><circle cx="4" cy="4" r="4" transform="translate(802.326 -88.909)" stroke="#162e4c"/><g stroke="#162e4c"><path d="M806.326-81.1v3.686"/><path d="M806.326-89.023v-3.386"/><path d="M802.511-84.909h-3.685"/><path d="M813.826-84.909h-3.387"/><path d="m803.416-87.817-2.394-2.395"/><path d="m811.628-79.605-2.189-2.189"/><path d="m803.211-81.795-2.189 2.189"/><path d="m811.629-90.213-2.4 2.395"/></g></g></svg>\n'},17129:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-date-icon-unique-class-a,.structure-explorer-date-icon-unique-class-b{fill:none;}.structure-explorer-date-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}.structure-explorer-date-icon-unique-class-c{stroke:none;}</style></defs><g transform="translate(0.5)"><g transform="translate(2365.657 64.642)"><line class="structure-explorer-date-icon-unique-class-a" x2="5.938" transform="translate(-2361.157 -62.142)"/><path class="structure-explorer-date-icon-unique-class-a" d="M-2353.157-61.732h2.5v12h-15v-12h2.563" transform="translate(0 -0.41)"/><line class="structure-explorer-date-icon-unique-class-a" x2="15" transform="translate(-2365.657 -58.142)"/><g class="structure-explorer-date-icon-unique-class-a" transform="translate(-2364.157 -64.642)"><rect class="structure-explorer-date-icon-unique-class-c" width="3" height="5"/><rect class="structure-explorer-date-icon-unique-class-b" x="0.5" y="0.5" width="2" height="4"/></g><g class="structure-explorer-date-icon-unique-class-a" transform="translate(-2355.157 -64.642)"><rect class="structure-explorer-date-icon-unique-class-c" width="3" height="5"/><rect class="structure-explorer-date-icon-unique-class-b" x="0.5" y="0.5" width="2" height="4"/></g></g></g><rect class="structure-explorer-date-icon-unique-class-b" width="16" height="16"/></svg>'},46684:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-date-time-icon-unique-class-a,.structure-explorer-date-time-icon-unique-class-b,.structure-explorer-date-time-icon-unique-class-c,.structure-explorer-date-time-icon-unique-class-d{fill:none;}.structure-explorer-date-time-icon-unique-class-b,.structure-explorer-date-time-icon-unique-class-c{stroke:#54657d;}.structure-explorer-date-time-icon-unique-class-b,.structure-explorer-date-time-icon-unique-class-d{stroke-miterlimit:10;}.structure-explorer-date-time-icon-unique-class-e,.structure-explorer-date-time-icon-unique-class-f{stroke:none;}.structure-explorer-date-time-icon-unique-class-f{fill:#54657d;}</style></defs><rect class="structure-explorer-date-time-icon-unique-class-a" width="16" height="16"/><path class="structure-explorer-date-time-icon-unique-class-b" d="M1895.033,260.278h-4.149v-9h12v2" transform="translate(-1890.384 -248.778)"/><path class="structure-explorer-date-time-icon-unique-class-c" d="M0,0H4.5" transform="translate(1 5.5)"/><g transform="translate(4.5)"><line class="structure-explorer-date-time-icon-unique-class-b" y2="4" transform="translate(-1 0)"/><line class="structure-explorer-date-time-icon-unique-class-b" y2="4" transform="translate(5 0)"/></g><g class="structure-explorer-date-time-icon-unique-class-d" transform="translate(-1889.764 -248.583)"><path class="structure-explorer-date-time-icon-unique-class-e" d="M1905.764,258.584a5,5,0,1,1-5-5A5,5,0,0,1,1905.764,258.584Z"/><path class="structure-explorer-date-time-icon-unique-class-f" d="M 1900.7626953125 262.5840454101563 C 1902.968994140625 262.5840454101563 1904.763916015625 260.7896728515625 1904.763916015625 258.5840759277344 C 1904.763916015625 256.3778686523438 1902.968994140625 254.5829772949219 1900.7626953125 254.5829772949219 C 1898.557739257813 254.5829772949219 1896.763916015625 256.3778686523438 1896.763916015625 258.5840759277344 C 1896.763916015625 260.7896728515625 1898.557739257813 262.5840454101563 1900.7626953125 262.5840454101563 M 1900.7626953125 263.5840454101563 C 1898.000244140625 263.5840454101563 1895.763916015625 261.3454284667969 1895.763916015625 258.5840759277344 C 1895.763916015625 255.8215942382813 1898.000244140625 253.5829772949219 1900.7626953125 253.5829772949219 C 1903.524169921875 253.5829772949219 1905.763916015625 255.8215942382813 1905.763916015625 258.5840759277344 C 1905.763916015625 261.3454284667969 1903.524169921875 263.5840454101563 1900.7626953125 263.5840454101563 Z"/></g><path class="structure-explorer-date-time-icon-unique-class-b" d="M1900.1,254.194v5h2.5" transform="translate(-1889.097 -248.694)"/></svg>'},22023:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="2" y="3.5" width="12" height="9" stroke="currentColor"/>\n<path d="M14 3.5L8 9L2 3.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},53073:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-float-icon-unique-class-a{fill:#54657d;}.structure-explorer-float-icon-unique-class-b{fill:none;}</style></defs><g transform="translate(2212.813 -42.785)"><path class="structure-explorer-float-icon-unique-class-a" d="M-2210.728,47.87h-.024l-1.355.732-.2-.8,1.7-.911h.9v7.795h-1.019Z" transform="translate(1)"/><path class="structure-explorer-float-icon-unique-class-a" d="M-2207.943,54.682v-.647l.828-.8c1.99-1.9,2.891-2.9,2.9-4.077a1.391,1.391,0,0,0-1.547-1.524,2.659,2.659,0,0,0-1.656.66l-.336-.744a3.431,3.431,0,0,1,2.207-.791,2.193,2.193,0,0,1,2.387,2.266c0,1.44-1.043,2.6-2.686,4.186l-.624.576v.024h3.5v.875Z" transform="translate(4 0.03)"/><rect class="structure-explorer-float-icon-unique-class-a" width="1" height="1" transform="translate(-2206.813 53.785)"/></g><rect class="structure-explorer-float-icon-unique-class-b" width="16" height="16"/></svg>'},85303:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="#0d2e4e" d="m8.446 5.548-.131.483h-1.07l-.8 3.2a19.171 19.171 0 0 1-1.077 3.274 5.653 5.653 0 0 1-1.655 2.255 2.323 2.323 0 0 1-1.348.476 1.106 1.106 0 0 1-.747-.263.581.581 0 0 1-.227-.476.534.534 0 0 1 .187-.407.648.648 0 0 1 .457-.172.477.477 0 0 1 .334.125.378.378 0 0 1 .135.285.4.4 0 0 1-.154.3q-.117.1-.117.153a.12.12 0 0 0 .051.1.336.336 0 0 0 .2.051 1.345 1.345 0 0 0 .663-.2 1.9 1.9 0 0 0 .619-.589 4.487 4.487 0 0 0 .513-1.132q.1-.308.549-2.029l1.275-4.958H4.828l.1-.483a2.888 2.888 0 0 0 .849-.085 1.024 1.024 0 0 0 .443-.322 4.834 4.834 0 0 0 .524-.89 7.189 7.189 0 0 1 .828-1.362 4 4 0 0 1 1.138-.978 2.365 2.365 0 0 1 1.125-.326 1.346 1.346 0 0 1 .893.282.8.8 0 0 1 .337.612.6.6 0 0 1-.168.432.571.571 0 0 1-.432.176.522.522 0 0 1-.37-.132.415.415 0 0 1-.143-.315.633.633 0 0 1 .095-.289.647.647 0 0 0 .1-.231.185.185 0 0 0-.066-.154.453.453 0 0 0-.279-.073 1.29 1.29 0 0 0-.828.293 3.3 3.3 0 0 0-.878 1.216q-.2.432-.725 2.146Z" data-name="Path 7000"/><path fill="#0d2e4e" d="M10.768 5.372a3.082 3.082 0 0 1 .542.761 10.154 10.154 0 0 1 .432 1.385l.645-.967a4.078 4.078 0 0 1 .622-.67 2.522 2.522 0 0 1 .645-.436.992.992 0 0 1 .388-.073.724.724 0 0 1 .5.168.532.532 0 0 1 .186.41.515.515 0 0 1-.109.381.685.685 0 0 1-.469.183.944.944 0 0 1-.33-.066 1.836 1.836 0 0 0-.461-.117.708.708 0 0 0-.418.205 5.842 5.842 0 0 0-1.084 1.472l.6 2.52a2.242 2.242 0 0 0 .234.692.261.261 0 0 0 .191.114.61.61 0 0 0 .359-.169 2.856 2.856 0 0 0 .688-.879l.256.132a4.589 4.589 0 0 1-1.171 1.436 1.192 1.192 0 0 1-.682.322.728.728 0 0 1-.651-.461 17.972 17.972 0 0 1-.638-2.461 10.388 10.388 0 0 1-1.831 2.556 1.382 1.382 0 0 1-.864.366.8.8 0 0 1-.535-.212.56.56 0 0 1-.175-.433.542.542 0 0 1 .161-.4.535.535 0 0 1 .4-.162.778.778 0 0 1 .5.235.543.543 0 0 0 .293.168.4.4 0 0 0 .227-.117 5.539 5.539 0 0 0 .938-1.2 11.879 11.879 0 0 0 .776-1.333q-.454-1.78-.491-1.882a1.369 1.369 0 0 0-.439-.674 1.346 1.346 0 0 0-.8-.2c-.113 0-.242.005-.389.015v-.264Z"/><path fill="none" d="M0 0h16v16H0z"/></svg>'},3465:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-guid-icon-unique-class-a{fill:none;}.structure-explorer-guid-icon-unique-class-b{fill:#54657d;}</style></defs><rect class="structure-explorer-guid-icon-unique-class-a" width="16" height="16"/><path class="structure-explorer-guid-icon-unique-class-b" d="M4.252-2.767h-2v1h1V-.5c-.016.018.177,0-.252,0A1.724,1.724,0,0,1,1.172-2.253,1.727,1.727,0,0,1,3-4.03a3.445,3.445,0,0,1,1.252.216l.013-.729A3.252,3.252,0,0,0,3-4.767,2.5,2.5,0,0,0,.252-2.253,2.45,2.45,0,0,0,.96-.439,2.675,2.675,0,0,0,2.857.2,4.082,4.082,0,0,0,4.252,0Zm1-2v2.919A1.86,1.86,0,0,0,7.232.233a1.869,1.869,0,0,0,2.02-2.081V-4.767h-1v2.919C8.252-.771,7.685-.5,7.232-.5c-.358,0-.98-.253-.98-1.344V-4.767Zm5,0v5h1v-5Zm2,4.964c.016.02.559,0,1.026,0a3.21,3.21,0,0,0,2.244-.7,2.518,2.518,0,0,0,.73-1.893,2.2,2.2,0,0,0-.715-1.749,2.987,2.987,0,0,0-2.056-.607c-.52,0-1.229-.032-1.229-.015Zm1-4.227c.173-.036-.11,0,.229,0,1.385,0,1.871.8,1.871,1.633A1.773,1.773,0,0,1,13.393-.5c-.256,0,.025.029-.141,0Z" transform="translate(-0.252 9.768)"/></svg>'},99104:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-image-icon-unique-class-a,.structure-explorer-image-icon-unique-class-c{fill:none;}.structure-explorer-image-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}.structure-explorer-image-icon-unique-class-b{fill:#54657d;}.structure-explorer-image-icon-unique-class-d{stroke:none;}</style></defs><g class="structure-explorer-image-icon-unique-class-a" transform="translate(0 2)"><rect class="structure-explorer-image-icon-unique-class-d" width="16" height="12"/><rect class="structure-explorer-image-icon-unique-class-c" x="0.5" y="0.5" width="15" height="11"/></g><circle class="structure-explorer-image-icon-unique-class-b" cx="1.5" cy="1.5" r="1.5" transform="translate(10 4)"/><path class="structure-explorer-image-icon-unique-class-b" d="M638.873-81.425l4-6,7,8h-11Z" transform="translate(-637.873 92.426)"/><path class="structure-explorer-image-icon-unique-class-b" d="M650.873-79.425l-2-3,2-1,2,2v2Z" transform="translate(-637.873 92.426)"/><rect class="structure-explorer-image-icon-unique-class-c" width="16" height="16"/></svg>'},35647:S=>{S.exports='<svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M2 12.0906V14.0081H16V4.00806H12.7424" stroke="currentColor" stroke-miterlimit="10"/>\n<path d="M12.5 9.00806C13.3284 9.00806 14 8.33648 14 7.50806C14 6.67963 13.3284 6.00806 12.5 6.00806C11.6716 6.00806 11 6.67963 11 7.50806C11 8.33648 11.6716 9.00806 12.5 9.00806Z" fill="currentColor"/>\n<path d="M3.99998 14.0081L4.89526 12.8143L8.5414 8.25662L14.2928 14.0081H3.99998Z" stroke="currentColor"/>\n<path d="M3.69895 10.697C3.07795 11.318 2.33199 10.921 1.70999 10.297C1.08899 9.67596 0.689969 8.92896 1.30997 8.30796L3.29898 6.31896C3.91998 5.69796 4.66596 6.09496 5.28696 6.71896C5.90896 7.33996 6.30698 8.08596 5.68698 8.70796L3.69895 10.697Z" stroke="currentColor" stroke-miterlimit="10"/>\n<path d="M8.69905 5.69693C8.07705 6.31793 7.33204 5.92093 6.71004 5.29693C6.08804 4.67593 5.69101 3.92993 6.31001 3.30893L8.29805 1.31993C8.92005 0.698935 9.666 1.09593 10.287 1.71993C10.909 2.34093 11.306 3.08693 10.687 3.70893L8.69905 5.69693Z" stroke="currentColor" stroke-miterlimit="10"/>\n<path d="M4 8.24291L8.233 4.00891" stroke="currentColor" stroke-miterlimit="10"/>\n</svg>\n'},41337:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-integer-icon-unique-class-a{fill:#54657d;}.structure-explorer-integer-icon-unique-class-b{fill:none;}</style></defs><g transform="translate(0.502 3.971)"><path class="structure-explorer-integer-icon-unique-class-a" d="M-2210.728,47.87h-.024l-1.355.732-.2-.8,1.7-.911h.9v7.795h-1.019Z" transform="translate(2212.311 -46.755)"/><path class="structure-explorer-integer-icon-unique-class-a" d="M-2207.943,54.682v-.647l.828-.8c1.99-1.9,2.891-2.9,2.9-4.077a1.391,1.391,0,0,0-1.547-1.524,2.659,2.659,0,0,0-1.656.66l-.336-.744a3.431,3.431,0,0,1,2.207-.791,2.193,2.193,0,0,1,2.387,2.266c0,1.44-1.043,2.6-2.686,4.186l-.624.576v.024h3.5v.875Z" transform="translate(2212.311 -46.755)"/><path class="structure-explorer-integer-icon-unique-class-a" d="M-2201.9,53.471a3.526,3.526,0,0,0,1.727.492c1.356,0,1.775-.864,1.763-1.512-.013-1.091-.995-1.559-2.015-1.559h-.588V50.1h.588c.768,0,1.739-.4,1.739-1.319,0-.624-.4-1.176-1.368-1.176a2.86,2.86,0,0,0-1.558.516l-.276-.768a3.715,3.715,0,0,1,2.039-.6c1.535,0,2.231.911,2.231,1.859a1.938,1.938,0,0,1-1.439,1.835v.024a2.031,2.031,0,0,1,1.738,2c0,1.248-.971,2.339-2.842,2.339a3.964,3.964,0,0,1-2.027-.528Z" transform="translate(2212.311 -46.755)"/></g><rect class="structure-explorer-integer-icon-unique-class-b" width="16" height="16"/></svg>'},250:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-lookup-icon-unique-class-a,.structure-explorer-lookup-icon-unique-class-b,.structure-explorer-lookup-icon-unique-class-c{fill:none;}.structure-explorer-lookup-icon-unique-class-a,.structure-explorer-lookup-icon-unique-class-b{stroke:#54657d;}.structure-explorer-lookup-icon-unique-class-a{stroke-miterlimit:10;}.structure-explorer-lookup-icon-unique-class-d{stroke:none;}</style></defs><g transform="translate(0.001)"><g class="structure-explorer-lookup-icon-unique-class-a" transform="translate(0 0)"><circle class="structure-explorer-lookup-icon-unique-class-d" cx="6" cy="6" r="6"/><circle class="structure-explorer-lookup-icon-unique-class-c" cx="6" cy="6" r="5.5"/></g><path class="structure-explorer-lookup-icon-unique-class-b" d="M.344.344,5.5,5.5" transform="translate(9.5 9.5)"/></g><rect class="structure-explorer-lookup-icon-unique-class-c" width="16" height="16"/></svg>'},88517:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.3353 2.83815L6.79954 2.65245L6.79954 2.65245L6.3353 2.83815ZM7.03813 4.59524L6.57389 4.78094L6.57389 4.78094L7.03813 4.59524ZM6.82454 5.94398L6.44043 5.62389L6.44042 5.6239L6.82454 5.94398ZM6.44629 6.39792L6.8304 6.71802L6.83041 6.718L6.44629 6.39792ZM6.52758 8.19434L6.17402 8.54789L6.17404 8.5479L6.52758 8.19434ZM7.8057 9.47236L8.15925 9.11881L8.15924 9.1188L7.8057 9.47236ZM9.60205 9.55382L9.28202 9.16966L9.28196 9.1697L9.60205 9.55382ZM10.0561 9.17554L10.3762 9.5597L10.3762 9.55965L10.0561 9.17554ZM11.4048 8.96192L11.5905 8.49768L11.5905 8.49768L11.4048 8.96192ZM13.1617 9.66476L12.976 10.129L12.976 10.129L13.1617 9.66476ZM13.9999 10.9027H13.4999V10.9027L13.9999 10.9027ZM14 12.7369H14.5V12.7369L14 12.7369ZM5.09733 2.5C5.43808 2.5 5.74451 2.70746 5.87106 3.02384L6.79954 2.65245C6.52112 1.95641 5.84699 1.5 5.09733 1.5V2.5ZM5.87106 3.02384L6.57389 4.78094L7.50237 4.40955L6.79954 2.65245L5.87106 3.02384ZM6.57389 4.78094C6.68759 5.0652 6.63634 5.3888 6.44043 5.62389L7.20866 6.26407C7.63979 5.74671 7.75243 5.03471 7.50237 4.40955L6.57389 4.78094ZM6.44042 5.6239L6.06217 6.07785L6.83041 6.718L7.20867 6.26406L6.44042 5.6239ZM6.06218 6.07783C5.45524 6.80615 5.50344 7.87731 6.17402 8.54789L6.88113 7.84078C6.57646 7.53612 6.55439 7.04923 6.8304 6.71802L6.06218 6.07783ZM6.17404 8.5479L7.45216 9.82593L8.15924 9.1188L6.88112 7.84077L6.17404 8.5479ZM7.45214 9.82592C8.12264 10.4964 9.19373 10.5449 9.92214 9.93793L9.28196 9.1697C8.95084 9.44564 8.464 9.42356 8.15925 9.11881L7.45214 9.82592ZM9.92209 9.93797L10.3762 9.5597L9.73609 8.79138L9.28202 9.16966L9.92209 9.93797ZM10.3762 9.55965C10.6113 9.36371 10.9348 9.31247 11.2191 9.42616L11.5905 8.49768C10.9652 8.2476 10.2534 8.36031 9.73603 8.79143L10.3762 9.55965ZM11.219 9.42615L12.976 10.129L13.3474 9.20052L11.5905 8.49768L11.219 9.42615ZM12.976 10.129C13.2925 10.2556 13.4999 10.562 13.4999 10.9027H14.4999C14.4999 10.153 14.0434 9.47891 13.3474 9.20052L12.976 10.129ZM13.4999 10.9027L13.5 12.7369L14.5 12.7369L14.4999 10.9027L13.4999 10.9027ZM13.5 12.7369C13.5 13.1584 13.1584 13.5 12.737 13.5V14.5C13.7108 14.5 14.5 13.7106 14.5 12.7369H13.5ZM12.737 13.5C7.08332 13.5 2.5 8.91682 2.5 3.26318H1.5C1.5 9.46913 6.53105 14.5 12.737 14.5V13.5ZM2.5 3.26318C2.5 2.84169 2.84169 2.5 3.26316 2.5V1.5C2.28938 1.5 1.5 2.28943 1.5 3.26318H2.5ZM3.26316 2.5H5.09733V1.5H3.26316V2.5Z" fill="currentColor"/>\n</svg>\n'},80705:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 4V6.112H11.732C11.7075 5.83541 11.6365 5.56494 11.522 5.312C11.3902 5.0689 11.188 4.87127 10.942 4.745C10.643 4.61142 10.3172 4.54879 9.98999 4.562H8.64697V11.438C8.60319 11.7946 8.66949 12.1561 8.83698 12.474C8.94798 12.5737 9.07811 12.6497 9.21942 12.6975C9.36073 12.7453 9.51029 12.7638 9.659 12.752H9.98999V12.997H5.94897V12.752H6.28699C6.44717 12.7684 6.60896 12.7457 6.75842 12.6858C6.90788 12.6259 7.0405 12.5305 7.14496 12.408C7.27744 12.1029 7.3298 11.769 7.297 11.438V4.562H6.151C5.83219 4.54791 5.513 4.57923 5.203 4.655C4.94879 4.74677 4.72978 4.91606 4.57697 5.13899C4.3865 5.42772 4.27925 5.76333 4.26697 6.10899H4V4H12Z" fill="#0D2E4E"/>\n<rect x="0.5" y="0.5" width="15" height="15" rx="1.5" stroke="#0D2E4E"/>\n</svg>\n'},84764:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-string-icon-unique-class-a{fill:#54657d;}.structure-explorer-string-icon-unique-class-b{fill:none;}</style></defs><g transform="translate(2212.813 -5.301)"><path class="structure-explorer-string-icon-unique-class-a" d="M-2199.672,7.3l.139,2.951h-.354a3.592,3.592,0,0,0-.277-1.114,1.871,1.871,0,0,0-.766-.793,2.672,2.672,0,0,0-1.258-.255h-1.771V17.7a2.586,2.586,0,0,0,.25,1.448,1.4,1.4,0,0,0,1.086.389h.435v.343h-5.334v-.343h.446a1.277,1.277,0,0,0,1.132-.482,2.832,2.832,0,0,0,.2-1.355V8.089h-1.512a4.188,4.188,0,0,0-1.252.13,1.717,1.717,0,0,0-.826.677,2.739,2.739,0,0,0-.409,1.355h-.353l.148-2.951Z"/></g><rect class="structure-explorer-string-icon-unique-class-b" width="16" height="16"/></svg>'},85443:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-time-icon-unique-class-a,.structure-explorer-time-icon-unique-class-c{fill:none;}.structure-explorer-time-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}.structure-explorer-time-icon-unique-class-b{stroke:none;}</style></defs><g transform="translate(-1816.814 -33.301)"><g class="structure-explorer-time-icon-unique-class-a" transform="translate(1816.814 33.301)"><circle class="structure-explorer-time-icon-unique-class-b" cx="8" cy="8" r="8"/><circle class="structure-explorer-time-icon-unique-class-c" cx="8" cy="8" r="7.5"/></g><path class="structure-explorer-time-icon-unique-class-a" d="M1825.314,36.015v5.244l3,3.542"/></g></svg>'},4907:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2 8H14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8 13.8375C9.38071 13.8375 10.5 11.2239 10.5 7.99998C10.5 4.77601 9.38071 2.16248 8 2.16248C6.61929 2.16248 5.5 4.77601 5.5 7.99998C5.5 11.2239 6.61929 13.8375 8 13.8375Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},51868:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 1V15H13V5H8.99999V1H3ZM2 0H9.99999V4H14V16H2V0Z" fill="#006CE0"/>\n<path d="M10 0L14 4H10V0Z" fill="#006CE0"/>\n</svg>\n'},79143:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#207245"/>\n<path d="M13.1334 4.73367H11.2667V5.66701H13.1334V4.73367Z" fill="#207245"/>\n<path d="M10.3334 4.73367H9.40002V5.66701H10.3334V4.73367Z" fill="#207245"/>\n<path d="M13.1334 6.60034H11.2667V7.53368H13.1334V6.60034Z" fill="#207245"/>\n<path d="M10.3334 6.60034H9.40002V7.53368H10.3334V6.60034Z" fill="#207245"/>\n<path d="M13.1334 8.46701H11.2667V9.40034H13.1334V8.46701Z" fill="#207245"/>\n<path d="M10.3334 8.46701H9.40002V9.40034H10.3334V8.46701Z" fill="#207245"/>\n<path d="M13.1334 10.3337H11.2667V11.267H13.1334V10.3337Z" fill="#207245"/>\n<path d="M10.3334 10.3337H9.40002V11.267H10.3334V10.3337Z" fill="#207245"/>\n<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#207245"/>\n<path d="M3.80005 5.66699L6.60005 10.8003" stroke="#207245" stroke-miterlimit="10"/>\n<path d="M3.80005 10.3337L6.60005 5.20035" stroke="#207245" stroke-miterlimit="10"/>\n</svg>\n'},68523:S=>{S.exports='<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15.5458 3H1.54578V13H15.5458V3Z" stroke="#FF8800" stroke-miterlimit="10"/>\n<path d="M11.0458 8C11.8742 8 12.5458 7.32843 12.5458 6.5C12.5458 5.67157 11.8742 5 11.0458 5C10.2173 5 9.54578 5.67157 9.54578 6.5C9.54578 7.32843 10.2173 8 11.0458 8Z" fill="#FF8800"/>\n<path d="M1.54578 13V11.6514L5.09954 6.32074L10.9439 13H1.54578Z" stroke="#FF8800"/>\n<path d="M15.5458 13H13.8134L11.776 9.94392L13.447 9.10838L15.5458 11.2071V13Z" stroke="#FF8800"/>\n</svg>\n'},76655:S=>{S.exports='<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 8V2H10.3L14 5.42461V14H6.5" stroke="#F40000" stroke-miterlimit="10"/>\n<path d="M10.4702 2H9.47021V6H13.4702V5H10.4702V2Z" fill="#F40000"/>\n<path d="M12.4598 11.07C12.4498 10.98 12.3799 10.86 12.2999 10.78C12.0799 10.56 11.5899 10.44 10.8499 10.43C10.3499 10.43 9.73986 10.47 9.10986 10.56C8.82986 10.39 8.52986 10.21 8.29986 9.98996C7.67986 9.39996 7.15984 8.57996 6.83984 7.67996C6.85984 7.59996 6.87984 7.51995 6.89984 7.44995C6.89984 7.44995 7.24985 5.41996 7.15985 4.73996C7.14985 4.64996 7.13984 4.61995 7.11984 4.54995L7.08984 4.46997C6.98984 4.24997 6.80986 4.00996 6.51986 4.01996H6.33984C6.00984 4.01996 5.74984 4.17997 5.67984 4.43997C5.46984 5.23997 5.67986 6.42995 6.07986 7.97995L5.97986 8.22995C5.69986 8.93995 5.33984 9.64996 5.02984 10.27L4.98987 10.35C4.65987 11.01 4.35984 11.57 4.08984 12.04L3.80984 12.19C3.80984 12.19 3.30986 12.46 3.19986 12.53C2.24986 13.11 1.60985 13.77 1.50985 14.3C1.47985 14.47 1.50986 14.68 1.66986 14.78L1.93985 14.9199C2.05985 14.9799 2.17984 15.01 2.30984 15.01C2.98984 15.01 3.77984 14.14 4.86984 12.21C6.12984 11.79 7.55984 11.44 8.80984 11.25C9.76984 11.8 10.9398 12.18 11.6798 12.18C11.8098 12.18 11.9299 12.17 12.0199 12.14C12.1599 12.1 12.2799 12.02 12.3499 11.91C12.4899 11.69 12.5199 11.38 12.4799 11.07H12.4598ZM2.13986 14.4799C2.25986 14.1299 2.74986 13.45 3.47986 12.84C3.52986 12.8 3.63987 12.69 3.73987 12.59C2.97987 13.83 2.46986 14.32 2.13986 14.47V14.4799ZM6.43985 4.36996C6.65985 4.36996 6.77985 4.92996 6.78985 5.45996C6.79985 5.98996 6.67984 6.35997 6.52984 6.62997C6.40984 6.21997 6.34985 5.57995 6.34985 5.16995C6.34985 5.16995 6.34985 4.36996 6.43985 4.36996ZM5.15985 11.58C5.30985 11.3 5.46985 11.0099 5.62985 10.6999C6.02985 9.93995 6.26984 9.33997 6.45984 8.84997C6.82984 9.53997 7.28986 10.12 7.82986 10.59C7.89986 10.65 7.96985 10.71 8.03985 10.77C6.93985 10.99 5.98985 11.26 5.15985 11.59V11.58ZM12.0898 11.52C12.0198 11.56 11.8298 11.59 11.7098 11.59C11.3098 11.59 10.8198 11.4 10.1298 11.1C10.3998 11.08 10.6399 11.07 10.8599 11.07C11.2599 11.07 11.3799 11.0699 11.7699 11.1699C12.1599 11.2699 12.1699 11.48 12.0999 11.52H12.0898Z" fill="#F40000"/>\n</svg>\n'},13117:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#D24625"/>\n<path d="M13.1333 10.3337H8.46667V11.267H13.1333V10.3337Z" fill="#D24625"/>\n<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#D24625"/>\n<path d="M11.2667 4.73367V6.60034H13.1334C13.1334 5.57367 12.2934 4.73367 11.2667 4.73367Z" fill="#D24625"/>\n<path d="M6.63733 7.067C6.63733 6.227 6.33866 5.50835 5.89999 5.16302C5.22799 4.64035 4.192 4.73366 4.192 4.73366H3.79065V11.267H4.72398V9.44701C5.05065 9.44701 5.46132 9.37234 5.83465 9.09234C6.36665 8.69101 6.62799 8.00968 6.62799 7.05768L6.63733 7.067ZM5.28399 8.34566C5.11599 8.47633 4.90133 8.51368 4.73333 8.51368V5.62968C4.91066 5.65768 5.12533 5.71368 5.29333 5.86302C5.564 6.09635 5.704 6.49768 5.704 7.05768C5.704 7.49635 5.62932 8.07501 5.28399 8.33634V8.34566Z" fill="#D24625"/>\n<path d="M10.3334 7.53366V5.66699C9.98802 5.66699 9.67069 5.76966 9.40002 5.92832V9.14834C9.67069 9.307 9.98802 9.40967 10.3334 9.40967C11.36 9.40967 12.2 8.56967 12.2 7.543H10.3334V7.53366Z" fill="#D24625"/>\n</svg>\n'},1850:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#2A5699"/>\n<path d="M13.1334 4.73367H9.40002V5.66701H13.1334V4.73367Z" fill="#2A5699"/>\n<path d="M13.1334 6.60034H9.40002V7.53368H13.1334V6.60034Z" fill="#2A5699"/>\n<path d="M13.1334 8.46701H9.40002V9.40034H13.1334V8.46701Z" fill="#2A5699"/>\n<path d="M13.1334 10.3337H9.40002V11.267H13.1334V10.3337Z" fill="#2A5699"/>\n<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#2A5699"/>\n<path d="M5.90935 10.3337L5.19069 7.35632L4.48135 10.3337H3.88403L2.8667 5.66699H3.61335L4.2107 8.58833L4.90136 5.66699H5.49868L6.18936 8.61633L6.78668 5.66699H7.53337L6.51604 10.3337H5.90935Z" fill="#2A5699"/>\n</svg>\n'},89743:S=>{S.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M31 6L39 14H31V6Z" fill="#0058EF"/>\n<mask id="path-2-inside-1_3672_46963" fill="white">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M31 6H11V44H39V14H31V6Z"/>\n</mask>\n<path d="M11 6V4H9V6H11ZM31 6H33V4H31V6ZM11 44H9V46H11V44ZM39 44V46H41V44H39ZM39 14H41V12H39V14ZM31 14H29V16H31V14ZM11 8H31V4H11V8ZM13 44V6H9V44H13ZM39 42H11V46H39V42ZM37 14V44H41V14H37ZM39 12H31V16H39V12ZM33 14V6H29V14H33Z" fill="#0058EF" mask="url(#path-2-inside-1_3672_46963)"/>\n</svg>\n'},22249:S=>{S.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.849 16.7535L20.249 32.1535" stroke="#207245" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M11.849 30.7535L20.249 15.3535" stroke="#207245" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M26.8625 4.75354L4.44897 9.74786V38.7394L26.8625 43.2465V4.75354Z" stroke="#207245" stroke-width="2"/>\n<path d="M26.8625 10.1133H43.551V38.0085H26.8625M26.8625 15.8385H31.5311M26.8625 21.3201H31.5311M26.8625 27.0454H31.5311M26.8625 32.6488H31.5311M34.2463 15.8385H39.9148M34.2463 21.3201H39.9148M34.2463 27.0454H39.9148M34.2463 32.6488H39.9148" stroke="#207245" stroke-width="2"/>\n</svg>\n'},8379:S=>{S.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 37V11H43V37H5Z" stroke="#FF8800" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M33.6655 20.1493C33.6655 21.8257 32.3244 23.1657 30.6932 23.1657C29.0621 23.1657 27.7209 21.8257 27.7209 20.1493C27.7209 18.4729 29.0621 17.1329 30.6932 17.1329C32.3244 17.1329 33.6655 18.4729 33.6655 20.1493Z" stroke="#FF8800" stroke-width="2"/>\n<path d="M6.09387 37V33.8161L14.9636 19.1407L31.0907 37H6.09387Z" stroke="#FF8800" stroke-width="2"/>\n<path d="M42.0514 37H37.8244L32.1907 29.215L37.0649 26.7508L42.0514 32.5684V37Z" stroke="#FF8800" stroke-width="2"/>\n</svg>\n'},96870:S=>{S.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8 24V6H29.9001L41 16.2738V42H18.5" stroke="#F40000" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M29.3433 6.01556V16.5029C33.371 16.5029 41.4263 16.5029 41.4263 16.5029" stroke="#F40000" stroke-width="2"/>\n<path d="M35.9689 33.2099C35.9389 32.9399 35.7289 32.5799 35.4889 32.3399C34.8289 31.6799 33.3589 31.3199 31.1389 31.2899C29.6389 31.2899 27.8089 31.4099 25.9189 31.6799C25.0789 31.1699 24.1789 30.6299 23.4889 29.9699C21.6289 28.1999 20.0689 25.7399 19.1089 23.0399C19.1689 22.7999 19.2289 22.5598 19.2889 22.3498C19.2889 22.3498 20.3389 16.2599 20.0689 14.2199C20.0389 13.9499 20.0089 13.8599 19.9489 13.6499L19.8589 13.4099C19.5589 12.7499 19.0189 12.0299 18.1489 12.0599H17.6089C16.6189 12.0599 15.8389 12.5399 15.6289 13.3199C14.9989 15.7199 15.6289 19.2898 16.8289 23.9398L16.5289 24.6898C15.6889 26.8198 14.6089 28.9499 13.6789 30.8099L13.559 31.0499C12.569 33.0299 11.6689 34.7099 10.8589 36.1199L10.0189 36.5699C10.0189 36.5699 8.51893 37.3799 8.18893 37.5899C5.33893 39.3299 3.41892 41.3099 3.11892 42.8999C3.02892 43.4099 3.11893 44.0399 3.59893 44.3399L4.4089 44.7598C4.7689 44.9398 5.12888 45.0299 5.51888 45.0299C7.55888 45.0299 9.92887 42.4199 13.1989 36.6299C16.9789 35.3699 21.2689 34.3199 25.0189 33.7499C27.8989 35.3999 31.4089 36.5399 33.6289 36.5399C34.0189 36.5399 34.3789 36.5098 34.6489 36.4198C35.0689 36.2999 35.4289 36.0599 35.6389 35.7299C36.0589 35.0699 36.1489 34.1399 36.0289 33.2099H35.9689ZM5.00893 43.4398C5.36893 42.3898 6.83892 40.3499 9.02892 38.5199C9.17892 38.3999 9.50895 38.0699 9.80895 37.7699C7.52895 41.4899 5.99893 42.9599 5.00893 43.4099V43.4398ZM17.9089 13.1099C18.5689 13.1099 18.9289 14.7899 18.9589 16.3799C18.9889 17.9699 18.6289 19.0799 18.1789 19.8899C17.8189 18.6599 17.6389 16.7398 17.6389 15.5098C17.6389 15.5098 17.6389 13.1099 17.9089 13.1099ZM14.0689 34.7399C14.5189 33.8999 14.9989 33.0298 15.4789 32.0998C16.6789 29.8198 17.3989 28.0199 17.9689 26.5499C19.0789 28.6199 20.4589 30.3599 22.0789 31.7699C22.2889 31.9499 22.4989 32.1299 22.7089 32.3099C19.4089 32.9699 16.5589 33.7799 14.0689 34.7699V34.7399ZM34.8589 34.5599C34.6489 34.6799 34.0789 34.7699 33.7189 34.7699C32.5189 34.7699 31.0489 34.1999 28.9789 33.2999C29.7889 33.2399 30.5089 33.2099 31.1689 33.2099C32.3689 33.2099 32.7289 33.2098 33.8989 33.5098C35.0689 33.8098 35.0989 34.4399 34.8889 34.5599H34.8589Z" fill="#F40000"/>\n</svg>\n'},77374:S=>{S.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M26.8625 4.75354L4.44897 9.74786V38.7394L26.8625 43.2465V4.75354Z" stroke="#D24625" stroke-width="2"/>\n<path d="M33.8 14.2097V19.8097H39.4C39.4 16.7297 36.88 14.2097 33.8 14.2097Z" fill="#D24625"/>\n<path d="M31.0004 22.6097V17.0097C29.9644 17.0097 29.0124 17.3177 28.2004 17.7937V27.4537C29.0124 27.9297 29.9644 28.2377 31.0004 28.2377C34.0804 28.2377 36.6004 25.7177 36.6004 22.6377H31.0004V22.6097Z" fill="#D24625"/>\n<path d="M19.9124 21.2097C19.9124 18.6897 19.0163 16.5337 17.7003 15.4977C15.6843 13.9297 12.5764 14.2097 12.5764 14.2097H11.3723V33.8097H14.1723V28.3497C15.1523 28.3497 16.3843 28.1257 17.5043 27.2857C19.1003 26.0817 19.8843 24.0377 19.8843 21.1817L19.9124 21.2097ZM15.8523 25.0457C15.3483 25.4377 14.7043 25.5497 14.2003 25.5497V16.8977C14.7323 16.9817 15.3764 17.1497 15.8804 17.5977C16.6924 18.2977 17.1124 19.5017 17.1124 21.1817C17.1124 22.4977 16.8883 24.2337 15.8523 25.0177V25.0457Z" fill="#D24625"/>\n<path d="M26.8625 10.0612H43.551V37.9563H26.8625" stroke="#D24625" stroke-width="2"/>\n<path d="M26.8748 32.0246H39.8748" stroke="#D24625" stroke-width="2"/>\n</svg>\n'},74154:S=>{S.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.728 31.001L15.5721 22.069L13.444 31.001H11.6521L8.6001 17.001H10.8401L12.6321 25.765L14.7041 17.001H16.496L18.5681 25.849L20.36 17.001H22.6001L19.5481 31.001H17.728Z" fill="#2A5699"/>\n<path d="M26.8413 4.54126L4.42773 9.53558V38.5271L26.8413 43.0342V4.54126Z" stroke="#2A5699" stroke-width="2"/>\n<path d="M26.8413 9.90106H43.5298V37.7962H26.8413M26.8413 15.6263H39.5098M26.8413 21.1079H39.5098M26.8413 26.8331H39.5098M26.8413 32.4365H39.5098" stroke="#2A5699" stroke-width="2"/>\n</svg>\n'},80805:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><defs><clipPath id="a"><path fill="none" d="M0 0h33.75v5H0z"/></clipPath></defs><g transform="translate(-516 -872)"><rect width="72" height="64" rx="6" transform="translate(516 872)" fill="none"/><rect width="56" height="46" rx="4" transform="translate(524 880)" fill="none"/><g data-name="Group 14754" transform="rotate(90 519.455 828.779)" fill="#7fc8f4"><rect width="36.729" height="10.229" rx="4" transform="rotate(-90 697.929 120.8)" opacity=".5"/><rect width="36.729" height="10.91" rx="4" transform="rotate(-90 703.725 115.004)" opacity=".5"/><rect width="36.729" height="10.229" rx="4" transform="rotate(-90 709.862 108.867)" opacity=".5"/></g><g transform="rotate(90 -156.375 730.875)"><path d="M4 2.5 0 5V0ZM11 2.5 7 5V0ZM18 2.5 14 5V0ZM25 2.5 21 5V0ZM32 2.5 28 5V0Z" fill="#004fd6"/></g></g></svg>\n'},15335:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g transform="translate(-418 -872)"><rect width="72" height="64" rx="6" transform="translate(418 872)" fill="none"/><rect width="56" height="46" rx="4" transform="translate(426 880)" fill="none"/><g transform="translate(-148.128 117.452)" fill="#7fc8f4"><rect width="22" height="15" rx="4" transform="rotate(-90 690.338 113.21)" opacity=".5"/><rect width="22" height="16" rx="4" transform="rotate(-90 698.838 104.71)" opacity=".5"/><rect width="22" height="15" rx="4" transform="rotate(-90 707.838 95.71)" opacity=".5"/></g><g><path d="m434 890.5-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Z" fill="#004fd6"/></g></g></svg>\n'},85482:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64">\n\t<rect width="72" height="64" fill="none" rx="6"/>\n\t<g stroke="#999" stroke-width="0.5">\n\t\t<rect width="56" height="46" x="8" y="8" fill="#fff" rx="4"/>\n\t\t<rect width="55" height="45" x="8.5" y="8.5" fill="none" rx="3.5"/>\n\t</g>\n\t<g fill="#d1d1d1">\n\t\t<rect width="40" height="6" x="16" y="18" rx="3"/>\n\t\t<rect width="40" height="6" x="16" y="28" rx="3"/>\n\t\t<rect width="40" height="6" x="16" y="38" rx="3"/>\n\t</g>\n</svg>\n'},96153:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64">\n\t<rect width="72" height="64" fill="none" rx="6"/>\n\t<g fill="#7fc8f4" stroke="#006ce0" opacity=".34">\n\t\t<rect width="50" height="43" x="11" y="11" rx="4"/>\n\t\t<rect width="49" height="42" x="11.5" y="11.5" fill="none" rx="3.5"/>\n\t</g>\n</svg>\n'},38926:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39843" transform="translate(484 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="23" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="22" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39845" transform="translate(457 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="23" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="22" height="42" rx="3.5" fill="none"/></g></g></svg>'},73953:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39845" transform="translate(456 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39906" transform="translate(474 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39907" transform="translate(492 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g></g></svg>'},39079:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39845" transform="translate(457 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39908" transform="translate(470 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39909" transform="translate(483 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39910" transform="translate(496 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g></g></svg>'},94309:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><g fill="#afb4c1"><path d="m9 11.8h2v3.3h-2z"/><circle cx="10" cy="12" r="1.5"/></g><g fill="none" stroke="#afb4c1" stroke-miterlimit="10"><path d="m16.5 18.5h-13c-.6 0-1-.4-1-1v-9c0-.6.4-1 1-1h13c.6 0 1 .4 1 1v9c0 .6-.4 1-1 1z"/><path d="M5.5,7V5.5c0-2.2,1.8-4,4-4h1c2.2,0,4,1.8,4,4V7" stroke-width="1.25"/></g></svg>'},53409:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><g transform="translate(143.941 -406.051)"><rect width="2" height="2" transform="translate(-136.941 408.051)" style="fill: #8095b3;"/><rect width="2" height="2" transform="translate(-136.941 413.051)" style="fill: #8095b3;"/><rect width="2" height="2" transform="translate(-136.941 418.051)" style="fill: #8095b3;"/></g><rect width="16" height="16" style="fill: none;"/></svg>\n'},54422:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 1 20 20" enable-background="new 0 0 20 20"><path d="M17,3V1h-3v2H6V1H3v2H0v4v1v12h20V3H17z M15,2h1v3h-1V2z M4,2h1v3H4V2z M19,19H1V8h18V19z M19,7H1V4h2v2h3V4h8\n\tv2h3V4h2V7z" fill="#8095b3"/><path fill="none" stroke="#8095b3" stroke-miterlimit="10" d="m6.5 12.5l3 3 5-5"/></svg>\n'},21695:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><path d="M-26.666,687.452l2.438,2,4.062-4" transform="translate(31.666 -676.453)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/><g transform="translate(0 2)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"><rect width="16" height="14" style="stroke: none;"/><rect x="0.5" y="0.5" width="15" height="13" style="fill: none;"/></g><line x2="16" transform="translate(0 6.5)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/><g transform="translate(2)" style="stroke: #54657d; stroke-miterlimit: 10; fill: #fff;"><rect width="3" height="5" style="stroke: none;"/><rect x="0.5" y="0.5" width="2" height="4" style="fill: none;"/></g><g transform="translate(11)" style="stroke: #54657d; stroke-miterlimit: 10; fill: #fff;"><rect width="3" height="5" style="stroke: none;"/><rect x="0.5" y="0.5" width="2" height="4" style="fill: none;"/></g></svg>\n'},89854:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><g transform="translate(-1816.814 -33.301)"><g transform="translate(1816.814 33.301)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"><circle cx="8" cy="8" r="8" style="stroke: none;"/><circle cx="8" cy="8" r="7.5" style="fill: none;"/></g><path d="M1824.814,36.015v5.244l3.266,3.8" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/></g></svg>\n'},76974:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.a,.b{fill:none;}.b{stroke:#8095b3;stroke-miterlimit:10;}.c{fill:#8095b3;}</style></defs><rect class="a" width="16" height="16"/><rect class="b" width="11" height="9" rx="2" transform="translate(2.5 5.5)"/><path class="c" d="M9,9H7v2H9V9Z"/><path class="b" d="M626.5-136.5v-2a2,2,0,0,1,2-2h1a2,2,0,0,1,2,2v2" transform="translate(-621 142)"/></svg>'},58796:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.error-icon-a{fill:#df1f26;}.error-icon-b,.error-icon-c{fill:none;}.error-icon-b{stroke:#fff;stroke-miterlimit:10;stroke-width:1.5px;}</style></defs><circle class="error-icon-a" cx="7" cy="7" r="7" transform="translate(1 1)"/><line class="error-icon-b" x2="6" y2="6" transform="translate(5 5)"/><line class="error-icon-b" y1="6" x2="6" transform="translate(5 5)"/><rect class="error-icon-c" width="16" height="16"/></svg>'},11342:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16.001" height="16" viewBox="0 0 16.001 16"><defs><style>.warning-icon-a{fill:#ff9800;}.warning-icon-b,.warning-icon-d{fill:none;}.warning-icon-b{stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;}.warning-icon-c{fill:#fff;}</style></defs><g transform="translate(-1330.138 361.759)"><path class="warning-icon-a" d="M1345.172-346.541H1331.1a.964.964,0,0,1-.84-1.438l7.033-12.505a.965.965,0,0,1,1.682,0l7.034,12.505A.965.965,0,0,1,1345.172-346.541Z"/><line class="warning-icon-b" y2="3" transform="translate(1338.139 -355.279)"/><circle class="warning-icon-c" cx="1.25" cy="1.25" r="1.25" transform="translate(1336.889 -350.529)"/></g><rect class="warning-icon-d" width="16" height="16" transform="translate(0.001)"/></svg>'},67525:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.a,.b{fill:none;}.b{stroke:#fff;stroke-linecap:round;stroke-width:1.5px;}</style></defs><g transform="translate(16) rotate(90)"><rect class="a" width="16" height="16"/><path class="b" d="M10.365,0,5.182,5.465,0,0" transform="translate(2.818 5.268)"/></g></svg>'},63853:S=>{S.exports='<svg id="Group_7" data-name="Group 7" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <rect id="Rectangle_7" data-name="Rectangle 7" width="16" height="16" fill="none"/>\n  <line id="Line_5" data-name="Line 5" y1="10" x2="10" transform="translate(3 3)" fill="none" stroke="#999" stroke-miterlimit="10" stroke-width="1"/>\n  <line id="Line_6" data-name="Line 6" x2="10" y2="10" transform="translate(3 3)" fill="none" stroke="#999" stroke-miterlimit="10" stroke-width="1"/>\n</svg>\n'},83225:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n\t<g fill="none">\n\t\t<path d="M0 16V0h16v16z"/>\n\t\t<path d="m14 5-5.5 5.5L3 5" stroke="#006ce0"/>\n\t</g>\n</svg>\n'},6428:S=>{S.exports='<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M7.49134 3.22305C7.49134 2.82264 7.15352 2.49805 6.73681 2.49805C6.32009 2.49805 5.98227 2.82264 5.98227 3.22305V3.41077H2.75453C2.33782 3.41077 2 3.73536 2 4.13577C2 4.53618 2.33782 4.86077 2.75453 4.86077H8.1046C7.97647 5.14655 7.83931 5.42552 7.69554 5.69677C7.2841 6.47305 6.81859 7.18611 6.35614 7.81489C6.03052 7.32801 5.72261 6.82084 5.42587 6.29971C5.22585 5.94845 4.76734 5.81949 4.40177 6.01168C4.03619 6.20387 3.90199 6.64443 4.102 6.9957C4.49601 7.68763 4.91857 8.37339 5.38474 9.03245C5.01375 9.46248 4.68032 9.81285 4.4245 10.0693C4.26253 10.2316 4.13205 10.3559 4.04334 10.4385C3.999 10.4797 3.96513 10.5106 3.94302 10.5305L3.91885 10.5521L3.91369 10.5567C3.60572 10.8261 3.58243 11.285 3.86266 11.5811C4.143 11.8774 4.6202 11.8992 4.92852 11.6298L4.42092 11.0934C4.92852 11.6298 4.92837 11.63 4.92852 11.6298L4.93016 11.6284L4.93303 11.6259L4.94239 11.6176L4.97513 11.5883C5.00304 11.5632 5.0429 11.5269 5.09339 11.4799C5.19436 11.3859 5.33801 11.2489 5.51383 11.0727C5.7348 10.8512 6.00719 10.5671 6.30993 10.2276C6.54806 10.5072 6.79704 10.7786 7.05826 11.0401C7.34683 11.329 7.82447 11.3384 8.12511 11.0611C8.42574 10.7839 8.43553 10.3249 8.14697 10.036C7.84094 9.72969 7.55143 9.40554 7.27557 9.06637C8.14191 7.94752 9.08008 6.50571 9.73299 4.86077H10.7151C11.1318 4.86077 11.4696 4.53618 11.4696 4.13577C11.4696 3.73536 11.1318 3.41077 10.7151 3.41077H9.22026C9.20855 3.41051 9.19687 3.41051 9.18522 3.41077H7.49134V3.22305Z" fill="#0D2E4E"/>\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M9.88447 7.94801C10.2159 7.17997 11.3516 7.1894 11.6692 7.96284L13.9471 13.5101C14.1001 13.8826 13.9098 14.3036 13.5222 14.4506C13.1346 14.5976 12.6963 14.4148 12.5434 14.0423L11.9148 12.5116L9.5486 12.5116L8.88299 14.0539C8.72337 14.4238 8.28192 14.5993 7.89699 14.4459C7.51205 14.2925 7.32941 13.8684 7.48903 13.4985L8.27697 11.6728C8.29592 11.5574 8.34318 11.4511 8.41171 11.3606L9.88447 7.94801ZM10.1744 11.0616H11.3194L10.7611 9.70208L10.1744 11.0616Z" fill="#0D2E4E"/>\n</svg>\n'},18435:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.lsa{fill:#8095b3;}.lsb,.lsc{fill:none;}.lsb{stroke:#8095b3;stroke-miterlimit:10;}</style></defs><path class="lsa" d="M14.5,14l-.9-2.5H10L9.1,14H8.2l3.2-8.4h.8L15.4,14ZM12,7.1c0-.1-.1-.2-.1-.3s-.1-.2-.1-.3h0a.367.367,0,0,1-.1.3c-.1.1,0,.2-.1.3l-1.4,3.7h3.1Z" transform="translate(0.301 1)"/><line class="lsb" x2="10" transform="translate(0.301 2.5)"/><line class="lsb" y2="2" transform="translate(4.801 1)"/><path class="lsb" d="M1.5,11.5S6.2,7.2,8,2" transform="translate(0.301 1)"/><path class="lsb" d="M3,4.5a24.292,24.292,0,0,0,4.5,5.6" transform="translate(0.301 1)"/><rect class="lsc" width="16" height="16"/></svg>'},98728:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n\t<g fill="none">\n\t\t<path d="M16 0v16H0V0z"/>\n\t\t<path d="m2 11 5.5-5.5L13 11" stroke="#006ce0"/>\n\t</g>\n</svg>\n'},36141:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n<defs><style>.arrow-down-svg-icon{fill:none;}.arrow-down-svg-icon{stroke:#006ce0;stroke-width:1.1px;}</style></defs>\n<g transform="translate(16 16) rotate(180)"><path class="arrow-down-svg-icon" d="M7,13,0,6.5,7,0" transform="translate(14.548 5.25) rotate(90)"/></g></svg>'},15894:S=>{S.exports='<svg id="Component_654_1" data-name="Component 654 \u2013 1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <rect id="Rectangle_6580" data-name="Rectangle 6580" width="16" height="16" fill="none"/>\n  <line id="Line_831" data-name="Line 831" y1="4" x2="4" transform="translate(2 10)" fill="none" stroke="#54657d" stroke-miterlimit="10" stroke-width="1"/>\n  <line id="Line_832" data-name="Line 832" y1="4" x2="4" transform="translate(10 2)" fill="none" stroke="#54657d" stroke-miterlimit="10" stroke-width="1"/>\n  <path id="Path_7086" data-name="Path 7086" d="M-57.433,448.76h-4.5v-4.5Z" transform="translate(70.933 -441.76)" fill="#54657d"/>\n  <path id="Path_7087" data-name="Path 7087" d="M-69.585,451.912h4.5v4.5Z" transform="translate(72.085 -442.912)" fill="#54657d"/>\n</svg>\n'},30360:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n\t<defs>\n\t\t<style>.a {\n\t\t\tfill: #54657d;\n\t\t}\n\n\t\t.b, .c {\n\t\t\tfill: none;\n\t\t}\n\n\t\t.b {\n\t\t\tstroke: #54657d;\n\t\t\tstroke-miterlimit: 10;\n\t\t}</style>\n\t</defs>\n\t<path class="a" d="M-347,453.292h-5v-5Z" transform="translate(354 -439.292)"/>\n\t<path class="a" d="M-340,446.292v-5h-5Z" transform="translate(354 -439.292)"/>\n\t<line class="b" y1="4" x2="4" transform="translate(9 3)"/>\n\t<line class="b" y1="4" x2="4" transform="translate(3 9)"/>\n\t<rect class="c" width="16" height="16"/>\n</svg>\n'},75741:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><style>.info-icon-a,.info-icon-c{fill:none;}.info-icon-a{stroke:#22ac14;stroke-miterlimit:10;}.info-icon-b{fill:#22ac14;}</style></defs><g transform="translate(2.5 2.5)"><circle class="info-icon-a" cx="9.5" cy="9.5" r="9.5"/><rect class="info-icon-b" width="2" height="7" transform="translate(8.5 7.5)"/><rect class="info-icon-b" width="2" height="2" transform="translate(8.5 4.5)"/></g><rect class="info-icon-c" width="24" height="24"/></svg>\n'},22574:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n\t<path fill="#54657d" d="M8.54 16h-.99a1.4 1.4 0 0 1-1.1-.46 1.51 1.51 0 0 1-.41-1.04v-.8a.95.95 0 0 0-.3-.12.53.53 0 0 1-.23-.09l-.59.5a1.54 1.54 0 0 1-2.2 0l-.71-.7a1.48 1.48 0 0 1-.37-.5 1.43 1.43 0 0 1-.13-.58A1.54 1.54 0 0 1 2 11.1l.61-.61q-.1-.14-.15-.25A.5.5 0 0 1 2.4 10h-.9A1.43 1.43 0 0 1 0 8.5V7.49a1.47 1.47 0 0 1 .4-1.1A1.5 1.5 0 0 1 1.5 6h.8a.95.95 0 0 0 .1-.28.38.38 0 0 1 .1-.21L2 4.89a1.73 1.73 0 0 1-.37-.52 1.38 1.38 0 0 1 0-1.17 1.75 1.75 0 0 1 .36-.51l.7-.7a1.6 1.6 0 0 1 2.22 0l.6.6a.46.46 0 0 1 .22-.18l.3-.12v-.8A1.47 1.47 0 0 1 6.44.4a1.5 1.5 0 0 1 1.1-.4h1a1.5 1.5 0 0 1 1.1.4 1.46 1.46 0 0 1 .4 1.1v.8a1.45 1.45 0 0 0 .3.09.4.4 0 0 1 .22.11l.6-.51a1.6 1.6 0 0 1 2.2 0l.7.7a1.6 1.6 0 0 1 .02 2.2l-.61.6.15.25a.51.51 0 0 1 .06.25h.8a1.42 1.42 0 0 1 1.1.44A1.5 1.5 0 0 1 16 7.5V8.5a1.41 1.41 0 0 1-.44 1.08 1.5 1.5 0 0 1-1.07.42h-.8a.96.96 0 0 0-.1.28.32.32 0 0 1-.11.21l.61.61a1.55 1.55 0 0 1 0 2.18l-.7.7a1.54 1.54 0 0 1-2.22 0l-.59-.58a2.17 2.17 0 0 0-.26.13.48.48 0 0 1-.26.05v.8a1.65 1.65 0 0 1-.4 1.19 1.45 1.45 0 0 1-1.1.43Zm-3.3-3.92.4.22a2.03 2.03 0 0 0 .5.23c.2.06.4.12.6.16l.4.1v1.6a.59.59 0 0 0 .13.33.43.43 0 0 0 .37.18h1.01a.53.53 0 0 0 .32-.14.45.45 0 0 0 .18-.38V12.8l.4-.1a2.33 2.33 0 0 0 .55-.2 2.4 2.4 0 0 1 .56-.2l.4-.2 1.1 1.2a.43.43 0 0 0 .33.16.3.3 0 0 0 .29-.16l.68-.68a.49.49 0 0 0 .17-.36.26.26 0 0 0-.17-.26l-1.2-1.1.21-.4a2.63 2.63 0 0 0 .24-.52c.06-.18.12-.38.16-.58l.1-.4h1.6a.56.56 0 0 0 .34-.14.43.43 0 0 0 .17-.35V7.49a.53.53 0 0 0-.14-.32.46.46 0 0 0-.38-.17h-1.6l-.09-.4a2.58 2.58 0 0 0-.2-.56 2.62 2.62 0 0 1-.2-.54l-.21-.4 1.2-1.22a.42.42 0 0 0 .17-.33.26.26 0 0 0-.16-.26l-.69-.7a.54.54 0 0 0-.35-.14.26.26 0 0 0-.26.14l-1.12 1.2-.4-.19a1.8 1.8 0 0 0-.51-.24l-.6-.15-.49-.12v-1.6a.49.49 0 0 0-.18-.32.5.5 0 0 0-.34-.17h-.99a.5.5 0 0 0-.34.17.48.48 0 0 0-.18.32v1.6l-.4.11a2.67 2.67 0 0 0-.55.19 4.24 4.24 0 0 1-.56.2l-.28.29-1.1-1.2a.54.54 0 0 0-.36-.14.27.27 0 0 0-.26.15l-.8.7a.42.42 0 0 0-.16.32.3.3 0 0 0 .16.28l1.2 1.1-.18.5a1.76 1.76 0 0 0-.25.51l-.17.59-.2.3h-1.6a.5.5 0 0 0-.34.17.49.49 0 0 0-.18.32v1a.49.49 0 0 0 .18.32.5.5 0 0 0 .34.19h1.6l.1.4a2.25 2.25 0 0 0 .2.55 2.27 2.27 0 0 1 .2.55l.2.4-1.2 1.1a.23.23 0 0 0-.1.15 1.32 1.32 0 0 0 0 .15.83.83 0 0 0 0 .14.33.33 0 0 0 .1.17l.7.68a.5.5 0 0 0 .35.16.26.26 0 0 0 .26-.16ZM8 11a2.86 2.86 0 0 1-2.13-.9A2.92 2.92 0 0 1 5 8a3 3 0 0 1 6 0 2.92 2.92 0 0 1-.87 2.11A2.86 2.86 0 0 1 8 11Zm0-5a2 2 0 0 0-1.99 2 1.95 1.95 0 0 0 .59 1.43 1.98 1.98 0 0 0 2.8 0A1.95 1.95 0 0 0 10 8a2 2 0 0 0-2-2Z"/>\n</svg>\n'},80507:S=>{S.exports='<svg id="Component_661_1" data-name="Component 661 \u2013 1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <rect id="Rectangle_6417" data-name="Rectangle 6417" width="16" height="16" transform="translate(0 16) rotate(-90)" fill="none"/>\n  <path id="Path_6923" data-name="Path 6923" d="M-1147.478,6876.829l-6,6c.008-.008,6,6,6,6" transform="translate(-6874.329 -1139.978) rotate(-90)" fill="none" stroke="#006ce0" stroke-width="1"/>\n  <path id="Path_7027" data-name="Path 7027" d="M-1147.478,6876.829l-6,6c.008-.008,6,6,6,6" transform="translate(-6874.329 -1144.978) rotate(-90)" fill="none" stroke="#006ce0" stroke-width="1"/>\n</svg>\n'},77578:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g transform="translate(2.5 1.5)"><line x2="12" fill="none" stroke-miterlimit="10" stroke="#54657d" transform="translate(0 7)"/><line y1="12" fill="none" stroke-miterlimit="10" stroke="#54657d" transform="translate(6 1)"/></g><rect fill="none" width="16"  height="16"/></svg>\n'},50312:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect class="a" fill="none" width="16" height="16"/><g transform="translate(828.001 -256.344)"><g class="b" stroke-miterlimit="10" fill="none" transform="translate(-0.562 -0.563)"><path class="d" d="M-822.721,270.046a2.984,2.984,0,0,0-3,.861l-.715-.714a2.983,2.983,0,0,0,.862-3l9.281-9.282,2.856,2.856Z"/><path class="e" stroke="none" fill="#54657d" d="M -824.6316528320313 269.1003723144531 C -824.2100830078125 268.9744262695313 -823.8204345703125 268.9347534179688 -823.4967651367188 268.9347534179688 C -823.3335571289063 268.9347534179688 -823.1836547851563 268.9448852539063 -823.0501098632813 268.9602355957031 L -814.8533325195313 260.7627868652344 L -816.2953491210938 259.3211669921875 L -824.4864501953125 267.5129089355469 C -824.4336547851563 267.9642028808594 -824.45556640625 268.5171203613281 -824.6316528320313 269.1003723144531 M -825.7241821289063 270.9070129394531 C -826.014892578125 270.6171875 -826.1371459960938 270.4949951171875 -826.4390258789063 270.1930847167969 C -825.00927734375 268.7652282714844 -825.5767211914063 267.18896484375 -825.5767211914063 267.18896484375 L -816.2954711914063 257.9070129394531 L -813.4390258789063 260.7626647949219 L -822.7213134765625 270.045654296875 C -822.7213134765625 270.045654296875 -823.029541015625 269.9347534179688 -823.4967651367188 269.9347534179688 C -824.0857543945313 269.9347534179688 -824.927490234375 270.1108093261719 -825.7241821289063 270.9070129394531 Z"/></g><path class="c" stroke="#54657d" fill="none" d="M.5.5l2,2" transform="translate(-819.501 259.844)"/></g></svg>'},57421:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="65.898" height="50" viewBox="0 0 65.898 50">\n  <g id="Group_10554" data-name="Group 10554" transform="translate(-630.824 -282)">\n    <g id="Group_10553" data-name="Group 10553" transform="translate(-8 4)">\n      <rect id="Rectangle_23319" data-name="Rectangle 23319" width="24" height="8" transform="translate(640 311) rotate(-90)" fill="#757575" opacity="0.15"/>\n      <rect id="Rectangle_23320" data-name="Rectangle 23320" width="15" height="8" transform="translate(655 313) rotate(-90)" fill="#757575" opacity="0.36"/>\n      <rect id="Rectangle_23321" data-name="Rectangle 23321" width="50" height="8" transform="translate(671 328) rotate(-90)" fill="#757575" opacity="0.16"/>\n      <rect id="Rectangle_23326" data-name="Rectangle 23326" width="20" height="8" transform="translate(671 298) rotate(-90)" fill="#757575" opacity="0.36"/>\n      <rect id="Rectangle_23322" data-name="Rectangle 23322" width="30" height="8" transform="translate(687 311) rotate(-90)" fill="#757575" opacity="0.12"/>\n      <rect id="Rectangle_23327" data-name="Rectangle 23327" width="17" height="8" transform="translate(687 298) rotate(-90)" fill="#757575" opacity="0.36"/>\n      <rect id="Rectangle_23323" data-name="Rectangle 23323" width="11" height="8" transform="translate(640 298) rotate(-90)" fill="#757575" opacity="0.15"/>\n      <rect id="Rectangle_23324" data-name="Rectangle 23324" width="25" height="8" transform="translate(655 313) rotate(-90)" fill="#757575" opacity="0.19"/>\n      <path id="Path_9959" data-name="Path 9959" d="M223.923,2054c8.8,1.753,9.21,7.979,18.455,7.661s19.38-15.618,29.076-15.618,13.109-8.362,16.091-8.043" transform="translate(416.077 -1753.707)" fill="none" stroke="#757575" stroke-linecap="round" stroke-width="2" opacity="0.36"/>\n    </g>\n  </g>\n</svg>\n'},50715:S=>{S.exports='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0 1.49845H0.783829V4.00128H2.48383V0.000488281H0V1.49845Z" fill="#FF4013"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14 1.00089H5.08699V3.00089H14V1.00089ZM14 6.00052H5.08699V8.00052H14V6.00052ZM0 12.7274V13.9998H3.19044V9.99979H0V11.1761H1.5V11.5073H0.75V12.3962H1.5V12.7274H0ZM14 10.9998H5.08699V12.9998H14V10.9998Z" fill="#FF4013"/>\n<path d="M2.14577e-05 7.56383V8.99972L3.15902 8.99977V7.56383L2.26167 7.56378L3.15902 6.86625L3.15902 5.00135L2.14577e-05 5.00128L0 6.43327H1.5L2.14577e-05 7.56383Z" fill="#FF4013"/>\n</svg>\n'},23048:S=>{S.exports='<svg id="Boolean_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Rectangle_12" transform="translate(1 1)" fill="none" stroke="#ff4013" stroke-width="2"><rect width="14" height="14" stroke="none"/><rect x="1" y="1" width="12" height="12" fill="none"/></g><path id="Path_30" d="M10.5,4.5,5.912,9,4,7.162" transform="translate(1 0.5)" fill="rgba(0,0,0,0)" stroke="#ff4013" stroke-width="2"/></svg>\n'},84369:S=>{S.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8.183.779c2.084.007 2.813.35 4.468 1.861l-1.875 2.424-2.95-1.229Z" fill="#ff1c06"/><path d="M7.643 14.846c-2.083-.006-2.813-.35-4.467-1.861l1.875-2.424L8 11.79Z" fill="#ffc6b8"/><path d="M15.024 8.156c-.064 2.22-.431 3.006-2 4.809l-2.4-1.931 1.322-3.175Z" fill="#ff4013"/><path d="M13.074 3.143c1.5 1.443 1.8 2.195 1.949 4.431l-3.03.46-1.286-2.925Z" fill="#ff320e"/><path d="M3.224 12.86c-1.5-1.443-1.795-2.195-1.948-4.43l3.029-.46 1.287 2.925Z" fill="#ffe8e3"/><path d="M12.999 12.98c-1.578 1.562-2.386 1.878-4.769 2.1l-.4-3.055 3.149-1.384Z" fill="#ff795a"/><g transform="translate(-798.326 92.909)" fill="none"><path d="M798.326-92.909h16v16h-16z"/><circle cx="7" cy="7" r="7" transform="translate(799.326 -91.909)" stroke="#ff4013" stroke-width="2"/><circle cx="3" cy="3" r="3" transform="translate(803.326 -87.909)" stroke="#ff4013" stroke-width="2"/><g stroke="#ff4013" stroke-width="2"><path d="M806.326-81.454v3.686"/><path d="M806.326-88.519v-3.386"/><path d="M803.211-84.909h-3.685"/><path d="M812.826-84.909h-3.387"/><path d="M804.126-87.162c-.8-.8-2.306-2.252-3.1-3.05"/><path d="M811.628-79.605c-.729-.73-2.31-2.2-3.04-2.926"/><path d="m804.02-82.6-3 3"/><path d="m811.629-90.213-3.088 2.978"/></g></g></svg>\n'},77054:S=>{S.exports='<svg id="Date_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Rectangle_6448" transform="translate(1 3)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><rect width="14" height="12" stroke="none"/><rect x="1" y="1" width="12" height="10" fill="none"/></g><line id="Line_764" x2="12" transform="translate(2 7)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_11729" d="M176.171,1073.754v3" transform="translate(-171.171 -1072.754)" fill="none" stroke="#ff4013" stroke-width="2"/><path id="Path_11730" d="M176.171,1073.754v3" transform="translate(-165.171 -1072.754)" fill="none" stroke="#ff4013" stroke-width="2"/></svg>\n'},46283:S=>{S.exports='<svg id="Datetime_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g id="Icon_left_panel_date_time_16x16_heavy" transform="translate(0)"><rect id="Rectangle_6448" width="16" height="16" fill="none"/><path id="Path_6271" d="M1895.033,260.278h-4.149v-9h12v2" transform="translate(-1889.884 -248.278)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7772" d="M0,0H4.5" transform="translate(1 6)" fill="none" stroke="#ff4013" stroke-width="2"/><line id="Line_771" y2="4" transform="translate(4)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><line id="Line_772" y2="4" transform="translate(10)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><g id="Path_6272" transform="translate(-1889.764 -248.582)" fill="none" stroke-miterlimit="10"><path d="M1905.764,258.584a5,5,0,1,1-5-5A5,5,0,0,1,1905.764,258.584Z" stroke="none"/><path d="M 1900.7626953125 261.5840454101562 C 1902.417602539062 261.5840454101562 1903.763916015625 260.23828125 1903.763916015625 258.5840759277344 C 1903.763916015625 256.9292602539062 1902.417602539062 255.5829772949219 1900.7626953125 255.5829772949219 C 1899.109130859375 255.5829772949219 1897.763916015625 256.9292602539062 1897.763916015625 258.5840759277344 C 1897.763916015625 260.23828125 1899.109130859375 261.5840454101562 1900.7626953125 261.5840454101562 M 1900.7626953125 263.5840454101562 C 1898.000244140625 263.5840454101562 1895.763916015625 261.3454284667969 1895.763916015625 258.5840759277344 C 1895.763916015625 255.8215942382812 1898.000244140625 253.5829772949219 1900.7626953125 253.5829772949219 C 1903.524169921875 253.5829772949219 1905.763916015625 255.8215942382812 1905.763916015625 258.5840759277344 C 1905.763916015625 261.3454284667969 1903.524169921875 263.5840454101562 1900.7626953125 263.5840454101562 Z" stroke="none" fill="#ff4013"/></g><path id="Path_6273" d="M1900.1,255.194v4h2.5" transform="translate(-1889.098 -249.194)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></g></svg>\n'},75610:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M2 3.5H14V12C14 12.1326 13.9473 12.2598 13.8536 12.3536C13.7598 12.4473 13.6326 12.5 13.5 12.5H2.5C2.36739 12.5 2.24021 12.4473 2.14645 12.3536C2.05268 12.2598 2 12.1326 2 12V3.5Z" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14 3.5L8 9L2 3.5" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},88745:S=>{S.exports='<svg id="File_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Group_7055" transform="translate(-733.278 92.545)"><g id="Rectangle_6454" transform="translate(735.278 -91.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><rect width="12" height="14" stroke="none"/><rect x="1" y="1" width="10" height="12" fill="none"/></g><line id="Line_774" x2="6" transform="translate(738.278 -87.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><line id="Line_775" x2="6" transform="translate(738.278 -84.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><line id="Line_777" x2="4" transform="translate(738.278 -81.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></g></svg>\n'},72428:S=>{S.exports='<svg id="Float_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g id="Group_14515" transform="translate(-144 -422)"><rect id="Rectangle_39433" width="16" height="16" transform="translate(144 422)" fill="none"/></g><path id="Path_11302" d="M6.957-4.64a6.469,6.469,0,0,1-.8,3.6A2.764,2.764,0,0,1,3.707.127,2.732,2.732,0,0,1,1.285-1.079,6.377,6.377,0,0,1,.47-4.64a6.53,6.53,0,0,1,.793-3.621A2.752,2.752,0,0,1,3.707-9.426,2.739,2.739,0,0,1,6.135-8.208,6.39,6.39,0,0,1,6.957-4.64Zm-4.539,0a7.22,7.22,0,0,0,.3,2.447,1.022,1.022,0,0,0,.993.74A1.033,1.033,0,0,0,4.7-2.2,7.02,7.02,0,0,0,5-4.64a7,7,0,0,0-.308-2.453,1.034,1.034,0,0,0-.987-.746,1.025,1.025,0,0,0-.99.746A7.208,7.208,0,0,0,2.418-4.64ZM7.759-.908a1.064,1.064,0,0,1,.286-.806,1.158,1.158,0,0,1,.832-.273,1.125,1.125,0,0,1,.816.279,1.061,1.061,0,0,1,.289.8,1.061,1.061,0,0,1-.292.79,1.105,1.105,0,0,1-.812.289,1.138,1.138,0,0,1-.825-.282A1.057,1.057,0,0,1,7.759-.908ZM13.69,0H11.728V-5.37l.019-.882.032-.965q-.489.489-.679.641l-1.066.857L9.088-6.9l2.99-2.38H13.69Z" transform="translate(0.53 12.426)" fill="#ff4013"/></svg>\n'},35429:S=>{S.exports='<svg id="Guid_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_42308" width="16" height="16" fill="none"/><path id="Path_11737" d="M1.162,0H3.43V-9.8H1.162Zm9.926-10.388v3.654a2.894,2.894,0,0,0-2.254-.91A3.661,3.661,0,0,0,5.068-3.766,3.661,3.661,0,0,0,8.834.112a2.9,2.9,0,0,0,2.352-.98V0h2.086V-10.388ZM9.212-1.68A1.911,1.911,0,0,1,7.28-3.766,1.911,1.911,0,0,1,9.212-5.852,1.908,1.908,0,0,1,11.13-3.766,1.908,1.908,0,0,1,9.212-1.68Z" transform="translate(0.838 13)" fill="#ff4013" stroke="rgba(0,0,0,0)" stroke-width="1"/></svg>\n'},63322:S=>{S.exports='<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_1742_819)">\n<path d="M10.913 8.99277L7.40833 13.0074H13.0074V11.2395L10.913 8.99277ZM10.8641 6.00745L15.0074 10.4519V15.0074H3.00745L10.8641 6.00745Z" fill="#ff4013"/>\n<path d="M3.43597 9.72806C2.87697 10.2871 2.20496 9.92807 1.64496 9.37007C1.08596 8.81107 0.726988 8.13807 1.28699 7.57907L3.07794 5.78806C3.63694 5.22906 4.30898 5.58806 4.86798 6.14606C5.42798 6.70506 5.78595 7.37706 5.22595 7.93706L3.43597 9.72806Z" stroke="#ff4013" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M7.93689 5.22705C7.37689 5.78605 6.70591 5.42704 6.14691 4.86804C5.58691 4.30904 5.22894 3.63704 5.78894 3.07804L7.57892 1.28704C8.13892 0.728043 8.80993 1.08704 9.36993 1.64604C9.92993 2.20504 10.2879 2.87704 9.72888 3.43704L7.93689 5.22705Z" stroke="#ff4013" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M4.70691 6.51907L6.51791 4.70807" stroke="#ff4013" stroke-width="2"/>\n<path d="M11.301 2.00702H14.0079V14.007H2.00793V11.581" stroke="#ff4013" stroke-width="2"/>\n</g>\n<defs>\n<clipPath id="clip0_1742_819">\n<rect width="16.007" height="16.007" fill="#ff4013"/>\n</clipPath>\n</defs>\n</svg>\n'},69194:S=>{S.exports='<svg id="Integer_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_39434" width="16" height="16" fill="none"/><path id="Path_11303" d="M5.37,0H3.409V-5.37l.019-.882.032-.965q-.489.489-.679.641l-1.066.857L.768-6.9l2.99-2.38H5.37Zm9.007-4.64a6.469,6.469,0,0,1-.8,3.6A2.764,2.764,0,0,1,11.127.127,2.732,2.732,0,0,1,8.706-1.079,6.377,6.377,0,0,1,7.89-4.64a6.53,6.53,0,0,1,.793-3.621,2.752,2.752,0,0,1,2.444-1.165,2.739,2.739,0,0,1,2.428,1.219A6.39,6.39,0,0,1,14.377-4.64Zm-4.539,0a7.22,7.22,0,0,0,.3,2.447,1.022,1.022,0,0,0,.993.74,1.033,1.033,0,0,0,.99-.749,7.02,7.02,0,0,0,.3-2.437,7,7,0,0,0-.308-2.453,1.034,1.034,0,0,0-.987-.746,1.025,1.025,0,0,0-.99.746A7.208,7.208,0,0,0,9.839-4.64Z" transform="translate(0.428 13)" fill="#ff4013"/></svg>\n'},26634:S=>{S.exports='<svg id="Lookup_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g id="Group_6916" transform="translate(2.277 2)"><g id="Group_6915" transform="translate(-0.277)"><circle id="Ellipse_237" cx="4.5" cy="4.5" r="4.5" fill="none" stroke="#ff4013" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path id="Path_6243" d="M.344.344,4.123,4.123" transform="translate(7.877 7.876)" fill="none" stroke="#ff4013" stroke-width="2"/></g></g><rect id="Rectangle_24756" width="16" height="16" fill="none"/></svg>\n'},37786:S=>{S.exports='<svg id="Money_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><path id="Path_7070" d="M-318.645,863.293h-6v-8h14v4" transform="translate(325.645 -852.293)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7071" d="M-322.646,855.292a2,2,0,0,1-2,2" transform="translate(326.646 -851.292)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7072" d="M-312.246,857.292a2,2,0,0,1-2-2" transform="translate(326.246 -851.292)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7073" d="M-324.646,861.692a2,2,0,0,1,2,2" transform="translate(326.646 -853.692)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><g id="Ellipse_1363" transform="translate(6 5)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><circle cx="2" cy="2" r="2" stroke="none"/><circle cx="2" cy="2" r="1" fill="none"/></g><path id="Path_7074" d="M-310.846,861.425c0,.737-1.12,1.333-2.5,1.333s-2.5-.6-2.5-1.333,1.12-1.333,2.5-1.333S-310.846,860.69-310.846,861.425Z" transform="translate(325.846 -851.092)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7075" d="M-310.846,863.292c0,.589-1.12,1.333-2.5,1.333s-2.5-.744-2.5-1.333" transform="translate(325.846 -850.292)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></svg>\n'},6182:S=>{S.exports='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5.3353 1.83815L6.26378 1.46676L6.26378 1.46676L5.3353 1.83815ZM6.03813 3.59524L5.10965 3.96663L5.10965 3.96663L6.03813 3.59524ZM5.82454 4.94398L5.05632 4.3038L5.0563 4.30383L5.82454 4.94398ZM5.44629 5.39792L6.21451 6.03811L6.21453 6.03808L5.44629 5.39792ZM5.52758 7.19434L4.82047 7.90144L4.8205 7.90147L5.52758 7.19434ZM6.8057 8.47236L7.5128 7.76526L7.51278 7.76523L6.8057 8.47236ZM8.60205 8.55382L7.96198 7.7855L7.96187 7.78559L8.60205 8.55382ZM9.05613 8.17554L9.69619 8.94386L9.69631 8.94376L9.05613 8.17554ZM10.4048 7.96192L10.7762 7.03345L10.7761 7.03344L10.4048 7.96192ZM12.1617 8.66476L11.7903 9.59322L11.7903 9.59323L12.1617 8.66476ZM12.9999 9.90268H11.9999V9.90272L12.9999 9.90268ZM13 11.7369H14V11.7368L13 11.7369ZM4.09733 2C4.23363 2 4.3562 2.08298 4.40682 2.20954L6.26378 1.46676C5.90943 0.580885 5.05144 0 4.09733 0V2ZM4.40682 2.20953L5.10965 3.96663L6.96661 3.22386L6.26378 1.46676L4.40682 2.20953ZM5.10965 3.96663C5.15517 4.08044 5.13462 4.20985 5.05632 4.3038L6.59277 5.58417C7.14152 4.92566 7.28485 4.01947 6.96661 3.22385L5.10965 3.96663ZM5.0563 4.30383L4.67804 4.75777L6.21453 6.03808L6.59279 5.58414L5.0563 4.30383ZM4.67807 4.75774C3.90567 5.68462 3.96693 7.0479 4.82047 7.90144L6.23468 6.48723C6.11298 6.36552 6.10396 6.17076 6.21451 6.03811L4.67807 4.75774ZM4.8205 7.90147L6.09862 9.17949L7.51278 7.76523L6.23466 6.4872L4.8205 7.90147ZM6.09859 9.17947C6.95196 10.0328 8.31517 10.0946 9.24224 9.32204L7.96187 7.78559C7.82939 7.89599 7.63468 7.88713 7.5128 7.76526L6.09859 9.17947ZM9.24212 9.32213L9.69619 8.94386L8.41606 7.40722L7.96198 7.7855L9.24212 9.32213ZM9.69631 8.94376C9.79033 8.86541 9.91963 8.8449 10.0334 8.8904L10.7761 7.03344C9.98045 6.71516 9.07438 6.85861 8.41594 7.40732L9.69631 8.94376ZM10.0333 8.89039L11.7903 9.59322L12.5331 7.73629L10.7762 7.03345L10.0333 8.89039ZM11.7903 9.59323C11.917 9.64389 11.9999 9.76649 11.9999 9.90268H13.9999C13.9999 8.94847 13.4189 8.09059 12.5331 7.73628L11.7903 9.59323ZM11.9999 9.90272L12 11.7369L14 11.7368L13.9999 9.90264L11.9999 9.90272ZM12 11.7369C12 11.8823 11.8822 12 11.737 12V14C12.987 14 14 12.9867 14 11.7369H12ZM11.737 12C6.35945 12 2 7.64067 2 2.26318H0C0 8.74528 5.25492 14 11.737 14V12ZM2 2.26318C2 2.11782 2.11785 2 2.26316 2V0C1.01322 0 0 1.0133 0 2.26318H2ZM2.26316 2H4.09733V0H2.26316V2Z" fill="#FF4013"/>\n</svg>\n'},53771:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 1H3C1.89543 1 1 1.89543 1 3V13C1 14.1046 1.89543 15 3 15H13C14.1046 15 15 14.1046 15 13V3C15 1.89543 14.1046 1 13 1Z" stroke="#FF4013" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M9 12H7V6H4V4H12V6H9V12Z" fill="#FF4013"/>\n</svg>\n'},77732:S=>{S.exports='<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.14 6.90901C5.13775 7.50618 5.25259 8.098 5.478 8.65101L1.5 12.629V15.229H4.1V13.669H5.66V12.109H7.22L8.078 11.251C8.631 11.4764 9.22282 11.5912 9.82 11.589C10.7456 11.589 11.6504 11.3145 12.4201 10.8003C13.1897 10.286 13.7895 9.55512 14.1438 8.69996C14.498 7.84481 14.5907 6.90381 14.4101 5.99598C14.2295 5.08815 13.7838 4.25426 13.1293 3.59975C12.4747 2.94524 11.6409 2.49951 10.733 2.31893C9.82519 2.13835 8.8842 2.23103 8.02904 2.58525C7.17388 2.93947 6.44297 3.53932 5.92872 4.30894C5.41448 5.07856 5.14 5.98339 5.14 6.90901ZM12.4832 5.95178C12.4832 6.84671 11.7577 7.57221 10.8628 7.57221C9.96785 7.57221 9.24236 6.84671 9.24236 5.95178C9.24236 5.05684 9.96785 4.33135 10.8628 4.33135C11.7577 4.33135 12.4832 5.05684 12.4832 5.95178Z" fill="#FF4013"/>\n</svg>\n'},98873:S=>{S.exports='<svg id="Text_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_39432" width="16" height="16" fill="none"/><path id="Path_11304" d="M5.113,0H2.994V-8.23H.28V-9.994H7.827V-8.23H5.113Z" transform="translate(4 13)" fill="#ff4013"/></svg>\n'},99342:S=>{S.exports='<svg id="Time_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Ellipse_1346" transform="translate(1 1)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><circle cx="7" cy="7" r="7" stroke="none"/><circle cx="7" cy="7" r="6" fill="none"/></g><path id="Path_6908" d="M1824.814,31.345v6h3" transform="translate(-1816.814 -29.345)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></svg>\n'},97947:S=>{S.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2 8H14" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8 13.8375C9.38071 13.8375 10.5 11.2239 10.5 7.99998C10.5 4.77601 9.38071 2.16248 8 2.16248C6.61929 2.16248 5.5 4.77601 5.5 7.99998C5.5 11.2239 6.61929 13.8375 8 13.8375Z" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},68211:()=>{}}]);